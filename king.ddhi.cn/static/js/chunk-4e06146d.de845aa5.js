(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4e06146d"],{"13d5":function(e,t,a){"use strict";var s=a("23e7"),r=a("d58f").left,i=a("a640"),l=a("ae40"),n=i("reduce"),o=l("reduce",{1:0});s({target:"Array",proto:!0,forced:!n||!o},{reduce:function(e){return r(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"3d5b":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.loading?e._e():a("div",{staticClass:"shopSet"},[a("div",{staticClass:"box1"},[1==e.i?a("div",[a("el-steps",{attrs:{active:e.stepNum,"align-left":"",space:200}},e._l(e.reserveOrderData.progress,(function(e){return a("el-step",{key:e.status,attrs:{title:e.status_desc,description:e.status_time}})})),1)],1):e._e(),a("div",{staticClass:"order-nav01"},[e.reserveOrderData.order_info?a("div",{staticClass:"nav01-1"},[a("div",{staticClass:"n-title"},[e._v("订单信息")]),a("div",[a("div",{staticClass:"info-nav"},[a("div",[e._v("订单号码："+e._s(e.reserveOrderData.order_info.order_no))]),a("div",[e._v("支付时间： "+e._s(e.reserveOrderData.order_info.pay_time))])]),a("div",{staticClass:"info-nav"},[0==e.reserveOrderData.order_info.pay_type?a("div",[e._v("支付方式： 未支付")]):e._e(),1==e.reserveOrderData.order_info.pay_type?a("div",[e._v("支付方式： 支付宝")]):e._e(),2==e.reserveOrderData.order_info.pay_type?a("div",[e._v("支付方式： 微信")]):e._e(),3==e.reserveOrderData.order_info.pay_type?a("div",[e._v("支付方式： 银行卡")]):e._e(),4==e.reserveOrderData.order_info.pay_type?a("div",[e._v("支付方式： 信用卡")]):e._e(),5==e.reserveOrderData.order_info.pay_type?a("div",[e._v("支付方式： 现金")]):e._e(),6==e.reserveOrderData.order_info.pay_type?a("div",[e._v("支付方式： APP用户余额")]):e._e(),7==e.reserveOrderData.order_info.pay_type?a("div",[e._v("支付方式： 商家签单")]):e._e(),8==e.reserveOrderData.order_info.pay_type?a("div",[e._v("支付方式： 先消费后结算")]):e._e(),9==e.reserveOrderData.order_info.pay_type?a("div",[e._v("支付方式： 苹果支付")]):e._e(),a("div",[e._v("支付账户： "+e._s(e.reserveOrderData.order_info.order_trade_no))])])])]):e._e()])]),""!=e.reserveOrderData.shopping_info?a("div",{staticClass:"box1"},[a("div",{staticClass:"n-title"},[e._v("点单明细")]),[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.reserveOrderData.shopping_info,border:"","summary-method":e.getSummaries,"show-summary":"","sum-text":"小计"}},[a("el-table-column",{attrs:{prop:"goods_name",label:"商品名称"}}),a("el-table-column",{attrs:{label:"商品图片",prop:"goods_image"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-image",{staticClass:"shop-img",attrs:{src:e.row.goods_image}},[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[a("i",{staticClass:"el-icon-picture-outline"})])])]}}],null,!1,2242182441)}),a("el-table-column",{attrs:{label:"价格",prop:"goods_price"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("￥ "+e._s(t.row.goods_price/100))]}}],null,!1,2306122607)}),a("el-table-column",{attrs:{label:"规格",prop:"goods_unit"}}),a("el-table-column",{attrs:{label:"数量",prop:"goods_num"}})],1)]],2):e._e(),e.reserveOrderData.group_buy_info?a("div",{staticClass:"box1"},[e._m(0),[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.reserveOrderData.group_buy_info,border:"","summary-method":e.getSumGroupbuy,"show-summary":"","sum-text":"小计"}},[a("el-table-column",{attrs:{prop:"goods_name",label:"商品名称"}}),a("el-table-column",{attrs:{label:"规格",prop:"goods_unit"}}),a("el-table-column",{attrs:{label:"数量",prop:"goods_num"}}),a("el-table-column",{attrs:{label:"价格",prop:"goods_price"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("￥ "+e._s(t.row.goods_price/100))]}}],null,!1,2306122607)})],1)]],2):e._e(),""!=e.reserveOrderData.reserve?a("div",{staticClass:"box1"},[a("div",{staticClass:"n-title"},[e._v("预订信息")]),a("div",{staticClass:"b-box"},[a("span",{staticClass:"sub-title"},[e._v("线上预订")]),a("div",{},[2==e.reserveOrderData.reserve.status?a("el-button",{staticClass:"order-btn",on:{click:e.confirmReserver}},[e._v("审核通过")]):e._e(),3==e.reserveOrderData.reserve.status?a("el-button",{staticClass:"order-btn-2",on:{click:e.cancelReserver}},[e._v("取消预定")]):e._e()],1)]),a("div",{staticClass:"nav-box"},[a("div",{staticClass:"info-nav"},[a("div",[e._v("到店时间："+e._s(e.reserveOrderData.reserve.reserve_time))]),a("div",[e._v("给商家留言："+e._s(e.reserveOrderData.reserve.remark))])]),a("div",{staticClass:"info-nav"},[a("div",[e._v(" 姓 名："+e._s(e.reserveOrderData.reserve.name)+" "),e._m(1)]),a("div",[e._v(" 手 机："+e._s(e.reserveOrderData.reserve.phone)+" "),e._m(2)])]),a("div",{staticClass:"info-nav"},[a("div",[e._v("下单时间： "+e._s(e.reserveOrderData.reserve.reserve_time))]),a("div",[e._v("送达位置： "+e._s(e.reserveOrderData.reserve.place_name))])]),a("div",{staticClass:"info-nav"},[e._m(3),a("div",[e._v("操 作 人："+e._s(e.reserveOrderData.reserve.staff_name))])])]),a("div",{staticClass:"n-title"},[e._v("预定座位")]),[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.placeArr,border:"","summary-method":e.getSumPlace,"show-summary":"","sum-text":"小计"}},[a("el-table-column",{attrs:{prop:"place_name",label:"桌号"}}),a("el-table-column",{attrs:{label:"类型",prop:"place_type_name"}}),a("el-table-column",{attrs:{label:"低消",prop:"basic_price"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("￥ "+e._s(t.row.basic_price/100))]}}],null,!1,226526277)}),a("el-table-column",{attrs:{label:"预定金额",prop:"total_deposit"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("￥ "+e._s(t.row.total_deposit/100))]}}],null,!1,4155457184)})],1)]],2):e._e(),a("div",{staticClass:"box1"},[a("div",{staticClass:"heji"},[a("div",{staticClass:"jine-t"},[e._v("总金额")]),a("div",{staticClass:"jin-e"},[e._v("￥"+e._s(e.totalPrice))])])]),e.reserveOrderData.evaluate?a("div",{staticClass:"box1"},[a("div",{staticClass:"box2"},[a("div",{staticClass:"pl-box1"},[a("div",{staticClass:"n-title"},[e._v("用户评论")]),a("div",{staticClass:"left-box"},[a("div",{staticClass:"pl-1-nav1"},[a("el-image",{staticClass:"tx-img",attrs:{src:e.reserveOrderData.evaluate.user_avatar}},[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[a("i",{staticClass:"el-icon-picture-outline"})])]),a("div",{staticClass:"i-box"},[a("div",{staticClass:"info-box"},[1==e.reserveOrderData.reserve.gender?a("i",{staticClass:"el-icon-male sex-i2"}):a("i",{staticClass:"el-icon-female sex-i"}),a("span",{staticClass:"s1"},[e._v(e._s(e.reserveOrderData.evaluate.user_name))]),a("span",[a("el-rate",{attrs:{disabled:"","text-color":"#ff9900"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)]),a("div",{staticClass:"pl-con"},[e._v(e._s(e.reserveOrderData.evaluate.content))])]),a("div",{staticClass:"info-time"},[a("i",{staticClass:"el-icon-time"}),e._v(" "+e._s(e.reserveOrderData.evaluate.create_time)+" ")])],1),e.reserveOrderData.evaluate.has_image?a("div",{staticClass:"imgbox"},e._l(e.reserveOrderData.evaluate.album_path,(function(t,s){return a("el-image",{key:s,staticClass:"imglist",staticStyle:{width:"100px",height:"100px"},attrs:{src:t,"preview-src-list":e.reserveOrderData.evaluate.album_path}})})),1):e._e()])]),a("div",{staticClass:"pl-box2"},[a("div",{staticClass:"n-title"},[e._v("商家回复")]),e.reserveOrderData.evaluate.reply_content?a("div",{staticClass:"left-box"},[a("div",{staticClass:"pl-1-nav1"},[a("div",{staticClass:"i-box"},[a("div",{staticClass:"pl-con"},[e._v(e._s(e.reserveOrderData.evaluate.reply_content))])]),a("div",{staticClass:"info-time"},[a("i",{staticClass:"el-icon-time"}),e._v(" "+e._s(e.reserveOrderData.evaluate.reply_time)+" ")])])]):a("div",{staticClass:"right-box"},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入回复内容..."},model:{value:e.textarea,callback:function(t){e.textarea=t},expression:"textarea"}})],1)])]),e.reserveOrderData.evaluate.reply_content?e._e():a("div",{staticClass:"tj-box"},[a("el-button",{staticClass:"tijiao",on:{click:e.replyFun}},[e._v("提交回复")])],1)]):e._e()])},r=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"gbBox"},[a("div",{staticClass:"n-title2"},[e._v("已选套餐")]),a("div",{staticClass:"gbName"},[e._v("（ 雪花8度 x12厅欢唱套餐 ）")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[a("i",{staticClass:"el-icon-edit"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[a("i",{staticClass:"el-icon-edit"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v(" 备 注：等待后台添加 "),a("span",[a("i",{staticClass:"el-icon-edit"})])])}],i=(a("4160"),a("d81d"),a("13d5"),a("a9e3"),a("159b"),{name:"orderDetaile",components:{},data:function(){return{merchants:{shop_id:0,merchant_id:0},tableData:[],value:3.7,url:"https://fuss10.elemecdn.com/e/5d/4a731a90594a4af544c0c25941171jpeg.jpeg",srcList:["https://fuss10.elemecdn.com/8/27/f01c15bb73e1ef3793e64e6b7bbccjpeg.jpeg","https://fuss10.elemecdn.com/1/8e/aeffeb4de74e2fde4bd74fc7b4486jpeg.jpeg"],textarea:"",loading:!1,reserveOrderData:{},i:"",reserve_id:"",reserve_time:"",stepNum:0,placeArr:[],diandan:0,yuding:0,totalPrice:0}},created:function(){this.merchants.shop_id=Number(this.$route.query.shop_id),this.merchants.merchant_id=Number(this.$route.query.merchant_id),this.reserve_id=this.$route.query.reserve_id,this.i=this.$route.query.i,1==this.i&&this.reserveDetaile()},methods:{reserveDetaile:function(){var e=this;this.loading=!0;var t={merchant_id:this.merchants.merchant_id,shop_id:this.merchants.shop_id,reserve_id:this.reserve_id};this.api.reserve.getReserveDetail(t).then((function(t){e.loading=!1,e.reserveOrderData=t.data.data,e.placeArr.push(e.reserveOrderData.reserve),e.reserveOrderData.progress.forEach((function(t,a){1==t.active&&e.stepNum++})),e.stepNum=e.stepNum-1}))},getSum:function(e,t){return e+t},getSummaries:function(e){var t=this;if(""!=this.reserveOrderData.shopping_info){var a=e.columns,s=e.data,r=[];return a.forEach((function(e,a){if(0!==a){var i=[],l=0;s.map((function(e){l=e.goods_num*e.goods_price/100,i.push(l)}));t.diandan=i.reduce(t.getSum),r[a]=2===a||3===a?"":4===a?t.diandan+" 元":""}else r[a]="小计"})),r}},getSumPlace:function(e){var t=this,a=e.columns,s=e.data,r=[];return a.forEach((function(e,a){if(0!==a){var i=[],l=0;s.map((function(e){l=e.total_deposit/100,i.push(l)}));t.yuding=i.reduce(t.getSum),r[a]=1===a||2===a?"":3===a?t.yuding+" 元":""}else r[a]="小计"})),this.totalPrice=this.diandan+this.yuding,r},getSumGroupbuy:function(e){var t=this,a=e.columns,s=e.data,r=[];return a.forEach((function(e,a){if(0!==a){var i=[],l=0;s.map((function(e){l=e.total_deposit/100,i.push(l)}));t.yuding=i.reduce(t.getSum),r[a]=1===a||2===a?"":3===a?t.yuding+" 元":""}else r[a]="小计"})),this.totalPrice=this.diandan+this.yuding,r},confirmReserver:function(){var e=this,t={merchant_id:this.merchants.merchant_id,shop_id:this.merchants.shop_id,reserve_id:this.reserve_id};this.api.reserve.confirmReserve(t).then((function(t){e.$message({message:""+t.data.msg,type:"success"})}))},cancelReserver:function(){var e=this,t={merchant_id:this.merchants.merchant_id,shop_id:this.merchants.shop_id,reserve_id:this.reserve_id};this.api.reserve.cancelReserver(t).then((function(t){e.$message({message:""+t.data.msg,type:"success"})}))},replyFun:function(){var e=this,t={merchant_id:this.merchants.merchant_id,shop_id:this.merchants.shop_id,eval_id:String(this.reserveOrderData.evaluate.eval_id),reply_content:this.textarea};this.api.shop.evaluateReply(t).then((function(t){e.$message({message:""+t.data.msg,type:"success"})}))}}}),l=i,n=(a("e33d"),a("2877")),o=Object(n["a"])(l,s,r,!1,null,"62b3add5",null);t["default"]=o.exports},c031:function(e,t,a){},e33d:function(e,t,a){"use strict";var s=a("c031"),r=a.n(s);r.a}}]);
//# sourceMappingURL=chunk-4e06146d.de845aa5.js.map