(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-78b8da6f"],{"14d3":function(e,t,a){"use strict";var r=a("97cb"),i=a.n(r);i.a},"2c6e":function(e,t,a){"use strict";var r=a("c900"),i=a.n(r);i.a},"914c":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"appBox"},[a("div",{staticClass:"page-title"},[e._v("编辑导航菜单")]),a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"140px"}},[a("el-form-item",{attrs:{label:"名称",prop:"title"}},[a("el-input",{staticClass:"formIpt",attrs:{placeholder:"请输入菜单名称"},model:{value:e.ruleForm.title,callback:function(t){e.$set(e.ruleForm,"title",t)},expression:"ruleForm.title"}})],1),a("el-form-item",{attrs:{label:"版本控制",prop:"ver"}},[a("el-input",{staticClass:"formIpt",attrs:{placeholder:"请输入版本控制，例：>=100"},model:{value:e.ruleForm.ver,callback:function(t){e.$set(e.ruleForm,"ver",t)},expression:"ruleForm.ver"}})],1),a("el-form-item",{attrs:{label:"导航图标",required:""}},[a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{prop:"icon_active"}},[a("div",{staticStyle:{"text-align":"center"}},[a("div",[e._v("选中图标")]),a("uploadFiles",{ref:"uploadImg1",staticClass:"uploadTemp",attrs:{defaltIcon:1,imageUrl:e.fileListActive,root:e.app},on:{theIMG:e.parentFun}})],1)])],1),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{prop:"icon"}},[a("div",{staticStyle:{"text-align":"center"}},[a("div",[e._v("未选图标")]),a("uploadFiles",{ref:"uploadImg2",staticClass:"uploadTemp",attrs:{defaltIcon:2,imageUrl:e.fileList,root:e.app},on:{theIMG:e.parentFun}})],1)])],1)],1),a("el-form-item",{attrs:{label:"连接",prop:"url"}},[a("el-input",{staticClass:"formIpt",attrs:{placeholder:"请输入跳转链接，例：ydzj://index"},model:{value:e.ruleForm.url,callback:function(t){e.$set(e.ruleForm,"url",t)},expression:"ruleForm.url"}})],1),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-switch",{attrs:{"active-color":"#ffbe11","inactive-color":"#d9d9d9"},on:{change:e.statusChange},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("保存")]),a("el-button",{on:{click:e.cancelFun}},[e._v("取消")])],1)],1)],1)},i=[],s=a("9cca"),l={components:{uploadFiles:s["a"]},data:function(){return{app:"app",fileList:"",fileListActive:"",ruleForm:{button_id:0,title:"测试1",ver:"",icon:"",icon_active:"",url:"hhh",status:1},rules:{title:[{required:!0,message:"请输入菜单名称",trigger:"blur"}],ver:[{required:!0,message:"请输入版本控制，例：>=100",trigger:"blur"}],icon:[{required:!0,message:"请上传导航未选中图标",trigger:"blur"}],icon_active:[{required:!0,message:"请上传导航选中图标",trigger:"blur"}],url:[{required:!0,message:"请输入跳转链接，例：ydzj://index",trigger:"blur"}]},value:!0}},created:function(){this.$route.query.id&&(this.ruleForm.button_id=this.$route.query.id,this.getDetaile())},methods:{statusChange:function(e){this.ruleForm.status=e?1:0},getDetaile:function(){var e=this,t={button_id:this.ruleForm.button_id};this.api.appmanage.buttonDetail(t).then((function(t){e.ruleForm=t.data.data,e.$refs.uploadImg1.concert(e.ruleForm.icon_active),e.$refs.uploadImg2.concert(e.ruleForm.icon),e.value=1==e.ruleForm.status}))},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;var a=t.ruleForm;t.api.appmanage.updateButton(a).then((function(e){t.$message({message:""+e.data.msg,type:"success"}),t.$router.push("/buttonList")}))}))},resetForm:function(e){this.$refs[e].resetFields()},parentFun:function(e,t){1==t?(this.ruleForm.icon_active=e,this.fileListActive=e):(this.ruleForm.icon=e,this.fileList=e)},cancelFun:function(){this.$router.push("/buttonList")}}},o=l,n=(a("2c6e"),a("2877")),u=Object(n["a"])(o,r,i,!1,null,"7bdd44ec",null);t["default"]=u.exports},"97cb":function(e,t,a){},"9cca":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"uploadFiles"},[a("el-upload",{directives:[{name:"show",rawName:"v-show",value:""!=this.root,expression:"this.root != ''"}],staticClass:"avatar-uploader",attrs:{action:"/api/file/uploads","show-file-list":!1,"file-list":e.fileList,limit:1,"http-request":e.uploadImg,"on-change":e.handleChange,"before-upload":e.beforeAvatarUpload}},[e.imageUrl?a("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),a("h4",{directives:[{name:"show",rawName:"v-show",value:""==this.root,expression:"this.root == ''"}]},[e._v("没有设置路径“root”...")])],1)},i=[],s=(a("a9e3"),a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("5f87")),l={name:"uploadImg",props:{defaltIcon:Number,root:{type:String,default:""}},data:function(){return{header:{headers:{"Content-Type":"multipart/form-data; boundary=--------------------------AAAAA",AccessToken:Object(s["a"])()}},fileList:[],DataImg:[],imageUrl:""}},methods:{concert:function(e){this.imageUrl=e},beforeAvatarUpload:function(e){var t=e.size/1024/1024<2;return t||this.$message.error("上传图片大小不能超过 2MB!"),t},handleChange:function(e,t){console.log(e.size);var a=e.size/1024/1024<2;console.log(e.size/1024/1024),console.log(e.size/1024/1024<2),a?(this.DataImg=e.raw,this.imageUrl=URL.createObjectURL(e.raw)):(this.fileList=[],this.DataImg=[])},uploadImg:function(e){var t=this,a=new FormData;a.append("file[]",this.DataImg),a.append("root",this.root),this.$ajax.post("/api/file/uploads",a,this.header).then((function(e){0==e.data.code?(t.fileList=[],t.DataImg=[],t.$emit("theIMG",e.data.data.url_path[0],t.defaltIcon)):(t.fileList=[],t.DataImg=[],t.imageUrl="",t.$message({message:e.data.msg,type:"warning"}))}))}}},o=l,n=(a("14d3"),a("2877")),u=Object(n["a"])(o,r,i,!1,null,null,null);t["a"]=u.exports},c900:function(e,t,a){}}]);
//# sourceMappingURL=chunk-78b8da6f.9a4ea1cf.js.map