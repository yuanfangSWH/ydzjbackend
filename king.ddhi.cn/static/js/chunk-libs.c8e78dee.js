(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-libs"],{"00ee":function(e,t,n){var r=n("b622"),i=r("toStringTag"),o={};o[i]="z",e.exports="[object z]"===String(o)},"0132":function(e,t,n){},"0366":function(e,t,n){var r=n("1c0b");e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},"03d6":function(e,t,n){var r=n("9c0e"),i=n("6ca1"),o=n("39ad")(!1),s=n("5a94")("IE_PROTO");e.exports=function(e,t){var n,a=i(e),c=0,u=[];for(n in a)n!=s&&r(a,n)&&u.push(n);while(t.length>c)r(a,n=t[c++])&&(~o(u,n)||u.push(n));return u}},"044b":function(e,t){
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
e.exports=function(e){return null!=e&&null!=e.constructor&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}},"051b":function(e,t,n){var r=n("1a14"),i=n("10db");e.exports=n("0bad")?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},"057f":function(e,t,n){var r=n("fc6a"),i=n("241c").f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(e){try{return i(e)}catch(t){return s.slice()}};e.exports.f=function(e){return s&&"[object Window]"==o.call(e)?a(e):i(r(e))}},"05f5":function(e,t,n){var r=n("7a41"),i=n("ef08").document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},"06cf":function(e,t,n){var r=n("83ab"),i=n("d1e7"),o=n("5c6c"),s=n("fc6a"),a=n("c04e"),c=n("5135"),u=n("0cfb"),f=Object.getOwnPropertyDescriptor;t.f=r?f:function(e,t){if(e=s(e),t=a(t,!0),u)try{return f(e,t)}catch(n){}if(c(e,t))return o(!i.f.call(e,t),e[t])}},"072d":function(e,t,n){"use strict";var r=n("0bad"),i=n("9876"),o=n("fed5"),s=n("1917"),a=n("0983"),c=n("9fbb"),u=Object.assign;e.exports=!u||n("4b8b")((function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=u({},e)[n]||Object.keys(u({},t)).join("")!=r}))?function(e,t){var n=a(e),u=arguments.length,f=1,d=o.f,l=s.f;while(u>f){var p,h=c(arguments[f++]),m=d?i(h).concat(d(h)):i(h),v=m.length,g=0;while(v>g)p=m[g++],r&&!l.call(h,p)||(n[p]=h[p])}return n}:u},"0983":function(e,t,n){var r=n("c901");e.exports=function(e){return Object(r(e))}},"0a06":function(e,t,n){"use strict";var r=n("2444"),i=n("c532"),o=n("f6b4"),s=n("5270");function a(e){this.defaults=e,this.interceptors={request:new o,response:new o}}a.prototype.request=function(e){"string"===typeof e&&(e=i.merge({url:arguments[0]},arguments[1])),e=i.merge(r,{method:"get"},this.defaults,e),e.method=e.method.toLowerCase();var t=[s,void 0],n=Promise.resolve(e);this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));while(t.length)n=n.then(t.shift(),t.shift());return n},i.forEach(["delete","get","head","options"],(function(e){a.prototype[e]=function(t,n){return this.request(i.merge(n||{},{method:e,url:t}))}})),i.forEach(["post","put","patch"],(function(e){a.prototype[e]=function(t,n,r){return this.request(i.merge(r||{},{method:e,url:t,data:n}))}})),e.exports=a},"0ae2":function(e,t,n){var r=n("9876"),i=n("fed5"),o=n("1917");e.exports=function(e){var t=r(e),n=i.f;if(n){var s,a=n(e),c=o.f,u=0;while(a.length>u)c.call(e,s=a[u++])&&t.push(s)}return t}},"0b25":function(e,t,n){var r=n("a691"),i=n("50c4");e.exports=function(e){if(void 0===e)return 0;var t=r(e),n=i(t);if(t!==n)throw RangeError("Wrong length or index");return n}},"0b99":function(e,t,n){"use strict";var r=n("19fa")(!0);n("393a")(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})}))},"0bad":function(e,t,n){e.exports=!n("4b8b")((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},"0cfb":function(e,t,n){var r=n("83ab"),i=n("d039"),o=n("cc12");e.exports=!r&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},"0df6":function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},"0e15":function(e,t,n){var r=n("597f");e.exports=function(e,t,n){return void 0===n?r(e,t,!1):r(e,n,!1!==t)}},1098:function(e,t,n){"use strict";t.__esModule=!0;var r=n("17ed"),i=c(r),o=n("f893"),s=c(o),a="function"===typeof s.default&&"symbol"===typeof i.default?function(e){return typeof e}:function(e){return e&&"function"===typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":typeof e};function c(e){return e&&e.__esModule?e:{default:e}}t.default="function"===typeof s.default&&"symbol"===a(i.default)?function(e){return"undefined"===typeof e?"undefined":a(e)}:function(e){return e&&"function"===typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":"undefined"===typeof e?"undefined":a(e)}},"10db":function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},1276:function(e,t,n){"use strict";var r=n("d784"),i=n("44e7"),o=n("825a"),s=n("1d80"),a=n("4840"),c=n("8aa5"),u=n("50c4"),f=n("14c3"),d=n("9263"),l=n("d039"),p=[].push,h=Math.min,m=4294967295,v=!l((function(){return!RegExp(m,"y")}));r("split",2,(function(e,t,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var r=String(s(this)),o=void 0===n?m:n>>>0;if(0===o)return[];if(void 0===e)return[r];if(!i(e))return t.call(r,e,o);var a,c,u,f=[],l=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),h=0,v=new RegExp(e.source,l+"g");while(a=d.call(v,r)){if(c=v.lastIndex,c>h&&(f.push(r.slice(h,a.index)),a.length>1&&a.index<r.length&&p.apply(f,a.slice(1)),u=a[0].length,h=c,f.length>=o))break;v.lastIndex===a.index&&v.lastIndex++}return h===r.length?!u&&v.test("")||f.push(""):f.push(r.slice(h)),f.length>o?f.slice(0,o):f}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var i=s(this),o=void 0==t?void 0:t[e];return void 0!==o?o.call(t,i,n):r.call(String(i),t,n)},function(e,i){var s=n(r,e,this,i,r!==t);if(s.done)return s.value;var d=o(e),l=String(this),p=a(d,RegExp),g=d.unicode,y=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(v?"y":"g"),b=new p(v?d:"^(?:"+d.source+")",y),_=void 0===i?m:i>>>0;if(0===_)return[];if(0===l.length)return null===f(b,l)?[l]:[];var w=0,S=0,x=[];while(S<l.length){b.lastIndex=v?S:0;var C,E=f(b,v?l:l.slice(S));if(null===E||(C=h(u(b.lastIndex+(v?0:S)),l.length))===w)S=c(l,S,g);else{if(x.push(l.slice(w,S)),x.length===_)return x;for(var I=1;I<=E.length-1;I++)if(x.push(E[I]),x.length===_)return x;S=w=C}}return x.push(l.slice(w)),x}]}),!v)},"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"145e":function(e,t,n){"use strict";var r=n("7b0b"),i=n("23cb"),o=n("50c4"),s=Math.min;e.exports=[].copyWithin||function(e,t){var n=r(this),a=o(n.length),c=i(e,a),u=i(t,a),f=arguments.length>2?arguments[2]:void 0,d=s((void 0===f?a:i(f,a))-u,a-c),l=1;u<c&&c<u+d&&(l=-1,u+=d-1,c+=d-1);while(d-- >0)u in n?n[c]=n[u]:delete n[c],c+=l,u+=l;return n}},"14c3":function(e,t,n){var r=n("c6b6"),i=n("9263");e.exports=function(e,t){var n=e.exec;if("function"===typeof n){var o=n.call(e,t);if("object"!==typeof o)throw TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==r(e))throw TypeError("RegExp#exec called on incompatible receiver");return i.call(e,t)}},1575:function(module,exports,__webpack_require__){(function(e,t){module.exports=t()})(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=111)}([,,function(e,t,n){e.exports={default:n(3),__esModule:!0}},function(e,t,n){var r=n(4),i=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}},function(e,t){var n=e.exports={version:"2.6.10"};"number"==typeof __e&&(__e=n)},function(e,t,n){var r;(function(i,o){r=function(){return o(i)}.call(t,n,t,e),void 0===r||(e.exports=r)})(this,(function(){var t=function(){var e,t,n,r,i,o,s=[],a=s.concat,c=s.filter,u=s.slice,f=window.document,d={},l={},p={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},h=/^\s*<(\w+|!)[^>]*>/,m=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,v=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,g=/^(?:body|html)$/i,y=/([A-Z])/g,b=["val","css","html","text","data","width","height","offset"],_=["after","prepend","before","append"],w=f.createElement("table"),S=f.createElement("tr"),x={tr:f.createElement("tbody"),tbody:w,thead:w,tfoot:w,td:S,th:S,"*":f.createElement("div")},C=/complete|loaded|interactive/,E=/^[\w-]*$/,I={},T=I.toString,O={},R=f.createElement("div"),k={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},M=Array.isArray||function(e){return e instanceof Array};function A(e){return null==e?String(e):I[T.call(e)]||"object"}function P(e){return"function"==A(e)}function j(e){return null!=e&&e==e.window}function N(e){return null!=e&&e.nodeType==e.DOCUMENT_NODE}function L(e){return"object"==A(e)}function D(e){return L(e)&&!j(e)&&Object.getPrototypeOf(e)==Object.prototype}function B(e){var t=!!e&&"length"in e&&e.length,r=n.type(e);return"function"!=r&&!j(e)&&("array"==r||0===t||"number"==typeof t&&t>0&&t-1 in e)}function U(e){return c.call(e,(function(e){return null!=e}))}function F(e){return e.length>0?n.fn.concat.apply([],e):e}function V(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function W(e){return e in l?l[e]:l[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function q(e,t){return"number"!=typeof t||p[V(e)]?t:t+"px"}function $(e){var t,n;return d[e]||(t=f.createElement(e),f.body.appendChild(t),n=getComputedStyle(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),"none"==n&&(n="block"),d[e]=n),d[e]}function G(e){return"children"in e?u.call(e.children):n.map(e.childNodes,(function(e){if(1==e.nodeType)return e}))}function z(e,t){var n,r=e?e.length:0;for(n=0;n<r;n++)this[n]=e[n];this.length=r,this.selector=t||""}function H(n,r,i){for(t in r)i&&(D(r[t])||M(r[t]))?(D(r[t])&&!D(n[t])&&(n[t]={}),M(r[t])&&!M(n[t])&&(n[t]=[]),H(n[t],r[t],i)):r[t]!==e&&(n[t]=r[t])}function K(e,t){return null==t?n(e):n(e).filter(t)}function J(e,t,n,r){return P(t)?t.call(e,n,r):t}function Y(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function X(t,n){var r=t.className||"",i=r&&r.baseVal!==e;if(n===e)return i?r.baseVal:r;i?r.baseVal=n:t.className=n}function Z(e){try{return e?"true"==e||"false"!=e&&("null"==e?null:+e+""==e?+e:/^[\[\{]/.test(e)?n.parseJSON(e):e):e}catch(t){return e}}function Q(e,t){t(e);for(var n=0,r=e.childNodes.length;n<r;n++)Q(e.childNodes[n],t)}return O.matches=function(e,t){if(!t||!e||1!==e.nodeType)return!1;var n=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(n)return n.call(e,t);var r,i=e.parentNode,o=!i;return o&&(i=R).appendChild(e),r=~O.qsa(i,t).indexOf(e),o&&R.removeChild(e),r},i=function(e){return e.replace(/-+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))},o=function(e){return c.call(e,(function(t,n){return e.indexOf(t)==n}))},O.fragment=function(t,r,i){var o,s,a;return m.test(t)&&(o=n(f.createElement(RegExp.$1))),o||(t.replace&&(t=t.replace(v,"<$1></$2>")),r===e&&(r=h.test(t)&&RegExp.$1),r in x||(r="*"),a=x[r],a.innerHTML=""+t,o=n.each(u.call(a.childNodes),(function(){a.removeChild(this)}))),D(i)&&(s=n(o),n.each(i,(function(e,t){b.indexOf(e)>-1?s[e](t):s.attr(e,t)}))),o},O.Z=function(e,t){return new z(e,t)},O.isZ=function(e){return e instanceof O.Z},O.init=function(t,r){var i;if(!t)return O.Z();if("string"==typeof t)if(t=t.trim(),"<"==t[0]&&h.test(t))i=O.fragment(t,RegExp.$1,r),t=null;else{if(r!==e)return n(r).find(t);i=O.qsa(f,t)}else{if(P(t))return n(f).ready(t);if(O.isZ(t))return t;if(M(t))i=U(t);else if(L(t))i=[t],t=null;else if(h.test(t))i=O.fragment(t.trim(),RegExp.$1,r),t=null;else{if(r!==e)return n(r).find(t);i=O.qsa(f,t)}}return O.Z(i,t)},n=function(e,t){return O.init(e,t)},n.extend=function(e){var t,n=u.call(arguments,1);return"boolean"==typeof e&&(t=e,e=n.shift()),n.forEach((function(n){H(e,n,t)})),e},O.qsa=function(e,t){var n,r="#"==t[0],i=!r&&"."==t[0],o=r||i?t.slice(1):t,s=E.test(o);return e.getElementById&&s&&r?(n=e.getElementById(o))?[n]:[]:1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType?[]:u.call(s&&!r&&e.getElementsByClassName?i?e.getElementsByClassName(o):e.getElementsByTagName(t):e.querySelectorAll(t))},n.contains=f.documentElement.contains?function(e,t){return e!==t&&e.contains(t)}:function(e,t){while(t&&(t=t.parentNode))if(t===e)return!0;return!1},n.type=A,n.isFunction=P,n.isWindow=j,n.isArray=M,n.isPlainObject=D,n.isEmptyObject=function(e){var t;for(t in e)return!1;return!0},n.isNumeric=function(e){var t=Number(e),n=typeof e;return null!=e&&"boolean"!=n&&("string"!=n||e.length)&&!isNaN(t)&&isFinite(t)||!1},n.inArray=function(e,t,n){return s.indexOf.call(t,e,n)},n.camelCase=i,n.trim=function(e){return null==e?"":String.prototype.trim.call(e)},n.uuid=0,n.support={},n.expr={},n.noop=function(){},n.map=function(e,t){var n,r,i,o=[];if(B(e))for(r=0;r<e.length;r++)n=t(e[r],r),null!=n&&o.push(n);else for(i in e)n=t(e[i],i),null!=n&&o.push(n);return F(o)},n.each=function(e,t){var n,r;if(B(e)){for(n=0;n<e.length;n++)if(!1===t.call(e[n],n,e[n]))return e}else for(r in e)if(!1===t.call(e[r],r,e[r]))return e;return e},n.grep=function(e,t){return c.call(e,t)},window.JSON&&(n.parseJSON=JSON.parse),n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),(function(e,t){I["[object "+t+"]"]=t.toLowerCase()})),n.fn={constructor:O.Z,length:0,forEach:s.forEach,reduce:s.reduce,push:s.push,sort:s.sort,splice:s.splice,indexOf:s.indexOf,concat:function(){var e,t,n=[];for(e=0;e<arguments.length;e++)t=arguments[e],n[e]=O.isZ(t)?t.toArray():t;return a.apply(O.isZ(this)?this.toArray():this,n)},map:function(e){return n(n.map(this,(function(t,n){return e.call(t,n,t)})))},slice:function(){return n(u.apply(this,arguments))},ready:function(e){return C.test(f.readyState)&&f.body?e(n):f.addEventListener("DOMContentLoaded",(function(){e(n)}),!1),this},get:function(t){return t===e?u.call(this):this[t>=0?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each((function(){null!=this.parentNode&&this.parentNode.removeChild(this)}))},each:function(e){return s.every.call(this,(function(t,n){return!1!==e.call(t,n,t)})),this},filter:function(e){return P(e)?this.not(this.not(e)):n(c.call(this,(function(t){return O.matches(t,e)})))},add:function(e,t){return n(o(this.concat(n(e,t))))},is:function(e){return this.length>0&&O.matches(this[0],e)},not:function(t){var r=[];if(P(t)&&t.call!==e)this.each((function(e){t.call(this,e)||r.push(this)}));else{var i="string"==typeof t?this.filter(t):B(t)&&P(t.item)?u.call(t):n(t);this.forEach((function(e){i.indexOf(e)<0&&r.push(e)}))}return n(r)},has:function(e){return this.filter((function(){return L(e)?n.contains(this,e):n(this).find(e).size()}))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!L(e)?e:n(e)},last:function(){var e=this[this.length-1];return e&&!L(e)?e:n(e)},find:function(e){var t,r=this;return t=e?"object"==typeof e?n(e).filter((function(){var e=this;return s.some.call(r,(function(t){return n.contains(t,e)}))})):1==this.length?n(O.qsa(this[0],e)):this.map((function(){return O.qsa(this,e)})):n(),t},closest:function(e,t){var r=[],i="object"==typeof e&&n(e);return this.each((function(n,o){while(o&&!(i?i.indexOf(o)>=0:O.matches(o,e)))o=o!==t&&!N(o)&&o.parentNode;o&&r.indexOf(o)<0&&r.push(o)})),n(r)},parents:function(e){var t=[],r=this;while(r.length>0)r=n.map(r,(function(e){if((e=e.parentNode)&&!N(e)&&t.indexOf(e)<0)return t.push(e),e}));return K(t,e)},parent:function(e){return K(o(this.pluck("parentNode")),e)},children:function(e){return K(this.map((function(){return G(this)})),e)},contents:function(){return this.map((function(){return this.contentDocument||u.call(this.childNodes)}))},siblings:function(e){return K(this.map((function(e,t){return c.call(G(t.parentNode),(function(e){return e!==t}))})),e)},empty:function(){return this.each((function(){this.innerHTML=""}))},pluck:function(e){return n.map(this,(function(t){return t[e]}))},show:function(){return this.each((function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=$(this.nodeName))}))},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){var t=P(e);if(this[0]&&!t)var r=n(e).get(0),i=r.parentNode||this.length>1;return this.each((function(o){n(this).wrapAll(t?e.call(this,o):i?r.cloneNode(!0):r)}))},wrapAll:function(e){if(this[0]){var t;n(this[0]).before(e=n(e));while((t=e.children()).length)e=t.first();n(e).append(this)}return this},wrapInner:function(e){var t=P(e);return this.each((function(r){var i=n(this),o=i.contents(),s=t?e.call(this,r):e;o.length?o.wrapAll(s):i.append(s)}))},unwrap:function(){return this.parent().each((function(){n(this).replaceWith(n(this).children())})),this},clone:function(){return this.map((function(){return this.cloneNode(!0)}))},hide:function(){return this.css("display","none")},toggle:function(t){return this.each((function(){var r=n(this);(t===e?"none"==r.css("display"):t)?r.show():r.hide()}))},prev:function(e){return n(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return n(this.pluck("nextElementSibling")).filter(e||"*")},html:function(e){return 0 in arguments?this.each((function(t){var r=this.innerHTML;n(this).empty().append(J(this,e,t,r))})):0 in this?this[0].innerHTML:null},text:function(e){return 0 in arguments?this.each((function(t){var n=J(this,e,t,this.textContent);this.textContent=null==n?"":""+n})):0 in this?this.pluck("textContent").join(""):null},attr:function(n,r){var i;return"string"!=typeof n||1 in arguments?this.each((function(e){if(1===this.nodeType)if(L(n))for(t in n)Y(this,t,n[t]);else Y(this,n,J(this,r,e,this.getAttribute(n)))})):0 in this&&1==this[0].nodeType&&null!=(i=this[0].getAttribute(n))?i:e},removeAttr:function(e){return this.each((function(){1===this.nodeType&&e.split(" ").forEach((function(e){Y(this,e)}),this)}))},prop:function(e,t){return e=k[e]||e,1 in arguments?this.each((function(n){this[e]=J(this,t,n,this[e])})):this[0]&&this[0][e]},removeProp:function(e){return e=k[e]||e,this.each((function(){delete this[e]}))},data:function(t,n){var r="data-"+t.replace(y,"-$1").toLowerCase(),i=1 in arguments?this.attr(r,n):this.attr(r);return null!==i?Z(i):e},val:function(e){return 0 in arguments?(null==e&&(e=""),this.each((function(t){this.value=J(this,e,t,this.value)}))):this[0]&&(this[0].multiple?n(this[0]).find("option").filter((function(){return this.selected})).pluck("value"):this[0].value)},offset:function(e){if(e)return this.each((function(t){var r=n(this),i=J(this,e,t,r.offset()),o=r.offsetParent().offset(),s={top:i.top-o.top,left:i.left-o.left};"static"==r.css("position")&&(s["position"]="relative"),r.css(s)}));if(!this.length)return null;if(f.documentElement!==this[0]&&!n.contains(f.documentElement,this[0]))return{top:0,left:0};var t=this[0].getBoundingClientRect();return{left:t.left+window.pageXOffset,top:t.top+window.pageYOffset,width:Math.round(t.width),height:Math.round(t.height)}},css:function(e,r){if(arguments.length<2){var o=this[0];if("string"==typeof e){if(!o)return;return o.style[i(e)]||getComputedStyle(o,"").getPropertyValue(e)}if(M(e)){if(!o)return;var s={},a=getComputedStyle(o,"");return n.each(e,(function(e,t){s[t]=o.style[i(t)]||a.getPropertyValue(t)})),s}}var c="";if("string"==A(e))r||0===r?c=V(e)+":"+q(e,r):this.each((function(){this.style.removeProperty(V(e))}));else for(t in e)e[t]||0===e[t]?c+=V(t)+":"+q(t,e[t])+";":this.each((function(){this.style.removeProperty(V(t))}));return this.each((function(){this.style.cssText+=";"+c}))},index:function(e){return e?this.indexOf(n(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return!!e&&s.some.call(this,(function(e){return this.test(X(e))}),W(e))},addClass:function(e){return e?this.each((function(t){if("className"in this){r=[];var i=X(this),o=J(this,e,t,i);o.split(/\s+/g).forEach((function(e){n(this).hasClass(e)||r.push(e)}),this),r.length&&X(this,i+(i?" ":"")+r.join(" "))}})):this},removeClass:function(t){return this.each((function(n){if("className"in this){if(t===e)return X(this,"");r=X(this),J(this,t,n,r).split(/\s+/g).forEach((function(e){r=r.replace(W(e)," ")})),X(this,r.trim())}}))},toggleClass:function(t,r){return t?this.each((function(i){var o=n(this),s=J(this,t,i,X(this));s.split(/\s+/g).forEach((function(t){(r===e?!o.hasClass(t):r)?o.addClass(t):o.removeClass(t)}))})):this},scrollTop:function(t){if(this.length){var n="scrollTop"in this[0];return t===e?n?this[0].scrollTop:this[0].pageYOffset:this.each(n?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})}},scrollLeft:function(t){if(this.length){var n="scrollLeft"in this[0];return t===e?n?this[0].scrollLeft:this[0].pageXOffset:this.each(n?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})}},position:function(){if(this.length){var e=this[0],t=this.offsetParent(),r=this.offset(),i=g.test(t[0].nodeName)?{top:0,left:0}:t.offset();return r.top-=parseFloat(n(e).css("margin-top"))||0,r.left-=parseFloat(n(e).css("margin-left"))||0,i.top+=parseFloat(n(t[0]).css("border-top-width"))||0,i.left+=parseFloat(n(t[0]).css("border-left-width"))||0,{top:r.top-i.top,left:r.left-i.left}}},offsetParent:function(){return this.map((function(){var e=this.offsetParent||f.body;while(e&&!g.test(e.nodeName)&&"static"==n(e).css("position"))e=e.offsetParent;return e}))}},n.fn.detach=n.fn.remove,["width","height"].forEach((function(t){var r=t.replace(/./,(function(e){return e[0].toUpperCase()}));n.fn[t]=function(i){var o,s=this[0];return i===e?j(s)?s["inner"+r]:N(s)?s.documentElement["scroll"+r]:(o=this.offset())&&o[t]:this.each((function(e){s=n(this),s.css(t,J(this,i,e,s[t]()))}))}})),_.forEach((function(t,r){var i=r%2;n.fn[t]=function(){var t,o,s=n.map(arguments,(function(r){var i=[];return t=A(r),"array"==t?(r.forEach((function(t){return t.nodeType!==e?i.push(t):n.zepto.isZ(t)?i=i.concat(t.get()):void(i=i.concat(O.fragment(t)))})),i):"object"==t||null==r?r:O.fragment(r)})),a=this.length>1;return s.length<1?this:this.each((function(e,t){o=i?t:t.parentNode,t=0==r?t.nextSibling:1==r?t.firstChild:2==r?t:null;var c=n.contains(f.documentElement,o);s.forEach((function(e){if(a)e=e.cloneNode(!0);else if(!o)return n(e).remove();o.insertBefore(e,t),c&&Q(e,(function(e){if(null!=e.nodeName&&"SCRIPT"===e.nodeName.toUpperCase()&&(!e.type||"text/javascript"===e.type)&&!e.src){var t=e.ownerDocument?e.ownerDocument.defaultView:window;t["eval"].call(t,e.innerHTML)}}))}))}))},n.fn[i?t+"To":"insert"+(r?"Before":"After")]=function(e){return n(e)[t](this),this}})),O.Z.prototype=z.prototype=n.fn,O.uniq=o,O.deserializeValue=Z,n.zepto=O,n}();return window.Zepto=t,void 0===window.$&&(window.$=t),e.exports=t,function(e){var t,n=1,r=Array.prototype.slice,i=e.isFunction,o=function(e){return"string"==typeof e},s={},a={},c="onfocusin"in window,u={focus:"focusin",blur:"focusout"},f={mouseenter:"mouseover",mouseleave:"mouseout"};function d(e){return e._zid||(e._zid=n++)}function l(e,t,n,r){if(t=p(t),t.ns)var i=h(t.ns);return(s[d(e)]||[]).filter((function(e){return e&&(!t.e||e.e==t.e)&&(!t.ns||i.test(e.ns))&&(!n||d(e.fn)===d(n))&&(!r||e.sel==r)}))}function p(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function h(e){return new RegExp("(?:^| )"+e.replace(" "," .* ?")+"(?: |$)")}function m(e,t){return e.del&&!c&&e.e in u||!!t}function v(e){return f[e]||c&&u[e]||e}function g(n,r,i,o,a,c,u){var l=d(n),h=s[l]||(s[l]=[]);r.split(/\s/).forEach((function(r){if("ready"==r)return e(document).ready(i);var s=p(r);s.fn=i,s.sel=a,s.e in f&&(i=function(t){var n=t.relatedTarget;if(!n||n!==this&&!e.contains(this,n))return s.fn.apply(this,arguments)}),s.del=c;var d=c||i;s.proxy=function(e){if(e=x(e),!e.isImmediatePropagationStopped()){e.data=o;var r=d.apply(n,e._args==t?[e]:[e].concat(e._args));return!1===r&&(e.preventDefault(),e.stopPropagation()),r}},s.i=h.length,h.push(s),"addEventListener"in n&&n.addEventListener(v(s.e),s.proxy,m(s,u))}))}function y(e,t,n,r,i){var o=d(e);(t||"").split(/\s/).forEach((function(t){l(e,t,n,r).forEach((function(t){delete s[o][t.i],"removeEventListener"in e&&e.removeEventListener(v(t.e),t.proxy,m(t,i))}))}))}a.click=a.mousedown=a.mouseup=a.mousemove="MouseEvents",e.event={add:g,remove:y},e.proxy=function(t,n){var s=2 in arguments&&r.call(arguments,2);if(i(t)){var a=function(){return t.apply(n,s?s.concat(r.call(arguments)):arguments)};return a._zid=d(t),a}if(o(n))return s?(s.unshift(t[n],t),e.proxy.apply(null,s)):e.proxy(t[n],t);throw new TypeError("expected function")},e.fn.bind=function(e,t,n){return this.on(e,t,n)},e.fn.unbind=function(e,t){return this.off(e,t)},e.fn.one=function(e,t,n,r){return this.on(e,t,n,r,1)};var b=function(){return!0},_=function(){return!1},w=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,S={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function x(n,r){return!r&&n.isDefaultPrevented||(r||(r=n),e.each(S,(function(e,t){var i=r[e];n[e]=function(){return this[t]=b,i&&i.apply(r,arguments)},n[t]=_})),n.timeStamp||(n.timeStamp=Date.now()),(r.defaultPrevented!==t?r.defaultPrevented:"returnValue"in r?!1===r.returnValue:r.getPreventDefault&&r.getPreventDefault())&&(n.isDefaultPrevented=b)),n}function C(e){var n,r={originalEvent:e};for(n in e)w.test(n)||e[n]===t||(r[n]=e[n]);return x(r,e)}e.fn.delegate=function(e,t,n){return this.on(t,e,n)},e.fn.undelegate=function(e,t,n){return this.off(t,e,n)},e.fn.live=function(t,n){return e(document.body).delegate(this.selector,t,n),this},e.fn.die=function(t,n){return e(document.body).undelegate(this.selector,t,n),this},e.fn.on=function(n,s,a,c,u){var f,d,l=this;return n&&!o(n)?(e.each(n,(function(e,t){l.on(e,s,a,t,u)})),l):(o(s)||i(c)||!1===c||(c=a,a=s,s=t),c!==t&&!1!==a||(c=a,a=t),!1===c&&(c=_),l.each((function(t,i){u&&(f=function(e){return y(i,e.type,c),c.apply(this,arguments)}),s&&(d=function(t){var n,o=e(t.target).closest(s,i).get(0);if(o&&o!==i)return n=e.extend(C(t),{currentTarget:o,liveFired:i}),(f||c).apply(o,[n].concat(r.call(arguments,1)))}),g(i,n,c,a,s,d||f)})))},e.fn.off=function(n,r,s){var a=this;return n&&!o(n)?(e.each(n,(function(e,t){a.off(e,r,t)})),a):(o(r)||i(s)||!1===s||(s=r,r=t),!1===s&&(s=_),a.each((function(){y(this,n,s,r)})))},e.fn.trigger=function(t,n){return t=o(t)||e.isPlainObject(t)?e.Event(t):x(t),t._args=n,this.each((function(){t.type in u&&"function"==typeof this[t.type]?this[t.type]():"dispatchEvent"in this?this.dispatchEvent(t):e(this).triggerHandler(t,n)}))},e.fn.triggerHandler=function(t,n){var r,i;return this.each((function(s,a){r=C(o(t)?e.Event(t):t),r._args=n,r.target=a,e.each(l(a,t.type||t),(function(e,t){if(i=t.proxy(r),r.isImmediatePropagationStopped())return!1}))})),i},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach((function(t){e.fn[t]=function(e){return 0 in arguments?this.bind(t,e):this.trigger(t)}})),e.Event=function(e,t){o(e)||(t=e,e=t.type);var n=document.createEvent(a[e]||"Events"),r=!0;if(t)for(var i in t)"bubbles"==i?r=!!t[i]:n[i]=t[i];return n.initEvent(e,r,!0),x(n)}}(t),function(e){var t,n,r=+new Date,i=window.document,o=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,s=/^(?:text|application)\/javascript/i,a=/^(?:text|application)\/xml/i,c="application/json",u="text/html",f=/^\s*$/,d=i.createElement("a");function l(t,n,r){var i=e.Event(n);return e(t).trigger(i,r),!i.isDefaultPrevented()}function p(e,t,n,r){if(e.global)return l(t||i,n,r)}function h(t){t.global&&0===e.active++&&p(t,null,"ajaxStart")}function m(t){t.global&&!--e.active&&p(t,null,"ajaxStop")}function v(e,t){var n=t.context;if(!1===t.beforeSend.call(n,e,t)||!1===p(t,n,"ajaxBeforeSend",[e,t]))return!1;p(t,n,"ajaxSend",[e,t])}function g(e,t,n,r){var i=n.context,o="success";n.success.call(i,e,o,t),r&&r.resolveWith(i,[e,o,t]),p(n,i,"ajaxSuccess",[t,n,e]),b(o,t,n)}function y(e,t,n,r,i){var o=r.context;r.error.call(o,n,t,e),i&&i.rejectWith(o,[n,t,e]),p(r,o,"ajaxError",[n,r,e||t]),b(t,n,r)}function b(e,t,n){var r=n.context;n.complete.call(r,t,e),p(n,r,"ajaxComplete",[t,n]),m(n)}function _(e,t,n){if(n.dataFilter==w)return e;var r=n.context;return n.dataFilter.call(r,e,t)}function w(){}function S(e){return e&&(e=e.split(";",2)[0]),e&&(e==u?"html":e==c?"json":s.test(e)?"script":a.test(e)&&"xml")||"text"}function x(e,t){return""==t?e:(e+"&"+t).replace(/[&?]{1,2}/,"?")}function C(t){t.processData&&t.data&&"string"!=e.type(t.data)&&(t.data=e.param(t.data,t.traditional)),!t.data||t.type&&"GET"!=t.type.toUpperCase()&&"jsonp"!=t.dataType||(t.url=x(t.url,t.data),t.data=void 0)}function E(t,n,r,i){return e.isFunction(n)&&(i=r,r=n,n=void 0),e.isFunction(r)||(i=r,r=void 0),{url:t,data:n,success:r,dataType:i}}d.href=window.location.href,e.active=0,e.ajaxJSONP=function(t,n){if(!("type"in t))return e.ajax(t);var o,s,a=t.jsonpCallback,c=(e.isFunction(a)?a():a)||"Zepto"+r++,u=i.createElement("script"),f=window[c],d=function(t){e(u).triggerHandler("error",t||"abort")},l={abort:d};return n&&n.promise(l),e(u).on("load error",(function(r,i){clearTimeout(s),e(u).off().remove(),"error"!=r.type&&o?g(o[0],l,t,n):y(null,i||"error",l,t,n),window[c]=f,o&&e.isFunction(f)&&f(o[0]),f=o=void 0})),!1===v(l,t)?(d("abort"),l):(window[c]=function(){o=arguments},u.src=t.url.replace(/\?(.+)=\?/,"?$1="+c),i.head.appendChild(u),t.timeout>0&&(s=setTimeout((function(){d("timeout")}),t.timeout)),l)},e.ajaxSettings={type:"GET",beforeSend:w,success:w,error:w,complete:w,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:c,xml:"application/xml, text/xml",html:u,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0,dataFilter:w},e.ajax=function(r){var o,s,a=e.extend({},r||{}),c=e.Deferred&&e.Deferred();for(t in e.ajaxSettings)void 0===a[t]&&(a[t]=e.ajaxSettings[t]);h(a),a.crossDomain||(o=i.createElement("a"),o.href=a.url,o.href=o.href,a.crossDomain=d.protocol+"//"+d.host!==o.protocol+"//"+o.host),a.url||(a.url=window.location.toString()),(s=a.url.indexOf("#"))>-1&&(a.url=a.url.slice(0,s)),C(a);var u=a.dataType,l=/\?.+=\?/.test(a.url);if(l&&(u="jsonp"),!1!==a.cache&&(r&&!0===r.cache||"script"!=u&&"jsonp"!=u)||(a.url=x(a.url,"_="+Date.now())),"jsonp"==u)return l||(a.url=x(a.url,a.jsonp?a.jsonp+"=?":!1===a.jsonp?"":"callback=?")),e.ajaxJSONP(a,c);var p,m=a.accepts[u],b={},E=function(e,t){b[e.toLowerCase()]=[e,t]},I=/^([\w-]+:)\/\//.test(a.url)?RegExp.$1:window.location.protocol,T=a.xhr(),O=T.setRequestHeader;if(c&&c.promise(T),a.crossDomain||E("X-Requested-With","XMLHttpRequest"),E("Accept",m||"*/*"),(m=a.mimeType||m)&&(m.indexOf(",")>-1&&(m=m.split(",",2)[0]),T.overrideMimeType&&T.overrideMimeType(m)),(a.contentType||!1!==a.contentType&&a.data&&"GET"!=a.type.toUpperCase())&&E("Content-Type",a.contentType||"application/x-www-form-urlencoded"),a.headers)for(n in a.headers)E(n,a.headers[n]);if(T.setRequestHeader=E,T.onreadystatechange=function(){if(4==T.readyState){T.onreadystatechange=w,clearTimeout(p);var t,n=!1;if(T.status>=200&&T.status<300||304==T.status||0==T.status&&"file:"==I){if(u=u||S(a.mimeType||T.getResponseHeader("content-type")),"arraybuffer"==T.responseType||"blob"==T.responseType)t=T.response;else{t=T.responseText;try{t=_(t,u,a),"script"==u?(0,eval)(t):"xml"==u?t=T.responseXML:"json"==u&&(t=f.test(t)?null:e.parseJSON(t))}catch(r){n=r}if(n)return y(n,"parsererror",T,a,c)}g(t,T,a,c)}else y(T.statusText||null,T.status?"error":"abort",T,a,c)}},!1===v(T,a))return T.abort(),y(null,"abort",T,a,c),T;var R=!("async"in a)||a.async;if(T.open(a.type,a.url,R,a.username,a.password),a.xhrFields)for(n in a.xhrFields)T[n]=a.xhrFields[n];for(n in b)O.apply(T,b[n]);return a.timeout>0&&(p=setTimeout((function(){T.onreadystatechange=w,T.abort(),y(null,"timeout",T,a,c)}),a.timeout)),T.send(a.data?a.data:null),T},e.get=function(){return e.ajax(E.apply(null,arguments))},e.post=function(){var t=E.apply(null,arguments);return t.type="POST",e.ajax(t)},e.getJSON=function(){var t=E.apply(null,arguments);return t.dataType="json",e.ajax(t)},e.fn.load=function(t,n,r){if(!this.length)return this;var i,s=this,a=t.split(/\s/),c=E(t,n,r),u=c.success;return a.length>1&&(c.url=a[0],i=a[1]),c.success=function(t){s.html(i?e("<div>").html(t.replace(o,"")).find(i):t),u&&u.apply(s,arguments)},e.ajax(c),this};var I=encodeURIComponent;function T(t,n,r,i){var o,s=e.isArray(n),a=e.isPlainObject(n);e.each(n,(function(n,c){o=e.type(c),i&&(n=r?i:i+"["+(a||"object"==o||"array"==o?n:"")+"]"),!i&&s?t.add(c.name,c.value):"array"==o||!r&&"object"==o?T(t,c,r,n):t.add(n,c)}))}e.param=function(t,n){var r=[];return r.add=function(t,n){e.isFunction(n)&&(n=n()),null==n&&(n=""),this.push(I(t)+"="+I(n))},T(r,t,n),r.join("&").replace(/%20/g,"+")}}(t),function(e){e.fn.serializeArray=function(){var t,n,r=[],i=function(e){if(e.forEach)return e.forEach(i);r.push({name:t,value:e})};return this[0]&&e.each(this[0].elements,(function(r,o){n=o.type,t=o.name,t&&"fieldset"!=o.nodeName.toLowerCase()&&!o.disabled&&"submit"!=n&&"reset"!=n&&"button"!=n&&"file"!=n&&("radio"!=n&&"checkbox"!=n||o.checked)&&i(e(o).val())})),r},e.fn.serialize=function(){var e=[];return this.serializeArray().forEach((function(t){e.push(encodeURIComponent(t.name)+"="+encodeURIComponent(t.value))})),e.join("&")},e.fn.submit=function(t){if(0 in arguments)this.bind("submit",t);else if(this.length){var n=e.Event("submit");this.eq(0).trigger(n),n.isDefaultPrevented()||this.get(0).submit()}return this}}(t),function(){try{getComputedStyle(void 0)}catch(t){var e=getComputedStyle;window.getComputedStyle=function(n,r){try{return e(n,r)}catch(t){return null}}}}(),t}))},,,function(e,t,n){e.exports={default:n(9),__esModule:!0}},function(e,t,n){n(10),n(11),n(54),n(58),n(76),n(77),e.exports=n(4).Promise},function(e,t){},function(e,t,n){"use strict";var r=n(12)(!0);n(15)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})}))},function(e,t,n){var r=n(13),i=n(14);e.exports=function(e){return function(t,n){var o,s,a=String(i(t)),c=r(n),u=a.length;return c<0||c>=u?e?"":void 0:(o=a.charCodeAt(c),o<55296||o>56319||c+1===u||(s=a.charCodeAt(c+1))<56320||s>57343?e?a.charAt(c):o:e?a.slice(c,c+2):s-56320+(o-55296<<10)+65536)}}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){"use strict";var r=n(16),i=n(17),o=n(32),s=n(21),a=n(33),c=n(34),u=n(50),f=n(52),d=n(51)("iterator"),l=!([].keys&&"next"in[].keys()),p="@@iterator",h="keys",m="values",v=function(){return this};e.exports=function(e,t,n,g,y,b,_){c(n,t,g);var w,S,x,C=function(e){if(!l&&e in O)return O[e];switch(e){case h:return function(){return new n(this,e)};case m:return function(){return new n(this,e)}}return function(){return new n(this,e)}},E=t+" Iterator",I=y==m,T=!1,O=e.prototype,R=O[d]||O[p]||y&&O[y],k=R||C(y),M=y?I?C("entries"):k:void 0,A="Array"==t&&O.entries||R;if(A&&(x=f(A.call(new e)),x!==Object.prototype&&x.next&&(u(x,E,!0),r||"function"==typeof x[d]||s(x,d,v))),I&&R&&R.name!==m&&(T=!0,k=function(){return R.call(this)}),r&&!_||!l&&!T&&O[d]||s(O,d,k),a[t]=k,a[E]=v,y)if(w={values:I?k:C(m),keys:b?k:C(h),entries:M},_)for(S in w)S in O||o(O,S,w[S]);else i(i.P+i.F*(l||T),t,w);return w}},function(e,t){e.exports=!0},function(e,t,n){var r=n(18),i=n(4),o=n(19),s=n(21),a=n(31),c="prototype",u=function(e,t,n){var f,d,l,p=e&u.F,h=e&u.G,m=e&u.S,v=e&u.P,g=e&u.B,y=e&u.W,b=h?i:i[t]||(i[t]={}),_=b[c],w=h?r:m?r[t]:(r[t]||{})[c];for(f in h&&(n=t),n)d=!p&&w&&void 0!==w[f],d&&a(b,f)||(l=d?w[f]:n[f],b[f]=h&&"function"!=typeof w[f]?n[f]:g&&d?o(l,r):y&&w[f]==l?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t[c]=e[c],t}(l):v&&"function"==typeof l?o(Function.call,l):l,v&&((b.virtual||(b.virtual={}))[f]=l,e&u.R&&_&&!_[f]&&s(_,f,l)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){var r=n(20);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var r=n(22),i=n(30);e.exports=n(26)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(23),i=n(25),o=n(29),s=Object.defineProperty;t.f=n(26)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return s(e,t,n)}catch(a){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(24);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},function(e,t,n){e.exports=!n(26)&&!n(27)((function(){return 7!=Object.defineProperty(n(28)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){e.exports=!n(27)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},function(e,t,n){var r=n(24),i=n(18).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,n){var r=n(24);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){e.exports=n(21)},function(e,t){e.exports={}},function(e,t,n){"use strict";var r=n(35),i=n(30),o=n(50),s={};n(21)(s,n(51)("iterator"),(function(){return this})),e.exports=function(e,t,n){e.prototype=r(s,{next:i(1,n)}),o(e,t+" Iterator")}},function(e,t,n){var r=n(23),i=n(36),o=n(48),s=n(45)("IE_PROTO"),a=function(){},c="prototype",u=function(){var e,t=n(28)("iframe"),r=o.length,i="<",s=">";t.style.display="none",n(49).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write(i+"script"+s+"document.F=Object"+i+"/script"+s),e.close(),u=e.F;while(r--)delete u[c][o[r]];return u()};e.exports=Object.create||function(e,t){var n;return null!==e?(a[c]=r(e),n=new a,a[c]=null,n[s]=e):n=u(),void 0===t?n:i(n,t)}},function(e,t,n){var r=n(22),i=n(23),o=n(37);e.exports=n(26)?Object.defineProperties:function(e,t){i(e);var n,s=o(t),a=s.length,c=0;while(a>c)r.f(e,n=s[c++],t[n]);return e}},function(e,t,n){var r=n(38),i=n(48);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t,n){var r=n(31),i=n(39),o=n(42)(!1),s=n(45)("IE_PROTO");e.exports=function(e,t){var n,a=i(e),c=0,u=[];for(n in a)n!=s&&r(a,n)&&u.push(n);while(t.length>c)r(a,n=t[c++])&&(~o(u,n)||u.push(n));return u}},function(e,t,n){var r=n(40),i=n(14);e.exports=function(e){return r(i(e))}},function(e,t,n){var r=n(41);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r=n(39),i=n(43),o=n(44);e.exports=function(e){return function(t,n,s){var a,c=r(t),u=i(c.length),f=o(s,u);if(e&&n!=n){while(u>f)if(a=c[f++],a!=a)return!0}else for(;u>f;f++)if((e||f in c)&&c[f]===n)return e||f||0;return!e&&-1}}},function(e,t,n){var r=n(13),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t,n){var r=n(13),i=Math.max,o=Math.min;e.exports=function(e,t){return e=r(e),e<0?i(e+t,0):o(e,t)}},function(e,t,n){var r=n(46)("keys"),i=n(47);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t,n){var r=n(4),i=n(18),o="__core-js_shared__",s=i[o]||(i[o]={});(e.exports=function(e,t){return s[e]||(s[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(16)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var r=n(18).document;e.exports=r&&r.documentElement},function(e,t,n){var r=n(22).f,i=n(31),o=n(51)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t,n){var r=n(46)("wks"),i=n(47),o=n(18).Symbol,s="function"==typeof o,a=e.exports=function(e){return r[e]||(r[e]=s&&o[e]||(s?o:i)("Symbol."+e))};a.store=r},function(e,t,n){var r=n(31),i=n(53),o=n(45)("IE_PROTO"),s=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?s:null}},function(e,t,n){var r=n(14);e.exports=function(e){return Object(r(e))}},function(e,t,n){n(55);for(var r=n(18),i=n(21),o=n(33),s=n(51)("toStringTag"),a="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),c=0;c<a.length;c++){var u=a[c],f=r[u],d=f&&f.prototype;d&&!d[s]&&i(d,s,u),o[u]=o.Array}},function(e,t,n){"use strict";var r=n(56),i=n(57),o=n(33),s=n(39);e.exports=n(15)(Array,"Array",(function(e,t){this._t=s(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){"use strict";var r,i,o,s,a=n(16),c=n(18),u=n(19),f=n(59),d=n(17),l=n(24),p=n(20),h=n(60),m=n(61),v=n(65),g=n(66).set,y=n(68)(),b=n(69),_=n(70),w=n(71),S=n(72),x="Promise",C=c.TypeError,E=c.process,I=E&&E.versions,T=I&&I.v8||"",O=c[x],R="process"==f(E),k=function(){},M=i=b.f,A=!!function(){try{var e=O.resolve(1),t=(e.constructor={})[n(51)("species")]=function(e){e(k,k)};return(R||"function"==typeof PromiseRejectionEvent)&&e.then(k)instanceof t&&0!==T.indexOf("6.6")&&-1===w.indexOf("Chrome/66")}catch(r){}}(),P=function(e){var t;return!(!l(e)||"function"!=typeof(t=e.then))&&t},j=function(e,t){if(!e._n){e._n=!0;var n=e._c;y((function(){var r=e._v,i=1==e._s,o=0,s=function(t){var n,o,s,a=i?t.ok:t.fail,c=t.resolve,u=t.reject,f=t.domain;try{a?(i||(2==e._h&&D(e),e._h=1),!0===a?n=r:(f&&f.enter(),n=a(r),f&&(f.exit(),s=!0)),n===t.promise?u(C("Promise-chain cycle")):(o=P(n))?o.call(n,c,u):c(n)):u(r)}catch(d){f&&!s&&f.exit(),u(d)}};while(n.length>o)s(n[o++]);e._c=[],e._n=!1,t&&!e._h&&N(e)}))}},N=function(e){g.call(c,(function(){var t,n,r,i=e._v,o=L(e);if(o&&(t=_((function(){R?E.emit("unhandledRejection",i,e):(n=c.onunhandledrejection)?n({promise:e,reason:i}):(r=c.console)&&r.error&&r.error("Unhandled promise rejection",i)})),e._h=R||L(e)?2:1),e._a=void 0,o&&t.e)throw t.v}))},L=function(e){return 1!==e._h&&0===(e._a||e._c).length},D=function(e){g.call(c,(function(){var t;R?E.emit("rejectionHandled",e):(t=c.onrejectionhandled)&&t({promise:e,reason:e._v})}))},B=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),j(t,!0))},U=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw C("Promise can't be resolved itself");(t=P(e))?y((function(){var r={_w:n,_d:!1};try{t.call(e,u(U,r,1),u(B,r,1))}catch(i){B.call(r,i)}})):(n._v=e,n._s=1,j(n,!1))}catch(r){B.call({_w:n,_d:!1},r)}}};A||(O=function(e){h(this,O,x,"_h"),p(e),r.call(this);try{e(u(U,this,1),u(B,this,1))}catch(t){B.call(this,t)}},r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=n(73)(O.prototype,{then:function(e,t){var n=M(v(this,O));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=R?E.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&j(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new r;this.promise=e,this.resolve=u(U,e,1),this.reject=u(B,e,1)},b.f=M=function(e){return e===O||e===s?new o(e):i(e)}),d(d.G+d.W+d.F*!A,{Promise:O}),n(50)(O,x),n(74)(x),s=n(4)[x],d(d.S+d.F*!A,x,{reject:function(e){var t=M(this),n=t.reject;return n(e),t.promise}}),d(d.S+d.F*(a||!A),x,{resolve:function(e){return S(a&&this===s?O:this,e)}}),d(d.S+d.F*!(A&&n(75)((function(e){O.all(e)["catch"](k)}))),x,{all:function(e){var t=this,n=M(t),r=n.resolve,i=n.reject,o=_((function(){var n=[],o=0,s=1;m(e,!1,(function(e){var a=o++,c=!1;n.push(void 0),s++,t.resolve(e).then((function(e){c||(c=!0,n[a]=e,--s||r(n))}),i)})),--s||r(n)}));return o.e&&i(o.v),n.promise},race:function(e){var t=this,n=M(t),r=n.reject,i=_((function(){m(e,!1,(function(e){t.resolve(e).then(n.resolve,r)}))}));return i.e&&r(i.v),n.promise}})},function(e,t,n){var r=n(41),i=n(51)("toStringTag"),o="Arguments"==r(function(){return arguments}()),s=function(e,t){try{return e[t]}catch(n){}};e.exports=function(e){var t,n,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=s(t=Object(e),i))?n:o?r(t):"Object"==(a=r(t))&&"function"==typeof t.callee?"Arguments":a}},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var r=n(19),i=n(62),o=n(63),s=n(23),a=n(43),c=n(64),u={},f={};t=e.exports=function(e,t,n,d,l){var p,h,m,v,g=l?function(){return e}:c(e),y=r(n,d,t?2:1),b=0;if("function"!=typeof g)throw TypeError(e+" is not iterable!");if(o(g)){for(p=a(e.length);p>b;b++)if(v=t?y(s(h=e[b])[0],h[1]):y(e[b]),v===u||v===f)return v}else for(m=g.call(e);!(h=m.next()).done;)if(v=i(m,y,h.value,t),v===u||v===f)return v};t.BREAK=u,t.RETURN=f},function(e,t,n){var r=n(23);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(s){var o=e["return"];throw void 0!==o&&r(o.call(e)),s}}},function(e,t,n){var r=n(33),i=n(51)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[i]===e)}},function(e,t,n){var r=n(59),i=n(51)("iterator"),o=n(33);e.exports=n(4).getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||o[r(e)]}},function(e,t,n){var r=n(23),i=n(20),o=n(51)("species");e.exports=function(e,t){var n,s=r(e).constructor;return void 0===s||void 0==(n=r(s)[o])?t:i(n)}},function(e,t,n){var r,i,o,s=n(19),a=n(67),c=n(49),u=n(28),f=n(18),d=f.process,l=f.setImmediate,p=f.clearImmediate,h=f.MessageChannel,m=f.Dispatch,v=0,g={},y="onreadystatechange",b=function(){var e=+this;if(g.hasOwnProperty(e)){var t=g[e];delete g[e],t()}},_=function(e){b.call(e.data)};l&&p||(l=function(e){var t=[],n=1;while(arguments.length>n)t.push(arguments[n++]);return g[++v]=function(){a("function"==typeof e?e:Function(e),t)},r(v),v},p=function(e){delete g[e]},"process"==n(41)(d)?r=function(e){d.nextTick(s(b,e,1))}:m&&m.now?r=function(e){m.now(s(b,e,1))}:h?(i=new h,o=i.port2,i.port1.onmessage=_,r=s(o.postMessage,o,1)):f.addEventListener&&"function"==typeof postMessage&&!f.importScripts?(r=function(e){f.postMessage(e+"","*")},f.addEventListener("message",_,!1)):r=y in u("script")?function(e){c.appendChild(u("script"))[y]=function(){c.removeChild(this),b.call(e)}}:function(e){setTimeout(s(b,e,1),0)}),e.exports={set:l,clear:p}},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var r=n(18),i=n(66).set,o=r.MutationObserver||r.WebKitMutationObserver,s=r.process,a=r.Promise,c="process"==n(41)(s);e.exports=function(){var e,t,n,u=function(){var r,i;c&&(r=s.domain)&&r.exit();while(e){i=e.fn,e=e.next;try{i()}catch(o){throw e?n():t=void 0,o}}t=void 0,r&&r.enter()};if(c)n=function(){s.nextTick(u)};else if(!o||r.navigator&&r.navigator.standalone)if(a&&a.resolve){var f=a.resolve(void 0);n=function(){f.then(u)}}else n=function(){i.call(r,u)};else{var d=!0,l=document.createTextNode("");new o(u).observe(l,{characterData:!0}),n=function(){l.data=d=!d}}return function(r){var i={fn:r,next:void 0};t&&(t.next=i),e||(e=i,n()),t=i}}},function(e,t,n){"use strict";var r=n(20);function i(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)}e.exports.f=function(e){return new i(e)}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(t){return{e:!0,v:t}}}},function(e,t,n){var r=n(18),i=r.navigator;e.exports=i&&i.userAgent||""},function(e,t,n){var r=n(23),i=n(24),o=n(69);e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=o.f(e),s=n.resolve;return s(t),n.promise}},function(e,t,n){var r=n(21);e.exports=function(e,t,n){for(var i in t)n&&e[i]?e[i]=t[i]:r(e,i,t[i]);return e}},function(e,t,n){"use strict";var r=n(18),i=n(4),o=n(22),s=n(26),a=n(51)("species");e.exports=function(e){var t="function"==typeof i[e]?i[e]:r[e];s&&t&&!t[a]&&o.f(t,a,{configurable:!0,get:function(){return this}})}},function(e,t,n){var r=n(51)("iterator"),i=!1;try{var o=[7][r]();o["return"]=function(){i=!0},Array.from(o,(function(){throw 2}))}catch(s){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},e(o)}catch(s){}return n}},function(e,t,n){"use strict";var r=n(17),i=n(4),o=n(18),s=n(65),a=n(72);r(r.P+r.R,"Promise",{finally:function(e){var t=s(this,i.Promise||o.Promise),n="function"==typeof e;return this.then(n?function(n){return a(t,e()).then((function(){return n}))}:e,n?function(n){return a(t,e()).then((function(){throw n}))}:e)}})},function(e,t,n){"use strict";var r=n(17),i=n(69),o=n(70);r(r.S,"Promise",{try:function(e){var t=i.f(this),n=o(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}})},,,function(e,t,n){e.exports={default:n(81),__esModule:!0}},function(e,t,n){n(82),e.exports=n(4).Object.keys},function(e,t,n){var r=n(53),i=n(37);n(83)("keys",(function(){return function(e){return i(r(e))}}))},function(e,t,n){var r=n(17),i=n(4),o=n(27);e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],s={};s[e]=t(n),r(r.S+r.F*o((function(){n(1)})),"Object",s)}},,,,function(module,exports,__webpack_require__){"use strict";var _typeof2=__webpack_require__(88),_typeof3=_interopRequireDefault(_typeof2),_getPrototypeOf=__webpack_require__(106),_getPrototypeOf2=_interopRequireDefault(_getPrototypeOf),_stringify=__webpack_require__(2),_stringify2=_interopRequireDefault(_stringify);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function Util(){}(function(){var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");Math.uuid=function(t,n){var r,i,o=e,s=[];if(n=n||o.length,t)for(r=0;r<t;r++)s[r]=o[0|Math.random()*n];else for(s[8]=s[13]=s[18]=s[23]="-",s[14]="4",r=0;r<36;r++)s[r]||(i=0|16*Math.random(),s[r]=o[19==r?3&i|8:i]);return s.join("")},Math.uuidFast=function(){for(var t,n=e,r=new Array(36),i=0,o=0;o<36;o++)8==o||13==o||18==o||23==o?r[o]="-":14==o?r[o]="4":(i<=2&&(i=33554432+16777216*Math.random()|0),t=15&i,i>>=4,r[o]=n[19==o?3&t|8:t]);return r.join("")},Math.uuidCompact=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)}))}})(),String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.indexOf(e,t)===t});var Logger=function(e){var t=this,n={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,FATAL:5},r=["TRACE","DEBUG","INFO","WARN","ERROR","FATAL"];function i(e,t){try{a(e,t)}catch(n){if(console){if(console.error)return void console.error(n);if(console.log)return void console.log(n)}throw n}}function o(){if(!(emedia._logContextIndex<0)&&emedia._logContext&&emedia._logContext instanceof Array){var e=emedia._logContextIndex%emedia._logContext.length,t=emedia._logContext[e];t&&t instanceof Array||(t=emedia._logContext[e]=[]);var n=[];n.push(emedia._logContextIndex);var r,i=new Date;"function"===typeof i.toLocaleString?n.push(i.toLocaleString()):i.toJSON?n.push(i.toJSON()):i.toISOString?n.push(i.toISOString()):n.push(i+"");for(var o=0;o<arguments.length;o++){var s=arguments[o];"string"!==typeof s?s?"string"!==typeof s.message?"function"!==typeof s.message?"string"!==typeof s.stack?s.event&&"function"===typeof s.event.toString||s.event&&"function"===typeof s.event.toString?n.push(s.event.toString()):"string"!==typeof s.candidate?"string"!==typeof s.sdp?isPlainObject(s)?n.push((0,_stringify2.default)(s)):n.push(String(s)):n.push(s.sdp):n.push(s.candidate):n.push(s.stack):n.push(s.message()):n.push(s.message):n.push(s):n.push(s)}if(emedia.config.loglastStoreArray&&t.push(r=n.join(" ")),"function"===typeof emedia.config.onSdkLog)try{r||(r=n.join(" ")),emedia.config.onSdkLog(r)}catch(a){console.error(a)}}}function s(){try{o.apply(null,arguments)}catch(e){console.warn(e)}}function a(n,r){if(!(emedia&&emedia.LOG_LEVEL&&n<emedia.LOG_LEVEL)){var i=[];i.push(n),e&&i.push(e);for(var o=0;o<r.length;o++)i.push(r[o]&&r[o]._toString?r[o]._toString.call(r[o]):r[o]);t._log.apply(t,i)}}this._log=function(){var e=arguments[0];e=arguments[0]=r[e],emedia._logContext&&s.apply(null,arguments),!0===emedia.config.consoleLogger&&(emedia&&emedia.isElectron?console.log.apply(console,arguments):console&&e&&(console[e.toLowerCase()]||console.warn).apply(console,arguments))},this.log=function(){this._log&&i(n.INFO,arguments)},this.trace=function(){this._log&&i(n.TRACE,arguments)},this.debug=function(){this._log&&i(n.DEBUG,arguments)},this.info=function(){this._log&&i(n.INFO,arguments)},this.warn=function(){this._log&&i(n.WARN,arguments)},this.error=function(){this._log&&i(n.ERROR,arguments)},this.fatal=function(){this._log&&i(n.FATAL,arguments)}};Logger.prototype.count=function(){if(emedia._logContext){emedia._logContextIndex++;var e=emedia._logContextIndex%emedia._logContext.length;0===e&&0!==emedia._logContextIndex&&(emedia._logContext.loadlogs=emedia._logContext[e]),emedia._logContext[e]=[]}},Util.prototype.logger=new Logger,Util.prototype.tagLogger=function(e){return new Logger(e)},Util.prototype.parseJSON=function(e){return JSON.parse(e)};var stringifyJSON=Util.prototype.stringifyJSON=function(e){return(0,_stringify2.default)(e)},class2type={},toString=class2type.toString,hasOwn=class2type.hasOwnProperty,fnToString=hasOwn.toString,ObjectFunctionString=fnToString.call(Object),isPlainObject=Util.prototype.isPlainObject=function(e){var t,n;return!(!e||"[object Object]"!==toString.call(e)||"<JSAPI-Auto Javascript Object>"===e.toString()||"[object IFBComJavascriptObject]"===e.toString())&&(t=(0,_getPrototypeOf2.default)(e),!t||(n=hasOwn.call(t,"constructor")&&t.constructor,"function"===typeof n&&fnToString.call(n)===ObjectFunctionString))};Util.prototype.isArray=Array.isArray,Util.prototype.isEmptyObject=function(e){var t;for(t in e)return!1;return!0},Util.prototype.type=function(e){return null==e?e+"":"object"===("undefined"===typeof e?"undefined":(0,_typeof3.default)(e))||"function"===typeof e?class2type[toString.call(e)]||"object":"undefined"===typeof e?"undefined":(0,_typeof3.default)(e)},Util.prototype.extend=function(){var e,t,n,r,i,o,s=this,a=arguments[0]||{},c=1,u=arguments.length,f=!1;for("boolean"===typeof a&&(f=a,a=arguments[c]||{},c++),"object"===("undefined"===typeof a?"undefined":(0,_typeof3.default)(a))||s.isFunction(a)||(a={}),c===u&&(a=this,c--);c<u;c++)if(null!=(e=arguments[c]))for(t in e)n=a[t],r=e[t],a!==r&&(f&&r&&(s.isPlainObject(r)||(i=s.isArray(r)))?(i?(i=!1,o=n&&s.isArray(n)?n:[]):o=n&&s.isPlainObject(n)?n:{},a[t]=s.extend(f,o,r)):void 0!==r&&(a[t]=r));return a},Util.prototype.removeAttribute=function(e,t){if(null!==e&&void 0!==e){var n=e[t];return delete e[t],n}},Util.prototype.prototypeExtend_000=Util.prototype.classExtend=function(){var e,t=this;function n(){for(var e=0;e<arguments.length;e++){var n=arguments[e]||{};t.extend(!0,this,n)}this.__init__&&this.__init__.apply(this,arguments)}for(var r=0;r<arguments.length;r++){var i=arguments[r]||{};"function"===typeof i?e?(i.constructor=e,i.__proto__=e.prototype):e=i:t.extend(!0,n.prototype,i)}return e&&(n.prototype.__proto__=e.prototype),e&&(n.prototype.constructor=e),n.extend||(n.extend=function(e){return t.prototypeExtend(n,e)}),n},Util.prototype.prototypeExtend=Util.prototype.classExtend=function(){var e=this;function t(){for(var t=0;t<arguments.length;t++){var n=arguments[t]||{};e.extend(!0,this,n)}this.__init__&&this.__init__.apply(this,arguments)}for(var n=0;n<arguments.length;n++){var r=arguments[n]||{};"function"===typeof r&&(r=r.prototype),e.extend(!0,t.prototype,r)}return t.extend||(t.extend=function(n){return e.prototypeExtend(t,n)}),t},Util.prototype.hasLocalStorage=function(e){return null!=localStorage.getItem(e)&&"{}"!=localStorage.getItem(e)},Util.prototype.toggleClass=function(e,t){e.hasClass(t)?e.removeClass(t):e.addClass(t)},Util.prototype.setCookie=function(e,t,n){var r=new Date;r.setTime(r.getTime()+60*n*60*1e3),document.cookie=e+"="+escape(t)+";expires="+r.toGMTString()},Util.prototype.getCookie=function(e){var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return null!=t?unescape(t[2]):null},Util.prototype.parseURL=function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=window.location.search.substr(1).match(t);return null!=n?unescape(n[2]):null},Util.prototype.forEach=function(e,t){if(e&&(!this.isArray(e)||0!==e.length)&&(void 0===e.length||0!==e.length))if(e.length)for(var n=0;n<e.length;n++)t(n,e[n]);else if(e&&!this.isEmptyObject(e)){e=e||{};var r=this.extend(!1,{},e);for(var i in r)t(i,e[i])}},Util.prototype.isInt=function(e){return Number(e)===e&&e%1===0},Util.prototype.isFloat=function(e){return Number(e)===e&&e%1!==0},Util.prototype.list=function(){var e=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);return e},Util.prototype.addEvent=function(e,t,n){if(e.attachEvent)return e.attachEvent("on"+t,n);if(e.addEventListener)return e.addEventListener(t,n,!1);throw"Handler could not be attached"},Util.prototype.removeEvent=function(e,t,n){if(e.detachEvent)return e.detachEvent("on"+t,n);if(e.removeEventListener)return e.removeEventListener(t,n,!1);throw"Handler could not be removed"},Util.prototype.stopEvent=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,e.preventDefault?e.preventDefault():e.returnValue=!1},Util.prototype.getDomPageRect=function(e){var t=e.getBoundingClientRect();return{x:t.left+(window.pageXOffset||window.document.documentElement.scrollLeft),y:t.top+(window.pageYOffset||window.document.documentElement.scrollTop),width:t.width||e.offsetWidth,height:t.height||e.offsetHeight}},Util.prototype.getEventElementXY=function(e,t,n){e=e||window.event;var r,i,o=e.changedTouches?e.changedTouches[0]:e.touches?e.touches[0]:e;void 0!=o.pageX&&void 0!=o.pageY?(r=o.pageX,i=o.pageY):void 0!=o.clientX&&void 0!=o.clientY&&(r=o.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,i=o.clientY+document.body.scrollTop+document.documentElement.scrollTop);var s=this.getDomPageRect(t),a=r-s.x,c=i-s.y;return(0===n||void 0==n)&&(n=1),{x:Math.round(Math.max(Math.min(a,s.width-1),0)/n),y:Math.round(Math.max(Math.min(c,s.height-1),0)/n),width:Math.round(s.width/n),height:Math.round(s.height/n),realX:a,realY:c}},Util.prototype.layoutEngine=function(){var e={presto:!!window.opera,trident:!!window.ActiveXObject&&(window.XMLHttpRequest?document.querySelectorAll?6:5:4),webkit:function(){try{return!navigator.taintEnabled&&(i.Features.xpath?i.Features.query?525:420:419)}catch(e){return!1}}(),gecko:!(!document.getBoxObjectFor&&null==window.mozInnerScreenX)&&(document.getElementsByClassName?19:18)};return e.webkit&&(e.webkit=function(e){var t=(navigator.userAgent.match(/WebKit\/([0-9\.]*) /)||["",e])[1];return parseFloat(t,10)}(e)),e}(),Util.prototype.targetDOM="object"===("undefined"===typeof HTMLElement?"undefined":(0,_typeof3.default)(HTMLElement))?function(e){return e instanceof HTMLElement}:function(e){return e&&"object"===("undefined"===typeof e?"undefined":(0,_typeof3.default)(e))&&1===e.nodeType&&"string"===typeof e.nodeName},Util.prototype.cloneCSS=function(e,t){var n=window.getComputedStyle&&window.getComputedStyle(e,null)||e.currentStyle;for(var r in n){var i=n[r];/^[a-z]/i.test(r)&&[null,"",void 0].indexOf(i)<0&&(t.style[r]=i)}},Util.prototype.canYield=function(){try{return eval("!!Function('yield true;')().next()")}catch(e){return!1}}(),module.exports=new Util},function(e,t,n){"use strict";t.__esModule=!0;var r=n(89),i=c(r),o=n(92),s=c(o),a="function"===typeof s.default&&"symbol"===typeof i.default?function(e){return typeof e}:function(e){return e&&"function"===typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":typeof e};function c(e){return e&&e.__esModule?e:{default:e}}t.default="function"===typeof s.default&&"symbol"===a(i.default)?function(e){return"undefined"===typeof e?"undefined":a(e)}:function(e){return e&&"function"===typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":"undefined"===typeof e?"undefined":a(e)}},function(e,t,n){e.exports={default:n(90),__esModule:!0}},function(e,t,n){n(11),n(54),e.exports=n(91).f("iterator")},function(e,t,n){t.f=n(51)},function(e,t,n){e.exports={default:n(93),__esModule:!0}},function(e,t,n){n(94),n(10),n(104),n(105),e.exports=n(4).Symbol},function(e,t,n){"use strict";var r=n(18),i=n(31),o=n(26),s=n(17),a=n(32),c=n(95).KEY,u=n(27),f=n(46),d=n(50),l=n(47),p=n(51),h=n(91),m=n(96),v=n(97),g=n(100),y=n(23),b=n(24),_=n(53),w=n(39),S=n(29),x=n(30),C=n(35),E=n(101),I=n(103),T=n(98),O=n(22),R=n(37),k=I.f,M=O.f,A=E.f,P=r.Symbol,j=r.JSON,N=j&&j.stringify,L="prototype",D=p("_hidden"),B=p("toPrimitive"),U={}.propertyIsEnumerable,F=f("symbol-registry"),V=f("symbols"),W=f("op-symbols"),q=Object[L],$="function"==typeof P&&!!T.f,G=r.QObject,z=!G||!G[L]||!G[L].findChild,H=o&&u((function(){return 7!=C(M({},"a",{get:function(){return M(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=k(q,t);r&&delete q[t],M(e,t,n),r&&e!==q&&M(q,t,r)}:M,K=function(e){var t=V[e]=C(P[L]);return t._k=e,t},J=$&&"symbol"==typeof P.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof P},Y=function(e,t,n){return e===q&&Y(W,t,n),y(e),t=S(t,!0),y(n),i(V,t)?(n.enumerable?(i(e,D)&&e[D][t]&&(e[D][t]=!1),n=C(n,{enumerable:x(0,!1)})):(i(e,D)||M(e,D,x(1,{})),e[D][t]=!0),H(e,t,n)):M(e,t,n)},X=function(e,t){y(e);var n,r=v(t=w(t)),i=0,o=r.length;while(o>i)Y(e,n=r[i++],t[n]);return e},Z=function(e,t){return void 0===t?C(e):X(C(e),t)},Q=function(e){var t=U.call(this,e=S(e,!0));return!(this===q&&i(V,e)&&!i(W,e))&&(!(t||!i(this,e)||!i(V,e)||i(this,D)&&this[D][e])||t)},ee=function(e,t){if(e=w(e),t=S(t,!0),e!==q||!i(V,t)||i(W,t)){var n=k(e,t);return!n||!i(V,t)||i(e,D)&&e[D][t]||(n.enumerable=!0),n}},te=function(e){var t,n=A(w(e)),r=[],o=0;while(n.length>o)i(V,t=n[o++])||t==D||t==c||r.push(t);return r},ne=function(e){var t,n=e===q,r=A(n?W:w(e)),o=[],s=0;while(r.length>s)!i(V,t=r[s++])||n&&!i(q,t)||o.push(V[t]);return o};$||(P=function(){if(this instanceof P)throw TypeError("Symbol is not a constructor!");var e=l(arguments.length>0?arguments[0]:void 0),t=function(n){this===q&&t.call(W,n),i(this,D)&&i(this[D],e)&&(this[D][e]=!1),H(this,e,x(1,n))};return o&&z&&H(q,e,{configurable:!0,set:t}),K(e)},a(P[L],"toString",(function(){return this._k})),I.f=ee,O.f=Y,n(102).f=E.f=te,n(99).f=Q,T.f=ne,o&&!n(16)&&a(q,"propertyIsEnumerable",Q,!0),h.f=function(e){return K(p(e))}),s(s.G+s.W+s.F*!$,{Symbol:P});for(var re="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ie=0;re.length>ie;)p(re[ie++]);for(var oe=R(p.store),se=0;oe.length>se;)m(oe[se++]);s(s.S+s.F*!$,"Symbol",{for:function(e){return i(F,e+="")?F[e]:F[e]=P(e)},keyFor:function(e){if(!J(e))throw TypeError(e+" is not a symbol!");for(var t in F)if(F[t]===e)return t},useSetter:function(){z=!0},useSimple:function(){z=!1}}),s(s.S+s.F*!$,"Object",{create:Z,defineProperty:Y,defineProperties:X,getOwnPropertyDescriptor:ee,getOwnPropertyNames:te,getOwnPropertySymbols:ne});var ae=u((function(){T.f(1)}));s(s.S+s.F*ae,"Object",{getOwnPropertySymbols:function(e){return T.f(_(e))}}),j&&s(s.S+s.F*(!$||u((function(){var e=P();return"[null]"!=N([e])||"{}"!=N({a:e})||"{}"!=N(Object(e))}))),"JSON",{stringify:function(e){var t,n,r=[e],i=1;while(arguments.length>i)r.push(arguments[i++]);if(n=t=r[1],(b(t)||void 0!==e)&&!J(e))return g(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!J(t))return t}),r[1]=t,N.apply(j,r)}}),P[L][B]||n(21)(P[L],B,P[L].valueOf),d(P,"Symbol"),d(Math,"Math",!0),d(r.JSON,"JSON",!0)},function(e,t,n){var r=n(47)("meta"),i=n(24),o=n(31),s=n(22).f,a=0,c=Object.isExtensible||function(){return!0},u=!n(27)((function(){return c(Object.preventExtensions({}))})),f=function(e){s(e,r,{value:{i:"O"+ ++a,w:{}}})},d=function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,r)){if(!c(e))return"F";if(!t)return"E";f(e)}return e[r].i},l=function(e,t){if(!o(e,r)){if(!c(e))return!0;if(!t)return!1;f(e)}return e[r].w},p=function(e){return u&&h.NEED&&c(e)&&!o(e,r)&&f(e),e},h=e.exports={KEY:r,NEED:!1,fastKey:d,getWeak:l,onFreeze:p}},function(e,t,n){var r=n(18),i=n(4),o=n(16),s=n(91),a=n(22).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||a(t,e,{value:s.f(e)})}},function(e,t,n){var r=n(37),i=n(98),o=n(99);e.exports=function(e){var t=r(e),n=i.f;if(n){var s,a=n(e),c=o.f,u=0;while(a.length>u)c.call(e,s=a[u++])&&t.push(s)}return t}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){var r=n(41);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(39),i=n(102).f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(e){try{return i(e)}catch(t){return s.slice()}};e.exports.f=function(e){return s&&"[object Window]"==o.call(e)?a(e):i(r(e))}},function(e,t,n){var r=n(38),i=n(48).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t,n){var r=n(99),i=n(30),o=n(39),s=n(29),a=n(31),c=n(25),u=Object.getOwnPropertyDescriptor;t.f=n(26)?u:function(e,t){if(e=o(e),t=s(t,!0),c)try{return u(e,t)}catch(n){}if(a(e,t))return i(!r.f.call(e,t),e[t])}},function(e,t,n){n(96)("asyncIterator")},function(e,t,n){n(96)("observable")},function(e,t,n){e.exports={default:n(107),__esModule:!0}},function(e,t,n){n(108),e.exports=n(4).Object.getPrototypeOf},function(e,t,n){var r=n(53),i=n(52);n(83)("getPrototypeOf",(function(){return function(e){return i(r(e))}}))},,,function(e,t,n){e.exports=n(112)},function(e,t,n){"use strict";var r=window.emedia=window.emedia||{},i=r.util=n(87),o=n(5);if(r.config=function(e){for(var t in e=i.extend({},e),e)r.config[t]=e[t],"logLevel"===t&&(r.LOG_LEVEL=e[t]);r.config.loglastConfrCount&&!r._logContext&&(r._logContext=new Array(r.config.loglastConfrCount),r._logContextIndex=-1)},r.config({autoSub:!0,onlyEnter:!1,reconnect:13,reconnectDelay:3e3,getCopyIntervalMillis:3e4,checkConnectIntervalMillis:1e3,iceRebuildCount:3,iceRebuildIntervalMillis:500,enterTimeout:2e4,useRTCCfgIfServerReturn:!1,forceUseRTCCfgIfServerReturnWhenP2P:!0,allowRepeatAudioMixerPublish:!1,logVolumeWhenInstantGE:.5,getMediaMeterIntervalMillis:400,_useRequestAnimationFrame:!1,meterWithTrackAudioLevel:!1,judgeTalkingByInstantGE:.05,_printSoundData:!1,trackBufferSize:20,allowSendWhenLessThan:4,disableTrack:!1,ctrlCheckIntervalMillis:1e4,ctrlTimeoutMillis:3e4,_printDebugStats:!1,statsSeconds:10,remainLastStatsCount:120,loglastConfrCount:2,loglastStoreArray:!0,consoleLogger:!0,printStatsWhenPCClose:!0,rebuildPeerConnectionWhenNetworkChanaged:!0,useDeployMore:!1,useDTX:!0,uploadStats:!0,liveCfgs:[],rtcStatsTypeMath:function(e,t){switch(e.type){case"remote-candidate":case"local-candidate":case"track":case"stream":case"inbound-rtp":case"outbound-rtp":case"transport":return!0}return!1}}),i.logger.count(),function(){var e=n(113).default;if(r.browser=e.__browser,r.browserVersion=e.__browserVersion,void 0===r.browser)throw"Not discern browser. may require adapter error. eg. it.default"}(),i.logger.info("Current browser",r.browser,r.browserVersion),r.AudioContext=window.AudioContext||window.webkitAudioContext,r.config.getMediaMeterIntervalMillis){try{"function"===typeof r.AudioContext?(r.__audioContext=new r.AudioContext,r.__usingWebAudio=!0):r.__usingWebAudio=!1}catch(f){r.__usingWebAudio=!1}r.__usingWebAudio&&"suspended"===r.__audioContext.state&&o((function(){var e=function e(){"suspended"===r.__audioContext.state&&r.__audioContext.resume(),i.logger.warn("AudioContext state suspended ->",r.__audioContext.state),setTimeout((function(){"running"===r.__audioContext.state&&(document.body.removeEventListener("touchend",e,!1),document.body.removeEventListener("click",e,!1))}),0)};document.body.addEventListener("touchend",e,!1),document.body.addEventListener("click",e,!1)})),r.__usingWebAudio||console.warn("'new AudioContext()' failed. can not know who talking."),r.__audioContext&&"suspended"===r.__audioContext.state&&console.warn("audioContext.state is suspended. can not know who talking. You can resume() emedia.__audioContext, but only in response to a tap.")}if(window.requestAnimationFrame&&r.config._useRequestAnimationFrame?r.requestAnimationFrame=function(e){window.requestAnimationFrame(e)}:r.requestAnimationFrame=function(e,t){return setTimeout(e,t||r.config.getMediaMeterIntervalMillis)},window.cancelAnimationFrame&&r.config._useRequestAnimationFrame?r.cancelAnimationFrame=function(e){window.cancelAnimationFrame(e)}:r.cancelAnimationFrame=function(e){clearTimeout(e)},r.isWifi=function(){try{var e=!0,t=window.navigator.userAgent,n=window.navigator.connection||window.navigator.mozConnection||window.navigator.webkitConnection;if(/MicroMessenger/.test(t)){if(t.indexOf("WIFI")>=0)return!0;e=!1}else if(n){var r=n.type;"wifi"!==r&&"2"!==r&&"unknown"!==r&&(e=!1)}return e}catch(f){return!1}},r.stopAudioTracks=function(e){e&&e.getAudioTracks().forEach((function(t){t.stop(),i.logger.info("Media stream stop audio track. stream =",e.id,"track =",t.id,t.kind)}))},r.stopAndRemoveAudioTracks=function(e){var t=[];e&&e.getAudioTracks().forEach((function(n){n.stop(),t.push(n),i.logger.info("Media stream stop and remove audio tracks. stream =",e.id,"track =",n.id,n.kind)})),i.forEach(t,(function(t,n){e.removeTrack(n)}))},r.stopTracks=function(e){try{var t=function(){e.getTracks().forEach((function(t){t.stop(),i.logger.info("Media stream stop track. stream =",e.id," track =",t.id,t.kind)})),e._bindAttendee&&(i.removeAttribute(e._bindAttendee._openedRtcMediaStreams,e.id),e._bindAttendee=null),i.logger.info("stream tracks stoped. it ",e.id)};if(!e||!1===e.active)return void i.logger.debug("stream tracks had been stoped. it ",e&&e.id);t()}catch(f){i.logger.error(f)}},r.enableVideoTracks=function(e,t){e&&e.getVideoTracks().forEach((function(n){if("function"===typeof n.enable)return n.enable(),i.logger.info("Media stream enable video track. stream =",e.id,"track =",n.kind,n.enabled,n.id),void(n.enabled===t||n.enable(t));n.enabled===t||(n.enabled=t),i.logger.info("Media stream enable video track. stream =",e.id,"track =",n.kind,n.enabled,n.id)}))},r.enableAudioTracks=function(e,t){e&&e.getAudioTracks().forEach((function(n){if("function"===typeof n.enable)return n.enable(),i.logger.info("Media stream enable audio track. stream =",e.id,"track =",n.kind,n.enabled,n.id),void(n.enabled===t||n.enable(t));n.enabled===t||(n.enabled=t),i.logger.info("Media stream enable audio track. stream =",e.id,"track =",n.kind,n.enabled,n.id)}))},r.hasEnabledTracks=function(e){if(!e||"function"!==typeof e.getAudioTracks)return!1;if(!e.active)return!1;var t=e.getAudioTracks();if(0===t.length)return!1;for(var n in t)if("function"===typeof t[n].enable&&t[n].enable(),t[n].enabled)return!0;return!1},r.genReportName=function(){var e=r._lastSetupDate||new Date;return(r._lastSetupTktId||r._lastSetupConfr)+"_"+r._lastSetupMemName+"_"+e.getTime()+".log"},r.getReportUploadUrl=function(e,t,n){var r=new XMLHttpRequest;r.open(e,t,!0),r.addEventListener("load",(function(e){n&&n(e)}),!1),r.send(null)},r.uploadReport=function(e,t,n,o,s,a){var c=r.genReport();if(c){"function"===typeof n&&(a=s,s=o,o=n,n=void 0);var u=new Blob([c],{type:"text/plain"}),f=new FormData;f.append(e,u,e),n&&"function"===typeof f.set&&i.forEach(n,(function(e,t){f.set(e,t)}));var d=new XMLHttpRequest;d.open("POST",t,!0),d.setRequestHeader("X-File-Name",e),a&&a(d),d.addEventListener("load",l,!1),d.send(f),console.info("log begin upload. ",e," > ",t)}else s&&s("not logs");function l(n){console.info("log begin upload. result = ",n.currentTarget.status,e," > ",t),200===n.currentTarget.status?o&&o(n):s&&s(n)}},r.genReport=function(){if(r._logContext&&r._logContext instanceof Array&&!("undefined"===typeof r._logContextIndex||r._logContextIndex<0)){var e=0,t=r._logContextIndex;r._logContextIndex>=r._logContext.length&&(e=r._logContextIndex-r._logContext.length+1);for(var n="",i=e;i<=t;i++){var o=i%r._logContext.length,s=r._logContext[o];n+=s.join("\r\n")+"\r\n"}return r._logContext.loadlogs&&r._logContext.loadlogs instanceof Array&&(n+="-------------------------------------------------------------\r\n",n+=r._logContext.loadlogs.join("\r\n")+"\r\n"),n}},r.fileReport=function(e){var t=r.genReport();if(t){var n=encodeURIComponent(t),i=document.createElement("a");i.style.display="none",i.download=e||"emedia-"+(new Date).toJSON()+".log",i.href="data:text/plain;charset=utf-8,"+n,document.body.appendChild(i),i.click(),i.parentNode.removeChild(i)}},navigator.mediaDevices){var s=navigator.mediaDevices.getSupportedConstraints();i.logger.info("Supported constraints",s)}r.config({globalConstraints:{}});var a=n(141),c=n(150);r.Webrtc=n(155),r.Service=a,r.P2P=n(165),r.XService=a,r.XServiceWithP2P=r.P2P(a),r.mgr=n(166).outer,r.ctrl=n(372),r.CompositeCanvas=n(378),r.pannel||(r.pannel={}),r.pannel.DefaultMouseTrack=n(162),r.pannel.MouseTrack=n(163),r.pannel.KeyboardTrack=n(379);var u=r.PCStats=n(161);if(r.helper=r.helper||{},r.helper.PCStats=u,r.helper.pcstats=u.echo,r.helper.intervalPcstats=u.intervalEcho,r.helper.inboundAudio=u.inboundAudio,r.helper.inboundVideo=u.inboundVideo,r.helper.outboundAudio=u.outboundAudio,r.helper.outboundVideo=u.outboundVideo,r.event=c,r.LOG_LEVEL=0,r.isFirefox="firefox"===r.browser,r.isChrome="chrome"===r.browser,r.isSafari="safari"===r.browser,r.isEdge="edge"===r.browser,r.isElectron=/Electron/.test(navigator.userAgent),r.isElectron)try{n(380)}catch(f){i.logger.error(f)}r.youInSomeBrowsers=function(){if(r.isSafari){var e=new RegExp("(Version)/([0-9.]+)","i"),t=navigator.userAgent.match(e);if(null!=t){var n=unescape(t[2]);return n=parseInt(n),n<13}}return!1},r.replaceIpAndPortOfCandidate=function(e,t,n){var r="string"===typeof e?e:e.candidate;return r=r.replace(/(candidate:\d+\s+\d+\s+udp\s+\d+\s+)([\d\.]+)\s+(\d+)(\s+.*)/g,(function(e,r,i,o,s){return r+t+" "+n+s})),e.candidate?(e=i.extend(!0,{},e),e.candidate=r):e=r,e},r.replaceIpAndPort=function(e,t){if("function"!==typeof t)return e;var n="string"===typeof e?e:e.candidate;return n=n.replace(/(candidate:\d+\s+\d+\s+udp\s+\d+\s+)([\d\.]+)\s+(\d+)(\s+.*)/g,(function(e,n,r,i,o){var s=t(r,i);return"string"===typeof s?(s=s.replace(":"," "),n+s+o):n+r+" "+i+o})),e.candidate?(e=i.extend(!0,{},e),e.candidate=n):e=n,e},r.replaceURL=function(e,t){return"function"!==typeof t?e:e.replace(/([^:\/?&#=]+):\/\/([^\/:?#]+)(:\d+)?(\/[^?#]*)?(\?[^\/#]*)?(#[^\/?]*)?/g,(function(n,r,i,o,s,a,c){o&&(o=o.substring(1));var u=t(n,r,i,o,s,a,c);if(!u)return e;if("string"===typeof u)return u;var f=u.protocol||r,d=u.host||i,l=u.port||o,p=u.path||s,h=u.query||a,m=u.fragment||c;return f+"://"+d+(l?":"+l:"")+(p||"")+(h||"")+(m||"")}))},r.requireTrustBeforeJoin=function(){return!1},r.isWebRTC=window.RTCPeerConnection&&/^https\:$/.test(window.location.protocol),(r.isChrome||r.isSafari)&&(r.supportPRAnswer=!0),r.supportPRAnswer=!1,r.config({baseAcptOps:[102,104,105,106,107,300,302,303,304,301,204,206,400,401,1001,100221,100222,100223,100224,100201,100202,100203]}),r.config({clientType:"WEB",version:"3.2.2",userAgent:navigator.userAgent,acptOps:[100230,100205,1003,1004]}),e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=emedia.singleWebrtcAdapter;function i(){emedia.util.logger.warn("webrtc-adapter must load once. if more, safari may initC sdp error(too many audio video, easemob server dont work)")}function o(){if(document.documentMode){var e=/\brv[ :]+(\d+)/g.exec(navigator.userAgent)||[],t="IE",i=parseInt(e[1],10);i||(e=/\bMSIE[ :]+(\d+)/g.exec(navigator.userAgent)||[],i=parseInt(e[1]||"0",10)),emedia.util.logger.error("adapter.ie not required"),r.__browser=t,r.__browserVersion=i}else r=n(114),emedia.util.logger.info("webrtc-adapter load first"),s();emedia.singleWebrtcAdapter=r}function s(){function e(e,t){e.srcObject=t,emedia.isSafari&&(e.pause(),e.play());var n=emedia.util.logger||window.console||console;if(n){if(t&&n.info("stream attach videoTag.",t.id,t._located,">>",e.id,e.muted,e.volume,e),t||n.info("stream(null) attach videoTag.",e.id,e.muted,e.volume,e),!e.hxSetOnvolumechange){var r=e.onvolumechange;e.onvolumechange=function(){n.debug("stream attach detail: video tag volume chanage",e.volume,t?t.id:t),r&&r.apply(e,arguments)},e.hxSetOnvolumechange=!0}if(!e.hxSetOnstalled){var i=e.onstalled;e.onstalled=function(){n.debug("stream attach detail: video tag onstalled",t?t.id:t),i&&i.apply(e,arguments)},e.hxSetOnstalled=!0}if(!e.hxSetOnabort){var o=e.onabort;e.onabort=function(){n.debug("stream attach detail: video tag onabort",t?t.id:t),o&&o.apply(e,arguments)},e.hxSetOnabort=!0}if(!e.hxSetOncanplay){var s=e.oncanplay;e.oncanplay=function(){t&&t.getTracks().forEach((function(e){"function"===typeof e.getSettings&&n.debug("stream attach detail",t.id," track setting =",e.enabled,e.id,e.kind,e.label,e.getSettings())})),n.debug("stream attach detail: video tag",e.videoWidth,"x",e.videoHeight,t?t.id:t),s&&s.apply(e,arguments)},e.hxSetOncanplay=!0}}}function t(t,n,r,i){function o(){r=!!(void 0===r?n._located:r),t.muted=!1,r!==t.muted&&(t.muted=!0)}if(i||(i=window.__attachMediaStream)||(i=e.bind(this)),t){if(n)return t.srcObject&&t.srcObject._located&&n._located&&t.srcObject.id===n.id?t.srcObject:(o(),i(t,n),t);i(t,n)}}window.attachMediaStream&&!0!==window.attachMediaStream._wrapped&&(window.__attachMediaStream=window.attachMediaStream),window.attachMediaStream=t,window.attachMediaStream._wrapped=!0,console&&"function"===typeof console.info&&console.info("Wrap the attachMediaStream ",r.__browser,r.__browserVersion)}i(),r?emedia.util.logger.error("webrtc-adapter repeated load, safari may dont work"):o(),r.__browser=r.__browser||r.browserDetails.browser,r.__browserVersion=r.__browserVersion||r.browserDetails.version,emedia.util.logger.info("Current browser",r.__browser,r.__browserVersion),"Not a supported browser."===r.__browser&&emedia.util.logger.error("Not a supported browser"),t.default=r},function(e,t,n){"use strict";var r,i,o,s,a=n(115),c=T(a),u=n(2),f=T(u),d=n(119),l=T(d),p=n(8),h=T(p),m=n(80),v=T(m),g=n(122),y=T(g),b=n(138),_=T(b),w=n(89),S=T(w),x=n(92),C=T(x),E=n(88),I=T(E);function T(e){return e&&e.__esModule?e:{default:e}}(function(n){"object"===(0,I.default)(t)&&"undefined"!==typeof e?e.exports=n():(i=[],r=n,o="function"===typeof r?r.apply(t,i):r,void 0===o||(e.exports=o))})((function(){return function(){function e(t,n,r){function i(a,c){if(!n[a]){if(!t[a]){var u="function"==typeof s&&s;if(!c&&u)return s(a,!0);if(o)return o(a,!0);var f=new Error("Cannot find module '"+a+"'");throw f.code="MODULE_NOT_FOUND",f}var d=n[a]={exports:{}};t[a][0].call(d.exports,(function(e){var n=t[a][1][e];return i(n||e)}),d,d.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof s&&s,a=0;a<r.length;a++)i(r[a]);return i}return e}()({1:[function(e,t,n){console.warn("webrtc adapter version: 7.6.1");var r=e("./adapter_factory.js"),i=(0,r.adapterFactory)({window:window});t.exports=i},{"./adapter_factory.js":2}],2:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.adapterFactory=v;var r=e("./utils"),i=m(r),o=e("./chrome/chrome_shim"),s=m(o),a=e("./edge/edge_shim"),c=m(a),u=e("./firefox/firefox_shim"),f=m(u),d=e("./safari/safari_shim"),l=m(d),p=e("./common_shim"),h=m(p);function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.window,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0},r=i.log,o=i.detectBrowser(t),a={browserDetails:o,commonShim:h,extractVersion:i.extractVersion,disableLog:i.disableLog,disableWarnings:i.disableWarnings};switch(o.browser){case"chrome":if(!s||!s.shimPeerConnection||!n.shimChrome)return r("Chrome shim is not included in this adapter release."),a;if(null===o.version)return r("Chrome shim can not determine version, not shimming."),a;r("adapter.js shimming chrome."),a.browserShim=s,s.shimGetUserMedia(t),s.shimMediaStream(t),s.shimPeerConnection(t),s.shimOnTrack(t),s.shimAddTrackRemoveTrack(t),s.shimGetSendersWithDtmf(t),s.shimGetStats(t),s.shimSenderReceiverGetStats(t),s.fixNegotiationNeeded(t),h.shimRTCIceCandidate(t),h.shimConnectionState(t),h.shimMaxMessageSize(t),h.shimSendThrowTypeError(t),h.removeAllowExtmapMixed(t);break;case"firefox":if(!f||!f.shimPeerConnection||!n.shimFirefox)return r("Firefox shim is not included in this adapter release."),a;r("adapter.js shimming firefox."),a.browserShim=f,f.shimGetUserMedia(t),f.shimPeerConnection(t),f.shimOnTrack(t),f.shimRemoveStream(t),f.shimSenderGetStats(t),f.shimReceiverGetStats(t),f.shimRTCDataChannel(t),f.shimAddTransceiver(t),f.shimCreateOffer(t),f.shimCreateAnswer(t),h.shimRTCIceCandidate(t),h.shimConnectionState(t),h.shimMaxMessageSize(t),h.shimSendThrowTypeError(t);break;case"edge":if(!c||!c.shimPeerConnection||!n.shimEdge)return r("MS edge shim is not included in this adapter release."),a;r("adapter.js shimming edge."),a.browserShim=c,c.shimGetUserMedia(t),c.shimGetDisplayMedia(t),c.shimPeerConnection(t),c.shimReplaceTrack(t),h.shimMaxMessageSize(t),h.shimSendThrowTypeError(t);break;case"safari":if(!l||!n.shimSafari)return r("Safari shim is not included in this adapter release."),a;r("adapter.js shimming safari."),a.browserShim=l,l.shimRTCIceServerUrls(t),l.shimCreateOfferLegacy(t),l.shimCallbacksAPI(t),l.shimLocalStreamsAPI(t),l.shimRemoteStreamsAPI(t),l.shimTrackEventTransceiver(t),l.shimGetUserMedia(t),l.shimAudioContext(t),h.shimRTCIceCandidate(t),h.shimMaxMessageSize(t),h.shimSendThrowTypeError(t),h.removeAllowExtmapMixed(t);break;default:r("Unsupported browser!");break}return a}},{"./chrome/chrome_shim":3,"./common_shim":6,"./edge/edge_shim":7,"./firefox/firefox_shim":11,"./safari/safari_shim":14,"./utils":15}],3:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=n.shimGetUserMedia=void 0;var r="function"===typeof C.default&&"symbol"===(0,I.default)(S.default)?function(e){return"undefined"===typeof e?"undefined":(0,I.default)(e)}:function(e){return e&&"function"===typeof C.default&&e.constructor===C.default&&e!==C.default.prototype?"symbol":"undefined"===typeof e?"undefined":(0,I.default)(e)},i=e("./getusermedia");Object.defineProperty(n,"shimGetUserMedia",{enumerable:!0,get:function(){return i.shimGetUserMedia}});var o=e("./getdisplaymedia");Object.defineProperty(n,"shimGetDisplayMedia",{enumerable:!0,get:function(){return o.shimGetDisplayMedia}}),n.shimMediaStream=f,n.shimOnTrack=d,n.shimGetSendersWithDtmf=p,n.shimGetStats=m,n.shimSenderReceiverGetStats=g,n.shimAddTrackRemoveTrackWithNative=b,n.shimAddTrackRemoveTrack=w,n.shimPeerConnection=x,n.fixNegotiationNeeded=E;var s=e("../utils.js"),a=c(s);function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function u(e,t,n){return t in e?(0,_.default)(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function d(e){if("object"===("undefined"===typeof e?"undefined":r(e))&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var n=this;return this._ontrackpoly||(this._ontrackpoly=function(t){t.stream.addEventListener("addtrack",(function(r){var i=void 0;i=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find((function(e){return e.track&&e.track.id===r.track.id})):{track:r.track};var o=new Event("track");o.track=r.track,o.receiver=i,o.transceiver={receiver:i},o.streams=[t.stream],n.dispatchEvent(o)})),t.stream.getTracks().forEach((function(r){var i=void 0;i=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find((function(e){return e.track&&e.track.id===r.id})):{track:r};var o=new Event("track");o.track=r,o.receiver=i,o.transceiver={receiver:i},o.streams=[t.stream],n.dispatchEvent(o)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else a.wrapPeerConnectionEvent(e,"track",(function(e){return e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e}))}function p(e){if("object"===("undefined"===typeof e?"undefined":r(e))&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){var i=n.apply(this,arguments);return i||(i=t(this,e),this._senders.push(i)),i};var i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){i.apply(this,arguments);var t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}var o=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;this._senders=this._senders||[],o.apply(this,[e]),e.getTracks().forEach((function(e){n._senders.push(t(n,e))}))};var s=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._senders=this._senders||[],s.apply(this,[e]),e.getTracks().forEach((function(e){var n=t._senders.find((function(t){return t.track===e}));n&&t._senders.splice(t._senders.indexOf(n),1)}))}}else if("object"===("undefined"===typeof e?"undefined":r(e))&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var a=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=a.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function m(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=this,n=Array.prototype.slice.call(arguments),r=n[0],i=n[1],o=n[2];if(arguments.length>0&&"function"===typeof r)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!==typeof r))return t.apply(this,[]);var s=function(e){var t={},n=e.result();return n.forEach((function(e){var n={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach((function(t){n[t]=e.stat(t)})),t[n.id]=n})),t},a=function(e){return new y.default((0,v.default)(e).map((function(t){return[t,e[t]]})))};if(arguments.length>=2){var c=function(e){i(a(s(e)))};return t.apply(this,[c,r])}return new h.default((function(n,r){t.apply(e,[function(e){n(a(s(e)))},r])})).then(i,o)}}}function g(e){if("object"===("undefined"===typeof e?"undefined":r(e))&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver){if(!("getStats"in e.RTCRtpSender.prototype)){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return a.filterStats(t,e.track,!0)}))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){var i=e.RTCPeerConnection.prototype.getReceivers;i&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,t=i.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t}),a.wrapPeerConnectionEvent(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return a.filterStats(t,e.track,!1)}))}}if("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype){var o=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){var t=arguments[0],n=void 0,r=void 0,i=void 0;return this.getSenders().forEach((function(e){e.track===t&&(n?i=!0:n=e)})),this.getReceivers().forEach((function(e){return e.track===t&&(r?i=!0:r=e),e.track===t})),i||n&&r?h.default.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):n?n.getStats():r?r.getStats():h.default.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return o.apply(this,arguments)}}}}function b(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},(0,v.default)(this._shimmedLocalStreams).map((function(t){return e._shimmedLocalStreams[t][0]}))};var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var r=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(r)&&this._shimmedLocalStreams[n.id].push(r):this._shimmedLocalStreams[n.id]=[n,r],r};var n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var t=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((function(e){var n=t.getSenders().find((function(t){return t.track===e}));if(n)throw new DOMException("Track already exists.","InvalidAccessError")}));var r=this.getSenders();n.apply(this,arguments);var i=this.getSenders().filter((function(e){return-1===r.indexOf(e)}));this._shimmedLocalStreams[e.id]=[e].concat(i)};var r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],r.apply(this,arguments)};var i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&(0,v.default)(this._shimmedLocalStreams).forEach((function(n){var r=t._shimmedLocalStreams[n].indexOf(e);-1!==r&&t._shimmedLocalStreams[n].splice(r,1),1===t._shimmedLocalStreams[n].length&&delete t._shimmedLocalStreams[n]})),i.apply(this,arguments)}}function w(e){if(e.RTCPeerConnection){var t=a.detectBrowser(e);if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return b(e);var n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this,t=n.apply(this);return this._reverseStreams=this._reverseStreams||{},t.map((function(t){return e._reverseStreams[t.id]}))};var r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){var n=this;if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((function(e){var t=n.getSenders().find((function(t){return t.track===e}));if(t)throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[t.id]){var i=new e.MediaStream(t.getTracks());this._streams[t.id]=i,this._reverseStreams[i.id]=t,t=i}r.apply(this,[t])};var i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){var r=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var i=[].slice.call(arguments,1);if(1!==i.length||!i[0].getTracks().find((function(e){return e===t})))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");var o=this.getSenders().find((function(e){return e.track===t}));if(o)throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};var s=this._streams[n.id];if(s)s.addTrack(t),h.default.resolve().then((function(){r.dispatchEvent(new Event("negotiationneeded"))}));else{var a=new e.MediaStream([t]);this._streams[n.id]=a,this._reverseStreams[a.id]=n,this.addStream(a)}return this.getSenders().find((function(e){return e.track===t}))},["createOffer","createAnswer"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t],r=u({},t,(function(){var e=this,t=arguments,r=arguments.length&&"function"===typeof arguments[0];return r?n.apply(this,[function(n){var r=c(e,n);t[0].apply(null,[r])},function(e){t[1]&&t[1].apply(null,e)},arguments[2]]):n.apply(this,arguments).then((function(t){return c(e,t)}))}));e.RTCPeerConnection.prototype[t]=r[t]}));var o=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=f(this,arguments[0]),o.apply(this,arguments)):o.apply(this,arguments)};var s=(0,l.default)(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get:function(){var e=s.get.apply(this);return""===e.type?e:c(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");var n=e._pc===this;if(!n)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};var r=void 0;(0,v.default)(this._streams).forEach((function(n){var i=t._streams[n].getTracks().find((function(t){return e.track===t}));i&&(r=t._streams[n])})),r&&(1===r.getTracks().length?this.removeStream(this._reverseStreams[r.id]):r.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function c(e,t){var n=t.sdp;return(0,v.default)(e._reverseStreams||[]).forEach((function(t){var r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(i.id,"g"),r.id)})),new RTCSessionDescription({type:t.type,sdp:n})}function f(e,t){var n=t.sdp;return(0,v.default)(e._reverseStreams||[]).forEach((function(t){var r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(r.id,"g"),i.id)})),new RTCSessionDescription({type:t.type,sdp:n})}}function x(e){var t=a.detectBrowser(e);if(!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection){var n=0===e.RTCPeerConnection.prototype.addIceCandidate.length;t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t],r=u({},t,(function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}));e.RTCPeerConnection.prototype[t]=r[t]}));var r=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return n||arguments[0]?t.version<78&&arguments[0]&&""===arguments[0].candidate?h.default.resolve():r.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),h.default.resolve())}}}function E(e){var t=a.detectBrowser(e);a.wrapPeerConnectionEvent(e,"negotiationneeded",(function(e){var n=e.target;if(!(t.version<72||n.getConfiguration&&"plan-b"===n.getConfiguration().sdpSemantics)||"stable"===n.signalingState)return e}))}},{"../utils.js":15,"./getdisplaymedia":4,"./getusermedia":5}],4:[function(e,t,n){function r(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"===typeof t?e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then((function(t){var r=n.video&&n.video.width,i=n.video&&n.video.height,o=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:o||3}},r&&(n.video.mandatory.maxWidth=r),i&&(n.video.mandatory.maxHeight=i),e.navigator.mediaDevices.getUserMedia(n)}))}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=r},{}],5:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r="function"===typeof C.default&&"symbol"===(0,I.default)(S.default)?function(e){return"undefined"===typeof e?"undefined":(0,I.default)(e)}:function(e){return e&&"function"===typeof C.default&&e.constructor===C.default&&e!==C.default.prototype?"symbol":"undefined"===typeof e?"undefined":(0,I.default)(e)};n.shimGetUserMedia=c;var i=e("../utils.js"),o=s(i);function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}var a=o.log;function c(e){var t=e&&e.navigator;if(t.mediaDevices){var n=o.detectBrowser(e),i=function(e){if("object"!==("undefined"===typeof e?"undefined":r(e))||e.mandatory||e.optional)return e;var t={};return(0,v.default)(e).forEach((function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var i="object"===r(e[n])?e[n]:{ideal:e[n]};void 0!==i.exact&&"number"===typeof i.exact&&(i.min=i.max=i.exact);var o=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==i.ideal){t.optional=t.optional||[];var s={};"number"===typeof i.ideal?(s[o("min",n)]=i.ideal,t.optional.push(s),s={},s[o("max",n)]=i.ideal,t.optional.push(s)):(s[o("",n)]=i.ideal,t.optional.push(s))}void 0!==i.exact&&"number"!==typeof i.exact?(t.mandatory=t.mandatory||{},t.mandatory[o("",n)]=i.exact):["min","max"].forEach((function(e){void 0!==i[e]&&(t.mandatory=t.mandatory||{},t.mandatory[o(e,n)]=i[e])}))}})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},s=function(e,o){if(n.version>=61)return o(e);if(e=JSON.parse((0,f.default)(e)),e&&"object"===r(e.audio)){var s=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};e=JSON.parse((0,f.default)(e)),s(e.audio,"autoGainControl","googAutoGainControl"),s(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=i(e.audio)}if(e&&"object"===r(e.video)){var c=e.video.facingMode;c=c&&("object"===("undefined"===typeof c?"undefined":r(c))?c:{ideal:c});var u=n.version<66;if(c&&("user"===c.exact||"environment"===c.exact||"user"===c.ideal||"environment"===c.ideal)&&(!t.mediaDevices.getSupportedConstraints||!t.mediaDevices.getSupportedConstraints().facingMode||u)){delete e.video.facingMode;var d=void 0;if("environment"===c.exact||"environment"===c.ideal?d=["back","rear"]:"user"!==c.exact&&"user"!==c.ideal||(d=["front"]),d)return t.mediaDevices.enumerateDevices().then((function(t){t=t.filter((function(e){return"videoinput"===e.kind}));var n=t.find((function(e){return d.some((function(t){return e.label.toLowerCase().includes(t)}))}));return!n&&t.length&&d.includes("back")&&(n=t[t.length-1]),n&&(e.video.deviceId=c.exact?{exact:n.deviceId}:{ideal:n.deviceId}),e.video=i(e.video),a("chrome: "+(0,f.default)(e)),o(e)}))}e.video=i(e.video)}return a("chrome: "+(0,f.default)(e)),o(e)},c=function(e){return n.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}},u=function(e,n,r){s(e,(function(e){t.webkitGetUserMedia(e,n,(function(e){r&&r(c(e))}))}))};if(t.getUserMedia=u.bind(t),t.mediaDevices.getUserMedia){var d=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return s(e,(function(e){return d(e).then((function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach((function(e){e.stop()})),new DOMException("","NotFoundError");return t}),(function(e){return h.default.reject(c(e))}))}))}}}}},{"../utils.js":15}],6:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r="function"===typeof C.default&&"symbol"===(0,I.default)(S.default)?function(e){return"undefined"===typeof e?"undefined":(0,I.default)(e)}:function(e){return e&&"function"===typeof C.default&&e.constructor===C.default&&e!==C.default.prototype?"symbol":"undefined"===typeof e?"undefined":(0,I.default)(e)};n.shimRTCIceCandidate=l,n.shimMaxMessageSize=p,n.shimSendThrowTypeError=h,n.shimConnectionState=m,n.removeAllowExtmapMixed=v;var i=e("sdp"),o=d(i),s=e("./utils"),a=u(s);function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function d(e){return e&&e.__esModule?e:{default:e}}function l(e){if(!(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)){var t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"===("undefined"===typeof e?"undefined":r(e))&&e.candidate&&0===e.candidate.indexOf("a=")&&(e=JSON.parse((0,f.default)(e)),e.candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){var n=new t(e),i=o.default.parseCandidate(e.candidate),s=(0,c.default)(n,i);return s.toJSON=function(){return{candidate:s.candidate,sdpMid:s.sdpMid,sdpMLineIndex:s.sdpMLineIndex,usernameFragment:s.usernameFragment}},s}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,a.wrapPeerConnectionEvent(e,"icecandidate",(function(t){return t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t}))}}function p(e){if(e.RTCPeerConnection){var t=a.detectBrowser(e);"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get:function(){return"undefined"===typeof this._sctp?null:this._sctp}});var n=function(e){if(!e||!e.sdp)return!1;var t=o.default.splitSections(e.sdp);return t.shift(),t.some((function(e){var t=o.default.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))},r=function(e){var t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;var n=parseInt(t[1],10);return n!==n?-1:n},i=function(e){var n=65536;return"firefox"===t.browser&&(n=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),n},s=function(e,n){var r=65536;"firefox"===t.browser&&57===t.version&&(r=65535);var i=o.default.matchPrefix(e.sdp,"a=max-message-size:");return i.length>0?r=parseInt(i[0].substr(19),10):"firefox"===t.browser&&-1!==n&&(r=2147483637),r},c=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){var e=this.getConfiguration(),o=e.sdpSemantics;"plan-b"===o&&Object.defineProperty(this,"sctp",{get:function(){return"undefined"===typeof this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){var a=r(arguments[0]),u=i(a),f=s(arguments[0],a),d=void 0;d=0===u&&0===f?Number.POSITIVE_INFINITY:0===u||0===f?Math.max(u,f):Math.min(u,f);var l={};Object.defineProperty(l,"maxMessageSize",{get:function(){return d}}),this._sctp=l}return c.apply(this,arguments)}}}function h(e){if(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype){var t=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){var e=t.apply(this,arguments);return n(e,this),e},a.wrapPeerConnectionEvent(e,"datachannel",(function(e){return n(e.channel,e.target),e}))}function n(e,t){var n=e.send;e.send=function(){var r=arguments[0],i=r.length||r.size||r.byteLength;if("open"===e.readyState&&t.sctp&&i>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}}function m(e){if(e.RTCPeerConnection&&!("connectionState"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null},set:function(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((function(e){var n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(e){var t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;var n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}}))}}function v(e){if(e.RTCPeerConnection){var t=a.detectBrowser(e);if(!("chrome"===t.browser&&t.version>=71)){var n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(e){return e&&e.sdp&&-1!==e.sdp.indexOf("\na=extmap-allow-mixed")&&(e.sdp=e.sdp.split("\n").filter((function(e){return"a=extmap-allow-mixed"!==e.trim()})).join("\n")),n.apply(this,arguments)}}}}},{"./utils":15,sdp:17}],7:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=n.shimGetUserMedia=void 0;var r=e("./getusermedia");Object.defineProperty(n,"shimGetUserMedia",{enumerable:!0,get:function(){return r.shimGetUserMedia}});var i=e("./getdisplaymedia");Object.defineProperty(n,"shimGetDisplayMedia",{enumerable:!0,get:function(){return i.shimGetDisplayMedia}}),n.shimPeerConnection=p,n.shimReplaceTrack=h;var o=e("../utils"),s=d(o),a=e("./filtericeservers"),c=e("rtcpeerconnection-shim"),u=f(c);function f(e){return e&&e.__esModule?e:{default:e}}function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function p(e){var t=s.detectBrowser(e);if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)){var n=(0,l.default)(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set:function(e){n.set.call(this,e);var t=new Event("enabled");t.enabled=e,this.dispatchEvent(t)}})}e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)&&Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);var r=(0,u.default)(e,t.version);e.RTCPeerConnection=function(e){return e&&e.iceServers&&(e.iceServers=(0,a.filterIceServers)(e.iceServers,t.version),s.log("ICE servers after filtering:",e.iceServers)),new r(e)},e.RTCPeerConnection.prototype=r.prototype}function h(e){e.RTCRtpSender&&!("replaceTrack"in e.RTCRtpSender.prototype)&&(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}},{"../utils":15,"./filtericeservers":8,"./getdisplaymedia":9,"./getusermedia":10,"rtcpeerconnection-shim":16}],8:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.filterIceServers=s;var r=e("../utils"),i=o(r);function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function s(e,t){var n=!1;return e=JSON.parse((0,f.default)(e)),e.filter((function(e){if(e&&(e.urls||e.url)){var t=e.urls||e.url;e.url&&!e.urls&&i.deprecated("RTCIceServer.url","RTCIceServer.urls");var r="string"===typeof t;return r&&(t=[t]),t=t.filter((function(e){if(0===e.indexOf("stun:"))return!1;var t=e.startsWith("turn")&&!e.startsWith("turn:[")&&e.includes("transport=udp");return t&&!n?(n=!0,!0):t&&!n})),delete e.url,e.urls=r?t[0]:t,!!t.length}}))}},{"../utils":15}],9:[function(e,t,n){function r(e){"getDisplayMedia"in e.navigator&&e.navigator.mediaDevices&&(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)))}Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=r},{}],10:[function(e,t,n){function r(e){var t=e&&e.navigator,n=function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString:function(){return this.name}}},r=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return r(e).catch((function(e){return h.default.reject(n(e))}))}}Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetUserMedia=r},{}],11:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=n.shimGetUserMedia=void 0;var r="function"===typeof C.default&&"symbol"===(0,I.default)(S.default)?function(e){return"undefined"===typeof e?"undefined":(0,I.default)(e)}:function(e){return e&&"function"===typeof C.default&&e.constructor===C.default&&e!==C.default.prototype?"symbol":"undefined"===typeof e?"undefined":(0,I.default)(e)},i=e("./getusermedia");Object.defineProperty(n,"shimGetUserMedia",{enumerable:!0,get:function(){return i.shimGetUserMedia}});var o=e("./getdisplaymedia");Object.defineProperty(n,"shimGetDisplayMedia",{enumerable:!0,get:function(){return o.shimGetDisplayMedia}}),n.shimOnTrack=d,n.shimPeerConnection=l,n.shimSenderGetStats=p,n.shimReceiverGetStats=m,n.shimRemoveStream=v,n.shimRTCDataChannel=g,n.shimAddTransceiver=b,n.shimCreateOffer=w,n.shimCreateAnswer=x;var s=e("../utils"),a=u(s);function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function f(e,t,n){return t in e?(0,_.default)(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e){"object"===("undefined"===typeof e?"undefined":r(e))&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function l(e){var t=a.detectBrowser(e);if("object"===("undefined"===typeof e?"undefined":r(e))&&(e.RTCPeerConnection||e.mozRTCPeerConnection)){if(!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t],r=f({},t,(function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}));e.RTCPeerConnection.prototype[t]=r[t]})),t.version<68){var n=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?arguments[0]&&""===arguments[0].candidate?h.default.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),h.default.resolve())}}var i={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},o=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=Array.prototype.slice.call(arguments),n=e[0],r=e[1],s=e[2];return o.apply(this,[n||null]).then((function(e){if(t.version<53&&!r)try{e.forEach((function(e){e.type=i[e.type]||e.type}))}catch(n){if("TypeError"!==n.name)throw n;e.forEach((function(t,n){e.set(n,(0,c.default)({},t,{type:i[t.type]||t.type}))}))}return e})).then(r,s)}}}function p(e){if("object"===("undefined"===typeof e?"undefined":r(e))&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpSender.prototype))){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):h.default.resolve(new y.default)}}}function m(e){if("object"===("undefined"===typeof e?"undefined":r(e))&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpReceiver.prototype))){var t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n}),a.wrapPeerConnectionEvent(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}}function v(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;a.deprecated("removeStream","removeTrack"),this.getSenders().forEach((function(n){n.track&&e.getTracks().includes(n.track)&&t.removeTrack(n)}))})}function g(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function b(e){if("object"===("undefined"===typeof e?"undefined":r(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];var e=arguments[1],n=e&&"sendEncodings"in e;n&&e.sendEncodings.forEach((function(e){if("rid"in e){var t=/^[a-z0-9]{0,16}$/i;if(!t.test(e.rid))throw new TypeError("Invalid RID value provided.")}if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")}));var r=t.apply(this,arguments);if(n){var i=r.sender,o=i.getParameters();"encodings"in o||(o.encodings=e.sendEncodings,this.setParametersPromises.push(i.setParameters(o).catch((function(){}))))}return r})}}function w(e){if("object"===("undefined"===typeof e?"undefined":r(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){var e=this,n=arguments;return this.setParametersPromises&&this.setParametersPromises.length?h.default.all(this.setParametersPromises).then((function(){return t.apply(e,n)})).finally((function(){e.setParametersPromises=[]})):t.apply(this,arguments)}}}function x(e){if("object"===("undefined"===typeof e?"undefined":r(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){var e=this,n=arguments;return this.setParametersPromises&&this.setParametersPromises.length?h.default.all(this.setParametersPromises).then((function(){return t.apply(e,n)})).finally((function(){e.setParametersPromises=[]})):t.apply(this,arguments)}}}},{"../utils":15,"./getdisplaymedia":12,"./getusermedia":13}],12:[function(e,t,n){function r(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){var r=new DOMException("getDisplayMedia without video constraints is undefined");return r.name="NotFoundError",r.code=8,h.default.reject(r)}return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})}Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=r},{}],13:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r="function"===typeof C.default&&"symbol"===(0,I.default)(S.default)?function(e){return"undefined"===typeof e?"undefined":(0,I.default)(e)}:function(e){return e&&"function"===typeof C.default&&e.constructor===C.default&&e!==C.default.prototype?"symbol":"undefined"===typeof e?"undefined":(0,I.default)(e)};n.shimGetUserMedia=a;var i=e("../utils"),o=s(i);function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){var t=o.detectBrowser(e),n=e&&e.navigator,i=e&&e.MediaStreamTrack;if(n.getUserMedia=function(e,t,r){o.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(t,r)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){var s=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},a=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(e){return"object"===("undefined"===typeof e?"undefined":r(e))&&"object"===r(e.audio)&&(e=JSON.parse((0,f.default)(e)),s(e.audio,"autoGainControl","mozAutoGainControl"),s(e.audio,"noiseSuppression","mozNoiseSuppression")),a(e)},i&&i.prototype.getSettings){var c=i.prototype.getSettings;i.prototype.getSettings=function(){var e=c.apply(this,arguments);return s(e,"mozAutoGainControl","autoGainControl"),s(e,"mozNoiseSuppression","noiseSuppression"),e}}if(i&&i.prototype.applyConstraints){var u=i.prototype.applyConstraints;i.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"===("undefined"===typeof e?"undefined":r(e))&&(e=JSON.parse((0,f.default)(e)),s(e,"autoGainControl","mozAutoGainControl"),s(e,"noiseSuppression","mozNoiseSuppression")),u.apply(this,[e])}}}}},{"../utils":15}],14:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r="function"===typeof C.default&&"symbol"===(0,I.default)(S.default)?function(e){return"undefined"===typeof e?"undefined":(0,I.default)(e)}:function(e){return e&&"function"===typeof C.default&&e.constructor===C.default&&e!==C.default.prototype?"symbol":"undefined"===typeof e?"undefined":(0,I.default)(e)};n.shimLocalStreamsAPI=a,n.shimRemoteStreamsAPI=u,n.shimCallbacksAPI=d,n.shimGetUserMedia=l,n.shimConstraints=p,n.shimRTCIceServerUrls=m,n.shimTrackEventTransceiver=v,n.shimCreateOfferLegacy=g,n.shimAudioContext=y;var i=e("../utils"),o=s(i);function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){if("object"===("undefined"===typeof e?"undefined":r(e))&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach((function(r){return t.call(n,r,e)})),e.getVideoTracks().forEach((function(r){return t.call(n,r,e)}))},e.RTCPeerConnection.prototype.addTrack=function(e){for(var n=this,r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return i&&i.forEach((function(e){n._localStreams?n._localStreams.includes(e)||n._localStreams.push(e):n._localStreams=[e]})),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._localStreams||(this._localStreams=[]);var n=this._localStreams.indexOf(e);if(-1!==n){this._localStreams.splice(n,1);var r=e.getTracks();this.getSenders().forEach((function(e){r.includes(e.track)&&t.removeTrack(e)}))}})}}function u(e){if("object"===("undefined"===typeof e?"undefined":r(e))&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){var t=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach((function(e){if(t._remoteStreams||(t._remoteStreams=[]),!t._remoteStreams.includes(e)){t._remoteStreams.push(e);var n=new Event("addstream");n.stream=e,t.dispatchEvent(n)}}))})}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((function(t){if(e._remoteStreams||(e._remoteStreams=[]),!(e._remoteStreams.indexOf(t)>=0)){e._remoteStreams.push(t);var n=new Event("addstream");n.stream=t,e.dispatchEvent(n)}}))}),t.apply(e,arguments)}}}function d(e){if("object"===("undefined"===typeof e?"undefined":r(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype,n=t.createOffer,i=t.createAnswer,o=t.setLocalDescription,s=t.setRemoteDescription,a=t.addIceCandidate;t.createOffer=function(e,t){var r=arguments.length>=2?arguments[2]:arguments[0],i=n.apply(this,[r]);return t?(i.then(e,t),h.default.resolve()):i},t.createAnswer=function(e,t){var n=arguments.length>=2?arguments[2]:arguments[0],r=i.apply(this,[n]);return t?(r.then(e,t),h.default.resolve()):r};var c=function(e,t,n){var r=o.apply(this,[e]);return n?(r.then(t,n),h.default.resolve()):r};t.setLocalDescription=c,c=function(e,t,n){var r=s.apply(this,[e]);return n?(r.then(t,n),h.default.resolve()):r},t.setRemoteDescription=c,c=function(e,t,n){var r=a.apply(this,[e]);return n?(r.then(t,n),h.default.resolve()):r},t.addIceCandidate=c}}function l(e){var t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){var n=t.mediaDevices,r=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=function(e){return r(p(e))}}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,r){t.mediaDevices.getUserMedia(e).then(n,r)}.bind(t))}function p(e){return e&&void 0!==e.video?(0,c.default)({},e,{video:o.compactObject(e.video)}):e}function m(e){var t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){for(var r=[],i=0;i<e.iceServers.length;i++){var s=e.iceServers[i];!s.hasOwnProperty("urls")&&s.hasOwnProperty("url")?(o.deprecated("RTCIceServer.url","RTCIceServer.urls"),s=JSON.parse((0,f.default)(s)),s.urls=s.url,delete s.url,r.push(s)):r.push(e.iceServers[i])}e.iceServers=r}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in e.RTCPeerConnection&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return t.generateCertificate}})}function v(e){"object"===("undefined"===typeof e?"undefined":r(e))&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function g(e){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){"undefined"!==typeof e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);var n=this.getTransceivers().find((function(e){return"audio"===e.receiver.track.kind}));!1===e.offerToReceiveAudio&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveAudio||n||this.addTransceiver("audio"),"undefined"!==typeof e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);var r=this.getTransceivers().find((function(e){return"video"===e.receiver.track.kind}));!1===e.offerToReceiveVideo&&r?"sendrecv"===r.direction?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":"recvonly"===r.direction&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):!0!==e.offerToReceiveVideo||r||this.addTransceiver("video")}return t.apply(this,arguments)}}function y(e){"object"!==("undefined"===typeof e?"undefined":r(e))||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}},{"../utils":15}],15:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r="function"===typeof C.default&&"symbol"===(0,I.default)(S.default)?function(e){return"undefined"===typeof e?"undefined":(0,I.default)(e)}:function(e){return e&&"function"===typeof C.default&&e.constructor===C.default&&e!==C.default.prototype?"symbol":"undefined"===typeof e?"undefined":(0,I.default)(e)};function i(e,t,n){return t in e?(0,_.default)(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.extractVersion=a,n.wrapPeerConnectionEvent=u,n.disableLog=f,n.disableWarnings=d,n.log=l,n.deprecated=p,n.detectBrowser=h,n.compactObject=g,n.walkStats=b,n.filterStats=w;var o=!0,s=!0;function a(e,t,n){var r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function u(e,t,n){if(e.RTCPeerConnection){var r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(e,r){if(e!==t)return i.apply(this,arguments);var o=function(e){var t=n(e);t&&r(t)};return this._eventMap=this._eventMap||{},this._eventMap[r]=o,i.apply(this,[e,o])};var o=r.removeEventListener;r.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[n])return o.apply(this,arguments);var r=this._eventMap[n];return delete this._eventMap[n],o.apply(this,[e,r])},(0,_.default)(r,"on"+t,{get:function(){return this["_on"+t]},set:function(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}}function f(e){return"boolean"!==typeof e?new Error("Argument type: "+("undefined"===typeof e?"undefined":r(e))+". Please use a boolean."):(o=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function d(e){return"boolean"!==typeof e?new Error("Argument type: "+("undefined"===typeof e?"undefined":r(e))+". Please use a boolean."):(s=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function l(){if("object"===("undefined"===typeof window?"undefined":r(window))){if(o)return;"undefined"!==typeof console&&"function"===typeof console.log&&console.log.apply(console,arguments)}}function p(e,t){s&&console.warn(e+" is deprecated, please use "+t+" instead.")}function h(e){var t=e.navigator,n={browser:null,version:null};if("undefined"===typeof e||!e.navigator)return n.browser="Not a browser.",n;if(t.mozGetUserMedia)n.browser="firefox",n.version=a(t.userAgent,/Firefox\/(\d+)\./,1);else if(t.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)n.browser="chrome",n.version=a(t.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(t.mediaDevices&&t.userAgent.match(/Edge\/(\d+).(\d+)$/))n.browser="edge",n.version=a(t.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!t.userAgent.match(/AppleWebKit\/(\d+)\./))return n.browser="Not a supported browser.",n;n.browser="safari",n.version=a(t.userAgent,/AppleWebKit\/(\d+)\./,1),n.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return n}function m(e){return"[object Object]"===Object.prototype.toString.call(e)}function g(e){return m(e)?(0,v.default)(e).reduce((function(t,n){var r=m(e[n]),o=r?g(e[n]):e[n],s=r&&!(0,v.default)(o).length;return void 0===o||s?t:(0,c.default)(t,i({},n,o))}),{}):e}function b(e,t,n){t&&!n.has(t.id)&&(n.set(t.id,t),(0,v.default)(t).forEach((function(r){r.endsWith("Id")?b(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach((function(t){b(e,e.get(t),n)}))})))}function w(e,t,n){var r=n?"outbound-rtp":"inbound-rtp",i=new y.default;if(null===t)return i;var o=[];return e.forEach((function(e){"track"===e.type&&e.trackIdentifier===t.id&&o.push(e)})),o.forEach((function(t){e.forEach((function(n){n.type===r&&n.trackId===t.id&&b(e,n,i)}))})),i}},{}],16:[function(e,t,n){var r=e("sdp");function i(e){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type}function o(e,t,n,i,o){var s=r.writeRtpDescription(e.kind,t);if(s+=r.writeIceParameters(e.iceGatherer.getLocalParameters()),s+=r.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":o||"active"),s+="a=mid:"+e.mid+"\r\n",e.rtpSender&&e.rtpReceiver?s+="a=sendrecv\r\n":e.rtpSender?s+="a=sendonly\r\n":e.rtpReceiver?s+="a=recvonly\r\n":s+="a=inactive\r\n",e.rtpSender){var a=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=a;var c="msid:"+(i?i.id:"-")+" "+a+"\r\n";s+="a="+c,s+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+c,e.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+c,s+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return s+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+r.localCName+"\r\n"),s}function s(e,t){var n=!1;return e=JSON.parse((0,f.default)(e)),e.filter((function(e){if(e&&(e.urls||e.url)){var r=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var i="string"===typeof r;return i&&(r=[r]),r=r.filter((function(e){var r=0===e.indexOf("turn:")&&-1!==e.indexOf("transport=udp")&&-1===e.indexOf("turn:[")&&!n;return r?(n=!0,!0):0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp")})),delete e.url,e.urls=i?r[0]:r,!!r.length}}))}function a(e,t){var n={codecs:[],headerExtensions:[],fecMechanisms:[]},r=function(e,t){e=parseInt(e,10);for(var n=0;n<t.length;n++)if(t[n].payloadType===e||t[n].preferredPayloadType===e)return t[n]},i=function(e,t,n,i){var o=r(e.parameters.apt,n),s=r(t.parameters.apt,i);return o&&s&&o.name.toLowerCase()===s.name.toLowerCase()};return e.codecs.forEach((function(r){for(var o=0;o<t.codecs.length;o++){var s=t.codecs[o];if(r.name.toLowerCase()===s.name.toLowerCase()&&r.clockRate===s.clockRate){if("rtx"===r.name.toLowerCase()&&r.parameters&&s.parameters.apt&&!i(r,s,e.codecs,t.codecs))continue;s=JSON.parse((0,f.default)(s)),s.numChannels=Math.min(r.numChannels,s.numChannels),n.codecs.push(s),s.rtcpFeedback=s.rtcpFeedback.filter((function(e){for(var t=0;t<r.rtcpFeedback.length;t++)if(r.rtcpFeedback[t].type===e.type&&r.rtcpFeedback[t].parameter===e.parameter)return!0;return!1}));break}}})),e.headerExtensions.forEach((function(e){for(var r=0;r<t.headerExtensions.length;r++){var i=t.headerExtensions[r];if(e.uri===i.uri){n.headerExtensions.push(i);break}}})),n}function u(e,t,n){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(n)}function d(e,t){var n=e.getRemoteCandidates().find((function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type}));return n||e.addRemoteCandidate(t),!n}function l(e,t){var n=new Error(t);return n.name=e,n.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],n}t.exports=function(e,t){function n(t,n){n.addTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:t}))}function p(t,n){n.removeTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:t}))}function m(t,n,r,i){var o=new Event("track");o.track=n,o.receiver=r,o.transceiver={receiver:r},o.streams=i,e.setTimeout((function(){t._dispatchEvent("track",o)}))}var g=function(n){var i=this,o=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach((function(e){i[e]=o[e].bind(o)})),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",n=JSON.parse((0,f.default)(n||{})),this.usingBundle="max-bundle"===n.bundlePolicy,"negotiate"===n.rtcpMuxPolicy)throw l("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(n.rtcpMuxPolicy||(n.rtcpMuxPolicy="require"),n.iceTransportPolicy){case"all":case"relay":break;default:n.iceTransportPolicy="all";break}switch(n.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:n.bundlePolicy="balanced";break}if(n.iceServers=s(n.iceServers||[],t),this._iceGatherers=[],n.iceCandidatePoolSize)for(var a=n.iceCandidatePoolSize;a>0;a--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:n.iceServers,gatherPolicy:n.iceTransportPolicy}));else n.iceCandidatePoolSize=0;this._config=n,this.transceivers=[],this._sdpSessionId=r.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(g.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(g.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),g.prototype.onicecandidate=null,g.prototype.onaddstream=null,g.prototype.ontrack=null,g.prototype.onremovestream=null,g.prototype.onsignalingstatechange=null,g.prototype.oniceconnectionstatechange=null,g.prototype.onconnectionstatechange=null,g.prototype.onicegatheringstatechange=null,g.prototype.onnegotiationneeded=null,g.prototype.ondatachannel=null,g.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"===typeof this["on"+e]&&this["on"+e](t))},g.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},g.prototype.getConfiguration=function(){return this._config},g.prototype.getLocalStreams=function(){return this.localStreams},g.prototype.getRemoteStreams=function(){return this.remoteStreams},g.prototype._createTransceiver=function(e,t){var n=this.transceivers.length>0,r={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&n)r.iceTransport=this.transceivers[0].iceTransport,r.dtlsTransport=this.transceivers[0].dtlsTransport;else{var i=this._createIceAndDtlsTransports();r.iceTransport=i.iceTransport,r.dtlsTransport=i.dtlsTransport}return t||this.transceivers.push(r),r},g.prototype.addTrack=function(t,n){if(this._isClosed)throw l("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var r,i=this.transceivers.find((function(e){return e.track===t}));if(i)throw l("InvalidAccessError","Track already exists.");for(var o=0;o<this.transceivers.length;o++)this.transceivers[o].track||this.transceivers[o].kind!==t.kind||(r=this.transceivers[o]);return r||(r=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(n)&&this.localStreams.push(n),r.track=t,r.stream=n,r.rtpSender=new e.RTCRtpSender(t,r.dtlsTransport),r.rtpSender},g.prototype.addStream=function(e){var n=this;if(t>=15025)e.getTracks().forEach((function(t){n.addTrack(t,e)}));else{var r=e.clone();e.getTracks().forEach((function(e,t){var n=r.getTracks()[t];e.addEventListener("enabled",(function(e){n.enabled=e.enabled}))})),r.getTracks().forEach((function(e){n.addTrack(e,r)}))}},g.prototype.removeTrack=function(t){if(this._isClosed)throw l("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(t instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var n=this.transceivers.find((function(e){return e.rtpSender===t}));if(!n)throw l("InvalidAccessError","Sender was not created by this connection.");var r=n.stream;n.rtpSender.stop(),n.rtpSender=null,n.track=null,n.stream=null;var i=this.transceivers.map((function(e){return e.stream}));-1===i.indexOf(r)&&this.localStreams.indexOf(r)>-1&&this.localStreams.splice(this.localStreams.indexOf(r),1),this._maybeFireNegotiationNeeded()},g.prototype.removeStream=function(e){var t=this;e.getTracks().forEach((function(e){var n=t.getSenders().find((function(t){return t.track===e}));n&&t.removeTrack(n)}))},g.prototype.getSenders=function(){return this.transceivers.filter((function(e){return!!e.rtpSender})).map((function(e){return e.rtpSender}))},g.prototype.getReceivers=function(){return this.transceivers.filter((function(e){return!!e.rtpReceiver})).map((function(e){return e.rtpReceiver}))},g.prototype._createIceGatherer=function(t,n){var r=this;if(n&&t>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var i=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(i,"state",{value:"new",writable:!0}),this.transceivers[t].bufferedCandidateEvents=[],this.transceivers[t].bufferCandidates=function(e){var n=!e.candidate||0===(0,v.default)(e.candidate).length;i.state=n?"completed":"gathering",null!==r.transceivers[t].bufferedCandidateEvents&&r.transceivers[t].bufferedCandidateEvents.push(e)},i.addEventListener("localcandidate",this.transceivers[t].bufferCandidates),i},g.prototype._gather=function(t,n){var i=this,o=this.transceivers[n].iceGatherer;if(!o.onlocalcandidate){var s=this.transceivers[n].bufferedCandidateEvents;this.transceivers[n].bufferedCandidateEvents=null,o.removeEventListener("localcandidate",this.transceivers[n].bufferCandidates),o.onlocalcandidate=function(e){if(!(i.usingBundle&&n>0)){var s=new Event("icecandidate");s.candidate={sdpMid:t,sdpMLineIndex:n};var a=e.candidate,u=!a||0===(0,v.default)(a).length;if(u)"new"!==o.state&&"gathering"!==o.state||(o.state="completed");else{"new"===o.state&&(o.state="gathering"),a.component=1,a.ufrag=o.getLocalParameters().usernameFragment;var f=r.writeCandidate(a);s.candidate=(0,c.default)(s.candidate,r.parseCandidate(f)),s.candidate.candidate=f,s.candidate.toJSON=function(){return{candidate:s.candidate.candidate,sdpMid:s.candidate.sdpMid,sdpMLineIndex:s.candidate.sdpMLineIndex,usernameFragment:s.candidate.usernameFragment}}}var d=r.getMediaSections(i._localDescription.sdp);d[s.candidate.sdpMLineIndex]+=u?"a=end-of-candidates\r\n":"a="+s.candidate.candidate+"\r\n",i._localDescription.sdp=r.getDescription(i._localDescription.sdp)+d.join("");var l=i.transceivers.every((function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state}));"gathering"!==i.iceGatheringState&&(i.iceGatheringState="gathering",i._emitGatheringStateChange()),u||i._dispatchEvent("icecandidate",s),l&&(i._dispatchEvent("icecandidate",new Event("icecandidate")),i.iceGatheringState="complete",i._emitGatheringStateChange())}},e.setTimeout((function(){s.forEach((function(e){o.onlocalcandidate(e)}))}),0)}},g.prototype._createIceAndDtlsTransports=function(){var t=this,n=new e.RTCIceTransport(null);n.onicestatechange=function(){t._updateIceConnectionState(),t._updateConnectionState()};var r=new e.RTCDtlsTransport(n);return r.ondtlsstatechange=function(){t._updateConnectionState()},r.onerror=function(){Object.defineProperty(r,"state",{value:"failed",writable:!0}),t._updateConnectionState()},{iceTransport:n,dtlsTransport:r}},g.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var n=this.transceivers[e].iceTransport;n&&(delete n.onicestatechange,delete this.transceivers[e].iceTransport);var r=this.transceivers[e].dtlsTransport;r&&(delete r.ondtlsstatechange,delete r.onerror,delete this.transceivers[e].dtlsTransport)},g.prototype._transceive=function(e,n,i){var o=a(e.localCapabilities,e.remoteCapabilities);n&&e.rtpSender&&(o.encodings=e.sendEncodingParameters,o.rtcp={cname:r.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(o.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(o)),i&&e.rtpReceiver&&o.codecs.length>0&&("video"===e.kind&&e.recvEncodingParameters&&t<15019&&e.recvEncodingParameters.forEach((function(e){delete e.rtx})),e.recvEncodingParameters.length?o.encodings=e.recvEncodingParameters:o.encodings=[{}],o.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(o.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(o.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(o))},g.prototype.setLocalDescription=function(e){var t,n,i=this;if(-1===["offer","answer"].indexOf(e.type))return h.default.reject(l("TypeError",'Unsupported type "'+e.type+'"'));if(!u("setLocalDescription",e.type,i.signalingState)||i._isClosed)return h.default.reject(l("InvalidStateError","Can not set local "+e.type+" in state "+i.signalingState));if("offer"===e.type)t=r.splitSections(e.sdp),n=t.shift(),t.forEach((function(e,t){var n=r.parseRtpParameters(e);i.transceivers[t].localCapabilities=n})),i.transceivers.forEach((function(e,t){i._gather(e.mid,t)}));else if("answer"===e.type){t=r.splitSections(i._remoteDescription.sdp),n=t.shift();var o=r.matchPrefix(n,"a=ice-lite").length>0;t.forEach((function(e,t){var s=i.transceivers[t],c=s.iceGatherer,u=s.iceTransport,f=s.dtlsTransport,d=s.localCapabilities,l=s.remoteCapabilities,p=r.isRejected(e)&&0===r.matchPrefix(e,"a=bundle-only").length;if(!p&&!s.rejected){var h=r.getIceParameters(e,n),m=r.getDtlsParameters(e,n);o&&(m.role="server"),i.usingBundle&&0!==t||(i._gather(s.mid,t),"new"===u.state&&u.start(c,h,o?"controlling":"controlled"),"new"===f.state&&f.start(m));var v=a(d,l);i._transceive(s,v.codecs.length>0,!1)}}))}return i._localDescription={type:e.type,sdp:e.sdp},"offer"===e.type?i._updateSignalingState("have-local-offer"):i._updateSignalingState("stable"),h.default.resolve()},g.prototype.setRemoteDescription=function(i){var o=this;if(-1===["offer","answer"].indexOf(i.type))return h.default.reject(l("TypeError",'Unsupported type "'+i.type+'"'));if(!u("setRemoteDescription",i.type,o.signalingState)||o._isClosed)return h.default.reject(l("InvalidStateError","Can not set remote "+i.type+" in state "+o.signalingState));var s={};o.remoteStreams.forEach((function(e){s[e.id]=e}));var c=[],f=r.splitSections(i.sdp),g=f.shift(),y=r.matchPrefix(g,"a=ice-lite").length>0,b=r.matchPrefix(g,"a=group:BUNDLE ").length>0;o.usingBundle=b;var _=r.matchPrefix(g,"a=ice-options:")[0];return o.canTrickleIceCandidates=!!_&&_.substr(14).split(" ").indexOf("trickle")>=0,f.forEach((function(u,f){var l=r.splitLines(u),h=r.getKind(u),m=r.isRejected(u)&&0===r.matchPrefix(u,"a=bundle-only").length,v=l[0].substr(2).split(" ")[2],_=r.getDirection(u,g),w=r.parseMsid(u),S=r.getMid(u)||r.generateIdentifier();if(m||"application"===h&&("DTLS/SCTP"===v||"UDP/DTLS/SCTP"===v))o.transceivers[f]={mid:S,kind:h,protocol:v,rejected:!0};else{var x,C,E,I,T,O,R,k,M;!m&&o.transceivers[f]&&o.transceivers[f].rejected&&(o.transceivers[f]=o._createTransceiver(h,!0));var A,P,j=r.parseRtpParameters(u);m||(A=r.getIceParameters(u,g),P=r.getDtlsParameters(u,g),P.role="client"),R=r.parseRtpEncodingParameters(u);var N=r.parseRtcpParameters(u),L=r.matchPrefix(u,"a=end-of-candidates",g).length>0,D=r.matchPrefix(u,"a=candidate:").map((function(e){return r.parseCandidate(e)})).filter((function(e){return 1===e.component}));if(("offer"===i.type||"answer"===i.type)&&!m&&b&&f>0&&o.transceivers[f]&&(o._disposeIceAndDtlsTransports(f),o.transceivers[f].iceGatherer=o.transceivers[0].iceGatherer,o.transceivers[f].iceTransport=o.transceivers[0].iceTransport,o.transceivers[f].dtlsTransport=o.transceivers[0].dtlsTransport,o.transceivers[f].rtpSender&&o.transceivers[f].rtpSender.setTransport(o.transceivers[0].dtlsTransport),o.transceivers[f].rtpReceiver&&o.transceivers[f].rtpReceiver.setTransport(o.transceivers[0].dtlsTransport)),"offer"!==i.type||m){if("answer"===i.type&&!m){x=o.transceivers[f],C=x.iceGatherer,E=x.iceTransport,I=x.dtlsTransport,T=x.rtpReceiver,O=x.sendEncodingParameters,k=x.localCapabilities,o.transceivers[f].recvEncodingParameters=R,o.transceivers[f].remoteCapabilities=j,o.transceivers[f].rtcpParameters=N,D.length&&"new"===E.state&&(!y&&!L||b&&0!==f?D.forEach((function(e){d(x.iceTransport,e)})):E.setRemoteCandidates(D)),b&&0!==f||("new"===E.state&&E.start(C,A,"controlling"),"new"===I.state&&I.start(P));var B=a(x.localCapabilities,x.remoteCapabilities),U=B.codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length;!U&&x.sendEncodingParameters[0].rtx&&delete x.sendEncodingParameters[0].rtx,o._transceive(x,"sendrecv"===_||"recvonly"===_,"sendrecv"===_||"sendonly"===_),!T||"sendrecv"!==_&&"sendonly"!==_?delete x.rtpReceiver:(M=T.track,w?(s[w.stream]||(s[w.stream]=new e.MediaStream),n(M,s[w.stream]),c.push([M,T,s[w.stream]])):(s.default||(s.default=new e.MediaStream),n(M,s.default),c.push([M,T,s.default])))}}else{x=o.transceivers[f]||o._createTransceiver(h),x.mid=S,x.iceGatherer||(x.iceGatherer=o._createIceGatherer(f,b)),D.length&&"new"===x.iceTransport.state&&(!L||b&&0!==f?D.forEach((function(e){d(x.iceTransport,e)})):x.iceTransport.setRemoteCandidates(D)),k=e.RTCRtpReceiver.getCapabilities(h),t<15019&&(k.codecs=k.codecs.filter((function(e){return"rtx"!==e.name}))),O=x.sendEncodingParameters||[{ssrc:1001*(2*f+2)}];var F,V=!1;if("sendrecv"===_||"sendonly"===_){if(V=!x.rtpReceiver,T=x.rtpReceiver||new e.RTCRtpReceiver(x.dtlsTransport,h),V)M=T.track,w&&"-"===w.stream||(w?(s[w.stream]||(s[w.stream]=new e.MediaStream,Object.defineProperty(s[w.stream],"id",{get:function(){return w.stream}})),Object.defineProperty(M,"id",{get:function(){return w.track}}),F=s[w.stream]):(s.default||(s.default=new e.MediaStream),F=s.default)),F&&(n(M,F),x.associatedRemoteMediaStreams.push(F)),c.push([M,T,F])}else x.rtpReceiver&&x.rtpReceiver.track&&(x.associatedRemoteMediaStreams.forEach((function(e){var t=e.getTracks().find((function(e){return e.id===x.rtpReceiver.track.id}));t&&p(t,e)})),x.associatedRemoteMediaStreams=[]);x.localCapabilities=k,x.remoteCapabilities=j,x.rtpReceiver=T,x.rtcpParameters=N,x.sendEncodingParameters=O,x.recvEncodingParameters=R,o._transceive(o.transceivers[f],!1,V)}}})),void 0===o._dtlsRole&&(o._dtlsRole="offer"===i.type?"active":"passive"),o._remoteDescription={type:i.type,sdp:i.sdp},"offer"===i.type?o._updateSignalingState("have-remote-offer"):o._updateSignalingState("stable"),(0,v.default)(s).forEach((function(t){var n=s[t];if(n.getTracks().length){if(-1===o.remoteStreams.indexOf(n)){o.remoteStreams.push(n);var r=new Event("addstream");r.stream=n,e.setTimeout((function(){o._dispatchEvent("addstream",r)}))}c.forEach((function(e){var t=e[0],r=e[1];n.id===e[2].id&&m(o,t,r,[n])}))}})),c.forEach((function(e){e[2]||m(o,e[0],e[1],[])})),e.setTimeout((function(){o&&o.transceivers&&o.transceivers.forEach((function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))}))}),4e3),h.default.resolve()},g.prototype.close=function(){this.transceivers.forEach((function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()})),this._isClosed=!0,this._updateSignalingState("closed")},g.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)},g.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,e.setTimeout((function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t._dispatchEvent("negotiationneeded",e)}}),0))},g.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++})),e="new",t.failed>0?e="failed":t.checking>0?e="checking":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0?e="connected":t.completed>0&&(e="completed"),e!==this.iceConnectionState){this.iceConnectionState=e;var n=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",n)}},g.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)})),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0?e="connecting":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0&&(e="connected"),e!==this.connectionState){this.connectionState=e;var n=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",n)}},g.prototype.createOffer=function(){var n=this;if(n._isClosed)return h.default.reject(l("InvalidStateError","Can not call createOffer after close"));var i=n.transceivers.filter((function(e){return"audio"===e.kind})).length,s=n.transceivers.filter((function(e){return"video"===e.kind})).length,a=arguments[0];if(a){if(a.mandatory||a.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==a.offerToReceiveAudio&&(i=!0===a.offerToReceiveAudio?1:!1===a.offerToReceiveAudio?0:a.offerToReceiveAudio),void 0!==a.offerToReceiveVideo&&(s=!0===a.offerToReceiveVideo?1:!1===a.offerToReceiveVideo?0:a.offerToReceiveVideo)}n.transceivers.forEach((function(e){"audio"===e.kind?(i--,i<0&&(e.wantReceive=!1)):"video"===e.kind&&(s--,s<0&&(e.wantReceive=!1))}));while(i>0||s>0)i>0&&(n._createTransceiver("audio"),i--),s>0&&(n._createTransceiver("video"),s--);var c=r.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.transceivers.forEach((function(i,o){var s=i.track,a=i.kind,c=i.mid||r.generateIdentifier();i.mid=c,i.iceGatherer||(i.iceGatherer=n._createIceGatherer(o,n.usingBundle));var u=e.RTCRtpSender.getCapabilities(a);t<15019&&(u.codecs=u.codecs.filter((function(e){return"rtx"!==e.name}))),u.codecs.forEach((function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),i.remoteCapabilities&&i.remoteCapabilities.codecs&&i.remoteCapabilities.codecs.forEach((function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)}))})),u.headerExtensions.forEach((function(e){var t=i.remoteCapabilities&&i.remoteCapabilities.headerExtensions||[];t.forEach((function(t){e.uri===t.uri&&(e.id=t.id)}))}));var f=i.sendEncodingParameters||[{ssrc:1001*(2*o+1)}];s&&t>=15019&&"video"===a&&!f[0].rtx&&(f[0].rtx={ssrc:f[0].ssrc+1}),i.wantReceive&&(i.rtpReceiver=new e.RTCRtpReceiver(i.dtlsTransport,a)),i.localCapabilities=u,i.sendEncodingParameters=f})),"max-compat"!==n._config.bundlePolicy&&(c+="a=group:BUNDLE "+n.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),c+="a=ice-options:trickle\r\n",n.transceivers.forEach((function(e,t){c+=o(e,e.localCapabilities,"offer",e.stream,n._dtlsRole),c+="a=rtcp-rsize\r\n",!e.iceGatherer||"new"===n.iceGatheringState||0!==t&&n.usingBundle||(e.iceGatherer.getLocalCandidates().forEach((function(e){e.component=1,c+="a="+r.writeCandidate(e)+"\r\n"})),"completed"===e.iceGatherer.state&&(c+="a=end-of-candidates\r\n"))}));var u=new e.RTCSessionDescription({type:"offer",sdp:c});return h.default.resolve(u)},g.prototype.createAnswer=function(){var n=this;if(n._isClosed)return h.default.reject(l("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==n.signalingState&&"have-local-pranswer"!==n.signalingState)return h.default.reject(l("InvalidStateError","Can not call createAnswer in signalingState "+n.signalingState));var i=r.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.usingBundle&&(i+="a=group:BUNDLE "+n.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),i+="a=ice-options:trickle\r\n";var s=r.getMediaSections(n._remoteDescription.sdp).length;n.transceivers.forEach((function(e,r){if(!(r+1>s)){if(e.rejected)return"application"===e.kind?"DTLS/SCTP"===e.protocol?i+="m=application 0 DTLS/SCTP 5000\r\n":i+="m=application 0 "+e.protocol+" webrtc-datachannel\r\n":"audio"===e.kind?i+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(i+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(i+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n");var c;if(e.stream)"audio"===e.kind?c=e.stream.getAudioTracks()[0]:"video"===e.kind&&(c=e.stream.getVideoTracks()[0]),c&&t>=15019&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1});var u=a(e.localCapabilities,e.remoteCapabilities),f=u.codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length;!f&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,i+=o(e,u,"answer",e.stream,n._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(i+="a=rtcp-rsize\r\n")}}));var c=new e.RTCSessionDescription({type:"answer",sdp:i});return h.default.resolve(c)},g.prototype.addIceCandidate=function(e){var t,n=this;return e&&void 0===e.sdpMLineIndex&&!e.sdpMid?h.default.reject(new TypeError("sdpMLineIndex or sdpMid required")):new h.default((function(i,o){if(!n._remoteDescription)return o(l("InvalidStateError","Can not add ICE candidate without a remote description"));if(e&&""!==e.candidate){var s=e.sdpMLineIndex;if(e.sdpMid)for(var a=0;a<n.transceivers.length;a++)if(n.transceivers[a].mid===e.sdpMid){s=a;break}var c=n.transceivers[s];if(!c)return o(l("OperationError","Can not add ICE candidate"));if(c.rejected)return i();var u=(0,v.default)(e.candidate).length>0?r.parseCandidate(e.candidate):{};if("tcp"===u.protocol&&(0===u.port||9===u.port))return i();if(u.component&&1!==u.component)return i();if((0===s||s>0&&c.iceTransport!==n.transceivers[0].iceTransport)&&!d(c.iceTransport,u))return o(l("OperationError","Can not add ICE candidate"));var f=e.candidate.trim();0===f.indexOf("a=")&&(f=f.substr(2)),t=r.getMediaSections(n._remoteDescription.sdp),t[s]+="a="+(u.type?f:"end-of-candidates")+"\r\n",n._remoteDescription.sdp=r.getDescription(n._remoteDescription.sdp)+t.join("")}else for(var p=0;p<n.transceivers.length;p++)if(!n.transceivers[p].rejected&&(n.transceivers[p].iceTransport.addRemoteCandidate({}),t=r.getMediaSections(n._remoteDescription.sdp),t[p]+="a=end-of-candidates\r\n",n._remoteDescription.sdp=r.getDescription(n._remoteDescription.sdp)+t.join(""),n.usingBundle))break;i()}))},g.prototype.getStats=function(t){if(t&&t instanceof e.MediaStreamTrack){var n=null;if(this.transceivers.forEach((function(e){e.rtpSender&&e.rtpSender.track===t?n=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(n=e.rtpReceiver)})),!n)throw l("InvalidAccessError","Invalid selector.");return n.getStats()}var r=[];return this.transceivers.forEach((function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach((function(t){e[t]&&r.push(e[t].getStats())}))})),h.default.all(r).then((function(e){var t=new y.default;return e.forEach((function(e){e.forEach((function(e){t.set(e.id,e)}))})),t}))};var b=["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"];b.forEach((function(t){var n=e[t];if(n&&n.prototype&&n.prototype.getStats){var r=n.prototype.getStats;n.prototype.getStats=function(){return r.apply(this).then((function(e){var t=new y.default;return(0,v.default)(e).forEach((function(n){e[n].type=i(e[n]),t.set(n,e[n])})),t}))}}}));var _=["createOffer","createAnswer"];return _.forEach((function(e){var t=g.prototype[e];g.prototype[e]=function(){var e=arguments;return"function"===typeof e[0]||"function"===typeof e[1]?t.apply(this,[arguments[2]]).then((function(t){"function"===typeof e[0]&&e[0].apply(null,[t])}),(function(t){"function"===typeof e[1]&&e[1].apply(null,[t])})):t.apply(this,arguments)}})),_=["setLocalDescription","setRemoteDescription","addIceCandidate"],_.forEach((function(e){var t=g.prototype[e];g.prototype[e]=function(){var e=arguments;return"function"===typeof e[1]||"function"===typeof e[2]?t.apply(this,arguments).then((function(){"function"===typeof e[1]&&e[1].apply(null)}),(function(t){"function"===typeof e[2]&&e[2].apply(null,[t])})):t.apply(this,arguments)}})),["getStats"].forEach((function(e){var t=g.prototype[e];g.prototype[e]=function(){var e=arguments;return"function"===typeof e[1]?t.apply(this,arguments).then((function(){"function"===typeof e[1]&&e[1].apply(null)})):t.apply(this,arguments)}})),g}},{sdp:17}],17:[function(e,t,n){var r={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};r.localCName=r.generateIdentifier(),r.splitLines=function(e){return e.trim().split("\n").map((function(e){return e.trim()}))},r.splitSections=function(e){var t=e.split("\nm=");return t.map((function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"}))},r.getDescription=function(e){var t=r.splitSections(e);return t&&t[0]},r.getMediaSections=function(e){var t=r.splitSections(e);return t.shift(),t},r.matchPrefix=function(e,t){return r.splitLines(e).filter((function(e){return 0===e.indexOf(t)}))},r.parseCandidate=function(e){var t;t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" ");for(var n={foundation:t[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1];break;case"ufrag":n.ufrag=t[r+1],n.usernameFragment=t[r+1];break;default:n[t[r]]=t[r+1];break}return n},r.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var n=e.type;return t.push("typ"),t.push(n),"host"!==n&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},r.parseIceOptions=function(e){return e.substr(14).split(" ")},r.parseRtpMap=function(e){var t=e.substr(9).split(" "),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},r.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},r.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},r.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},r.parseFmtp=function(e){for(var t,n={},r=e.substr(e.indexOf(" ")+1).split(";"),i=0;i<r.length;i++)t=r[i].trim().split("="),n[t[0].trim()]=t[1];return n},r.writeFmtp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&(0,v.default)(e.parameters).length){var r=[];(0,v.default)(e.parameters).forEach((function(t){e.parameters[t]?r.push(t+"="+e.parameters[t]):r.push(t)})),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},r.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},r.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},r.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substr(t+1,r-t-1),n.value=e.substr(r+1)):n.attribute=e.substr(t+1),n},r.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((function(e){return parseInt(e,10)}))}},r.getMid=function(e){var t=r.matchPrefix(e,"a=mid:")[0];if(t)return t.substr(6)},r.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},r.getDtlsParameters=function(e,t){var n=r.matchPrefix(e+t,"a=fingerprint:");return{role:"auto",fingerprints:n.map(r.parseFingerprint)}},r.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach((function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),n},r.parseCryptoLine=function(e){var t=e.substr(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},r.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"===(0,I.default)(e.keyParams)?r.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},r.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;var t=e.substr(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},r.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},r.getCryptoParameters=function(e,t){var n=r.matchPrefix(e+t,"a=crypto:");return n.map(r.parseCryptoLine)},r.getIceParameters=function(e,t){var n=r.matchPrefix(e+t,"a=ice-ufrag:")[0],i=r.matchPrefix(e+t,"a=ice-pwd:")[0];return n&&i?{usernameFragment:n.substr(12),password:i.substr(10)}:null},r.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},r.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},n=r.splitLines(e),i=n[0].split(" "),o=3;o<i.length;o++){var s=i[o],a=r.matchPrefix(e,"a=rtpmap:"+s+" ")[0];if(a){var c=r.parseRtpMap(a),u=r.matchPrefix(e,"a=fmtp:"+s+" ");switch(c.parameters=u.length?r.parseFmtp(u[0]):{},c.rtcpFeedback=r.matchPrefix(e,"a=rtcp-fb:"+s+" ").map(r.parseRtcpFb),t.codecs.push(c),c.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(c.name.toUpperCase());break;default:break}}}return r.matchPrefix(e,"a=extmap:").forEach((function(e){t.headerExtensions.push(r.parseExtmap(e))})),t},r.writeRtpDescription=function(e,t){var n="";n+="m="+e+" ",n+=t.codecs.length>0?"9":"0",n+=" UDP/TLS/RTP/SAVPF ",n+=t.codecs.map((function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType})).join(" ")+"\r\n",n+="c=IN IP4 0.0.0.0\r\n",n+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach((function(e){n+=r.writeRtpMap(e),n+=r.writeFmtp(e),n+=r.writeRtcpFb(e)}));var i=0;return t.codecs.forEach((function(e){e.maxptime>i&&(i=e.maxptime)})),i>0&&(n+="a=maxptime:"+i+"\r\n"),n+="a=rtcp-mux\r\n",t.headerExtensions&&t.headerExtensions.forEach((function(e){n+=r.writeExtmap(e)})),n},r.parseRtpEncodingParameters=function(e){var t,n=[],i=r.parseRtpParameters(e),o=-1!==i.fecMechanisms.indexOf("RED"),s=-1!==i.fecMechanisms.indexOf("ULPFEC"),a=r.matchPrefix(e,"a=ssrc:").map((function(e){return r.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute})),c=a.length>0&&a[0].ssrc,u=r.matchPrefix(e,"a=ssrc-group:FID").map((function(e){var t=e.substr(17).split(" ");return t.map((function(e){return parseInt(e,10)}))}));u.length>0&&u[0].length>1&&u[0][0]===c&&(t=u[0][1]),i.codecs.forEach((function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var r={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10)};c&&t&&(r.rtx={ssrc:t}),n.push(r),o&&(r=JSON.parse((0,f.default)(r)),r.fec={ssrc:c,mechanism:s?"red+ulpfec":"red"},n.push(r))}})),0===n.length&&c&&n.push({ssrc:c});var d=r.matchPrefix(e,"b=");return d.length&&(d=0===d[0].indexOf("b=TIAS:")?parseInt(d[0].substr(7),10):0===d[0].indexOf("b=AS:")?1e3*parseInt(d[0].substr(5),10)*.95-16e3:void 0,n.forEach((function(e){e.maxBitrate=d}))),n},r.parseRtcpParameters=function(e){var t={},n=r.matchPrefix(e,"a=ssrc:").map((function(e){return r.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute}))[0];n&&(t.cname=n.value,t.ssrc=n.ssrc);var i=r.matchPrefix(e,"a=rtcp-rsize");t.reducedSize=i.length>0,t.compound=0===i.length;var o=r.matchPrefix(e,"a=rtcp-mux");return t.mux=o.length>0,t},r.parseMsid=function(e){var t,n=r.matchPrefix(e,"a=msid:");if(1===n.length)return t=n[0].substr(7).split(" "),{stream:t[0],track:t[1]};var i=r.matchPrefix(e,"a=ssrc:").map((function(e){return r.parseSsrcMedia(e)})).filter((function(e){return"msid"===e.attribute}));return i.length>0?(t=i[0].value.split(" "),{stream:t[0],track:t[1]}):void 0},r.parseSctpDescription=function(e){var t,n=r.parseMLine(e),i=r.matchPrefix(e,"a=max-message-size:");i.length>0&&(t=parseInt(i[0].substr(19),10)),isNaN(t)&&(t=65536);var o=r.matchPrefix(e,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substr(12),10),protocol:n.fmt,maxMessageSize:t};var s=r.matchPrefix(e,"a=sctpmap:");if(s.length>0){var a=r.matchPrefix(e,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(a[0],10),protocol:a[1],maxMessageSize:t}}},r.writeSctpDescription=function(e,t){var n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},r.generateSessionId=function(){return Math.random().toString().substr(2,21)},r.writeSessionBoilerplate=function(e,t,n){var i,o=void 0!==t?t:2;i=e||r.generateSessionId();var s=n||"thisisadapterortc";return"v=0\r\no="+s+" "+i+" "+o+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},r.writeMediaSection=function(e,t,n,i){var o=r.writeRtpDescription(e.kind,t);if(o+=r.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=r.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":"active"),o+="a=mid:"+e.mid+"\r\n",e.direction?o+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?o+="a=sendrecv\r\n":e.rtpSender?o+="a=sendonly\r\n":e.rtpReceiver?o+="a=recvonly\r\n":o+="a=inactive\r\n",e.rtpSender){var s="msid:"+i.id+" "+e.rtpSender.track.id+"\r\n";o+="a="+s,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+s,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+s,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+r.localCName+"\r\n"),o},r.getDirection=function(e,t){for(var n=r.splitLines(e),i=0;i<n.length;i++)switch(n[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[i].substr(2);default:}return t?r.getDirection(t):"sendrecv"},r.getKind=function(e){var t=r.splitLines(e),n=t[0].split(" ");return n[0].substr(2)},r.isRejected=function(e){return"0"===e.split(" ",2)[1]},r.parseMLine=function(e){var t=r.splitLines(e),n=t[0].substr(2).split(" ");return{kind:n[0],port:parseInt(n[1],10),protocol:n[2],fmt:n.slice(3).join(" ")}},r.parseOLine=function(e){var t=r.matchPrefix(e,"o=")[0],n=t.substr(2).split(" ");return{username:n[0],sessionId:n[1],sessionVersion:parseInt(n[2],10),netType:n[3],addressType:n[4],address:n[5]}},r.isValidSDP=function(e){if("string"!==typeof e||0===e.length)return!1;for(var t=r.splitLines(e),n=0;n<t.length;n++)if(t[n].length<2||"="!==t[n].charAt(1))return!1;return!0},"object"===("undefined"===typeof t?"undefined":(0,I.default)(t))&&(t.exports=r)},{}]},{},[1])(1)}))},function(e,t,n){e.exports={default:n(116),__esModule:!0}},function(e,t,n){n(117),e.exports=n(4).Object.assign},function(e,t,n){var r=n(17);r(r.S+r.F,"Object",{assign:n(118)})},function(e,t,n){"use strict";var r=n(26),i=n(37),o=n(98),s=n(99),a=n(53),c=n(40),u=Object.assign;e.exports=!u||n(27)((function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=u({},e)[n]||Object.keys(u({},t)).join("")!=r}))?function(e,t){var n=a(e),u=arguments.length,f=1,d=o.f,l=s.f;while(u>f){var p,h=c(arguments[f++]),m=d?i(h).concat(d(h)):i(h),v=m.length,g=0;while(v>g)p=m[g++],r&&!l.call(h,p)||(n[p]=h[p])}return n}:u},function(e,t,n){e.exports={default:n(120),__esModule:!0}},function(e,t,n){n(121);var r=n(4).Object;e.exports=function(e,t){return r.getOwnPropertyDescriptor(e,t)}},function(e,t,n){var r=n(39),i=n(103).f;n(83)("getOwnPropertyDescriptor",(function(){return function(e,t){return i(r(e),t)}}))},function(e,t,n){e.exports={default:n(123),__esModule:!0}},function(e,t,n){n(10),n(11),n(54),n(124),n(131),n(134),n(136),e.exports=n(4).Map},function(e,t,n){"use strict";var r=n(125),i=n(126),o="Map";e.exports=n(127)(o,(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(e){var t=r.getEntry(i(this,o),e);return t&&t.v},set:function(e,t){return r.def(i(this,o),0===e?0:e,t)}},r,!0)},function(e,t,n){"use strict";var r=n(22).f,i=n(35),o=n(73),s=n(19),a=n(60),c=n(61),u=n(15),f=n(57),d=n(74),l=n(26),p=n(95).fastKey,h=n(126),m=l?"_s":"size",v=function(e,t){var n,r=p(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,u){var f=e((function(e,r){a(e,f,t,"_i"),e._t=t,e._i=i(null),e._f=void 0,e._l=void 0,e[m]=0,void 0!=r&&c(r,n,e[u],e)}));return o(f.prototype,{clear:function(){for(var e=h(this,t),n=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];e._f=e._l=void 0,e[m]=0},delete:function(e){var n=h(this,t),r=v(n,e);if(r){var i=r.n,o=r.p;delete n._i[r.i],r.r=!0,o&&(o.n=i),i&&(i.p=o),n._f==r&&(n._f=i),n._l==r&&(n._l=o),n[m]--}return!!r},forEach:function(e){h(this,t);var n,r=s(e,arguments.length>1?arguments[1]:void 0,3);while(n=n?n.n:this._f){r(n.v,n.k,this);while(n&&n.r)n=n.p}},has:function(e){return!!v(h(this,t),e)}}),l&&r(f.prototype,"size",{get:function(){return h(this,t)[m]}}),f},def:function(e,t,n){var r,i,o=v(e,t);return o?o.v=n:(e._l=o={i:i=p(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=o),r&&(r.n=o),e[m]++,"F"!==i&&(e._i[i]=o)),e},getEntry:v,setStrong:function(e,t,n){u(e,t,(function(e,n){this._t=h(e,t),this._k=n,this._l=void 0}),(function(){var e=this,t=e._k,n=e._l;while(n&&n.r)n=n.p;return e._t&&(e._l=n=n?n.n:e._t._f)?f(0,"keys"==t?n.k:"values"==t?n.v:[n.k,n.v]):(e._t=void 0,f(1))}),n?"entries":"values",!n,!0),d(t)}}},function(e,t,n){var r=n(24);e.exports=function(e,t){if(!r(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,n){"use strict";var r=n(18),i=n(17),o=n(95),s=n(27),a=n(21),c=n(73),u=n(61),f=n(60),d=n(24),l=n(50),p=n(22).f,h=n(128)(0),m=n(26);e.exports=function(e,t,n,v,g,y){var b=r[e],_=b,w=g?"set":"add",S=_&&_.prototype,x={};return m&&"function"==typeof _&&(y||S.forEach&&!s((function(){(new _).entries().next()})))?(_=t((function(t,n){f(t,_,e,"_c"),t._c=new b,void 0!=n&&u(n,g,t[w],t)})),h("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),(function(e){var t="add"==e||"set"==e;!(e in S)||y&&"clear"==e||a(_.prototype,e,(function(n,r){if(f(this,_,e),!t&&y&&!d(n))return"get"==e&&void 0;var i=this._c[e](0===n?0:n,r);return t?this:i}))})),y||p(_.prototype,"size",{get:function(){return this._c.size}})):(_=v.getConstructor(t,e,g,w),c(_.prototype,n),o.NEED=!0),l(_,e),x[e]=_,i(i.G+i.W+i.F,x),y||v.setStrong(_,e,g),_}},function(e,t,n){var r=n(19),i=n(40),o=n(53),s=n(43),a=n(129);e.exports=function(e,t){var n=1==e,c=2==e,u=3==e,f=4==e,d=6==e,l=5==e||d,p=t||a;return function(t,a,h){for(var m,v,g=o(t),y=i(g),b=r(a,h,3),_=s(y.length),w=0,S=n?p(t,_):c?p(t,0):void 0;_>w;w++)if((l||w in y)&&(m=y[w],v=b(m,w,g),e))if(n)S[w]=v;else if(v)switch(e){case 3:return!0;case 5:return m;case 6:return w;case 2:S.push(m)}else if(f)return!1;return d?-1:u||f?f:S}}},function(e,t,n){var r=n(130);e.exports=function(e,t){return new(r(e))(t)}},function(e,t,n){var r=n(24),i=n(100),o=n(51)("species");e.exports=function(e){var t;return i(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!i(t.prototype)||(t=void 0),r(t)&&(t=t[o],null===t&&(t=void 0))),void 0===t?Array:t}},function(e,t,n){var r=n(17);r(r.P+r.R,"Map",{toJSON:n(132)("Map")})},function(e,t,n){var r=n(59),i=n(133);e.exports=function(e){return function(){if(r(this)!=e)throw TypeError(e+"#toJSON isn't generic");return i(this)}}},function(e,t,n){var r=n(61);e.exports=function(e,t){var n=[];return r(e,!1,n.push,n,t),n}},function(e,t,n){n(135)("Map")},function(e,t,n){"use strict";var r=n(17);e.exports=function(e){r(r.S,e,{of:function(){var e=arguments.length,t=new Array(e);while(e--)t[e]=arguments[e];return new this(t)}})}},function(e,t,n){n(137)("Map")},function(e,t,n){"use strict";var r=n(17),i=n(20),o=n(19),s=n(61);e.exports=function(e){r(r.S,e,{from:function(e){var t,n,r,a,c=arguments[1];return i(this),t=void 0!==c,t&&i(c),void 0==e?new this:(n=[],t?(r=0,a=o(c,arguments[2],2),s(e,!1,(function(e){n.push(a(e,r++))}))):s(e,!1,n.push,n),new this(n))}})}},function(e,t,n){e.exports={default:n(139),__esModule:!0}},function(e,t,n){n(140);var r=n(4).Object;e.exports=function(e,t,n){return r.defineProperty(e,t,n)}},function(e,t,n){var r=n(17);r(r.S+r.F*!n(26),"Object",{defineProperty:n(22).f})},function(e,t,n){"use strict";var r=n(80),i=p(r),o=n(142),s=p(o),a=n(2),c=p(a),u=n(145),f=p(u),d=n(88),l=p(d);function p(e){return e&&e.__esModule?e:{default:e}}var h=n(87),m=n(146),v=h.tagLogger("Service"),g=n(149),y=n(153),b=n(150),_=n(159),w=n(160),S=new w({onExtLoaded:function(){v.info("Share desktop ext. had loaded.")}}),x=n(157),C=n(161),E=n(162);e.exports=h.prototypeExtend({__init__:function(){var e=this;v.warn("emedia version: ",window._emediaVersion||"unkown"),v.warn("UserAgent: ",navigator.userAgent);var t=h.parseURL("__log_level___");t&&(emedia.LOG_LEVEL=parseInt(t)),e.namespace=Math.uuidFast(),emedia.useCurrentXService=e,void 0===e.useRTCCfg&&(e.useRTCCfg=emedia.config.useRTCCfgIfServerReturn),"string"===typeof e.useRTCCfg&&(e.useRTCCfg=JSON.parse(e.useRTCCfg)),e.inboundAudio=C.inboundAudio.bind(e),e.inboundVideo=C.inboundVideo.bind(e),e.outboundAudio=C.outboundAudio.bind(e),e.outboundVideo=C.outboundVideo.bind(e),e._cache_receive_sessions=[]},AVPubstream:x.extend({__init__:function(){var e=this;e.type=0,e._located=!0,e.mutedMuted=!0,e.constaints&&(e.constaints.video||(e.voff=1),e.constaints.audio||(e.aoff=1)),e.constaints||(e.constaints={audio:!0,video:!0}),emedia.config.maxVideoBitrate&&(e.vbitrate=emedia.config.maxVideoBitrate),emedia.config.maxAudioBitrate&&(e.abitrate=emedia.config.maxAudioBitrate)}}),AudioMixerPubstream:new x.extend({__init__:function(){var e=this;if(e.type=2,e._located=!0,e.mutedMuted=!0,e.constaints||(e.constaints={audio:!0,video:!1}),e.constaints){var t=!!e.constaints.audio;e.constaints.video||(e.constaints.video=!1),e.constaints.video||(e.voff=1),e.constaints.audio||(e.aoff=1),!1===t&&(e.aoff=1)}emedia.config.maxVideoBitrate&&(e.vbitrate=emedia.config.maxVideoBitrate),emedia.config.maxAudioBitrate&&(e.abitrate=emedia.config.maxAudioBitrate)},onGotRemoteMediaStream:function(e){var t=this;if(!t.remotePlayAudioObject){var n="__o_remote_play_audio_"+t.id,r=document.querySelector("#"+n);r||(r=document.createElement("audio"),r.style.display="none",r.id="__o_remote_play_audio_"+t.id,r.autoplay=!0,r.playsinline=!0,document.body.appendChild(r)),t.remotePlayAudioObject=r}t.remotePlayAudioObject.srcObject=e}}),ShareDesktopPubstream:x.extend({voff:0,__init__:function(){var e=this;e.type=1,e._located=!0,e.mutedMuted=!0,e.constaints={audio:!this.aoff,video:!0},emedia.config.maxVideoBitrate&&(e.vbitrate=emedia.config.maxVideoBitrate),emedia.config.maxAudioBitrate&&(e.abitrate=emedia.config.maxAudioBitrate)}}),__assertCurrent:function(){var e=this;if(!e.current)throw v.error("Please call emedia.service.setup(ticket)"),"Please call emedia.service.setup(ticket)";if(e.current.closed)throw v.error("current closed"),"current closed"},hasAudioMixers:function(){var e=this;for(var t in e.__assertCurrent(),e.current.audioMixers){var n=e.current.audioMixers[t];if(n&&n.located())return!0}},getMediaDevices:function(e,t,n){function r(n){for(var r=[],i=0;i!==n.length;++i){var o=n[i];e?e===o.kind?r.push(o):"audioinput"===o.kind||"audiooutput"===o.kind||"videoinput"===o.kind||v.info("Some other kind of source/device: ",o):r.push(o)}t&&t(r)}"function"===typeof e&&(n=t,t=e,e=void 0),navigator.mediaDevices.enumerateDevices().then(r).catch((function(e){v.warn("navigator.getUserMedia error: ",e),n&&n(e)}))},attachSinkId:function(e,t){"undefined"!==typeof e.sinkId?e.setSinkId(t).then((function(){v.info("Success, audio output device attached: "+t)})).catch((function(e){var t=e;"SecurityError"===e.name&&(t="You need to use HTTPS for selecting audio output device: "+e),v.warn(t)})):v.warn("Browser does not support output device selection.")},_stopTracks:function(e){emedia.stopTracks(e),e&&v.warn("Stream tracks stop. it = ",e)},_enableVideoTracks:function(e,t){emedia.enableVideoTracks(e,t)},_enableAudioTracks:function(e,t){emedia.enableAudioTracks(e,t)},openUserMedia:function(e){v.debug("begin open user media",e);var t=this;if(!e)throw v.error("require pubS"),"require pubS";return{then:function(n,r){function i(){n.apply(null,arguments);var r=e.localStream;r&&(r.oninactive=t._onStreamInactive.bind(t,e,r),r.onactive=t._onStreamActive.bind(t,e,r))}if(e instanceof t.AVPubstream)t._openCamera(e,i,r);else if(e instanceof t.ShareDesktopPubstream)t._openSharedDesktop(e,i,r);else{if(!(e instanceof t.AudioMixerPubstream))throw v.error("Unspported pubS"),"Unspported pubS";t._openCamera(e,i,r)}}}},_openSharedDesktop:function(e,t,n){var r,i=this;function o(e){var r={audio:!0};e.constaints&&("object"===(0,l.default)(e.constaints.audio)&&e.constaints.audio||e.constaints.audio||(r.audio=!1)),i.__getUserMedia(r,(function(n,r){var o=new MediaStream;o._located=!0,r&&r.getAudioTracks().forEach((function(e){o.addTrack(e)})),e.localStream&&e.localStream.getVideoTracks().forEach((function(e){o.addTrack(e)})),e.localStream=o,t&&t(i.current,o)}),n)}if(e._localMediaStream&&(r=e._localMediaStream.getVideoTracks())&&r.length>0)return e.localStream=e._localMediaStream,void(e.constaints.audio?o(e):t&&t(i.current,stream));S.openDesktopMedia(e.screenOptions||["screen","window","tab"],(function(r){if(r instanceof b.OpenDesktopMedia){var s=r.desktopStreamId;v.warn("desktop streamId",s);var a={audio:!1,video:{mandatory:h.extend(e.mandatory||{},{chromeMediaSource:"desktop",chromeMediaSourceId:s}),optional:[]}};i.__getUserMedia(a,(function(n,r){e.localStream=r,e.constaints.audio?o(e):t&&t(i.current,r)}),n)}else i.current&&i.current.onEvent(new b.ShareDesktopExtensionNotFound({member:i.current})),n&&n(r)}))},_openCamera:function(e,t,n){var r=this,i=e.constaints||{audio:!0,video:!0};function o(n,i){r.__controlStream(e,i),e.localStream=i,t&&t(r.current,i)}r.__getUserMedia(i,o.bind(i),n)},__controlStream:function(e,t){emedia.enableVideoTracks(t,!e.voff),emedia.enableAudioTracks(t,!e.aoff)},__getUserMedia:function(e,t,n){v.debug("get user media. using constaints",e);var r,i=this;function o(e){v.debug("[WebRTC-API] getUserMedia() error: ",e),emedia.stopTracks(r),i.current&&i.current.onEvent(new b.OpenMediaError({member:i.current,event:e})),n&&n(new b.OpenMediaError({member:i.current,event:e}))}function s(n){i.current&&!i.current.closed&&(i.current._openedRtcMediaStreams[n.id]=n,n._bindAttendee=i.current,n._bindAttendeeId=i.current.getMemberId(),v.info("stream bind attendee.",n.id,i.current.ticket&&i.current.ticket.id,i.current.getMemberId(),i.current.memName)),emedia._yetGetUserMedia=!0,r=n;var s=n.getVideoTracks(),a=n.getAudioTracks();if(s.length>0){var c=s[0];v.debug(n.id,"using video device: ",c.id,c.label,c.kind,c.enabled)}if(a.length>0){var u=a[0];v.debug(n.id,"using audio device: ",u.id,u.label,u.kind,u.enabled)}if(n._located=!0,"boolean"===typeof n.active&&!n.active)return v.error("media stream not active. it is",n.id),void o({constraint:e,name:"NotAllowedStreamNonactive",message:"stream non-active"});t&&t(i.current,n)}e=h.extend({},e),i.__sysGetUserMedia(e,s,o)},_onStreamInactive:function(e,t,n){var r=this;v.warn("media stream inactive. it =",t.id),e.onMediaInactive&&r.current&&h.forEach(r.current._cacheStreams,(function(i,o){o.located()&&o.localStream&&o.localStream.id===t.id&&(o._webrtc&&o._webrtc.closed||e.onMediaInactive.call(o,t,n,r))}))},_onStreamActive:function(e,t,n){var r=this;v.warn("media stream active. it =",t.id),e.onMediaActive&&r.current&&h.forEach(r.current._cacheStreams,(function(i,o){o.located()&&o.localStream&&o.localStream.id===t.id&&e.onMediaActive.call(o,t,n,r)}))},__sysGetUserMedia:function(e,t,n){var r=function(){var e=(0,f.default)(s.default.mark((function e(t,n,r){var i,o,a;return s.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("object"===(0,l.default)(emedia.config.globalConstraints)&&("object"===(0,l.default)(emedia.config.globalConstraints.audio)&&t.audio&&("boolean"===typeof t.audio?t.audio=h.extend({},emedia.config.globalConstraints.audio):t.audio=h.extend({},emedia.config.globalConstraints.audio,t.audio)),"object"===(0,l.default)(emedia.config.globalConstraints.video)&&t.video&&("boolean"===typeof t.video?t.video=h.extend({},emedia.config.globalConstraints.video):t.video=h.extend({},emedia.config.globalConstraints.video,t.video))),v.info("navigator.mediaDevices.getUserMedia constaints = ",(0,c.default)(t)),i=new MediaStream,o=void 0,a=void 0,!t.audio){e.next=14;break}return e.prev=5,e.next=8,navigator.mediaDevices.getUserMedia({audio:!0});case 8:o=e.sent,e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](5),console.error("getUserMedia audio error",e.t0);case 14:if(!t.video){e.next=24;break}return e.prev=15,e.next=18,navigator.mediaDevices.getUserMedia({video:!0});case 18:a=e.sent,e.next=24;break;case 21:e.prev=21,e.t1=e["catch"](15),console.error("getUserMedia video error",e.t1);case 24:o&&o.getAudioTracks().forEach((function(e){i.addTrack(e)})),a&&a.getVideoTracks().forEach((function(e){i.addTrack(e)})),o||a?n(i):r({message:"getUserMedia error: not have input device"});case 27:case"end":return e.stop()}}),e,this,[[5,11],[15,21]])})));return function(t,n,r){return e.apply(this,arguments)}}();r(e,t,n)},attachMediaStream:window.attachMediaStream.bind({logger:v}),setup:function(e,t){var n=this;v.count(),v.debug("recv ticket",e,t),v.debug("use sdk version",window._emediaVersion),v.debug(navigator.userAgent),t=t||{};var r,i,o=t;if(h.isPlainObject(t))t=(0,c.default)(t);else try{o=JSON.parse(t)}catch(d){}if("string"===typeof e&&(e=JSON.parse(e)),r=i=e.memName,emedia._lastSetupConfr=e.confrId,emedia._lastSetupMemName=i,emedia._lastSetupDate=new Date,emedia._lastSetupTktId=e.tktId,n.current&&!n.current.closed){var s=new b.CurrentCalling;throw n.current.onEvent(s),v.error("confr not close. calling..."),s}var a=n.Attendee||y,u=a.extend(_),f=n.current=new u({_service:n,service:n,autoSub:emedia.config.autoSub,getCopyIntervalMillis:emedia.config.getCopyIntervalMillis,sysUserId:r,memName:i,resource:n.resource,nickName:n.nickName,ticket:e,ext:t,extObj:o,sessionFactory:function(){return n.newSession(this,e)}},n.listeners||{});return f},getStreamById:function(e){var t=this.current&&this.current._cacheStreams[e];return t&&h.extend(!1,{},t)},getStreamsByRtcId:function(e){if(this.current&&this.current._cacheStreams){var t=[];return h.forEach(this.current._cacheStreams,(function(n,r){r.rtcId===e&&t.push(r)})),t}},getMemberById:function(e){var t=this.current&&this.current._cacheMembers[e];return t&&h.extend(!1,{},t)},exit:function(e){v.warn("User click exit ",e),this.current&&this.current.exit(e)},join:function(e,t){v.debug("begin join ...");var n=this;if(n.__assertCurrent(),n.current._memberId)return v.warn("Had joined. igrone it"),void(e&&e(n.memId));n.current._session._sessionId=void 0,n.current.join(e,t)},withpublish:function(e){var t=this;if(!e||!e.localStream)throw v.error("pubS null or stream not open"),"pubS null or stream not open";return t.__assertCurrent(),t.current._memberId?v.warn("Had joined. igrone it"):t.current._session._sessionId=void 0,t.current.withpublish(e)},push:function(e,t,n){v.debug("begin push ...");var r=this;if(2===arguments.length&&(n=t,t=void 0),!e||!e.localStream)throw v.error("pubS or stream open"),"pubS or stream open";r.__assertCurrent(),r.current.push(e,t,n,!1)},subscribe:function(e,t,n,r){var i=this;if(v.info("begin subscribe ",e,r),t&&h.isPlainObject(t)&&(r=t,t=n=void 0),n&&h.isPlainObject(n)&&(r=n,n=t,t=void 0),emedia.isSafari){var o=function(){try{var e=u.shift();e&&e.onSub&&e.onSub.apply(e,arguments)}finally{a()}},s=function(){try{var e=u.shift();e&&e.subfail&&e.subfail.apply(e,arguments)}finally{a()}},a=function(){u.length>0&&i.__subscribe(u[0].streamId,o,s,u[0].subArgs)},c={streamId:e,onSub:t,subfail:n,subArgs:r},u=i.__safari_subs||(i.__safari_subs=[]);u.push(c),1===u.length&&a()}else i.__subscribe(e,t,n,r)},__subscribe:function(e,t,n,r){var i=this;i.__assertCurrent(),2==arguments.length&&(n=t,t=void 0),t&&h.isPlainObject(t)&&(r=t,t=void 0),n&&h.isPlainObject(n)&&(r=n,n=void 0),r||(r={subSVideo:!0,subSAudio:!0});i.current._cacheStreams[e];var o=i.current._getWebrtc(e),s=o&&o.isConnected(),a=s&&o.getRemoteStream();if(a&&(s=a.active)){var c=a.getAudioTracks().length,u=a.getVideoTracks().length;(c||!0!==r.subSAudio)&&(u||!0!==r.subSVideo)||(s=!1)}if(v.info("sub stream",e,", use prertcpeer =",s),s)return i.current.subscribeStream(o._rtcId,e,n,r,t),void(t&&t());o&&!o.closed&&i.current.closeWebrtc(o.getRtcId(),!0,!1),i.current.createWebrtcAndSubscribeStream(e,{onGotRemote:function(e){t&&t(e)},onEvent:function(e){n&&n(e)}},void 0,r)},closePubstream:function(e){e.located()&&(emedia.stopTracks(e._localMediaStream),emedia.stopTracks(e.localStream))},hungup:function(e){var t=this.getStreamById(e);try{this._hungup(e)}finally{this.onHungup&&t&&this.onHungup(t)}},_hungup:function(e){var t=this;t.__assertCurrent();var n=t.current,r=n._cacheStreams[e];r&&!r.closeReason&&r.updateAttributes({closeReason:"UserHangup"});var i=r&&r.rtcId;if(i&&(n.closeWebrtc(i),r.located()&&(1!==r.type&&r._localMediaStream&&emedia.stopTracks(r._localMediaStream),r.remotePlayAudioObject&&document.body.removeChild(r.remotePlayAudioObject),n._cacheStreams[e]&&n.onRemoveStream(r),h.removeAttribute(n._cacheStreams,e),t._streamAutomators&&h.removeAttribute(t._streamAutomators,e))),r&&!r.located()){if(n._linkedStreams[r.id]&&h.removeAttribute(n._linkedStreams,r.id),v.warn("Hangeup remove from _linkedStreams. stream = ",r.id),r=n._cacheStreams[e],!r)return;r.updateAttributes({rtcId:void 0,_webrtc:void 0,mediaStream:void 0});var o=new x(r);n.onUpdateStream(o,new o.Update(o))}},postMessage:function(e,t,n,r){var i=this,o=t;"string"!==typeof t&&(t=(0,c.default)(t)),i.__assertCurrent();var s,a=i.current,u=a._linkedStreams[e];s=u&&u.owner?u.owner.id:e;t=a.newMessage({op:1003,memId:s,arg:t});a.postMessage(t,(n||r)&&function(e){if(r&&r(e,o),0!=e.result){var i=new b.RemoteControlFail({memId:s,failed:e.result,cause:e.msg,type:"postMessage",postMessage:t});return a.onEvent(i),void(n&&n(i,o))}})},torchRemote:function(e,t,n,r){var i=this;"function"===typeof t&&(r=n,n=t,t=void 0),void 0!==t&&(t=t?1:0),i.__assertCurrent();var o=i.current,s=o._linkedStreams[e];if(!s||s.located())throw v.error("not exsits or locate, not connect",e),e+" not exsits or locate, not connect";var a=s.torch,u=(t=void 0===t?s.torch?0:1:t,{op2:20,streamId:e,tor:t}),f=o.newMessage({op:1002,memId:s.owner.id,arg:(0,c.default)(u),_reqOps:[100206]});s.updateAttributes({torch:t}),o.postMessage(f,(function(e){if(0!=e.result){var t=new b.RemoteControlFail({stream:s,failed:e.result,cause:e.msg,type:"torch_control"});return o.onEvent(t),s.updateAttributes({torch:a}),void(r&&r(t,s.torch))}n&&n(s.torch)}))},freezeFrameRemote:function(e,t,n){var r=this;r.__assertCurrent();var i=r.current,o=i._linkedStreams[e];if(!o||o.located())throw v.error("not exsits or locate, not connect",e),e+" not exsits or locate, not connect";var s=!o.freezeFrame,a={op2:20,streamId:e,frz:s?1:0},u=i.newMessage({op:1002,memId:o.owner.id,arg:(0,c.default)(a),_reqOps:[100204]});o.updateAttributes({freezeFrame:s}),i.postMessage(u,(function(e){if(0!=e.result){var r=new b.RemoteControlFail({stream:o,failed:e.result,cause:e.msg,type:"freeze_control"});return i.onEvent(r),o.updateAttributes({freezeFrame:!o.freezeFrame}),void(n&&n(r,o.freezeFrame))}t&&t(o.freezeFrame)}))},base64Img2Blob:function(e){for(var t=e.split(";base64,"),n=t[0].split(":")[1],r=window.atob(t[1]),i=r.length,o=new Uint8Array(i),s=0;s<i;++s)o[s]=r.charCodeAt(s);return new Blob([o],{type:n})},blob2URL:function(e){return URL.createObjectURL(e)},imagesPngContext2URL:function(e){var t=this;return t.blob2URL(t.blob2URL(e))},downloadFile:function(e,t,n){var r=this,i=document.createElement("a");i.style.display="none";var o,s=t?r.base64Img2Blob(t):n;i.download=e,i.href=o=r.blob2URL(s),i.rel="noopener";var a=document.createEvent("HTMLEvents");a.initEvent("click",!1,!1),i.dispatchEvent(a),document.body.appendChild(i),i.click(),i.parentNode.removeChild(i),setTimeout((function(){URL.revokeObjectURL&&URL.revokeObjectURL(o)}),4e4)},videoCaptureBase64Context2URL:function(e){var t=this;return t.imagesPngContext2URL(t.getCaptureBase64Context(e))},getCaptureBase64Context:function(e){var t=document.createElement("canvas");t.id="__capture_video_"+(new Date).getTime();t.width=e.videoWidth,t.height=e.videoHeight;var n=t.getContext("2d");n.drawImage(e,0,0,t.width,t.height);var r=t.toDataURL("images/png");return r},captureVideo:function(e,t,n){var r=this,i=r.getCaptureBase64Context(e);return t&&(n=n||"capture_"+(new Date).getTime(),r.downloadFile(n,i)),i},capturePictureRemote:function(e,t,n,r){var i=this;i.__assertCurrent();var o=i.current,s=o._linkedStreams[e];if(!s||s.located())throw v.error("not exsits or locate, not connect",e),e+" not exsits or locate, not connect";var a={op2:20,streamId:e,pic:1,rspBase64Pic:!0===t},u=o.newMessage({op:1002,memId:s.owner.id,arg:(0,c.default)(a),_reqOps:[100205]});o.postMessage(u,(function(e){if(0!=e.result){var i=new b.RemoteControlFail({stream:s,failed:e.result,cause:e.msg,type:"capture_control"});return o.onEvent(i),void(r&&r(i))}if(t)if(e.arg){var a=JSON.parse(e.arg);n&&n(a.pic)}else r&&r(new b.RemoteControlFail({stream:s,failed:e.result,cause:"Not found base64 pic"}));else n&&n()}))},zoomRemote:function(e,t,n,r){var i=this;i.__assertCurrent();var o=i.current,s=o._linkedStreams[e];if(!s||s.located())throw v.error("not exsits or locate, not connect",e),e+" not exsits or locate, not connect";s._zoom||s.updateAttributes({_zoom:1});var a=s._zoom*t;if(!(a<1)){s.updateAttributes({_zoom:a});var u={op2:20,streamId:e,zoom:Math.round(1e4*a)},f=o.newMessage({op:1002,memId:s.owner.id,arg:(0,c.default)(u),_reqOps:[100201]});o.postMessage(f,(function(e){if(0!=e.result){var t=new b.RemoteControlFail({stream:s,failed:e.result,cause:e.msg,type:"zoom_control"});return o.onEvent(t),void(n&&n(t))}r&&r()}))}},_getPosition:function(e){var t=0,n=0;while(e)n+=e.offsetLeft,t+=e.offsetTop,e=e.offsetParent;return{clientX:n,clientY:t}},eventXYAtMedia:function(e,t){var n=h.getDomPageRect(t),r=n.width,i=n.height,o=t.videoWidth,s=t.videoHeight;if(s/o>i/r){var a=o/s;s=i,o=s*a}else{a=s/o;o=r,s=o*a}var c,u,f=e;if((c=h.isFloat(f.x))&&(f.x=f.x*r),(u=h.isFloat(f.y))&&(f.y=f.y*i),!(Math.abs(f.x)<(r-o)/2||r-Math.abs(f.x)<(r-o)/2)&&!(Math.abs(f.y)<(i-s)/2||i-Math.abs(f.y)<(i-s)/2))return f.x=f.x<0?Math.floor(f.x+(r-o)/2):Math.floor(f.x-(r-o)/2),f.y=f.y<0?Math.floor(f.y+(i-s)/2):Math.floor(f.y-(i-s)/2),c&&(f.x=f.x/o),u&&(f.y=f.y/s),{x:f.x,y:f.y,width:o,height:s}},eventXYAtVideo:function(e,t){var n,r,i=h.getDomPageRect(t),o=i.width,s=i.height,a=t.videoWidth,c=t.videoHeight;if(c/a>s/o){var u=a/c;c=s,a=c*u}else{u=c/a;a=o,c=a*u}return(n=h.isFloat(e.x))&&(e.x=e.x*a),(r=h.isFloat(e.y))&&(e.y=e.y*c),e.x=e.x<0?Math.floor(e.x-(o-a)/2):Math.floor(e.x+(o-a)/2),e.y=e.y<0?Math.floor(e.y-(s-c)/2):Math.floor(e.y+(s-c)/2),n&&(e.x=e.x/o),r&&(e.y=e.y/s),e},getClickXY:function(e,t){var n=this,r=t||window.event,i=document.documentElement.scrollLeft||document.body.scrollLeft,o=document.documentElement.scrollTop||document.body.scrollTop,s=r.pageX||r.clientX+i,a=r.pageY||r.clientY+o,c=n._getPosition(e);v.info("Video tag position ",c.clientX,":",c.clientY);var u=e.videoWidth,f=e.videoHeight;if(f/u>e.offsetHeight/e.offsetWidth){var d=u/f;f=e.offsetHeight,u=f*d,c.clientX+=(e.offsetWidth-u)/2}else{d=f/u;u=e.offsetWidth,f=u*d,c.clientY+=(e.offsetHeight-f)/2}return v.info("Media position ",c.clientX,":",c.clientY),v.info("Media xy ",u,":",f),v.info("Click position ",s,":",a),{mediaWidth:u,mediaHeight:f,x:s-c.clientX,y:a-c.clientY}},focusExpoRemote:function(e,t,n,r,i){var o=this,s=n||window.event,a=document.documentElement.scrollLeft||document.body.scrollLeft,c=document.documentElement.scrollTop||document.body.scrollTop,u=s.pageX||s.clientX+a,f=s.pageY||s.clientY+c,d=o._getPosition(t);v.info("Video tag position ",d.clientX,":",d.clientY);var l=t.videoWidth,p=t.videoHeight;if(p/l>t.offsetHeight/t.offsetWidth){var h=l/p;p=t.offsetHeight,l=p*h,d.clientX+=(t.offsetWidth-l)/2}else{h=p/l;l=t.offsetWidth,p=l*h,d.clientY+=(t.offsetHeight-p)/2}v.info("Media position ",d.clientX,":",d.clientY),v.info("Media xy ",l,":",p),v.info("Click position ",u,":",f),o._focusExpo(e,l,p,u-d.clientX,f-d.clientY,r,i)},_focusExpo:function(e,t,n,r,i,o,s){var a=this;if(!(r<=0||r>t)&&!(i<=0||i>n)){a.__assertCurrent();var u=a.current,f=u._linkedStreams[e];if(!f||f.located())throw v.error("not exsits or locate, not connect",e),e+" not exsits or locate, not connect";var d={op2:20,streamId:e,focus:1,expo:1,x:0===t?0:Math.round(1e4*r/t),y:0===n?0:Math.round(1e4*i/n)},l=u.newMessage({op:1002,memId:f.owner.id,arg:(0,c.default)(d),_reqOps:[100202,100203]});u.postMessage(l,(function(e){if(0!=e.result){var t=new b.RemoteControlFail({stream:f,failed:e.result,cause:e.msg,type:"focus_expo_control"});return u.onEvent(t),void(o&&o(t))}s&&s()}))}},_republish:function(e,t,n){v.info("Republish stream. it = ",e.id);var r,i,o=this;if(e.id){var s=o.current.__getWebrtcFor(e.id);s&&o.current.closeWebrtc(s,!0),r=o.current._getWebrtc(e.id)}switch(e.type){case 0:emedia.stopTracks(e._localMediaStream),i=new o.AVPubstream(e);break;case 1:emedia.stopAndRemoveAudioTracks(e._localMediaStream),i=new o.ShareDesktopPubstream(e);break;case 2:emedia.stopTracks(e._localMediaStream),i=new o.AudioMixerPubstream(e);break}setTimeout((function(){o.openUserMedia(i).then((function(){e.localStream=i.localStream,e.isRepublished=!0,e.optimalVideoCodecs=e.optimalVideoCodecs||r&&r.optimalVideoCodecs,o.push(e,t,n)}),n)}),100)},switchMobileCamera:function(e,t,n){var r=this;if("string"===typeof e?e=r.current._cacheStreams[e]:e.id&&(e=r.current._cacheStreams[e.id]),e.voff)v.warn("Stream id = ",e.id," voff, do not chanage camera.");else{e.constaints||(e.constaints={});var i=h.extend({},e.constaints);e._lastConstaints=i,e.constaints.video="object"===(0,l.default)(e.constaints.video)?e.constaints.video:{},"user"!==e.constaints.video.facingMode&&e.constaints.video.facingMode?e.constaints.video.facingMode="user":e.constaints.video.facingMode={exact:"environment"},r._republish(e,(function(e){n&&n(e)}),(function(n){n instanceof emedia.event.OpenMediaError&&(e.constaints=i),t&&t(n)}))}},chanageCamera:function(e,t,n){var r=this;"string"===typeof e?e=r.current._cacheStreams[e]:e.id&&(e=r.current._cacheStreams[e.id]),e.voff?v.warn("Stream id = ",e.id," voff, do not chanage camera."):r.getMediaDevices("videoinput",(function(i){if(i.length<=1)v.warn("Only video input. not chanage");else{var o=e._cameraIndex;if(null===e._cameraIndex||void 0===e._cameraIndex){var s=e.getLocalMediaStream(),a=s&&s.getVideoTracks(),c=a&&a.length&&a[0];if(c&&c.getCapabilities&&"function"===typeof c.getCapabilities){var u=c.getCapabilities(),f=u&&u.deviceId;for(var d in i){var p=i[d];if(p.deviceId===f||p.label==c.label){o=parseInt(d);break}}}else for(var d in i){p=i[d];if(p.label==c.label){o=parseInt(d);break}}}while(o<i.length){var m=i[o];o=(o+1)%i.length;p=i[o],a=e.getLocalMediaStream().getVideoTracks();if(!a||0===a.length||p.label!=a[0].label)break}p=i[o];var g=p.label;v.warn("Stream ",e.id,m.label,">>",g),e._cameraIndex=o,e.constaints||(e.constaints={});var y=h.extend({},e.constaints);e._lastConstaints=y,e.constaints.video="object"===(0,l.default)(e.constaints.video)?e.constaints.video:{},e.constaints.video.deviceId={exact:p.deviceId},r._republish(e,(function(e){n&&n(e)}),(function(n){n instanceof emedia.event.OpenMediaError&&(e.constaints=y),t&&t(n)}))}}),t)},chanageConstraints:function(e,t,n,r){var i=this;if("string"===typeof e?e=i.current._cacheStreams[e]:e.id&&(e=i.current._cacheStreams[e.id]),e){if(v.info("chanage pubstream constraints. it",e.id,t),m.isObject(t)&&!m.isEqual(e.constaints,t)){var o=e.constaints||{},s=e.voff,a=e.aoff;return e._lastConstaints=o,e.constaints=h.extend(!0,{},o,t),e.aoff=e.constaints.audio?0:1,e.voff=e.constaints.video?0:1,void i._republish(e,(function(e){c(),r&&r(e)}),(function(t){t instanceof emedia.event.OpenMediaError&&(e.constaints=o,e.aoff=a,e.voff=s),n&&n(t)}))}c(),r&&r(e.getMediaStream())}else v.warn("Not found pubS");function c(){var t=e.getMediaStream();emedia.enableVideoTracks(t,!e.voff),emedia.enableAudioTracks(t,!e.aoff)}},voff:function(e,t,n,r){var i=this;"string"===typeof e&&(e=i.current._cacheStreams[e]);var o=e.voff;function s(){t!=o?(emedia.enableVideoTracks(e.getMediaStream(),!t),i.current&&i.current.voff(e,t)):v.info("pubstream voff not chanage.")}if(t=t?1:0,e.voff=t,!t&&e.constaints&&!e.constaints.video){var a=e.constaints.video;return e.constaints.video=!0,void i._republish(e,(function(e){s(),r&&r(e)}),(function(t){t instanceof emedia.event.OpenMediaError&&(e.constaints.video=a,e.voff=o),n&&n(t)}))}s(),r&&r(e.getMediaStream())},aoff:function(e,t,n,r){var i=this;"string"===typeof e&&(e=i.current._cacheStreams[e]);var o=e.aoff;function s(){t!=o?(emedia.enableAudioTracks(e.getMediaStream(),!t),i.current&&i.current.aoff(e,t)):v.info("pubstream aoff not chanage.")}if(t=t?1:0,e.aoff=t,!t&&e.constaints&&!e.constaints.audio){var a=e.constaints.audio;return e.constaints.audio=!0,void i._republish(e,(function(e){s(),r&&r(e)}),(function(t){t instanceof emedia.event.OpenMediaError&&(e.constaints.audio=a,e.aoff=o),n&&n(t)}))}s(),r&&r(e.getMediaStream())},iceing:function(e){var t=this;return h.isPlainObject(t.current._linkedStreams[e])},recording:function(e){var t=this;return h.isPlainObject(t.current._records[e])},startRecord:function(e,t){var n=this,r=n.current._linkedStreams[e];if(!r)throw v.error("not at linked streams",e),e+" not at linked streams";r._webrtc||t&&t(!1),n.current.startRecord(r,t)},stopRecord:function(e,t){var n=this,r=n.current._records[e];if(!r)throw v.error("not at recording streams",e),e+" not at recording streams";n.current.stopRecord(r,t)},getCurrentMembers:function(){var e=this;return e.current.getCurrentMembers()},_onCapturePicture:function(e){var t,n=this,r=e.arg.rspBase64Pic,i=e.arg.streamId,o=n.current._cacheStreams[i];if(r){var s;if("function"!==typeof n.getHTMLVideo||!(s=n.getHTMLVideo(i)))return void v.warn("Not support capture picture. caused by htmlVideo not found");t=n.getCaptureBase64Context(s)}else{if("function"!==typeof n.onCapturePicture)return void v.warn("Not support capture picture. caused by onCapturePicture not found");n.onCapturePicture(o)}var a=n.current.newMessage({op:1001,tsxId:e.tsxId,memId:e.memId,arg:(0,c.default)(t?{pic:t}:{}),result:0});return n.current.postMessage(a,(function(e){v.warn("Send remote control onCapturePicture response. the result = ",e.result,e.msg||"")})),!0},newSession:function(e,t){var n=this,r=n.Session||g,o=new r({ticket:t,owner:e,onTcklC:function(t){e.onTcklC(t.rtcId,t.cands)},onAcptC:function(t){e.onAcptC(t.rtcId,t.sdp,t.cands)},onAnsC:function(t){e.onAnsC(t.rtcId,t.sdp,t.cands)},onTermC:function(t){v.info("Server termc rtc: ",t.rtcId,t.message||t.msg);var r=t.endReason;if(21===r||22===r)h.forEach(e._cacheStreams,(function(n,i){var o;i.rtcId===t.rtcId&&(o=21===r?new emedia.event.SwitchVCodes({stream:i,useVCodes:t.useVCodes}):new emedia.event.SubFailNotSupportVCodes({stream:i}),e.onEvent(o))}));else if(23==r){var i=n.listeners.mgr.onPubVideoTooMuch;if(!i||"function"!=typeof i)return;i()}else if(24==r){var o=n.listeners.mgr.onPubDesktopTooMuch;if(!o||"function"!=typeof o)return;o()}else e.closeWebrtc(t.rtcId,!1,!0)},onEnter:function(t){e.onEnter(t.cver,t.mem)},onExit:function(t){e.onExit(t.cver,t.memId,t.reason||0)},onPub:function(t){e.onPub(t.cver,t.memId,t.pubS)},onUnpub:function(t){e.onUnpub(t.cver,t.memId,t.pubSId)},onMems:function(e){},onClose:function(t){e.onClose(t.cver,t.confrId)},onEvent:function(t){e.onEvent(t)},onStreamControl:function(t){e.onStreamControl(t.cver,t.streamId,t.voff,t.aoff,t.sver)},onRoleUpdate:function(t){e._onRoleUpdate(t.role,t.roleToken)},onRemoteControl:function(t){if("string"===typeof t.arg&&(t.arg=JSON.parse(t.arg)),20!==t.arg.op2||!t.arg.pic||!n._onCapturePicture.call(n,t)){if(30===t.arg.op2&&n._onRemotePannelControl)try{return void n._onRemotePannelControl.call(n,t)}catch(y){v.warn(y)}if(21!==t.arg.op2)if(22!==t.arg.op2){if(23===t.arg.op2){var r=n.listeners.mgr.onMuted;if(r&&"function"==typeof r)return void r()}if(24===t.arg.op2){var i=n.listeners.mgr.onUnmuted;if(i&&"function"==typeof i)return void i()}v.warn("Not support remote control");var o=e.newMessage({op:1001,tsxId:t.tsxId,memId:t.memId,arg:(0,c.default)(t.arg),result:t&&t.arg&&30===t.arg.op2?-405:-507,msg:"Not support the remote control."});e.postMessage(o,(function(e){v.warn("Send remote control response. the result = ",e.result,e.msg||"")}))}else{var s=t.arg,a=s.memId,u=s.nickName;if(!a)return void console.warn("onRequestToAdmin not have memberId");n._cache_receive_sessions.push(t);var f=n.listeners.mgr.onRequestToAdmin,d={memberId:a,nickName:u};f&&"function"==typeof f&&f(d,(function(e){return n.agreeRequestToAdmin(e)}),(function(e){return n.refuseRequestToAdmin(e)}))}else{var l=t.arg,p=l.memId,h=l.nickName;if(!p)return void console.warn("onRequestToTalker not have memberId");n._cache_receive_sessions.push(t);var m=n.listeners.mgr.onRequestToTalker,g={memberId:p,nickName:h};m&&"function"==typeof m&&m(g,(function(e,t){return n.agreeRequestToTalker(e,t)}),(function(e){return n.refuseRequestToTalker(e)}))}}},onRecvRemoteMessage:function(t){e._onRecvRemoteMessage&&e._onRecvRemoteMessage(t.memId,t.arg,t)},onConfrAttrsUpdated:function(e){var t=function(e){if(n.listeners.mgr){var t=n.listeners.mgr.catrrs||[];t=e.cattrs instanceof Array==1?o(t,e.cattrs):i(e.cattrs),n.listeners.mgr.catrrs=t;var r=n.listeners.mgr.onConfrAttrsUpdated;r&&"function"==typeof r&&(r=r.bind(n.listeners.mgr),r(t))}function i(e){var t=[];for(var n in e){var r={};r.key=n,r.val=e[n],r.op="",t.push(r)}return t}function o(e,t){return 0==t.length||t.forEach((function(t){var n=!1;e.forEach((function(r,i){if(r.key==t.key)return e.splice(i,1,t),void(n=!0)})),n||e.push(t)})),e}},r=function(e){if(e.cstate&&0!=(0,i.default)(e.cstate).length){var t=n.listeners.mgr.onConfrStateUpdated;t&&"function"==typeof t&&(t=t.bind(n.listeners.mgr),t(e.cstate))}};e.cattrs instanceof Array==1&&e.cattrs.length>0&&t(e),e.cattrs.constructor==Object&&(0,i.default)(e.cattrs).length>0&&t(e),e.cstate&&r(e)},onAdminChanged:function(e){var t=n.listeners.mgr.onAdminChanged;t&&"function"==typeof t&&t(e)},onRequestToTalkerReply:function(e){var t=n.listeners.mgr.onRequestToTalkerReply;t&&"function"==typeof t&&t(e)},onRequestToAdminReply:function(e){var t=n.listeners.mgr.onRequestToAdminReply;t&&"function"==typeof t&&t(e)},onLivecfgsChanged:function(e){e.liveCfgs&&emedia.config({liveCfgs:e.liveCfgs})}});return o},_judgeTalking:function(e){return!!e&&e.instant>=emedia.config.judgeTalkingByInstantGE},graffitiVideo:function(e,t,n){var r=this,i=r.getStreamById(e),o=new MediaStream;o._located=!0,i._localMediaStream.getAudioTracks().forEach((function(e){o.addTrack(e)}));var s=n.captureStream(25);s.getVideoTracks().forEach((function(e){o.addTrack(e)})),t.srcObject=o,i.updateAttributes({localStream:o,isRepublished:!0,optimalVideoCodecs:i.optimalVideoCodecs}),r.push(i)},resetCanvas:function(e){var t;if(arguments.length>1)for(var n=0;n<arguments.length;n++)t=arguments[n],"function"===typeof t&&t(e),"function"!==typeof t&&h.isPlainObject(t)&&h.forEach(t,(function(t,n){v.debug("Canvas set ",t," = ",n),e.setAttribute(t,n)}))},_random:function(e){return Math.floor(Math.random()*e)},requestFrame:function(e,t){var n,r=this;if("string"===typeof e)n=this.current._cacheStreams[e];else{if(!e.id)return;n=this.current._cacheStreams[e.id]}function i(){if(n.requestFrame(),n.canvas){var e=E.prototype.redraw.bind({_canvasContext:n.canvas.getContext("2d")});e(3,3)}}n&&(t?setTimeout((function(){i(),r.requestFrame(n,t)}),t):i())},graffitiCanvas:function(e,t){h.targetDOM(e)&&(t=e,e=!1);var n=this,r=new n.ShareDesktopPubstream({voff:0,aoff:e?0:1});t||(t=document.createElement("canvas")),t.getContext("2d"),r.canvas=t;var i=function(){};return i.prototype.setCanvas=function(e){return this.canvasTag=t,n.resetCanvas(t,e),this},i.prototype.push=function(e,t){var n=this;n._push(e,t)},i.prototype._push=function(i,o){"function"===typeof i&&(o=i,i=void 0),t.captureStream&&(t.captureStream.enabled=!0);var s=t.captureStream(i||25);function a(n){n.canvas=t,o&&o(n,t,s),e&&n.requestFrame()}function c(e,t){var r=new MediaStream;r._located=!0,e._localMediaStream&&e._localMediaStream.getAudioTracks().forEach((function(e){r.addTrack(e)})),s.getVideoTracks().forEach((function(e){r.addTrack(e)})),e._localMediaStream=r,e.localStream=r,n.push(e,t)}return e?n.__getUserMedia({audio:!0},(function(e,t){r._localMediaStream=t,c(r,a)})):c(r,a),this},new i},blobRecorder:function(e,t,n,r){var i=this;h.targetDOM(e)&&(e=e.srcObject),t||(t={mimeType:"video/webm;codecs=vp9"}),MediaRecorder.isTypeSupported(t.mimeType)||(v.info(t.mimeType," is not Supported"),t={mimeType:"video/webm;codecs=vp8"},MediaRecorder.isTypeSupported(t.mimeType)||(v.info(t.mimeType," is not Supported"),t={mimeType:"video/webm"},MediaRecorder.isTypeSupported(t.mimeType)||(v.info(t.mimeType," is not Supported"),t={mimeType:""})));try{var o=new MediaRecorder(e,t)}catch(c){return void v.error("Exception while creating MediaRecorder: ",c)}var s=[];function a(){this.blobs=s}return o.onstop=r||function(e){v.info("Recorder stopped: ",e)},o.ondataavailable=n||function(e){e.data&&e.data.size>0&&s.push(e.data)},a.prototype.start=function(e){o.start(e)},a.prototype.stop=function(){o.stop()},a.prototype.playurl=function(e){var t=new Blob(this.blobs,e||{type:"video/webm"});return window.URL.createObjectURL(t)},a.prototype.download=function(e,t){var n=new Blob(this.blobs,t||{type:"video/webm"});i.downloadFile(e,void 0,n)},new a},requestToTalker:function(){this.current.requestToTalker()},_get_session_by_memberId_and_op_type:function(e,t){if(e&&t){var n=void 0;return this._cache_receive_sessions.map((function(r){var o=r.arg;if(o&&o instanceof Object&&(0,i.default)(o).length>0){var s=o.memId,a=o.op2;s==e&&a==t&&(n=r)}})),n}},_delete_session_by_memberId_and_op_type:function(e,t){if(e&&t){var n=this;this._cache_receive_sessions.map((function(r,o){var s=r.arg;if(s&&s instanceof Object&&(0,i.default)(s).length>0){var a=s.memId,c=s.op2;a==e&&c==t&&n._cache_receive_sessions.splice(o,1)}}))}},agreeRequestToTalker:function(){var e=(0,f.default)(s.default.mark((function e(t,n){var r,i,o;return s.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=this._get_session_by_memberId_and_op_type(t,21),r){e.next=3;break}return e.abrupt("return");case 3:return i=r.arg.memName,o=this.listeners.confrId,e.prev=5,e.next=8,this.listeners.mgr.chanageRoles(3,[i],o);case 8:e.next=16;break;case 10:if(e.prev=10,e.t0=e["catch"](5),-523!=e.t0.error){e.next=16;break}if(!n||"function"!=typeof n){e.next=16;break}return n(),e.abrupt("return");case 16:this._delete_session_by_memberId_and_op_type(t,21);case 17:case"end":return e.stop()}}),e,this,[[5,10]])})));function t(t,n){return e.apply(this,arguments)}return t}(),refuseRequestToTalker:function(e){if(e){var t=this._get_session_by_memberId_and_op_type(e,21);t&&(this.current.refuseRequestToTalker(t),this._delete_session_by_memberId_and_op_type(e,21))}else console.warn("refuseRequestToTalker memberId is required")},requestToAdmin:function(){this.current.requestToAdmin()},agreeRequestToAdmin:function(e){var t=this._get_session_by_memberId_and_op_type(e,22);if(t){var n=t.arg.memName,r=this.listeners.confrId;this.listeners.mgr.chanageRoles(7,[n],r),this._delete_session_by_memberId_and_op_type(e,22)}},refuseRequestToAdmin:function(e){if(e){var t=this._get_session_by_memberId_and_op_type(e,22);t&&(this.current.refuseRequestToAdmin(t),this._delete_session_by_memberId_and_op_type(e,22))}else console.warn("refuseRequestToAdmin memberId is required")},muteBymemberId:function(e){this.current&&7==this.current.role&&this.current.muteBymemberId(e)},unmuteBymemberId:function(e){this.current&&7==this.current.role&&this.current.unmuteBymemberId(e)}})},function(e,t,n){e.exports=n(143)},function(e,t,n){var r=function(){return this}()||Function("return this")(),i=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,o=i&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,e.exports=n(144),i)r.regeneratorRuntime=o;else try{delete r.regeneratorRuntime}catch(s){r.regeneratorRuntime=void 0}},function(e,t){!function(t){"use strict";var n,r=Object.prototype,i=r.hasOwnProperty,o="function"===typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag",u="object"===typeof e,f=t.regeneratorRuntime;if(f)u&&(e.exports=f);else{f=t.regeneratorRuntime=u?e.exports:{},f.wrap=_;var d="suspendedStart",l="suspendedYield",p="executing",h="completed",m={},v={};v[s]=function(){return this};var g=Object.getPrototypeOf,y=g&&g(g(A([])));y&&y!==r&&i.call(y,s)&&(v=y);var b=C.prototype=S.prototype=Object.create(v);x.prototype=b.constructor=C,C.constructor=x,C[c]=x.displayName="GeneratorFunction",f.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===x||"GeneratorFunction"===(t.displayName||t.name))},f.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,C):(e.__proto__=C,c in e||(e[c]="GeneratorFunction")),e.prototype=Object.create(b),e},f.awrap=function(e){return{__await:e}},E(I.prototype),I.prototype[a]=function(){return this},f.AsyncIterator=I,f.async=function(e,t,n,r){var i=new I(_(e,t,n,r));return f.isGeneratorFunction(t)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(b),b[c]="Generator",b[s]=function(){return this},b.toString=function(){return"[object Generator]"},f.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){while(t.length){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},f.values=A,M.prototype={constructor:M,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,i){return a.type="throw",a.arg=e,t.next=r,i&&(t.method="next",t.arg=n),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var c=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:A(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=n),m}}}function _(e,t,n,r){var i=t&&t.prototype instanceof S?t:S,o=Object.create(i.prototype),s=new M(r||[]);return o._invoke=T(e,n,s),o}function w(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(r){return{type:"throw",arg:r}}}function S(){}function x(){}function C(){}function E(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function I(e){function t(n,r,o,s){var a=w(e[n],e,r);if("throw"!==a.type){var c=a.arg,u=c.value;return u&&"object"===typeof u&&i.call(u,"__await")?Promise.resolve(u.__await).then((function(e){t("next",e,o,s)}),(function(e){t("throw",e,o,s)})):Promise.resolve(u).then((function(e){c.value=e,o(c)}),s)}s(a.arg)}var n;function r(e,r){function i(){return new Promise((function(n,i){t(e,r,n,i)}))}return n=n?n.then(i,i):i()}this._invoke=r}function T(e,t,n){var r=d;return function(i,o){if(r===p)throw new Error("Generator is already running");if(r===h){if("throw"===i)throw o;return P()}n.method=i,n.arg=o;while(1){var s=n.delegate;if(s){var a=O(s,n);if(a){if(a===m)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var c=w(e,t,n);if("normal"===c.type){if(r=n.done?h:l,c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=h,n.method="throw",n.arg=c.arg)}}}function O(e,t){var r=e.iterator[t.method];if(r===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=n,O(e,t),"throw"===t.method))return m;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var i=w(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,m;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=n),t.delegate=null,m):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function R(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function M(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(R,this),this.reset(!0)}function A(e){if(e){var t=e[s];if(t)return t.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){while(++r<e.length)if(i.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=n,t.done=!0,t};return o.next=o}}return{next:P}}function P(){return{value:n,done:!0}}}(function(){return this}()||Function("return this")())},function(e,t,n){"use strict";t.__esModule=!0;var r=n(8),i=o(r);function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){return function(){var t=e.apply(this,arguments);return new i.default((function(e,n){function r(o,s){try{var a=t[o](s),c=a.value}catch(u){return void n(u)}if(!a.done)return i.default.resolve(c).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(c)}return r("next")}))}}},function(e,t,n){(function(e,n){var r,i;(function(){var o="object"==typeof self&&self.self===self&&self||"object"==typeof e&&e.global===e&&e||this||{},s=o._,a=Array.prototype,c=Object.prototype,u="undefined"!==typeof Symbol?Symbol.prototype:null,f=a.push,d=a.slice,l=c.toString,p=c.hasOwnProperty,h=Array.isArray,m=Object.keys,v=Object.create,g=function(){},y=function(e){return e instanceof y?e:this instanceof y?void(this._wrapped=e):new y(e)};t.nodeType?o._=y:(!n.nodeType&&n.exports&&(t=n.exports=y),t._=y),y.VERSION="1.9.1";var b,_=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,o){return e.call(t,n,r,i,o)}}return function(){return e.apply(t,arguments)}},w=function(e,t,n){return y.iteratee!==b?y.iteratee(e,t):null==e?y.identity:y.isFunction(e)?_(e,t,n):y.isObject(e)&&!y.isArray(e)?y.matcher(e):y.property(e)};y.iteratee=b=function(e,t){return w(e,t,1/0)};var S=function(e,t){return t=null==t?e.length-1:+t,function(){for(var n=Math.max(arguments.length-t,0),r=Array(n),i=0;i<n;i++)r[i]=arguments[i+t];switch(t){case 0:return e.call(this,r);case 1:return e.call(this,arguments[0],r);case 2:return e.call(this,arguments[0],arguments[1],r)}var o=Array(t+1);for(i=0;i<t;i++)o[i]=arguments[i];return o[t]=r,e.apply(this,o)}},x=function(e){if(!y.isObject(e))return{};if(v)return v(e);g.prototype=e;var t=new g;return g.prototype=null,t},C=function(e){return function(t){return null==t?void 0:t[e]}},E=function(e,t){return null!=e&&p.call(e,t)},I=function(e,t){for(var n=t.length,r=0;r<n;r++){if(null==e)return;e=e[t[r]]}return n?e:void 0},T=Math.pow(2,53)-1,O=C("length"),R=function(e){var t=O(e);return"number"==typeof t&&t>=0&&t<=T};y.each=y.forEach=function(e,t,n){var r,i;if(t=_(t,n),R(e))for(r=0,i=e.length;r<i;r++)t(e[r],r,e);else{var o=y.keys(e);for(r=0,i=o.length;r<i;r++)t(e[o[r]],o[r],e)}return e},y.map=y.collect=function(e,t,n){t=w(t,n);for(var r=!R(e)&&y.keys(e),i=(r||e).length,o=Array(i),s=0;s<i;s++){var a=r?r[s]:s;o[s]=t(e[a],a,e)}return o};var k=function(e){var t=function(t,n,r,i){var o=!R(t)&&y.keys(t),s=(o||t).length,a=e>0?0:s-1;for(i||(r=t[o?o[a]:a],a+=e);a>=0&&a<s;a+=e){var c=o?o[a]:a;r=n(r,t[c],c,t)}return r};return function(e,n,r,i){var o=arguments.length>=3;return t(e,_(n,i,4),r,o)}};y.reduce=y.foldl=y.inject=k(1),y.reduceRight=y.foldr=k(-1),y.find=y.detect=function(e,t,n){var r=R(e)?y.findIndex:y.findKey,i=r(e,t,n);if(void 0!==i&&-1!==i)return e[i]},y.filter=y.select=function(e,t,n){var r=[];return t=w(t,n),y.each(e,(function(e,n,i){t(e,n,i)&&r.push(e)})),r},y.reject=function(e,t,n){return y.filter(e,y.negate(w(t)),n)},y.every=y.all=function(e,t,n){t=w(t,n);for(var r=!R(e)&&y.keys(e),i=(r||e).length,o=0;o<i;o++){var s=r?r[o]:o;if(!t(e[s],s,e))return!1}return!0},y.some=y.any=function(e,t,n){t=w(t,n);for(var r=!R(e)&&y.keys(e),i=(r||e).length,o=0;o<i;o++){var s=r?r[o]:o;if(t(e[s],s,e))return!0}return!1},y.contains=y.includes=y.include=function(e,t,n,r){return R(e)||(e=y.values(e)),("number"!=typeof n||r)&&(n=0),y.indexOf(e,t,n)>=0},y.invoke=S((function(e,t,n){var r,i;return y.isFunction(t)?i=t:y.isArray(t)&&(r=t.slice(0,-1),t=t[t.length-1]),y.map(e,(function(e){var o=i;if(!o){if(r&&r.length&&(e=I(e,r)),null==e)return;o=e[t]}return null==o?o:o.apply(e,n)}))})),y.pluck=function(e,t){return y.map(e,y.property(t))},y.where=function(e,t){return y.filter(e,y.matcher(t))},y.findWhere=function(e,t){return y.find(e,y.matcher(t))},y.max=function(e,t,n){var r,i,o=-1/0,s=-1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e){e=R(e)?e:y.values(e);for(var a=0,c=e.length;a<c;a++)r=e[a],null!=r&&r>o&&(o=r)}else t=w(t,n),y.each(e,(function(e,n,r){i=t(e,n,r),(i>s||i===-1/0&&o===-1/0)&&(o=e,s=i)}));return o},y.min=function(e,t,n){var r,i,o=1/0,s=1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e){e=R(e)?e:y.values(e);for(var a=0,c=e.length;a<c;a++)r=e[a],null!=r&&r<o&&(o=r)}else t=w(t,n),y.each(e,(function(e,n,r){i=t(e,n,r),(i<s||i===1/0&&o===1/0)&&(o=e,s=i)}));return o},y.shuffle=function(e){return y.sample(e,1/0)},y.sample=function(e,t,n){if(null==t||n)return R(e)||(e=y.values(e)),e[y.random(e.length-1)];var r=R(e)?y.clone(e):y.values(e),i=O(r);t=Math.max(Math.min(t,i),0);for(var o=i-1,s=0;s<t;s++){var a=y.random(s,o),c=r[s];r[s]=r[a],r[a]=c}return r.slice(0,t)},y.sortBy=function(e,t,n){var r=0;return t=w(t,n),y.pluck(y.map(e,(function(e,n,i){return{value:e,index:r++,criteria:t(e,n,i)}})).sort((function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return e.index-t.index})),"value")};var M=function(e,t){return function(n,r,i){var o=t?[[],[]]:{};return r=w(r,i),y.each(n,(function(t,i){var s=r(t,i,n);e(o,t,s)})),o}};y.groupBy=M((function(e,t,n){E(e,n)?e[n].push(t):e[n]=[t]})),y.indexBy=M((function(e,t,n){e[n]=t})),y.countBy=M((function(e,t,n){E(e,n)?e[n]++:e[n]=1}));var A=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;y.toArray=function(e){return e?y.isArray(e)?d.call(e):y.isString(e)?e.match(A):R(e)?y.map(e,y.identity):y.values(e):[]},y.size=function(e){return null==e?0:R(e)?e.length:y.keys(e).length},y.partition=M((function(e,t,n){e[n?0:1].push(t)}),!0),y.first=y.head=y.take=function(e,t,n){return null==e||e.length<1?null==t?void 0:[]:null==t||n?e[0]:y.initial(e,e.length-t)},y.initial=function(e,t,n){return d.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},y.last=function(e,t,n){return null==e||e.length<1?null==t?void 0:[]:null==t||n?e[e.length-1]:y.rest(e,Math.max(0,e.length-t))},y.rest=y.tail=y.drop=function(e,t,n){return d.call(e,null==t||n?1:t)},y.compact=function(e){return y.filter(e,Boolean)};var P=function(e,t,n,r){r=r||[];for(var i=r.length,o=0,s=O(e);o<s;o++){var a=e[o];if(R(a)&&(y.isArray(a)||y.isArguments(a)))if(t){var c=0,u=a.length;while(c<u)r[i++]=a[c++]}else P(a,t,n,r),i=r.length;else n||(r[i++]=a)}return r};y.flatten=function(e,t){return P(e,t,!1)},y.without=S((function(e,t){return y.difference(e,t)})),y.uniq=y.unique=function(e,t,n,r){y.isBoolean(t)||(r=n,n=t,t=!1),null!=n&&(n=w(n,r));for(var i=[],o=[],s=0,a=O(e);s<a;s++){var c=e[s],u=n?n(c,s,e):c;t&&!n?(s&&o===u||i.push(c),o=u):n?y.contains(o,u)||(o.push(u),i.push(c)):y.contains(i,c)||i.push(c)}return i},y.union=S((function(e){return y.uniq(P(e,!0,!0))})),y.intersection=function(e){for(var t=[],n=arguments.length,r=0,i=O(e);r<i;r++){var o=e[r];if(!y.contains(t,o)){var s;for(s=1;s<n;s++)if(!y.contains(arguments[s],o))break;s===n&&t.push(o)}}return t},y.difference=S((function(e,t){return t=P(t,!0,!0),y.filter(e,(function(e){return!y.contains(t,e)}))})),y.unzip=function(e){for(var t=e&&y.max(e,O).length||0,n=Array(t),r=0;r<t;r++)n[r]=y.pluck(e,r);return n},y.zip=S(y.unzip),y.object=function(e,t){for(var n={},r=0,i=O(e);r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n};var j=function(e){return function(t,n,r){n=w(n,r);for(var i=O(t),o=e>0?0:i-1;o>=0&&o<i;o+=e)if(n(t[o],o,t))return o;return-1}};y.findIndex=j(1),y.findLastIndex=j(-1),y.sortedIndex=function(e,t,n,r){n=w(n,r,1);var i=n(t),o=0,s=O(e);while(o<s){var a=Math.floor((o+s)/2);n(e[a])<i?o=a+1:s=a}return o};var N=function(e,t,n){return function(r,i,o){var s=0,a=O(r);if("number"==typeof o)e>0?s=o>=0?o:Math.max(o+a,s):a=o>=0?Math.min(o+1,a):o+a+1;else if(n&&o&&a)return o=n(r,i),r[o]===i?o:-1;if(i!==i)return o=t(d.call(r,s,a),y.isNaN),o>=0?o+s:-1;for(o=e>0?s:a-1;o>=0&&o<a;o+=e)if(r[o]===i)return o;return-1}};y.indexOf=N(1,y.findIndex,y.sortedIndex),y.lastIndexOf=N(-1,y.findLastIndex),y.range=function(e,t,n){null==t&&(t=e||0,e=0),n||(n=t<e?-1:1);for(var r=Math.max(Math.ceil((t-e)/n),0),i=Array(r),o=0;o<r;o++,e+=n)i[o]=e;return i},y.chunk=function(e,t){if(null==t||t<1)return[];var n=[],r=0,i=e.length;while(r<i)n.push(d.call(e,r,r+=t));return n};var L=function(e,t,n,r,i){if(!(r instanceof t))return e.apply(n,i);var o=x(e.prototype),s=e.apply(o,i);return y.isObject(s)?s:o};y.bind=S((function(e,t,n){if(!y.isFunction(e))throw new TypeError("Bind must be called on a function");var r=S((function(i){return L(e,r,t,this,n.concat(i))}));return r})),y.partial=S((function(e,t){var n=y.partial.placeholder,r=function(){for(var i=0,o=t.length,s=Array(o),a=0;a<o;a++)s[a]=t[a]===n?arguments[i++]:t[a];while(i<arguments.length)s.push(arguments[i++]);return L(e,r,this,this,s)};return r})),y.partial.placeholder=y,y.bindAll=S((function(e,t){t=P(t,!1,!1);var n=t.length;if(n<1)throw new Error("bindAll must be passed function names");while(n--){var r=t[n];e[r]=y.bind(e[r],e)}})),y.memoize=function(e,t){var n=function(r){var i=n.cache,o=""+(t?t.apply(this,arguments):r);return E(i,o)||(i[o]=e.apply(this,arguments)),i[o]};return n.cache={},n},y.delay=S((function(e,t,n){return setTimeout((function(){return e.apply(null,n)}),t)})),y.defer=y.partial(y.delay,y,1),y.throttle=function(e,t,n){var r,i,o,s,a=0;n||(n={});var c=function(){a=!1===n.leading?0:y.now(),r=null,s=e.apply(i,o),r||(i=o=null)},u=function(){var u=y.now();a||!1!==n.leading||(a=u);var f=t-(u-a);return i=this,o=arguments,f<=0||f>t?(r&&(clearTimeout(r),r=null),a=u,s=e.apply(i,o),r||(i=o=null)):r||!1===n.trailing||(r=setTimeout(c,f)),s};return u.cancel=function(){clearTimeout(r),a=0,r=i=o=null},u},y.debounce=function(e,t,n){var r,i,o=function(t,n){r=null,n&&(i=e.apply(t,n))},s=S((function(s){if(r&&clearTimeout(r),n){var a=!r;r=setTimeout(o,t),a&&(i=e.apply(this,s))}else r=y.delay(o,t,this,s);return i}));return s.cancel=function(){clearTimeout(r),r=null},s},y.wrap=function(e,t){return y.partial(t,e)},y.negate=function(e){return function(){return!e.apply(this,arguments)}},y.compose=function(){var e=arguments,t=e.length-1;return function(){var n=t,r=e[t].apply(this,arguments);while(n--)r=e[n].call(this,r);return r}},y.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},y.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}},y.once=y.partial(y.before,2),y.restArguments=S;var D=!{toString:null}.propertyIsEnumerable("toString"),B=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],U=function(e,t){var n=B.length,r=e.constructor,i=y.isFunction(r)&&r.prototype||c,o="constructor";E(e,o)&&!y.contains(t,o)&&t.push(o);while(n--)o=B[n],o in e&&e[o]!==i[o]&&!y.contains(t,o)&&t.push(o)};y.keys=function(e){if(!y.isObject(e))return[];if(m)return m(e);var t=[];for(var n in e)E(e,n)&&t.push(n);return D&&U(e,t),t},y.allKeys=function(e){if(!y.isObject(e))return[];var t=[];for(var n in e)t.push(n);return D&&U(e,t),t},y.values=function(e){for(var t=y.keys(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=e[t[i]];return r},y.mapObject=function(e,t,n){t=w(t,n);for(var r=y.keys(e),i=r.length,o={},s=0;s<i;s++){var a=r[s];o[a]=t(e[a],a,e)}return o},y.pairs=function(e){for(var t=y.keys(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=[t[i],e[t[i]]];return r},y.invert=function(e){for(var t={},n=y.keys(e),r=0,i=n.length;r<i;r++)t[e[n[r]]]=n[r];return t},y.functions=y.methods=function(e){var t=[];for(var n in e)y.isFunction(e[n])&&t.push(n);return t.sort()};var F=function(e,t){return function(n){var r=arguments.length;if(t&&(n=Object(n)),r<2||null==n)return n;for(var i=1;i<r;i++)for(var o=arguments[i],s=e(o),a=s.length,c=0;c<a;c++){var u=s[c];t&&void 0!==n[u]||(n[u]=o[u])}return n}};y.extend=F(y.allKeys),y.extendOwn=y.assign=F(y.keys),y.findKey=function(e,t,n){t=w(t,n);for(var r,i=y.keys(e),o=0,s=i.length;o<s;o++)if(r=i[o],t(e[r],r,e))return r};var V,W,q=function(e,t,n){return t in n};y.pick=S((function(e,t){var n={},r=t[0];if(null==e)return n;y.isFunction(r)?(t.length>1&&(r=_(r,t[1])),t=y.allKeys(e)):(r=q,t=P(t,!1,!1),e=Object(e));for(var i=0,o=t.length;i<o;i++){var s=t[i],a=e[s];r(a,s,e)&&(n[s]=a)}return n})),y.omit=S((function(e,t){var n,r=t[0];return y.isFunction(r)?(r=y.negate(r),t.length>1&&(n=t[1])):(t=y.map(P(t,!1,!1),String),r=function(e,n){return!y.contains(t,n)}),y.pick(e,r,n)})),y.defaults=F(y.allKeys,!0),y.create=function(e,t){var n=x(e);return t&&y.extendOwn(n,t),n},y.clone=function(e){return y.isObject(e)?y.isArray(e)?e.slice():y.extend({},e):e},y.tap=function(e,t){return t(e),e},y.isMatch=function(e,t){var n=y.keys(t),r=n.length;if(null==e)return!r;for(var i=Object(e),o=0;o<r;o++){var s=n[o];if(t[s]!==i[s]||!(s in i))return!1}return!0},V=function(e,t,n,r){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return!1;if(e!==e)return t!==t;var i=typeof e;return("function"===i||"object"===i||"object"==typeof t)&&W(e,t,n,r)},W=function(e,t,n,r){e instanceof y&&(e=e._wrapped),t instanceof y&&(t=t._wrapped);var i=l.call(e);if(i!==l.call(t))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+e===""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t;case"[object Symbol]":return u.valueOf.call(e)===u.valueOf.call(t)}var o="[object Array]"===i;if(!o){if("object"!=typeof e||"object"!=typeof t)return!1;var s=e.constructor,a=t.constructor;if(s!==a&&!(y.isFunction(s)&&s instanceof s&&y.isFunction(a)&&a instanceof a)&&"constructor"in e&&"constructor"in t)return!1}n=n||[],r=r||[];var c=n.length;while(c--)if(n[c]===e)return r[c]===t;if(n.push(e),r.push(t),o){if(c=e.length,c!==t.length)return!1;while(c--)if(!V(e[c],t[c],n,r))return!1}else{var f,d=y.keys(e);if(c=d.length,y.keys(t).length!==c)return!1;while(c--)if(f=d[c],!E(t,f)||!V(e[f],t[f],n,r))return!1}return n.pop(),r.pop(),!0},y.isEqual=function(e,t){return V(e,t)},y.isEmpty=function(e){return null==e||(R(e)&&(y.isArray(e)||y.isString(e)||y.isArguments(e))?0===e.length:0===y.keys(e).length)},y.isElement=function(e){return!(!e||1!==e.nodeType)},y.isArray=h||function(e){return"[object Array]"===l.call(e)},y.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},y.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],(function(e){y["is"+e]=function(t){return l.call(t)==="[object "+e+"]"}})),y.isArguments(arguments)||(y.isArguments=function(e){return E(e,"callee")});var $=o.document&&o.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof $&&(y.isFunction=function(e){return"function"==typeof e||!1}),y.isFinite=function(e){return!y.isSymbol(e)&&isFinite(e)&&!isNaN(parseFloat(e))},y.isNaN=function(e){return y.isNumber(e)&&isNaN(e)},y.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"===l.call(e)},y.isNull=function(e){return null===e},y.isUndefined=function(e){return void 0===e},y.has=function(e,t){if(!y.isArray(t))return E(e,t);for(var n=t.length,r=0;r<n;r++){var i=t[r];if(null==e||!p.call(e,i))return!1;e=e[i]}return!!n},y.noConflict=function(){return o._=s,this},y.identity=function(e){return e},y.constant=function(e){return function(){return e}},y.noop=function(){},y.property=function(e){return y.isArray(e)?function(t){return I(t,e)}:C(e)},y.propertyOf=function(e){return null==e?function(){}:function(t){return y.isArray(t)?I(e,t):e[t]}},y.matcher=y.matches=function(e){return e=y.extendOwn({},e),function(t){return y.isMatch(t,e)}},y.times=function(e,t,n){var r=Array(Math.max(0,e));t=_(t,n,1);for(var i=0;i<e;i++)r[i]=t(i);return r},y.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},y.now=Date.now||function(){return(new Date).getTime()};var G={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},z=y.invert(G),H=function(e){var t=function(t){return e[t]},n="(?:"+y.keys(e).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(e){return e=null==e?"":""+e,r.test(e)?e.replace(i,t):e}};y.escape=H(G),y.unescape=H(z),y.result=function(e,t,n){y.isArray(t)||(t=[t]);var r=t.length;if(!r)return y.isFunction(n)?n.call(e):n;for(var i=0;i<r;i++){var o=null==e?void 0:e[t[i]];void 0===o&&(o=n,i=r),e=y.isFunction(o)?o.call(e):o}return e};var K=0;y.uniqueId=function(e){var t=++K+"";return e?e+t:t},y.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var J=/(.)^/,Y={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},X=/\\|'|\r|\n|\u2028|\u2029/g,Z=function(e){return"\\"+Y[e]};y.template=function(e,t,n){!t&&n&&(t=n),t=y.defaults({},t,y.templateSettings);var r,i=RegExp([(t.escape||J).source,(t.interpolate||J).source,(t.evaluate||J).source].join("|")+"|$","g"),o=0,s="__p+='";e.replace(i,(function(t,n,r,i,a){return s+=e.slice(o,a).replace(X,Z),o=a+t.length,n?s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?s+="'+\n((__t=("+r+"))==null?'':__t)+\n'":i&&(s+="';\n"+i+"\n__p+='"),t})),s+="';\n",t.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{r=new Function(t.variable||"obj","_",s)}catch(u){throw u.source=s,u}var a=function(e){return r.call(this,e,y)},c=t.variable||"obj";return a.source="function("+c+"){\n"+s+"}",a},y.chain=function(e){var t=y(e);return t._chain=!0,t};var Q=function(e,t){return e._chain?y(t).chain():t};y.mixin=function(e){return y.each(y.functions(e),(function(t){var n=y[t]=e[t];y.prototype[t]=function(){var e=[this._wrapped];return f.apply(e,arguments),Q(this,n.apply(y,e))}})),y},y.mixin(y),y.each(["pop","push","reverse","shift","sort","splice","unshift"],(function(e){var t=a[e];y.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],Q(this,n)}})),y.each(["concat","join","slice"],(function(e){var t=a[e];y.prototype[e]=function(){return Q(this,t.apply(this._wrapped,arguments))}})),y.prototype.value=function(){return this._wrapped},y.prototype.valueOf=y.prototype.toJSON=y.prototype.value,y.prototype.toString=function(){return String(this._wrapped)},r=[],i=function(){return y}.apply(t,r),void 0===i||(n.exports=i)})()}).call(this,n(147),n(148)(e))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}e.exports=n},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";var r=n(88),i=a(r),o=n(2),s=a(o);function a(e){return e&&e.__esModule?e:{default:e}}var c=n(87),u=c.tagLogger("Sess"),f=n(150),d=0,l=n(151).default,p=c.prototypeExtend({setSessId:function(e){return e&&(this.sessId=e),this},setOp:function(e){return e&&(this.op=e),200===e&&(this.res={type:emedia.config.clientType,ver:window._emediaVersion||emedia.config.version,agent:emedia.config.userAgent,ops:emedia.config.acptOps}),this},setTsxId:function(e){return e&&(this.tsxId=e),this},setTicket:function(e){return e&&(this.tkt=e),this},setSdp:function(e){return e&&(this.sdp=e),this},setCands:function(e){return e&&(this.cands=e),this},setSubSId:function(e){return e&&(this.subSId=e),this},setMemId:function(e){return e&&(this.memId=e),this},setPubS:function(e){e&&(this.pubS=c.extend(!1,{},e));var t=this.pubS;return t.ext&&c.isPlainObject(t.ext)&&(t.ext=(0,s.default)(t.ext)),t&&c.forEach(t,(function(e,n){(c.isPlainObject(n)||"function"===typeof n)&&"resolution"!=e&&c.removeAttribute(t,e)})),t&&c.removeAttribute(t,"localStream"),t&&c.removeAttribute(t,"_localMediaStream"),t&&c.removeAttribute(t,"_webrtc"),this},setRtcId:function(e){return e&&(this.rtcId=e),this},setCver:function(e){return e&&(this.cver=e),this},setEndReason:function(e){return e&&(this.endReason=e),this},setNickName:function(e){return e&&(this.nickName=e),this},setResource:function(e){return e&&(this.resource=e),this},setReason:function(e){return e&&(this.reason=e),this},setConfrId:function(e){return e&&(this.confrId=e),this},setVoff:function(e){return"undefined"===typeof e||(this.voff=e?1:0),this},setAoff:function(e){return"undefined"===typeof e||(this.aoff=e?1:0),this},setFlag:function(e){return 0===e&&(this.flag=0),1===e&&(this.flag=1),this},setExt:function(e){return e&&c.isPlainObject(e)&&(e=(0,s.default)(e)),e&&(this.ext=e),this}}),h=emedia.__session_globalCount=0;function m(e,t,n){var r=this;function i(e,i){try{r.onWebsocketEvent(new f.WSClose({url:r.thisWsUri,retry:n,online:r.online,cause:e,event:i,session:r}))}finally{t&&t(new f.WSClose({url:r.thisWsUri,retry:n,online:r.online,cause:e,event:i,session:r}))}}function o(e){if(r.connected(r.thisWsUri)){if(c.isPlainObject(e)&&!(e instanceof p))throw u.error("message not a Messages"),"message not a Messages";if(r.sessId&&e.sessId!=r.sessId)u.warn("self.sessId && message.sessId != self.sessId",e);else{var t=(0,s.default)(e);r.thisWsUri===r._websocket.url&&r._websocket.send(t),r.thisWsUri===r._websocket.url&&u.debug("Done send req:",t,r._websocket.url),r.thisWsUri===r._websocket.url||u.debug("Donot send(url not equal): req:",t,r._websocket.url)}}else u.debug("current dont connect. the message = ",e)}function a(){if(r.connected(r.thisWsUri)){if(0===r._bufferedMessages.length)return;var e,t=[];while(e=r._bufferedMessages.shift())if(e.sessId||r.sessId||200==e.op){if(200===e.op){o(e);break}r.sessId&&!e.sessId&&(e.sessId=r.sessId);var i=o(e);i&&t.push(i)}else t.push(e),u.warn("tmp store message, util enter success!",e);t.length>0&&Array.prototype.push.apply(r._bufferedMessages,t)}else if(0!==n&&r.online)r.connected();else{var s=c.extend(!1,{},r._callbacks),a=[];for(var f in s){var d=s[f];n>0&&!r.online?a.push(d):r.onMessage({op:1001,tsxId:f,result:-9527,msg:"sdk rsp fail. retry fail or online = "+r.online})}r._bufferedMessages=r._bufferedMessages||[],a.length>0&&Array.prototype.push.apply(r._bufferedMessages,a)}}if(r.connected(r.thisWsUri))return e&&e(r),u.info("Session connected. dont continue connect"),void(r.notifyNewMessage&&r.notifyNewMessage());if(r.online){r.notifyNewMessage=a,u.info("Session begin connect.");var d=r._websocket;d&&(u.warn("will close. websocket state",d.readyState,d.url,r.thisWsUri),d.close(1e3));try{u.info("Connecting",r.thisWsUri,n),d=r._websocket=new WebSocket(r.thisWsUri)}catch(l){return u.warn(l),void i(l)}d.onopen=function(n){var i=this.url;if(i===r.thisWsUri)try{u.info("websocket connected:",i),t&&(t=null),e&&e(r),r.onWebsocketEvent(new f.WSConnected({event:n,session:r}))}finally{}else u.warn("ignore the onopen. caused by websocket url not ",r.thisWsUri,i)},d.onmessage=function(e){var t=this.url;if(t===r.thisWsUri){u.debug("recv data",e.data);var n=JSON.parse(e.data);n&&1001==n.op&&u.debug("recv message: rsp:",n),n&&1001!=n.op&&u.debug("recv message: evt:",n),r.onMessage(n)}else u.warn("ignore recv data. caused by websocket url not ",r.thisWsUri,t,e.data)},d.onclose=function(e){var t=this.url;u.info("Disconnected:",t,r.thisWsUri,e),t===r.thisWsUri?(r.notifyNewMessage(),1e3!==e.code&&i(void 0,e)):u.warn("ignore onclose. caused by websocket url not ",r.thisWsUri,t)},d.onerror=function(e){u.info("On error:",e),r.onWebsocketEvent(new f.WSError({event:e,online:r.online,session:r,url:this.url}))}}else i()}e.exports=c.prototypeExtend({_events:{0:"onReqP2P",1:"onNewCfr",2:"onDelCfr",3:"onReqTkt",100:"onPing",101:"onPong",102:"onInitC",103:"onReqC",104:"onAcptC",105:"onTcklC",106:"onAnsC",107:"onTermC",300:"onEnter",301:"onExit",302:"onPub",303:"onUnpub",304:"onMems",204:"onClose",400:"onStreamControl",401:"onJoin",412:"onRoleUpdate",1002:"onRemoteControl",1003:"onRecvRemoteMessage",402:"onConfrAttrsUpdated",413:"onAdminChanged",452:"onLivecfgsChanged"},__init__:function(){var e=this;function t(){navigator.onLine?e.online=!0:e.online=!1}function n(t){e.online=!0,u.warn("online online online"),e.closed||e._reconnect(emedia.config.reconnect)}function r(t){e.online=!1,u.warn("offline offline offline"),e.__checkConnectIntervalId&&clearTimeout(e.__checkConnectIntervalId),e.__retryConnectIntervalId&&clearTimeout(e.__retryConnectIntervalId),e.__retryConnectIntervalId&&delete e.__retryConnectIntervalId,e._websocket&&e._websocket.close(1e3)}e._bufferedMessages=[],e._callbacks={},t(),window.addEventListener("online",n,!0),window.addEventListener("offline",r,!0),u.info("online status = ",e.online)},_nextWsUri:function(){var e=this,t=e.ticket.url;emedia.config.useDeployMore&&(emedia.mgr.rtc_url_config=null,emedia.mgr.rtc_url_config=new l(emedia.config.rtcConfigUrl||""),t=emedia.mgr.rtc_url_config.replace_ws(t));var n=emedia.config&&emedia.config.convertWebsocketURLOfTicket||emedia.convertWebsocketURLOfTicket;if("function"===typeof n){var r=t;t=n(t),u.warn(r,"--\x3e",t)}if(t.startsWith("/")){if(emedia.config.wsorigin)t=emedia.config.wsorigin+t;else{var i=window.location.href,o=i.startsWith("https")?"wss://":"ws://",s=i.indexOf("://")+3,a=i.indexOf("/",s),c=i.substring(s,a);t=o+c+t}u.warn("websocket url. update. {} -> {}",e.ticket.url,t)}else emedia.config.wsorigin&&u.warn("emedia.config.wsorigin invalidate. causeby server url {}",t);return t.indexOf("?")>=0?t+="&"+d++:t+="?"+d++,t},_reconnect:function(e){var t=this;function n(){u.warn("Reconnected. at ",e,t._websocket.url),t.__retryConnectIntervalId&&clearTimeout(t.__retryConnectIntervalId),t.__retryConnectIntervalId&&delete t.__retryConnectIntervalId;var n=t.newMessage().setOp(200).setSessId(t._sessionId).setTicket(t.ticket).setNickName(t.nickName||t.ticket.memName).setResource(t.resource).setExt(t.owner.ext);t.postMessage(n,(function(e){if(0==e.result)t.onEvent(new f.EnterSuccess({ip:t.owner.ip})),t.owner.onMembers(e.cver,e.mems),t.owner.onStreams(e.cver,e.streams),t.notifyNewMessage();else try{t.onEvent(new f.EnterFail({me:t.owner,cause:new f.RspFail({request:n,response:e})}))}finally{-9527!==e.result&&t.onEvent(new f.ServerRefuseEnter({failed:e.result,msg:e.msg}))}}))}function r(i){if(e<=0)return u.warn("Reconnect end. but fail.",i.url,e),void(t.__retryConnectIntervalId&&delete t.__retryConnectIntervalId);e&&(t.__retryConnectIntervalId=setTimeout((function(){t.connect(n,r,--e)}),emedia.config.reconnectDelay))}t.connect(n,r,--e)},__checkConnect:function(){var e=this;e.__checkConnectIntervalId&&clearTimeout(e.__checkConnectIntervalId),emedia.config.checkConnectIntervalMillis&&(e.__checkConnectIntervalId=setTimeout((function(){try{e.online&&!e.connected()&&(e.__retryConnectIntervalId&&u.debug("online, reconnecting..."),e.__retryConnectIntervalId||u.debug("online, but disconnect. will reconnect"),e.__retryConnectIntervalId||e._reconnect(emedia.config.reconnect))}finally{e.__checkConnect()}}),emedia.config.checkConnectIntervalMillis))},connect:function(e,t,n){var r=this,i=r.thisWsUri=r._nextWsUri();function o(){try{e.apply(r,arguments)}finally{r.__checkConnect()}}function s(e){try{t.apply(r,arguments)}finally{n||e.url!==i||r.onEvent(new f.ServerRefuseEnter({failed:-95270,msg:"sdk reconnect fail. "+i+"|"+e.url}))}}"undefined"!==typeof n&&u.warn("begin connect... at retry = ",n,i),m.call(r,o,s,n)},connected:function(e){var t=this,n=t.online&&t._websocket&&(!e||e===t._websocket.url)&&t._websocket.readyState==WebSocket.OPEN;return n},onWebsocketEvent:function(e){var t=this;t.onEvent(e)},register:function(e){if("object"===("undefined"===typeof e?"undefined":(0,i.default)(e)))for(var t in e)this.bind(t,e[t])},bind:function(e,t){var n,r=this;if(!(n=r._events[e]))throw u.error("Not supported event = ",e),"Not supported event = "+e;r[n]=t},getSessionId:function(){return this._sessionId},newMessage:function(e){return new p(e)},__modifyMessage:function(e){if(e&&e.sdp&&("string"===typeof e.sdp&&(e.sdp=c.parseJSON(e.sdp)),e.sdp.type&&(e.sdp.type=e.sdp.type.toLowerCase()),e.cctx&&(e.sdp.cctx=e.cctx)),e&&e.cands){"string"===typeof e.cands&&(e.cands=c.parseJSON(e.cands));for(var t=0;t<e.cands.length;t++)"string"===typeof e.cands[t]&&(e.cands[t]=c.parseJSON(e.cands[t])),e.cands[t].sdpMLineIndex=e.cands[t].mlineindex,e.cands[t].sdpMid=e.cands[t].mid,delete e.cands[t].mlineindex,delete e.cands[t].mid,e.cctx&&(e.cands[t].cctx=e.cctx)}if(e&&e.mems){if(!c.isArray(e.mems))return;var n=e.mems;e.mems={},c.forEach(n,(function(t,n){n.name&&(n.memName=n.name),e.mems[n.id]=n;var r=n.acptOps={};if(c.forEach(emedia.config.baseAcptOps,(function(e,t){r[t]=!0})),n.res&&c.forEach(n.res.ops,(function(e,t){r[t]=!0})),n&&n.ext)try{e.mems[n.id].ext=JSON.parse(n.ext)}catch(i){u.debug(i)}}))}if(e&&e.mem){e.mem.name&&(e.mem.memName=e.mem.name);var r=e.mem.acptOps={};if(c.forEach(emedia.config.baseAcptOps,(function(e,t){r[t]=!0})),e.mem.res&&c.forEach(e.mem.res.ops,(function(e,t){r[t]=!0})),e.mem&&e.mem.ext)try{e.mem.ext=JSON.parse(e.mem.ext)}catch(o){u.debug(o)}}if(e&&e.streams){if(!c.isArray(e.streams))return;var i=e.streams;e.streams={},c.forEach(i,(function(t,n){if(e.streams[n.id]=n,n&&n.ext)try{e.streams[n.id].ext=JSON.parse(n.ext)}catch(o){u.debug(o)}}))}if(e&&e.pubS&&e.pubS&&e.pubS.ext)try{e.pubS.ext=JSON.parse(e.pubS.ext)}catch(o){u.debug(o)}if(e&&e.ext)try{e.ext=JSON.parse(e.ext)}catch(o){u.debug(o)}return e},onMessage:function(e){var t=this;function n(e){var n=t._events[e.op],r=t[n];r?r.call(t,e):u.warn("Not supported event = ",e)}if(1001!=e.op&&!e.sessId)throw u.error("message sessId error. server evt data error"),"message sessId error. server evt data error";if(1001!=e.op&&t._sessionId&&t._sessionId!=e.sessId)throw u.error("message sessId error. server and local not equal"),"message sessId error. server and local not equal";if(1004!==e.op){if(1001==e.op&&e.arg){var r=JSON.parse(e.arg),i=r.op2;if(21==i){var o=e,s=o.result;return void t.onRequestToTalkerReply(s)}if(22==i){var a=e,d=a.result;return void t.onRequestToAdminReply(d)}}var l;e=t.__modifyMessage(e);var p=c.removeAttribute(t._callbacks,e.tsxId);if(p&&200===p.op){t._sessionId=e.sessId;var h="string"===typeof e.yourIp?e.yourIp:void 0;if("string"===typeof t._session_ip&&h!=t._session_ip&&(l=t._session_ip),u.info(t._sessionId,"ip is",h,l),t._session_ip=h,t.owner.ip=h,0===e.result){for(var m in t._bufferedMessages){var v=t._bufferedMessages[m];v.sessId||200===v.op||(v.sessId=e.sessId)}setTimeout((function(){t.notifyNewMessage()}),100),1001==e.op&&(e.cattrs||e.cstate)&&t.onConfrAttrsUpdated(e)}else{var g;while(g=t._bufferedMessages.shift())200!==g.op&&t.onMessage({op:1001,tsxId:g.tsxId,result:-9527,msg:"sdk enter fail. sdk callback. enter result = "+e.result})}}if(t.owner&&t.owner.closed)u.warn("self closed. me is "+t.owner.getMemberId()+", session_id = "+t.getSessionId()+". drop message",e);else{if(t.onEvent(new f.RecvResponse({request:p,response:e})),p&&p.__callback__&&1004!==e.op)return p.__callback__(e),void(l&&t.onWebsocketEvent(new f.NetworkChanaged({preIp:l,nowIp:t._session_ip})));e.op&&1001!=e.op?(n(e),l&&t.onWebsocketEvent(new f.NetworkChanaged({preIp:l,nowIp:t._session_ip}))):u.debug("Igron message. caused by op not found.",e)}}else n(e)},__modifyMessageForPost:function(e){if(e.cands){for(var t=[],n=e.cands,r=0;r<n.length;r++){var i;0==r&&n[r].cctx&&(e.cctx=n[r].cctx),i="string"===typeof n[r]?{type:"candidate",candidate:n[r],mlineindex:0,mid:"audio"}:{type:"candidate",candidate:n[r].candidate,mlineindex:n[r].sdpMLineIndex,mid:n[r].sdpMid},t.push((0,s.default)(i))}e.cands=t}if(e.sdp&&"string"!==typeof e.sdp){var o={type:e.sdp.type,sdp:e.sdp.sdp};e.sdp.cctx&&(e.cctx=e.sdp.cctx),e.sdp=o,e.sdp.type=e.sdp.type.toUpperCase(),e.sdp=c.stringifyJSON(e.sdp)}return e.pubS&&c.removeAttribute(e.pubS,"_located"),e.pubS&&c.removeAttribute(e.pubS,"mutedMuted"),e.pubS&&c.removeAttribute(e.pubS,"mediaStream"),e.pubS&&c.removeAttribute(e.pubS,"isRepublished"),e.pubS&&c.removeAttribute(e.pubS,"optimalVideoCodecs"),"function"===typeof e.post&&c.removeAttribute(e,"post"),e},postMessage:function(e,t,n){1002==e.op&&console.log("postMessage 1002",(0,s.default)(e));var r=this;if(e.tsxId||(e.tsxId="MSG"+Date.now()+"-"+h++),e.memId){var i=r.owner._cacheMembers[e.memId],o=e,a=o.arg,f=!1;if(a&&(a=JSON.parse(a),21!=a.op2&&22!=a.op2&&23!=a.op2&&24!=a.op2||(f=!0)),!i&&!f)return u.warn("Member not found at local. memberId = "+e.memId,e),void(t&&t({op:1001,tsxId:e.tsxId,result:-507,msg:" member not found at local. memberId = "+e.memId}));var d=e._reqOps;if(d||(d=[],d.push(e.op)),!f)for(var l in d){var p=d[l];if(!i.acptOps[p])return u.warn("Member not accept op "+p+", "+e.memId,e),void(t&&t({op:1001,tsxId:e.tsxId,result:-507,msg:" member not accept op "+p+", "+e.memId}))}}if(c.removeAttribute(e,"_reqOps"),r._sessionId&&r._sessionId!=e.sessId)return u.warn("sessionId not excepted. self._sessionId = "+r._sessionId,e),void(t&&t({op:1001,tsxId:e.tsxId,result:-9527,msg:"sessionId not excepted."}));if(r.closed)return u.warn("session closed.",e),void(t&&t({op:1001,tsxId:e.tsxId,result:-9527,msg:"session closed"}));var m=c.extend({},e);if(e=r.__modifyMessageForPost(e),!e)return u.warn("Message drop. callback success.",e),void(t&&t({op:1001,tsxId:m.tsxId,result:0,msg:"Message drop. callback success."}));200===e.op?(r._bufferedMessages.unshift(e),t&&setTimeout((function(){r._callbacks[e.tsxId]&&(u.error("Enter timeout. fail."),r.onMessage({op:1001,tsxId:e.tsxId,result:-9527,msg:"enter timeout. millis = "+emedia.config.enterTimeout}))}),emedia.config.enterTimeout)):r._bufferedMessages.push(e),t&&(r._callbacks[e.tsxId]=c.extend(e,{__callback__:t.bind(r.owner)})),r.notifyNewMessage&&r.notifyNewMessage(),n&&t&&setTimeout((function(){var e=r._callbacks[e.tsxId];e&&e.__callback__&&e.__callback__({op:1001,tsxId:m.tsxId,result:-408,msg:"Message request timeout."}),c.removeAttribute(r._callbacks,e.tsxId)}),n)},close:function(e){u.warn("sessiong closing, reason = ",e);var t=this;t.notifyNewMessage&&t.notifyNewMessage(),t.closed=!0,t.seqno=0,t._websocket&&(0==e||100==e?t._websocket.close(1e3):t._websocket.close()),t.__retryConnectIntervalId&&clearTimeout(t.__retryConnectIntervalId),t.__retryConnectIntervalId&&delete t.__retryConnectIntervalId,t.__checkConnectIntervalId&&clearTimeout(t.__checkConnectIntervalId),t.__checkConnectIntervalId&&delete t.__checkConnectIntervalId,t.owner=null,t._bufferedMessages=[],t._callbacks={},u.warn("session closed")}})},function(e,t,n){"use strict";var r=n(87),i=(r.logger,r.prototypeExtend({msg:"",__init__:function(){this.day=new Date},execTime:function(){var e=this.day.getHours();e<10&&(e="0"+e);var t=this.day.getMinutes();t<10&&(t="0"+t);var n=this.day.getSeconds();return n<10&&(n="0"+n),e+":"+t+":"+n}})),o=i.extend({_webrtcDesc:function(){this.webrtc;var e=this.webrtc.getRtcId();return e}});e.exports={Exception:i.extend(),NetworkChanaged:i.extend({message:function(){var e=this.execTime()+" : Network chanage ("+this.preIp+" -> "+this.nowIp+").";return e}}),WSClose:i.extend({message:function(){var e=this.execTime()+" WSClose: Websocket close ("+(this.retry||0)+").";return this.online||(e+=" offline."),this.event&&(e+=" wscode: "+this.event.code),this.cause&&(e+=" cause: "+this.cause.message),this.url&&(e+=" url: "+this.url),e+=" retry: "+(this.retry||0),this.session&&this.session.getSessionId()&&(e=e+", sess = "+this.session.getSessionId()),e}}),WSError:i.extend({message:function(){var e=this.execTime()+" WSError: Websocket error. ready state:"+(this.event.srcElement&&this.event.srcElement.readyState||this.event.currentTarget.readyState)+". online = "+this.online;return this.session&&this.session.getSessionId()&&(e=e+", sess = "+this.session.getSessionId()),this.url&&(e+=" url: "+this.url),e}}),WSConnected:i.extend({message:function(){var e=this.execTime()+" WSConnected: Websocket success. ready state:"+(this.event.srcElement&&this.event.srcElement.readyState||this.event.currentTarget.readyState);return this.session&&this.session.getSessionId()&&(e=e+", sess = "+this.session.getSessionId()),e}}),ICEChanage:o.extend({message:function(){return this.execTime()+" ICEChanage: "+this._webrtcDesc()+" state: "+this.state}}),AddIceCandError:o.extend({message:function(){return this.execTime()+" AddIceCandError: "+this._webrtcDesc()+", add cand error"}}),ICEConnectFail:o.extend({message:function(){return this.execTime()+" ICEConnectFail: "+this._webrtcDesc()+" failed"}}),ICEConnected:o.extend({message:function(){return this.execTime()+" ICEConnected: "+this._webrtcDesc()+" connected"}}),ICEDisconnected:o.extend({message:function(){return this.execTime()+" ICEDisconnected: "+this._webrtcDesc()+" disconnected"}}),ICEClosed:o.extend({message:function(){return this.execTime()+" ICEClosed: "+this._webrtcDesc()+" closed"}}),ICERemoteMediaStream:o.extend({message:function(){return this.execTime()+" ICERemoteMediaStream: "+this._webrtcDesc()+" got remote stream"}}),StreamState:i.extend({message:function(){return this.execTime()+" StreamState:  stream "+this.stream.id+" state: "+this.state+" "+this.msg},iceFail:function(){this.state=1,this.msg="network anomaly. media lost"}}),OpenMediaError:i.extend({message:function(){return this.execTime()+" OpenMediaError:  open media error. caused by "+(this.event.name?this.event.name:this.event.message?this.event.message:this.event.toString())}}),Hangup:i.extend({message:function(){return this.self?"hangup id = "+(this.self.id||"--")+" reason："+(this.reason||0):this.execTime()+" Hangup: "+(this.parnter&&(this.parnter.name||this.parnter.id||" ")||"")+" hangup, reason："+(this.reason||0)}}),ServerRefuseEnter:i.extend({message:function(){return this.execTime()+" ServerRefuseEnter: server refuse, cause："+this.failed+", msg:"+(this.msg||"")}}),RspFail:i.extend({__init__:function(){this.day=new Date,this.failed=this.response.result,this.msg=this.response.msg||this.response.message||"--"},message:function(){return this.execTime()+" RspFail: "+this.request.tsxId+", "+(this.response.sessId||"--")+" op: "+this.request.op+", cause: "+this.failed+" "+this.msg}}),RecvResponse:i.extend({__init__:function(){this.day=new Date,this.failed=this.response.result,this.msg=this.response.msg},message:function(){return this.request?this.execTime()+" RecvResponse: "+(this.request&&this.request.tsxId)+", "+(this.response.sessId||"--")+" op: "+(this.request&&this.request.op)+", cause: "+this.failed+" "+this.msg:this.execTime()+" RecvMessage: "+(this.response&&this.response.tsxId)+", "+(this.response.sessId||"--")+" op: "+(this.response&&this.response.op)+" "+this.msg}}),EnterFail:i.extend({message:function(){return this.execTime()+" EnterFail: enter fail："+(this.cause?this.cause.message():"unkown")}}),EnterSuccess:i.extend({message:function(){return this.execTime()+" EnterSuccess: enter success "+(this.ip?", ip = "+this.ip:"")}}),PushSuccess:i.extend({message:function(){return this.execTime()+" PushSuccess: push success, streamId = "+this.stream.id+", "+this.stream.optimalVideoCodecs+", webrtc = "+this.stream.rtcId}}),PushFail:i.extend({message:function(){return this.execTime()+" PushFail: push fail, streamId = "+this.stream.id+", "+this.stream.optimalVideoCodecs+", webrtc = "+this.stream.rtcId+" cause："+(this.cause?this.cause.message?this.cause.message():this.cause:"unkown")}}),RemoteControlFail:i.extend({message:function(){return this.execTime()+" RemoteControlFail: "+(this.type||"remote control")+" fail, "+(this.stream?this.stream.id:"")+" failed = "+this.failed+" cause："+(this.cause?this.cause.message?this.cause.message():this.cause:"unkown")}}),SubSuccess:i.extend({message:function(){return this.execTime()+" SubSuccess: sub success, streamId = "+this.stream.id+", "+this.stream.vcodes+", webrtc = "+this.stream.rtcId}}),SubFail:i.extend({message:function(){return this.execTime()+" SubFail: sub fail, streamId = "+this.stream.id+", "+this.stream.vcodes+", webrtc = "+this.stream.rtcId+" cause："+(this.cause?this.cause.message?this.cause.message():this.cause:"unkown")}}),SubFailNotSupportVCodes:i.extend({message:function(){return this.execTime()+" SubFailNotSupportVCodes: sub fail, streamId = "+this.stream.id+" cause："+(this.cause?this.cause.message?this.cause.message():this.cause:"unkown")}}),SubFailSafariNotAllowSubBeforePub:i.extend({message:function(){return this.execTime()+" SubFailSafariNotAllowSubBeforePub: sub fail, streamId = "+this.stream.id+" cause：Safari without access to capture devices, WebKit only exposes Server Reflexive and TURN ICE candidates, which expose IPs that could already be gathered by websites."}}),SwitchVCodes:i.extend({message:function(){return this.execTime()+" SwitchVCodes: pub streamId = "+this.stream.id}}),CurrentCalling:i.extend({message:function(){return this.execTime()+" CurrentCalling: warn! current calling..."}}),OpenDesktopMedia:i.extend({message:function(){return this.execTime()+" OpenDesktopMedia: shared desktop, desktopStreamId = "+desktopStreamId}}),OpenDesktopMediaAccessDenied:i.extend({message:function(){return this.execTime()+" OpenDesktopMediaAccessDenied: shared desktop not allow"}}),ShareDesktopExtensionNotFound:i.extend({message:function(){return this.execTime()+" ShareDesktopExtensionNotFound: shared desktop plugin required"}}),OtherDeviceAnswer:i.extend({message:function(){return this.execTime()+" other device answer, webrtc = "+this.rtcId}}),AudioMixerStreamNotAllowSub:i.extend({message:function(){return this.execTime()+" audio mixer stream not allow sub, webrtc = "+this.rtcId+", streamId = "+this.stream.id}}),AudioMixerStreamNotAllowOnlySubVideo:i.extend({message:function(){return this.execTime()+" audio mixer stream not allow only sub video, webrtc = "+this.rtcId+", streamId = "+this.stream.id}}),AudioMixerStreamRepeatPublish:i.extend({message:function(){return this.execTime()+" audio mixer stream repeat publish"}})}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n(80),i=a(r),o=n(152),s=a(o);function a(e){return e&&e.__esModule?e:{default:e}}function c(e){this.rtcconfig=void 0,this.rtcConfigUrl=e,this.get_rtcconfig()}c.prototype={get_rtcconfig:function(){var t={url:"https://rs.easemob.com/easemob/rtcconfig.json",async:!1};this.rtcConfigUrl&&(t.url=this.rtcConfigUrl);var n=this,r=void 0;try{e.ajax((0,s.default)({},t,{success:function(e){console.log("get_rtcconfig success"),e&&(0,i.default)(e).length>0&&(n.rtcconfig=e,r=e)},error:function(e){return console.error("DeployMore get error",e),e}}))}catch(o){return}return r},replace_ws:function(e){if(this.rtcconfig&&this.rtcconfig.ws){var t="wss://"+this.rtcconfig.ws+"/",n=/wss.*com\//;return e.replace(n,t)}return e},_get_info_from_candifate:function(e){if(!e)return{};var t={};return e=e.split(" "),t.ip=e[4],t.port=e[5],t},_can_replace:function(e,t,n){return!!(e&&t&&n)&&(!!e.src.ip&&(e.src.ip==t&&!(e.src.min_port>n||e.src.max_port<n)))},_replace_candidate:function(e){var t=this._get_info_from_candifate(e),n=t.ip,r=t.port,i=this;return this.rtcconfig.rtc.candidate_map.map((function(t){if(i._can_replace(t,n,r)){var o=t.dst.ip,s=Number(r)-Number(t.src.min_port),a=Number(t.dst.min_port)+Number(s),c=e.split(" ");c[4]=o,c[5]=a,e=c.join(" ")}})),e},replace_candidates:function(e){if(!this.rtcconfig)return e;var t=this;return e=e.map((function(e){return e&&e.candidate?(e.candidate=t._replace_candidate(e.candidate),e):e})),e},replace_trun_url:function(e){if(this.rtcconfig&&this.rtcconfig.turn){var t=e.iceServers;if(!t)return e;if(t instanceof Array==0)return e;var n=this.rtcconfig.turn;return t=t.map((function(e){e.url&&(e.url="turn:"+n)})),e}return e}},t.default=c}).call(this,n(5))},function(e,t,n){"use strict";t.__esModule=!0;var r=n(115),i=o(r);function o(e){return e&&e.__esModule?e:{default:e}}t.default=i.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}},function(e,t,n){"use strict";var r=n(115),i=a(r),o=n(2),s=a(o);function a(e){return e&&e.__esModule?e:{default:e}}var c=n(87),u=c.tagLogger("Me"),f=n(154),d=n(150),l=n(157),p=f.extend({__init__:function(){var e=this;if(e._session||e.sessionFactory&&(e._session=e.sessionFactory()),!e._session)throw u.error("Require session"),"Require session";e._cver=0,e._cacheMembers={},e._cacheStreams={},e._streamAutomators={},e._mediaMeters={},e._openedRtcMediaStreams={},e._linkedStreams={},e._maybeNotExistStreams={},e._records={},e._ices={},e.audioMixers={},e.closed=!1,e._nextStreamSeqno=0,e.getMediaMeterIntervalMillis=e.getMediaMeterIntervalMillis||emedia.config.getMediaMeterIntervalMillis},getCurrentMembers:function(){var e=this,t=[];return c.forEach(e._cacheMembers,(function(e,n){var r=c.extend(!0,{},n);t.push(r)})),t},newStream:function(e){var t=this;return new l(e,{__init__:function(){var e=this;if(e.rtcId||e._webrtc&&(e.rtcId=e._webrtc.getRtcId()),e._webrtc||e.rtcId&&(e._webrtc=t._ices[e.rtcId]),e.__create_id=t._nextStreamSeqno++,e.memId&&!e.owner&&(e.owner=c.extend({},t._cacheMembers[e.memId]),!e.owner&&!e.located()))throw u.error("Remote stream, not owner. it = ",e.id),"Remote stream, not owner. it = "+e.id}})},getConfrId:function(){return this.ticket.confrId},isCaller:function(){var e=this;return e.isP2P()&&e.ticket.caller==e.ticket.memName},isCallee:function(){var e=this;return e.isP2P()&&e.ticket.callee==e.ticket.memName},isP2P:function(){var e=this;return e.ticket&&("P2P"==e.ticket.type||"p2p"==e.ticket.type)},isConfr:function(){var e=this;return e.ticket&&("CONFR"==e.ticket.type||"confr"==e.ticket.type)},onEvent:function(e){},join:function(e,t){var n=this;emedia.requireTrustBeforeJoin()?n.someBrowsersRequireGetUserMedia((function(){n._join(e,t)}),t):n._join(e,t)},_join:function(e,t){u.debug("begin join ...");var n,r=this;if(console.log("Attendee self",r),r._memberId)return u.warn("Had joined. igrone it"),void(e&&e(r.memId));function i(e){try{if(e instanceof d.WSClose&&e.retry)return;e instanceof d.EnterFail||(e=new d.EnterFail({attendee:r,cause:e})),r.onEvent(e),t&&t(e)}finally{}}function o(t){if(0==t.result){r.reflushSupportVCodes(t.vcodes),r.setMemberId(t.memId),r.role=t.role,r.onEvent(new d.EnterSuccess({ip:r.ip})),e&&e(t.memId);try{r.__rtc_cfg=t.rtcCfg,"string"===typeof t.rtcCfg&&(r.__rtc_cfg=JSON.parse(t.rtcCfg))}finally{r.onMembers(t.cver,t.mems),r.onStreams(t.cver,t.streams)}}else try{i(new d.RspFail({request:n,response:t}))}finally{-9527!==t.result&&r.onEvent(new d.ServerRefuseEnter({failed:t.result,msg:t.msg}))}}function s(){n=r.newMessage().setOp(200).setTicket(r.ticket).setNickName(r.nickName||r.ticket.memName).setResource(r.resource).setExt(r.ext),r.postMessage(n,o)}r.connect(s,i),u.debug("join",r.ticket.url)},withpublish:function(e){var t,n=this;if(!e||!e.localStream)throw u.error("pubS null or stream not open"),"pubS null or stream not open";var r,i=e&&e.localStream;function o(o,s){if(1===arguments.length&&(s=o,o=void 0),n._memberId)return u.warn("Had joined. igrone it"),void(o&&o(n.memId));function a(e){try{if(e instanceof d.WSClose&&e.retry)return;e instanceof d.EnterFail||(e=new d.EnterFail({attendee:n,cause:e})),n.onEvent(e),s&&s(e)}finally{emedia.stopTracks(i),r&&n.closeWebrtc(r.getRtcId())}}var c=n.getOptimalVideoCodecs();function f(i){if(0==i.result){n.reflushSupportVCodes(i.vcodes),n.setMemberId(i.memId),n.role=i.role,n.onEvent(new d.EnterSuccess({ip:n.ip}));var s=n.newStream(e);s.updateAttributes({_localMediaStream:e.localStream,rtcId:r.getRtcId(),_webrtc:r,id:i.streamId,csrc:i.csrc,owner:{id:i.memId,nickName:n.nickName,name:n.sysUserId,ext:n.extObj},optimalVideoCodecs:c}),o&&o(i.memId,s),r.useIp=n.ip,n.onEvent(new d.PushSuccess({stream:s,hidden:!0})),i.sdp&&n.ansC(r.getRtcId(),i.sdp),i.cands&&n.tcklC(r.getRtcId(),i.cands);try{n.__rtc_cfg=i.rtcCfg,"string"===typeof i.rtcCfg&&(n.__rtc_cfg=JSON.parse(i.rtcCfg)),n.__rtc_cfg&&n.__rtc_cfg.iceServers&&n.__rtc_cfg.iceServers.length>0&&(u.warn("Server rsp one rtc cfg. publish will republish"),n._service&&setTimeout((function(){n._service._republish(s)}),200))}finally{n.onMembers(i.cver,i.mems),n.onStreams(i.cver,i.streams)}}else try{a(new d.RspFail({request:t,response:i}))}finally{-9527!==i.result&&n.onEvent(new d.ServerRefuseEnter({failed:i.result,msg:i.msg}))}}function l(){u.debug("enter and pubs");var i,o,s=e.localStream;2===e.type&&(i={offerToReceiveAudio:!0,offerToReceiveVideo:!1},o={subSVideo:!1,subSAudio:!0}),r=n.createWebrtc({_rtcId:e.rtcId,optimalVideoCodecs:c,offerOptions:i,subArgs:o,vbitrate:e.vbitrate||e.constaints&&e.constaints.video&&e.constaints.video.bitrate,abitrate:e.abitrate||e.constaints&&e.constaints.audio&&e.constaints.audio.bitrate},e.iceRebuildCount),n.setLocalStream(s,r.getRtcId()),n.doOffer(r.getRtcId(),(function(i){t=n.newMessage().setOp(200).setTicket(n.ticket).setNickName(n.nickName||n.ticket.memName).setResource(n.resource).setSdp(i).setRtcId(r.getRtcId()).setPubS(e).setExt(n.ext),n.postMessage(t,f)}))}n.connect(l,a),u.debug("join",n.ticket.url)}return{join:o}},push:function(e,t,n,r){u.debug("begin push ...");var i,o=this;if(2===arguments.length&&(n=t,t=void 0),!e||!e.localStream)throw u.error("pubS or stream open"),"pubS or stream open";var s,a=e.localStream;function c(t){try{var i=o.newStream(e);i.updateAttributes({_localMediaStream:e.localStream,_webrtc:s,rtcId:s&&s.getRtcId(),owner:{id:o.getMemberId(),nickName:o.nickName,name:o.sysUserId,ext:o.extObj}});t=new d.PushFail({stream:i,cause:t,hidden:r&&!0===t.hidden});o.onEvent(t),t.hidden||n&&n(t)}finally{a&&!0!==t.hidden&&emedia.stopTracks(a),s&&o.closeWebrtc(s.getRtcId(),!0===t.hidden)}}if(e.rtcId||2!==e.type||emedia.config.allowRepeatAudioMixerPublish||!o._service.hasAudioMixers()){var f=e.optimalVideoCodecs||o.getOptimalVideoCodecs();p(e),u.debug("push",o.ticket.url)}else c(new d.AudioMixerStreamRepeatPublish);function l(n,r){if(0==r.result){var s=o.newStream(e);s.updateAttributes({_localMediaStream:e.localStream,_webrtc:n,rtcId:n.getRtcId(),id:r.streamId,csrc:r.csrc,owner:{id:o.getMemberId(),nickName:o.nickName,name:o.sysUserId,ext:o.extObj},optimalVideoCodecs:f}),s.id&&2===s.type&&(o.audioMixers[s.id]=s);try{o.onEvent(new d.PushSuccess({stream:s,hidden:!0}))}finally{r.sdp&&o.ansC(n.getRtcId(),r.sdp),r.cands&&o.tcklC(n.getRtcId(),r.cands),t&&t(s)}}else c(new d.RspFail({request:i,response:r,hidden:!0===r.retrying}))}function p(e){u.debug("pubs");var t,n,r=e.localStream;if(2===e.type&&(t={offerToReceiveAudio:!0,offerToReceiveVideo:!1},n={subSVideo:!1,subSAudio:!0}),s=o.createWebrtc({_rtcId:e.rtcId,optimalVideoCodecs:f,offerOptions:t,subArgs:n,vbitrate:e.vbitrate||e.constaints&&e.constaints.video&&e.constaints.video.bitrate,abitrate:e.abitrate||e.constaints&&e.constaints.audio&&e.constaints.audio.bitrate},e.iceRebuildCount),o.setLocalStream(r,s.getRtcId()),e.constaints&&e.constaints.video){var a=e.constaints.video,c=a.width,d=a.height;if(c&&d){var p=c.exact||c.min,h=d.exact||d.min,m={w:p,h:h};e.resolution=m}}o.doOffer(s.getRtcId(),(function(t){i=o.newMessage().setOp(102).setRtcId(s.getRtcId()).setSdp(t).setPubS(e),o.postMessage(i,(function(e){l(s,e)}))}))}},isSafari:function(){return emedia.isSafari},someBrowsersRequireGetUserMedia:function(e,t){var n=this;if(emedia.youInSomeBrowsers()&&!emedia._yetGetUserMedia){if(!0===n.__tryingOpenMedia)n.__tryingOpenMediaWaitSuceess=n.__tryingOpenMediaWaitSuceess||[],n.__tryingOpenMediaWaitFail=n.__tryingOpenMediaWaitFail||[],"function"===typeof e&&n.__tryingOpenMediaWaitSuceess.push(e),"function"===typeof t&&n.__tryingOpenMediaWaitFail.push(t);else{var r=function(t,r){emedia._yetGetUserMedia=!0,emedia.stopTracks(r),setTimeout((function(){n.__tryingOpenMedia=!1,e&&e.apply(n),n.__tryingOpenMediaWaitSuceess&&c.forEach(n.__tryingOpenMediaWaitSuceess,(function(e,t){t.apply(n)})),n.__tryingOpenMediaWaitSuceess=[],n.__tryingOpenMediaWaitFail=[]}),300)},i=function(e){n.__tryingOpenMedia=!1,u.error("Some browsers must getUserMedia, gather cands. now try get audio. fail. subfail"),t&&t.call(n,e),n.__tryingOpenMediaWaitFail&&c.forEach(n.__tryingOpenMediaWaitFail,(function(t,r){r.call(n,e)})),n.__tryingOpenMediaWaitSuceess=[],n.__tryingOpenMediaWaitFail=[]};n.__tryingOpenMedia=!0,n._service.__getUserMedia({audio:!0},r,(function(e){n._service.__getUserMedia({video:!0},r,i)}))}return!0}return!1},createWebrtcAndSubscribeStream:function(e,t,n,r){var i=this;t||(t={});var o=i._cacheStreams[e],s=i._cacheMembers[o.memId],a=o;function f(n){u.warn("sub stream error",e,n),g&&a._webrtc&&a._webrtc.setSubArgs(g),g&&a.updateAttributes({subArgs:g}),n=new d.SubFail({stream:a,hidden:!0===n.hidden,cause:n}),t&&t.onEvent&&t.onEvent(n),i.onEvent&&i.onEvent(n)}function l(){a.updateAttributes(a.subArgs)}r=r||a.subArgs||{subSVideo:!0,subSAudio:2!==o.type};var p=o.vcodes||[],h=s&&s.vcodes||[],m=i.supportVCodes,v=i._getOptimalVideoCodecsSubset(p,h,m);r=r||a.subArgs;var g=a.subArgs,y=!(a.vcodes&&a.vcodes.length>0);emedia.isSafari&&(y=y||!!a.voff);var b={offerToReceiveAudio:!0,offerToReceiveVideo:r.subSVideo&&!y};function _(){var o=i.createWebrtc({iceServerConfig:n,optimalVideoCodecs:v,offerOptions:b,onGotMediaStream:function(e){t.onGotRemote&&t.onGotRemote(a)}},a.iceRebuildCount),f=o.getRtcId();u.warn(f," sub stream ",e,v),a.updateAttributes({_webrtc:o,rtcId:f,owner:c.extend({},s)}),r&&a._webrtc&&a._webrtc.setSubArgs(r),r&&a.updateAttributes({subArgs:r})}b.offerToReceiveAudio||b.offerToReceiveVideo||u.warn("offerToReceiveAudio == false and offerToReceiveVideo == false"),i.someBrowsersRequireGetUserMedia((function(){_(),i.offerCall(a.rtcId,null,e,f,l)}),(function(t){u.error("Some browsers must getUserMedia, gather cands. now try get audio. fail. subfail",e),f(t)}))||(_(),i.offerCall(a.rtcId,null,e,f,l))},_getOptimalVideoCodecsSubset:function(e,t,n){var r=this,i=[];if(e&&e.length>0&&n[e[0]]&&i.push(e[0]),0==i.length)for(var o=0;o<r._orderVCodes.length;o++)c.forEach(t,(function(e,t){t==r._orderVCodes[o]&&i.push(t)}));return i},subscribeStream:function(e,t,n,r,i){var o=this,s=o._ices[e],a=o._cacheStreams[t],u=o._cacheMembers[a.memId],f=a;f.updateAttributes({_webrtc:s,rtcId:e,owner:c.extend({},u)});var l=f.subArgs;if(r=r||{subSVideo:!0,subSAudio:!0},f.updateAttributes({subArgs:f.subArgs||{subSVideo:!0,subSAudio:!0}}),f._webrtc&&f._webrtc.setSubArgs(f._webrtc.subArgs||{subSVideo:!0,subSAudio:!0}),!f.subArgs.subSVideo&&r.subSVideo&&!f.voff){var p=a.vcodes,h=u.vcodes,m=o.supportVCodes;o._getOptimalVideoCodecsSubset(p,h,m)}r&&f._webrtc&&f._webrtc.setSubArgs(r),r&&f.updateAttributes({subArgs:r});var v=o.newMessage().setOp(205).setRtcId(e).setSubSId(t);r&&c.extend(v,r),o.postMessage(v,(function(e){if(0!=e.result){l&&f._webrtc&&f._webrtc.setSubArgs(l),l&&f.updateAttributes({subArgs:l});var t=new d.SubFail({stream:f,cause:new d.RspFail({request:v,response:e})});return n&&n(t),void o.onEvent(t)}f.updateAttributes(f.subArgs);t=new d.SubSuccess({stream:f,hidden:!0});o._updateRemoteStream(f,f._webrtc.getRemoteStream()),o.onEvent(t),"function"===typeof i&&i()}))},unsubscribeStream:function(e){var t=this,n=t._cacheStreams[e],r=n._webrtc&&n._webrtc.getRtcId();if(r){try{var i=t.newMessage().setOp(206).setRtcId(r).setSubSId(e);t.postMessage(i)}finally{t.closeWebrtc(r)}return r}},onEnter:function(e,t){var n=this;if(e&&(n._cver=e),t&&!n._cacheMembers[t.id]){n._cacheMembers[t.id]=t;var r={};t.res&&t.res.vcodes&&t.res.vcodes.length>0&&c.forEach(t.res.vcodes,(function(e,t){r[t]||(r[t]=!0,n.supportVCodes[t]&&n.supportVCodes[t]++)})),n.onAddMember(c.extend({},t))}},_onFinally:function(){var e=this;e._cacheMembers={},e._cacheStreams={},e._linkedStreams={},e._ices={},e._maybeNotExistStreams={};var t=[];if(c.forEach(e._openedRtcMediaStreams,(function(e,n){!1!==n.active&&t.push(n)})),t.length>0)for(var n=0;n<t.length;n++)try{var r=t[n];u.info("exit, close stream = ",r.id),emedia.stopTracks(r)}catch(i){u.error(i)}u.warn("finally. all clean.")},_onRoleUpdate:function(e,t){var n=this;u.info("Role ",e," <-",n.role),u.info(t),n.role=e,n.roleToken=t,n.onRoleUpdate&&n.onRoleUpdate(e,t)},onExit:function(e,t,n){var r=this;if(e&&(r._cver=e),t!=r.getMemberId()){var i=r._cacheMembers[t];i&&(i.res&&i.res.vcodes&&i.res.vcodes.length>0&&c.forEach(i.res.vcodes,(function(e,t){r.supportVCodes[t]--})),r._onRemoveMember(i,n),r.onEvent(new d.Hangup({reason:n,parnter:i})))}else{u.warn("Me exit. ",n,t);try{r.closed||r.close(n)}catch(o){r.onEvent(new d.Hangup({reason:n,self:{id:r._memberId}})),r.onMeExit&&r.onMeExit(n),u.warn(o)}}},onPub:function(e,t,n){var r=this;if(!r._cacheMembers[t])throw u.error("No found member. when pub"),"No found member. when pub";var i=r.newStream(n),o=r._cacheStreams[n.id];if(e&&(r._cver=e),o&&i.sver!==o.sver)return u.info("Onpub. the steam ",o.id," republish. sver ",o.sver,i.sver),!i||i.aoff===o.aoff&&i.voff==o.voff||r.onStreamControl(void 0,n.id,i.voff,i.aoff),c.extend(o,i),void r._onRepublishStream(o);var s=i;return s.updateAttributes({owner:r._cacheMembers[t]}),r._cacheStreams[n.id]=s,r._onAddStream(r.newStream(s)),r.autoSub&&r.createWebrtcAndSubscribeStream(n.id,{onGotRemote:function(e){}}),s},onUnpub:function(e,t,n){var r=this,i=r._cacheStreams[n];r._onRemovePubstream(r._cacheMembers[t],i),e&&(r._cver=e)},onClose:function(e,t,n){var r=this;try{r.close(n||0)}finally{r.onConfrClose&&r.onConfrClose(t,n)}},__getWebrtcFor:function(e){var t=this,n=t._cacheStreams[e]&&t._cacheStreams[e]._webrtc;return n&&n.getRtcId()},_getWebrtc:function(e){var t=this,n=t._cacheStreams[e]&&t._cacheStreams[e]._webrtc;return n},_updateRemoteStream:function(e,t){e.located()&&2===e.type?emedia.enableAudioTracks(t,!0):emedia.enableAudioTracks(t,!e.aoff&&!(e.subArgs&&!1===e.subArgs.subSAudio)),emedia.enableVideoTracks(t,!e.voff&&!(e.subArgs&&!1===e.subArgs.subSVideo))},onStreamControl:function(e,t,n,r,i){var o=this,s=o._cacheStreams[t];s.updateAttributes({voff:n,aoff:r});var a=s._webrtc;a&&a._remoteStream&&o._updateRemoteStream(s,a._remoteStream);var c=o.newStream(s);o.onUpdateStream&&o.onUpdateStream(c,new c.Update({voff:n,aoff:r})),e&&(o._cver=e),i&&s.updateAttributes({sver:i}),emedia.isSafari&&!n&&a&&!a.closed&&a.offerOptions&&!a.offerOptions.offerToReceiveVideo&&(u.warn("stream video turn on. but sub not video, will close it, repsub stream",a.getRtcId(),a.__id,t),o.closeWebrtc(a.getRtcId(),!0,!1),o.createWebrtcAndSubscribeStream(t,{onGotRemote:function(e){}},void 0,s.subArgs))},aoff:function(e,t,n){var r=this,i=r.__getWebrtcFor(e.id);if(!i)throw u.error("pubS not publish",e.id),"pubS not publish"+e.id;var o=r._linkedStreams[e.id];o.updateAttributes({aoff:t}),e.updateAttributes({aoff:t});var s=r.newMessage().setOp(400).setRtcId(i).setVoff(e.voff).setAoff(t);r.postMessage(s,n),r.onUpdateStream&&r.onUpdateStream(e,new e.Update({aoff:t}))},voff:function(e,t,n){var r=this,i=r.__getWebrtcFor(e.id);if(!i)throw u.error("pubS not publish",e.id),"pubS not publish"+e.id;var o=r._linkedStreams[e.id];o.updateAttributes({voff:t}),e.updateAttributes({voff:t});var s=r.newMessage().setOp(400).setRtcId(i).setVoff(t).setAoff(e.aoff);r.postMessage(s,n),r.onUpdateStream&&r.onUpdateStream(e,new e.Update({voff:t}))},startRecord:function(e,t){var n=this,r=e.rtcId,i=n.newMessage().setOp(500).setRtcId(r).setFlag(1);n.postMessage(i,(function(i){u.warn("record ",r,i.result,i.msg),t&&t(0===i.result),0===i.result&&(n._records[e.id]=c.extend(!1,{},e))}))},stopRecord:function(e,t){var n=this,r=e.rtcId,i=n.newMessage().setOp(500).setRtcId(r).setFlag(0);n.postMessage(i,(function(e){u.warn("stop record ",r,e.result,e.msg),t&&t(0===e.result)})),n._records[e.id]&&c.removeAttribute(n._records,e.id)},onMembers:function(e,t){var n=this,r=[];c.forEach(n._cacheMembers,(function(e,n){t[e]||r.push(n)})),c.forEach(r,(function(e,t){n.onExit(void 0,t.id)}));var i=[];c.forEach(t,(function(e,t){(t.name&&t.name!=n.memName||!t.name&&e!=n.getMemberId())&&(n._cacheMembers[e]||i.push(t),n._cacheMembers[e]&&c.extend(n._cacheMembers[e],t))})),c.forEach(i,(function(e,t){n.onEnter(void 0,t)})),e&&(n._cver=e)},onStreams:function(e,t){var n=this,r=[];c.forEach(n._cacheStreams,(function(e,n){n.located()||t[e]||r.push(n)})),c.forEach(r,(function(e,t){n.onUnpub(void 0,t.memId,t.id)}));var i=[];c.forEach(t,(function(e,t){(t.memName&&t.memName!=n.memName||!t.memName&&t.memId!=n.getMemberId())&&(n._cacheStreams[e]||i.push(t),n._cacheStreams[e]&&c.extend(n._cacheStreams[e],t))})),c.forEach(i,(function(e,t){n.onPub(void 0,t.memId,t)})),c.forEach(n._cacheStreams,(function(e,r){var i;r.located()||(i=t[e]),!i||i.aoff===r.aoff&&i.voff==r.voff||n.onStreamControl(void 0,e,i.voff,i.aoff),i&&i.sver!==r.sver&&(c.extend(r,i),n._onRepublishStream(r))})),e&&(n._cver=e)},_onRemoveMember:function(e,t){var n=this;u.info("remove",e,t);var r=[];c.forEach(n._cacheStreams,(function(t,n){(n.memId||n.owner&&n.owner.id)===e.id&&r.push(n)})),c.forEach(r,(function(e,r){n._onRemovePubstream(r.owner,r,t)})),c.removeAttribute(n._cacheMembers,e.id),n.onRemoveMember&&n.onRemoveMember(e,t)},_onAddStream:function(e){u.info("add stream ",e.id),u.debug("add stream ",e);var t=this;t.onAddStream(e)},_onRemovePubstream:function(e,t,n){var r=this;if(t&&0!=t.id)try{var i=c.removeAttribute(r._mediaMeters,t.id);i&&i._finally()}finally{o(t)}function o(e){2===e.type&&(c.removeAttribute(r.audioMixers,e.id),e.remotePlayAudioObject&&document.body.removeChild(e.remotePlayAudioObject)),n||(n="Unpub"),e&&!e.closeReason&&e.updateAttributes({closeReason:n});r.unsubscribeStream(e.id),c.removeAttribute(r._cacheStreams,e.id);if(r._streamAutomators&&c.removeAttribute(r._streamAutomators,e.id),r._monitSoundChanagedStreams&&c.removeAttribute(r._monitSoundChanagedStreams,e.id),r.onRemoveStream){e=r.newStream(e);r.onRemoveStream(e)}}},_onRepublishStream:function(e){var t=this;if(!t._ices[e.rtcId]&&!emedia.subscribed(e)||t._maybeNotExistStreams[e.id])t.onUpdateStream(e);else{t.unsubscribeStream(e.id);t.createWebrtcAndSubscribeStream(e.id,{onGotRemote:function(e){}})}},_onRecvRemoteMessage:function(e,t,n){var r=this;u.debug("Recv remote message",e,t);var i,o=r._cacheMembers[e];try{i=JSON.parse(t)}catch(s){}r.onRecvRemoteMessage&&r.onRecvRemoteMessage(o||e,i||t,n)},_onSoundChanage:function(e,t,n){emedia.config._printSoundData&&u.info("Stream id "+t.id+", meter "+(n&&n.instant.toFixed(2)+" "+n.slow.toFixed(2)+" "+n.clip.toFixed(2)+" "+(n.trackAudioLevel||"--")+" "+(n.trackTotalAudioEnergy||"--"))),n||(n={instant:0,slow:0,clip:0}),emedia.config.logVolumeWhenInstantGE&&emedia.config.logVolumeWhenInstantGE>0&&n.instant>=emedia.config.logVolumeWhenInstantGE&&n.instant<3*emedia.config.logVolumeWhenInstantGE&&u.info("Stream id "+t.id+", webrtc = "+(t._webrtc?t._webrtc.getRtcId():"null")+", media streamId = "+(t.getMediaStream()?t.getMediaStream().id:"null")+", instant >= "+emedia.config.logVolumeWhenInstantGE+", meter instant="+n.instant+", slow="+n.slow+", clip="+n.clip);var r=this;0===n.instant&&(n.instant=n.trackAudioLevel||n.trackTotalAudioEnergy||0),r.onSoundChanage(e,t,n),r._service._judgeTalking(n)&&r.onTalking(e,t,n)},onAddMember:function(e){},onRemoveMember:function(e,t){},onAddStream:function(e){},onRemoveStream:function(e){},onUpdateStream:function(e,t){},onRecvRemoteMessage:function(e,t){},onSoundChanage:function(e,t,n){},onTalking:function(e,t,n){},_sendRequestMessage:function(e){if(e){var t=this,n=function(){var e="";for(var n in t._cacheMembers){var r=t._cacheMembers[n];if(r.role==emedia.mgr.Role.ADMIN){e=r.id;break}}return e},r=n();if(r){var o=this._memberId,a=this.memName,c=this.nickName,u=this.newMessage(),f={op:1002,memId:r,arg:(0,s.default)({op2:e,memId:o,memName:a,nickName:c||a}),tsxTime:(new Date).getTime(),_reqOps:["1002"+e]};(0,i.default)(u,f),this.postMessage(u)}else console.warn("this confrence have not admin")}},requestToTalker:function(){this._sendRequestMessage(21)},_send_action_request_message:function(e,t,n){if(t&&e&&void 0!==n){var r=t.tsxId,o=t.arg,a=o.memId,c=this.newMessage(),u={op:1001,arg:(0,s.default)({op2:e,memId:a}),memId:a,result:n,tsxId:r,_reqOps:["1002"+e]};(0,i.default)(c,u),this.postMessage(c)}},refuseRequestToTalker:function(e){this._send_action_request_message(21,e,1)},refuseRequestToAdmin:function(e){this._send_action_request_message(22,e,1)},requestToAdmin:function(){this._sendRequestMessage(22)},_sendControlAudioMessage:function(e,t){if(e&&t){var n=this.newMessage(),r={op:1002,memId:e,arg:(0,s.default)({op2:t,memId:e}),tsxTime:(new Date).getTime(),_reqOps:[100223,100224]};(0,i.default)(n,r),this.postMessage(n)}},muteBymemberId:function(e){this._sendControlAudioMessage(e,23)},unmuteBymemberId:function(e){this._sendControlAudioMessage(e,24)}});e.exports=p},function(e,t,n){"use strict";var r=n(87),i=r.tagLogger("Member"),o=n(150),s=n(155);e.exports=r.prototypeExtend({__init__:function(){var e=this;if(!e._session)throw i.error("Require session"),"Require session";e.closed=!1,e._ices={},e.supportVCodes={},e.audioMixers={}},reflushSupportVCodes:function(e){var t=this;t.supportVCodes={},t._orderVCodes=e,e&&0!=e.length?r.forEach(e,(function(e,n){t.supportVCodes[n]=1})):i.warn("Not config support vcodes")},getOptimalVideoCodecs:function(){var e=this;if(!e._orderVCodes||0==e._orderVCodes.length)return/Chrome/.test(navigator.userAgent)?"VP8":/Safari/.test(navigator.userAgent)&&/Version\/11/.test(navigator.userAgent)?"H264":"VP8";var t=0;r.forEach(e._cacheMembers,(function(){t++}));for(var n,i=0,o=0;o<e._orderVCodes.length;o++){var s=e._orderVCodes[o];if(0==i&&(i=e.supportVCodes[s]),e.supportVCodes[s]>t)return s;e.supportVCodes[s]>i&&(i=e.supportVCodes[s],n=s)}return n||e._orderVCodes&&e._orderVCodes.length>0&&e._orderVCodes[0]},setMemberId:function(e){this._memberId=e},getMemberId:function(){return this._memberId||this.id},createWebrtc:function(e,t){var n=this;e||(e={}),r.extend(e,{_rebuildCount:t||0}),!0===n._service.useRTCCfg&&n.__rtc_cfg?e.iceServerConfig=r.extend(!0,{},n.__rtc_cfg):r.isPlainObject(n._service.useRTCCfg)&&(e.iceServerConfig=r.extend(!0,{},n._service.useRTCCfg));var a=new s({confrAttendee:n,useIp:n.ip,onIceStateChange:function(e){var t=e;i.debug("evt.target ice state",t);try{if("failed"==t)return n.onEvent(new o.ICEConnectFail({webrtc:a})),void(a.onEvent&&a.onEvent(new o.ICEConnectFail({webrtc:a})));if("connected"==t)return n.onEvent(new o.ICEConnected({webrtc:a})),void(a.onEvent=null);if("closed"==t)return n.onEvent(new o.ICEClosed({webrtc:a})),void(a.onEvent&&a.onEvent(new o.ICEClosed({webrtc:a})));if("disconnected"==t)return n.onEvent(new o.ICEDisconnected({webrtc:a})),void(a.onEvent&&a.onEvent(new o.ICEDisconnected({webrtc:a})))}finally{n._onIceStateChange&&n._onIceStateChange(a,e)}},onIceCandidate:function(e){n._onIceCandidate&&e&&n._onIceCandidate(a,e)},onGotRemoteStream:function(e){i.info("got stream.",a._rtcId,a.__id,e),a.onGotMediaStream&&a.onGotMediaStream(e),n.onEvent(new o.ICERemoteMediaStream({webrtc:a}))},onAddIceCandidateError:function(e){n.onEvent(new o.AddIceCandError({webrtc:a,event:e}))},onSetSessionDescriptionError:function(e){i.warn("onSetSessionDescriptionError : Failed to set session description: "+e.toString()),n.onEvent&&n.onEvent(new o.ICEConnectFail({webrtc:a,event:e}))},onCreateSessionDescriptionError:function(e){i.warn("Failed to create session description: "+e.toString()),n.onEvent&&n.onEvent(new o.ICEConnectFail({webrtc:a,event:e}))}},e);return n._ices||(n._ices={}),n._ices[a.getRtcId()]&&n._howDoWebrtcWhenCrtExsitsWebrtc(a),n._ices[a.getRtcId()]=a,n._ices[a.__id]=a,n._iceCreateRtcPeerConnection(a.getRtcId()),i.debug("create rtc ",a),a},_howDoWebrtcWhenCrtExsitsWebrtc:function(e){var t=this;t.closeWebrtc(e.getRtcId(),!0,!1)},connect:function(e,t){var n=this;n._session.connect(e,t)},connected:function(){var e=this;return e._session.connected()},newMessage:function(e){var t=this,n=t._session.newMessage(e);return n.post=function(e,n){t.postMessage(this,e,n)},n},message:function(e){var t=this,n=t._session.newMessage(e);return n.post=function(e,n){t.postMessage(this,e,n)},n},postMessage:function(e,t,n){var r=this;try{e.sessId||(e.sessId=r._session._sessionId),r._session.postMessage(e,t,n)}catch(o){t&&t({op:1001,tsxId:e.tsxId,result:-9527,msg:"post message. exception"}),i.warn(o)}},onEvent:function(e){},_onIceStateChange:function(e,t){var n=this;i.info(e.getRtcId(),t),n.onEvent(new o.ICEChanage({webrtc:e,state:t}))},_onIceCandidate:function(e,t){var n,i=this;r.isArray(t)?n=t:(n=[],n.push(t));var s=i.newMessage().setOp(105).setRtcId(e.getRtcId()).setCands(n);i.postMessage(s,(function(e){0==e.result||i.onEvent(new o.RspFail({request:s,response:e}))}))},_initC:function(e,t,n,s,a,c){var u=this;if(t&&t.rtcId!==e.getRtcId())throw i.error("stream and webrtc rtcId not equal."),"stream and webrtc rtcId not equal.";var f=u.newMessage().setOp(102).setRtcId(e.getRtcId()).setSdp(n).setSubSId(s);e.subArgs&&r.extend(f,e.subArgs),t&&t.located()&&f.setPubS(t),u.postMessage(f,(function(n){if(0!=n.result)return u.onEvent(new o.RspFail({request:f,response:n})),void(a&&a(new o.RspFail({request:f,response:n,hidden:!0===n.retrying})));t&&!t.id&&n.streamId&&t.updateAttributes({id:n.streamId});try{c&&c()}catch(r){i.warn(r)}n.sdp&&u.ansC(e.getRtcId(),n.sdp,n.cands),n.mems&&u.onMembers&&u.onMembers(n.cver,n.mems),n.streams&&u.onStreams&&u.onStreams(n.cver,n.streams)}))},_acptC:function(e,t,n){var r=this,i=r.newMessage().setOp(104).setRtcId(e.getRtcId()).setSdp(t);r.postMessage(i,(function(e){if(0!=e.result)return r.onEvent(new o.RspFail({request:i,response:e})),void(n&&n(new o.RspFail({request:i,response:e})))}))},_ansCAndPubstream:function(e,t,n,s,a){var c=this,u=c.newMessage().setOp(106).setRtcId(e.getRtcId()).setSdp(n);e.subArgs&&r.extend(u,e.subArgs),t&&t.located()&&(t=r.extend({},t),r.removeAttribute(t,"mutedMuted"),r.removeAttribute(t,"_located"),u.setPubS(t)),c.postMessage(u,(function(e){if(0!=e.result)return c.onEvent(new o.RspFail({request:u,response:e})),void(s&&s(new o.RspFail({request:u,response:e,hidden:!0===e.retrying})));t&&!t.id&&e.streamId&&t.updateAttributes({id:e.streamId});try{a&&a()}catch(n){i.warn(n)}}))},_ansC:function(e,t,n){var r=this,i=r.newMessage().setOp(106).setRtcId(e.getRtcId()).setSdp(t);r.postMessage(i,(function(e){if(0!=e.result)return r.onEvent(new o.RspFail({request:i,response:e})),void(n&&n(new o.RspFail({request:i,response:e})))}))},_termC:function(e,t,n){var r=this,i="string"===typeof e?e:e.getRtcId(),s=r.newMessage().setOp(107).setRtcId(i).setEndReason(t);r.postMessage(s,(function(e){if(0!=e.result)return r.onEvent(new o.RspFail({request:s,response:e})),void(n&&n(new o.RspFail({request:s,response:e})))}))},_iceCreateRtcPeerConnection:function(e){var t=this;t._ices[e].createRtcPeerConnection(),i.debug("create rtc peer connection",e)},doOffer:function(e,t,n){var r=this,i=r._ices[e];i.createOffer((function(e){t(e)}))},offerCall:function(e,t,n,r,i){var o=this,s=o._ices[e];s.createOffer((function(e){o._initC&&o._initC(s,t,e,n,r,i)}))},accept:function(e,t){var n=this,r=n._ices[e];r.createPRAnswer((function(e){n._acptC&&n._acptC(r,e,t)}))},answerCall:function(e,t,n,r){var i=this,o=i._ices[e];o.createAnswer((function(e){i._ansCAndPubstream&&i._ansCAndPubstream(o,t,e,n,r)}))},answer:function(e,t){var n=this,r=n._ices[e];r.createAnswer((function(e){n._ansC&&n._ansC(r,e,t)}))},onTcklC:function(e,t){var n=this;n._addIceCandidate(t,e)},onAcptC:function(e,t,n){var r=this;r._iceSetRemoteSDP(t,e),n&&r._addIceCandidate(n,e)},onAnsC:function(e,t,n){var r=this;r._iceSetRemoteSDP(t,e),n&&r._addIceCandidate(n,e)},_addIceCandidate:function(e,t){var n=this;if(e&&0!=e.length){var r=n._ices[t];r&&r.addIceCandidate(e)}else i.warn("drop cands",e)},closeWebrtc:function(e,t,n){var o=this,s=o._ices[e];if(r.forEach(o._cacheStreams,(function(t,n){if(n.rtcId===e&&!n.located())try{var s=r.removeAttribute(o._mediaMeters,t);s&&s._finally()}catch(a){i.warn(a)}n.rtcId===e&&2===n.type&&r.removeAttribute(o.audioMixers,n.id)})),!s||s.closed)return i.warn("Webrtc not exsits or closed",s&&s.closed),n&&s&&r.forEach(o._cacheStreams,(function(t,n){n.rtcId===e&&(r.removeAttribute(o._linkedStreams,t),i.warn("Webrtc close, remvoe from _linkedStreams",t))})),void(n||o._termC(e,0));if(o._records){var a=function(e){try{o.stopRecord(e)}catch(t){i.warn(t)}finally{r.removeAttribute(o._records,e.id)}};r.forEach(o._records,(function(t,n){n.rtcId===e&&a(n)}))}try{n||s&&o._termC(s,t&&s._localStream?-10:0)}finally{s&&s.close(t),s&&o.onWebrtcTermC&&o.onWebrtcTermC(s),t||s&&r.forEach(o._cacheStreams,(function(t,s){s.rtcId===e&&(s.located()&&(emedia.stopTracks(s._localMediaStream),s&&!s.closeReason&&s.updateAttributes({closeReason:"WebrtcClose"}),o._cacheStreams[t]&&o._linkedStreams[t]&&o.onRemoveStream(s),r.removeAttribute(o._cacheStreams,t),o._streamAutomators&&r.removeAttribute(o._streamAutomators,t),o._monitSoundChanagedStreams&&r.removeAttribute(o._monitSoundChanagedStreams,t),i.info("Webrtc close. Remove stream",t,". from cache")),n&&(r.removeAttribute(o._linkedStreams,t),i.info("Webrtc close. Remove stream",t,". from _linkedStreams")))}))}return s},__close:function(e){i.warn("closing, reason = ",e);var t=this;if(!t.closed){if(t.closed=!0,t.__getCopyInterval&&(clearInterval(t.__getCopyInterval),i.warn("Stop interval get copy")),t._ices)for(var n in t._ices)t.closeWebrtc(n,!1);var r=t.newMessage().setOp(201).setReason(e||0);t.postMessage(r)}},exit:function(e){var t=this;e?(e&&t._closeMyConfr(11),setTimeout((function(){t.close(0)}),100)):t.close(0)},_closeMyConfr:function(e){var t=this,n=t.newMessage().setOp(204).setReason(e||0);t.postMessage(n,(function(e){i.warn("Close confr ",e.result,e.msg)}))},close:function(e,t){var n=this;if(!n.closed)try{r.forEach(n._cacheStreams||{},(function(e,t){t.located()&&t._localMediaStream&&emedia.stopTracks(t._localMediaStream)})),n.__close(e),r.forEach(n._cacheStreams,(function(e,t){n.onRemoveStream(t)})),r.forEach(n._cacheMembers,(function(e,t){n.onRemoveMember(t)}))}finally{try{setTimeout((function(){n._session&&n._session.close(e)}),500),n.onEvent(new o.Hangup({reason:e,failed:t,self:{id:n._memberId}})),n.onMeExit&&n.onMeExit(e,t)}catch(s){i.error(s)}finally{n._onFinally&&n._onFinally()}}},webrtcState:function(e){var t=this,n=t._ices[e];return n.iceConnectionState()},_iceSetRemoteSDP:function(e,t){var n=this,r=n._ices[t];r.setRemoteDescription(e)},setLocalStream:function(e,t){var n=this,r=n._ices[t];r.setLocalStream(e)},onWebrtcTermC:function(e){}})},function(e,t,n){"use strict";var r=n(2),i=a(r),o=n(80),s=a(o);function a(e){return e&&e.__esModule?e:{default:e}}var c=n(87),u=c.tagLogger("Webrtc"),f=n(156),d=n(151).default,l={headerSection:null,audioSection:null,videoSection:null,_parseHeaderSection:function(e,t,n){var r=t;return-1===n||(r=-1===t?n:Math.min(t,n)),r>=0?e.slice(0,r):e},_parseAudioSection:function(e,t,n){var r=t;if(r>=0)return e.slice(r,n<r?e.length:n)},_parseVideoSection:function(e,t,n){var r=n;if(r>=0)return e.slice(r,t<r?e.length:t)},spiltSection:function(e){var t=this;t._preSDP=e;var n=t._preAudioIndex=e.indexOf("m=audio"),r=t._preVideoIndex=e.indexOf("m=video");t.headerSection=t._parseHeaderSection(e,n,r),t.audioSection=t._parseAudioSection(e,n,r),t.videoSection=t._parseVideoSection(e,n,r)},setVideoBitrate:function(e){e&&this.videoSection&&(this.videoSection=this.setBitrate(this.videoSection,e))},setVideoMinBitrate:function(e){this.setAllFmtpBitrate({"x-google-min-bitrate":e})},setVideoMaxBitrate:function(e){this.setAllFmtpBitrate({"x-google-max-bitrate":e})},setVideoStartBitrate:function(e){this.setAllFmtpBitrate({"x-google-start-bitrate":e})},setAllFmtpBitrate:function(e){if(this.videoSection){var t={};(0,s.default)(e).forEach((function(n){var r=e[n],i=n+"="+r,o=new RegExp("(a=fmtp\\:\\d+\\s\\S*;?)("+n+"=\\d+)(;?\\S*)","g");t[n]={field:i,regex:o}})),this.videoSection=this.videoSection.replace(/(a=fmtp\:\d+[^\r\n]+)([\r\n]+)/g,(function(e,n,r){return n.indexOf("apt=")>=0?e:((0,s.default)(t).forEach((function(e){var r=t[e],i=r.regex,o=r.field,s=n.replace(i,(function(e,t,n,r){return t+o+r}));s.indexOf(e)<0?(s.endsWith(";")||(s+=";"),n=s+o):n=s})),n+r)}))}},setFmtpBitrate:function(e,t){if(t&&this.videoSection){var n=e+"="+t,r=new RegExp("(a=fmtp\\:\\d+\\s\\S*;?)("+e+"=\\d+)(;?\\S*)","g");this.videoSection=this.videoSection.replace(/(a=fmtp\:\d+[^\r\n]+)([\r\n]+)/g,(function(t,i,o){var s=i.replace(r,(function(e,t,r,i){return t+n+i}));return s.indexOf(e)<0&&(s.endsWith(";")||(s+=";"),s+=n),s+o}))}},setAudioBitrate:function(e){e&&this.audioSection&&(this.audioSection=this.setBitrate(this.audioSection,e))},setBitrate0:function(e,t){return e=e.replace(/(b=)(?:AS|TIAS)(\:)\d+/g,"$1AS$2"+t),e.indexOf("b=AS")<0&&(e=e.replace(/(m=(?:audio|video)[^\r\n]+)([\r\n]+)/g,"$1$2b=AS:"+t+"$2")),e},setBitrate:function(e,t){var n="AS";return emedia.isFirefox&&(t=1e3*(t>>>0),n="TIAS"),e=e.replace(/(b=)(?:AS|TIAS)(\:)\d+/g,"$1"+n+"$2"+t),e.indexOf("b="+n+":")<0&&(e=e.indexOf("c=IN ")<0?e.replace(/(m=(?:audio|video)[^\r\n]+)([\r\n]+)/g,"$1$2b="+n+":"+t+"$2"):e.replace(/c=IN ([^\r\n]+)([\r\n]+)/,"c=IN $1$2b="+n+":"+t+"$2")),e},updateVideoSection:function(e,t){var n=this;n.videoSection&&(n.videoSection=n.videoSection.replace(e,t))},updateAudioSection:function(e,t){var n=this;n.audioSection&&(n.audioSection=n.audioSection.replace(e,t))},updateVideoSendonly:function(){var e=this;e.videoSection&&(e.videoSection=e.videoSection.replace(/sendrecv/g,"sendonly"))},updateVideoRecvonly:function(){var e=this;e.videoSection&&(e.videoSection=e.videoSection.replace(/sendrecv/g,"recvonly"))},updateAudioSendonly:function(){var e=this;e.audioSection&&(e.audioSection=e.audioSection.replace(/sendrecv/g,"sendonly"))},updateAudioRecvonly:function(){var e=this;e.audioSection&&(e.audioSection=e.audioSection.replace(/sendrecv/g,"recvonly"))},updateACodes:function(e){var t=this;if(e&&t.audioSection){if("string"===typeof e){var n=[];n.push(e),e=n}for(var r={},i=/a=rtpmap:(\d+) ([A-Za-z0-9]+)\/.*/gi,o=(n=t._parseLine(t.audioSection,i),0);o<n.length;o++){var s=n[++o],a=n[++o];r[a]=s}var f=[];for(o=0;o<e.length;o++){var d=r[e[o]];d&&f.push(d)}0==f.length&&(t._webrtc?u.warn("Not found acodes map",e,t._webrtc._rtcId,t._webrtc.__id):u.warn("Not found acodes map",e));var l=t.audioSection.indexOf("\r"),p=t.audioSection.substring(0,l),h=p.split(" ");Array.prototype.push.apply(f,h.slice(3));var m=[],v={};c.forEach(f,(function(e,t){0==m.length?(m.push(t),v[t]=!0):v[t]||(m.push(t),v[t]=!0)})),h.splice(3,h.length-3,m.join(" ")),p=h.join(" "),t._webrtc&&u.warn(p,t._webrtc._rtcId,t._webrtc.__id),t.audioSection=p+t.audioSection.substring(l)}},updateVCodes:function(e){var t=this;if(e&&t.videoSection){if("string"===typeof e){var n=[];n.push(e),e=n}for(var r={},i=/a=rtpmap:(\d+) ([A-Za-z0-9]+)\/.*/gi,o=(n=t._parseLine(t.videoSection,i),0);o<n.length;o++){var s=n[++o],a=n[++o];r[a]=s}var f=/a=fmtp:(\d+) .*profile-level-id=42e01f;?.*/gi,d=t._parseLine(t.videoSection,f);d&&d.length>=2&&(r["H264"]=d[1]);var l=[];for(o=0;o<e.length;o++){var p=r[e[o]];p&&l.push(p)}0==l.length&&(t._webrtc?u.warn("Not found vcodes map",e,t._webrtc._rtcId,t._webrtc.__id):u.warn("Not found vcodes map",e));var h=t.videoSection.indexOf("\r"),m=t.videoSection.substring(0,h),v=m.split(" ");Array.prototype.push.apply(l,v.slice(3));var g=[],y={};c.forEach(l,(function(e,t){0==g.length?(g.push(t),y[t]=!0):y[t]||(g.push(t),y[t]=!0)})),v.splice(3,v.length-3,g.join(" ")),m=v.join(" "),t._webrtc&&u.warn(m,t._webrtc._rtcId,t._webrtc.__id),t.videoSection=m+t.videoSection.substring(h)}},removeSSRC:function(e){for(var t=[],n=e.split(/a=ssrc:[^\n]+/g),r=0;r<n.length;r++)"\n"!=n[r]&&t.push(n[r]);return t.join("\n")},removeField_msid:function(e){for(var t=[],n=e.split(/a=msid:[^\n]+/g),r=0;r<n.length;r++)"\n"!=n[r]&&t.push(n[r]);e=t.join("\n"),t=[],n=e.split(/[\n]+/g);for(r=0;r<n.length;r++)"\n"!=n[r]&&t.push(n[r]);return t.join("\n")},updateHeaderMsidSemantic:function(e){var t=this,n="a=msid-semantic: WMS "+e,r=t.headerSection.split(/a=msid\-semantic: WMS.*/g),i=[];switch(r.length){case 1:i.push(r[0]);break;case 2:i.push(r[0]),i.push(n),i.push("\n");break;case 3:i.push(r[0]),i.push(n),i.push("\n"),i.push(r[2]),i.push("\n");break}return t.headerSection=i.join("")},updateAudioSSRCSection:function(e,t,n,r){var i=this;i.audioSection&&(i.audioSection=i.removeSSRC(i.audioSection)),i.audioSection&&(i.audioSection=i.removeField_msid(i.audioSection)),i.audioSection&&(i.audioSection=i.audioSection+i.ssrcSection(e,t,n,r))},updateVideoSSRCSection:function(e,t,n,r){var i=this;i.videoSection&&(i.videoSection=i.removeSSRC(i.videoSection)),i.videoSection&&(i.videoSection=i.removeField_msid(i.videoSection)),i.videoSection&&(i.videoSection=i.videoSection+i.ssrcSection(e,t,n,r))},getUpdatedSDP:function(e){var t,n,r,i=this;if(void 0!==e&&null!=e||(e=i._preAudioIndex<i._preVideoIndex),i.videoSection&&i.videoSection.replace(/a=mid:([^\r\n]+)/,(function(e,n){return t=n,e})),i.audioSection&&i.audioSection.replace(/a=mid:([^\r\n]+)/,(function(e,t){return n=t,e})),e){var o=["a=group:BUNDLE"];i.audioSection&&o.push(n),i.videoSection&&o.push(t),r=i.headerSection.replace(/a=group:BUNDLE [^\r\n]+/,o.join(" ")),i.audioSection&&(r+=i.audioSection),i.videoSection&&(r+=i.videoSection)}else{o=["a=group:BUNDLE"];i.videoSection&&o.push(t),i.audioSection&&o.push(n),r=i.headerSection.replace(/a=group:BUNDLE [^\r\n]+/,o.join(" ")),i.videoSection&&(r+=i.videoSection),i.audioSection&&(r+=i.audioSection)}return r},parseMsidSemantic:function(e){var t=this,n=/a=msid\-semantic:\s*WMS (\S+)/gi,r=t._parseLine(e,n);return r&&2==r.length&&(t.msidSemantic={line:r[0],WMS:r[1]}),t.msidSemantic},ssrcSection:function(e,t,n,r){var i=["a=ssrc:"+e+" cname:"+t,"a=ssrc:"+e+" msid:"+n+" "+r,"a=ssrc:"+e+" mslabel:"+n,"a=ssrc:"+e+" label:"+r,""];return i.join("\n")},parseSSRC:function(e){var t=this,n=new RegExp("a=(ssrc):(\\d+) (\\S+):(\\S+)","ig"),r=t._parseLine(e,n);if(r){for(var i={lines:[],updateSSRCSection:t.ssrcSection},o=0;o<r.length;o++){var s=r[o];if(s.indexOf("a=ssrc")>=0)i.lines.push(s);else switch(s){case"ssrc":case"cname":case"msid":case"mslabel":case"label":i[s]=r[++o]}}return i}},_parseLine:function(e,t){var n,r=[];while(null!=(n=t.exec(e)))for(var i=0;i<n.length;i++)r.push(n[i]);if(r.length>0)return r}},p=function(e,t){c.extend(this,l),this._webrtc=t,this.spiltSection(e)};p.isAudioVideo=function(e){var t=e.indexOf("m=audio"),n=e.indexOf("m=video");return t<n},p.isVideoPreAudio=function(e){var t=e.indexOf("m=audio"),n=e.indexOf("m=video");return t>=0&&n>=0&&n<t};var h=emedia.__rtc_globalCount=0,m=c.prototypeExtend({closed:!1,sdpConstraints:{mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}},offerOptions:{offerToReceiveAudio:!0,offerToReceiveVideo:!0},optimalVideoCodecs:null,optimalAudioCodecs:null,__init__:function(){var e=this;e._rtcId||(e._rtcId="RTC"+h++),e.__id="_i_"+h++,e.__setRemoteSDP=!1,e.__tmpRemoteCands=[],e.__tmpLocalCands=[],e._rtcPeerConnection=null,e.cctx=e.__id,emedia&&emedia.config&&emedia.config.forceUseVideoCodecs&&emedia.config.forceUseVideoCodecs.length>0&&(e.optimalVideoCodecs=emedia.config.forceUseVideoCodecs),emedia&&emedia.config&&emedia.config.forceUseAudioCodecs&&emedia.config.forceUseAudioCodecs.length>0&&(e.optimalAudioCodecs=emedia.config.forceUseAudioCodecs),emedia&&emedia.config&&"number"===typeof emedia.config.forceVideoBitrate&&(e.vbitrate=emedia.config.forceVideoBitrate),emedia&&emedia.config&&"number"===typeof emedia.config.forceMinVideoBitrate&&(e.vminBitrate=emedia.config.forceMinVideoBitrate),emedia&&emedia.config&&"number"===typeof emedia.config.forceAudioBitrate&&(e.abitrate=emedia.config.forceAudioBitrate),u.info("Webrtc created. optimal video codecs:",e.optimalVideoCodecs,"audio codecs:",e.optimalAudioCodecs,"vbitrate:",e.vbitrate,"vminBitrate:",e.vminBitrate,"abitrate:",e.abitrate,e._rtcId,e.__id)},getRtcId:function(){return this._rtcId},iceState:function(){var e=this;return e._rtcPeerConnection.iceConnectionState},setSubArgs:function(e){var t=this;t.subArgs=e},getReceiversOfPeerConnection:function(){var e=this;if(e._rtcPeerConnection&&"closed"!=e._rtcPeerConnection.iceConnectionState)return e._rtcPeerConnection.getReceivers()},updateRemoteBySubArgs:function(){var e=this;e.subArgs&&e._remoteStream&&(emedia.enableVideoTracks(e._remoteStream,!(e.subArgs&&!1===e.subArgs.subSVideo)),emedia.enableAudioTracks(e._remoteStream,!(e.subArgs&&!1===e.subArgs.subSAudio)),u.info("enable tracks remote stream",e._remoteStream,e.subArgs,e._rtcId,e.__id,e.closed))},createRtcPeerConnection:function(e){var t=this;u.debug("begin create peer connection ......",t._rtcId,t.__id,t.closed),e||(e=t.iceServerConfig),e||emedia.isEdge?(e||(e={}),!e.iceServers&&(e.iceServers=[]),e.rtcpMuxPolicy="require",e.bundlePolicy="max-bundle",e.relayOnly&&(e.iceTransportPolicy="relay")):e=null,emedia&&emedia.config&&"function"===typeof emedia.config.reconfigRTCConfiguration&&(e=emedia.config.reconfigRTCConfiguration(e)),emedia.config.useDeployMore&&(emedia.mgr.rtc_url_config||(emedia.mgr.rtc_url_config=new d(emedia.config.rtcConfigUrl||"")),e&&e.iceServers&&(e=emedia.mgr.rtc_url_config.replace_trun_url(e))),u.info("create pc, set config:",e,t._rtcId,t.__id,t.closed);var n=t._rtcPeerConnection=new RTCPeerConnection(e);function r(e){u.info("states: connectionState",n.connectionState,", iceConnectionState",n.iceConnectionState,"@",t._rtcId,t.__id,t.closed);try{var r=n.iceConnectionState||n.connectionState;"failed"!=n.connectionState&&"failed"!=n.iceConnectionState||(r="failed"),t.lastIceConnectionState!==r&&(t.lastIceConnectionState=r,t.onIceStateChange(r))}finally{}}n.__peerId=t._rtcId,u.debug("created local peer connection object",n,t._rtcId),n.onicecandidate=function(e){var n=e.candidate;if("icecandidate"!=e.type||n&&("string"!==typeof n.protocol||"tcp"!==n.protocol.toLowerCase())&&!/ TCP /.test(n.candidate)){if(!n.candidate)throw u.error("Not found candidate. candidate is error"),"Not found candidate. candidate is error,";if(n.cctx=t.cctx,!t.__setRemoteSDP)return(t.__tmpLocalCands||(t.__tmpLocalCands={})).push(n),void u.debug("On ICE candidate ok: but tmp buffer caused by not set remote sdp: ",n,t._rtcId,t.__id,t.closed);u.debug("On ICE candidate ok: ",n,t._rtcId,t.__id,t.closed),t._onIceCandidate(n)}else u.debug("On ICE candidate: drop",n,t._rtcId,t.__id,t.closed)},t.lastIceConnectionState="",n.onconnectionstatechange=r.bind(t),n.onicestatechange=r.bind(t),n.oniceconnectionstatechange=r.bind(t),n.onsignalingstatechange=function(e){u.info("states: signaling",n.signalingState,"@",t._rtcId,t.__id,t.closed)},null===n.ontrack&&t._onTrack&&(n.ontrack=function(e){t._onTrack(e)}),n.onaddstream=function(e){t._onGotRemoteStream(e)}},addTrack:function(e,t){var n=this;e.forEach((function(e){n._rtcPeerConnection.addTrack(e,t),u.debug("Added track(",e.id,e.kind,e.label,") of stream(",t.id,") to RtcPeerConnection",n._rtcId,n.__id,n.closed)}))},setLocalStream:function(e){var t=this;if(t._localStream=e,t._rtcPeerConnection.addTrack)e.getTracks().forEach((function(n){t._rtcPeerConnection.addTrack(n,e),u.debug("Added track(",n.enabled,n.id,n.kind,n.label,") of localStream(",e.id,") to RtcPeerConnection",t._rtcId,t.__id,t.closed)}));else{t._rtcPeerConnection.addStream(e);var n=e.getVideoTracks(),r=e.getAudioTracks();n&&n.length>0&&u.debug("RtcPeerConnection video: ",n[0].enabled,n[0].id,n[0].kind,n[0].label,t._rtcId,t.__id,t.closed),r&&r.length>0&&u.debug("RtcPeerConnection audio: ",r[0].enabled,r[0].id,r[0].kind,r[0].label,t._rtcId,t.__id,t.closed)}u.debug("Added local stream to RtcPeerConnection",e.id,e.active,t._rtcId,t.__id,this.closed)},removeStream:function(e){this._rtcPeerConnection.removeStream(e),u.debug("Remove stream from RtcPeerConnection",e,self._rtcId,self.__id,this.closed)},getLocalStream:function(){return this._localStream},getRemoteStream:function(){return this._remoteStream},createOffer:function(e,t){var n=this;u.debug("createOffer start...",n.offerOptions,n._rtcId,n.__id);var r=c.extend({},n.offerOptions);return n.subArgs&&(r={offerToReceiveAudio:!0,offerToReceiveVideo:!0}),n._rtcPeerConnection.createOffer(r).then((function(t){if(n.offerDescription=t,emedia.isEdge&&(t.sdp=t.sdp.replace(/profile-level-id=[^;]+/,"profile-level-id=42e01f")),emedia.isFirefox?n.fireFoxOfferVideoPreAudio=n.__offerVideoPreAudio=p.isVideoPreAudio(t.sdp):n.__offerVideoPreAudio=p.isVideoPreAudio(t.sdp),t.sdp=t.sdp.replace(/m=video 0/g,"m=video 9"),u.warn("setLocalDescription. modify offer. if 'm=video 0' -> 'm=video 9'; if H264, 'profile-level-id=42e01f'",n._rtcId,n.__id),n.optimalVideoCodecs&&n.optimalVideoCodecs.length>0||n.optimalAudioCodecs&&n.optimalAudioCodecs.length>0||n.offerOptions&&(!1===n.offerOptions.offerToReceiveVideo||!1===n.offerOptions.offerToReceiveAudio)){var r=new p(t.sdp,n);n.optimalVideoCodecs&&r.updateVCodes(n.optimalVideoCodecs),n.optimalAudioCodecs&&r.updateACodes(n.optimalAudioCodecs),n.offerOptions&&!1===n.offerOptions.offerToReceiveVideo&&r.updateVideoSection(/a=sendrecv|a=recvonly/g,"a=sendonly"),n.offerOptions&&!1===n.offerOptions.offerToReceiveAudio&&r.updateAudioSection(/a=sendrecv|a=recvonly/g,"a=sendonly"),t.sdp=r.getUpdatedSDP()}if(u.debug("setLocalDescription start",n._rtcId,n.__id,n.closed,n.optimalVideoCodecs,n.optimalAudioCodecs),emedia.config.useDTX){t.sdp=t.sdp.replace(/a=rtpmap:(.*)CN\/(.*)\r\n/g,"");var i=t.sdp.match(/a=rtpmap:(.*)\sopus/)[1];t.sdp=t.sdp.replace(new RegExp("a=fmtp:"+i+"(.*)\\r\\n"),"a=fmtp:"+i+"$1;usedtx=1\r\n")}n._rtcPeerConnection.setLocalDescription(t).then(n._onSetLocalSessionDescriptionSuccess.bind(n),n._onSetSessionDescriptionError.bind(n,t)).then((function(){t.cctx=n.cctx,(e||n.onCreateOfferSuccess.bind(n))(t)}))}),t||n._onCreateSessionDescriptionError.bind(n,r))},createPRAnswer:function(e,t){var n=this;return u.info(" createPRAnswer start",n.closed,n.sdpConstraints),n._rtcPeerConnection.createAnswer(n.sdpConstraints).then((function(t){u.debug("_____________PRAnswer ",t.sdp,n._rtcId,n.__id,n.closed),t.type="pranswer",t.sdp=t.sdp.replace(/a=recvonly/g,"a=inactive");var r=new p(t.sdp,n);n.optimalVideoCodecs&&r.updateVCodes(n.optimalVideoCodecs),n.optimalAudioCodecs&&r.updateACodes(n.optimalAudioCodecs),t.sdp=r.getUpdatedSDP(),n.__prAnswerDescription=t,u.debug("inactive PRAnswer ",t.sdp,n._rtcId,n.__id,n.closed),u.debug("setLocalDescription start",t,n._rtcId,n.__id,n.closed),n._rtcPeerConnection.setLocalDescription(t).then(n._onSetLocalSessionDescriptionSuccess.bind(n),n._onSetSessionDescriptionError.bind(n,t)).then((function(){r.updateHeaderMsidSemantic("MS_0000"),r.updateAudioSSRCSection(1e3,"CHROME0000","MS_0000","LABEL_AUDIO_1000"),r.updateVideoSSRCSection(2e3,"CHROME0000","MS_0000","LABEL_VIDEO_2000"),t.sdp=r.getUpdatedSDP(),u.debug("Send PRAnswer ",t.sdp,n._rtcId,n.__id,n.closed),n.cctx&&(t.cctx=n.cctx),(e||n.onCreatePRAnswerSuccess.bind(n))(t)}))}),t||n._onCreateSessionDescriptionError.bind(n,n.sdpConstraints))},createAnswer:function(e,t){var n=this;return u.info("createAnswer start",n.closed,n.sdpConstraints),n._rtcPeerConnection.createAnswer(n.sdpConstraints).then((function(t){function r(e){var n=e.parseMsidSemantic(e.headerSection);if(n){"*"==n.WMS&&e.updateHeaderMsidSemantic(n.WMS="MS_0000");var r=e.parseSSRC(e.audioSection),i=e.parseSSRC(e.videoSection);r&&e.updateAudioSSRCSection(1e3,"CHROME0000",n.WMS,r.label||"LABEL_AUDIO_1000"),i&&e.updateVideoSSRCSection(2e3,"CHROME0000",n.WMS,i.label||"LABEL_VIDEO_2000"),t.sdp=e.getUpdatedSDP()}}u.debug("_____________________Answer ",n._rtcId,n.__id,n.closed),t.type="answer";var i=new p(t.sdp,n);n.optimalVideoCodecs&&i.updateVCodes(n.optimalVideoCodecs),n.optimalAudioCodecs&&i.updateACodes(n.optimalAudioCodecs),emedia.supportPRAnswer?r(i):t.sdp=i.getUpdatedSDP(),n.__answerDescription=t,u.debug("Answer ",n._rtcId,n.__id,n.closed),u.debug("setLocalDescription start",t,n._rtcId,n.__id,n.closed),n._rtcPeerConnection.setLocalDescription(t).then(n._onSetLocalSessionDescriptionSuccess.bind(n),n._onSetSessionDescriptionError.bind(n,t)).then((function(){emedia.supportPRAnswer&&(i.updateHeaderMsidSemantic("MS_0000"),i.updateAudioSSRCSection(1e3,"CHROME0000","MS_0000","LABEL_AUDIO_1000"),i.updateVideoSSRCSection(2e3,"CHROME0000","MS_0000","LABEL_VIDEO_2000"),t.sdp=i.getUpdatedSDP()),u.debug("Send Answer ",n._rtcId,n.__id,n.closed),n.cctx&&(t.cctx=n.cctx),(e||n.onCreateAnswerSuccess.bind(n))(t)}))}),t||n._onCreateSessionDescriptionError.bind(n,n.sdpConstraints))},_printStats:function(e){var t=this;t.confrAttendee&&emedia.config.remainLastStatsCount&&e&&e.getTracks().forEach((function(e){t._printTrackStats(e)}))},_printTrackStats:function(e){var t=this;if(t.confrAttendee&&emedia.config.remainLastStatsCount){var n=t.confrAttendee._trackStats&&t.confrAttendee._trackStats[e.id];if(n){for(var r in n){var i=n[r];for(var o in i){var s=i[o];if(s)for(var a=s.curIndex,f=0;f<emedia.config.remainLastStatsCount;f++){a=(a-1)%emedia.config.remainLastStatsCount;var d=s[a];if(!d||void 0===d.data)break;u.info("[track]",t._rtcId,t.__id,e.kind,e.id,r,o,d.data,d.timestamp.toLocaleString())}}}c.removeAttribute(t.confrAttendee._trackStats,e.id)}}},close:function(e,t,n){var r=this;if(u.warn("webrtc closing",r._rtcId,r.__id,r.closed),r.__iceWaitIntervalId&&clearTimeout(r.__iceWaitIntervalId),!r.closed){t=!0===t,r.closed=!0;try{var i=function(){if(r._rtcPeerConnection&&r._rtcPeerConnection.close(),u.info("peer connection close. it is",r._rtcPeerConnection&&r._rtcPeerConnection.__peerId),!n&&emedia.isSafari){r._rtcPeerConnection.iceConnectionState||r._rtcPeerConnection.connectionState;setTimeout((function(){r._rtcPeerConnection.iceConnectionState||r._rtcPeerConnection.connectionState;r.onIceStateChange&&r.onIceStateChange("closed")}),200)}},o=r._localStream,s=r._remoteStream;emedia.config.printStatsWhenPCClose?r.getStats((function(){i(),o&&r._printStats(o),s&&r._printStats(s)})):i()}catch(a){u.warn(a)}finally{r._localStream&&!1===e&&emedia.stopTracks(r._localStream),r._remoteStream&&emedia.stopTracks(r._remoteStream),r._remoteStream=null,t||r.onClose&&r.onClose(),!0===n&&(u.info("Webrtc close. but retry build. will onIceStateChange(failed). eg. emedia.config iceWaitBuildMillis",r._rtcId,r.__id),r.onIceStateChange&&r.onIceStateChange("failed")),u.warn("webrtc closed. closed:",r._rtcId,r.__id,r.closed)}}},addIceCandidate:function(e){console.log("addIceCandidate candidate",(0,i.default)(e));var t=this,n=c.isArray(e)?e:[e];if(emedia.mgr.rtc_url_config&&(n=emedia.mgr.rtc_url_config.replace_candidates(n)),emedia&&emedia.config&&"function"===typeof emedia.config.reChanageCandidate){for(var r=[],o=0;o<n.length;o++){e=n[o];var s=emedia.config.reChanageCandidate(e);s&&(u.info("Candidate rechanage. addons. it =",e,"->",s),c.isArray(s)?Array.prototype.push.apply(r,s):r.push(s))}n=r}t._addIceCandidate(n)},_addIceCandidate:function(e){var t=this;if(t._rtcPeerConnection){u.debug("Add ICE candidate: ",e,t._rtcId,t.__id,t.closed);var n=c.isArray(e)?e:[e];
//!_util.isArray(candidate) && _cands.push(candidate);
if(!t.__setRemoteSDP)return Array.prototype.push.apply(t.__tmpRemoteCands||(t.__tmpRemoteCands={}),n),void u.debug("Add ICE candidate but tmp buffer caused by not set remote sdp: ",e,t._rtcId,t.__id,t.closed);for(var r=0;r<n.length;r++)if(e=n[r],e.cctx&&e.cctx!=t.cctx)u.warn("addIceCandidate fail drop. cctx not equal. ",e,t._rtcId,t.__id,t.closed);else{if(!0===t.fireFoxOfferVideoPreAudio){var i=e.sdpMLineIndex;e.sdpMLineIndex=parseInt(e.sdpMid.replace(/[^0-9]*/,"")),u.warn("Firefox sdp section video pre audio, sdp mline index update ",i,"->",e.sdpMLineIndex)}e.candidate&&""!==e.candidate?t._rtcPeerConnection.addIceCandidate(new RTCIceCandidate(e)).then(t.onAddIceCandidateSuccess.bind(t),t._onAddIceCandidateError.bind(t,e)):u.warn("Add ICE candidate fail. drop it ",e,t._rtcId,t.__id,t.closed)}}},setRemoteDescription:function(e){var t=this;return t._setRemoteDescription(e)},_setRemoteDescription:function(e){var t=this;if(t.__iceWaitIntervalId&&(clearTimeout(t.__iceWaitIntervalId),t.__iceWaitIntervalId=null,u.info("emedia.config iceWaitBuildMillis, clear ice wait interval id",t._rtcId,t.__id)),u.debug("setRemoteDescription start. ",t._rtcId,t.__id,t.closed),t.offerDescription){if(e.cctx&&e.cctx!=t.cctx)return void u.warn("setRemoteDescription fail drop. cctx not equal. ",e,t._rtcId,t.__id,t.closed);if(!0===t.fireFoxOfferVideoPreAudio||!0===t.__offerVideoPreAudio){var n=new p(e.sdp,t);e.sdp=n.getUpdatedSDP(!1),u.info("Remote sdp.2. switch audio video",e.sdp)}}else e.cctx&&(t.cctx=e.cctx);if(e.sdp=e.sdp.replace(/UDP\/TLS\/RTP\/SAVPF/g,"RTP/SAVPF"),u.warn("setRemoteDescription. UDP/TLS/RTP/SAVPF -> RTP/SAVPF; if firefox: switch audio video;",t._rtcId,t.__id),t.vbitrate||t.abitrate||t.vminBitrate){n=new p(e.sdp,t);t.vbitrate&&n.setVideoBitrate(t.vbitrate),t.vminBitrate&&n.setVideoMinBitrate(t.vminBitrate),t.abitrate&&n.setAudioBitrate(t.abitrate),u.warn("vbitrate = ",t.vbitrate,"vminBitrate = ",this.vminBitrate,", abitrate = ",t.abitrate,t._rtcId,t.__id),e.sdp=n.getUpdatedSDP("undefined"===typeof t.__offerVideoPreAudio||null===t.__offerVideoPreAudio?void 0:!t.__offerVideoPreAudio)}return u.debug("final remote sdp =",e.sdp,t._rtcId,t.__id),e=t.__remoteDescription=new RTCSessionDescription(e),t._rtcPeerConnection.setRemoteDescription(e).then((function(){t.__setRemoteSDP=!0,t._onSetRemoteSuccess.apply(t,arguments),t.__tmpLocalCands&&t.__tmpLocalCands.length>0&&(u.debug("After setRemoteDescription. send cands",t._rtcId,t.__id,t.closed),t._onIceCandidate(t.__tmpLocalCands),t.__tmpLocalCands=[]),t.__tmpRemoteCands&&t.__tmpRemoteCands.length>0&&(u.debug("After setRemoteDescription. add tmp cands",t._rtcId,t.__id,t.closed),t._addIceCandidate(t.__tmpRemoteCands),t.__tmpRemoteCands=[])}),t._onSetSessionDescriptionError.bind(t,e))},iceConnectionState:function(){var e=this;return e._rtcPeerConnection.iceConnectionState},isConnected:function(){var e=this,t=e.lastIceConnectionState;return"connected"===t||"completed"===t},_onGotRemoteStream:function(e){var t=this;t._remoteStream=e.stream||e.streams[0],t._remoteStream._rtcId=t._rtcId,t._remoteStream.__rtc_c_id=t.__id,u.debug("On got remote stream",t._remoteStream?t._remoteStream.id+"_"+t._remoteStream.active:"null",t._rtcId,t.__id),t._remoteStream&&t._remoteStream.getTracks().forEach((function(e){u.debug("remote stream",t._remoteStream.id," track =",e.enabled,e.id,e.kind,e.label,t._rtcId,t.__id)})),t.updateRemoteBySubArgs(),this.onGotRemoteStream(this._remoteStream,e),u.debug("received remote stream, you will see the other.",t._rtcId,t.__id,this.closed)},_onSetRemoteSuccess:function(){u.info("onSetRemoteSuccess success",this._rtcId,this.__id),this.onSetRemoteSuccess.apply(this,arguments),this.offerDescription&&this.__remoteDescription&&this.__remoteDescription.sdp&&this._onAnswerCodes(this.__remoteDescription.sdp)},_onAnswerCodes:function(e){var t=this,n=new p(e,this);if(n.videoSection){var r=f.parseRtpParameters(n.videoSection);if(!r.codecs||0===r.codecs.length)return void u.info("not found any video codes. @ ",t._rtcId,t.__id);var i=[],o={};c.forEach(r.codecs,(function(e,t){!0!==o[t.name]&&(o[t.name]=!0,i.push(t.name))})),t.finalVCodeChoices=i,t.onVCodeChoices&&t.onVCodeChoices(i)}},onSetRemoteSuccess:function(){},onAddIceCandidateSuccess:function(){u.debug("addIceCandidate success",this._rtcId,this.__id)},_onAddIceCandidateError:function(e,t){u.error("failed to add ICE Candidate: "+t.toString(),", error candidate:",e,this._rtcId,this.__id),this.onAddIceCandidateError(t)},onAddIceCandidateError:function(e){},_onIceCandidate:function(e){u.debug("onIceCandidate:",e,this._rtcId,this.__id),this.onIceCandidate(e)},onIceCandidate:function(e){},onIceStateChange:function(e){u.debug("onIceStateChange : ICE state ",e)},_onCreateSessionDescriptionError:function(e,t){u.error("Failed to create session description: "+t.toString()," offerOptionsOrSDPConstraints:",e,this._rtcId,this.__id),this.onCreateSessionDescriptionError(t)},onCreateSessionDescriptionError:function(e){},onCreateOfferSuccess:function(e){u.debug("create offer success",this._rtcId,this.__id)},onCreatePRAnswerSuccess:function(e){u.debug("create answer success",this._rtcId,this.__id)},onCreateAnswerSuccess:function(e){u.debug("create answer success",this._rtcId,this.__id)},_onSetSessionDescriptionError:function(e,t){u.error("onSetSessionDescriptionError : Failed to set session description: ",t.toString(),this._rtcId,this.__id),e&&e.type&&e.sdp&&u.error("error sdp: type=",e.type,"sdp=",e.sdp,this._rtcId,this.__id),this.onSetSessionDescriptionError(t)},onSetSessionDescriptionError:function(e){},_onSetLocalSessionDescriptionSuccess:function(){var e=this;u.debug("onSetLocalSessionDescriptionSuccess : setLocalDescription complete",this._rtcId,this.__id),emedia.config.iceWaitBuildMillis&&(this.__iceWaitIntervalId&&clearTimeout(this.__iceWaitIntervalId),this.__iceWaitIntervalId=setTimeout((function(){u.info("emedia.config iceWaitBuildMillis, timeout, will close webrtc, will retry build by onIceStateChange(failed)",e._rtcId,e.__id),e.onIceStateChange&&e.onIceStateChange("failed")}),emedia.config.iceWaitBuildMillis),u.info("emedia.config iceWaitBuildMillis, start timeout",e._rtcId,e.__id)),this.onSetLocalSessionDescriptionSuccess(),this.__answerDescription&&this.__answerDescription.sdp&&this._onAnswerCodes(this.__answerDescription.sdp)},onSetLocalSessionDescriptionSuccess:function(){},onGotRemoteStream:function(e){u.debug("Got remote stream. ",e,this._rtcId,this.__id)},getStats:function(e){var t=this;return t._rtcPeerConnection?"function"!==typeof emedia.config.rtcStatsTypeMath?(u.warn("Get stats, but config rtcStatsTypeMather, ",this._rtcId,this.__id),void(e&&e())):void t._rtcPeerConnection.getStats(null).then((function(n){n.forEach((function(e,n){emedia.config.rtcStatsTypeMath(e,n)&&u.info("Rtc stats",e,t._rtcId,t.__id)})),e&&e(n)})):(u.warn("Get stats, but peer connection not exsits, ",this._rtcId,this.__id),void(e&&e()))}});e.exports=m},function(e,t,n){"use strict";var r={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};r.localCName=r.generateIdentifier(),r.splitLines=function(e){return e.trim().split("\n").map((function(e){return e.trim()}))},r.splitSections=function(e){var t=e.split("\nm=");return t.map((function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"}))},r.getDescription=function(e){var t=r.splitSections(e);return t&&t[0]},r.getMediaSections=function(e){var t=r.splitSections(e);return t.shift(),t},r.matchPrefix=function(e,t){return r.splitLines(e).filter((function(e){return 0===e.indexOf(t)}))},r.parseCandidate=function(e){var t;t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" ");for(var n={foundation:t[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1];break;case"ufrag":n.ufrag=t[r+1],n.usernameFragment=t[r+1];break;default:n[t[r]]=t[r+1];break}return n},r.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var n=e.type;return t.push("typ"),t.push(n),"host"!==n&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},r.parseIceOptions=function(e){return e.substr(14).split(" ")},r.parseRtpMap=function(e){var t=e.substr(9).split(" "),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},r.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},r.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},r.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},r.parseFmtp=function(e){for(var t,n={},r=e.substr(e.indexOf(" ")+1).split(";"),i=0;i<r.length;i++)t=r[i].trim().split("="),n[t[0].trim()]=t[1];return n},r.writeFmtp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var r=[];Object.keys(e.parameters).forEach((function(t){e.parameters[t]?r.push(t+"="+e.parameters[t]):r.push(t)})),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},r.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},r.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},r.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substr(t+1,r-t-1),n.value=e.substr(r+1)):n.attribute=e.substr(t+1),n},r.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((function(e){return parseInt(e,10)}))}},r.getMid=function(e){var t=r.matchPrefix(e,"a=mid:")[0];if(t)return t.substr(6)},r.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},r.getDtlsParameters=function(e,t){var n=r.matchPrefix(e+t,"a=fingerprint:");return{role:"auto",fingerprints:n.map(r.parseFingerprint)}},r.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach((function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),n},r.getIceParameters=function(e,t){var n=r.splitLines(e);n=n.concat(r.splitLines(t));var i={usernameFragment:n.filter((function(e){return 0===e.indexOf("a=ice-ufrag:")}))[0].substr(12),password:n.filter((function(e){return 0===e.indexOf("a=ice-pwd:")}))[0].substr(10)};return i},r.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},r.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},n=r.splitLines(e),i=n[0].split(" "),o=3;o<i.length;o++){var s=i[o],a=r.matchPrefix(e,"a=rtpmap:"+s+" ")[0];if(a){var c=r.parseRtpMap(a),u=r.matchPrefix(e,"a=fmtp:"+s+" ");switch(c.parameters=u.length?r.parseFmtp(u[0]):{},c.rtcpFeedback=r.matchPrefix(e,"a=rtcp-fb:"+s+" ").map(r.parseRtcpFb),t.codecs.push(c),c.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(c.name.toUpperCase());break;default:break}}}return r.matchPrefix(e,"a=extmap:").forEach((function(e){t.headerExtensions.push(r.parseExtmap(e))})),t},r.writeRtpDescription=function(e,t){var n="";n+="m="+e+" ",n+=t.codecs.length>0?"9":"0",n+=" UDP/TLS/RTP/SAVPF ",n+=t.codecs.map((function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType})).join(" ")+"\r\n",n+="c=IN IP4 0.0.0.0\r\n",n+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach((function(e){n+=r.writeRtpMap(e),n+=r.writeFmtp(e),n+=r.writeRtcpFb(e)}));var i=0;return t.codecs.forEach((function(e){e.maxptime>i&&(i=e.maxptime)})),i>0&&(n+="a=maxptime:"+i+"\r\n"),n+="a=rtcp-mux\r\n",t.headerExtensions&&t.headerExtensions.forEach((function(e){n+=r.writeExtmap(e)})),n},r.parseRtpEncodingParameters=function(e){var t,n=[],i=r.parseRtpParameters(e),o=-1!==i.fecMechanisms.indexOf("RED"),s=-1!==i.fecMechanisms.indexOf("ULPFEC"),a=r.matchPrefix(e,"a=ssrc:").map((function(e){return r.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute})),c=a.length>0&&a[0].ssrc,u=r.matchPrefix(e,"a=ssrc-group:FID").map((function(e){var t=e.substr(17).split(" ");return t.map((function(e){return parseInt(e,10)}))}));u.length>0&&u[0].length>1&&u[0][0]===c&&(t=u[0][1]),i.codecs.forEach((function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var r={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10)};c&&t&&(r.rtx={ssrc:t}),n.push(r),o&&(r=JSON.parse(JSON.stringify(r)),r.fec={ssrc:c,mechanism:s?"red+ulpfec":"red"},n.push(r))}})),0===n.length&&c&&n.push({ssrc:c});var f=r.matchPrefix(e,"b=");return f.length&&(f=0===f[0].indexOf("b=TIAS:")?parseInt(f[0].substr(7),10):0===f[0].indexOf("b=AS:")?1e3*parseInt(f[0].substr(5),10)*.95-16e3:void 0,n.forEach((function(e){e.maxBitrate=f}))),n},r.parseRtcpParameters=function(e){var t={},n=r.matchPrefix(e,"a=ssrc:").map((function(e){return r.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute}))[0];n&&(t.cname=n.value,t.ssrc=n.ssrc);var i=r.matchPrefix(e,"a=rtcp-rsize");t.reducedSize=i.length>0,t.compound=0===i.length;var o=r.matchPrefix(e,"a=rtcp-mux");return t.mux=o.length>0,t},r.parseMsid=function(e){var t,n=r.matchPrefix(e,"a=msid:");if(1===n.length)return t=n[0].substr(7).split(" "),{stream:t[0],track:t[1]};var i=r.matchPrefix(e,"a=ssrc:").map((function(e){return r.parseSsrcMedia(e)})).filter((function(e){return"msid"===e.attribute}));return i.length>0?(t=i[0].value.split(" "),{stream:t[0],track:t[1]}):void 0},r.parseSctpDescription=function(e){var t,n=r.parseMLine(e),i=r.matchPrefix(e,"a=max-message-size:");i.length>0&&(t=parseInt(i[0].substr(19),10)),isNaN(t)&&(t=65536);var o=r.matchPrefix(e,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substr(12),10),protocol:n.fmt,maxMessageSize:t};var s=r.matchPrefix(e,"a=sctpmap:");if(s.length>0){var a=r.matchPrefix(e,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(a[0],10),protocol:a[1],maxMessageSize:t}}},r.writeSctpDescription=function(e,t){var n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},r.generateSessionId=function(){return Math.random().toString().substr(2,21)},r.writeSessionBoilerplate=function(e,t,n){var i,o=void 0!==t?t:2;i=e||r.generateSessionId();var s=n||"thisisadapterortc";return"v=0\r\no="+s+" "+i+" "+o+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},r.writeMediaSection=function(e,t,n,i){var o=r.writeRtpDescription(e.kind,t);if(o+=r.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=r.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":"active"),o+="a=mid:"+e.mid+"\r\n",e.direction?o+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?o+="a=sendrecv\r\n":e.rtpSender?o+="a=sendonly\r\n":e.rtpReceiver?o+="a=recvonly\r\n":o+="a=inactive\r\n",e.rtpSender){var s="msid:"+i.id+" "+e.rtpSender.track.id+"\r\n";o+="a="+s,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+s,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+s,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+r.localCName+"\r\n"),o},r.getDirection=function(e,t){for(var n=r.splitLines(e),i=0;i<n.length;i++)switch(n[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[i].substr(2);default:}return t?r.getDirection(t):"sendrecv"},r.getKind=function(e){var t=r.splitLines(e),n=t[0].split(" ");return n[0].substr(2)},r.isRejected=function(e){return"0"===e.split(" ",2)[1]},r.parseMLine=function(e){var t=r.splitLines(e),n=t[0].substr(2).split(" ");return{kind:n[0],port:parseInt(n[1],10),protocol:n[2],fmt:n.slice(3).join(" ")}},r.parseOLine=function(e){var t=r.matchPrefix(e,"o=")[0],n=t.substr(2).split(" ");return{username:n[0],sessionId:n[1],sessionVersion:parseInt(n[2],10),netType:n[3],addressType:n[4],address:n[5]}},r.isValidSDP=function(e){if("string"!==typeof e||0===e.length)return!1;for(var t=r.splitLines(e),n=0;n<t.length;n++)if(t[n].length<2||"="!==t[n].charAt(1))return!1;return!0},e.exports=r},function(e,t,n){"use strict";var r=n(87),i=n(158);emedia.subscribed=function(e){return!!e._located||(2===e.type?!(e._located||!e._webrtc):void 0!==e._webrtc)};var o=r.prototypeExtend({voff:0,aoff:0,__init__:function(){var e=this;if(!e._mediaStream)throw _logger.error("_mediaStream empty"),"_mediaStream empty";if(e.hasEnabledTracks(e._mediaStream)){if(!e.__audioContext)throw _logger.error("require audioContext"),"require audioContext";e.__soundMeter=new i(e.__audioContext),e.__soundMeter.connectToSource(e._mediaStream,(function(t){if(t)throw t;e.__worked=e.__soundMeter.__worked=!0}))}},hasEnabledTracks:function(e){return emedia.hasEnabledTracks(e)},getSoundMeters:function(){var e=this;if(e.__soundMeter&&e.__worked)if(e._mediaStream.active){if(e.hasEnabledTracks(e._mediaStream))return{instant:e.__soundMeter.instant,slow:e.__soundMeter.slow,clip:e.__soundMeter.clip}}else e.__worked&&e._finally()},_finally:function(){var e=this;e.__soundMeter&&(e.__soundMeter.stop(),e.__worked=e.__soundMeter.__worked=!1)}});e.exports=r.prototypeExtend({__undefinedEQDelete:!0,Update:r.prototypeExtend({ifAoff:function(e){this.if("aoff",e)},ifVoff:function(e){this.if("voff",e)},ifMediaStream:function(e){this.if("mediaStream",e)},if:function(e,t){"undefined"!==typeof this[e]&&t(this[e])}}),located:function(){return this._located||!1},webrtc:function(e){return e&&(this._webrtc=e),this},getMediaStream:function(){return"undefined"!==typeof this.mediaStream?this.mediaStream:this._located?this._localMediaStream:this._webrtc&&(this._webrtc.getRemoteStream()||this._webrtc.getLocalStream())},requestFrame:function(){this._localMediaStream&&this._localMediaStream.getVideoTracks().forEach((function(e){"function"===typeof e.requestFrame&&e.requestFrame()}))},getLocalMediaStream:function(){return this._localMediaStream},getRemoteMediaStream:function(){if(this._webrtc&&"undefined"!==typeof this._webrtc.getRemoteStream())return this._webrtc.getRemoteStream()},mutedNeed:function(){return this.mutedMuted||!1},ifMediaStream:function(e){"undefined"===typeof this.mediaStream?this._located&&"undefined"!==typeof this._localMediaStream?e(this._localMediaStream):this._located||!this._webrtc||"undefined"===typeof this._webrtc.getRemoteStream()||e(this._webrtc.getRemoteStream()):e(this.mediaStream)},subscribed:function(){return emedia.subscribed(this)},updateAttributes:function(){for(var e=this,t=0;t<arguments.length;t++){var n=arguments[t];if(r.isPlainObject(n))for(var i in n){var o=n[i];e[i]=o}}},getHtmlDOMID:function(){return"_m_"+this.owner.id+"_s_"+this.id},MediaSoundMeter:o,StreamSoundMeter:r.prototypeExtend({__init__:function(){var e=this;if(!e._stream||"function"!==typeof e._stream.getMediaStream)throw _logger.error("_stream empty or not found method getMediaStream"),"_stream empty or not found method getMediaStream";if(e._streamId=e._stream.id,e._streamCreateId=e._stream.__create_id,e._mediaStream=e._mediaStream,2===e._stream.type&&!e._stream.located()&&!e._webrtc)throw _logger.error("require webrtc. when type = 2 and not located"),"require webrtc. when type = 2 and not located";e.__mediaSoundMeter=e.__mediaSoundMeter||new o({__audioContext:e.__audioContext,_mediaStream:e._mediaStream}),e.__mediaSoundMeter.useCount=(e.__mediaSoundMeter.useCount||0)+1},onSoundMeters:function(e){var t=this,n={instant:0,slow:0,clip:0};if(t._stream.aoff)return t._finally(),e(n),n;if(2!==t._stream.type&&t._stream.subArgs&&void 0!==t._stream.subArgs.subSAudio&&!t._stream.subArgs.subSAudio)return t._finally(),e(n),n;if(0==t._stream.id||2===t._stream.type&&!t._stream.located()&&(!t._stream.subArgs||!t._stream.subArgs.subSAudio)){var i,o=t._webrtc.getReceiversOfPeerConnection();if(!o||0===o.length)return e(n),n;for(var s in o)"audio"===o[s].track.kind&&(i=o[s]);if(!i)return e(n),n;if("function"===typeof i.getContributingSources){var a,c=i.getContributingSources();if(emedia.config._printSoundData&&r.logger.debug(t._stream.id,t._stream.csrc,"rtpContributingSources ",c),!c||0===c.length)return e(n),n;for(var s in c)c[s].source==t._stream.csrc&&(a=t._stream.csrc);if(emedia.config._printSoundData&&r.logger.debug(t._stream.id,t._stream.csrc,"source ",a),void 0===a)return e(n),n}}var u=t.__mediaSoundMeter.getSoundMeters()||n,f=2===t._stream.type?t._webrtc:t._stream._webrtc;(emedia.meterWithTrackAudioLevel||0===u.instant)&&f&&!f.closed&&f._rtcPeerConnection&&f._rtcPeerConnection.getStats().then((function(t){t.size>0&&t.forEach((function(t){"track"!==t.type||"audio"!==t.kind&&"audio"!==t.trackIdentifier||(u.trackAudioLevel=t.audioLevel,u.trackTotalAudioEnergy=t.totalAudioEnergy,e(u))}))})),e(u)},_finally:function(){var e=this;2===e._stream.type&&e._stream.located()&&e._remoteMediaSoundMeters&&e._remoteMediaSoundMeters._finally(),e.__mediaSoundMeter.useCount--,0===e.__mediaSoundMeter.useCount&&e.__mediaSoundMeter._finally()}})})},function(e,t,n){"use strict";function r(e){this.context=e,this.instant=0,this.slow=0,this.clip=0,this.script=e.createScriptProcessor(2048,1,1);var t=this;this.script.onaudioprocess=function(e){var n,r=e.inputBuffer.getChannelData(0),i=0,o=0;for(n=0;n<r.length;++n)i+=r[n]*r[n],Math.abs(r[n])>.99&&(o+=1);t.instant=Math.sqrt(i/r.length),t.slow=.95*t.slow+.05*t.instant,t.clip=o/r.length}}r.prototype.connectToSource=function(e,t){console.log("SoundMeter connecting");try{this.mic=this.context.createMediaStreamSource(e),this.mic.connect(this.script),this.script.connect(this.context.destination),"undefined"!==typeof t&&t(null)}catch(n){console.error(n),"undefined"!==typeof t&&t(n)}},r.prototype.stop=function(){this.mic.disconnect(),this.script.disconnect()},e.exports=r},function(e,t,n){"use strict";var r=n(87),i=r.tagLogger("Handler"),o=n(150),s=r.prototypeExtend({onEvent:function(e){this.mgr.upload_stats&&this.mgr.upload_stats.upload_event(e);var t=this;function n(){try{t.handleEvent(e)}catch(n){i.warn(n)}}if(e&&i.info("[EVT]",e.message(),e.hidden||""),e instanceof o.ServerRefuseEnter&&e.failed&&-95270===e.failed&&(e.failed=-9527),e instanceof emedia.event.StreamState&&e.stream&&e.stream.located())n();else try{e.hidden||t.onNotifyEvent&&t.onNotifyEvent(e)}finally{n()}},handleEvent:function(e){var t=this;if(e instanceof o.RecvResponse)t._onRecvResponse(e);else if(e instanceof o.ServerRefuseEnter)i.warn("Server refuse, ",e.failed,e.msg),t.onServerRefuseEnter(e);else if(e instanceof o.NetworkChanaged)i.warn("Network chanaged, ",e.preIp,e.nowIp),t.onNetworkChanaged(e);else if(e instanceof o.EnterFail)i.warn("Enter fail, result = ",e.failed),t.onEnterFail();else if(e instanceof o.WSClose)t.onWSClose();else if(e instanceof o.WSConnected)i.warn("Websocket connected");else if(e instanceof o.ICEConnected){var n=e.webrtc;t.onICEConnected(n)}else if(e instanceof o.ICEConnectFail){n=e.webrtc;t.onICEConnectFail(n)}else if(e instanceof o.ICEDisconnected){n=e.webrtc;t.onICEDisconnected(n)}else if(e instanceof o.ICEClosed){n=e.webrtc;t.onICEClosed(n)}else if(e instanceof o.ICERemoteMediaStream)t.onICERemoteMediaStream(e.webrtc);else if(e instanceof o.PushSuccess){t._cacheStreams[e.stream.id]=t._linkedStreams[e.stream.id]=e.stream;var s=t.newStream(e.stream);if(e.hidden&&!t._maybeNotExistStreams[e.stream.id]&&!s.isRepublished)return void t._onAddStream(s);emedia._yetGetUserMedia=!0;try{!0!==e.hidden&&s&&t.onUpdateStream(s,new s.Update({voff:s.voff,aoff:s.aoff,mediaStream:s.getMediaStream()}))}finally{emedia.isSafari&&r.forEach(t._cacheStreams,(function(e,n){!0===n._autoSubWhenPushStream&&(r.removeAttribute(n,"_autoSubWhenPushStream"),t.createWebrtcAndSubscribeStream(n.id))}))}}else if(e instanceof o.SubSuccess)console.log("__event.SubSuccess",e),t._linkedStreams[e.stream.id]=e.stream,e.stream.updateAttributes({_zoom:1});else if(e instanceof o.PushFail){if(!0!==e.hidden){var a=r.removeAttribute(t._linkedStreams,e.stream.id);if(i.warn("PushFail remove from _linkedStreams",e.stream.id,a),a){s=t.newStream(e.stream);t.onRemoveStream(s)}}}else if(e instanceof o.SubFail){if(!0!==e.hidden){r.removeAttribute(t._linkedStreams,e.stream.id),i.warn("SubFail remove from _linkedStreams",e.stream.id);s=t.newStream(e.stream);s.updateAttributes({rtcId:void 0,_webrtc:void 0,mediaStream:void 0}),t.onUpdateStream(s,new s.Update(s))}}else if(e instanceof o.SubFailNotSupportVCodes){var c=e.stream;i.warn("Rtc donot support pub VCodes. close. sub fail.",c.rtcId," -> ",c.id);try{t.onNotSupportPublishVideoCodecs&&t.onNotSupportPublishVideoCodecs(c)}catch(d){i.warn(d)}}else if(e instanceof o.EnterSuccess)console.log("__event.EnterSuccess",e),t.onEnterSuccess();else if(e instanceof o.SwitchVCodes){c=e.stream;var u,f=e.useVCodes;n=c._webrtc;if(i.warn("Rtc switch VCodes. ",c.id,f),f&&0!=f.length||i.warn("Rtc switch VCodes. error! useVCodes is empty ",c.id,f),emedia.config&&emedia.config.forceUseVideoCodecs&&emedia.config.forceUseVideoCodecs.length>0&&(u=emedia.config.forceUseVideoCodecs,r.isArray(u)||(u=[],u.push(emedia.config.forceUseVideoCodecs))),u){if("string"===typeof u&&u!==f[0])return void i.warn("Rtc switch VCodes. igrone . useVCodes !== forceUseVideoCodecs ",c.id,n._rtcId,f,u);if(r.isArray(u)&&u[0]!==f[0])return void i.warn("Rtc switch VCodes. igrone ddd . useVCodes == forceUseVideoCodecs ",c.id,n._rtcId,f,u)}if(n&&n.optimalVideoCodecs){if("string"===typeof n.optimalVideoCodecs&&n.optimalVideoCodecs==f[0])return void i.warn("Rtc switch VCodes. igrone . useVCodes == optimalVideoCodecs ",c.id,n._rtcId,f);if(r.isArray(n.optimalVideoCodecs)&&n.optimalVideoCodecs.length>0&&n.optimalVideoCodecs[0]==f[0])return void i.warn("Rtc switch VCodes. igrone ddd . useVCodes == optimalVideoCodecs ",c.id,n._rtcId,f)}c.updateAttributes({optimalVideoCodecs:f}),n&&t.closeWebrtc(n.getRtcId(),!0),setTimeout((function(){c.updateAttributes({iceRebuildCount:1}),t.iceRebuild(c),i.warn("Rtc switch VCodes. iceRebuild end.",c.id,f)}),300)}},_onRecvResponse:function(e){var t=this,n=e.request,r=e.response;if(n&&r&&200!==n.op&&1002!==n.op&&0!==r.result){i.warn("Server refuse. when request = ",n);var o=e.failed;switch(o){case-9527:case-95270:break;case-500:case-502:case-504:case-508:case-510:t.close(4,o);break;case-506:t.close(11,o);break;case-501:t.close(11,o);default:}}},onServerRefuseEnter:function(e){var t=this,n=e.failed;switch(n){case-9527:case-95270:t.close(4,-9527);break;case-500:case-502:case-504:case-508:case-510:t.close(4,n);break;case-506:t.close(11,n);break;default:t.close(2)}},onEnterFail:function(){var e=this;e.__getCopyInterval&&clearInterval(e.__getCopyInterval)},onNetworkChanaged:function(e){var t=this,n=e.nowIp;emedia.config.rebuildPeerConnectionWhenNetworkChanaged&&setTimeout((function(){var e={};r.forEach(t._cacheStreams,(function(r,o){if(!t._maybeNotExistStreams[r]&&o._webrtc){var s=o._webrtc;e[o.rtcId]||(s.closed||"string"!==typeof s.useIp||s.useIp===n||(i.warn("network chanage. webrtc will rebuild.",s._rtcId,s.__id),t.onICEClosed(s)),e[o.rtcId]=!0)}}))}),100)},onEnterSuccess:function(){var e=this;setTimeout((function(){e._failIcesRebuild()}),50),e.getCopyIntervalMillis&&e.getCopyIntervalMillis>0&&(i.warn("Run interval get copy. interval = ",e.getCopyIntervalMillis),e.__getCopyInterval&&clearInterval(e.__getCopyInterval),e.__getCopyInterval=setInterval((function(){e._session.connected()?e._sysCopy.apply(e):(i.warn("Warn! cannot get copy. cause offline."),e.__getCopyInterval&&clearInterval(e.__getCopyInterval))}),e.getCopyIntervalMillis)),e.getMediaMeterIntervalMillis&&e.getMediaMeterIntervalMillis>0&&e._intervalGetMediaMeters()},_intervalGetMediaMeters:function(){var e=this;function t(){e.__getMediaMetersIntervalFlag&&emedia.cancelAnimationFrame(e.__getMediaMetersIntervalFlag),e.getMediaMeterIntervalMillis?e.__getMediaMetersIntervalFlag=emedia.requestAnimationFrame((function(n){"function"===typeof emedia.AudioContext&&e._flushMediaMetersByAudioContext.apply(e),!1===e.closed&&t()}),e.getMediaMeterIntervalMillis):i.warn("Ontalking closed. please use getMediaMeterIntervalMillis")}t()},_flushMediaMetersByAudioContext:function(){var e=this;r.forEach(e._cacheStreams,(function(t,n){e._monitSoundChanagedStreams&&!e._monitSoundChanagedStreams[t]||"0"!=n.id&&e._updateMetersOrNewOne.call(e,t,n)}));var t=[];r.forEach(e._mediaMeters,(function(n,r){var i=e._cacheStreams[n];i&&e._updateMetersOrNewOne.call(e,n,i),i||t.push(n)})),r.forEach(t,(function(t,n){r.removeAttribute(e._mediaMeters,n)}))},_updateMetersOrNewOne:function(e,t){var n=this,i=n._mediaMeters[e];if(2===t.type&&!t.located()&&(!t.subArgs||!t.subArgs.subSAudio)){var o=n._oneAudioMixers();if(!o||i&&i._webrtc&&o._webrtc.__id!=i._webrtc.__id)return i&&i._finally(),r.removeAttribute(n._mediaMeters,e),void n._onSoundChanage.call(n,t.owner,t)}return i&&i._streamCreateId===t.__create_id&&i.__mediaSoundMeter.__worked?(i.onSoundMeters((function(e){n._onSoundChanage.call(n,t.owner,t,e)})),i):(i&&(i._streamCreateId!==t.__create_id||i.__mediaSoundMeter.__worked)&&(i&&i._finally(),r.removeAttribute(n._mediaMeters,e),n._onSoundChanage.call(n,t.owner,t)),t.aoff?void 0:(i=n._newMediaMeters(t),i&&(n._mediaMeters[e]&&n._mediaMeters[e]._finally(),n._mediaMeters[e]=i),i))},_newAudioContext:function(){if(emedia.__usingWebAudio)return emedia.__audioContext},_newMediaMeters:function(e){var t,n=this;if(2===e.type&&e.subArgs&&e.subArgs.subSAudio&&e._webrtc&&e._webrtc.getRemoteStream()){var r=new e.StreamSoundMeter({_stream:e,_mediaStream:e._webrtc.getRemoteStream(),_webrtc:e._webrtc,__audioContext:n._newAudioContext()});return r}if(2===e.type&&e.located()){r=new e.StreamSoundMeter({_stream:e,_mediaStream:e._localMediaStream,__audioContext:n._newAudioContext()});return r}if(2===e.type&&!e.located()){var i=n._oneAudioMixers();if(!i||!i._webrtc||i._webrtc.closed)return;if(i&&(void 0===i._remoteMediaSoundMeters||!i._remoteMediaSoundMeters.__worked)&&i._webrtc&&i._webrtc.getRemoteStream()&&(i._remoteMediaSoundMeters=new i.MediaSoundMeter({_mediaStream:i._webrtc.getRemoteStream(),__audioContext:n._newAudioContext()})),!i._remoteMediaSoundMeters)return;r=new e.StreamSoundMeter({_stream:e,_webrtc:i._webrtc,__mediaSoundMeter:i._remoteMediaSoundMeters});return r}if(!e.aoff&&(t=e.getMediaStream())){r=new e.StreamSoundMeter({_stream:e,_mediaStream:t,__audioContext:n._newAudioContext()});return r}},_oneAudioMixers:function(){var e=this,t=e._cacheStreams["0"];if(t&&t._webrtc&&!t._webrtc.closed)return t;for(var n in e.audioMixers){var r=e.audioMixers[n];if(r.located())return r}},onWSClose:function(){var e=this;e.__getCopyInterval&&clearInterval(e.__getCopyInterval),i.info("Websocket closed.")},onICEDisconnected:function(e){var t=this;t.__networkWeakInterval&&clearTimeout(t.__networkWeakInterval),t.__networkWeakInterval=setTimeout((function(){t.onNetworkWeak&&t.onNetworkWeak()}),1e3),r.forEach(t._linkedStreams,(function(n,o){var s;o.rtcId==e.getRtcId()&&((s=t._maybeNotExistStreams[n])||(s=t._maybeNotExistStreams[n]=r.extend({},o),s.updateAttributes({iceRebuildCount:1})),i.info("Stream maybe not exist. caused by disconnected",o.id))}))},onICEConnectFail:function(e){var t=this;for(var n in t._linkedStreams){var s=t._linkedStreams[n];if(s.rtcId==e.getRtcId()){if(s._webrtc&&s._webrtc.__id!==e.__id){i.warn("Stream use other webrtc rtcId = ",s.rtcId,", id: ",s._webrtc.__id,e.__id);continue}var a;if((a=t._maybeNotExistStreams[n])||(a=t._maybeNotExistStreams[n]=r.extend({},s),a.updateAttributes({iceRebuildCount:1})),a){var c=new o.StreamState({stream:a});c.iceFail(),t.onEvent(c)}if(i.info("ice fail. webrtc = ",e.getRtcId()," problem stream is ",a.iceRebuildCount,a.id),a.iceRebuildCount>emedia.config.iceRebuildCount)i.info("ice fail. webrtc = ",e.getRtcId()," rebuild fail. problem stream is ",a.id),a.located()?t.onEvent(new o.PushFail({stream:s,cause:"pub ice rebuild failed."})):t.onEvent(new o.SubFail({stream:s,cause:"sub ice rebuild failed."})),t.closeWebrtc(e.getRtcId(),!1);else{var u=t._records[a.id];a._localMediaStream?i.info("ice fail. webrtc = ",e.getRtcId()," will rebuild. remain local stream. ",a.id):i.info("ice fail. webrtc = ",e.getRtcId()," will rebuild.",a.id),t.closeWebrtc(e.getRtcId(),!0),u&&(t._records[a.id]=u),function(e){setTimeout((function(){t.iceRebuild(e)}),emedia.config.iceRebuildIntervalMillis)}(a),i.info("ice fail. webrtc = ",e.getRtcId()," will rebuilding. problem stream is ",a.id)}2===s.type&&r.removeAttribute(t.audioMixers,s.id)}}},onICEClosed:function(e){var t=this;if(e.closed){i.warn("Webrtc will be removed. by __id = ",e.__id,", rtcId = ",e.getRtcId());var n=r.removeAttribute(t._ices,e.__id);n?i.warn("Webrtc removed. by id = ",n.__id,", rtcId = ",n.getRtcId()):i.warn("Webrtc removed. by id = ",e.__id,", rtcId = ",e.getRtcId());var o=t._ices[e.getRtcId()];o&&o.__id===n.__id&&(n=r.removeAttribute(t._ices,e.getRtcId()),i.warn("Webrtc removed. by rtcId = ",n.getRtcId(),", __id = ",n.__id))}else i.info("ICE self closed. not allow. will rebuild",e.getRtcId()),t.onICEConnectFail(e)},onICEConnected:function(e){var t=this;r.forEach(t._cacheStreams,(function(n,s){if(s.rtcId==e.getRtcId()){if(s.updateAttributes({finalVCodeChoices:e.finalVCodeChoices}),t._maybeNotExistStreams[n]){r.removeAttribute(t._maybeNotExistStreams,s.id),t._linkedStreams[n]=s,i.info("ice reconnected. webrtc = ",e.getRtcId(),"will update stream = ",s.id);var a=t._records[s.id];a&&a.rtcId!==s.rtcId&&(t.startRecord(s),i.warn("Re record. for ",s.id,", after rebuild ice.",a.rtcId,"->",s.rtcId))}else i.info("ice connected. webrtc = ",e.getRtcId(),s.id),s.located()&&t.onEvent(new o.PushSuccess({stream:s})),s.located()||t.onEvent(new o.SubSuccess({stream:s}));2===s.type&&(t.audioMixers[s.id]=s)}}))},onICERemoteMediaStream:function(e){var t=this;r.forEach(t._cacheStreams,(function(n,r){if(r.rtcId==e.getRtcId()&&(!r.located()||2===r.type)){var i=e.getRemoteStream();if(t._updateRemoteStream(r,i),r.onGotRemoteMediaStream)r.onGotRemoteMediaStream.call(r,i);else{r=t.newStream(r);r.updateAttributes({mediaStream:e.getRemoteStream()}),t.onUpdateStream(r,new r.Update({mediaStream:r.mediaStream}))}}}))},_failIcesRebuild:function(){var e=this,t=1;r.forEach(e._maybeNotExistStreams,(function(n,r){setTimeout((function(){e.iceRebuild(r)}),100*t)}))},iceRebuild:function(e){var t=this;return t.connected()?t._linkedStreams[e.id]&&t._cacheStreams[e.id]?void(e.iceRebuildCount>emedia.config.iceRebuildCount?(i.info("ice rebuild fail. count too many. stream is ",e.id),e.located()?t.onEvent(new o.PushFail({stream:e,cause:"pub ice rebuild failed."})):t.onEvent(new o.SubFail({stream:e,cause:"sub ice rebuild failed."}))):t.connected()?(i.info("ice try rebuild. count",e.iceRebuildCount,". stream is ",e.id),t.rebuildIce(e),e.iceRebuildCount++):i.warn("ice rebuild. stop. cause by not websocket disconnect",e.id)):(i.info("ice rebuild fail. it yet closed. stream is ",e.id,e.rtcId),r.removeAttribute(t._maybeNotExistStreams,e.id),r.removeAttribute(t._linkedStreams,e.id),void i.warn("iceRebuild, remvoe from _linkedStreams",e.id)):(e.updateAttributes({iceRebuildCount:1}),void i.warn("Websocket disconnect. waiting. rebuild count reset",e.iceRebuildCount,e.id))},rebuildIce:function(e){var t=this;t._cacheStreams[e.id]?(i.warn("Begin rebuild ice ",e.iceRebuildCount,e.id),e.located()?(e.updateAttributes({isRepublished:!0}),t.push(e,void 0,void 0,!0)):t.createWebrtcAndSubscribeStream(e.id),i.warn("Finish rebuild ice ",e.iceRebuildCount,e.id,t._cacheStreams[e.id].rtcId)):i.warn("Begin rebuild ice. not found stream at local",e.iceRebuildCount,e.id)},_sysCopy:function(){var e=this,t=e.newMessage().setOp(1e3).setCver(e._cver||0);e.postMessage(t,(function(t){0==t.result?(e._cver||0)<t.cver&&(e._cver=t.cver,e.onMembers(t.cver,t.mems||{}),e.onStreams(t.cver,t.streams||{}),i.info("Got copy success.")):i.warn("Get copy fail. result = ",t.result)}))}});e.exports=s},function(e,t,n){"use strict";var r=n(87),i=r.tagLogger("Desktop"),o=n(150);window.__shareDesktopMessageCount__=0,e.exports=r.prototypeExtend({__RTC_PAGE_MSG_TYPE__:"RTC-SD-PAGE",__RTC_EXT_MSG_TYPE__:"RTC-SD-EXT",__init__:function(){var e=this;e.__extLoaded=e.rsdExtLoaded(),e.__extLoaded&&e.__onRsdExtLoad(),window.addEventListener("load",(function(t){if(!e.__extLoaded){var n=e.rsdExtLoaded();e.__extLoaded=n}})),window.addEventListener("message",(function(t){if(t.data){var n=t.data;n.type&&n.type===e.__RTC_EXT_MSG_TYPE__&&n.evname&&(i.info("got ext-msg: ",n),"extLoaded"!==n.evname?e.__onMessage(n):e.__extLoaded||(e.__extLoaded=!0,setTimeout(e.__onRsdExtLoad(),50)))}}))},rsdExtLoaded:function(){var e=document.getElementById("RTC-Share-Deskto-installed-ele-rat1abrr");return!(!emedia.isElectron&&!e)},__sendMessage:function(e,t){var n=this,o="tsx_"+__shareDesktopMessageCount__+++"_"+Math.random().toString(36).substr(2,4);if(!n.__extLoaded)throw i.error("Rtc share desktop not loaded"),"Rtc share desktop not loaded";e.tsxId=o,n["on_"+o]=function(){t&&t.apply(n,arguments),r.removeAttribute(n,"on_"+o)},window.postMessage&&window.postMessage(e,"*")},__onMessage:function(e){var t=this,n=e.tsxId;t["on_"+n]&&t["on_"+n](e)},__onRsdExtLoad:function(){var e=this;e.onExtLoaded&&e.onExtLoaded()},openDesktopMedia:function(e,t){var n=this;if(emedia.isElectron)n.openDesktopMediaInElectron(e,t);else if(n.__extLoaded&&n.rsdExtLoaded()){var r={type:n.__RTC_PAGE_MSG_TYPE__,evname:"chooseDesktopMedia",screenOptions:e};n.__sendMessage(r,(function(e){"onAccessApproved"===e.evname&&e.streamId?t(new o.OpenDesktopMedia({desktopStreamId:e.streamId})):t(new o.OpenDesktopMediaAccessDenied)}))}else t(new o.ShareDesktopExtensionNotFound)},openDesktopMediaInElectron:function(e,t){e||(e=["screen","window"]);var n={types:e,thumbnailSize:{width:230,height:230}};emedia.electron.desktopCapturer.getSources(n).then((function(e){if("function"===typeof emedia.chooseElectronDesktopMedia){for(var n=0;n<e.length;n++){var r=e[n];r.hxThumbDataURL=r.thumbnail.toDataURL()}emedia.chooseElectronDesktopMedia(e,(function(e){var n;n=e&&e.id?e.id:e,t(new o.OpenDesktopMedia({desktopStreamId:n}))}),(function(){t(new o.OpenDesktopMediaAccessDenied({message:function(){return"User denied access"}}))}))}else t(new o.OpenDesktopMedia({desktopStreamId:e[0].id}))})).catch((function(e){return t(new o.OpenDesktopMediaAccessDenied({error:e}))}))}})},function(e,t,n){"use strict";var r,i=n(87),o=i.tagLogger("PCStats");e.exports=r=i.prototypeExtend({__init__:function(){this._webrtc||this._stream&&(this._webrtc=this._stream._webrtc),this.samplesDatas={},this.gatherResults={},this._bysamples={},!1!==this._inbound_&&(this._bysamples["inbound-rtp"]=["bytesRateReceived","packageLossRate","bytesReceived","packetsLost","packetsReceived","pliCount","framesDecoded"]),!1!==this._outbound_&&(this._bysamples["outbound-rtp"]=["bytesRateSent","bytesSent","packetsSent","qpSum","pliCount"])},_onGatherResult:function(e,t,n,r){var i=this;if(i._service&&i._service.current&&emedia.config.remainLastStatsCount){var o=i._service.current._trackStats;o||(o=i._service.current._trackStats={});var s=(o[e]||(o[e]={}))[t];s||(s=o[e][t]={});var a=s[n];a||(a=s[n]=new Array(emedia.config.remainLastStatsCount)),void 0===a.curIndex&&(a.curIndex=0),a[a.curIndex]={data:r,timestamp:new Date},a.curIndex=(a.curIndex+1)%emedia.config.remainLastStatsCount}"function"===typeof this.onGatherResult&&this.onGatherResult(e,t,n,r)},stats:function(e){if(this._webrtc&&this._webrtc._rtcPeerConnection)return this._webrtc._rtcPeerConnection.getStats(e);o.warn("not found webrtc or peer connection")},statsOfTrack:function(e){if(!e instanceof window.MediaStreamTrack)throw o.error("selector not a MediaStreamTrack"),"selector not a MediaStreamTrack";return this.stats(e)},audioTrack:function(e){var t=e&&e.getAudioTracks();return t&&t.length?t[0]:void 0},videoTrack:function(e){var t=e&&e.getVideoTracks();return t&&t.length?t[0]:void 0},gatherTrack:function(e,t){var n=this;t=e.kind||t,t=t&&t.toLowerCase();var r=e.id;this.statsOfTrack(e).then((function(i){n.samplesDatas[r]||(n.samplesDatas[r]={});var s=n.samplesDatas[r];i.forEach((function(r,i){var a=n._bysamples[r.type],c=r.mediaType||i.indexOf("ideo")>=0&&"video"||i.indexOf("udio")>=0&&"audio"||void 0;if(a&&a.length&&(!0===emedia.config._printDebugStats&&o.debug(i,r,e,c,t),!c||c===t)){var u=s[r.type]||(s[r.type]={});a.forEach((function(n){var i=u[n]||(u[n]=[]),o={timestamp:r.timestamp,kind:r.mediaType||e.kind||t};o[n]="packageLossRate"===n?{packetsLost:r["packetsLost"],packetsReceived:r["packetsReceived"]}:"bytesRateReceived"===n?r["bytesReceived"]:"bytesRateSent"===n?r["bytesSent"]:r[n],i.push(o)}))}}))}))},gatherWebrtcMediaStream:function(e,t){var n=this;t?"audio"!==t.toLowerCase()?"video"!==t.toLowerCase()||e.getVideoTracks().forEach((function(e){n.gatherTrack(e,e.kind||t.toLowerCase())})):e.getAudioTracks().forEach((function(e){n.gatherTrack(e,e.kind||t.toLowerCase())})):e.getTracks().forEach((function(e){n.gatherTrack(e)}))},gatherWebrtc:function(){this._webrtc._localStream&&this.gatherWebrtcMediaStream(this._webrtc._localStream),this._webrtc._remoteStream&&this.gatherWebrtcMediaStream(this._webrtc._remoteStream)},_gather_inbound_rtp_packageLossRate:function(e){if(!e||0===e.length)return 0;var t=0,n=0;if(e.length>1)for(var r=1;r<e.length;r++){var i=e[r],o=e[r-1];i.packageLossRate.packetsReceived!=o.packageLossRate.packetsReceived?(t+=(i.packageLossRate.packetsLost-o.packageLossRate.packetsLost)/(i.packageLossRate.packetsReceived-o.packageLossRate.packetsReceived),n++):(t=0,n=0)}return e.length>=emedia.config.statsSeconds&&e.shift(),0==n?0:t/n},_gatherBytesRate:function(e,t,n){if(!n||0===n.length)return 0;var r=n[n.length-1][t]-n[0][t],i=n[n.length-1].timestamp-n[0].timestamp;return n.length>=emedia.config.statsSeconds&&n.shift(),0===i?0:parseFloat(1e3*r/i).toFixed(2)},_gather:function(e,t,n){e=e.replace(/[^\w]/g,"_"),t=t.replace(/[^\w]/g,"_");var r=i.list("_gather",e,t).join("_");if("function"===typeof this[r])return this[r](n);if(t.startsWith("bytesRate"))return this._gatherBytesRate(e,t,n);var o=n.shift();return o&&o[t]||0},_statsCount:function(){var e=this;function t(){i.forEach(e.samplesDatas,(function(t,r){var i=e.gatherResults[t]=e.gatherResults[t]||{};n(t,i,r)}))}function n(e,t,n){i.forEach(n,(function(n,i){var o=t[n]||(t[n]={});r(e,o,n,i)}))}function r(t,n,r,o){i.forEach(o,(function(i,o){var s=n[i]=e._gather(r,i,o);e._onGatherResult(t,r,i,s)}))}t()},gather:function(){this.gatherWebrtc(),this._statsCount()},intervalGather:function(e){this._intervalId&&clearInterval(this._intervalId),this._intervalId=setInterval(this.gather.bind(this),e||1e3)},stopIntervalGather:function(){this._intervalId&&clearInterval(this._intervalId)}});var s={},a=r.echo=function(e){i.forEach(e,(function(e,t){var n;!s[t.id]&&t._webrtc&&!t._webrtc.closed&&t.getMediaStream()?(s[t.id]=n=new r({_webrtc:t._webrtc}),n._mediaStream=t.getMediaStream()):!s[t.id]||t._webrtc&&!t._webrtc.closed&&t.getMediaStream()||i.removeAttribute(s,t.id)}));var t=[];i.forEach(s,(function(n,r){e&&e[n]?(r.gatherWebrtcMediaStream(r._mediaStream),r._statsCount()):t.push(n)})),i.forEach(t,(function(e,t){i.removeAttribute(s,t)}))};r.intervalEcho=function(e,t){return setInterval((function(){a(e)}),t)},i.forEach(["inbound","outbound"],(function(e,t){i.forEach(["Audio","Video"],(function(e,n){(function(e,t){var n;r[e+t]=n=function(o,s,a){var c;n.__intervalIds||(n.__intervalIds={}),c=this instanceof emedia.XService?this:emedia.useCurrentXService;var u=o.id+"___"+c.namespace,f=n.__intervalIds&&n.__intervalIds[u];return f&&clearInterval(f),f=setInterval((function(){var a,d=n[u];(!d&&o&&o._webrtc&&!o._webrtc.closed&&o.getMediaStream()?(n[u]=d=new r({_webrtc:o._webrtc,_inbound_:"inbound"===e,_outbound_:"outbound"===e}),d._service=c,s&&(d.onGatherResult=s),d._mediaStream=o.getMediaStream()):!d||o&&o._webrtc&&!o._webrtc.closed&&o._webrtc.__id===d._webrtc.__id&&o.getMediaStream()&&d._mediaStream&&d._mediaStream.id===o.getMediaStream().id||(i.removeAttribute(n,u),d=null),d)?(d.gatherWebrtcMediaStream(d._mediaStream,t),d._statsCount()):o&&c&&(a=c.getStreamById(o.id))?o=a:f&&clearInterval(f)}),a),n.__intervalIds[u]=f,f}})(t,n)}))}))},function(e,t,n){"use strict";var r,i=n(87),o=i.tagLogger("DefaultTrack"),s=n(163);function a(e){var t;return t=document.createElement("canvas"),e.appendChild(t),t.style.cssText="position: absolute; background: transparent; width: 100%; height: 100%",t.width=e.offsetWidth,t.height=e.offsetHeight,o.warn("Canvas",t.width,t.height),t}e.exports=r=s.extend({__init__:function(){this._canvas||(this._canvas=a(this._target)),this._canvasContext||(this._canvasContext=this._canvas.getContext("2d"))},resizeCanvas:function(){},_calPosition:function(){var e=s.prototype._calPosition.apply(this,arguments);return e.x=Math.floor(e.x*this._canvas.width/e.width),e.y=Math.floor(e.y*this._canvas.height/e.height),e},_draw:function(e,t,n,r,i,o){var s=this,a=s._canvasContext;(!t||t<=1)&&(t=2);var c=a.getImageData(e.x-t/2,e.y-t/2,t,t),u=function(e,t,n,r,i){for(var o=0,s=e.data;o<s.length;o+=4){var a={r:void 0===t?s[o]:t,g:void 0===n?s[o+1]:n,b:void 0===r?s[o+2]:r,alpha:void 0===i?s[o+3]:i};s[o]=a.r,s[o+1]=a.g,s[o+2]=a.b,s[o+3]=a.alpha}};c&&u(c,n,r,i,o),a.putImageData(c,e.x,e.y)},redraw:function(e,t,n,i,o,s){var a=this,c=r.prototype._draw.bind(a);c({x:e,y:t},2)},onMouseTrigger:function(e,t){e.isLeftKey()&&this._draw(e.xy,8,189,56,51,255),e.isRightKey()&&this._draw(e.xy,8,45,23,189,255),e.isWheelKey()&&this._draw(e.xy,8,58,189,76,255)},onMouseTrack:function(e,t,n){this._draw(e,2,227,18,247,255)}})},function(e,t,n){"use strict";var r=n(87),i=(r.tagLogger("MouseTrack"),n(164));e.exports=r.prototypeExtend({_scale:1,__init__:function(){},getTargetPageXY:function(){var e=this;return e._target&&r.extend({},r.getDomPageRect(e._target))},onMouseTrack:function(e,t,n){},onMouseTrigger:function(e,t){},_onMouseTrack:function(e,t,n){this.onMouseTrack&&this.onMouseTrack(e,t,n)},_onMouseTrigger:function(e,t){this.onMouseTrigger&&this.onMouseTrigger(e,t)},track:function(e){var t=this,n=e=r.extend({},e),i=t.getTargetPageXY();i&&(e=t._calPosition(e),n={x:e.x,y:e.y,pageX:i.x+e.x,pageY:i.y+e.y}),t._onMouseTrack(n,t._lastPageXY,t._lastTrigger),t._lastPageXY=n},trigger:function(e){var t=this;e=new i(e);var n,r=t.getTargetPageXY();r&&(n=t._calPosition(e.xy),e.xy={x:n.x,y:n.y,pageX:r.x+n.x,pageY:r.y+n.y}),e._time||(e._time=(new Date).getTime()),t._onMouseTrigger(e,t._lastTrigger),t._lastTrigger=e},releaseTrigger:function(){this._lastTrigger=void 0,this._lastPageXY=void 0,this.onReleaseTrigger&&this.onReleaseTrigger(this._lastTrigger)},_calPosition:function(e){var t=this;t._referenceVideo&&(e=emedia.Service.prototype.eventXYAtVideo.call(null,e,t._referenceVideo));var n=t.getTargetPageXY();if(!n)return e;r.isFloat(e.x)&&void 0!==e.width&&(e.x=e.x*e.width*t._scale*(n.width/e.width)),r.isFloat(e.y)&&void 0!==e.height&&(e.y=e.y*e.height*t._scale*(n.height/e.height)),r.isFloat(e.x)&&void 0===e.width&&(e.x=e.x*t._scale*n.width),r.isFloat(e.y)&&void 0===e.height&&(e.y=e.y*t._scale*n.height),r.isInt(e.x)&&void 0!==e.width&&(e.x=e.x*t._scale*(n.width/e.width)),r.isInt(e.y)&&void 0!==e.height&&(e.y=e.y*t._scale*(n.height/e.height)),r.isInt(e.x)&&void 0===e.width&&(e.x=e.x*t._scale),r.isInt(e.y)&&void 0===e.height&&(e.y=e.y*t._scale);var i=Math.floor(e.x),o=Math.floor(e.y);return i<0&&(i=n.width+i),o<0&&(o=n.width+o),{x:i,y:o,width:n.width,height:n.height}}})},function(e,t,n){"use strict";var r=n(87),i=(r.tagLogger("MouseTrigger"),{LEFT:1,WHEEL:2,RIGHT:4,WHEEL_ROLL_UP:8,WHEEL_ROLL_DOWN:16,KEY_UP:0,KEY_DOWN:1,MOVE:2,KEYBOARD_DOWN:3,KEYBOARD_UP:4});e.exports=r.prototypeExtend({_timeoutMillis:500,_time:(new Date).getTime(),isKeyup:function(){return i.KEY_UP==this.oper},isKeydown:function(){return i.KEY_DOWN==this.oper},isWheelup:function(){return i.WHEEL_ROLL_UP==this.btn},isWheeldown:function(){return i.WHEEL_ROLL_DOWN==this.btn},isLeftKey:function(){return i.LEFT==this.btn},isRightKey:function(){return i.RIGHT==this.btn},isWheelKey:function(){return i.WHEEL==this.btn},isWheelRoll:function(){return this.isWheeldown()||this.isWheelup()},timeout:function(){var e=(new Date).getTime();return e-this._time>=this._timeoutMillis},_toString:function(){return r.list("btn:",this.btn,", oper:",this.oper,", timeout:",this.timeout(),", at (",this.xy.x,", ",this.xy.y,")").join("")}}),e.exports.BTN=i},function(e,t,n){"use strict";var r=n(2),i=o(r);function o(e){return e&&e.__esModule?e:{default:e}}var s=n(87),a=s.tagLogger("AddonsP2P"),c=n(150),u=function(e){var t=e.extend({postMessage:function(t,n){var r=this,i=t.tsxId;t.tsxId||(i=t.tsxId="MSG"+Date.now()+"-"+emedia.__session_globalCount++),e.prototype.postMessage.call(r,t,n),function(e){var t=r.owner;t.isP2P()&&r._callbacks[e]&&setTimeout((function(){var t=r._callbacks[e];if(t&&1004===t.op){var n=r.newMessage({op:1001,tsxId:t.tsxId,memId:t.memId,result:0,msg:"3000ms not recv response. will success callback. "+t.tsxId});r.onMessage(n)}}),3e3)}(i)},__modifyMessageForPost:function(t){var n=this;t=e.prototype.__modifyMessageForPost.call(n,t);var r=n.owner;if(r.isP2P()){if(102===t.op||105===t.op){var o=n.newMessage({op:1001,tsxId:t.tsxId,memId:t.memId,result:0,streamId:t.rtcId+(r.isCaller()?"__Caller":"__Callee"),sver:1});if(setTimeout((function(){n.onMessage(o)}),100),!t._cached_){var a=s.extend({_cached_:!0},t);s.removeAttribute(a,"tsxId"),102===t.op&&(r.__cache_[t.rtcId]=[]).push(a),105===t.op&&r.__cache_[t.rtcId]&&r.__cache_[t.rtcId].push(a),r.__cache_[t.rtcId]&&(r.__cache_[t.rtcId].selfId=r.getMemberId())}}if(s.removeAttribute(t,"_cached_"),t.memId){var c=n.newMessage({op:1004,sessId:s.removeAttribute(t,"sessId"),memId:s.removeAttribute(t,"memId"),tsxId:s.removeAttribute(t,"tsxId"),arg:(0,i.default)(t)});t=c}switch(t.op){case 205:o=n.newMessage({op:1001,tsxId:t.tsxId,result:0});return void setTimeout((function(){n.onMessage(o)}),50);case 102:case 104:case 105:case 106:case 107:if(-10===t.endReason)return;case 1001:case 400:c=n.newMessage({op:1004,sessId:s.removeAttribute(t,"sessId"),tsxId:s.removeAttribute(t,"tsxId"),arg:(0,i.default)(t)});t=c;break;case 303:case 206:return;default:}}return t},onP2PMessage:function(e){var t=this,n=t.owner;if(t.owner.isConfr())a.warn("Recv p2p ctrl message. when CONFR. ignore");else{var r=JSON.parse(e.arg);if(r.memId=e.memId,r.tsxId=e.tsxId,r.sessId=e.sessId,400===r.op&&(r.streamId=r.rtcId+(t.owner.isCaller()?"__Callee":"__Caller")),1001!==r.op){var i=t.newMessage({op:1001,tsxId:e.tsxId,memId:e.memId,sessId:e.sessId,result:0,msg:"Web sdk success recv"});102!==r.op&&105!==r.op||s.extend(i,{streamId:r.rtcId+(n.isCaller()?"__Callee":"__Caller"),sver:1}),t.postMessage(i)}(function(e){setTimeout((function(){t.onMessage(e)}),10)})(r)}}});return s.extend(t.prototype._events,{1004:"onP2PMessage"}),t},f=function(e){var t=e.extend({__init__:function(){var t=this;e.prototype.__init__.call(t),t.__cache_={};var n=t.iceRebuild;t.iceRebuild=function(e){var t=this;t.isP2P()&&e.rtcId?e._webrtc&&!0===e._webrtc.answerWebrtc?a.warn("Stream not auto iceRebuild. caused by answer webrtc. it = ",e.id,e):e.located()?n.call(t,e):a.warn("Stream not auto iceRebuild. caused by not located. it = ",e.id,e):n.call(t,e)}},onEnter:function(t,n){var r=this;try{e.prototype.onEnter.call(r,t,n)}finally{if(!r.isP2P()||!(n=r._cacheMembers[n.id]))return;s.forEach(r.__cache_,(function(e,t){!0!==t.answered&&s.forEach(t,(function(e,t){(function(e){e.memId=n.id,r.postMessage(e)})(t)}))}))}},rejectAnswer:function(e,t,n,r){var i=this,o=i.newMessage().setOp(107).setRtcId(t).setMemId(e).setEndReason(n);i.postMessage(o,(function(e){if(0!=e.result)return i.onEvent(new c.RspFail({request:o,response:e})),void(r&&r(new c.RspFail({request:o,response:e})))}))},closeWebrtc:function(t,n,r){var i=this,o=!1;if(i.isP2P()){var c=i._ices[t];if(c){var u=c.iceConnectionState();o="failed"===u,o=o&&c._rebuildCount<emedia.config.iceRebuildCount,a.warn("Webrtc state failed. it is ",t,c._rebuildCount,emedia.config.iceRebuildCount,c.__id)}}if(e.prototype.closeWebrtc.call(i,t,n,r||o),i.isP2P()&&!r&&o&&s.forEach(i._cacheStreams,(function(e,n){n.rtcId===t&&(i._linkedStreams[e]=n,a.warn("Reput stream to _linkedStreams",e))})),i.isP2P()&&!n){s.removeAttribute(i.__cache_,t);var f=s.extend({},i._cacheStreams);s.forEach(f,(function(e,n){if(t===n.rtcId){s.removeAttribute(i._linkedStreams,n.id);var r=s.removeAttribute(i._cacheStreams,n.id);if(i._streamAutomators&&s.removeAttribute(i._streamAutomators,n.id),a.warn("P2P close webrtc. remove stream from _cacheStreams. it = ",n.id,n),r._localMediaStream&&i._service._stopTracks(r._localMediaStream),i.onRemoveStream){n=i.newStream(n);i.onRemoveStream(n)}}}))}},subscribeStream:function(t,n,r,i){var o=this;if(o.isP2P()){var s=o._ices[t],u=o._cacheStreams[n],f=u;if(f.updateAttributes({_webrtc:s,rtcId:t}),i=i||{subSVideo:!0,subSAudio:!0},f.updateAttributes({subArgs:f.subArgs||{subSVideo:!0,subSAudio:!0}}),f._webrtc&&f._webrtc.setSubArgs(f._webrtc.subArgs||{subSVideo:!0,subSAudio:!0}),!f.subArgs.subSVideo&&i.subSVideo&&f.voff)throw a.error("Sub not allow. stream voff"),"Sub not allow. stream voff";if(!f.subArgs.subSAudio&&i.subSAudio&&f.aoff)throw a.error("Sub not allow. stream aoff"),"Sub not allow. stream aoff";if(f.subArgs.subSVideo&&!i.subSVideo&&!f.voff&&emedia.isSafari)throw a.error("Sub not allow. safari close sub video. will error"),"Sub not allow. safari close sub video. will error";i&&f._webrtc&&f._webrtc.setSubArgs(i),i&&f.updateAttributes({subArgs:i});var d=new c.SubSuccess({stream:f,hidden:!0});o._updateRemoteStream(f,f._webrtc.getRemoteStream()),o.onEvent(d)}else e.prototype.subscribeStream.call(o,t,n,r,i)},unsubscribeStream:function(t){var n=this;n.isP2P()||e.prototype.unsubscribeStream.call(n,t)},onPub:function(t,n,r){var i=this;if(i.isP2P()){var o=e.prototype.onPub.call(i,t,n,r);return o}e.prototype.onPub.call(i,t,n,r)},onStreams:function(t,n){var r=this;r.isP2P()?a.warn("P2P ingrone the onStreams"):e.prototype.onStreams.call(r,t,n)},_howDoWebrtcWhenCrtExsitsWebrtc:function(t){var n=this;n.isP2P()?n.closeWebrtc(t.getRtcId(),!0,!0):e.prototype._howDoWebrtcWhenCrtExsitsWebrtc.call(n,t)},createWebrtcAndSubscribeStream:function(t,n,r,i){var o=this;if(o.isP2P()){o=this;n||(n={});var u=o._cacheStreams[t],f=o._cacheMembers[u.owner.id],d=u;i=i||d.subArgs||{subSVideo:!0,subSAudio:!0};var l=u.vcodes,p=f.vcodes,h=o.supportVCodes,m=o._getOptimalVideoCodecsSubset(l,p,h);i=i||d.subArgs;var v=d.subArgs,g=!(d.vcodes&&d.vcodes.length>0),y={offerToReceiveAudio:!0,offerToReceiveVideo:i.subSVideo&&g};y.offerToReceiveAudio||y.offerToReceiveVideo||a.warn("offerToReceiveAudio == false and offerToReceiveVideo == false");var b=o.createWebrtc({_rtcId:d.rtcId,iceServerConfig:r,optimalVideoCodecs:m,offerOptions:y,onGotMediaStream:function(e){var t=new c.SubSuccess({stream:d,hidden:!0});n.onGotRemote&&n.onGotRemote(d),o.onEvent&&o.onEvent(t)}},d.iceRebuildCount),_=b.getRtcId();a.warn(_," sub stream ",t,m);var w=d._webrtc;if(d.updateAttributes({_webrtc:b,rtcId:_,owner:s.extend({},f)}),o._ices[_]=b,b.answerWebrtc=!0,i&&d._webrtc&&d._webrtc.setSubArgs(i),i&&d.updateAttributes({subArgs:i}),_==="rtc-"+o.ticket.confrId){o.__lastCalleePub;var S=o._cacheStreams[_+(o.isCaller()?"__Caller":"__Callee")];S=new o._service.AVPubstream(S||{constaints:{audio:!d.aoff,video:!d.voff}});w&&w.getLocalStream()&&o._service._stopTracks(w.getLocalStream()),o._service.openUserMedia(S).then((function(){var e=o.newStream(S);e.updateAttributes({_localMediaStream:S.localStream,_webrtc:b,rtcId:b.getRtcId(),id:_+(o.isCaller()?"__Caller":"__Callee"),owner:{id:o.getMemberId(),nickName:o.nickName,name:o.sysUserId,ext:o.extObj}}),o.onEvent(new c.PushSuccess({stream:e,hidden:!0})),C(S.localStream),o.answerCall(_,S,x)}),x)}else C(),o.answer(_,x)}else e.prototype.createWebrtcAndSubscribeStream.call(o,t,n,r,i);function x(e){a.warn("sub stream error",t,e),v&&d._webrtc&&d._webrtc.setSubArgs(v),v&&d.updateAttributes({subArgs:v}),e=new c.SubFail({stream:d,hidden:!0===e.hidden,cause:e}),n&&n.onEvent&&n.onEvent(e),o.onEvent&&o.onEvent(e)}function C(e){e&&b.setLocalStream(e),b.setRemoteDescription(d.sdp),d.cands&&d.cands.length>0&&b.addIceCandidate(d.cands)}}});return t},d=function(e,t,n){var r=e.extend({Session:t,Attendee:n,__init__:function(){var t=this;e.prototype.__init__.call(t),void 0!==t.useRTCCfg&&!1!==t.useRTCCfg&&null!==t.useRTCCfg||(t.useRTCCfg=emedia.config.forceUseRTCCfgIfServerReturnWhenP2P)},push:function(t,n,r){var i=this;if(i.current&&i.current.isP2P()){if(2===t.type)throw a.error("P2P do not allow audio_mixer"),"P2P do not allow audio_mixer";if(t instanceof i.AVPubstream&&!t.rtcId){var o=i.current._cacheStreams["rtc-"+i.current.ticket.confrId+"__Caller"]||i.current._cacheStreams["rtc-"+i.current.ticket.confrId+"__Callee"];o||(t.rtcId="rtc-"+i.current.ticket.confrId)}}e.prototype.push.call(i,t,n,r)},newSession:function(t,n){var r=this,i=e.prototype.newSession.call(r,t,n),o=i.onTermC,u=i.onAnsC;return s.extend(i,{onInitC:function(e){if(t.isP2P()){if(e.rtcId==="rtc-"+t.ticket.confrId){var n=e.rtcId+(t.isCaller()?"__Callee":"__Caller"),r=t._cacheStreams[n];if(r&&r.owner&&r.owner.id!==e.memId)return t.rejectAnswer(e.memId,e.rtcId,10),void t.postMessage(t.newMessage({op:1001,memId:e.memId,tsxId:e.tsxId,result:-554,msg:"Other device call it. you no."}))}e.pubS.sdp=e.sdp,e.pubS.cands=e.cands,e.pubS.id=e.rtcId+(t.isCaller()?"__Callee":"__Caller"),e.pubS._located=!1,e.pubS.memId=e.memId,e.pubS.rtcId=e.rtcId,e.pubS.sver=0;r=t._cacheStreams[e.pubS.id];r&&(e.pubS.sver=r.sver+1,s.removeAttribute(t._maybeNotExistStreams,e.pubS.id)),t.onPub.call(t,++t._cver,e.memId,e.pubS)}},onTermC:function(e){if(t.isP2P()){if(-20===e.endReason){var n=t._cacheStreams[e.rtcId+"__Caller"];return a.warn("Begin re-publish. 20",n),void(n&&r._republish(n))}if(e.memId&&e.memId!==t.getMemberId()){var i=[];return s.forEach(t._cacheStreams,(function(e,t){i.push(t)})),i=i.sort((function(e,n){var r=-1;return e.id>n.id&&(r=1),t.isCallee()?0-r:r})),void s.forEach(i,(function(n,r){r&&r.owner&&r.owner.id===e.memId&&e.rtcId===r.rtcId&&(-10!==e.endReason&&o.call(t,e),e.rtcId==="rtc-"+t.ticket.confrId&&t.onUnpub(++t._cver,e.memId,r.id),10===e.endReason&&t.onEvent(new c.OtherDeviceAnswer({rtcId:e.rtcId,stream:r}))),r&&r.owner&&r.owner.id===t.getMemberId()&&e.rtcId===r.rtcId&&(t.closeWebrtc(e.rtcId),t.onUnpub(++t._cver,r.owner.id,r.id))}))}-10!==e.endReason&&o.call(t,e),10===e.endReason&&t.onEvent(new c.OtherDeviceAnswer({rtcId:e.rtcId}))}else o.call(t,e)},onAnsC:function(e){if(t.isP2P())if(t.__cache_[e.rtcId]){if(!0===t.__cache_[e.rtcId].answered)return a.warn("Webrtc ",e.rtcId,"had been ansC"),t.rejectAnswer(e.memId,e.rtcId,10),void t.postMessage(t.newMessage({op:1001,memId:e.memId,tsxId:e.tsxId,result:-554,msg:"Other device sub it. you no."}));try{if(e.pubS){var n=t.newStream(e.pubS);n.updateAttributes({_webrtc:t._ices[e.rtcId],rtcId:e.rtcId,id:e.rtcId+(t.isCaller()?"__Callee":"__Caller"),owner:t._cacheMembers[e.memId]}),t._cacheStreams[n.id]?t._cacheStreams[n.id]=n:t.onPub.call(t,++t._cver,e.memId,n),t.onEvent(new c.SubSuccess({stream:n,hidden:!0}))}var r=t._cacheMembers[e.memId];u.call(t,e),s.forEach(t._cacheMembers,(function(n,i){n!==e.memId&&r.memName===i.memName&&t.rejectAnswer(n,e.rtcId,10)}))}finally{t.__cache_[e.rtcId].answered=!0}}else a.warn("Webrtc ",e.rtcId,"not created. drop the answer");else u.call(t,e)}})}});return r};e.exports=function(e){var t=e.prototype.Session||n(149),r=u(t.extend({})),i=e.prototype.Attendee||n(153),o=f(i.extend({}));return d(e,r,o)}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.outer=void 0;var r=n(142),i=S(r),o=n(115),s=S(o),a=n(145),c=S(a),u=n(80),f=S(u),d=n(152),l=S(d),p=n(8),h=S(p),m=n(2),v=S(m),g=n(167),y=n(146),b=S(y),_=n(5),w=S(_);function S(e){return e&&e.__esModule?e:{default:e}}var x={};function C(t){if(t&&0!=(0,f.default)(t).length)if(t.key){var n=t.key,r=t.val,i=t.success,o=t.error,s=t.type;if(this.__current_confrId){var a=this._confrs[this.__current_confrId].roleToken;if(a){var c={roleToken:a,cattrs:[{key:n,val:r,op:s}]};e.ajax({type:"POST",url:emedia.config.restPrefix+"/easemob/rtc/confr/attrs/update",data:(0,v.default)(c),contentType:"application/json",success:function(e){i&&"function"==typeof i&&i(e)},error:function(e){o&&"function"==typeof o&&o(e)}})}else console.warn("roleToken is not have")}else console.warn("please set_confr_attrs after joined")}else console.warn("options.key is not have");else console.warn("options is not have")}function E(t,n){var r={type:"POST",url:emedia.config.restPrefix+"/easemob/rtc/confr/attrs/update",data:(0,v.default)({roleToken:t,cstate:{muteAll:n}}),contentType:"application/json"};return new h.default((function(t,n){e.ajax((0,l.default)({},r,{success:function(e){0==e.error?t(e):n(e)},error:function(e){n(e)}}))}))}g.single.onMemberJoin=function(e,t){emedia.decodeMemeberName(e),this.onMemberJoined(e,g.single._confr(t))},g.single.onMemberLeave=function(e,t,n){emedia.decodeMemeberName(e),this.onMemberExited(e,t,g.single._confr(n))},g.single._onRoleUpdated=function(e,t){this.onRoleChanged(e,g.single._confr(t))},g.single._onAddMemberStream=function(e,t){e&&emedia.decodeMemeberName(e.owner),this.onStreamAdded(e.owner,e,g.single._confr(t))},g.single._onRemoveMemberStream=function(e,t){e&&emedia.decodeMemeberName(e.owner),this.onStreamRemoved(e.owner,e,g.single._confr(t))},g.single._onUpdateMemberStream=function(e,t,n){e&&emedia.decodeMemeberName(e.owner),this.onStreamUpdated&&this.onStreamUpdated(e.owner,e,t,g.single._confr(n))},g.single.onExit=function(e,t,n){this.onConferenceExit(e,t,g.single._confr(n))},x.onMemberJoined=function(e){},x.onMemberExited=function(e,t){},x.onRoleChanged=function(e){},x.onStreamAdded=function(e,t){},x.onStreamRemoved=function(e,t){},x.onConferenceExit=function(e,t){},x.joinConferenceWithTicket=g.single.joinUseTicket,x.joinConference=g.single.joinUsePassword,x.getConferenceTkt=g.single.reqTkt,x.publish=function(e,t,n){return g.single.shareVideoWithAudio(e.video,e.audio,t,n)},x.unpublish=function(e){return g.single.hungup(e)},x.unsubscribe=function(e){return g.single.hungup(e)},x.exitConference=function(e){return g.single.exit(e||!1)},x.getConferenceInfo=function(e,t){return g.single.selectConfr(e,t)},x.createConference=g.single.createConfrSptMnPrg,x.grantRole=function(e,t,n){return g.single.chanageRoles(n,t,e.id)},x.degradeRole=function(t,n,r){if(t)if(n&&n instanceof Array!=0&&0!=n.length){if(r){var i=this._confrs[t];if(i){var o=i.role,s=i.roleToken;if(!(Number(r)>=Number(o))){var a={type:"POST",url:emedia.config.restPrefix+"/easemob/rtc/role/degrade",data:(0,v.default)({roleToken:s,uids:n,role:r}),contentType:"application/json"};return new h.default((function(t,n){e.ajax((0,l.default)({},a,{success:function(e){0==e.error?t(e):n(e)},error:function(e){n(e)}}))}))}console.warn("only degradeRole,oldRole: "+o+" >>> toRole: "+r)}else console.warn("confr is not exist")}}else console.warn("members is must Array also length > 0")},x.kickMembersById=function(e,t){return g.single.kickMember(t,e.id)},x.destroyConference=function(e){return g.single.disbandConfr(e,e.roleToken)},x.setConferenceAttrs=function(e){e.type="UPDATE",C.call(this,e)},x.deleteConferenceAttrs=function(e){e.type="DEL",C.call(this,e)},x.onConfrStateUpdated=function(e){var t=this,n=function(){var n=e.muteAll;void 0!==n&&(n?t.onMuteAll&&"function"==typeof t.onMuteAll&&t.onMuteAll():t.onUnMuteAll&&"function"==typeof t.onUnMuteAll&&t.onUnMuteAll())},r=this.__current_confrId;if(r){var i=this._services[r];if(i){var o=i.current;o&&o.role&&o.role!=this.Role.ADMIN&&n()}}},x.joinRoom=function(){var t=(0,c.default)(i.default.mark((function t(n){var r,o,a,c,u,f,d,p,m,g,y,b,_,w,S,x,C,E,I,T;return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=function(t){var n=emedia.config,r=n.restPrefix,i=n.appkey;if(!i)throw new Error("in joinRoom appkey is not defined");var o=i.split("#")[0],s=i.split("#")[1],a=r+"/"+o+"/"+s+"/conferences/room";return new h.default((function(n,r){var i={url:a,data:(0,v.default)(t),type:"POST",contentType:"application/json",success:function(e){e.error?r(e):n(e)},error:function(e){r(e)}};e.ajax(i)}))},o=this,a=function(t){var n=emedia.config.restPrefix+"/easemob/rtc/req/ticket?_ct="+(new Date).getTime();t.region&&(n+="&REGION="+t.region),t.confrId&&(n+="&CONFRID="+t.confrId);var r={type:"POST",url:n,data:(0,v.default)(t),contentType:"application/json",dataType:"json"};return new h.default((function(t,n){e.ajax((0,l.default)({},r,{success:function(e){0==e.error?t(e):n(e)},error:function(e){n(e)}}))}))},c=n.roomName,u=n.password,f=n.role,d=n.config,p=this.identityName,m=this.identityToken,c){t.next=7;break}throw new Error("the roomName is required at joinRoom");case 7:if(u){t.next=9;break}throw new Error("the password is required at joinRoom");case 9:if(p){t.next=11;break}throw new Error("the memName is required at joinRoom");case 11:if(m){t.next=13;break}throw new Error("the token is required at joinRoom");case 13:if(f){t.next=15;break}throw new Error("the role is required at joinRoom");case 15:return g=(0,l.default)({roomName:c,password:u,memName:p,token:m},d),d&&d.supportWechatMiniProgram&&(g.useVCodes=["H264","VP8"]),t.next=19,r(g);case 19:return y=t.sent,b=y.confrId,_={uid:p,token:m,confrId:b,password:u,role:f,terminal:this._terminalInfo},t.next=24,a(_);case 24:return w=t.sent,w.mixed=11===w.type||12===w.type,w.id=w.serverConfrId=w.confrId=b,this._confrs[b]=(0,s.default)(this._confrs[b]||{},w),S=w.ticket,x=d||{},C=x.nickName,E=x.ext,I=y.isCreator,t.next=33,o.joinConferenceWithTicket(b,S,(0,l.default)({nickName:C},E));case 33:return T=t.sent,I&&(T.isCreator=I),t.abrupt("return",T);case 36:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),x.requestToTalker=function(e){if(e){var t=this._services[e];t.requestToTalker()}else console.warn("requestToTalker confrId is required")},x.requestToAdmin=function(e){if(e){var t=this._services[e];t.requestToAdmin()}else console.warn("requestToTalker confrId is required")},x.muteBymemberId=function(e,t){if(e&&t){var n=this._services[e];n.muteBymemberId(t)}else console.warn("muteBymemberId confrId and memberId is required")},x.unmuteBymemberId=function(e,t){if(e&&t){var n=this._services[e];n.unmuteBymemberId(t)}else console.warn("muteBymemberId confrId and memberId is required")},x.muteAll=function(e){if(!e)throw new Error("muteAll confrId is required");var t=this._confrs[e];if(!t)throw new Error("confr is not exist");var n=t.role,r=t.roleToken;if(7!=n)throw new Error("only admin can action");if(!r)throw new Error("roleToken is not exist");var i=!0;return E.call(this,r,i)},x.unmuteAll=function(e){if(!e)throw new Error("unmuteAll confrId is required");var t=this._confrs[e];if(!t)throw new Error("confr is not exist");var n=t.role,r=t.roleToken;if(7!=n)throw new Error("only admin can action");if(!r)throw new Error("roleToken is not exist");var i=!1;return E.call(this,r,i)},x.addLive=function(t,n){if(!t)throw new Error("addLive confrId is required");if(!n)throw new Error("addLive liveCfg is required");var r=this._confrs[t];if(!r)throw new Error("confr is not exist");var i=r.role,o=r.roleToken;if(7!=i)throw new Error("only admin can addLive");if(!o)throw new Error("addLive roleToken is required");var s=emedia.config.restPrefix+"/easemob/rtc/livecfg",a={confrId:t,roleToken:o,liveCfg:n};return new h.default((function(t,n){e.ajax({url:s,type:"POST",data:(0,v.default)(a),contentType:"application/json",dataType:"json",success:function(e){0==e.error?t(e):n(e)},error:function(e){n(e)}})}))},x.updateLiveLayout=function(t,n,r){if(!t)throw new Error("updateLiveLayout confrId is required");if(!n)throw new Error("updateLiveLayout liveId is required");if(!r)throw new Error("updateLiveLayout regions is required");var i=this._confrs[t];if(!i)throw new Error("confr is not exist");var o=i.role,s=i.roleToken;if(7!=o)throw new Error("only admin can updateLiveLayout");if(!s)throw new Error("updateLiveLayout roleToken is required");var a=emedia.config.restPrefix+"/easemob/rtc/live/layout",c={confrId:t,liveId:n,regions:r,roleToken:s};return new h.default((function(t,n){e.ajax({url:a,type:"POST",data:(0,v.default)(c),contentType:"application/json",dataType:"json",success:function(e){0==e.error?t(e):n(e)},error:function(e){n(e)}})}))},x.deleteLive=function(t,n){if(!t)throw new Error("deleteLive confrId is required");if(!n)throw new Error("deleteLive liveId is required");var r=this._confrs[t];if(!r)throw new Error("confr is not exist");var i=r.role,o=r.roleToken;if(7==i){if(o){var s=emedia.config.restPrefix+"/easemob/rtc/delete/live",a={confrId:t,liveId:n,roleToken:o};return new h.default((function(t,n){e.ajax({url:s,type:"DELETE",data:(0,v.default)(a),contentType:"application/json",dataType:"json",success:function(e){0==e.error?t(e):n(e)},error:function(e){n(e)}})}))}console.error("updateLiveLayout roleToken is required")}else console.warn("only admin can deleteLive")},emedia.decodeMemeberName=function(e){if("function"!==typeof emedia.decodeMemeberNameString)return e;if("string"===typeof e)return emedia.decodeMemeberNameString(e);if(b.default.isArray(e)){for(var t=0;t<e.length;t++)e[t]=emedia.decodeMemeberName(e[t]);return e}return e.name?(e.globalName=e.name,void(e.memName=e.name=emedia.decodeMemeberName(e.name))):e.memName?(e.globalName=e.memName,void(e.memName=e.name=emedia.decodeMemeberName(e.memName))):void 0},emedia.ConfrType=g.single.ConfrType,emedia.Role=g.single.Role,emedia.StreamType=g.single.StreamType,(0,w.default)((function(){var e=window.WebIM;if(e&&e.conn&&"function"===typeof e.conn.onOpened){var t=function(){emedia.decodeMemeberNameString=function(t){if("string"===typeof t){if(t.indexOf(e.conn.orgName)<0)return t;var n=t.indexOf("_");n<0?n=0:n++;var r=t.indexOf("@");return r<0&&(r=t.length),t.substring(n,r)}return t},g.single.setUrlCreator((function(t,n){return e.conn.apiUrl+t})),g.single.setIdentity(e.conn.orgName+"#"+e.conn.appName+"_"+e.conn.user,e.conn.token),emedia.config({appkey:e.conn.appKey})},n=e.conn.onOpened;e.conn.onOpened=function(){n.apply(e.conn,arguments),t()},e.conn.token&&t()}}));t.outer=b.default.extend(g.single,x)}).call(this,n(5))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.single=void 0;var r=n(142),i=I(r),o=n(145),s=I(o),a=n(152),c=I(a),u=n(88),f=I(u),d=n(2),l=I(d),p=n(8),h=(I(p),n(87)),m=I(h),v=n(5),g=I(v),y=n(146),b=I(y),_=n(168),w=I(_),S=n(171),x=n(273),C=n(157),E=I(C);function I(e){return e&&e.__esModule?e:{default:e}}var T=m.default.tagLogger("mgr");window.emedia=window.emedia||{};var O={createConfr:"/easemob/rtc/req/ticket",reqTkt:"/easemob/rtc/req/ticket",chanageRoles:"/easemob/rtc/chanage/roles",disbandConfr:"/easemob/rtc/disband/conference",kickMember:"/easemob/rtc/kick/member",selectConfr:"/easemob/rtc/select/confr"};function R(){this._confrs={},this._services={},this._events={},this._videos={}}R.prototype.ConfrType={COMMUNICATION:10,COMMUNICATION_MIX:11,LIVE:12,P2P:13,INTERCOMM:14},R.prototype.Role={ADMIN:7,TALKER:3,AUDIENCE:1},R.prototype.StreamType={VIDEO:0,DESKTOP:1,MIXVIDEO:2};var k=function(e,t){return function(n){g.default.ajax({type:"POST",url:e,data:(0,l.default)(t),contentType:"application/json",dataType:"json",success:function(r,i,o){T.debug("REST: ",r," -> ",t,e),0===r.error?(m.default.removeAttribute(r,"error"),n.next(r),n.complete()):(m.default.extend(r,{errorType:"server_refuse"}),n.error(r))},error:function(r,i,o){var s={errorType:"http_error",error:r.status,errorMessage:o};T.debug("REST: ",s," -> ",t,e),n.error({errorType:"http_error",error:r.status,errorMessage:o})}})}};(function(e){m.default.forEach(e,(function(e,t){R.prototype[e]=function(n){var r=t;r=r+"?_ct="+(new Date).getTime(),n.region&&(r=r+"&REGION="+n.region),n.confrId&&(r=r+"&CONFRID="+n.confrId);var i=this.createUrl(r,e);return k(i,n)}}))})(O),R.prototype.createUrl=function(e,t){var n=emedia.config&&emedia.config.restPrefix||"";return n+e},R.prototype.setUrlCreator=function(e){this.createUrl=e.bind(this)},R.prototype.destroy=function(){},R.prototype.ZeroStream=E.default.extend({__init__:function(){var e=this;e.type=2,e.id="0",e._located=!1,e.mutedMuted=!1},onGotRemoteMediaStream:function(e){var t=this;if(!t.remotePlayAudioObject){t.id;var n=document.createElement("audio");n.style.display="none",n.id="__o_remote_play_audio_"+t.id,n.autoplay=!0,n.playsinline=!0,t.remotePlayAudioObject=n,document.body.appendChild(n)}t.remotePlayAudioObject.srcObject=e}}),R.prototype.setIdentity=function(e,t,n){this.identityName=e,this.identityToken=t,this.ext=n,this._terminalInfo={browser:emedia.browser,browserVersion:emedia.browserVersion,version:window._emediaVersion||emedia.config.version,userAgent:emedia.config.userAgent},T.info("set identity: ",e,t),this.destroy(),emedia.config({autoSub:!1,onlyEnter:!0})},R.prototype.EventsObservable=n(371).default;var M=(0,x.catchError)((function(e,t){throw T.error(e),e}));function A(e,t,n,r){var i=this,o=void 0,s=void 0;if(arguments.length>=0&&"object"===(0,f.default)(arguments[0])){var a=arguments[0];o=a.region,e=a.confrType,t=a.password,n=a.rec,r=a.recMerge,s=a.liveCfg}return"string"===typeof e&&(e=parseInt(e)),S.Observable.create(R.prototype.createConfr.call(i,{region:o,uid:i.identityName,token:i.identityToken,confrType:e,password:t,terminal:i._terminalInfo,rec:n,recMerge:r,liveCfg:s})).pipe((0,x.map)((function(e){return e.mixed=11===e.type||12===e.type,e.id=e.serverConfrId=e.confrId,i._confrs[e.confrId]=b.default.extend({},e),m.default.removeAttribute(e,"rtcCfg"),e})),M)}function P(e,t,n,r,i){var o=this,s={};if(arguments.length>=0&&"object"===(0,f.default)(arguments[0])){var a=arguments[0];s=(0,c.default)({uid:o.identityName,token:o.identityToken,terminal:o._terminalInfo},a)}else s={uid:o.identityName,token:o.identityToken,terminal:o._terminalInfo,confrType:e,password:t,rec:n,recMerge:r,supportWechatMiniProgram:i};return s.confrType&&(s.confrType=parseInt(s.confrType)),i&&(s.useVCodes=["VP8","H264"]),S.Observable.create(R.prototype.createConfr.call(o,s)).pipe((0,x.map)((function(e){return e.mixed=11===e.type||12===e.type,e.id=e.serverConfrId=e.confrId,o._confrs[e.confrId]=b.default.extend({},e),m.default.removeAttribute(e,"rtcCfg"),e})),M)}function j(e,t){var n,r=this;if(arguments.length>=0&&"object"===(0,f.default)(arguments[0])){var i=arguments[0];e=i.confrId,t=i.password,n=i.role}var o=r._confr(e),s={uid:r.identityName,token:r.identityToken,confrId:o&&o.id||e,password:t,role:n,terminal:r._terminalInfo};return r._confrs[e]&&(s.roleToken=r._confrs[e].roleToken),S.Observable.create(R.prototype.reqTkt.call(r,s)).pipe((0,x.map)((function(t){return t.mixed=11===t.type||12===t.type,t.id=t.serverConfrId=t.confrId=e,r._confrs[e]=m.default.extend(r._confrs[e]||{},t),m.default.removeAttribute(t,"rtcCfg"),t})),M)}function N(e,t,n){var r=this,i=r._confr(n),o=r._service(n),s={confrId:i&&i.id||n,uids:t,role:e,roleToken:i.roleToken};return S.Observable.create(R.prototype.chanageRoles.call(r,s)).pipe((0,x.map)((function(e){return o&&o.current&&o.current._sysCopy(),i.id})),M)}function L(e,t){var n=this,r=n._confr(e),i={confrId:r&&r.id||e,roleToken:r&&r.roleToken||t};return S.Observable.create(R.prototype.disbandConfr.call(n,i)).pipe((0,x.map)((function(t){return n.upload_stats&&setTimeout((function(){return n.upload_stats.stop()}),3e3),m.default.removeAttribute(n._confrs,e),r.id})),M)}function D(e,t){var n=this,r=n._confr(t),i={confrId:r&&r.id||t,uids:e,roleToken:r.roleToken};return S.Observable.create(R.prototype.kickMember.call(n,i)).pipe((0,x.map)((function(e){return r.id})),M)}function B(e,t){var n=this,r=n._confr(e),i={uid:n.identityName,token:n.identityToken,confrId:r&&r.id||e,password:t};return r&&(i.password=t||r.password,i.roleToken=r.roleToken),S.Observable.create(R.prototype.selectConfr.call(n,i)).pipe(M)}function U(e,t){}function F(e,t){var n=this,r=n._confr(e),i=n._service(e);switch(r.type){case 0:case 10:break;case 11:break;case 12:var o=new n.ZeroStream;if(i.current._cacheStreams[o.id]=o,i.current.role==de.Role.AUDIENCE)return re.call(n,e,o,!1,!0).pipe((0,x.concatMap)((function(){return(0,S.of)(m.default.extend({},n._confrs[e]))})));break;case 13:case 14:return(0,S.throwError)("not support conf type: "+r.type);default:return(0,S.throwError)("not support conf type: "+r.type)}return(0,S.of)(m.default.extend({},n._confrs[e]))}function V(e,t,n){var r=this;return emedia.ctrl.support(n,(function(t,n,i){r.onHasRemoteControl(t,n,i,e)}),(function(t,n,i){r.onRemoteFreeControl(t,n,i,e)})),T.info("support remote control. ",e,t),(0,S.of)(m.default.extend({},r._confrs[e]))}function W(e,t,n){var r=this;if(r.joined(e))return(0,S.throwError)("had joined confr "+e+", if you want join again, please call exitConference");var i=r._events[e]=new r.EventsObservable(r,e,(function(t){U.call(r,e,t)}));r.confrEventsObserver&&i.subscribe(r.confrEventsObserver);var o=r._service(e);return o=r._services[e]=new emedia.XService({listeners:i,nickName:n&&n.nickName}),o.setup(t,n),S.Observable.create((function(t){if(emedia.config.uploadStats){r.upload_stats=new w.default(emedia);try{r.upload_stats.connect_ws()}catch(n){console.error("upload_stats.connect_ws error",n)}}o.join((function(n){if(r.upload_stats){var i=o.current._session._sessionId;r.upload_stats.join_success(i)}r.__current_confrId=e,r._confrs[e].joinId=n,r._confrs[e].role=o.current&&o.current.role,t.next(r._confrs[e]),t.complete()}),(function(e){r.upload_stats&&r.upload_stats.join_fail(),o.exit(),t.error({errorType:"join_fail",error:-200,errorMessage:e.message()})}))})).pipe((0,x.concatMap)((function(t,n){return V.call(r,e,t,o)})),(0,x.concatMap)((function(t,n){return F.call(r,e,t)})),M)}function q(e,t,n){var r=this;return j.call(r,e,t,n).pipe((0,x.concatMap)((function(t,i){return W.call(r,e,t.ticket,n)})))}function $(e,t,n){var r=this;return B.call(r,e,t,n).pipe((0,x.concatMap)((function(i,o){return q.call(r,e,t,n)})))}function G(e,t){var n=this,r=n._service(e);return S.Observable.create((function(e){r.openUserMedia(t).then((function(){e.next(t),e.complete()}),(function(t){e.error({errorType:"open_user_media_fail",error:-201,errorMessage:t.message()})}))})).pipe(M)}function z(e,t){var n=this,r=n._service(e);return S.Observable.create((function(e){r.push(t,(function(t){e.next(t),e.complete()}),(function(t){e.error({errorType:"push_fail",error:-203,errorMessage:t.message()})}))})).pipe(M)}function H(e,t,n){var r=this,i=(r._confr(n),r._service(n));return e="string"===typeof e?i.getStreamById(e):i.getStreamById(e.id),e?t?b.default.isEqual(t,e.constaints.video)?J.call(r,n,e,0):Y.call(r,n,e,t):J.call(r,n,e,1):(0,S.throwError)("pub stream not exsits. it is "+e)}function K(e,t){if(this.upload_stats&&e&&t){var n=this._services[this.__current_confrId].current;if(n){var r={event:e,rtcId:t.rtcId,sId:t.id,sessionId:n._session._sessionId,streamType:t.type,voff:t.voff,aoff:t.aoff};this.upload_stats.upload_event(r)}}}function J(e,t,n){var r=this,i=r._service(e);return S.Observable.create((function(e){i.voff(t,n,(function(t){e.error({errorType:"voff_fail",error:-203,errorMessage:t.message()})}),(function(){var o=i.getStreamById(t.id);e.next(o),e.complete();var s=1==n?8:6;K.bind(r)(s,o)}))})).pipe(M)}function Y(e,t,n){var r=this,i=r._service(e);return S.Observable.create((function(e){var r={};b.default.isObject(t.constaints)&&(r=m.default.extend(!0,{},t.constaints)),r.video=n,i.chanageConstraints(t,r,(function(t){e.error({errorType:"ChanageVideoConstraints_fail",error:-203,errorMessage:t.message()})}),(function(){e.next(i.getStreamById(t.id)),e.complete()}))})).pipe(M)}function X(e,t,n){var r=this,i=r._confr(n),o=r._service(n);return e="string"===typeof e?o.getStreamById(e):o.getStreamById(e.id),e?i.type!==r.ConfrType.COMMUNICATION_MIX&&i.type!==r.ConfrType.LIVE||1!==e.type||t?Z.call(r,n,e,t):(T.warn("confr mix. not allow desktop with audio."),(0,S.throwError)("confr mix. not allow desktop with audio.")):(0,S.throwError)("pub stream not exsits. it is "+e)}function Z(e,t,n){var r=this,i=r._service(e);return S.Observable.create((function(e){i.aoff(t,n,(function(t){e.error({errorType:"aoff_fail",error:-203,errorMessage:t.message()})}),(function(){var o=i.getStreamById(t.id);e.next(o),e.complete();var s=1==n?7:5;K.bind(r)(s,o)}))})).pipe(M)}function Q(e,t,n,r){var i=this,o=i._confr(e),s=i._service(e);if(s.current.role==i.Role.AUDIENCE)return(0,S.throwError)("Audience not allow publish");if(o.av)return(0,S.throwError)("Audio and video stream has been published. not allow repeat publish.");var a=o.mixed?s.AudioMixerPubstream:s.AVPubstream,c=o.av=new a({constaints:t,aoff:0,voff:0,ext:r});return G.call(i,o.id,c).pipe((0,x.concatMap)((function(e){return n&&m.default.targetDOM(n)&&attachMediaStream(n,e.localStream),z.call(i,o.id,e,r)})),(0,x.map)((function(e){return o.av=e,n&&i.streamBindVideo(o.av,n),o.type==i.ConfrType.LIVE&&i.hungup(0),m.default.extend({},e)})),(0,x.catchError)((function(e,t){throw o.av&&i.hungup(o.av),o.av=void 0,T.error(e),e})))}function ee(e){var t=this,n=t._confr(e),r=t._service(e);return r.current.role==t.Role.AUDIENCE?(0,S.throwError)("Audience not allow publish"):S.Observable.create((function(e){r.switchMobileCamera(n.av,(function(t){e.error({errorType:"switch_camera_fail",error:-203,errorMessage:t.message()})}),(function(){e.complete()}))})).pipe(M)}function te(e){var t=this,n=t._confr(e),r=t._service(e);return r.current.role==t.Role.AUDIENCE?(0,S.throwError)("Audience not allow publish"):S.Observable.create((function(e){r.chanageCamera(n.av,(function(t){e.error({errorType:"switch_camera_fail",error:-203,errorMessage:t.message()})}),(function(){e.complete()}))})).pipe(M)}function ne(e){var t=e.confrId,n=e.constaints,r=e.videoTag,i=e.ext,o=e.stopSharedCallback,s=this,a=s._confr(t),c=s._service(t);if(c.current.role==s.Role.AUDIENCE)return(0,S.throwError)("Audience not allow publish");if(a.desktop)return(0,S.throwError)("desktop stream has been published. not allow repeat publish.");if((a.type===s.ConfrType.COMMUNICATION_MIX||a.type===s.ConfrType.LIVE)&&n.audio)return T.warn("confr mix. not allow desktop with audio."),(0,S.throwError)("confr mix. not allow desktop with audio.");n.audio||!a.av||a.av.aoff||T.warn("repeat audio. desktop and av");var u=a.desktop=new c.ShareDesktopPubstream({screenOptions:n.video&&n.video.screenOptions||["screen","window","tab"],mandatory:n.video&&n.video.mandatory||{},vbitrate:n.video&&n.video.bitrate,abitrate:n.audio&&n.audio.bitrate,aoff:n.audio?0:1,ext:i,onMediaInactive:function(){"function"==typeof o&&o()}});return G.call(s,a.id,u).pipe((0,x.concatMap)((function(e){return r&&m.default.targetDOM(r)&&attachMediaStream(r,e.localStream),z.call(s,a.id,e,i)})),(0,x.map)((function(e){return a.desktop=e,r&&m.default.targetDOM(r)&&s.streamBindVideo(a.desktop,r),m.default.extend({},e)})),(0,x.catchError)((function(e,t){throw a.desktop=void 0,T.error(e),e})))}function re(e,t,n,r,i){var o=this,s="string"===typeof t?t:t.id,a=o._confr(e),c=o._service(e);return 2===t.type&&1==r&&0!=t.id&&(r=!1,T.warn("Mixed audio stream. not allow repeat sub audio. force reset subSAudio = false")),i&&m.default.targetDOM(i)&&o.streamBindVideo(s,i),S.Observable.create((function(e){c.subscribe(s,(function(t){try{if("0"!=s){var n=c.getStreamById(s),r={video:n.subArgs?n.subArgs.subSVideo:!n.voff,audio:n.subArgs?n.subArgs.subSAudio:!n.aoff};2===n.type&&(r.audio=!0),o._onMemberMediaChanaged(n.owner,n,r,a.confrId)}}finally{e.next(t),e.complete()}}),(function(t){e.error({errorType:"sub_fail",error:-203,errorMessage:t.message()})}),{subSVideo:n,subSAudio:r})})).pipe(M)}function ie(e,t,n){var r=this,i=r._service(n);e=i.current._cacheStreams["string"===typeof e?e:e.id];var o=t||r.crtAndReturnVideo(e.owner,e);if(o){r._videos[e.id]=o,o.setAttribute("autoplay","autoplay"),o.setAttribute("playsinline","playsinline"),o.setAttribute("hx_stream",e.id),e.aoff?o.setAttribute("aoff","aoff"):o.removeAttribute("aoff"),e.voff?o.setAttribute("voff","voff"):o.removeAttribute("voff"),e.ifMediaStream((function(e){o&&attachMediaStream(o,e),o.hasAttribute("flow")&&r.onMediaTransmission(o,(function(e,t,n,r){(0,g.default)(o).trigger("onMediaTransmission",[e,t,n,r])}))}));var s=(0,g.default)(o);s.off("hungup"),s.on("hungup",(function(t,i,o){r.hungup(e,n),o&&o()})),s.off("subscribe"),s.on("subscribe",(function(t,i,o,s,a){e.located()?s&&s("local stream not allow sub"):(i=e.subArgs&&e.subArgs.subSVideo||!0,o=e.subArgs&&e.subArgs.subSAudio||!0,r.subscribe(e.owner,e,i,o,n).then(a).catch(s))})),s.off("pauseVideo"),s.on("pauseVideo",(function(t,o,a){e=i.current._cacheStreams["string"===typeof e?e:e.id],e.located()?(s[0].__constaints_video=e.constaints&&e.constaints.video,r.pauseVideo(e,n).then(a).catch(o)):r.subscribe(e.owner,e,!1,e.subArgs&&e.subArgs.subSAudio||!e.aoff,n).then(a).catch(o)})),s.off("resumeVideo"),s.on("resumeVideo",(function(t,o,a,c){e=i.current._cacheStreams["string"===typeof e?e:e.id],e.located()?(void 0===c&&(c=s[0].__constaints_video,void 0!==c&&null!=c||(c=!0)),s[0].__constaints_video=void 0,r.resumeVideo(e,c,n).then(a).catch(o)):r.subscribe(e.owner,e,!0,e.subArgs&&e.subArgs.subSVideo||!e.voff,n).then(a).catch(o)})),s.off("pauseAudio"),s.on("pauseAudio",(function(t,i,o){e.located()?r.pauseAudio(e,n).then(o).catch(i):r.subscribe(e.owner,e,e.subArgs.subSVideo,!1,n).then(o).catch(i)})),s.off("resumeAudio"),s.on("resumeAudio",(function(t,i,o){e.located()?r.resumeAudio(e,n).then(o).catch(i):r.subscribe(e.owner,e,e.subArgs.subSVideo,!0,n).then(o).catch(i)})),s.off("remoteControl"),s.on("remoteControl",(function(t,i,s,a,c,u,f,d){if(e.located())throw T.error("not allow remote control at local"),"not allow remote control at local";r.remoteControl(e,o,o,i,s,a,c,u,f,d,n)})),s.off("chanageCamera"),s.on("chanageCamera",(function(e,t,i){r.chanageCamera(n).then(i).catch(t)})),s.off("captureVideo"),s.on("captureVideo",(function(e,t,i,s){var a=r.captureVideo(o,i,s,n);t&&t(a)})),s.off("capturePictureRemote"),s.on("capturePictureRemote",(function(t,i,o){r.capturePictureRemote(e,!1,n).then(o).catch(i)})),s.off("freezeFrameRemote"),s.on("freezeFrameRemote",(function(t,i,o){r.freezeFrameRemote(e,n).then(o).catch(i)})),s.off("zoomRemote"),s.on("zoomRemote",(function(t,i,o,s){r.zoomRemote(e,i,n).then(s).catch(o)})),s.off("torchRemote"),s.on("torchRemote",(function(t,i,o,s){r.torchRemote(e,i,n).then(s).catch(o)})),s.off("freeRemoteControl"),s.on("freeRemoteControl",(function(t,i,o){try{r.freeRemoteControl(e,n)}finally{o&&o()}}));var a={video:!e.voff,audio:!e.aoff,voff:e.voff,aoff:e.aoff};e.located()||(a={video:e.subArgs?e.subArgs.subSVideo:!e.voff,audio:e.subArgs?e.subArgs.subSAudio:!e.aoff,voff:e.voff,aoff:e.aoff}),s.trigger("onMediaChanaged",[a,e,e.owner,n]),o.getAttribute("sound")&&(i.current._monitSoundChanagedStreams=i.current._monitSoundChanagedStreams||{},i.current._monitSoundChanagedStreams[e.id]=e.id)}}function oe(e,t,n,r){var i=this;"string"!==typeof t&&(t=t.id);i._confr(e);var o=i._service(e);return S.Observable.create((function(e){o.focusExpoRemote(t,n,r,(function(t){e.error({errorType:"focusexpo_remote_fail",error:-203,errorMessage:t.message()})}),(function(){e.complete()}))})).pipe(M)}function se(e,t,n){var r=this;"string"!==typeof t&&(t=t.id);r._confr(e);var i=r._service(e);return S.Observable.create((function(e){i.capturePictureRemote(t,n,(function(t){e.next(t),e.complete()}),(function(t){e.error({errorType:"capture_remote_fail",error:-203,errorMessage:t.message()})}))})).pipe(M)}function ae(e,t,n){var r=this;"string"!==typeof t&&(t=t.id);r._confr(e);var i=r._service(e);return S.Observable.create((function(e){i.zoomRemote(t,n,(function(t){e.error({errorType:"capture_remote_fail",error:-203,errorMessage:t.message()})}),(function(){e.complete()}))})).pipe(M)}function ce(e,t,n){var r=this;"string"!==typeof t&&(t=t.id);r._confr(e);var i=r._service(e);return S.Observable.create((function(e){i.torchRemote(t,n,(function(t){e.next(t),e.complete()}),(function(t){e.error({errorType:"torch_remote_fail",error:-203,errorMessage:t.message()})}))})).pipe(M)}function ue(e,t){var n=this;"string"!==typeof t&&(t=t.id);n._confr(e);var r=n._service(e);return S.Observable.create((function(e){r.freezeFrameRemote(t,(function(t){e.next(t),e.complete()}),(function(t){e.error({errorType:"freeze_remote_fail",error:-203,errorMessage:t.message()})}))})).pipe(M)}var fe=m.default.extend(new R,{_confr:function(e){var t=this;return e||(e=t.__current_confrId),t._confrs[e]},_service:function(e){var t=this;return e||(e=t.__current_confrId),this._services[e]},getStreamById:function(e,t){var n=this,r=n._service(t);return r&&r.getStreamById(e)},getMemberById:function(e,t){var n=this,r=n._service(t);return r&&r.getMemberById(e)},streamBindVideo:function(e,t,n){ie.call(this,e,t,n)},getBindVideoBy:function(e){var t=this;if("string"!==typeof e&&e&&e.id&&(e=e.id),"string"!==typeof e)throw T.error("Bad stream ",e),"Bad stream "+e;return t._videos[e]},createConfr:function(e,t,n,r){return A.apply(this,arguments).toPromise()},createConfrSptMnPrg:function(e,t,n,r){return P.apply(this,arguments).toPromise()},reqTkt:function(e,t){return j.apply(this,arguments).toPromise()},chanageRoles:function(e,t,n){return N.apply(this,arguments).toPromise()},disbandConfr:function(e,t){return L.apply(this,arguments).toPromise()},kickMember:function(e,t){return D.apply(this,arguments).toPromise()},selectConfr:function(e,t){return B.apply(this,arguments).toPromise()},joinUsePassword:function(e,t,n){return $.call(this,e,t,n).toPromise()},joinUseTicket:function(e,t,n){return W.call(this,e,t,n).toPromise()},joined:function(e){return e&&this._confrs[e]&&this._confrs[e].joinId},shareDesktopWithAudio:function(e){if(navigator.mediaDevices.getDisplayMedia&&!emedia.isElectron)return this.shareDesktopWithAudioNew(e);var t=e.videoConstaints,n=e.withAudio,r=e.videoTag,i=e.ext,o=e.confrId,s=e.sharedCallback,a=e.stopSharedCallback,c=this;m.default.targetDOM(r)||(o=i,i=r,r=void 0);var u={video:t,audio:n},f={confrId:o,constaints:u,videoTag:r,ext:i,sharedCallback:s,stopSharedCallback:a};return ne.call(c,f).toPromise()},shareDesktopWithAudioNew:function(){var e=(0,s.default)(i.default.mark((function e(t){var n,r,o,s,a,c,u;return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.confrId,r=t.withAudio,o=t.ext,n){e.next=3;break}throw new Error("shareDesktop confrId is required");case 3:return s={video:!0,audio:r},e.next=6,navigator.mediaDevices.getDisplayMedia(s);case 6:return a=e.sent,a._located=!0,c={localStream:a,type:1,aoff:r?0:1,voff:0,constaints:s,_located:!0},e.next=11,z.call(this,n,c,o).toPromise();case 11:return u=e.sent,e.abrupt("return",u);case 13:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),changeCamera:function(e){return te.call(this,e).toPromise()},switchMobileCamera:function(e){return ee.call(this,e).toPromise()},shareVideoWithAudio:function(e,t,n,r,i){var o=this;m.default.targetDOM(n)||(i=r,r=n,n=void 0);var s={video:e,audio:t};return Q.call(o,i,s,n,r).toPromise()},captureVideo:function(e,t,n,r){var i=this,o=i._service(r);return o.captureVideo(e,t,n)},openUserMedia:function(e,t){var n=this,r=n._service(t);return S.Observable.create((function(t){r.__getUserMedia(e,(function(e,n){t.next(n),t.complete()}),(function(e){t.error(e)}))})).pipe(M).toPromise()},mediaDevices:function(e){return"function"===typeof e&&(e=void 0),S.Observable.create((function(t){navigator.mediaDevices.enumerateDevices().then((function(n){for(var r=[],i=0;i!==n.length;++i){var o=n[i];o.deviceId;e||r.push(o),e&&e===o.kind?r.push(o):"audioinput"===o.kind||"audiooutput"===o.kind||"videoinput"===o.kind||T.info("Some other kind of source/device: ",o)}t.next(r),t.complete()})).catch((function(e){T.warn("navigator.getUserMedia error: ",e),t.error(e)}))})).pipe(M).toPromise()},resumeVideo:function(e,t,n){return H.call(this,e,t||!0,n).toPromise()},pauseVideo:function(e,t){return H.call(this,e,!1,t).toPromise()},resumeAudio:function(e,t){return X.call(this,e,!1,t).toPromise()},pauseAudio:function(e,t){return X.call(this,e,!0,t).toPromise()},freezeFrameRemote:function(e,t){return ue.call(this,t,e).toPromise()},torchRemote:function(e,t,n){return ce.call(this,n,e,t).toPromise()},zoomRemote:function(e,t,n){return ae.call(this,n,e,t).toPromise()},capturePictureRemote:function(e,t){return se.call(this,t,e,!1).toPromise()},focusExpoRemote:function(e,t,n,r){return oe.call(this,r,e,t,n).toPromise()},onFocusExpoRemoteWhenClickVideo:function(e,t,n,r){var i=this;return"function"===typeof t&&(r=n,n=t,t=void 0),(0,g.default)(e).off(t||"click"),(0,g.default)(e).on(t||"click",(function(t){var o=e.getAttribute("hx_stream");i.focusExpoRemote(o,e,t).then(r).catch(n)})),t},offEventAtTag:function(e,t){t&&(0,g.default)(e).off(t)},hungup:function(e,t){var n,r=this;n="string"===typeof e?e:e.id||e+"";var i=r._service(t),o=r._confr(t);if(o&&i){i.hungup(n);var s=!1;if(o.av&&(s=o.av.id===n)&&(o.av=void 0),o.desktop&&o.desktop.id===n&&(o.desktop=void 0),s&&o.type==r.ConfrType.LIVE&&i.current.role==de.Role.AUDIENCE){var a=i.current&&i.current._cacheStreams["0"];r.subscribe(i.current,a,!1,!0,t)}}else T.warn("when hungup stream. not found confr and service.",e)},subscribe:function(e,t,n,r,i,o){var s=this;return m.default.targetDOM(i)||(o=i,i=void 0),re.call(s,o,t,n,r,i).toPromise()},exit:function(e,t){var n=this,r=n._service(t);r?(r.exit(e),n.upload_stats&&setTimeout((function(){return n.upload_stats.stop()}),3e3)):T.warn("when exit. not found service.",t)},_onExit:function(e,t,n){var r=this;try{r.__current_confrId=void 0,r.onExit(t,n,e)}finally{m.default.removeAttribute(r._confrs,e),m.default.removeAttribute(r._services,e),m.default.removeAttribute(r._videos,e),m.default.removeAttribute(r._events,e)}},onExit:function(e,t,n){},_onRoleUpdated:function(e,t){},onMemberJoin:function(e,t){},onMemberLeave:function(e,t,n){},_onRecvRemoteMessage:function(e,t,n){},crtAndReturnVideo:function(e,t,n){},unloadVideo:function(e,t,n,r){},remoteControl:function(e,t,n,r,i,o,s,a,c,u,f){var d=this,l=d._service(f);r=!!r;var p="string"===typeof e?e:e.id;r?emedia.ctrl.mirrorControlled(l,p,t,n,i,o,s,a,c,u):emedia.ctrl.controlled(l,p,t,n,i,o,s,a,c,u)},freeRemoteControl:function(e,t){var n=this,r=n._service(t),i="string"===typeof e?e:e.id;emedia.ctrl.disControlled(r,i)},zeptoTrigger:function(e,t){var n=[];return Array.prototype.push.apply(n,Array.prototype.slice.call(arguments,2)),S.Observable.create((function(r){var i=[function(){r.error.apply(r,arguments)},function(){r.next.apply(r,arguments),r.complete()}];Array.prototype.push.apply(i,n),(0,g.default)(e).trigger(t,i)})).pipe(M).toPromise()},_onAddMemberStream:function(e,t){},_onRemoveMemberStream:function(e,t){},_onUpdateMemberStream:function(e,t,n){},_onMemberMediaChanaged:function(e,t,n,r){var i=this._videos[t.id];n&&(n.voff=t.voff,n.aoff=t.aoff),i&&(0,g.default)(i).trigger("onMediaChanaged",[n,t,e,r])},onMediaChanaged:function(e,t){this.addVideoEventListener(e,"onMediaChanaged",t)},_onMemberSoundChanaged:function(e,t,n,r){var i=this._videos[t.id];i&&(0,g.default)(i).trigger("onSoundChanaged",[n,t,e,r])},onSoundChanaged:function(e,t){if(!emedia.config.getMediaMeterIntervalMillis||emedia.config.getMediaMeterIntervalMillis<=0)throw T.error("monit sound chanaged not config. please config getMediaMeterIntervalMillis"),"monit sound chanaged not config. please config getMediaMeterIntervalMillis";e.setAttribute("sound","sound"),this.addVideoEventListener(e,"onSoundChanaged",t)},onMediaTransmission:function(e,t){if(emedia.helper&&"function"===typeof emedia.helper.inboundVideo){var n=this._service(),r=e.getAttribute("hx_stream"),i=r&&n.getStreamById(r),o=e.getAttribute("flowWebrtc");i&&i._webrtc&&o==i._webrtc.__id||(e.hasAttribute("flow")&&i&&i._webrtc?(i.located()?emedia.helper.outboundVideo(i,t,1e3):emedia.helper.inboundVideo(i,t,1e3),e.setAttribute("flowWebrtc",i._webrtc.__id)):(this.addVideoEventListener(e,"onMediaTransmission",t),e.setAttribute("flow","flow")))}else T.warn("please import helper. <script>")},_onTalking:function(e,t,n,r){},_onNotSupportMemberPublishVideoCodecs:function(e,t,n){var r=this._videos[t.id];r&&(0,g.default)(r).trigger("onNotSupportVideoCodecs",[t,e,n])},onNotSupportVideoCodecs:function(e,t){this.addVideoEventListener(e,"onNotSupportVideoCodecs",t)},_onStreamIceStateChanged:function(e,t,n,r){var i=this._videos[t.id];i&&(0,g.default)(i).trigger("onIceStateChanged",[n,t,e,r])},onIceStateChanged:function(e,t){this.addVideoEventListener(e,"onIceStateChanged",t)},onHasRemoteControl:function(e,t,n,r){var i=this._videos[e.id];i&&(0,g.default)(i).trigger("onRemoteControl",[t,n,e,r])},onRemoteControl:function(e,t){this.addVideoEventListener(e,"onRemoteControl",t)},onRemoteFreeControl:function(e,t,n,r){var i=this._videos[e.id];i&&(0,g.default)(i).trigger("onFreeControl",[t,n,e,r])},onFreeControl:function(e,t){this.addVideoEventListener(e,"onFreeControl",t)},addVideoEventListener:function(e,t,n){(0,g.default)(e).off(t),(0,g.default)(e).on(t,(function(){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);n&&n.apply(e,t)}))}});b.default.each(["hungup","subscribe","pauseVideo","resumeVideo","pauseAudio","resumeAudio","chanageCamera","freeRemoteControl","capturePictureRemote","freezeFrameRemote"],(function(e,t){var n=e.replace(/\b[a-z]/g,(function(e){return e.toUpperCase()}));fe["trigger"+n]=function(t){var n=[];return n.push(t),n.push(e),Array.prototype.push.apply(n,Array.prototype.slice.call(arguments,1)),fe.zeptoTrigger.apply(fe,n)}})),fe.triggerTorchRemote=function(e,t){return S.Observable.create((function(n){(0,g.default)(e).trigger("torchRemote",[t,function(){n.error.apply(n,arguments)},function(){n.next.apply(n,arguments),n.complete()}])})).pipe(M).toPromise()},fe.triggerZoomRemote=function(e,t){return S.Observable.create((function(n){(0,g.default)(e).trigger("zoomRemote",[t,function(){n.error.apply(n,arguments)},function(){n.next.apply(n,arguments),n.complete()}])})).pipe(M).toPromise()},fe.triggerSubscribe=function(e,t,n){return S.Observable.create((function(r){(0,g.default)(e).trigger("subscribe",[t,n,function(){r.error.apply(r,arguments)},function(){r.next.apply(r,arguments),r.complete()}])})).pipe(M).toPromise()},fe.triggerRemoteControl=function(e,t,n,r,i,o,s,a){(0,g.default)(e).trigger("remoteControl",[t,n,r,i,o,s,a])},fe.triggerCaptureVideo=function(e,t,n){return S.Observable.create((function(r){(0,g.default)(e).trigger("captureVideo",[function(){r.next.apply(r,arguments),r.complete()},t,n])})).pipe(M).toPromise()};var de=t.single=fe},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(142),i=w(r),o=n(145),s=w(o),a=n(115),c=w(a),u=n(88),f=w(u),d=n(2),l=w(d),p=n(80),h=w(p),m=n(169),v=w(m),g=n(170),y=w(g),b=n(150),_=w(b);function w(e){return e&&e.__esModule?e:{default:e}}var S=function(){function e(t){(0,v.default)(this,e),this.emedia=t,this.streams=[],this._intervals_get=null,this._intervals_upload=null,this.data=[],this.counterId=1,this.prev_obj={},this.sessionId=null,this.network_quality_obj={},this.network_quality_threshold={RTT:{time:8e3,value:500},aPLR:{time:8e3,value:18},vPLR:{time:8e3,value:23},disconnect:{time:5e3}}}return(0,y.default)(e,[{key:"_get_url",value:function(){var e="",t=this.emedia.useCurrentXService.current;if(!t)return e;var n=t.ticket,r=n.qoeUpUrl,i=n.memName;i=i.split("_")[1];var o=emedia.config.appkey,s=o.split("#")[0],a=o.split("#")[1],c=(new Date).getTime(),u=emedia.mgr.identityToken;return e=r+"?orgName="+s+"&appName="+a+"&memName="+i+"&ts="+c+"&access_token="+u,e}},{key:"connect_ws",value:function(){var e=this._get_url();if(e){var t=new WebSocket(e),n=this;t.onopen=function(){console.log("upload stats ws connected"),n.socket=t},t.onclose=function(e){n.stop(),console.error("upload stats ws close",e)},t.message=function(e){console.log("upload stats ws recv msg",e)},t.onerror=function(e){console.error("upload stats ws error",e)}}else console.error("upload stats not have ws url")}},{key:"start",value:function(){var e=this;this._intervals_get=setInterval(e.get.bind(this),2e3),this._intervals_upload=setInterval(e.upload.bind(this),500)}},{key:"join_success",value:function(e){e&&(this.sessionId=e,this.data.unshift(this._get_init_data()),this.start())}},{key:"join_fail",value:function(){var e={type:0,result:1,errorInfo:"join fail"};this.socket&&this.socket.send(e)}},{key:"get",value:function(){if(this.emedia.useCurrentXService&&this.emedia.useCurrentXService.current&&this.emedia.useCurrentXService.current._cacheStreams){var e=this.emedia.useCurrentXService.current._cacheStreams,t=this;(0,h.default)(e).map((function(n){t.push_stats_to_data(e[n])}))}}},{key:"upload",value:function(){if(0!=this.data.length){if(this.socket){var e=this.data.shift();if(void 0==e.counterId&&(e.counterId=this.counterId,this.counterId=this.counterId+1),this.socket.send((0,l.default)(e)),1==e.type){var t=document.querySelector("#"+e.sId);if(t){var n="";(0,h.default)(e).map((function(t){n+="<div>"+t+" : "+e[t]+"</div>"})),t.innerHTML=n}}}}else console.warn("upload_stats upload fun -- this.data.length == 0")}},{key:"upload_event",value:function(e){if(e){var t=this._get_format_event_obj(e);t&&this.data.splice(1,0,t)}}},{key:"_get_format_event_obj",value:function(e){var t={type:2,time:(new Date).getTime()};if("object"!=(0,f.default)(e.event)&&void 0!=e.event)return(0,c.default)(t,e);var n=this.sessionId;if(e instanceof _.default.ICEConnected){var r=this._get_ice_connect_state_obj(e.webrtc,2);t=(0,c.default)(t,r)}else if(e instanceof _.default.ICEConnectFail){var i=this._get_ice_connect_state_obj(e.webrtc,4);t=(0,c.default)(t,i)}else if(e instanceof _.default.ICEDisconnected){var o=this._get_ice_connect_state_obj(e.webrtc,5);t=(0,c.default)(t,o)}else if(e instanceof _.default.PushSuccess){if(!e.hidden)return;var s=e.stream,a=s.rtcId,u=s.voff,d=s.aoff,l=s.type,p={event:14,sessionId:n,rtcId:a,voff:u,aoff:d,streamType:l,result:0};t=(0,c.default)(t,p)}else if(e instanceof _.default.SubSuccess){var h=e.stream,m=h.rtcId,v=h.id,g=h.type,y=h.memId,b=h.memName,w={event:16,rtcId:m,sId:v,sessionId:n,result:0,streamType:g,subMemName:b,subMemId:y};t=(0,c.default)(t,w)}else if(e instanceof _.default.EnterSuccess){var S={event:0,ip:e.ip};t=(0,c.default)(t,S)}return void 0!=t.event?t:void 0}},{key:"_get_ice_connect_state_obj",value:function(e,t){var n=this.emedia.useCurrentXService.current,r=null;for(var i in n._linkedStreams)n._linkedStreams[i].rtcId==e.getRtcId()&&(r=n._linkedStreams[i]);if(!r)return{};var o={event:20,rtcId:r.rtcId,connState:t,isPub:r.located(),sId:r.id,rtcCfg:r.rtcCfg,voff:r.voff,aoff:r.aoff};if(!r.located()){var s={subSId:r.id,subMemName:r.memName,subMemId:r.memId,subVideo:r.subSVideo,subAudio:r.subSAudio};o=(0,c.default)(o,s)}return o}},{key:"stop",value:function(){clearInterval(this._intervals_get),clearInterval(this._intervals_upload)}},{key:"push_stats_to_data",value:function(){var e=(0,s.default)(i.default.mark((function e(t){var n,r;return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t._webrtc._rtcPeerConnection.getStats();case 2:n=e.sent,r=this._get_format_upload_obj(n,t),this.data.push(r);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_get_init_data",value:function(){var e={},t=this.emedia.useCurrentXService.current;if(t){var n=this.emedia.config,r=n.appkey,i=n.version,o=t.confrId,s=t._memberId,a=t.memName,c=this.sessionId,u=this.emedia,f=u.browser,d=u.browserVersion;u.isWifi;return e={type:0,counterId:0,appkey:r,confrId:o,memId:s,memName:a,time:(new Date).getTime(),joinConfrTime:t.ticket.timestamp,sessionId:c,networkType:"WIFI",sdkOS:"Web",sdkVersion:i,deviceInfo:f,osVersion:d,result:0},e}}},{key:"_get_format_upload_obj",value:function(e,t){var n={type:1,time:(new Date).getTime(),streamType:t.type,sId:t.id,rtcId:t.rtcId};if(t.located()){n.isPub=!0;var r=this._get_outbound_stats(e);n=(0,c.default)(n,r)}else{n.isPub=!1,n.subMemName=t.memName,n.subMemId=t.memId;var i=this._get_inbound_stats(e);n=(0,c.default)(n,i)}return n=this._calc_KBps_and_PLR(n),n=this._set_stats_int(n),n}},{key:"_get_outbound_stats",value:function(e){var t={};return e.forEach((function(e){"outbound-rtp"==e.type&&("audio"==e.kind&&(t.aP=e.packetsSent,t.aB=e.bytesSent),"video"==e.kind&&(t.vW=e.frameWidth,t.vH=e.frameHeight,t.vP=e.packetsSent,t.vB=e.bytesSent)),"remote-inbound-rtp"==e.type&&("audio"==e.kind&&(t.aPL=e.packetsLost),"video"==e.kind&&(t.vPL=e.packetsLost)),"media-source"==e.type&&("audio"==e.kind&&(t.audioInputLevel=1e3*e.audioLevel),"video"==e.kind&&(t.vFps=e.framesPerSecond)),"candidate-pair"==e.type&&(t.RTT=1e3*e.totalRoundTripTime/e.responsesReceived)})),t}},{key:"_get_inbound_stats",value:function(e){var t={};return e.forEach((function(e){"inbound-rtp"==e.type&&("audio"==e.kind&&(t.aP=e.packetsReceived,t.aPL=e.packetsLost,t.aB=e.bytesReceived),"video"==e.kind&&(t.vP=e.packetsReceived,t.vPL=e.packetsLost,t.vB=e.bytesReceived)),"track"==e.type&&("video"==e.kind&&(t.vW=e.frameWidth,t.vH=e.frameHeight,t.vFR=e.framesReceived),"audio"==e.kind&&(t.audioInputLevel=1e3*e.audioLevel)),"candidate-pair"==e.type&&(t.RTT=1e3*e.totalRoundTripTime/e.responsesReceived)})),t}},{key:"_calc_KBps_and_PLR",value:function(e){var t=e.sId,n=e.aB,r=e.vB,i=e.time;e.aKBps=this._get_KBps_by_sId(t,"audio",n,i)||0,e.vKBps=this._get_KBps_by_sId(t,"video",r,i)||0;var o=e.aP,s=e.aPL,a=e.vP,c=e.vPL,u=this._get_PLR_by_sId(t,"audio",o,s),f=this._get_PLR_by_sId(t,"video",a,c);if((u||0==u)&&(e.aPLR=u),(f||0==f)&&(e.vPLR=f),!e.isPub){var d=e.vFR;if(this.prev_obj[t]&&this.prev_obj[t]["video"]&&this.prev_obj[t]["video"]["framesReceived"]){var l=this.prev_obj[t].time,p=this.prev_obj[t]["video"]["framesReceived"],h=(i-l)/1e3,m=(d-p)/h;m<0&&(m=0),e.vFps=m}}var v=this._network_quality(e),g=this._network_disconnect(e);if(!v){var y={time:(new Date).getTime(),event:4,type:2,counterId:this.counterId,sessionId:this.sessionId,rtcId:e.rtcId,sId:e.sId,isPub:e.isPub,streamType:e.sId,aoff:e.aoff,voff:e.voff,subMemName:e.subMemName,subMemId:e.subMemId};if(this.data.push(y),console.log("network2 weak",(new Date).getTime(),e.sId),this.emedia.mgr&&this.emedia.mgr.onNetworkWeak){var b=this.emedia.mgr.onNetworkWeak;"function"==typeof b&&b(e.sId)}}if(g&&(console.log("network2 disconnect",e.sId),this.emedia.mgr&&this.emedia.mgr.onNetworkDisconnect)){var _=this.emedia.mgr.onNetworkDisconnect;"function"==typeof _&&_(e.sId)}return this._set_prev_obj(e),delete e.aB,delete e.vB,delete e.vFR,delete e.RTT,e}},{key:"_set_stats_int",value:function(e){var t=["audioInputLevel","vKBps","vFps","vW","vH","vP","vPL","vPLR","aKBps","aP","aPL","aPLR"];for(var n in e)t.indexOf(n)>-1&&(e[n]=Math.round(e[n]));return e}},{key:"_get_KBps_by_sId",value:function(e,t,n,r){if(!e||!t||!n)return null;var i=this.prev_obj[e];if(!i||!i[t]||!i[t]["bytes"])return null;var o=i.time,s=i[t].bytes,a=parseInt(r-o),c=n-s;c<0&&(c=0);var u=c/(a/1e3).toFixed(2);return u/1e3}},{key:"_get_PLR_by_sId",value:function(e,t,n,r){if(!e)return null;if(!t||!n||!r)return 0;var i=this.prev_obj[e];if(!i||!i[t]||!i[t]["packets"]||!i[t]["packets_lost"])return 0;var o=i[t],s=o.packets,a=o.packets_lost,c=n-s,u=r-a,f=u/(c+u);return f=Math.round(100*f),f}},{key:"_set_prev_obj",value:function(e){var t=e.sId;if(t){var n=e.aB,r=e.vB,i=e.time,o=e.aP,s=e.aPL,a=e.vP,c=e.vPL,u=e.vFR,f={},d={};n&&(f.bytes=n),o&&(f.packets=o),(s||0==s)&&(f.packets_lost=s),r&&(d.bytes=r),a&&(d.packets=a),(c||0==c)&&(d.packets_lost=c),u&&(d.framesReceived=u),0==(0,h.default)(f).length&&0==(0,h.default)(d).length||(this.prev_obj[t]||(this.prev_obj[t]={}),this.prev_obj[t].time=i,(0,h.default)(f).length>0&&(this.prev_obj[t].audio=f),(0,h.default)(d).length>0&&(this.prev_obj[t].video=d))}}},{key:"_network_quality",value:function(e){if(!e)return!0;var t=this,n=function(n,r,i){if(!n||!r||!i)return!1;var o=t.network_quality_obj[e.sId];if(!o)return t.network_quality_obj[e.sId]={},t.network_quality_obj[e.sId][n]={time:0},!1;if(!o[n])return t.network_quality_obj[e.sId][n]={time:0},!1;var s=o[n],a=t.network_quality_threshold[n].value,c=t.network_quality_threshold[n].time;return r<a?(o[n]={time:0},!1):0===s.time?(o[n]={time:i},!1):i-s.time>=c&&(o[n]={time:0},!0)},r=e.RTT,i=e.aPLR,o=e.vPLR,s=e.time;return!(n("RTT",r,s)||n("aPLR",i,s)||n("vPLR",o,s))}},{key:"_network_disconnect",value:function(e){if(!e)return!1;var t=this.network_quality_obj[e.sId];if(!t)return t={},t["disconnect"]={time:0},!1;if(!t["disconnect"])return t["disconnect"]={time:0},!1;var n=e.vKBps,r=e.aKBps,i=e.time;if(n||r)return t["disconnect"]={time:0},!1;var o=t["disconnect"].time;if(0==o)return t["disconnect"]={time:i},!1;var s=this.network_quality_threshold["disconnect"].time;return i-o>=s&&(t["disconnect"]={time:0},!0)}}]),e}();t.default=S},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){"use strict";t.__esModule=!0;var r=n(138),i=o(r);function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,i.default)(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},function(e,t,n){"use strict";n.r(t);var r=n(172);n.d(t,"Observable",(function(){return r["Observable"]}));var i=n(189);n.d(t,"ConnectableObservable",(function(){return i["ConnectableObservable"]}));var o=n(194);n.d(t,"GroupedObservable",(function(){return o["GroupedObservable"]}));var s=n(186);n.d(t,"observable",(function(){return s["observable"]}));var a=n(190);n.d(t,"Subject",(function(){return a["Subject"]}));var c=n(195);n.d(t,"BehaviorSubject",(function(){return c["BehaviorSubject"]}));var u=n(196);n.d(t,"ReplaySubject",(function(){return u["ReplaySubject"]}));var f=n(213);n.d(t,"AsyncSubject",(function(){return f["AsyncSubject"]}));var d=n(214);n.d(t,"asapScheduler",(function(){return d["asap"]}));var l=n(218);n.d(t,"asyncScheduler",(function(){return l["async"]}));var p=n(197);n.d(t,"queueScheduler",(function(){return p["queue"]}));var h=n(219);n.d(t,"animationFrameScheduler",(function(){return h["animationFrame"]}));var m=n(222);n.d(t,"VirtualTimeScheduler",(function(){return m["VirtualTimeScheduler"]})),n.d(t,"VirtualAction",(function(){return m["VirtualAction"]}));var v=n(203);n.d(t,"Scheduler",(function(){return v["Scheduler"]}));var g=n(180);n.d(t,"Subscription",(function(){return g["Subscription"]}));var y=n(174);n.d(t,"Subscriber",(function(){return y["Subscriber"]}));var b=n(205);n.d(t,"Notification",(function(){return b["Notification"]})),n.d(t,"NotificationKind",(function(){return b["NotificationKind"]}));var _=n(187);n.d(t,"pipe",(function(){return _["pipe"]}));var w=n(188);n.d(t,"noop",(function(){return w["noop"]}));var S=n(223);n.d(t,"identity",(function(){return S["identity"]}));var x=n(224);n.d(t,"isObservable",(function(){return x["isObservable"]}));var C=n(225);n.d(t,"ArgumentOutOfRangeError",(function(){return C["ArgumentOutOfRangeError"]}));var E=n(226);n.d(t,"EmptyError",(function(){return E["EmptyError"]}));var I=n(191);n.d(t,"ObjectUnsubscribedError",(function(){return I["ObjectUnsubscribedError"]}));var T=n(183);n.d(t,"UnsubscriptionError",(function(){return T["UnsubscriptionError"]}));var O=n(227);n.d(t,"TimeoutError",(function(){return O["TimeoutError"]}));var R=n(228);n.d(t,"bindCallback",(function(){return R["bindCallback"]}));var k=n(230);n.d(t,"bindNodeCallback",(function(){return k["bindNodeCallback"]}));var M=n(231);n.d(t,"combineLatest",(function(){return M["combineLatest"]}));var A=n(242);n.d(t,"concat",(function(){return A["concat"]}));var P=n(253);n.d(t,"defer",(function(){return P["defer"]}));var j=n(206);n.d(t,"empty",(function(){return j["empty"]}));var N=n(254);n.d(t,"forkJoin",(function(){return N["forkJoin"]}));var L=n(246);n.d(t,"from",(function(){return L["from"]}));var D=n(255);n.d(t,"fromEvent",(function(){return D["fromEvent"]}));var B=n(256);n.d(t,"fromEventPattern",(function(){return B["fromEventPattern"]}));var U=n(257);n.d(t,"generate",(function(){return U["generate"]}));var F=n(258);n.d(t,"iif",(function(){return F["iif"]}));var V=n(259);n.d(t,"interval",(function(){return V["interval"]}));var W=n(261);n.d(t,"merge",(function(){return W["merge"]}));var q=n(262);n.d(t,"never",(function(){return q["never"]}));var $=n(207);n.d(t,"of",(function(){return $["of"]}));var G=n(263);n.d(t,"onErrorResumeNext",(function(){return G["onErrorResumeNext"]}));var z=n(264);n.d(t,"pairs",(function(){return z["pairs"]}));var H=n(265);n.d(t,"partition",(function(){return H["partition"]}));var K=n(268);n.d(t,"race",(function(){return K["race"]}));var J=n(269);n.d(t,"range",(function(){return J["range"]}));var Y=n(212);n.d(t,"throwError",(function(){return Y["throwError"]}));var X=n(270);n.d(t,"timer",(function(){return X["timer"]}));var Z=n(271);n.d(t,"using",(function(){return Z["using"]}));var Q=n(272);n.d(t,"zip",(function(){return Q["zip"]}));var ee=n(247);n.d(t,"scheduled",(function(){return ee["scheduled"]})),n.d(t,"EMPTY",(function(){return j["EMPTY"]})),n.d(t,"NEVER",(function(){return q["NEVER"]}));var te=n(178);n.d(t,"config",(function(){return te["config"]}))},function(e,t,n){"use strict";n.r(t),n.d(t,"Observable",(function(){return c}));var r=n(173),i=n(185),o=n(186),s=n(187),a=n(178),c=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r=this.operator,o=Object(i["toSubscriber"])(e,t,n);if(r?o.add(r.call(o,this.source)):o.add(this.source||a["config"].useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),a["config"].useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){a["config"].useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),Object(r["canReportError"])(e)?e.error(t):console.warn(t)}},e.prototype.forEach=function(e,t){var n=this;return t=u(t),new t((function(t,r){var i;i=n.subscribe((function(t){try{e(t)}catch(n){r(n),i&&i.unsubscribe()}}),r,t)}))},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[o["observable"]]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:Object(s["pipeFromArray"])(e)(this)},e.prototype.toPromise=function(e){var t=this;return e=u(e),new e((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}();function u(e){if(e||(e=a["config"].Promise||Promise),!e)throw new Error("no Promise impl found");return e}},function(e,t,n){"use strict";n.r(t),n.d(t,"canReportError",(function(){return i}));var r=n(174);function i(e){while(e){var t=e,n=t.closed,i=t.destination,o=t.isStopped;if(n||o)return!1;e=i&&i instanceof r["Subscriber"]?i:null}return!0}},function(e,t,n){"use strict";n.r(t),n.d(t,"Subscriber",(function(){return f})),n.d(t,"SafeSubscriber",(function(){return d}));var r=n(175),i=n(176),o=n(177),s=n(180),a=n(184),c=n(178),u=n(179),f=function(e){function t(n,r,i){var s=e.call(this)||this;switch(s.syncErrorValue=null,s.syncErrorThrown=!1,s.syncErrorThrowable=!1,s.isStopped=!1,arguments.length){case 0:s.destination=o["empty"];break;case 1:if(!n){s.destination=o["empty"];break}if("object"===typeof n){n instanceof t?(s.syncErrorThrowable=n.syncErrorThrowable,s.destination=n,n.add(s)):(s.syncErrorThrowable=!0,s.destination=new d(s,n));break}default:s.syncErrorThrowable=!0,s.destination=new d(s,n,r,i);break}return s}return r["__extends"](t,e),t.prototype[a["rxSubscriber"]]=function(){return this},t.create=function(e,n,r){var i=new t(e,n,r);return i.syncErrorThrowable=!1,i},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(s["Subscription"]),d=function(e){function t(t,n,r,s){var a,c=e.call(this)||this;c._parentSubscriber=t;var u=c;return Object(i["isFunction"])(n)?a=n:n&&(a=n.next,r=n.error,s=n.complete,n!==o["empty"]&&(u=Object.create(n),Object(i["isFunction"])(u.unsubscribe)&&c.add(u.unsubscribe.bind(u)),u.unsubscribe=c.unsubscribe.bind(c))),c._context=u,c._next=a,c._error=r,c._complete=s,c}return r["__extends"](t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;c["config"].useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=c["config"].useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):Object(u["hostReportError"])(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;Object(u["hostReportError"])(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};c["config"].useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),c["config"].useDeprecatedSynchronousErrorHandling)throw n;Object(u["hostReportError"])(n)}},t.prototype.__tryOrSetError=function(e,t,n){if(!c["config"].useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(r){return c["config"].useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):(Object(u["hostReportError"])(r),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(f)},function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",(function(){return i})),n.d(t,"__assign",(function(){return o})),n.d(t,"__rest",(function(){return s})),n.d(t,"__decorate",(function(){return a})),n.d(t,"__param",(function(){return c})),n.d(t,"__metadata",(function(){return u})),n.d(t,"__awaiter",(function(){return f})),n.d(t,"__generator",(function(){return d})),n.d(t,"__exportStar",(function(){return l})),n.d(t,"__values",(function(){return p})),n.d(t,"__read",(function(){return h})),n.d(t,"__spread",(function(){return m})),n.d(t,"__spreadArrays",(function(){return v})),n.d(t,"__await",(function(){return g})),n.d(t,"__asyncGenerator",(function(){return y})),n.d(t,"__asyncDelegator",(function(){return b})),n.d(t,"__asyncValues",(function(){return _})),n.d(t,"__makeTemplateObject",(function(){return w})),n.d(t,"__importStar",(function(){return S})),n.d(t,"__importDefault",(function(){return x}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},r(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o.apply(this,arguments)};function s(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function a(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}function c(e,t){return function(n,r){t(n,r,e)}}function u(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)}function f(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(t){o(t)}}function a(e){try{c(r["throw"](e))}catch(t){o(t)}}function c(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(s,a)}c((r=r.apply(e,t||[])).next())}))}function d(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(e){return function(t){return c([e,t])}}function c(o){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,r&&(i=2&o[0]?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}function l(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function p(e){var t="function"===typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function h(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{while((void 0===t||t-- >0)&&!(r=o.next()).done)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o["return"])&&n.call(o)}finally{if(i)throw i.error}}return s}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(h(arguments[t]));return e}function v(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function g(e){return this instanceof g?(this.v=e,this):new g(e)}function y(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||a(e,t)}))})}function a(e,t){try{c(i[e](t))}catch(n){d(o[0][3],n)}}function c(e){e.value instanceof g?Promise.resolve(e.value.v).then(u,f):d(o[0][2],e)}function u(e){a("next",e)}function f(e){a("throw",e)}function d(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}}function b(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:g(e[r](t)),done:"return"===r}:i?i(t):t}:i}}function _(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e="function"===typeof p?p(e):e[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,o){t=e[n](t),i(r,o,t.done,t.value)}))}}function i(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}}function w(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function S(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function x(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";function r(e){return"function"===typeof e}n.r(t),n.d(t,"isFunction",(function(){return r}))},function(e,t,n){"use strict";n.r(t),n.d(t,"empty",(function(){return o}));var r=n(178),i=n(179),o={closed:!0,next:function(e){},error:function(e){if(r["config"].useDeprecatedSynchronousErrorHandling)throw e;Object(i["hostReportError"])(e)},complete:function(){}}},function(e,t,n){"use strict";n.r(t),n.d(t,"config",(function(){return i}));var r=!1,i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){var t=new Error;t.stack}r=e},get useDeprecatedSynchronousErrorHandling(){return r}}},function(e,t,n){"use strict";function r(e){setTimeout((function(){throw e}),0)}n.r(t),n.d(t,"hostReportError",(function(){return r}))},function(e,t,n){"use strict";n.r(t),n.d(t,"Subscription",(function(){return a}));var r=n(181),i=n(182),o=n(176),s=n(183),a=function(){function e(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}return e.prototype.unsubscribe=function(){var t;if(!this.closed){var n=this,a=n._parentOrParents,u=n._unsubscribe,f=n._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,a instanceof e)a.remove(this);else if(null!==a)for(var d=0;d<a.length;++d){var l=a[d];l.remove(this)}if(Object(o["isFunction"])(u))try{u.call(this)}catch(m){t=m instanceof s["UnsubscriptionError"]?c(m.errors):[m]}if(Object(r["isArray"])(f)){d=-1;var p=f.length;while(++d<p){var h=f[d];if(Object(i["isObject"])(h))try{h.unsubscribe()}catch(m){t=t||[],m instanceof s["UnsubscriptionError"]?t=t.concat(c(m.errors)):t.push(m)}}}if(t)throw new s["UnsubscriptionError"](t)}},e.prototype.add=function(t){var n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!==typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var r=n;n=new e,n._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var i=n._parentOrParents;if(null===i)n._parentOrParents=this;else if(i instanceof e){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[n]:o.push(n),n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},e.EMPTY=function(e){return e.closed=!0,e}(new e),e}();function c(e){return e.reduce((function(e,t){return e.concat(t instanceof s["UnsubscriptionError"]?t.errors:t)}),[])}},function(e,t,n){"use strict";n.r(t),n.d(t,"isArray",(function(){return r}));var r=function(){return Array.isArray||function(e){return e&&"number"===typeof e.length}}()},function(e,t,n){"use strict";function r(e){return null!==e&&"object"===typeof e}n.r(t),n.d(t,"isObject",(function(){return r}))},function(e,t,n){"use strict";n.r(t),n.d(t,"UnsubscriptionError",(function(){return i}));var r=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),i=r},function(e,t,n){"use strict";n.r(t),n.d(t,"rxSubscriber",(function(){return r})),n.d(t,"$$rxSubscriber",(function(){return i}));var r=function(){return"function"===typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),i=r},function(e,t,n){"use strict";n.r(t),n.d(t,"toSubscriber",(function(){return s}));var r=n(174),i=n(184),o=n(177);function s(e,t,n){if(e){if(e instanceof r["Subscriber"])return e;if(e[i["rxSubscriber"]])return e[i["rxSubscriber"]]()}return e||t||n?new r["Subscriber"](e,t,n):new r["Subscriber"](o["empty"])}},function(e,t,n){"use strict";n.r(t),n.d(t,"observable",(function(){return r}));var r=function(){return"function"===typeof Symbol&&Symbol.observable||"@@observable"}()},function(e,t,n){"use strict";n.r(t),n.d(t,"pipe",(function(){return i})),n.d(t,"pipeFromArray",(function(){return o}));var r=n(188);function i(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o(e)}function o(e){return e?1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}:r["noop"]}},function(e,t,n){"use strict";function r(){}n.r(t),n.d(t,"noop",(function(){return r}))},function(e,t,n){"use strict";n.r(t),n.d(t,"ConnectableObservable",(function(){return u})),n.d(t,"connectableObservableDescriptor",(function(){return f}));var r=n(175),i=n(190),o=n(172),s=n(174),a=n(180),c=n(193),u=function(e){function t(t,n){var r=e.call(this)||this;return r.source=t,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return r["__extends"](t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,e=this._connection=new a["Subscription"],e.add(this.source.subscribe(new d(this.getSubject(),this))),e.closed&&(this._connection=null,e=a["Subscription"].EMPTY)),e},t.prototype.refCount=function(){return Object(c["refCount"])()(this)},t}(o["Observable"]),f=function(){var e=u.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:e._subscribe},_isComplete:{value:e._isComplete,writable:!0},getSubject:{value:e.getSubject},connect:{value:e.connect},refCount:{value:e.refCount}}}(),d=function(e){function t(t,n){var r=e.call(this,t)||this;return r.connectable=n,r}return r["__extends"](t,e),t.prototype._error=function(t){this._unsubscribe(),e.prototype._error.call(this,t)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},t}(i["SubjectSubscriber"]);s["Subscriber"]},function(e,t,n){"use strict";n.r(t),n.d(t,"SubjectSubscriber",(function(){return f})),n.d(t,"Subject",(function(){return d})),n.d(t,"AnonymousSubject",(function(){return l}));var r=n(175),i=n(172),o=n(174),s=n(180),a=n(191),c=n(192),u=n(184),f=function(e){function t(t){var n=e.call(this,t)||this;return n.destination=t,n}return r["__extends"](t,e),t}(o["Subscriber"]),d=function(e){function t(){var t=e.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return r["__extends"](t,e),t.prototype[u["rxSubscriber"]]=function(){return new f(this)},t.prototype.lift=function(e){var t=new l(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new a["ObjectUnsubscribedError"];if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].next(e)},t.prototype.error=function(e){if(this.closed)throw new a["ObjectUnsubscribedError"];this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new a["ObjectUnsubscribedError"];this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new a["ObjectUnsubscribedError"];return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new a["ObjectUnsubscribedError"];return this.hasError?(e.error(this.thrownError),s["Subscription"].EMPTY):this.isStopped?(e.complete(),s["Subscription"].EMPTY):(this.observers.push(e),new c["SubjectSubscription"](this,e))},t.prototype.asObservable=function(){var e=new i["Observable"];return e.source=this,e},t.create=function(e,t){return new l(e,t)},t}(i["Observable"]),l=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return r["__extends"](t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){var t=this.source;return t?this.source.subscribe(e):s["Subscription"].EMPTY},t}(d)},function(e,t,n){"use strict";n.r(t),n.d(t,"ObjectUnsubscribedError",(function(){return i}));var r=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}(),i=r},function(e,t,n){"use strict";n.r(t),n.d(t,"SubjectSubscription",(function(){return o}));var r=n(175),i=n(180),o=function(e){function t(t,n){var r=e.call(this)||this;return r.subject=t,r.subscriber=n,r.closed=!1,r}return r["__extends"](t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}},t}(i["Subscription"])},function(e,t,n){"use strict";n.r(t),n.d(t,"refCount",(function(){return o}));var r=n(175),i=n(174);function o(){return function(e){return e.lift(new s(e))}}var s=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,t){var n=this.connectable;n._refCount++;var r=new a(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i},e}(),a=function(e){function t(t,n){var r=e.call(this,t)||this;return r.connectable=n,r}return r["__extends"](t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var n=this.connection,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},t}(i["Subscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"groupBy",(function(){return c})),n.d(t,"GroupedObservable",(function(){return l}));var r=n(175),i=n(174),o=n(180),s=n(172),a=n(190);function c(e,t,n,r){return function(i){return i.lift(new u(e,t,n,r))}}var u=function(){function e(e,t,n,r){this.keySelector=e,this.elementSelector=t,this.durationSelector=n,this.subjectSelector=r}return e.prototype.call=function(e,t){return t.subscribe(new f(e,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))},e}(),f=function(e){function t(t,n,r,i,o){var s=e.call(this,t)||this;return s.keySelector=n,s.elementSelector=r,s.durationSelector=i,s.subjectSelector=o,s.groups=null,s.attemptedToUnsubscribe=!1,s.count=0,s}return r["__extends"](t,e),t.prototype._next=function(e){var t;try{t=this.keySelector(e)}catch(n){return void this.error(n)}this._group(e,t)},t.prototype._group=function(e,t){var n=this.groups;n||(n=this.groups=new Map);var r,i=n.get(t);if(this.elementSelector)try{r=this.elementSelector(e)}catch(c){this.error(c)}else r=e;if(!i){i=this.subjectSelector?this.subjectSelector():new a["Subject"],n.set(t,i);var o=new l(t,i,this);if(this.destination.next(o),this.durationSelector){var s=void 0;try{s=this.durationSelector(new l(t,i))}catch(c){return void this.error(c)}this.add(s.subscribe(new d(t,i,this)))}}i.closed||i.next(r)},t.prototype._error=function(e){var t=this.groups;t&&(t.forEach((function(t,n){t.error(e)})),t.clear()),this.destination.error(e)},t.prototype._complete=function(){var e=this.groups;e&&(e.forEach((function(e,t){e.complete()})),e.clear()),this.destination.complete()},t.prototype.removeGroup=function(e){this.groups.delete(e)},t.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&e.prototype.unsubscribe.call(this))},t}(i["Subscriber"]),d=function(e){function t(t,n,r){var i=e.call(this,n)||this;return i.key=t,i.group=n,i.parent=r,i}return r["__extends"](t,e),t.prototype._next=function(e){this.complete()},t.prototype._unsubscribe=function(){var e=this,t=e.parent,n=e.key;this.key=this.parent=null,t&&t.removeGroup(n)},t}(i["Subscriber"]),l=function(e){function t(t,n,r){var i=e.call(this)||this;return i.key=t,i.groupSubject=n,i.refCountSubscription=r,i}return r["__extends"](t,e),t.prototype._subscribe=function(e){var t=new o["Subscription"],n=this,r=n.refCountSubscription,i=n.groupSubject;return r&&!r.closed&&t.add(new p(r)),t.add(i.subscribe(e)),t},t}(s["Observable"]),p=function(e){function t(t){var n=e.call(this)||this;return n.parent=t,t.count++,n}return r["__extends"](t,e),t.prototype.unsubscribe=function(){var t=this.parent;t.closed||this.closed||(e.prototype.unsubscribe.call(this),t.count-=1,0===t.count&&t.attemptedToUnsubscribe&&t.unsubscribe())},t}(o["Subscription"])},function(e,t,n){"use strict";n.r(t),n.d(t,"BehaviorSubject",(function(){return s}));var r=n(175),i=n(190),o=n(191),s=function(e){function t(t){var n=e.call(this)||this;return n._value=t,n}return r["__extends"](t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return n&&!n.closed&&t.next(this._value),n},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new o["ObjectUnsubscribedError"];return this._value},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(i["Subject"])},function(e,t,n){"use strict";n.r(t),n.d(t,"ReplaySubject",(function(){return f}));var r=n(175),i=n(190),o=n(197),s=n(180),a=n(204),c=n(191),u=n(192),f=function(e){function t(t,n,r){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY);var i=e.call(this)||this;return i.scheduler=r,i._events=[],i._infiniteTimeWindow=!1,i._bufferSize=t<1?1:t,i._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(i._infiniteTimeWindow=!0,i.next=i.nextInfiniteTimeWindow):i.next=i.nextTimeWindow,i}return r["__extends"](t,e),t.prototype.nextInfiniteTimeWindow=function(t){var n=this._events;n.push(t),n.length>this._bufferSize&&n.shift(),e.prototype.next.call(this,t)},t.prototype.nextTimeWindow=function(t){this._events.push(new d(this._getNow(),t)),this._trimBufferThenGetEvents(),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){var t,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,o=r.length;if(this.closed)throw new c["ObjectUnsubscribedError"];if(this.isStopped||this.hasError?t=s["Subscription"].EMPTY:(this.observers.push(e),t=new u["SubjectSubscription"](this,e)),i&&e.add(e=new a["ObserveOnSubscriber"](e,i)),n)for(var f=0;f<o&&!e.closed;f++)e.next(r[f]);else for(f=0;f<o&&!e.closed;f++)e.next(r[f].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t},t.prototype._getNow=function(){return(this.scheduler||o["queue"]).now()},t.prototype._trimBufferThenGetEvents=function(){var e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,o=0;while(o<i){if(e-r[o].time<n)break;o++}return i>t&&(o=Math.max(o,i-t)),o>0&&r.splice(0,o),r},t}(i["Subject"]),d=function(){function e(e,t){this.time=e,this.value=t}return e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"queue",(function(){return o}));var r=n(198),i=n(201),o=new i["QueueScheduler"](r["QueueAction"])},function(e,t,n){"use strict";n.r(t),n.d(t,"QueueAction",(function(){return o}));var r=n(175),i=n(199),o=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return r["__extends"](t,e),t.prototype.schedule=function(t,n){return void 0===n&&(n=0),n>0?e.prototype.schedule.call(this,t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,n){return n>0||this.closed?e.prototype.execute.call(this,t,n):this._execute(t,n)},t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?e.prototype.requestAsyncId.call(this,t,n,r):t.flush(this)},t}(i["AsyncAction"])},function(e,t,n){"use strict";n.r(t),n.d(t,"AsyncAction",(function(){return o}));var r=n(175),i=n(200),o=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return r["__extends"](t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n=!1,r=void 0;try{this.work(e)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},t}(i["Action"])},function(e,t,n){"use strict";n.r(t),n.d(t,"Action",(function(){return o}));var r=n(175),i=n(180),o=function(e){function t(t,n){return e.call(this)||this}return r["__extends"](t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(i["Subscription"])},function(e,t,n){"use strict";n.r(t),n.d(t,"QueueScheduler",(function(){return o}));var r=n(175),i=n(202),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r["__extends"](t,e),t}(i["AsyncScheduler"])},function(e,t,n){"use strict";n.r(t),n.d(t,"AsyncScheduler",(function(){return o}));var r=n(175),i=n(203),o=function(e){function t(n,r){void 0===r&&(r=i["Scheduler"].now);var o=e.call(this,n,(function(){return t.delegate&&t.delegate!==o?t.delegate.now():r()}))||this;return o.actions=[],o.active=!1,o.scheduled=void 0,o}return r["__extends"](t,e),t.prototype.schedule=function(n,r,i){return void 0===r&&(r=0),t.delegate&&t.delegate!==this?t.delegate.schedule(n,r,i):e.prototype.schedule.call(this,n,r,i)},t.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){while(e=t.shift())e.unsubscribe();throw n}}},t}(i["Scheduler"])},function(e,t,n){"use strict";n.r(t),n.d(t,"Scheduler",(function(){return r}));var r=function(){function e(t,n){void 0===n&&(n=e.now),this.SchedulerAction=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(n,t)},e.now=function(){return Date.now()},e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"observeOn",(function(){return s})),n.d(t,"ObserveOnOperator",(function(){return a})),n.d(t,"ObserveOnSubscriber",(function(){return c})),n.d(t,"ObserveOnMessage",(function(){return u}));var r=n(175),i=n(174),o=n(205);function s(e,t){return void 0===t&&(t=0),function(n){return n.lift(new a(e,t))}}var a=function(){function e(e,t){void 0===t&&(t=0),this.scheduler=e,this.delay=t}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.scheduler,this.delay))},e}(),c=function(e){function t(t,n,r){void 0===r&&(r=0);var i=e.call(this,t)||this;return i.scheduler=n,i.delay=r,i}return r["__extends"](t,e),t.dispatch=function(e){var t=e.notification,n=e.destination;t.observe(n),this.unsubscribe()},t.prototype.scheduleMessage=function(e){var n=this.destination;n.add(this.scheduler.schedule(t.dispatch,this.delay,new u(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(o["Notification"].createNext(e))},t.prototype._error=function(e){this.scheduleMessage(o["Notification"].createError(e)),this.unsubscribe()},t.prototype._complete=function(){this.scheduleMessage(o["Notification"].createComplete()),this.unsubscribe()},t}(i["Subscriber"]),u=function(){function e(e,t){this.notification=e,this.destination=t}return e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"NotificationKind",(function(){return r})),n.d(t,"Notification",(function(){return a}));var r,i=n(206),o=n(207),s=n(212);r||(r={});var a=function(){function e(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}return e.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},e.prototype.do=function(e,t,n){var r=this.kind;switch(r){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}},e.prototype.accept=function(e,t,n){return e&&"function"===typeof e.next?this.observe(e):this.do(e,t,n)},e.prototype.toObservable=function(){var e=this.kind;switch(e){case"N":return Object(o["of"])(this.value);case"E":return Object(s["throwError"])(this.error);case"C":return Object(i["empty"])()}throw new Error("unexpected notification kind value")},e.createNext=function(t){return"undefined"!==typeof t?new e("N",t):e.undefinedValueNotification},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"EMPTY",(function(){return i})),n.d(t,"empty",(function(){return o}));var r=n(172),i=new r["Observable"]((function(e){return e.complete()}));function o(e){return e?s(e):i}function s(e){return new r["Observable"]((function(t){return e.schedule((function(){return t.complete()}))}))}},function(e,t,n){"use strict";n.r(t),n.d(t,"of",(function(){return s}));var r=n(208),i=n(209),o=n(211);function s(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[e.length-1];return Object(r["isScheduler"])(n)?(e.pop(),Object(o["scheduleArray"])(e,n)):Object(i["fromArray"])(e)}},function(e,t,n){"use strict";function r(e){return e&&"function"===typeof e.schedule}n.r(t),n.d(t,"isScheduler",(function(){return r}))},function(e,t,n){"use strict";n.r(t),n.d(t,"fromArray",(function(){return s}));var r=n(172),i=n(210),o=n(211);function s(e,t){return t?Object(o["scheduleArray"])(e,t):new r["Observable"](Object(i["subscribeToArray"])(e))}},function(e,t,n){"use strict";n.r(t),n.d(t,"subscribeToArray",(function(){return r}));var r=function(e){return function(t){for(var n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()}}},function(e,t,n){"use strict";n.r(t),n.d(t,"scheduleArray",(function(){return o}));var r=n(172),i=n(180);function o(e,t){return new r["Observable"]((function(n){var r=new i["Subscription"],o=0;return r.add(t.schedule((function(){o!==e.length?(n.next(e[o++]),n.closed||r.add(this.schedule())):n.complete()}))),r}))}},function(e,t,n){"use strict";n.r(t),n.d(t,"throwError",(function(){return i}));var r=n(172);function i(e,t){return t?new r["Observable"]((function(n){return t.schedule(o,0,{error:e,subscriber:n})})):new r["Observable"]((function(t){return t.error(e)}))}function o(e){var t=e.error,n=e.subscriber;n.error(t)}},function(e,t,n){"use strict";n.r(t),n.d(t,"AsyncSubject",(function(){return s}));var r=n(175),i=n(190),o=n(180),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.value=null,t.hasNext=!1,t.hasCompleted=!1,t}return r["__extends"](t,e),t.prototype._subscribe=function(t){return this.hasError?(t.error(this.thrownError),o["Subscription"].EMPTY):this.hasCompleted&&this.hasNext?(t.next(this.value),t.complete(),o["Subscription"].EMPTY):e.prototype._subscribe.call(this,t)},t.prototype.next=function(e){this.hasCompleted||(this.value=e,this.hasNext=!0)},t.prototype.error=function(t){this.hasCompleted||e.prototype.error.call(this,t)},t.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&e.prototype.next.call(this,this.value),e.prototype.complete.call(this)},t}(i["Subject"])},function(e,t,n){"use strict";n.r(t),n.d(t,"asap",(function(){return o}));var r=n(215),i=n(217),o=new i["AsapScheduler"](r["AsapAction"])},function(e,t,n){"use strict";n.r(t),n.d(t,"AsapAction",(function(){return s}));var r=n(175),i=n(216),o=n(199),s=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return r["__extends"](t,e),t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0?e.prototype.requestAsyncId.call(this,t,n,r):(t.actions.push(this),t.scheduled||(t.scheduled=i["Immediate"].setImmediate(t.flush.bind(t,null))))},t.prototype.recycleAsyncId=function(t,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,r);0===t.actions.length&&(i["Immediate"].clearImmediate(n),t.scheduled=void 0)},t}(o["AsyncAction"])},function(e,t,n){"use strict";n.r(t),n.d(t,"Immediate",(function(){return s}));var r=1,i={};function o(e){var t=i[e];t&&t()}var s={setImmediate:function(e){var t=r++;return i[t]=e,Promise.resolve().then((function(){return o(t)})),t},clearImmediate:function(e){delete i[e]}}},function(e,t,n){"use strict";n.r(t),n.d(t,"AsapScheduler",(function(){return o}));var r=n(175),i=n(202),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r["__extends"](t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,n=this.actions,r=-1,i=n.length;e=e||n.shift();do{if(t=e.execute(e.state,e.delay))break}while(++r<i&&(e=n.shift()));if(this.active=!1,t){while(++r<i&&(e=n.shift()))e.unsubscribe();throw t}},t}(i["AsyncScheduler"])},function(e,t,n){"use strict";n.r(t),n.d(t,"async",(function(){return o}));var r=n(199),i=n(202),o=new i["AsyncScheduler"](r["AsyncAction"])},function(e,t,n){"use strict";n.r(t),n.d(t,"animationFrame",(function(){return o}));var r=n(220),i=n(221),o=new i["AnimationFrameScheduler"](r["AnimationFrameAction"])},function(e,t,n){"use strict";n.r(t),n.d(t,"AnimationFrameAction",(function(){return o}));var r=n(175),i=n(199),o=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return r["__extends"](t,e),t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0?e.prototype.requestAsyncId.call(this,t,n,r):(t.actions.push(this),t.scheduled||(t.scheduled=requestAnimationFrame((function(){return t.flush(null)}))))},t.prototype.recycleAsyncId=function(t,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,r);0===t.actions.length&&(cancelAnimationFrame(n),t.scheduled=void 0)},t}(i["AsyncAction"])},function(e,t,n){"use strict";n.r(t),n.d(t,"AnimationFrameScheduler",(function(){return o}));var r=n(175),i=n(202),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r["__extends"](t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,n=this.actions,r=-1,i=n.length;e=e||n.shift();do{if(t=e.execute(e.state,e.delay))break}while(++r<i&&(e=n.shift()));if(this.active=!1,t){while(++r<i&&(e=n.shift()))e.unsubscribe();throw t}},t}(i["AsyncScheduler"])},function(e,t,n){"use strict";n.r(t),n.d(t,"VirtualTimeScheduler",(function(){return s})),n.d(t,"VirtualAction",(function(){return a}));var r=n(175),i=n(199),o=n(202),s=function(e){function t(t,n){void 0===t&&(t=a),void 0===n&&(n=Number.POSITIVE_INFINITY);var r=e.call(this,t,(function(){return r.frame}))||this;return r.maxFrames=n,r.frame=0,r.index=-1,r}return r["__extends"](t,e),t.prototype.flush=function(){var e,t,n=this,r=n.actions,i=n.maxFrames;while((t=r[0])&&t.delay<=i)if(r.shift(),this.frame=t.delay,e=t.execute(t.state,t.delay))break;if(e){while(t=r.shift())t.unsubscribe();throw e}},t.frameTimeFactor=10,t}(o["AsyncScheduler"]),a=function(e){function t(t,n,r){void 0===r&&(r=t.index+=1);var i=e.call(this,t,n)||this;return i.scheduler=t,i.work=n,i.index=r,i.active=!0,i.index=t.index=r,i}return r["__extends"](t,e),t.prototype.schedule=function(n,r){if(void 0===r&&(r=0),!this.id)return e.prototype.schedule.call(this,n,r);this.active=!1;var i=new t(this.scheduler,this.work);return this.add(i),i.schedule(n,r)},t.prototype.requestAsyncId=function(e,n,r){void 0===r&&(r=0),this.delay=e.frame+r;var i=e.actions;return i.push(this),i.sort(t.sortActions),!0},t.prototype.recycleAsyncId=function(e,t,n){void 0===n&&(n=0)},t.prototype._execute=function(t,n){if(!0===this.active)return e.prototype._execute.call(this,t,n)},t.sortActions=function(e,t){return e.delay===t.delay?e.index===t.index?0:e.index>t.index?1:-1:e.delay>t.delay?1:-1},t}(i["AsyncAction"])},function(e,t,n){"use strict";function r(e){return e}n.r(t),n.d(t,"identity",(function(){return r}))},function(e,t,n){"use strict";n.r(t),n.d(t,"isObservable",(function(){return i}));var r=n(172);function i(e){return!!e&&(e instanceof r["Observable"]||"function"===typeof e.lift&&"function"===typeof e.subscribe)}},function(e,t,n){"use strict";n.r(t),n.d(t,"ArgumentOutOfRangeError",(function(){return i}));var r=function(){function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e}(),i=r},function(e,t,n){"use strict";n.r(t),n.d(t,"EmptyError",(function(){return i}));var r=function(){function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e}(),i=r},function(e,t,n){"use strict";n.r(t),n.d(t,"TimeoutError",(function(){return i}));var r=function(){function e(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return e.prototype=Object.create(Error.prototype),e}(),i=r},function(e,t,n){"use strict";n.r(t),n.d(t,"bindCallback",(function(){return u}));var r=n(172),i=n(213),o=n(229),s=n(173),a=n(181),c=n(208);function u(e,t,n){if(t){if(!Object(c["isScheduler"])(t))return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return u(e,n).apply(void 0,r).pipe(Object(o["map"])((function(e){return Object(a["isArray"])(e)?t.apply(void 0,e):t(e)})))};n=t}return function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];var a,c=this,u={context:c,subject:a,callbackFunc:e,scheduler:n};return new r["Observable"]((function(r){if(n){var o={args:t,subscriber:r,params:u};return n.schedule(f,0,o)}if(!a){a=new i["AsyncSubject"];var d=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];a.next(e.length<=1?e[0]:e),a.complete()};try{e.apply(c,t.concat([d]))}catch(l){Object(s["canReportError"])(a)?a.error(l):console.warn(l)}}return a.subscribe(r)}))}}function f(e){var t=this,n=e.args,r=e.subscriber,o=e.params,s=o.callbackFunc,a=o.context,c=o.scheduler,u=o.subject;if(!u){u=o.subject=new i["AsyncSubject"];var f=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.length<=1?e[0]:e;t.add(c.schedule(d,0,{value:r,subject:u}))};try{s.apply(a,n.concat([f]))}catch(l){u.error(l)}}this.add(u.subscribe(r))}function d(e){var t=e.value,n=e.subject;n.next(t),n.complete()}},function(e,t,n){"use strict";n.r(t),n.d(t,"map",(function(){return o})),n.d(t,"MapOperator",(function(){return s}));var r=n(175),i=n(174);function o(e,t){return function(n){if("function"!==typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new s(e,t))}}var s=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.project,this.thisArg))},e}(),a=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.project=n,i.count=0,i.thisArg=r||i,i}return r["__extends"](t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)},t}(i["Subscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"bindNodeCallback",(function(){return u}));var r=n(172),i=n(213),o=n(229),s=n(173),a=n(208),c=n(181);function u(e,t,n){if(t){if(!Object(a["isScheduler"])(t))return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return u(e,n).apply(void 0,r).pipe(Object(o["map"])((function(e){return Object(c["isArray"])(e)?t.apply(void 0,e):t(e)})))};n=t}return function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];var a={subject:void 0,args:t,callbackFunc:e,scheduler:n,context:this};return new r["Observable"]((function(r){var o=a.context,c=a.subject;if(n)return n.schedule(f,0,{params:a,subscriber:r,context:o});if(!c){c=a.subject=new i["AsyncSubject"];var u=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.shift();n?c.error(n):(c.next(e.length<=1?e[0]:e),c.complete())};try{e.apply(o,t.concat([u]))}catch(d){Object(s["canReportError"])(c)?c.error(d):console.warn(d)}}return c.subscribe(r)}))}}function f(e){var t=this,n=e.params,r=e.subscriber,o=e.context,s=n.callbackFunc,a=n.args,c=n.scheduler,u=n.subject;if(!u){u=n.subject=new i["AsyncSubject"];var f=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.shift();if(r)t.add(c.schedule(l,0,{err:r,subject:u}));else{var i=e.length<=1?e[0]:e;t.add(c.schedule(d,0,{value:i,subject:u}))}};try{s.apply(o,a.concat([f]))}catch(p){this.add(c.schedule(l,0,{err:p,subject:u}))}}this.add(u.subscribe(r))}function d(e){var t=e.value,n=e.subject;n.next(t),n.complete()}function l(e){var t=e.err,n=e.subject;n.error(t)}},function(e,t,n){"use strict";n.r(t),n.d(t,"combineLatest",(function(){return f})),n.d(t,"CombineLatestOperator",(function(){return d})),n.d(t,"CombineLatestSubscriber",(function(){return l}));var r=n(175),i=n(208),o=n(181),s=n(232),a=n(233),c=n(209),u={};function f(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=null,r=null;return Object(i["isScheduler"])(e[e.length-1])&&(r=e.pop()),"function"===typeof e[e.length-1]&&(n=e.pop()),1===e.length&&Object(o["isArray"])(e[0])&&(e=e[0]),Object(c["fromArray"])(e,r).lift(new d(n))}var d=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.resultSelector))},e}(),l=function(e){function t(t,n){var r=e.call(this,t)||this;return r.resultSelector=n,r.active=0,r.values=[],r.observables=[],r}return r["__extends"](t,e),t.prototype._next=function(e){this.values.push(u),this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(var n=0;n<t;n++){var r=e[n];this.add(Object(a["subscribeToResult"])(this,r,r,n))}}},t.prototype.notifyComplete=function(e){0===(this.active-=1)&&this.destination.complete()},t.prototype.notifyNext=function(e,t,n,r,i){var o=this.values,s=o[n],a=this.toRespond?s===u?--this.toRespond:this.toRespond:0;o[n]=t,0===a&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))},t.prototype._tryResultSelector=function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)},t}(s["OuterSubscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"OuterSubscriber",(function(){return o}));var r=n(175),i=n(174),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r["__extends"](t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(i["Subscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"subscribeToResult",(function(){return s}));var r=n(234),i=n(235),o=n(172);function s(e,t,n,s,a){if(void 0===a&&(a=new r["InnerSubscriber"](e,n,s)),!a.closed)return t instanceof o["Observable"]?t.subscribe(a):Object(i["subscribeTo"])(t)(a)}},function(e,t,n){"use strict";n.r(t),n.d(t,"InnerSubscriber",(function(){return o}));var r=n(175),i=n(174),o=function(e){function t(t,n,r){var i=e.call(this)||this;return i.parent=t,i.outerValue=n,i.outerIndex=r,i.index=0,i}return r["__extends"](t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(i["Subscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"subscribeTo",(function(){return l}));var r=n(210),i=n(236),o=n(237),s=n(239),a=n(240),c=n(241),u=n(182),f=n(238),d=n(186),l=function(e){if(e&&"function"===typeof e[d["observable"]])return Object(s["subscribeToObservable"])(e);if(Object(a["isArrayLike"])(e))return Object(r["subscribeToArray"])(e);if(Object(c["isPromise"])(e))return Object(i["subscribeToPromise"])(e);if(e&&"function"===typeof e[f["iterator"]])return Object(o["subscribeToIterable"])(e);var t=Object(u["isObject"])(e)?"an invalid object":"'"+e+"'",n="You provided "+t+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";throw new TypeError(n)}},function(e,t,n){"use strict";n.r(t),n.d(t,"subscribeToPromise",(function(){return i}));var r=n(179),i=function(e){return function(t){return e.then((function(e){t.closed||(t.next(e),t.complete())}),(function(e){return t.error(e)})).then(null,r["hostReportError"]),t}}},function(e,t,n){"use strict";n.r(t),n.d(t,"subscribeToIterable",(function(){return i}));var r=n(238),i=function(e){return function(t){var n=e[r["iterator"]]();do{var i=n.next();if(i.done){t.complete();break}if(t.next(i.value),t.closed)break}while(1);return"function"===typeof n.return&&t.add((function(){n.return&&n.return()})),t}}},function(e,t,n){"use strict";function r(){return"function"===typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.r(t),n.d(t,"getSymbolIterator",(function(){return r})),n.d(t,"iterator",(function(){return i})),n.d(t,"$$iterator",(function(){return o}));var i=r(),o=i},function(e,t,n){"use strict";n.r(t),n.d(t,"subscribeToObservable",(function(){return i}));var r=n(186),i=function(e){return function(t){var n=e[r["observable"]]();if("function"!==typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(t)}}},function(e,t,n){"use strict";n.r(t),n.d(t,"isArrayLike",(function(){return r}));var r=function(e){return e&&"number"===typeof e.length&&"function"!==typeof e}},function(e,t,n){"use strict";function r(e){return!!e&&"function"!==typeof e.subscribe&&"function"===typeof e.then}n.r(t),n.d(t,"isPromise",(function(){return r}))},function(e,t,n){"use strict";n.r(t),n.d(t,"concat",(function(){return o}));var r=n(207),i=n(243);function o(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Object(i["concatAll"])()(r["of"].apply(void 0,e))}},function(e,t,n){"use strict";n.r(t),n.d(t,"concatAll",(function(){return i}));var r=n(244);function i(){return Object(r["mergeAll"])(1)}},function(e,t,n){"use strict";n.r(t),n.d(t,"mergeAll",(function(){return o}));var r=n(245),i=n(223);function o(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),Object(r["mergeMap"])(i["identity"],e)}},function(e,t,n){"use strict";n.r(t),n.d(t,"mergeMap",(function(){return u})),n.d(t,"MergeMapOperator",(function(){return f})),n.d(t,"MergeMapSubscriber",(function(){return d}));var r=n(175),i=n(233),o=n(232),s=n(234),a=n(229),c=n(246);function u(e,t,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"===typeof t?function(r){return r.pipe(u((function(n,r){return Object(c["from"])(e(n,r)).pipe(Object(a["map"])((function(e,i){return t(n,e,r,i)})))}),n))}:("number"===typeof t&&(n=t),function(t){return t.lift(new f(e,n))})}var f=function(){function e(e,t){void 0===t&&(t=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=t}return e.prototype.call=function(e,t){return t.subscribe(new d(e,this.project,this.concurrent))},e}(),d=function(e){function t(t,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var i=e.call(this,t)||this;return i.project=n,i.concurrent=r,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return r["__extends"](t,e),t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t,e,n)},t.prototype._innerSub=function(e,t,n){var r=new s["InnerSubscriber"](this,void 0,void 0),o=this.destination;o.add(r),Object(i["subscribeToResult"])(this,e,t,n,r)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(o["OuterSubscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"from",(function(){return s}));var r=n(172),i=n(235),o=n(247);function s(e,t){return t?Object(o["scheduled"])(e,t):e instanceof r["Observable"]?e:new r["Observable"](Object(i["subscribeTo"])(e))}},function(e,t,n){"use strict";n.r(t),n.d(t,"scheduled",(function(){return d}));var r=n(248),i=n(249),o=n(211),s=n(250),a=n(251),c=n(241),u=n(240),f=n(252);function d(e,t){if(null!=e){if(Object(a["isInteropObservable"])(e))return Object(r["scheduleObservable"])(e,t);if(Object(c["isPromise"])(e))return Object(i["schedulePromise"])(e,t);if(Object(u["isArrayLike"])(e))return Object(o["scheduleArray"])(e,t);if(Object(f["isIterable"])(e)||"string"===typeof e)return Object(s["scheduleIterable"])(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}},function(e,t,n){"use strict";n.r(t),n.d(t,"scheduleObservable",(function(){return s}));var r=n(172),i=n(180),o=n(186);function s(e,t){return new r["Observable"]((function(n){var r=new i["Subscription"];return r.add(t.schedule((function(){var i=e[o["observable"]]();r.add(i.subscribe({next:function(e){r.add(t.schedule((function(){return n.next(e)})))},error:function(e){r.add(t.schedule((function(){return n.error(e)})))},complete:function(){r.add(t.schedule((function(){return n.complete()})))}}))}))),r}))}},function(e,t,n){"use strict";n.r(t),n.d(t,"schedulePromise",(function(){return o}));var r=n(172),i=n(180);function o(e,t){return new r["Observable"]((function(n){var r=new i["Subscription"];return r.add(t.schedule((function(){return e.then((function(e){r.add(t.schedule((function(){n.next(e),r.add(t.schedule((function(){return n.complete()})))})))}),(function(e){r.add(t.schedule((function(){return n.error(e)})))}))}))),r}))}},function(e,t,n){"use strict";n.r(t),n.d(t,"scheduleIterable",(function(){return s}));var r=n(172),i=n(180),o=n(238);function s(e,t){if(!e)throw new Error("Iterable cannot be null");return new r["Observable"]((function(n){var r,s=new i["Subscription"];return s.add((function(){r&&"function"===typeof r.return&&r.return()})),s.add(t.schedule((function(){r=e[o["iterator"]](),s.add(t.schedule((function(){if(!n.closed){var e,t;try{var i=r.next();e=i.value,t=i.done}catch(o){return void n.error(o)}t?n.complete():(n.next(e),this.schedule())}})))}))),s}))}},function(e,t,n){"use strict";n.r(t),n.d(t,"isInteropObservable",(function(){return i}));var r=n(186);function i(e){return e&&"function"===typeof e[r["observable"]]}},function(e,t,n){"use strict";n.r(t),n.d(t,"isIterable",(function(){return i}));var r=n(238);function i(e){return e&&"function"===typeof e[r["iterator"]]}},function(e,t,n){"use strict";n.r(t),n.d(t,"defer",(function(){return s}));var r=n(172),i=n(246),o=n(206);function s(e){return new r["Observable"]((function(t){var n;try{n=e()}catch(s){return void t.error(s)}var r=n?Object(i["from"])(n):Object(o["empty"])();return r.subscribe(t)}))}},function(e,t,n){"use strict";n.r(t),n.d(t,"forkJoin",(function(){return c}));var r=n(172),i=n(181),o=n(229),s=n(182),a=n(246);function c(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var n=e[0];if(Object(i["isArray"])(n))return u(n,null);if(Object(s["isObject"])(n)&&Object.getPrototypeOf(n)===Object.prototype){var r=Object.keys(n);return u(r.map((function(e){return n[e]})),r)}}if("function"===typeof e[e.length-1]){var a=e.pop();return e=1===e.length&&Object(i["isArray"])(e[0])?e[0]:e,u(e,null).pipe(Object(o["map"])((function(e){return a.apply(void 0,e)})))}return u(e,null)}function u(e,t){return new r["Observable"]((function(n){var r=e.length;if(0!==r)for(var i=new Array(r),o=0,s=0,c=function(c){var u=Object(a["from"])(e[c]),f=!1;n.add(u.subscribe({next:function(e){f||(f=!0,s++),i[c]=e},error:function(e){return n.error(e)},complete:function(){o++,o!==r&&f||(s===r&&n.next(t?t.reduce((function(e,t,n){return e[t]=i[n],e}),{}):i),n.complete())}}))},u=0;u<r;u++)c(u);else n.complete()}))}},function(e,t,n){"use strict";n.r(t),n.d(t,"fromEvent",(function(){return a}));var r=n(172),i=n(181),o=n(176),s=n(229);function a(e,t,n,u){return Object(o["isFunction"])(n)&&(u=n,n=void 0),u?a(e,t,n).pipe(Object(s["map"])((function(e){return Object(i["isArray"])(e)?u.apply(void 0,e):u(e)}))):new r["Observable"]((function(r){function i(e){arguments.length>1?r.next(Array.prototype.slice.call(arguments)):r.next(e)}c(e,t,i,r,n)}))}function c(e,t,n,r,i){var o;if(d(e)){var s=e;e.addEventListener(t,n,i),o=function(){return s.removeEventListener(t,n,i)}}else if(f(e)){var a=e;e.on(t,n),o=function(){return a.off(t,n)}}else if(u(e)){var l=e;e.addListener(t,n),o=function(){return l.removeListener(t,n)}}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(var p=0,h=e.length;p<h;p++)c(e[p],t,n,r,i)}r.add(o)}function u(e){return e&&"function"===typeof e.addListener&&"function"===typeof e.removeListener}function f(e){return e&&"function"===typeof e.on&&"function"===typeof e.off}function d(e){return e&&"function"===typeof e.addEventListener&&"function"===typeof e.removeEventListener}},function(e,t,n){"use strict";n.r(t),n.d(t,"fromEventPattern",(function(){return a}));var r=n(172),i=n(181),o=n(176),s=n(229);function a(e,t,n){return n?a(e,t).pipe(Object(s["map"])((function(e){return Object(i["isArray"])(e)?n.apply(void 0,e):n(e)}))):new r["Observable"]((function(n){var r,i=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.next(1===e.length?e[0]:e)};try{r=e(i)}catch(s){return void n.error(s)}if(Object(o["isFunction"])(t))return function(){return t(i,r)}}))}},function(e,t,n){"use strict";n.r(t),n.d(t,"generate",(function(){return s}));var r=n(172),i=n(223),o=n(208);function s(e,t,n,s,c){var u,f;if(1==arguments.length){var d=e;f=d.initialState,t=d.condition,n=d.iterate,u=d.resultSelector||i["identity"],c=d.scheduler}else void 0===s||Object(o["isScheduler"])(s)?(f=e,u=i["identity"],c=s):(f=e,u=s);return new r["Observable"]((function(e){var r=f;if(c)return c.schedule(a,0,{subscriber:e,iterate:n,condition:t,resultSelector:u,state:r});do{if(t){var i=void 0;try{i=t(r)}catch(s){return void e.error(s)}if(!i){e.complete();break}}var o=void 0;try{o=u(r)}catch(s){return void e.error(s)}if(e.next(o),e.closed)break;try{r=n(r)}catch(s){return void e.error(s)}}while(1)}))}function a(e){var t=e.subscriber,n=e.condition;if(!t.closed){if(e.needIterate)try{e.state=e.iterate(e.state)}catch(o){return void t.error(o)}else e.needIterate=!0;if(n){var r=void 0;try{r=n(e.state)}catch(o){return void t.error(o)}if(!r)return void t.complete();if(t.closed)return}var i;try{i=e.resultSelector(e.state)}catch(o){return void t.error(o)}if(!t.closed&&(t.next(i),!t.closed))return this.schedule(e)}}},function(e,t,n){"use strict";n.r(t),n.d(t,"iif",(function(){return o}));var r=n(253),i=n(206);function o(e,t,n){return void 0===t&&(t=i["EMPTY"]),void 0===n&&(n=i["EMPTY"]),Object(r["defer"])((function(){return e()?t:n}))}},function(e,t,n){"use strict";n.r(t),n.d(t,"interval",(function(){return s}));var r=n(172),i=n(218),o=n(260);function s(e,t){return void 0===e&&(e=0),void 0===t&&(t=i["async"]),(!Object(o["isNumeric"])(e)||e<0)&&(e=0),t&&"function"===typeof t.schedule||(t=i["async"]),new r["Observable"]((function(n){return n.add(t.schedule(a,e,{subscriber:n,counter:0,period:e})),n}))}function a(e){var t=e.subscriber,n=e.counter,r=e.period;t.next(n),this.schedule({subscriber:t,counter:n+1,period:r},r)}},function(e,t,n){"use strict";n.r(t),n.d(t,"isNumeric",(function(){return i}));var r=n(181);function i(e){return!Object(r["isArray"])(e)&&e-parseFloat(e)+1>=0}},function(e,t,n){"use strict";n.r(t),n.d(t,"merge",(function(){return a}));var r=n(172),i=n(208),o=n(244),s=n(209);function a(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Number.POSITIVE_INFINITY,a=null,c=e[e.length-1];return Object(i["isScheduler"])(c)?(a=e.pop(),e.length>1&&"number"===typeof e[e.length-1]&&(n=e.pop())):"number"===typeof c&&(n=e.pop()),null===a&&1===e.length&&e[0]instanceof r["Observable"]?e[0]:Object(o["mergeAll"])(n)(Object(s["fromArray"])(e,a))}},function(e,t,n){"use strict";n.r(t),n.d(t,"NEVER",(function(){return o})),n.d(t,"never",(function(){return s}));var r=n(172),i=n(188),o=new r["Observable"](i["noop"]);function s(){return o}},function(e,t,n){"use strict";n.r(t),n.d(t,"onErrorResumeNext",(function(){return a}));var r=n(172),i=n(246),o=n(181),s=n(206);function a(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)return s["EMPTY"];var n=e[0],c=e.slice(1);return 1===e.length&&Object(o["isArray"])(n)?a.apply(void 0,n):new r["Observable"]((function(e){var t=function(){return e.add(a.apply(void 0,c).subscribe(e))};return Object(i["from"])(n).subscribe({next:function(t){e.next(t)},error:t,complete:t})}))}},function(e,t,n){"use strict";n.r(t),n.d(t,"pairs",(function(){return o})),n.d(t,"dispatch",(function(){return s}));var r=n(172),i=n(180);function o(e,t){return t?new r["Observable"]((function(n){var r=Object.keys(e),o=new i["Subscription"];return o.add(t.schedule(s,0,{keys:r,index:0,subscriber:n,subscription:o,obj:e})),o})):new r["Observable"]((function(t){for(var n=Object.keys(e),r=0;r<n.length&&!t.closed;r++){var i=n[r];e.hasOwnProperty(i)&&t.next([i,e[i]])}t.complete()}))}function s(e){var t=e.keys,n=e.index,r=e.subscriber,i=e.subscription,o=e.obj;if(!r.closed)if(n<t.length){var s=t[n];r.next([s,o[s]]),i.add(this.schedule({keys:t,index:n+1,subscriber:r,subscription:i,obj:o}))}else r.complete()}},function(e,t,n){"use strict";n.r(t),n.d(t,"partition",(function(){return a}));var r=n(266),i=n(235),o=n(267),s=n(172);function a(e,t,n){return[Object(o["filter"])(t,n)(new s["Observable"](Object(i["subscribeTo"])(e))),Object(o["filter"])(Object(r["not"])(t,n))(new s["Observable"](Object(i["subscribeTo"])(e)))]}},function(e,t,n){"use strict";function r(e,t){function n(){return!n.pred.apply(n.thisArg,arguments)}return n.pred=e,n.thisArg=t,n}n.r(t),n.d(t,"not",(function(){return r}))},function(e,t,n){"use strict";n.r(t),n.d(t,"filter",(function(){return o}));var r=n(175),i=n(174);function o(e,t){return function(n){return n.lift(new s(e,t))}}var s=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.predicate,this.thisArg))},e}(),a=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.predicate=n,i.thisArg=r,i.count=0,i}return r["__extends"](t,e),t.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}t&&this.destination.next(e)},t}(i["Subscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"race",(function(){return c})),n.d(t,"RaceOperator",(function(){return u})),n.d(t,"RaceSubscriber",(function(){return f}));var r=n(175),i=n(181),o=n(209),s=n(232),a=n(233);function c(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){if(!Object(i["isArray"])(e[0]))return e[0];e=e[0]}return Object(o["fromArray"])(e,void 0).lift(new u)}var u=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new f(e))},e}(),f=function(e){function t(t){var n=e.call(this,t)||this;return n.hasFirst=!1,n.observables=[],n.subscriptions=[],n}return r["__extends"](t,e),t.prototype._next=function(e){this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{for(var n=0;n<t&&!this.hasFirst;n++){var r=e[n],i=Object(a["subscribeToResult"])(this,r,r,n);this.subscriptions&&this.subscriptions.push(i),this.add(i)}this.observables=null}},t.prototype.notifyNext=function(e,t,n,r,i){if(!this.hasFirst){this.hasFirst=!0;for(var o=0;o<this.subscriptions.length;o++)if(o!==n){var s=this.subscriptions[o];s.unsubscribe(),this.remove(s)}this.subscriptions=null}this.destination.next(t)},t}(s["OuterSubscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"range",(function(){return i})),n.d(t,"dispatch",(function(){return o}));var r=n(172);function i(e,t,n){return void 0===e&&(e=0),new r["Observable"]((function(r){void 0===t&&(t=e,e=0);var i=0,s=e;if(n)return n.schedule(o,0,{index:i,count:t,start:e,subscriber:r});do{if(i++>=t){r.complete();break}if(r.next(s++),r.closed)break}while(1)}))}function o(e){var t=e.start,n=e.index,r=e.count,i=e.subscriber;n>=r?i.complete():(i.next(t),i.closed||(e.index=n+1,e.start=t+1,this.schedule(e)))}},function(e,t,n){"use strict";n.r(t),n.d(t,"timer",(function(){return a}));var r=n(172),i=n(218),o=n(260),s=n(208);function a(e,t,n){void 0===e&&(e=0);var a=-1;return Object(o["isNumeric"])(t)?a=Number(t)<1?1:Number(t):Object(s["isScheduler"])(t)&&(n=t),Object(s["isScheduler"])(n)||(n=i["async"]),new r["Observable"]((function(t){var r=Object(o["isNumeric"])(e)?e:+e-n.now();return n.schedule(c,r,{index:0,period:a,subscriber:t})}))}function c(e){var t=e.index,n=e.period,r=e.subscriber;if(r.next(t),!r.closed){if(-1===n)return r.complete();e.index=t+1,this.schedule(e,n)}}},function(e,t,n){"use strict";n.r(t),n.d(t,"using",(function(){return s}));var r=n(172),i=n(246),o=n(206);function s(e,t){return new r["Observable"]((function(n){var r,s;try{r=e()}catch(u){return void n.error(u)}try{s=t(r)}catch(u){return void n.error(u)}var a=s?Object(i["from"])(s):o["EMPTY"],c=a.subscribe(n);return function(){c.unsubscribe(),r&&r.unsubscribe()}}))}},function(e,t,n){"use strict";n.r(t),n.d(t,"zip",(function(){return f})),n.d(t,"ZipOperator",(function(){return d})),n.d(t,"ZipSubscriber",(function(){return l}));var r=n(175),i=n(209),o=n(181),s=n(174),a=n(232),c=n(233),u=n(238);function f(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[e.length-1];return"function"===typeof n&&e.pop(),Object(i["fromArray"])(e,void 0).lift(new d(n))}var d=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.resultSelector))},e}(),l=function(e){function t(t,n,r){void 0===r&&(r=Object.create(null));var i=e.call(this,t)||this;return i.iterators=[],i.active=0,i.resultSelector="function"===typeof n?n:null,i.values=r,i}return r["__extends"](t,e),t.prototype._next=function(e){var t=this.iterators;Object(o["isArray"])(e)?t.push(new h(e)):"function"===typeof e[u["iterator"]]?t.push(new p(e[u["iterator"]]())):t.push(new m(this.destination,this,e))},t.prototype._complete=function(){var e=this.iterators,t=e.length;if(this.unsubscribe(),0!==t){this.active=t;for(var n=0;n<t;n++){var r=e[n];if(r.stillUnsubscribed){var i=this.destination;i.add(r.subscribe(r,n))}else this.active--}}else this.destination.complete()},t.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},t.prototype.checkIterators=function(){for(var e=this.iterators,t=e.length,n=this.destination,r=0;r<t;r++){var i=e[r];if("function"===typeof i.hasValue&&!i.hasValue())return}var o=!1,s=[];for(r=0;r<t;r++){i=e[r];var a=i.next();if(i.hasCompleted()&&(o=!0),a.done)return void n.complete();s.push(a.value)}this.resultSelector?this._tryresultSelector(s):n.next(s),o&&n.complete()},t.prototype._tryresultSelector=function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)},t}(s["Subscriber"]),p=function(){function e(e){this.iterator=e,this.nextResult=e.next()}return e.prototype.hasValue=function(){return!0},e.prototype.next=function(){var e=this.nextResult;return this.nextResult=this.iterator.next(),e},e.prototype.hasCompleted=function(){var e=this.nextResult;return e&&e.done},e}(),h=function(){function e(e){this.array=e,this.index=0,this.length=0,this.length=e.length}return e.prototype[u["iterator"]]=function(){return this},e.prototype.next=function(e){var t=this.index++,n=this.array;return t<this.length?{value:n[t],done:!1}:{value:null,done:!0}},e.prototype.hasValue=function(){return this.array.length>this.index},e.prototype.hasCompleted=function(){return this.array.length===this.index},e}(),m=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.parent=n,i.observable=r,i.stillUnsubscribed=!0,i.buffer=[],i.isComplete=!1,i}return r["__extends"](t,e),t.prototype[u["iterator"]]=function(){return this},t.prototype.next=function(){var e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}},t.prototype.hasValue=function(){return this.buffer.length>0},t.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},t.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},t.prototype.notifyNext=function(e,t,n,r,i){this.buffer.push(t),this.parent.checkIterators()},t.prototype.subscribe=function(e,t){return Object(c["subscribeToResult"])(this,this.observable,this,t)},t}(a["OuterSubscriber"])},function(e,t,n){"use strict";n.r(t);var r=n(274);n.d(t,"audit",(function(){return r["audit"]}));var i=n(275);n.d(t,"auditTime",(function(){return i["auditTime"]}));var o=n(276);n.d(t,"buffer",(function(){return o["buffer"]}));var s=n(277);n.d(t,"bufferCount",(function(){return s["bufferCount"]}));var a=n(278);n.d(t,"bufferTime",(function(){return a["bufferTime"]}));var c=n(279);n.d(t,"bufferToggle",(function(){return c["bufferToggle"]}));var u=n(280);n.d(t,"bufferWhen",(function(){return u["bufferWhen"]}));var f=n(281);n.d(t,"catchError",(function(){return f["catchError"]}));var d=n(282);n.d(t,"combineAll",(function(){return d["combineAll"]}));var l=n(283);n.d(t,"combineLatest",(function(){return l["combineLatest"]}));var p=n(284);n.d(t,"concat",(function(){return p["concat"]}));var h=n(243);n.d(t,"concatAll",(function(){return h["concatAll"]}));var m=n(285);n.d(t,"concatMap",(function(){return m["concatMap"]}));var v=n(286);n.d(t,"concatMapTo",(function(){return v["concatMapTo"]}));var g=n(287);n.d(t,"count",(function(){return g["count"]}));var y=n(288);n.d(t,"debounce",(function(){return y["debounce"]}));var b=n(289);n.d(t,"debounceTime",(function(){return b["debounceTime"]}));var _=n(290);n.d(t,"defaultIfEmpty",(function(){return _["defaultIfEmpty"]}));var w=n(291);n.d(t,"delay",(function(){return w["delay"]}));var S=n(293);n.d(t,"delayWhen",(function(){return S["delayWhen"]}));var x=n(294);n.d(t,"dematerialize",(function(){return x["dematerialize"]}));var C=n(295);n.d(t,"distinct",(function(){return C["distinct"]}));var E=n(296);n.d(t,"distinctUntilChanged",(function(){return E["distinctUntilChanged"]}));var I=n(297);n.d(t,"distinctUntilKeyChanged",(function(){return I["distinctUntilKeyChanged"]}));var T=n(298);n.d(t,"elementAt",(function(){return T["elementAt"]}));var O=n(301);n.d(t,"endWith",(function(){return O["endWith"]}));var R=n(302);n.d(t,"every",(function(){return R["every"]}));var k=n(303);n.d(t,"exhaust",(function(){return k["exhaust"]}));var M=n(304);n.d(t,"exhaustMap",(function(){return M["exhaustMap"]}));var A=n(305);n.d(t,"expand",(function(){return A["expand"]}));var P=n(267);n.d(t,"filter",(function(){return P["filter"]}));var j=n(306);n.d(t,"finalize",(function(){return j["finalize"]}));var N=n(307);n.d(t,"find",(function(){return N["find"]}));var L=n(308);n.d(t,"findIndex",(function(){return L["findIndex"]}));var D=n(309);n.d(t,"first",(function(){return D["first"]}));var B=n(194);n.d(t,"groupBy",(function(){return B["groupBy"]}));var U=n(310);n.d(t,"ignoreElements",(function(){return U["ignoreElements"]}));var F=n(311);n.d(t,"isEmpty",(function(){return F["isEmpty"]}));var V=n(312);n.d(t,"last",(function(){return V["last"]}));var W=n(229);n.d(t,"map",(function(){return W["map"]}));var q=n(314);n.d(t,"mapTo",(function(){return q["mapTo"]}));var $=n(315);n.d(t,"materialize",(function(){return $["materialize"]}));var G=n(316);n.d(t,"max",(function(){return G["max"]}));var z=n(319);n.d(t,"merge",(function(){return z["merge"]}));var H=n(244);n.d(t,"mergeAll",(function(){return H["mergeAll"]}));var K=n(245);n.d(t,"mergeMap",(function(){return K["mergeMap"]})),n.d(t,"flatMap",(function(){return K["mergeMap"]}));var J=n(320);n.d(t,"mergeMapTo",(function(){return J["mergeMapTo"]}));var Y=n(321);n.d(t,"mergeScan",(function(){return Y["mergeScan"]}));var X=n(322);n.d(t,"min",(function(){return X["min"]}));var Z=n(323);n.d(t,"multicast",(function(){return Z["multicast"]}));var Q=n(204);n.d(t,"observeOn",(function(){return Q["observeOn"]}));var ee=n(324);n.d(t,"onErrorResumeNext",(function(){return ee["onErrorResumeNext"]}));var te=n(325);n.d(t,"pairwise",(function(){return te["pairwise"]}));var ne=n(326);n.d(t,"partition",(function(){return ne["partition"]}));var re=n(327);n.d(t,"pluck",(function(){return re["pluck"]}));var ie=n(328);n.d(t,"publish",(function(){return ie["publish"]}));var oe=n(329);n.d(t,"publishBehavior",(function(){return oe["publishBehavior"]}));var se=n(330);n.d(t,"publishLast",(function(){return se["publishLast"]}));var ae=n(331);n.d(t,"publishReplay",(function(){return ae["publishReplay"]}));var ce=n(332);n.d(t,"race",(function(){return ce["race"]}));var ue=n(317);n.d(t,"reduce",(function(){return ue["reduce"]}));var fe=n(333);n.d(t,"repeat",(function(){return fe["repeat"]}));var de=n(334);n.d(t,"repeatWhen",(function(){return de["repeatWhen"]}));var le=n(335);n.d(t,"retry",(function(){return le["retry"]}));var pe=n(336);n.d(t,"retryWhen",(function(){return pe["retryWhen"]}));var he=n(193);n.d(t,"refCount",(function(){return he["refCount"]}));var me=n(337);n.d(t,"sample",(function(){return me["sample"]}));var ve=n(338);n.d(t,"sampleTime",(function(){return ve["sampleTime"]}));var ge=n(318);n.d(t,"scan",(function(){return ge["scan"]}));var ye=n(339);n.d(t,"sequenceEqual",(function(){return ye["sequenceEqual"]}));var be=n(340);n.d(t,"share",(function(){return be["share"]}));var _e=n(341);n.d(t,"shareReplay",(function(){return _e["shareReplay"]}));var we=n(342);n.d(t,"single",(function(){return we["single"]}));var Se=n(343);n.d(t,"skip",(function(){return Se["skip"]}));var xe=n(344);n.d(t,"skipLast",(function(){return xe["skipLast"]}));var Ce=n(345);n.d(t,"skipUntil",(function(){return Ce["skipUntil"]}));var Ee=n(346);n.d(t,"skipWhile",(function(){return Ee["skipWhile"]}));var Ie=n(347);n.d(t,"startWith",(function(){return Ie["startWith"]}));var Te=n(348);n.d(t,"subscribeOn",(function(){return Te["subscribeOn"]}));var Oe=n(350);n.d(t,"switchAll",(function(){return Oe["switchAll"]}));var Re=n(351);n.d(t,"switchMap",(function(){return Re["switchMap"]}));var ke=n(352);n.d(t,"switchMapTo",(function(){return ke["switchMapTo"]}));var Me=n(300);n.d(t,"take",(function(){return Me["take"]}));var Ae=n(313);n.d(t,"takeLast",(function(){return Ae["takeLast"]}));var Pe=n(353);n.d(t,"takeUntil",(function(){return Pe["takeUntil"]}));var je=n(354);n.d(t,"takeWhile",(function(){return je["takeWhile"]}));var Ne=n(355);n.d(t,"tap",(function(){return Ne["tap"]}));var Le=n(356);n.d(t,"throttle",(function(){return Le["throttle"]}));var De=n(357);n.d(t,"throttleTime",(function(){return De["throttleTime"]}));var Be=n(299);n.d(t,"throwIfEmpty",(function(){return Be["throwIfEmpty"]}));var Ue=n(358);n.d(t,"timeInterval",(function(){return Ue["timeInterval"]}));var Fe=n(359);n.d(t,"timeout",(function(){return Fe["timeout"]}));var Ve=n(360);n.d(t,"timeoutWith",(function(){return Ve["timeoutWith"]}));var We=n(361);n.d(t,"timestamp",(function(){return We["timestamp"]}));var qe=n(362);n.d(t,"toArray",(function(){return qe["toArray"]}));var $e=n(363);n.d(t,"window",(function(){return $e["window"]}));var Ge=n(364);n.d(t,"windowCount",(function(){return Ge["windowCount"]}));var ze=n(365);n.d(t,"windowTime",(function(){return ze["windowTime"]}));var He=n(366);n.d(t,"windowToggle",(function(){return He["windowToggle"]}));var Ke=n(367);n.d(t,"windowWhen",(function(){return Ke["windowWhen"]}));var Je=n(368);n.d(t,"withLatestFrom",(function(){return Je["withLatestFrom"]}));var Ye=n(369);n.d(t,"zip",(function(){return Ye["zip"]}));var Xe=n(370);n.d(t,"zipAll",(function(){return Xe["zipAll"]}))},function(e,t,n){"use strict";n.r(t),n.d(t,"audit",(function(){return s}));var r=n(175),i=n(232),o=n(233);function s(e){return function(t){return t.lift(new a(e))}}var a=function(){function e(e){this.durationSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.durationSelector))},e}(),c=function(e){function t(t,n){var r=e.call(this,t)||this;return r.durationSelector=n,r.hasValue=!1,r}return r["__extends"](t,e),t.prototype._next=function(e){if(this.value=e,this.hasValue=!0,!this.throttled){var t=void 0;try{var n=this.durationSelector;t=n(e)}catch(i){return this.destination.error(i)}var r=Object(o["subscribeToResult"])(this,t);!r||r.closed?this.clearThrottle():this.add(this.throttled=r)}},t.prototype.clearThrottle=function(){var e=this,t=e.value,n=e.hasValue,r=e.throttled;r&&(this.remove(r),this.throttled=null,r.unsubscribe()),n&&(this.value=null,this.hasValue=!1,this.destination.next(t))},t.prototype.notifyNext=function(e,t,n,r){this.clearThrottle()},t.prototype.notifyComplete=function(){this.clearThrottle()},t}(i["OuterSubscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"auditTime",(function(){return s}));var r=n(218),i=n(274),o=n(270);function s(e,t){return void 0===t&&(t=r["async"]),Object(i["audit"])((function(){return Object(o["timer"])(e,t)}))}},function(e,t,n){"use strict";n.r(t),n.d(t,"buffer",(function(){return s}));var r=n(175),i=n(232),o=n(233);function s(e){return function(t){return t.lift(new a(e))}}var a=function(){function e(e){this.closingNotifier=e}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.closingNotifier))},e}(),c=function(e){function t(t,n){var r=e.call(this,t)||this;return r.buffer=[],r.add(Object(o["subscribeToResult"])(r,n)),r}return r["__extends"](t,e),t.prototype._next=function(e){this.buffer.push(e)},t.prototype.notifyNext=function(e,t,n,r,i){var o=this.buffer;this.buffer=[],this.destination.next(o)},t}(i["OuterSubscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"bufferCount",(function(){return o}));var r=n(175),i=n(174);function o(e,t){return void 0===t&&(t=null),function(n){return n.lift(new s(e,t))}}var s=function(){function e(e,t){this.bufferSize=e,this.startBufferEvery=t,this.subscriberClass=t&&e!==t?c:a}return e.prototype.call=function(e,t){return t.subscribe(new this.subscriberClass(e,this.bufferSize,this.startBufferEvery))},e}(),a=function(e){function t(t,n){var r=e.call(this,t)||this;return r.bufferSize=n,r.buffer=[],r}return r["__extends"](t,e),t.prototype._next=function(e){var t=this.buffer;t.push(e),t.length==this.bufferSize&&(this.destination.next(t),this.buffer=[])},t.prototype._complete=function(){var t=this.buffer;t.length>0&&this.destination.next(t),e.prototype._complete.call(this)},t}(i["Subscriber"]),c=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.bufferSize=n,i.startBufferEvery=r,i.buffers=[],i.count=0,i}return r["__extends"](t,e),t.prototype._next=function(e){var t=this,n=t.bufferSize,r=t.startBufferEvery,i=t.buffers,o=t.count;this.count++,o%r===0&&i.push([]);for(var s=i.length;s--;){var a=i[s];a.push(e),a.length===n&&(i.splice(s,1),this.destination.next(a))}},t.prototype._complete=function(){var t=this,n=t.buffers,r=t.destination;while(n.length>0){var i=n.shift();i.length>0&&r.next(i)}e.prototype._complete.call(this)},t}(i["Subscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"bufferTime",(function(){return a}));var r=n(175),i=n(218),o=n(174),s=n(208);function a(e){var t=arguments.length,n=i["async"];Object(s["isScheduler"])(arguments[arguments.length-1])&&(n=arguments[arguments.length-1],t--);var r=null;t>=2&&(r=arguments[1]);var o=Number.POSITIVE_INFINITY;return t>=3&&(o=arguments[2]),function(t){return t.lift(new c(e,r,o,n))}}var c=function(){function e(e,t,n,r){this.bufferTimeSpan=e,this.bufferCreationInterval=t,this.maxBufferSize=n,this.scheduler=r}return e.prototype.call=function(e,t){return t.subscribe(new f(e,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))},e}(),u=function(){function e(){this.buffer=[]}return e}(),f=function(e){function t(t,n,r,i,o){var s=e.call(this,t)||this;s.bufferTimeSpan=n,s.bufferCreationInterval=r,s.maxBufferSize=i,s.scheduler=o,s.contexts=[];var a=s.openContext();if(s.timespanOnly=null==r||r<0,s.timespanOnly){var c={subscriber:s,context:a,bufferTimeSpan:n};s.add(a.closeAction=o.schedule(d,n,c))}else{var u={subscriber:s,context:a},f={bufferTimeSpan:n,bufferCreationInterval:r,subscriber:s,scheduler:o};s.add(a.closeAction=o.schedule(p,n,u)),s.add(o.schedule(l,r,f))}return s}return r["__extends"](t,e),t.prototype._next=function(e){for(var t,n=this.contexts,r=n.length,i=0;i<r;i++){var o=n[i],s=o.buffer;s.push(e),s.length==this.maxBufferSize&&(t=o)}t&&this.onBufferFull(t)},t.prototype._error=function(t){this.contexts.length=0,e.prototype._error.call(this,t)},t.prototype._complete=function(){var t=this,n=t.contexts,r=t.destination;while(n.length>0){var i=n.shift();r.next(i.buffer)}e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.contexts=null},t.prototype.onBufferFull=function(e){this.closeContext(e);var t=e.closeAction;if(t.unsubscribe(),this.remove(t),!this.closed&&this.timespanOnly){e=this.openContext();var n=this.bufferTimeSpan,r={subscriber:this,context:e,bufferTimeSpan:n};this.add(e.closeAction=this.scheduler.schedule(d,n,r))}},t.prototype.openContext=function(){var e=new u;return this.contexts.push(e),e},t.prototype.closeContext=function(e){this.destination.next(e.buffer);var t=this.contexts,n=t?t.indexOf(e):-1;n>=0&&t.splice(t.indexOf(e),1)},t}(o["Subscriber"]);function d(e){var t=e.subscriber,n=e.context;n&&t.closeContext(n),t.closed||(e.context=t.openContext(),e.context.closeAction=this.schedule(e,e.bufferTimeSpan))}function l(e){var t=e.bufferCreationInterval,n=e.bufferTimeSpan,r=e.subscriber,i=e.scheduler,o=r.openContext(),s=this;r.closed||(r.add(o.closeAction=i.schedule(p,n,{subscriber:r,context:o})),s.schedule(e,t))}function p(e){var t=e.subscriber,n=e.context;t.closeContext(n)}},function(e,t,n){"use strict";n.r(t),n.d(t,"bufferToggle",(function(){return a}));var r=n(175),i=n(180),o=n(233),s=n(232);function a(e,t){return function(n){return n.lift(new c(e,t))}}var c=function(){function e(e,t){this.openings=e,this.closingSelector=t}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.openings,this.closingSelector))},e}(),u=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.openings=n,i.closingSelector=r,i.contexts=[],i.add(Object(o["subscribeToResult"])(i,n)),i}return r["__extends"](t,e),t.prototype._next=function(e){for(var t=this.contexts,n=t.length,r=0;r<n;r++)t[r].buffer.push(e)},t.prototype._error=function(t){var n=this.contexts;while(n.length>0){var r=n.shift();r.subscription.unsubscribe(),r.buffer=null,r.subscription=null}this.contexts=null,e.prototype._error.call(this,t)},t.prototype._complete=function(){var t=this.contexts;while(t.length>0){var n=t.shift();this.destination.next(n.buffer),n.subscription.unsubscribe(),n.buffer=null,n.subscription=null}this.contexts=null,e.prototype._complete.call(this)},t.prototype.notifyNext=function(e,t,n,r,i){e?this.closeBuffer(e):this.openBuffer(t)},t.prototype.notifyComplete=function(e){this.closeBuffer(e.context)},t.prototype.openBuffer=function(e){try{var t=this.closingSelector,n=t.call(this,e);n&&this.trySubscribe(n)}catch(r){this._error(r)}},t.prototype.closeBuffer=function(e){var t=this.contexts;if(t&&e){var n=e.buffer,r=e.subscription;this.destination.next(n),t.splice(t.indexOf(e),1),this.remove(r),r.unsubscribe()}},t.prototype.trySubscribe=function(e){var t=this.contexts,n=[],r=new i["Subscription"],s={buffer:n,subscription:r};t.push(s);var a=Object(o["subscribeToResult"])(this,e,s);!a||a.closed?this.closeBuffer(s):(a.context=s,this.add(a),r.add(a))},t}(s["OuterSubscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"bufferWhen",(function(){return a}));var r=n(175),i=n(180),o=n(232),s=n(233);function a(e){return function(t){return t.lift(new c(e))}}var c=function(){function e(e){this.closingSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.closingSelector))},e}(),u=function(e){function t(t,n){var r=e.call(this,t)||this;return r.closingSelector=n,r.subscribing=!1,r.openBuffer(),r}return r["__extends"](t,e),t.prototype._next=function(e){this.buffer.push(e)},t.prototype._complete=function(){var t=this.buffer;t&&this.destination.next(t),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.buffer=null,this.subscribing=!1},t.prototype.notifyNext=function(e,t,n,r,i){this.openBuffer()},t.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()},t.prototype.openBuffer=function(){var e=this.closingSubscription;e&&(this.remove(e),e.unsubscribe());var t,n=this.buffer;this.buffer&&this.destination.next(n),this.buffer=[];try{var r=this.closingSelector;t=r()}catch(o){return this.error(o)}e=new i["Subscription"],this.closingSubscription=e,this.add(e),this.subscribing=!0,e.add(Object(s["subscribeToResult"])(this,t)),this.subscribing=!1},t}(o["OuterSubscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"catchError",(function(){return a}));var r=n(175),i=n(232),o=n(234),s=n(233);function a(e){return function(t){var n=new c(e),r=t.lift(n);return n.caught=r}}var c=function(){function e(e){this.selector=e}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.selector,this.caught))},e}(),u=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.selector=n,i.caught=r,i}return r["__extends"](t,e),t.prototype.error=function(t){if(!this.isStopped){var n=void 0;try{n=this.selector(t,this.caught)}catch(i){return void e.prototype.error.call(this,i)}this._unsubscribeAndRecycle();var r=new o["InnerSubscriber"](this,void 0,void 0);this.add(r),Object(s["subscribeToResult"])(this,n,void 0,void 0,r)}},t}(i["OuterSubscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"combineAll",(function(){return i}));var r=n(231);function i(e){return function(t){return t.lift(new r["CombineLatestOperator"](e))}}},function(e,t,n){"use strict";n.r(t),n.d(t,"combineLatest",(function(){return s}));var r=n(181),i=n(231),o=n(246);function s(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=null;return"function"===typeof e[e.length-1]&&(n=e.pop()),1===e.length&&Object(r["isArray"])(e[0])&&(e=e[0].slice()),function(t){return t.lift.call(Object(o["from"])([t].concat(e)),new i["CombineLatestOperator"](n))}}},function(e,t,n){"use strict";n.r(t),n.d(t,"concat",(function(){return i}));var r=n(242);function i(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return t.lift.call(r["concat"].apply(void 0,[t].concat(e)))}}},function(e,t,n){"use strict";n.r(t),n.d(t,"concatMap",(function(){return i}));var r=n(245);function i(e,t){return Object(r["mergeMap"])(e,t,1)}},function(e,t,n){"use strict";n.r(t),n.d(t,"concatMapTo",(function(){return i}));var r=n(285);function i(e,t){return Object(r["concatMap"])((function(){return e}),t)}},function(e,t,n){"use strict";n.r(t),n.d(t,"count",(function(){return o}));var r=n(175),i=n(174);function o(e){return function(t){return t.lift(new s(e,t))}}var s=function(){function e(e,t){this.predicate=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.predicate,this.source))},e}(),a=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.predicate=n,i.source=r,i.count=0,i.index=0,i}return r["__extends"](t,e),t.prototype._next=function(e){this.predicate?this._tryPredicate(e):this.count++},t.prototype._tryPredicate=function(e){var t;try{t=this.predicate(e,this.index++,this.source)}catch(n){return void this.destination.error(n)}t&&this.count++},t.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},t}(i["Subscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"debounce",(function(){return s}));var r=n(175),i=n(232),o=n(233);function s(e){return function(t){return t.lift(new a(e))}}var a=function(){function e(e){this.durationSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.durationSelector))},e}(),c=function(e){function t(t,n){var r=e.call(this,t)||this;return r.durationSelector=n,r.hasValue=!1,r.durationSubscription=null,r}return r["__extends"](t,e),t.prototype._next=function(e){try{var t=this.durationSelector.call(this,e);t&&this._tryNext(e,t)}catch(n){this.destination.error(n)}},t.prototype._complete=function(){this.emitValue(),this.destination.complete()},t.prototype._tryNext=function(e,t){var n=this.durationSubscription;this.value=e,this.hasValue=!0,n&&(n.unsubscribe(),this.remove(n)),n=Object(o["subscribeToResult"])(this,t),n&&!n.closed&&this.add(this.durationSubscription=n)},t.prototype.notifyNext=function(e,t,n,r,i){this.emitValue()},t.prototype.notifyComplete=function(){this.emitValue()},t.prototype.emitValue=function(){if(this.hasValue){var t=this.value,n=this.durationSubscription;n&&(this.durationSubscription=null,n.unsubscribe(),this.remove(n)),this.value=null,this.hasValue=!1,e.prototype._next.call(this,t)}},t}(i["OuterSubscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"debounceTime",(function(){return s}));var r=n(175),i=n(174),o=n(218);function s(e,t){return void 0===t&&(t=o["async"]),function(n){return n.lift(new a(e,t))}}var a=function(){function e(e,t){this.dueTime=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.dueTime,this.scheduler))},e}(),c=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.dueTime=n,i.scheduler=r,i.debouncedSubscription=null,i.lastValue=null,i.hasValue=!1,i}return r["__extends"](t,e),t.prototype._next=function(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(u,this.dueTime,this))},t.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},t.prototype.debouncedNext=function(){if(this.clearDebounce(),this.hasValue){var e=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}},t.prototype.clearDebounce=function(){var e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)},t}(i["Subscriber"]);function u(e){e.debouncedNext()}},function(e,t,n){"use strict";n.r(t),n.d(t,"defaultIfEmpty",(function(){return o}));var r=n(175),i=n(174);function o(e){return void 0===e&&(e=null),function(t){return t.lift(new s(e))}}var s=function(){function e(e){this.defaultValue=e}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.defaultValue))},e}(),a=function(e){function t(t,n){var r=e.call(this,t)||this;return r.defaultValue=n,r.isEmpty=!0,r}return r["__extends"](t,e),t.prototype._next=function(e){this.isEmpty=!1,this.destination.next(e)},t.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},t}(i["Subscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"delay",(function(){return c}));var r=n(175),i=n(218),o=n(292),s=n(174),a=n(205);function c(e,t){void 0===t&&(t=i["async"]);var n=Object(o["isDate"])(e),r=n?+e-t.now():Math.abs(e);return function(e){return e.lift(new u(r,t))}}var u=function(){function e(e,t){this.delay=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new f(e,this.delay,this.scheduler))},e}(),f=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.delay=n,i.scheduler=r,i.queue=[],i.active=!1,i.errored=!1,i}return r["__extends"](t,e),t.dispatch=function(e){var t=e.source,n=t.queue,r=e.scheduler,i=e.destination;while(n.length>0&&n[0].time-r.now()<=0)n.shift().notification.observe(i);if(n.length>0){var o=Math.max(0,n[0].time-r.now());this.schedule(e,o)}else this.unsubscribe(),t.active=!1},t.prototype._schedule=function(e){this.active=!0;var n=this.destination;n.add(e.schedule(t.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))},t.prototype.scheduleNotification=function(e){if(!0!==this.errored){var t=this.scheduler,n=new d(t.now()+this.delay,e);this.queue.push(n),!1===this.active&&this._schedule(t)}},t.prototype._next=function(e){this.scheduleNotification(a["Notification"].createNext(e))},t.prototype._error=function(e){this.errored=!0,this.queue=[],this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.scheduleNotification(a["Notification"].createComplete()),this.unsubscribe()},t}(s["Subscriber"]),d=function(){function e(e,t){this.time=e,this.notification=t}return e}()},function(e,t,n){"use strict";function r(e){return e instanceof Date&&!isNaN(+e)}n.r(t),n.d(t,"isDate",(function(){return r}))},function(e,t,n){"use strict";n.r(t),n.d(t,"delayWhen",(function(){return c}));var r=n(175),i=n(174),o=n(172),s=n(232),a=n(233);function c(e,t){return t?function(n){return new d(n,t).lift(new u(e))}:function(t){return t.lift(new u(e))}}var u=function(){function e(e){this.delayDurationSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new f(e,this.delayDurationSelector))},e}(),f=function(e){function t(t,n){var r=e.call(this,t)||this;return r.delayDurationSelector=n,r.completed=!1,r.delayNotifierSubscriptions=[],r.index=0,r}return r["__extends"](t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(e),this.removeSubscription(i),this.tryComplete()},t.prototype.notifyError=function(e,t){this._error(e)},t.prototype.notifyComplete=function(e){var t=this.removeSubscription(e);t&&this.destination.next(t),this.tryComplete()},t.prototype._next=function(e){var t=this.index++;try{var n=this.delayDurationSelector(e,t);n&&this.tryDelay(n,e)}catch(r){this.destination.error(r)}},t.prototype._complete=function(){this.completed=!0,this.tryComplete(),this.unsubscribe()},t.prototype.removeSubscription=function(e){e.unsubscribe();var t=this.delayNotifierSubscriptions.indexOf(e);return-1!==t&&this.delayNotifierSubscriptions.splice(t,1),e.outerValue},t.prototype.tryDelay=function(e,t){var n=Object(a["subscribeToResult"])(this,e,t);if(n&&!n.closed){var r=this.destination;r.add(n),this.delayNotifierSubscriptions.push(n)}},t.prototype.tryComplete=function(){this.completed&&0===this.delayNotifierSubscriptions.length&&this.destination.complete()},t}(s["OuterSubscriber"]),d=function(e){function t(t,n){var r=e.call(this)||this;return r.source=t,r.subscriptionDelay=n,r}return r["__extends"](t,e),t.prototype._subscribe=function(e){this.subscriptionDelay.subscribe(new l(e,this.source))},t}(o["Observable"]),l=function(e){function t(t,n){var r=e.call(this)||this;return r.parent=t,r.source=n,r.sourceSubscribed=!1,r}return r["__extends"](t,e),t.prototype._next=function(e){this.subscribeToSource()},t.prototype._error=function(e){this.unsubscribe(),this.parent.error(e)},t.prototype._complete=function(){this.unsubscribe(),this.subscribeToSource()},t.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},t}(i["Subscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"dematerialize",(function(){return o}));var r=n(175),i=n(174);function o(){return function(e){return e.lift(new s)}}var s=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new a(e))},e}(),a=function(e){function t(t){return e.call(this,t)||this}return r["__extends"](t,e),t.prototype._next=function(e){e.observe(this.destination)},t}(i["Subscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"distinct",(function(){return s})),n.d(t,"DistinctSubscriber",(function(){return c}));var r=n(175),i=n(232),o=n(233);function s(e,t){return function(n){return n.lift(new a(e,t))}}var a=function(){function e(e,t){this.keySelector=e,this.flushes=t}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.keySelector,this.flushes))},e}(),c=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.keySelector=n,i.values=new Set,r&&i.add(Object(o["subscribeToResult"])(i,r)),i}return r["__extends"](t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.values.clear()},t.prototype.notifyError=function(e,t){this._error(e)},t.prototype._next=function(e){this.keySelector?this._useKeySelector(e):this._finalizeNext(e,e)},t.prototype._useKeySelector=function(e){var t,n=this.destination;try{t=this.keySelector(e)}catch(r){return void n.error(r)}this._finalizeNext(t,e)},t.prototype._finalizeNext=function(e,t){var n=this.values;n.has(e)||(n.add(e),this.destination.next(t))},t}(i["OuterSubscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"distinctUntilChanged",(function(){return o}));var r=n(175),i=n(174);function o(e,t){return function(n){return n.lift(new s(e,t))}}var s=function(){function e(e,t){this.compare=e,this.keySelector=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.compare,this.keySelector))},e}(),a=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.keySelector=r,i.hasKey=!1,"function"===typeof n&&(i.compare=n),i}return r["__extends"](t,e),t.prototype.compare=function(e,t){return e===t},t.prototype._next=function(e){var t;try{var n=this.keySelector;t=n?n(e):e}catch(o){return this.destination.error(o)}var r=!1;if(this.hasKey)try{var i=this.compare;r=i(this.key,t)}catch(o){return this.destination.error(o)}else this.hasKey=!0;r||(this.key=t,this.destination.next(e))},t}(i["Subscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"distinctUntilKeyChanged",(function(){return i}));var r=n(296);function i(e,t){return Object(r["distinctUntilChanged"])((function(n,r){return t?t(n[e],r[e]):n[e]===r[e]}))}},function(e,t,n){"use strict";n.r(t),n.d(t,"elementAt",(function(){return c}));var r=n(225),i=n(267),o=n(299),s=n(290),a=n(300);function c(e,t){if(e<0)throw new r["ArgumentOutOfRangeError"];var n=arguments.length>=2;return function(c){return c.pipe(Object(i["filter"])((function(t,n){return n===e})),Object(a["take"])(1),n?Object(s["defaultIfEmpty"])(t):Object(o["throwIfEmpty"])((function(){return new r["ArgumentOutOfRangeError"]})))}}},function(e,t,n){"use strict";n.r(t),n.d(t,"throwIfEmpty",(function(){return s}));var r=n(175),i=n(226),o=n(174);function s(e){return void 0===e&&(e=u),function(t){return t.lift(new a(e))}}var a=function(){function e(e){this.errorFactory=e}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.errorFactory))},e}(),c=function(e){function t(t,n){var r=e.call(this,t)||this;return r.errorFactory=n,r.hasValue=!1,r}return r["__extends"](t,e),t.prototype._next=function(e){this.hasValue=!0,this.destination.next(e)},t.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var e=void 0;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)},t}(o["Subscriber"]);function u(){return new i["EmptyError"]}},function(e,t,n){"use strict";n.r(t),n.d(t,"take",(function(){return a}));var r=n(175),i=n(174),o=n(225),s=n(206);function a(e){return function(t){return 0===e?Object(s["empty"])():t.lift(new c(e))}}var c=function(){function e(e){if(this.total=e,this.total<0)throw new o["ArgumentOutOfRangeError"]}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.total))},e}(),u=function(e){function t(t,n){var r=e.call(this,t)||this;return r.total=n,r.count=0,r}return r["__extends"](t,e),t.prototype._next=function(e){var t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))},t}(i["Subscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"endWith",(function(){return o}));var r=n(242),i=n(207);function o(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return Object(r["concat"])(t,i["of"].apply(void 0,e))}}},function(e,t,n){"use strict";n.r(t),n.d(t,"every",(function(){return o}));var r=n(175),i=n(174);function o(e,t){return function(n){return n.lift(new s(e,t,n))}}var s=function(){function e(e,t,n){this.predicate=e,this.thisArg=t,this.source=n}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.predicate,this.thisArg,this.source))},e}(),a=function(e){function t(t,n,r,i){var o=e.call(this,t)||this;return o.predicate=n,o.thisArg=r,o.source=i,o.index=0,o.thisArg=r||o,o}return r["__extends"](t,e),t.prototype.notifyComplete=function(e){this.destination.next(e),this.destination.complete()},t.prototype._next=function(e){var t=!1;try{t=this.predicate.call(this.thisArg,e,this.index++,this.source)}catch(n){return void this.destination.error(n)}t||this.notifyComplete(!1)},t.prototype._complete=function(){this.notifyComplete(!0)},t}(i["Subscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"exhaust",(function(){return s}));var r=n(175),i=n(232),o=n(233);function s(){return function(e){return e.lift(new a)}}var a=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new c(e))},e}(),c=function(e){function t(t){var n=e.call(this,t)||this;return n.hasCompleted=!1,n.hasSubscription=!1,n}return r["__extends"](t,e),t.prototype._next=function(e){this.hasSubscription||(this.hasSubscription=!0,this.add(Object(o["subscribeToResult"])(this,e)))},t.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},t.prototype.notifyComplete=function(e){this.remove(e),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},t}(i["OuterSubscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"exhaustMap",(function(){return u}));var r=n(175),i=n(232),o=n(234),s=n(233),a=n(229),c=n(246);function u(e,t){return t?function(n){return n.pipe(u((function(n,r){return Object(c["from"])(e(n,r)).pipe(Object(a["map"])((function(e,i){return t(n,e,r,i)})))})))}:function(t){return t.lift(new f(e))}}var f=function(){function e(e){this.project=e}return e.prototype.call=function(e,t){return t.subscribe(new d(e,this.project))},e}(),d=function(e){function t(t,n){var r=e.call(this,t)||this;return r.project=n,r.hasSubscription=!1,r.hasCompleted=!1,r.index=0,r}return r["__extends"](t,e),t.prototype._next=function(e){this.hasSubscription||this.tryNext(e)},t.prototype.tryNext=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this.hasSubscription=!0,this._innerSub(t,e,n)},t.prototype._innerSub=function(e,t,n){var r=new o["InnerSubscriber"](this,void 0,void 0),i=this.destination;i.add(r),Object(s["subscribeToResult"])(this,e,t,n,r)},t.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(e){var t=this.destination;t.remove(e),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},t}(i["OuterSubscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"expand",(function(){return s})),n.d(t,"ExpandOperator",(function(){return a})),n.d(t,"ExpandSubscriber",(function(){return c}));var r=n(175),i=n(232),o=n(233);function s(e,t,n){return void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===n&&(n=void 0),t=(t||0)<1?Number.POSITIVE_INFINITY:t,function(r){return r.lift(new a(e,t,n))}}var a=function(){function e(e,t,n){this.project=e,this.concurrent=t,this.scheduler=n}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.project,this.concurrent,this.scheduler))},e}(),c=function(e){function t(t,n,r,i){var o=e.call(this,t)||this;return o.project=n,o.concurrent=r,o.scheduler=i,o.index=0,o.active=0,o.hasCompleted=!1,r<Number.POSITIVE_INFINITY&&(o.buffer=[]),o}return r["__extends"](t,e),t.dispatch=function(e){var t=e.subscriber,n=e.result,r=e.value,i=e.index;t.subscribeToProjection(n,r,i)},t.prototype._next=function(e){var n=this.destination;if(n.closed)this._complete();else{var r=this.index++;if(this.active<this.concurrent){n.next(e);try{var i=this.project,o=i(e,r);if(this.scheduler){var s={subscriber:this,result:o,value:e,index:r},a=this.destination;a.add(this.scheduler.schedule(t.dispatch,0,s))}else this.subscribeToProjection(o,e,r)}catch(c){n.error(c)}}else this.buffer.push(e)}},t.prototype.subscribeToProjection=function(e,t,n){this.active++;var r=this.destination;r.add(Object(o["subscribeToResult"])(this,e,t,n))},t.prototype._complete=function(){this.hasCompleted=!0,this.hasCompleted&&0===this.active&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e,t,n,r,i){this._next(t)},t.prototype.notifyComplete=function(e){var t=this.buffer,n=this.destination;n.remove(e),this.active--,t&&t.length>0&&this._next(t.shift()),this.hasCompleted&&0===this.active&&this.destination.complete()},t}(i["OuterSubscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"finalize",(function(){return s}));var r=n(175),i=n(174),o=n(180);function s(e){return function(t){return t.lift(new a(e))}}var a=function(){function e(e){this.callback=e}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.callback))},e}(),c=function(e){function t(t,n){var r=e.call(this,t)||this;return r.add(new o["Subscription"](n)),r}return r["__extends"](t,e),t}(i["Subscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"find",(function(){return o})),n.d(t,"FindValueOperator",(function(){return s})),n.d(t,"FindValueSubscriber",(function(){return a}));var r=n(175),i=n(174);function o(e,t){if("function"!==typeof e)throw new TypeError("predicate is not a function");return function(n){return n.lift(new s(e,n,!1,t))}}var s=function(){function e(e,t,n,r){this.predicate=e,this.source=t,this.yieldIndex=n,this.thisArg=r}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.predicate,this.source,this.yieldIndex,this.thisArg))},e}(),a=function(e){function t(t,n,r,i,o){var s=e.call(this,t)||this;return s.predicate=n,s.source=r,s.yieldIndex=i,s.thisArg=o,s.index=0,s}return r["__extends"](t,e),t.prototype.notifyComplete=function(e){var t=this.destination;t.next(e),t.complete(),this.unsubscribe()},t.prototype._next=function(e){var t=this,n=t.predicate,r=t.thisArg,i=this.index++;try{var o=n.call(r||this,e,i,this.source);o&&this.notifyComplete(this.yieldIndex?i:e)}catch(s){this.destination.error(s)}},t.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)},t}(i["Subscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"findIndex",(function(){return i}));var r=n(307);function i(e,t){return function(n){return n.lift(new r["FindValueOperator"](e,n,!0,t))}}},function(e,t,n){"use strict";n.r(t),n.d(t,"first",(function(){return u}));var r=n(226),i=n(267),o=n(300),s=n(290),a=n(299),c=n(223);function u(e,t){var n=arguments.length>=2;return function(u){return u.pipe(e?Object(i["filter"])((function(t,n){return e(t,n,u)})):c["identity"],Object(o["take"])(1),n?Object(s["defaultIfEmpty"])(t):Object(a["throwIfEmpty"])((function(){return new r["EmptyError"]})))}}},function(e,t,n){"use strict";n.r(t),n.d(t,"ignoreElements",(function(){return o}));var r=n(175),i=n(174);function o(){return function(e){return e.lift(new s)}}var s=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new a(e))},e}(),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r["__extends"](t,e),t.prototype._next=function(e){},t}(i["Subscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"isEmpty",(function(){return o}));var r=n(175),i=n(174);function o(){return function(e){return e.lift(new s)}}var s=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new a(e))},e}(),a=function(e){function t(t){return e.call(this,t)||this}return r["__extends"](t,e),t.prototype.notifyComplete=function(e){var t=this.destination;t.next(e),t.complete()},t.prototype._next=function(e){this.notifyComplete(!1)},t.prototype._complete=function(){this.notifyComplete(!0)},t}(i["Subscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"last",(function(){return u}));var r=n(226),i=n(267),o=n(313),s=n(299),a=n(290),c=n(223);function u(e,t){var n=arguments.length>=2;return function(u){return u.pipe(e?Object(i["filter"])((function(t,n){return e(t,n,u)})):c["identity"],Object(o["takeLast"])(1),n?Object(a["defaultIfEmpty"])(t):Object(s["throwIfEmpty"])((function(){return new r["EmptyError"]})))}}},function(e,t,n){"use strict";n.r(t),n.d(t,"takeLast",(function(){return a}));var r=n(175),i=n(174),o=n(225),s=n(206);function a(e){return function(t){return 0===e?Object(s["empty"])():t.lift(new c(e))}}var c=function(){function e(e){if(this.total=e,this.total<0)throw new o["ArgumentOutOfRangeError"]}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.total))},e}(),u=function(e){function t(t,n){var r=e.call(this,t)||this;return r.total=n,r.ring=new Array,r.count=0,r}return r["__extends"](t,e),t.prototype._next=function(e){var t=this.ring,n=this.total,r=this.count++;if(t.length<n)t.push(e);else{var i=r%n;t[i]=e}},t.prototype._complete=function(){var e=this.destination,t=this.count;if(t>0)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,i=0;i<n;i++){var o=t++%n;e.next(r[o])}e.complete()},t}(i["Subscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"mapTo",(function(){return o}));var r=n(175),i=n(174);function o(e){return function(t){return t.lift(new s(e))}}var s=function(){function e(e){this.value=e}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.value))},e}(),a=function(e){function t(t,n){var r=e.call(this,t)||this;return r.value=n,r}return r["__extends"](t,e),t.prototype._next=function(e){this.destination.next(this.value)},t}(i["Subscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"materialize",(function(){return s}));var r=n(175),i=n(174),o=n(205);function s(){return function(e){return e.lift(new a)}}var a=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new c(e))},e}(),c=function(e){function t(t){return e.call(this,t)||this}return r["__extends"](t,e),t.prototype._next=function(e){this.destination.next(o["Notification"].createNext(e))},t.prototype._error=function(e){var t=this.destination;t.next(o["Notification"].createError(e)),t.complete()},t.prototype._complete=function(){var e=this.destination;e.next(o["Notification"].createComplete()),e.complete()},t}(i["Subscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"max",(function(){return i}));var r=n(317);function i(e){var t="function"===typeof e?function(t,n){return e(t,n)>0?t:n}:function(e,t){return e>t?e:t};return Object(r["reduce"])(t)}},function(e,t,n){"use strict";n.r(t),n.d(t,"reduce",(function(){return a}));var r=n(318),i=n(313),o=n(290),s=n(187);function a(e,t){return arguments.length>=2?function(n){return Object(s["pipe"])(Object(r["scan"])(e,t),Object(i["takeLast"])(1),Object(o["defaultIfEmpty"])(t))(n)}:function(t){return Object(s["pipe"])(Object(r["scan"])((function(t,n,r){return e(t,n,r+1)})),Object(i["takeLast"])(1))(t)}}},function(e,t,n){"use strict";n.r(t),n.d(t,"scan",(function(){return o}));var r=n(175),i=n(174);function o(e,t){var n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new s(e,t,n))}}var s=function(){function e(e,t,n){void 0===n&&(n=!1),this.accumulator=e,this.seed=t,this.hasSeed=n}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.accumulator,this.seed,this.hasSeed))},e}(),a=function(e){function t(t,n,r,i){var o=e.call(this,t)||this;return o.accumulator=n,o._seed=r,o.hasSeed=i,o.index=0,o}return r["__extends"](t,e),Object.defineProperty(t.prototype,"seed",{get:function(){return this._seed},set:function(e){this.hasSeed=!0,this._seed=e},enumerable:!0,configurable:!0}),t.prototype._next=function(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)},t.prototype._tryNext=function(e){var t,n=this.index++;try{t=this.accumulator(this.seed,e,n)}catch(r){this.destination.error(r)}this.seed=t,this.destination.next(t)},t}(i["Subscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"merge",(function(){return i}));var r=n(261);function i(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return t.lift.call(r["merge"].apply(void 0,[t].concat(e)))}}},function(e,t,n){"use strict";n.r(t),n.d(t,"mergeMapTo",(function(){return i}));var r=n(245);function i(e,t,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"===typeof t?Object(r["mergeMap"])((function(){return e}),t,n):("number"===typeof t&&(n=t),Object(r["mergeMap"])((function(){return e}),n))}},function(e,t,n){"use strict";n.r(t),n.d(t,"mergeScan",(function(){return a})),n.d(t,"MergeScanOperator",(function(){return c})),n.d(t,"MergeScanSubscriber",(function(){return u}));var r=n(175),i=n(233),o=n(232),s=n(234);function a(e,t,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),function(r){return r.lift(new c(e,t,n))}}var c=function(){function e(e,t,n){this.accumulator=e,this.seed=t,this.concurrent=n}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.accumulator,this.seed,this.concurrent))},e}(),u=function(e){function t(t,n,r,i){var o=e.call(this,t)||this;return o.accumulator=n,o.acc=r,o.concurrent=i,o.hasValue=!1,o.hasCompleted=!1,o.buffer=[],o.active=0,o.index=0,o}return r["__extends"](t,e),t.prototype._next=function(e){if(this.active<this.concurrent){var t=this.index++,n=this.destination,r=void 0;try{var i=this.accumulator;r=i(this.acc,e,t)}catch(o){return n.error(o)}this.active++,this._innerSub(r,e,t)}else this.buffer.push(e)},t.prototype._innerSub=function(e,t,n){var r=new s["InnerSubscriber"](this,void 0,void 0),o=this.destination;o.add(r),Object(i["subscribeToResult"])(this,e,t,n,r)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete()),this.unsubscribe()},t.prototype.notifyNext=function(e,t,n,r,i){var o=this.destination;this.acc=t,this.hasValue=!0,o.next(t)},t.prototype.notifyComplete=function(e){var t=this.buffer,n=this.destination;n.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())},t}(o["OuterSubscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"min",(function(){return i}));var r=n(317);function i(e){var t="function"===typeof e?function(t,n){return e(t,n)<0?t:n}:function(e,t){return e<t?e:t};return Object(r["reduce"])(t)}},function(e,t,n){"use strict";n.r(t),n.d(t,"multicast",(function(){return i})),n.d(t,"MulticastOperator",(function(){return o}));var r=n(189);function i(e,t){return function(n){var i;if(i="function"===typeof e?e:function(){return e},"function"===typeof t)return n.lift(new o(i,t));var s=Object.create(n,r["connectableObservableDescriptor"]);return s.source=n,s.subjectFactory=i,s}}var o=function(){function e(e,t){this.subjectFactory=e,this.selector=t}return e.prototype.call=function(e,t){var n=this.selector,r=this.subjectFactory(),i=n(r).subscribe(e);return i.add(t.subscribe(r)),i},e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"onErrorResumeNext",(function(){return u})),n.d(t,"onErrorResumeNextStatic",(function(){return f}));var r=n(175),i=n(246),o=n(181),s=n(232),a=n(234),c=n(233);function u(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 1===e.length&&Object(o["isArray"])(e[0])&&(e=e[0]),function(t){return t.lift(new d(e))}}function f(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=null;return 1===e.length&&Object(o["isArray"])(e[0])&&(e=e[0]),n=e.shift(),Object(i["from"])(n,null).lift(new d(e))}var d=function(){function e(e){this.nextSources=e}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.nextSources))},e}(),l=function(e){function t(t,n){var r=e.call(this,t)||this;return r.destination=t,r.nextSources=n,r}return r["__extends"](t,e),t.prototype.notifyError=function(e,t){this.subscribeToNextSource()},t.prototype.notifyComplete=function(e){this.subscribeToNextSource()},t.prototype._error=function(e){this.subscribeToNextSource(),this.unsubscribe()},t.prototype._complete=function(){this.subscribeToNextSource(),this.unsubscribe()},t.prototype.subscribeToNextSource=function(){var e=this.nextSources.shift();if(e){var t=new a["InnerSubscriber"](this,void 0,void 0),n=this.destination;n.add(t),Object(c["subscribeToResult"])(this,e,void 0,void 0,t)}else this.destination.complete()},t}(s["OuterSubscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"pairwise",(function(){return o}));var r=n(175),i=n(174);function o(){return function(e){return e.lift(new s)}}var s=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new a(e))},e}(),a=function(e){function t(t){var n=e.call(this,t)||this;return n.hasPrev=!1,n}return r["__extends"](t,e),t.prototype._next=function(e){var t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)},t}(i["Subscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"partition",(function(){return o}));var r=n(266),i=n(267);function o(e,t){return function(n){return[Object(i["filter"])(e,t)(n),Object(i["filter"])(Object(r["not"])(e,t))(n)]}}},function(e,t,n){"use strict";n.r(t),n.d(t,"pluck",(function(){return i}));var r=n(229);function i(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.length;if(0===n)throw new Error("list of properties cannot be empty.");return function(t){return Object(r["map"])(o(e,n))(t)}}function o(e,t){var n=function(n){for(var r=n,i=0;i<t;i++){var o=r[e[i]];if("undefined"===typeof o)return;r=o}return r};return n}},function(e,t,n){"use strict";n.r(t),n.d(t,"publish",(function(){return o}));var r=n(190),i=n(323);function o(e){return e?Object(i["multicast"])((function(){return new r["Subject"]}),e):Object(i["multicast"])(new r["Subject"])}},function(e,t,n){"use strict";n.r(t),n.d(t,"publishBehavior",(function(){return o}));var r=n(195),i=n(323);function o(e){return function(t){return Object(i["multicast"])(new r["BehaviorSubject"](e))(t)}}},function(e,t,n){"use strict";n.r(t),n.d(t,"publishLast",(function(){return o}));var r=n(213),i=n(323);function o(){return function(e){return Object(i["multicast"])(new r["AsyncSubject"])(e)}}},function(e,t,n){"use strict";n.r(t),n.d(t,"publishReplay",(function(){return o}));var r=n(196),i=n(323);function o(e,t,n,o){n&&"function"!==typeof n&&(o=n);var s="function"===typeof n?n:void 0,a=new r["ReplaySubject"](e,t,o);return function(e){return Object(i["multicast"])((function(){return a}),s)(e)}}},function(e,t,n){"use strict";n.r(t),n.d(t,"race",(function(){return o}));var r=n(181),i=n(268);function o(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return 1===e.length&&Object(r["isArray"])(e[0])&&(e=e[0]),t.lift.call(i["race"].apply(void 0,[t].concat(e)))}}},function(e,t,n){"use strict";n.r(t),n.d(t,"repeat",(function(){return s}));var r=n(175),i=n(174),o=n(206);function s(e){return void 0===e&&(e=-1),function(t){return 0===e?Object(o["empty"])():e<0?t.lift(new a(-1,t)):t.lift(new a(e-1,t))}}var a=function(){function e(e,t){this.count=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.count,this.source))},e}(),c=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.count=n,i.source=r,i}return r["__extends"](t,e),t.prototype.complete=function(){if(!this.isStopped){var t=this,n=t.source,r=t.count;if(0===r)return e.prototype.complete.call(this);r>-1&&(this.count=r-1),n.subscribe(this._unsubscribeAndRecycle())}},t}(i["Subscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"repeatWhen",(function(){return a}));var r=n(175),i=n(190),o=n(232),s=n(233);function a(e){return function(t){return t.lift(new c(e))}}var c=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.notifier,t))},e}(),u=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.notifier=n,i.source=r,i.sourceIsBeingSubscribedTo=!0,i}return r["__extends"](t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)},t.prototype.notifyComplete=function(t){if(!1===this.sourceIsBeingSubscribedTo)return e.prototype.complete.call(this)},t.prototype.complete=function(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries||this.subscribeToRetries(),!this.retriesSubscription||this.retriesSubscription.closed)return e.prototype.complete.call(this);this._unsubscribeAndRecycle(),this.notifications.next()}},t.prototype._unsubscribe=function(){var e=this,t=e.notifications,n=e.retriesSubscription;t&&(t.unsubscribe(),this.notifications=null),n&&(n.unsubscribe(),this.retriesSubscription=null),this.retries=null},t.prototype._unsubscribeAndRecycle=function(){var t=this._unsubscribe;return this._unsubscribe=null,e.prototype._unsubscribeAndRecycle.call(this),this._unsubscribe=t,this},t.prototype.subscribeToRetries=function(){var t;this.notifications=new i["Subject"];try{var n=this.notifier;t=n(this.notifications)}catch(r){return e.prototype.complete.call(this)}this.retries=t,this.retriesSubscription=Object(s["subscribeToResult"])(this,t)},t}(o["OuterSubscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"retry",(function(){return o}));var r=n(175),i=n(174);function o(e){return void 0===e&&(e=-1),function(t){return t.lift(new s(e,t))}}var s=function(){function e(e,t){this.count=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.count,this.source))},e}(),a=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.count=n,i.source=r,i}return r["__extends"](t,e),t.prototype.error=function(t){if(!this.isStopped){var n=this,r=n.source,i=n.count;if(0===i)return e.prototype.error.call(this,t);i>-1&&(this.count=i-1),r.subscribe(this._unsubscribeAndRecycle())}},t}(i["Subscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"retryWhen",(function(){return a}));var r=n(175),i=n(190),o=n(232),s=n(233);function a(e){return function(t){return t.lift(new c(e,t))}}var c=function(){function e(e,t){this.notifier=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.notifier,this.source))},e}(),u=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.notifier=n,i.source=r,i}return r["__extends"](t,e),t.prototype.error=function(t){if(!this.isStopped){var n=this.errors,r=this.retries,o=this.retriesSubscription;if(r)this.errors=null,this.retriesSubscription=null;else{n=new i["Subject"];try{var a=this.notifier;r=a(n)}catch(c){return e.prototype.error.call(this,c)}o=Object(s["subscribeToResult"])(this,r)}this._unsubscribeAndRecycle(),this.errors=n,this.retries=r,this.retriesSubscription=o,n.next(t)}},t.prototype._unsubscribe=function(){var e=this,t=e.errors,n=e.retriesSubscription;t&&(t.unsubscribe(),this.errors=null),n&&(n.unsubscribe(),this.retriesSubscription=null),this.retries=null},t.prototype.notifyNext=function(e,t,n,r,i){var o=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=o,this.source.subscribe(this)},t}(o["OuterSubscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"sample",(function(){return s}));var r=n(175),i=n(232),o=n(233);function s(e){return function(t){return t.lift(new a(e))}}var a=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){var n=new c(e),r=t.subscribe(n);return r.add(Object(o["subscribeToResult"])(n,this.notifier)),r},e}(),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hasValue=!1,t}return r["__extends"](t,e),t.prototype._next=function(e){this.value=e,this.hasValue=!0},t.prototype.notifyNext=function(e,t,n,r,i){this.emitValue()},t.prototype.notifyComplete=function(){this.emitValue()},t.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))},t}(i["OuterSubscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"sampleTime",(function(){return s}));var r=n(175),i=n(174),o=n(218);function s(e,t){return void 0===t&&(t=o["async"]),function(n){return n.lift(new a(e,t))}}var a=function(){function e(e,t){this.period=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.period,this.scheduler))},e}(),c=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.period=n,i.scheduler=r,i.hasValue=!1,i.add(r.schedule(u,n,{subscriber:i,period:n})),i}return r["__extends"](t,e),t.prototype._next=function(e){this.lastValue=e,this.hasValue=!0},t.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))},t}(i["Subscriber"]);function u(e){var t=e.subscriber,n=e.period;t.notifyNext(),this.schedule(e,n)}},function(e,t,n){"use strict";n.r(t),n.d(t,"sequenceEqual",(function(){return o})),n.d(t,"SequenceEqualOperator",(function(){return s})),n.d(t,"SequenceEqualSubscriber",(function(){return a}));var r=n(175),i=n(174);function o(e,t){return function(n){return n.lift(new s(e,t))}}var s=function(){function e(e,t){this.compareTo=e,this.comparator=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.compareTo,this.comparator))},e}(),a=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.compareTo=n,i.comparator=r,i._a=[],i._b=[],i._oneComplete=!1,i.destination.add(n.subscribe(new c(t,i))),i}return r["__extends"](t,e),t.prototype._next=function(e){this._oneComplete&&0===this._b.length?this.emit(!1):(this._a.push(e),this.checkValues())},t.prototype._complete=function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0,this.unsubscribe()},t.prototype.checkValues=function(){var e=this,t=e._a,n=e._b,r=e.comparator;while(t.length>0&&n.length>0){var i=t.shift(),o=n.shift(),s=!1;try{s=r?r(i,o):i===o}catch(a){this.destination.error(a)}s||this.emit(!1)}},t.prototype.emit=function(e){var t=this.destination;t.next(e),t.complete()},t.prototype.nextB=function(e){this._oneComplete&&0===this._a.length?this.emit(!1):(this._b.push(e),this.checkValues())},t.prototype.completeB=function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0},t}(i["Subscriber"]),c=function(e){function t(t,n){var r=e.call(this,t)||this;return r.parent=n,r}return r["__extends"](t,e),t.prototype._next=function(e){this.parent.nextB(e)},t.prototype._error=function(e){this.parent.error(e),this.unsubscribe()},t.prototype._complete=function(){this.parent.completeB(),this.unsubscribe()},t}(i["Subscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"share",(function(){return a}));var r=n(323),i=n(193),o=n(190);function s(){return new o["Subject"]}function a(){return function(e){return Object(i["refCount"])()(Object(r["multicast"])(s)(e))}}},function(e,t,n){"use strict";n.r(t),n.d(t,"shareReplay",(function(){return i}));var r=n(196);function i(e,t,n){var r;return r=e&&"object"===typeof e?e:{bufferSize:e,windowTime:t,refCount:!1,scheduler:n},function(e){return e.lift(o(r))}}function o(e){var t,n,i=e.bufferSize,o=void 0===i?Number.POSITIVE_INFINITY:i,s=e.windowTime,a=void 0===s?Number.POSITIVE_INFINITY:s,c=e.refCount,u=e.scheduler,f=0,d=!1,l=!1;return function(e){f++,t&&!d||(d=!1,t=new r["ReplaySubject"](o,a,u),n=e.subscribe({next:function(e){t.next(e)},error:function(e){d=!0,t.error(e)},complete:function(){l=!0,t.complete()}}));var i=t.subscribe(this);this.add((function(){f--,i.unsubscribe(),n&&!l&&c&&0===f&&(n.unsubscribe(),n=void 0,t=void 0)}))}}},function(e,t,n){"use strict";n.r(t),n.d(t,"single",(function(){return s}));var r=n(175),i=n(174),o=n(226);function s(e){return function(t){return t.lift(new a(e,t))}}var a=function(){function e(e,t){this.predicate=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.predicate,this.source))},e}(),c=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.predicate=n,i.source=r,i.seenValue=!1,i.index=0,i}return r["__extends"](t,e),t.prototype.applySingleValue=function(e){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=e)},t.prototype._next=function(e){var t=this.index++;this.predicate?this.tryNext(e,t):this.applySingleValue(e)},t.prototype.tryNext=function(e,t){try{this.predicate(e,t,this.source)&&this.applySingleValue(e)}catch(n){this.destination.error(n)}},t.prototype._complete=function(){var e=this.destination;this.index>0?(e.next(this.seenValue?this.singleValue:void 0),e.complete()):e.error(new o["EmptyError"])},t}(i["Subscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"skip",(function(){return o}));var r=n(175),i=n(174);function o(e){return function(t){return t.lift(new s(e))}}var s=function(){function e(e){this.total=e}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.total))},e}(),a=function(e){function t(t,n){var r=e.call(this,t)||this;return r.total=n,r.count=0,r}return r["__extends"](t,e),t.prototype._next=function(e){++this.count>this.total&&this.destination.next(e)},t}(i["Subscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"skipLast",(function(){return s}));var r=n(175),i=n(174),o=n(225);function s(e){return function(t){return t.lift(new a(e))}}var a=function(){function e(e){if(this._skipCount=e,this._skipCount<0)throw new o["ArgumentOutOfRangeError"]}return e.prototype.call=function(e,t){return 0===this._skipCount?t.subscribe(new i["Subscriber"](e)):t.subscribe(new c(e,this._skipCount))},e}(),c=function(e){function t(t,n){var r=e.call(this,t)||this;return r._skipCount=n,r._count=0,r._ring=new Array(n),r}return r["__extends"](t,e),t.prototype._next=function(e){var t=this._skipCount,n=this._count++;if(n<t)this._ring[n]=e;else{var r=n%t,i=this._ring,o=i[r];i[r]=e,this.destination.next(o)}},t}(i["Subscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"skipUntil",(function(){return a}));var r=n(175),i=n(232),o=n(234),s=n(233);function a(e){return function(t){return t.lift(new c(e))}}var c=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.notifier))},e}(),u=function(e){function t(t,n){var r=e.call(this,t)||this;r.hasValue=!1;var i=new o["InnerSubscriber"](r,void 0,void 0);return r.add(i),r.innerSubscription=i,Object(s["subscribeToResult"])(r,n,void 0,void 0,i),r}return r["__extends"](t,e),t.prototype._next=function(t){this.hasValue&&e.prototype._next.call(this,t)},t.prototype.notifyNext=function(e,t,n,r,i){this.hasValue=!0,this.innerSubscription&&this.innerSubscription.unsubscribe()},t.prototype.notifyComplete=function(){},t}(i["OuterSubscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"skipWhile",(function(){return o}));var r=n(175),i=n(174);function o(e){return function(t){return t.lift(new s(e))}}var s=function(){function e(e){this.predicate=e}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.predicate))},e}(),a=function(e){function t(t,n){var r=e.call(this,t)||this;return r.predicate=n,r.skipping=!0,r.index=0,r}return r["__extends"](t,e),t.prototype._next=function(e){var t=this.destination;this.skipping&&this.tryCallPredicate(e),this.skipping||t.next(e)},t.prototype.tryCallPredicate=function(e){try{var t=this.predicate(e,this.index++);this.skipping=Boolean(t)}catch(n){this.destination.error(n)}},t}(i["Subscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"startWith",(function(){return o}));var r=n(242),i=n(208);function o(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[e.length-1];return Object(i["isScheduler"])(n)?(e.pop(),function(t){return Object(r["concat"])(e,t,n)}):function(t){return Object(r["concat"])(e,t)}}},function(e,t,n){"use strict";n.r(t),n.d(t,"subscribeOn",(function(){return i}));var r=n(349);function i(e,t){return void 0===t&&(t=0),function(n){return n.lift(new o(e,t))}}var o=function(){function e(e,t){this.scheduler=e,this.delay=t}return e.prototype.call=function(e,t){return new r["SubscribeOnObservable"](t,this.delay,this.scheduler).subscribe(e)},e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"SubscribeOnObservable",(function(){return a}));var r=n(175),i=n(172),o=n(214),s=n(260),a=function(e){function t(t,n,r){void 0===n&&(n=0),void 0===r&&(r=o["asap"]);var i=e.call(this)||this;return i.source=t,i.delayTime=n,i.scheduler=r,(!Object(s["isNumeric"])(n)||n<0)&&(i.delayTime=0),r&&"function"===typeof r.schedule||(i.scheduler=o["asap"]),i}return r["__extends"](t,e),t.create=function(e,n,r){return void 0===n&&(n=0),void 0===r&&(r=o["asap"]),new t(e,n,r)},t.dispatch=function(e){var t=e.source,n=e.subscriber;return this.add(t.subscribe(n))},t.prototype._subscribe=function(e){var n=this.delayTime,r=this.source,i=this.scheduler;return i.schedule(t.dispatch,n,{source:r,subscriber:e})},t}(i["Observable"])},function(e,t,n){"use strict";n.r(t),n.d(t,"switchAll",(function(){return o}));var r=n(351),i=n(223);function o(){return Object(r["switchMap"])(i["identity"])}},function(e,t,n){"use strict";n.r(t),n.d(t,"switchMap",(function(){return u}));var r=n(175),i=n(232),o=n(234),s=n(233),a=n(229),c=n(246);function u(e,t){return"function"===typeof t?function(n){return n.pipe(u((function(n,r){return Object(c["from"])(e(n,r)).pipe(Object(a["map"])((function(e,i){return t(n,e,r,i)})))})))}:function(t){return t.lift(new f(e))}}var f=function(){function e(e){this.project=e}return e.prototype.call=function(e,t){return t.subscribe(new d(e,this.project))},e}(),d=function(e){function t(t,n){var r=e.call(this,t)||this;return r.project=n,r.index=0,r}return r["__extends"](t,e),t.prototype._next=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this._innerSub(t,e,n)},t.prototype._innerSub=function(e,t,n){var r=this.innerSubscription;r&&r.unsubscribe();var i=new o["InnerSubscriber"](this,void 0,void 0),a=this.destination;a.add(i),this.innerSubscription=Object(s["subscribeToResult"])(this,e,t,n,i)},t.prototype._complete=function(){var t=this.innerSubscription;t&&!t.closed||e.prototype._complete.call(this),this.unsubscribe()},t.prototype._unsubscribe=function(){this.innerSubscription=null},t.prototype.notifyComplete=function(t){var n=this.destination;n.remove(t),this.innerSubscription=null,this.isStopped&&e.prototype._complete.call(this)},t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},t}(i["OuterSubscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"switchMapTo",(function(){return i}));var r=n(351);function i(e,t){return t?Object(r["switchMap"])((function(){return e}),t):Object(r["switchMap"])((function(){return e}))}},function(e,t,n){"use strict";n.r(t),n.d(t,"takeUntil",(function(){return s}));var r=n(175),i=n(232),o=n(233);function s(e){return function(t){return t.lift(new a(e))}}var a=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){var n=new c(e),r=Object(o["subscribeToResult"])(n,this.notifier);return r&&!n.seenValue?(n.add(r),t.subscribe(n)):n},e}(),c=function(e){function t(t){var n=e.call(this,t)||this;return n.seenValue=!1,n}return r["__extends"](t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.seenValue=!0,this.complete()},t.prototype.notifyComplete=function(){},t}(i["OuterSubscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"takeWhile",(function(){return o}));var r=n(175),i=n(174);function o(e,t){return void 0===t&&(t=!1),function(n){return n.lift(new s(e,t))}}var s=function(){function e(e,t){this.predicate=e,this.inclusive=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.predicate,this.inclusive))},e}(),a=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.predicate=n,i.inclusive=r,i.index=0,i}return r["__extends"](t,e),t.prototype._next=function(e){var t,n=this.destination;try{t=this.predicate(e,this.index++)}catch(r){return void n.error(r)}this.nextOrComplete(e,t)},t.prototype.nextOrComplete=function(e,t){var n=this.destination;Boolean(t)?n.next(e):(this.inclusive&&n.next(e),n.complete())},t}(i["Subscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"tap",(function(){return a}));var r=n(175),i=n(174),o=n(188),s=n(176);function a(e,t,n){return function(r){return r.lift(new c(e,t,n))}}var c=function(){function e(e,t,n){this.nextOrObserver=e,this.error=t,this.complete=n}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.nextOrObserver,this.error,this.complete))},e}(),u=function(e){function t(t,n,r,i){var a=e.call(this,t)||this;return a._tapNext=o["noop"],a._tapError=o["noop"],a._tapComplete=o["noop"],a._tapError=r||o["noop"],a._tapComplete=i||o["noop"],Object(s["isFunction"])(n)?(a._context=a,a._tapNext=n):n&&(a._context=n,a._tapNext=n.next||o["noop"],a._tapError=n.error||o["noop"],a._tapComplete=n.complete||o["noop"]),a}return r["__extends"](t,e),t.prototype._next=function(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)},t.prototype._error=function(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)},t.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()},t}(i["Subscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"defaultThrottleConfig",(function(){return s})),n.d(t,"throttle",(function(){return a}));var r=n(175),i=n(232),o=n(233),s={leading:!0,trailing:!1};function a(e,t){return void 0===t&&(t=s),function(n){return n.lift(new c(e,t.leading,t.trailing))}}var c=function(){function e(e,t,n){this.durationSelector=e,this.leading=t,this.trailing=n}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.durationSelector,this.leading,this.trailing))},e}(),u=function(e){function t(t,n,r,i){var o=e.call(this,t)||this;return o.destination=t,o.durationSelector=n,o._leading=r,o._trailing=i,o._hasValue=!1,o}return r["__extends"](t,e),t.prototype._next=function(e){this._hasValue=!0,this._sendValue=e,this._throttled||(this._leading?this.send():this.throttle(e))},t.prototype.send=function(){var e=this,t=e._hasValue,n=e._sendValue;t&&(this.destination.next(n),this.throttle(n)),this._hasValue=!1,this._sendValue=null},t.prototype.throttle=function(e){var t=this.tryDurationSelector(e);t&&this.add(this._throttled=Object(o["subscribeToResult"])(this,t))},t.prototype.tryDurationSelector=function(e){try{return this.durationSelector(e)}catch(t){return this.destination.error(t),null}},t.prototype.throttlingDone=function(){var e=this,t=e._throttled,n=e._trailing;t&&t.unsubscribe(),this._throttled=null,n&&this.send()},t.prototype.notifyNext=function(e,t,n,r,i){this.throttlingDone()},t.prototype.notifyComplete=function(){this.throttlingDone()},t}(i["OuterSubscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"throttleTime",(function(){return a}));var r=n(175),i=n(174),o=n(218),s=n(356);function a(e,t,n){return void 0===t&&(t=o["async"]),void 0===n&&(n=s["defaultThrottleConfig"]),function(r){return r.lift(new c(e,t,n.leading,n.trailing))}}var c=function(){function e(e,t,n,r){this.duration=e,this.scheduler=t,this.leading=n,this.trailing=r}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.duration,this.scheduler,this.leading,this.trailing))},e}(),u=function(e){function t(t,n,r,i,o){var s=e.call(this,t)||this;return s.duration=n,s.scheduler=r,s.leading=i,s.trailing=o,s._hasTrailingValue=!1,s._trailingValue=null,s}return r["__extends"](t,e),t.prototype._next=function(e){this.throttled?this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(f,this.duration,{subscriber:this})),this.leading?this.destination.next(e):this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0))},t.prototype._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},t.prototype.clearThrottle=function(){var e=this.throttled;e&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),e.unsubscribe(),this.remove(e),this.throttled=null)},t}(i["Subscriber"]);function f(e){var t=e.subscriber;t.clearThrottle()}},function(e,t,n){"use strict";n.r(t),n.d(t,"timeInterval",(function(){return a})),n.d(t,"TimeInterval",(function(){return c}));var r=n(218),i=n(318),o=n(253),s=n(229);function a(e){return void 0===e&&(e=r["async"]),function(t){return Object(o["defer"])((function(){return t.pipe(Object(i["scan"])((function(t,n){var r=t.current;return{value:n,current:e.now(),last:r}}),{current:e.now(),value:void 0,last:void 0}),Object(s["map"])((function(e){var t=e.current,n=e.last,r=e.value;return new c(r,t-n)})))}))}}var c=function(){function e(e,t){this.value=e,this.interval=t}return e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"timeout",(function(){return a}));var r=n(218),i=n(227),o=n(360),s=n(212);function a(e,t){return void 0===t&&(t=r["async"]),Object(o["timeoutWith"])(e,Object(s["throwError"])(new i["TimeoutError"]),t)}},function(e,t,n){"use strict";n.r(t),n.d(t,"timeoutWith",(function(){return c}));var r=n(175),i=n(218),o=n(292),s=n(232),a=n(233);function c(e,t,n){return void 0===n&&(n=i["async"]),function(r){var i=Object(o["isDate"])(e),s=i?+e-n.now():Math.abs(e);return r.lift(new u(s,i,t,n))}}var u=function(){function e(e,t,n,r){this.waitFor=e,this.absoluteTimeout=t,this.withObservable=n,this.scheduler=r}return e.prototype.call=function(e,t){return t.subscribe(new f(e,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},e}(),f=function(e){function t(t,n,r,i,o){var s=e.call(this,t)||this;return s.absoluteTimeout=n,s.waitFor=r,s.withObservable=i,s.scheduler=o,s.action=null,s.scheduleTimeout(),s}return r["__extends"](t,e),t.dispatchTimeout=function(e){var t=e.withObservable;e._unsubscribeAndRecycle(),e.add(Object(a["subscribeToResult"])(e,t))},t.prototype.scheduleTimeout=function(){var e=this.action;e?this.action=e.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(t.dispatchTimeout,this.waitFor,this))},t.prototype._next=function(t){this.absoluteTimeout||this.scheduleTimeout(),e.prototype._next.call(this,t)},t.prototype._unsubscribe=function(){this.action=null,this.scheduler=null,this.withObservable=null},t}(s["OuterSubscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"timestamp",(function(){return o})),n.d(t,"Timestamp",(function(){return s}));var r=n(218),i=n(229);function o(e){return void 0===e&&(e=r["async"]),Object(i["map"])((function(t){return new s(t,e.now())}))}var s=function(){function e(e,t){this.value=e,this.timestamp=t}return e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"toArray",(function(){return o}));var r=n(317);function i(e,t,n){return 0===n?[t]:(e.push(t),e)}function o(){return Object(r["reduce"])(i,[])}},function(e,t,n){"use strict";n.r(t),n.d(t,"window",(function(){return a}));var r=n(175),i=n(190),o=n(232),s=n(233);function a(e){return function(t){return t.lift(new c(e))}}var c=function(){function e(e){this.windowBoundaries=e}return e.prototype.call=function(e,t){var n=new u(e),r=t.subscribe(n);return r.closed||n.add(Object(s["subscribeToResult"])(n,this.windowBoundaries)),r},e}(),u=function(e){function t(t){var n=e.call(this,t)||this;return n.window=new i["Subject"],t.next(n.window),n}return r["__extends"](t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.openWindow()},t.prototype.notifyError=function(e,t){this._error(e)},t.prototype.notifyComplete=function(e){this._complete()},t.prototype._next=function(e){this.window.next(e)},t.prototype._error=function(e){this.window.error(e),this.destination.error(e)},t.prototype._complete=function(){this.window.complete(),this.destination.complete()},t.prototype._unsubscribe=function(){this.window=null},t.prototype.openWindow=function(){var e=this.window;e&&e.complete();var t=this.destination,n=this.window=new i["Subject"];t.next(n)},t}(o["OuterSubscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"windowCount",(function(){return s}));var r=n(175),i=n(174),o=n(190);function s(e,t){return void 0===t&&(t=0),function(n){return n.lift(new a(e,t))}}var a=function(){function e(e,t){this.windowSize=e,this.startWindowEvery=t}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.windowSize,this.startWindowEvery))},e}(),c=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.destination=t,i.windowSize=n,i.startWindowEvery=r,i.windows=[new o["Subject"]],i.count=0,t.next(i.windows[0]),i}return r["__extends"](t,e),t.prototype._next=function(e){for(var t=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,n=this.destination,r=this.windowSize,i=this.windows,s=i.length,a=0;a<s&&!this.closed;a++)i[a].next(e);var c=this.count-r+1;if(c>=0&&c%t===0&&!this.closed&&i.shift().complete(),++this.count%t===0&&!this.closed){var u=new o["Subject"];i.push(u),n.next(u)}},t.prototype._error=function(e){var t=this.windows;if(t)while(t.length>0&&!this.closed)t.shift().error(e);this.destination.error(e)},t.prototype._complete=function(){var e=this.windows;if(e)while(e.length>0&&!this.closed)e.shift().complete();this.destination.complete()},t.prototype._unsubscribe=function(){this.count=0,this.windows=null},t}(i["Subscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"windowTime",(function(){return u}));var r=n(175),i=n(190),o=n(218),s=n(174),a=n(260),c=n(208);function u(e){var t=o["async"],n=null,r=Number.POSITIVE_INFINITY;return Object(c["isScheduler"])(arguments[3])&&(t=arguments[3]),Object(c["isScheduler"])(arguments[2])?t=arguments[2]:Object(a["isNumeric"])(arguments[2])&&(r=arguments[2]),Object(c["isScheduler"])(arguments[1])?t=arguments[1]:Object(a["isNumeric"])(arguments[1])&&(n=arguments[1]),function(i){return i.lift(new f(e,n,r,t))}}var f=function(){function e(e,t,n,r){this.windowTimeSpan=e,this.windowCreationInterval=t,this.maxWindowSize=n,this.scheduler=r}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))},e}(),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._numberOfNextedValues=0,t}return r["__extends"](t,e),t.prototype.next=function(t){this._numberOfNextedValues++,e.prototype.next.call(this,t)},Object.defineProperty(t.prototype,"numberOfNextedValues",{get:function(){return this._numberOfNextedValues},enumerable:!0,configurable:!0}),t}(i["Subject"]),l=function(e){function t(t,n,r,i,o){var s=e.call(this,t)||this;s.destination=t,s.windowTimeSpan=n,s.windowCreationInterval=r,s.maxWindowSize=i,s.scheduler=o,s.windows=[];var a=s.openWindow();if(null!==r&&r>=0){var c={subscriber:s,window:a,context:null},u={windowTimeSpan:n,windowCreationInterval:r,subscriber:s,scheduler:o};s.add(o.schedule(m,n,c)),s.add(o.schedule(h,r,u))}else{var f={subscriber:s,window:a,windowTimeSpan:n};s.add(o.schedule(p,n,f))}return s}return r["__extends"](t,e),t.prototype._next=function(e){for(var t=this.windows,n=t.length,r=0;r<n;r++){var i=t[r];i.closed||(i.next(e),i.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(i))}},t.prototype._error=function(e){var t=this.windows;while(t.length>0)t.shift().error(e);this.destination.error(e)},t.prototype._complete=function(){var e=this.windows;while(e.length>0){var t=e.shift();t.closed||t.complete()}this.destination.complete()},t.prototype.openWindow=function(){var e=new d;this.windows.push(e);var t=this.destination;return t.next(e),e},t.prototype.closeWindow=function(e){e.complete();var t=this.windows;t.splice(t.indexOf(e),1)},t}(s["Subscriber"]);function p(e){var t=e.subscriber,n=e.windowTimeSpan,r=e.window;r&&t.closeWindow(r),e.window=t.openWindow(),this.schedule(e,n)}function h(e){var t=e.windowTimeSpan,n=e.subscriber,r=e.scheduler,i=e.windowCreationInterval,o=n.openWindow(),s=this,a={action:s,subscription:null},c={subscriber:n,window:o,context:a};a.subscription=r.schedule(m,t,c),s.add(a.subscription),s.schedule(e,i)}function m(e){var t=e.subscriber,n=e.window,r=e.context;r&&r.action&&r.subscription&&r.action.remove(r.subscription),t.closeWindow(n)}},function(e,t,n){"use strict";n.r(t),n.d(t,"windowToggle",(function(){return c}));var r=n(175),i=n(190),o=n(180),s=n(232),a=n(233);function c(e,t){return function(n){return n.lift(new u(e,t))}}var u=function(){function e(e,t){this.openings=e,this.closingSelector=t}return e.prototype.call=function(e,t){return t.subscribe(new f(e,this.openings,this.closingSelector))},e}(),f=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.openings=n,i.closingSelector=r,i.contexts=[],i.add(i.openSubscription=Object(a["subscribeToResult"])(i,n,n)),i}return r["__extends"](t,e),t.prototype._next=function(e){var t=this.contexts;if(t)for(var n=t.length,r=0;r<n;r++)t[r].window.next(e)},t.prototype._error=function(t){var n=this.contexts;if(this.contexts=null,n){var r=n.length,i=-1;while(++i<r){var o=n[i];o.window.error(t),o.subscription.unsubscribe()}}e.prototype._error.call(this,t)},t.prototype._complete=function(){var t=this.contexts;if(this.contexts=null,t){var n=t.length,r=-1;while(++r<n){var i=t[r];i.window.complete(),i.subscription.unsubscribe()}}e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.contexts;if(this.contexts=null,e){var t=e.length,n=-1;while(++n<t){var r=e[n];r.window.unsubscribe(),r.subscription.unsubscribe()}}},t.prototype.notifyNext=function(e,t,n,r,s){if(e===this.openings){var c=void 0;try{var u=this.closingSelector;c=u(t)}catch(h){return this.error(h)}var f=new i["Subject"],d=new o["Subscription"],l={window:f,subscription:d};this.contexts.push(l);var p=Object(a["subscribeToResult"])(this,c,l);p.closed?this.closeWindow(this.contexts.length-1):(p.context=l,d.add(p)),this.destination.next(f)}else this.closeWindow(this.contexts.indexOf(e))},t.prototype.notifyError=function(e){this.error(e)},t.prototype.notifyComplete=function(e){e!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(e.context))},t.prototype.closeWindow=function(e){if(-1!==e){var t=this.contexts,n=t[e],r=n.window,i=n.subscription;t.splice(e,1),r.complete(),i.unsubscribe()}},t}(s["OuterSubscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"windowWhen",(function(){return a}));var r=n(175),i=n(190),o=n(232),s=n(233);function a(e){return function(t){return t.lift(new c(e))}}var c=function(){function e(e){this.closingSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.closingSelector))},e}(),u=function(e){function t(t,n){var r=e.call(this,t)||this;return r.destination=t,r.closingSelector=n,r.openWindow(),r}return r["__extends"](t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.openWindow(i)},t.prototype.notifyError=function(e,t){this._error(e)},t.prototype.notifyComplete=function(e){this.openWindow(e)},t.prototype._next=function(e){this.window.next(e)},t.prototype._error=function(e){this.window.error(e),this.destination.error(e),this.unsubscribeClosingNotification()},t.prototype._complete=function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()},t.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()},t.prototype.openWindow=function(e){void 0===e&&(e=null),e&&(this.remove(e),e.unsubscribe());var t=this.window;t&&t.complete();var n,r=this.window=new i["Subject"];this.destination.next(r);try{var o=this.closingSelector;n=o()}catch(a){return this.destination.error(a),void this.window.error(a)}this.add(this.closingNotification=Object(s["subscribeToResult"])(this,n))},t}(o["OuterSubscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"withLatestFrom",(function(){return s}));var r=n(175),i=n(232),o=n(233);function s(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){var n;"function"===typeof e[e.length-1]&&(n=e.pop());var r=e;return t.lift(new a(r,n))}}var a=function(){function e(e,t){this.observables=e,this.project=t}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.observables,this.project))},e}(),c=function(e){function t(t,n,r){var i=e.call(this,t)||this;i.observables=n,i.project=r,i.toRespond=[];var s=n.length;i.values=new Array(s);for(var a=0;a<s;a++)i.toRespond.push(a);for(a=0;a<s;a++){var c=n[a];i.add(Object(o["subscribeToResult"])(i,c,c,a))}return i}return r["__extends"](t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.values[n]=t;var o=this.toRespond;if(o.length>0){var s=o.indexOf(n);-1!==s&&o.splice(s,1)}},t.prototype.notifyComplete=function(){},t.prototype._next=function(e){if(0===this.toRespond.length){var t=[e].concat(this.values);this.project?this._tryProject(t):this.destination.next(t)}},t.prototype._tryProject=function(e){var t;try{t=this.project.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)},t}(i["OuterSubscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"zip",(function(){return i}));var r=n(272);function i(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return t.lift.call(r["zip"].apply(void 0,[t].concat(e)))}}},function(e,t,n){"use strict";n.r(t),n.d(t,"zipAll",(function(){return i}));var r=n(272);function i(e){return function(t){return t.lift(new r["ZipOperator"](e))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(87),i=c(r),o=n(171),s=n(5),a=c(s);function c(e){return e&&e.__esModule?e:{default:e}}function u(e,t,n){this.mgr=e,this.confrId=t,f.apply(this),this.subject=new o.Subject,this.onRemoteStream=n}function f(){i.default.extend(this,{subscribe:function(e,t,n){return this.subject.subscribe(e,t,n)}},{onMeExit:function(e,t){this.mgr._onExit(this.confrId,e,t),this.mgr.upload_stats&&this.mgr.upload_stats.upload_event({event:1,reason:e,sessionId:this._session._sessionId})},onAddMember:function(e){if(this.mgr.onMemberJoin(e,this.confrId),this.mgr.upload_stats){var t=e.role,n=e.memName,r=e.id;this.mgr.upload_stats.upload_event({event:10,role:t,addMemName:n,addMemId:r})}},onRemoveMember:function(e,t){if(this.mgr.onMemberLeave(e,t,this.confrId),this.mgr.upload_stats){var n=e.role,r=e.memName,i=e.id;this.mgr.upload_stats.upload_event({event:11,role:n,removeMemName:r,removeMemId:i})}},onAddStream:function(e){if(0!=e.id&&(e.located()||this.onRemoteStream&&this.onRemoteStream(e),this.mgr.streamBindVideo(e,void 0,this.confrId),this.mgr._onAddMemberStream(e,this.confrId),!e.located()&&this.mgr.upload_stats)){var t=e.id,n=e.voff,r=e.aoff,i=e.type,o=e.memId,s=e.memName;this.mgr.upload_stats.upload_event({event:12,sId:t,voff:n,aoff:r,streamType:i,addMemId:o,addMemName:s})}},onRemoveStream:function(e){if(0!=e.id){var t=this.mgr._confr(this.confrId);t&&e&&e.located()&&(t.av&&t.av.id===e.id&&(t.av=void 0),t.desktop&&t.desktop.id===e.id&&(t.desktop=void 0));var n=i.default.removeAttribute(this.mgr._videos,e.id);if(this.mgr._onRemoveMemberStream(e,this.confrId),n&&this.mgr.unloadVideo(e.owner,e,n),!e.located()&&this.mgr.upload_stats){var r=e.id,o=e.type,s=e.memId,a=e.memName;this.mgr.upload_stats.upload_event({event:13,sId:r,streamType:o,removeMemId:s,removeMemName:a})}}},onUpdateStream:function(e,t){if(0!=e.id){var n=this,r=this.mgr._videos[e.id];r&&(t&&t.ifMediaStream((function(e){r&&attachMediaStream(r,e),r&&r.hasAttribute("flow")&&n.mgr.onMediaTransmission(r,(function(e,t,n,i){(0,a.default)(r).trigger("onMediaTransmission",[e,t,n,i])}))})),e.aoff?r.setAttribute("aoff","aoff"):r.removeAttribute("aoff"),e.voff?r.setAttribute("voff","voff"):r.removeAttribute("voff"));var i={video:!e.voff,audio:!e.aoff};t&&t.ifVoff((function(t){i||(i={}),i.video=!t,e.located()||(i.video=e.subArgs?e.subArgs.subSVideo:!e.voff)})),t&&t.ifAoff((function(t){i||(i={}),i.audio=!t,e.located()||(i.audio=e.subArgs?e.subArgs.subSAudio:!e.aoff,2===e.type&&(i.audio=!0))})),i&&this.mgr._onMemberMediaChanaged(e.owner,e,i,this.confrId),i&&this.mgr._onUpdateMemberStream(e,i,this.confrId)}},onNetworkWeak:function(){},onNotSupportPublishVideoCodecs:function(e){this.mgr._onNotSupportMemberPublishVideoCodecs(e,this.confrId)},onRecvRemoteMessage:function(e,t){this.mgr._onRecvRemoteMessage(e,t,this.confrId)},onSoundChanage:function(e,t,n){this.mgr._onMemberSoundChanaged(e,t,n,this.confrId)},onTalking:function(e,t,n){this.mgr._onTalking(e,t,n,this.confrId)},onRoleUpdate:function(e,t){var n=this.mgr._confrs[this.confrId];t&&(n.roleToken=t),n.role=e,e==this.mgr.Role.AUDIENCE&&(n.av&&this.mgr.hungup(n.av),n.desktop&&this.mgr.hungup(n.desktop)),this.mgr._onRoleUpdated(e,this.confrId),this.mgr.upload_stats&&this.mgr.upload_stats.upload_event({event:21,role:e,sessionId:this._session._sessionId})},onNotifyEvent:function(e){var t=this;try{if(e instanceof emedia.event.ICEChanage){var n=e.webrtc,r=e.state;i.default.forEach(t._cacheStreams,(function(e,o){if(o.rtcId==n.getRtcId()){var s=i.default.extend({},o),a=i.default.extend({},o.owner);t.mgr._onStreamIceStateChanged(a,s,r,t.confrId)}}))}}finally{t.subject.next(e)}}})}t.default=u},function(e,t,n){"use strict";var r=n(2),i=o(r);function o(e){return e&&e.__esModule?e:{default:e}}var s=n(87),a=s.tagLogger("PannelVideo"),c=n(373),u=n(374),f=(n(163),n(164)),d=n(375);function l(e){l._overrideCount++,l.overrideObj!==e&&(l.overrideObj=e,p.override=e.listeners.onRemoveMember,p.overrideService=e,e.listeners.onRemoveMember=p)}function p(e,t){try{var n=e&&e.id&&I(p.overrideService,e.id);n&&n.length&&s.forEach(n,(function(t,n){a.warn("Remove member. free remote controller. it is ",n.id,n._ctrlStream.id,n._controller.memName,e.id),n._free(),n._callbacks&&n._callbacks.onRemoteFreeControl&&n._callbacks.onRemoteFreeControl(n._ctrlStream,n._controller,n._cId)}))}finally{p.override&&p.override.apply(this,arguments)}}function h(e){h._overrideCount++,h.overrideObj!==e&&(h.overrideObj=e,v.override=e.listeners.onRemoveStream,v.overrideService=e,e.listeners.onRemoveStream=v)}function m(e){}function v(e){g(v.overrideService,e),v.override&&v.override.apply(this,arguments)}function g(e,t){N(e,t.id);var n=T(e,t);n&&s.forEach(n,(function(e,t){t._free&&t._free()})),s.removeAttribute(e.current.__remoteControls,t.id)}function y(e){if(y._overrideCount++,y.overrideObj!==e){y.overrideObj=e;var t=e.onHungup;e.onHungup=function(n){g(e,n),t&&t.apply(this,arguments)}.bind(e)}}function b(e,t){if(b._overrideCount++,b.overrideObj!==e){b.overrideObj=e;var n=e._onRemotePannelControl;e._onRemotePannelControl=function(e){O(this,e,!1,t),n&&n.apply(this,arguments)}.bind(e)}}function _(e,t,n){var r=[];n&&s.forEach(n.actions,(function(e,t){t.xy&&r.push({x:Math.round(1e4*t.xy.x),y:Math.round(1e4*t.xy.y),oper:t.oper,btn:t.btn,sn:t.sn,_time:t._time}),t.xy||r.push({oper:t.oper,btn:t.btn,sn:t.sn,_time:t._time})}));var o={op2:30,evt:0,streamId:t.id,actions:r,cId:n.cId};return e.current.newMessage({op:1002,memId:t.owner.id,arg:(0,i.default)(o),_reqOps:[100230]})}function w(e){"string"===typeof e.arg&&(e.arg=JSON.parse(e.arg));var t=e.arg,n=[],r=[];t&&t.actions&&s.forEach(t.actions,(function(e,t){void 0!==t.x&&void 0!==t.y&&n.push({xy:{x:t.x/1e4,y:t.y/1e4},oper:t.oper,btn:t.btn,sn:t.sn,_time:t._time}),(void 0===t.x||void 0===t.y)&&r.push({oper:t.oper,btn:t.btn,sn:t.sn,_time:t._time})})),t.mouse=n,t.keyboard=r}l._overrideCount=0,h._overrideCount=0,y._overrideCount=0,b._overrideCount=0;var S=0,x=s.prototypeExtend({__init__:function(){this.id=S++},accept:function(e,t){var n=this;if(n.hasOtherControl())throw n.busy(),a.error("Other has been controled."),"Other has been controled.";var r=!1,i=T(this._service,this._ctrlStream,this._controller);if(i&&s.forEach(i,(function(e,t){t.id<n.id?t._free():r=!0})),r)n._free();else{var o=this._service.current.__remoteControls||(this._service.current.__remoteControls={});o[n.id]=n,V(this,e,t),C(this._service,this._reqevt,0)}},controlling:function(){var e=this,t=[],n=T(this._service,this._ctrlStream);return n&&s.forEach(n,(function(n,r){r._controller.memName===e._controller.memName&&t.push(r)})),t&&t.length?t:void 0},hasOtherControl:function(){var e=this,t=!1,n=T(this._service,this._ctrlStream);return n&&s.forEach(n,(function(n,r){r._controller.memName!=e._controller.memName&&(t=!0)})),t},busy:function(){C(this._service,this._reqevt,-403)},reject:function(){C(this._service,this._reqevt,-402)},_free:function(){s.removeAttribute(this._service.current.__remoteControls,this.id)},forceDisconnect:function(){var e=T(this._service,this._ctrlStream);e&&s.forEach(e,(function(e,t){t._free&&t._free()})),a.info("remote control force disconnect")}});function C(e,t,n){e.current.message({op:1001,tsxId:t.tsxId,memId:t.memId,arg:(0,i.default)({cId:t.arg.cId}),result:n}).post()}function E(e,t){C(e,t,-405)}function I(e,t,n){var r=[];return e.current.__remoteControls&&s.forEach(e.current.__remoteControls,(function(e,i){n&&i._ctrlStream.id!==n.id||t&&i._controller.id!==t||r.push(i)})),r}function T(e,t,n,r){var i=[];return e.current.__remoteControls&&s.forEach(e.current.__remoteControls,(function(e,o){t&&o._ctrlStream.id!==t.id||n&&o._controller.memName!==n.memName||r&&o._cId!==r||i.push(o)})),i}function O(e,t,n,r){w(t);var o=t.arg,c=o.cId,u=o.streamId,d=e.getMemberById(t.memId),l=e.getStreamById(u);function p(){if(!d||!l)return E(e,t),!0;if(1===o.evt){var n,i=new x({_service:e,_controller:d,_ctrlStream:l,_cId:c,_reqevt:t,_callbacks:r});return i.hasOtherControl()?(i.busy(),!0):(n=i.controlling())?(s.forEach(n,(function(e,t){t._cId=c})),C(e,t,0),!0):(r&&r.onHasRemoteControl&&r.onHasRemoteControl(l,d,i),!0)}if(2===o.evt){var a=T(e,l,d,c);return a&&s.forEach(a,(function(n,r){r._free&&r._free(),C(e,t,0)})),r&&r.onRemoteFreeControl&&r.onRemoteFreeControl(l,d,c),!0}}if(n||!p()){var h=T(e,l,d,c);if(n||h&&0!==h.length||E(e,t),h&&s.forEach(h,(function(e,t){t._lastRecvTimestamp=(new Date).getTime()})),n){var m=e.current.__remoteControls[l.id];h=h||[],m&&h.push(m)}s.forEach(h,(function(r,c){var u=0,d=o.mouse;if(d&&d.length>0)try{s.forEach(d,(function(e,t){t.sn>u&&(u=t.sn),t.oper===f.BTN.MOVE?c.mouseTrack&&c.mouseTrack.track(t.xy):c.mouseTrack&&c.mouseTrack.trigger(new f(t))}))}catch(p){a.warn(p)}d=o.keyboard;if(d&&d.length>0)try{s.forEach(d,(function(e,t){t.sn>u&&(u=t.sn),c.keyboard&&(t.oper===f.BTN.KEYBOARD_DOWN?c.keyboard.onKeyDown(t.btn):t.oper===f.BTN.KEYBOARD_UP&&c.keyboard.onKeyUp(t.btn))}))}catch(p){a.warn(p)}if(!0!==n)try{l()}catch(p){a.warn(p)}function l(){e.current.message({op:1001,tsxId:t.tsxId,memId:t.memId,arg:(0,i.default)({sn:u}),result:0}).post((function(e){a.debug("Send remote control response. the result = ",e.result,e.msg||"")}))}}))}}function R(e,t,n,r,i){r&&r()}function k(e,t,n,r,i){r&&r()}function M(e,t,n,r,i,o,s){var a=e.eventXYAtMedia(r,n);a&&(a={x:a.x/a.width,y:a.y/a.height},j(e,{xy:a,oper:f.BTN.MOVE,sid:t},s),o&&o(a,i))}function A(e,t,n,r,i,o,a){r.xy=e.eventXYAtMedia(r.xy,n),r.xy&&(r.xy={x:r.xy.x/r.xy.width,y:r.xy.y/r.xy.height},s.extend(r,{sid:t}),j(e,r,a),o&&o(r,i))}function P(e,t,n,r,i,o){j(e,{oper:n,btn:r,sid:t},o),i&&i(n,r)}function j(e,t,n){var r=t.sid,i=e.getStreamById(r);e.current.__remoteControls&&e.current.__remoteControls[r]&&O(e,_(e,i,{actions:[t]}),!0);var o=e.current.__pannelBuffers[r],c=o.getUnclearSize();if(o.put(t),c<emedia.config.allowSendWhenLessThan){var u=function t(){for(var c=o.getUnread(),u=0,f=0;c&&f<c.length;f++){var d=c[f];s.removeAttribute(d,"sid"),u<d.sn&&(u=d.sn)}c&&0!==c.length&&(a.debug(r,"buffer remain:",o.getUnclearSize(),", send evt:",c.length),e.current.postMessage(_(e,i,{actions:c,cId:o._cId}),(function(e){if(-402!==e.result)if(-403!==e.result)if(-408!==e.result){if(-507===e.result||-405===e.result)return o.clearRead(u),void(n&&n.onNotAllowRemoteControl&&n.onNotAllowRemoteControl(i));0===e.result&&(o._lastRspTimestamp=(new Date).getTime());var c=e.arg;c&&(c=JSON.parse(c))&&!s.isInt(c.sn)?a.warn("rsp.sn not a Number.",c.sn,"for streamId",r):c&&void 0!==c.sn&&o.clearRead(c.sn),t()}else n&&n.onRemoteControlTimeout&&n.onRemoteControlTimeout(i);else n&&n.onBusy&&n.onBusy(i);else n&&n.onReject&&n.onReject(i)})))};u()}}function N(e,t){var n,r=e.current.__pannelMouses&&s.removeAttribute(e.current.__pannelMouses,t),o=e.current.__pannelKeyboards&&s.removeAttribute(e.current.__pannelKeyboards,t);if(e.current.__pannelBuffers&&(n=s.removeAttribute(e.current.__pannelBuffers,t)),r&&r.ungrab(),o&&o.ungrab(),m(e),n){var c=e.getStreamById(t);if(n._callbacks&&n._callbacks.onDisControlled&&n._callbacks.onDisControlled(c),c){var u=e.current.newMessage({op:1002,memId:c.owner.id,arg:(0,i.default)({op2:30,streamId:c.id,evt:2,cId:n._cId}),_reqOps:[100230]});e.current.postMessage(u,(function(e){0!==e.result&&a.warn("Unkown result：",e.result)}))}}}function L(e,t,n,r){var i={};s.forEach(arguments,(function(e,t){"function"===typeof t&&(i[t.name]=t)})),B(e,t,n,!0,r,i)}function D(e,t,n,r){var i={};s.forEach(arguments,(function(e,t){"function"===typeof t&&(i[t.name]=t)})),B(e,t,n,!1,r,i)}function B(e,t,n,r,o,s){var c=Math.uuidFast();c=c.substr(c.length-6,6);var u=e.getStreamById(t);if(!u._webrtc)throw s&&s.onNotAllowRemoteControl&&s.onNotAllowRemoteControl(u),a.error("Not allow control. cause by the stream not sub"),"Not allow control. cause by the stream not sub";var f={op2:30,streamId:u.id,evt:1,cId:c},d=e.current.newMessage({op:1002,memId:u.owner.id,arg:(0,i.default)(f),_reqOps:[100230]});e.current.postMessage(d,(function(i){if(-402!==i.result)if(-403!==i.result)if(-408!==i.result)if(-507!==i.result&&-405!==i.result){if(0===i.result)return U(e,t,n,r,o,s,c,!0),void(s&&s.onAccept&&s.onAccept(u));a.warn("Unkown result：",i.result),s&&s.onNotAllowRemoteControl&&s.onNotAllowRemoteControl(u)}else s&&s.onNotAllowRemoteControl&&s.onNotAllowRemoteControl(u);else s&&s.onRemoteControlTimeout&&s.onRemoteControlTimeout(u);else s&&s.onBusy&&s.onBusy(u);else s&&s.onReject&&s.onReject(u)}))}function U(e,t,n,r,i,o,s,l){void 0===i&&(i=n);var p=e.getStreamById(t),h=(e.current.__pannelMouses||(e.current.__pannelMouses={}))[t];if(h&&N(e,t),!p.located()&&!p.owner.acptOps[1003])throw a.error("which do not recv remote message, it is ",p.owner.memName),p.owner.memName+" do not recv remote message";h=new c({_target:i,_focused:!0,onMouseEnter:function(){R.call(h,e,t,n,o&&o.onMouseEnter,o),m&&m.grab()},onMouseExit:function(){k.call(h,e,t,n,o&&o.onMouseExit,o),m&&m.ungrab()},onMouseButton:function(i,s){!0===r&&(i.xy.x=-i.xy.x),A.call(h,e,t,n,i,s,o&&o.onMouseButton,o)},onMouseMove:function(i,s){emedia.config.disableTrack||(!0===r&&(i.x=-i.x),M.call(h,e,t,n,i,s,o&&o.onMouseMove,o))}});var m,v=e.current.__pannelBuffers||(e.current.__pannelBuffers={});v[t]=new d({_cId:s,_callbacks:o,trackBufferSize:emedia.config.trackBufferSize||1e3});(e.current.__pannelMouses||(e.current.__pannelMouses={}))[t]=h,h.grab(),l&&(m=new u({_target:document,_focused:!0,onKeyPress:function(n,r){var i=r?f.BTN.KEYBOARD_DOWN:f.BTN.KEYBOARD_UP,s=n;P.call(m,e,t,i,s,o&&o.onKeyboard,o)}}),(e.current.__pannelKeyboards||(e.current.__pannelKeyboards={}))[t]=m)}function F(e,t,n,r){var i=new c({_target:e,_focused:!0,onMouseEnter:function(){},onMouseExit:function(){t.releaseTrigger()},onMouseButton:function(e,i){e.xy={x:e.xy.x/e.xy.width,y:e.xy.y/e.xy.height},!0===r&&(e.xy.x=-e.xy.x),n&&(e.xy=emedia.Service.prototype.eventXYAtMedia.call(null,e.xy,n)),e.xy&&t.trigger(e)},onMouseMove:function(e,i){e={x:e.x/e.width,y:e.y/e.height},!0===r&&(e.x=-e.x),n&&(e=emedia.Service.prototype.eventXYAtMedia.call(null,e,n)),e&&t.track(e)}});return i.grab(),i}function V(e,t,n){var r=t;r&&(e.mouseTrack=r),e.keyboard=n}function W(e){var t={};s.forEach(arguments,(function(e,n){0!=e&&"function"===typeof n&&(t[n.name]=n)})),y(e),h(e),l(e),b(e,t),z(e)}function q(e,t){var n=e.getStreamById(t),r=T(e,n);if(r&&0!==r.length)return r[0]._controller.memName}function $(e,t,n,r){var i=e.getStreamById(t),o={_ctrlStream:i,_controller:i.owner,_service:e};V(o,n,r),(e.current.__remoteControls||(e.current.__remoteControls={}))[t]=o}function G(e,t){s.removeAttribute(e.current.__remoteControls,t)}var z=function e(t){var n,r;(e.timeoutId&&clearTimeout(e.timeoutId),e.timeoutId=setTimeout((function(){e(t)}),emedia.config.ctrlCheckIntervalMillis),t.current)&&((n=t.current.__remoteControls)&&s.forEach(n,(function(e,t){if(void 0!==t.id&&e==t.id){var n=(new Date).getTime();t._lastRecvTimestamp&&n-t._lastRecvTimestamp>emedia.config.ctrlTimeoutMillis&&(a.warn("Timeout for remote controller. it is ",t.id,t._ctrlStream.id,t._controller.memName),t._free(),t._callbacks&&t._callbacks.onRemoteFreeControl&&t._callbacks.onRemoteFreeControl(t._ctrlStream,t._controller,t._cId))}})),(r=t.current.__pannelBuffers)&&s.forEach(r,(function(e,n){var r=t.getStreamById(e);r&&!r.located()&&t.current.message({op:1002,memId:r.owner.id,arg:(0,i.default)({op2:30,streamId:r.id,evt:3,cId:n._cId}),_reqOps:[100230]}).post((function(e){}))})))};e.exports={mirrorControlled:L,controlled:D,disControlled:N,controlling:V,graffiti:F,echoControl:$,disEchoControl:G,support:W,getController:q}},function(e,t,n){"use strict";var r=n(87),i=(r.tagLogger("Mouse"),n(164));e.exports=r.prototypeExtend({__init__:function(){this._handlers=r.extend({mousedown:this._handleMouseDown.bind(this),mouseup:this._handleMouseUp.bind(this),mousemove:this._handleMouseMove.bind(this),mousewheel:this._handleMouseWheel.bind(this),mousedisable:this._handleMouseDisable.bind(this),mouseover:this._handleMouseOver.bind(this),mouseout:this._handleMouseOut.bind(this)},this._handlers||{})},onMouseButton:function(e,t){},onMouseMove:function(e,t){},onMouseEnter:function(){},onMouseExit:function(){},_onMouseButton:function(e,t,n){var r=(new Date).getTime(),o=new i({xy:e,oper:t,btn:n,_time:r});this.onMouseButton&&this.onMouseButton(o,this._lastTrigger),this._lastTrigger=o},_onMouseMove:function(e){this.onMouseMove&&this.onMouseMove(e,this._lastTrigger)},_captureMouse:function(){this._target.setCapture&&this._target.setCapture(),this._mouseCaptured=!0},_releaseMouse:function(){this._target.releaseCapture&&this._target.releaseCapture(),this._mouseCaptured=!1},_resetDoubleClickTimer:function(){this._doubleClickTimer=null},_handleMouseOver:function(e){!1!==this._mouseExit&&(this._mouseExit=!1,this.onMouseEnter&&this.onMouseEnter())},_handleMouseOut:function(e){!0!==this._mouseExit&&(this._mouseExit=!0,this.onMouseExit&&this.onMouseExit()),this._lastTrigger=void 0},_handleMouseDown:function(e){this._captureMouse(),this._handleMouseButton(e,i.BTN.KEY_DOWN)},_handleMouseUp:function(e){this._mouseCaptured&&(this._handleMouseButton(e,i.BTN.KEY_UP),this._releaseMouse())},_handleMouseWheel:function(e){if(this._focused){e=e||window.event;var t=r.getEventElementXY(e,this._target,this._scale),n=(e.detail?-1*e.detail:e.wheelDelta/40)>0?i.BTN.WHEEL_ROLL_UP:i.BTN.WHEEL_ROLL_DOWN;this._onMouseButton(t,i.BTN.KEY_DOWN,n),r.stopEvent(e)}},_handleMouseMove:function(e){if(this._focused){e=e||window.event;var t=r.getEventElementXY(e,this._target,this._scale);this._onMouseMove(t),r.stopEvent(e)}},_handleMouseDisable:function(e){if(this._focused){e=e||window.event;var t=r.getEventElementXY(e,this._target,this._scale);try{return!(t.realX>=0&&t.realY>=0&&t.realX<this._target.offsetWidth&&t.realY<this._target.offsetHeight)}finally{r.stopEvent(e)}}},_handleMouseButton:function(e,t){if(this._focused){e=e||window.event;var n,o=r.getEventElementXY(e,this._target,this._scale);if(e.touches||e.changedTouches){if(t==i.BTN.KEY_DOWN){if(null===this._doubleClickTimer)this._lastTouchPos=o;else{clearTimeout(this._doubleClickTimer);var s=this._lastTouchPos.x-o.x,a=this._lastTouchPos.y-o.y;Math.sqrt(s*s+a*a)<20*window.devicePixelRatio&&(o=this._lastTouchPos)}this._doubleClickTimer=setTimeout(this._resetDoubleClickTimer.bind(this),500)}n=i.BTN.LEFT}else n=e.which?1<<e.button:(1&e.button)+2*(2&e.button)+(4&e.button)/2;this._onMouseButton(o,t,n),r.stopEvent(e)}},grab:function(){var e=this._target;r.addEvent(e,"mouseover",this._handlers.mouseover),r.addEvent(e,"mouseout",this._handlers.mouseout),r.addEvent(e,"touchstart",this._handlers.mousedown),r.addEvent(e,"touchend",this._handlers.mouseup),r.addEvent(e,"touchmove",this._handlers.mousemove),r.addEvent(e,"mousedown",this._handlers.mousedown),r.addEvent(e,"mouseup",this._handlers.mouseup),r.addEvent(e,"mousemove",this._handlers.mousemove),r.addEvent(e,r.layoutEngine.gecko?"DOMMouseScroll":"mousewheel",this._handlers.mousewheel),r.addEvent(e,"contextmenu",this._handlers.mousedisable)},ungrab:function(){var e=this._target;r.removeEvent(e,"mouseover",this._handlers.mouseover),r.removeEvent(e,"mouseout",this._handlers.mouseout),r.removeEvent(e,"touchstart",this._handlers.mousedown),r.removeEvent(e,"touchend",this._handlers.mouseup),r.removeEvent(e,"touchmove",this._handlers.mousemove),r.removeEvent(e,"mousedown",this._handlers.mousedown),r.removeEvent(e,"mouseup",this._handlers.mouseup),r.removeEvent(e,"mousemove",this._handlers.mousemove),r.removeEvent(e,r.layoutEngine.gecko?"DOMMouseScroll":"mousewheel",this._handlers.mousewheel),r.removeEvent(e,"contextmenu",this._handlers.mousedisable)}})},function(e,t,n){"use strict";var r=n(87),i=r.tagLogger("Keyboard");e.exports=r.prototypeExtend({__init__:function(){this._eventHandlers={keyup:this._handleKeyUp.bind(this),keydown:this._handleKeyDown.bind(this),keypress:this._handleKeyPress.bind(this),blur:this._allKeysUp.bind(this)}},getKey:function(e){return"keyCode"in e&&"key"in e?e.key+":"+e.keyCode:"keyCode"in e?e.keyCode:e.key},onKeyPress:function(e,t){},_onKeyPress:function(e,t){this.onKeyPress&&this.onKeyPress(e,t)},_handleRfbEvent:function(e,t){e.shiftKey,e.ctrlKey,e.altKey;var n=e.keyCode||e.which;this._onKeyPress(n,"keydown"==t)},_handleKeyDown:function(e){return!this._focused||!this._handleRfbEvent(e,"keydown")||(r.stopEvent(e),!1)},_handleKeyPress:function(e){return!this._focused||(r.stopEvent(e),!1)},_handleKeyUp:function(e){return!this._focused||!this._handleRfbEvent(e,"keyup")||(r.stopEvent(e),!1)},_allKeysUp:function(){},sync:function(e){},grab:function(){var e=this._target;r.addEvent(e,"keydown",this._eventHandlers.keydown),r.addEvent(e,"keyup",this._eventHandlers.keyup),r.addEvent(e,"keypress",this._eventHandlers.keypress),r.addEvent(e,"blur",this._eventHandlers.blur),i.info("keyboard grab at element")},ungrab:function(){var e=this._target;r.removeEvent(e,"keydown",this._eventHandlers.keydown),r.removeEvent(e,"keyup",this._eventHandlers.keyup),r.removeEvent(e,"keypress",this._eventHandlers.keypress),r.removeEvent(e,"blur",this._eventHandlers.blur),this._allKeysUp(),i.info("keyboard upgrab at element")}})},function(e,t,n){"use strict";var r=n(87),i=(r.tagLogger("TotalBuffer"),n(376)),o=n(377),s=n(164);e.exports=r.prototypeExtend({trackBufferSize:100,_trackBufferCompRadio:.25,_sn:1,__init__:function(){this._eventBuffer=new i({_nextsn:this._nextsn.bind(this)}),this._trackBuffer=new o({_nextsn:this._nextsn.bind(this),_compRadio:this._trackBufferCompRadio,mouseTrackBufferSize:this.trackBufferSize})},_nextsn:function(){return this._sn++},put:function(e){e&&void 0!==e.oper&&(e.oper===s.BTN.MOVE?this._trackBuffer.put(e):this._eventBuffer.put(e))},getUnread1:function(e){function t(e,t){return e._time-t.time}var n;if(!e){var r=this._eventBuffer.getUnread(),i=this._trackBuffer.getUnread();return Array.prototype.push.apply(r,i),n=r,n.sort(t),n}n=[];r=this._eventBuffer._getUnread(e),i=this._trackBuffer._getUnread(e);Array.prototype.push.apply(n,r),Array.prototype.push.apply(n,i),n.sort(t),n=n.slice(0,e>n.length?n.length:e);for(var o=0;o<n.length;o++)n[o].oper===s.BTN.MOVE?this._trackBuffer.getUnread(1):this._eventBuffer.getUnread(1);return n},getUnread:function(e){e||(e=this._eventBuffer.getUnreadSize()+this._trackBuffer.getUnreadSize());var t=[];while(t.length!==e){var n=this._eventBuffer._getUnread(1),r=this._trackBuffer._getUnread(1);if(void 0===n&&r)t.push(this._trackBuffer.getUnread(1));else if(void 0===r&&n)t.push(this._eventBuffer.getUnread(1));else{if(void 0===r&&void 0===n)return t;n.sn<r.sn?t.push(this._eventBuffer.getUnread(1)):t.push(this._trackBuffer.getUnread(1))}}return t},getUnreadSize:function(){return this._trackBuffer.getUnreadSize()+this._eventBuffer.getUnreadSize()},getUnclearSize:function(){return this._trackBuffer.getUnclearSize()+this._eventBuffer.getUnclearSize()},clearRead:function(e){return this._eventBuffer.clearRead(e)+this._trackBuffer.clearRead(e)}})},function(e,t,n){"use strict";var r=n(87);r.tagLogger("EventBuffer");e.exports=r.prototypeExtend({_buffer:[],_sn:1,_beginIndex:0,_readIndex:0,_endIndex:0,_nextsn:function(){return this._sn++},put:function(e){e&&(e.sn=this._nextsn(),this._buffer.push(e),this._endIndex++)},_getUnread:function(e){return this._readIndex===this._endIndex?1===e?void 0:[]:this._buffer[this._readIndex]},getUnread:function(e){var t;try{return t=this._getUnread(e),t}finally{t&&(this._readIndex+=1===e?1:t.length)}},getUnreadSize:function(){return this._endIndex-this._readIndex},getUnclearSize:function(){return this._readIndex-this._beginIndex},clearRead:function(e){if(this._readIndex!==this._beginIndex){for(var t=0,n=this._beginIndex;n<this._readIndex;n++){if(!(this._buffer[n].sn<=e))break;t++}if(0===t)return 0;for(n=0;n<t;n++)this._buffer.shift();return this._beginIndex=0,this._readIndex-=t,this._endIndex-=t,t}}})},function(e,t,n){"use strict";var r=n(87);r.tagLogger("TrackBuffer");e.exports=r.prototypeExtend({mouseTrackBufferSize:1e3,_sn:1,_compRadio:.25,_beginIndex:0,_readIndex:0,_endIndex:0,__init__:function(){this._mouseTrackBuffer=new Array(this.mouseTrackBufferSize)},_nextsn:function(){return this._sn++},_index:function(e){return e%this.mouseTrackBufferSize},comp1:function(e){if(!(e>=1)){var t=Math.floor(1/e),n=this._beginIndex,r=n+1;while(n<this._endIndex){for(var i=2;i<t&&n+i<this._endIndex;i++)this._mouseTrackBuffer[this._index(r++)]=this._mouseTrackBuffer[this._index(n+i)];n+=t}this._endIndex=r}},put1:function(e){if(e){e.sn=this._nextsn(),this._endIndex-this._readIndex===this.mouseTrackBufferSize&&(this.comp1(this._compRadio),this._readIndex=this._beginIndex);var t=this._index(this._beginIndex),n=(this._index(this._readIndex),this._index(this._endIndex)),r=n;r<=t&&r>=0&&this._endIndex>this._beginIndex&&this._beginIndex++,this._mouseTrackBuffer[r]=e,this._endIndex++}},compHalfOfUnread:function(){var e=this._readIndex+2,t=this._readIndex+1;while(e<this._endIndex)this._mouseTrackBuffer[this._index(t++)]=this._mouseTrackBuffer[this._index(e)],e+=2;this._endIndex=t},put:function(e){if(e){e.sn=this._nextsn(),this._endIndex-this._beginIndex===this.mouseTrackBufferSize&&this.compHalfOfUnread();var t=this._index(this._endIndex);this._mouseTrackBuffer[t]=e,this._endIndex++}},_interval:function(e,t){var n=this._index(e),r=this._index(t);if(n<r)return this._mouseTrackBuffer.slice(n,r);var i=this._mouseTrackBuffer.slice(n);return Array.prototype.push.apply(i,this._mouseTrackBuffer.slice(0,r)),i},_getUnread:function(e){return this._readIndex===this._endIndex?1===e?void 0:[]:this._mouseTrackBuffer[this._index(this._readIndex)]},getUnread:function(e){var t;try{return t=this._getUnread(e),t}finally{t&&(this._readIndex+=1===e?1:t.length)}},getUnreadSize:function(){return this._endIndex-this._readIndex},getUnclearSize:function(){return this._readIndex-this._beginIndex},clearRead:function(e){if(this._readIndex!==this._beginIndex){for(var t=0,n=this._beginIndex;n<this._readIndex;n++){var r=this._index(n);if(!(this._mouseTrackBuffer[r].sn<=e))break;this._beginIndex++,t++}return t}}})},function(e,t,n){"use strict";var r=n(87),i=r.tagLogger("CompositeCanvas");function o(){}for(var s in CanvasRenderingContext2D.prototype)(function(e){o.prototype[e]=function(){if("function"===typeof this._canvasContext[e])this._canvasContext[e].apply(this._canvasContext,arguments);else{var t=arguments.length>=1?arguments[0]:void 0;if(!t)return this._canvasContext[e];this._canvasContext[e]=t}}})(s);var a=r.prototypeExtend(o,{__init__:function(){var e=this;e.compositeCanvasTag||(e.compositeCanvasTag=document.createElement("canvas")),e._canvasContext=e.compositeCanvasTag.getContext("2d"),e._canvasContext.globalAlpha=void 0!==this._globalAlpha?this._globalAlpha:1,e._compositeOperation=e._compositeOperation||c.source_over,e.globalCompositeOperation(e._compositeOperation)},setCanvas:function(){for(var e,t=this,n=0;n<arguments.length;n++)e=arguments[n],"function"===typeof e&&e(this.compositeCanvasTag,this._canvasContext),"function"!==typeof e&&r.isPlainObject(e)&&r.forEach(e,(function(e,n){i.debug("Canvas set ",e," = ",n),t.compositeCanvasTag.setAttribute(e,n)}));return t},getCanvasImageData:function(e,t){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var i=e.getContext("2d");return i.globalAlpha=t||0,i.getImageData.apply(i,n)},_composite:function(e){var t=this;return new a(t,{_compositeOperation:e})},composite:function(e){var t=this;return t.globalCompositeOperation(e),t},requestAnimationFrame:function(e){var t=this;return t.requestFrame(),t._requestAnimationFrameStart=window.requestAnimationFrame((function(e){t.requestAnimationFrame(e)})),t},cancelAnimationFrame:function(){var e=this;return e._requestAnimationFrameStart&&window.cancelAnimationFrame(e._requestAnimationFrameStart),e},requestFrame:function(e){var t,n=this;if("function"!==typeof this.requestOneFrame)throw i.error("Pleas implement requestOneFrame()"),"Pleas implement requestOneFrame()";try{this.requestOneFrame()}catch(o){i.error(o)}if(e&&(t=Math.floor(1e3/e)),!t)return n;var r=this.requestFrame.bind(this);return this.intervalId=setInterval((function(){r(e)}),t),n},stopRequestFrame:function(){return this.intervalId&&clearInterval(this.intervalId),this}});a.CompositeOperation=["source-atop","source-in","source-out","source-over","destination-atop","destination-in","destination-out","destination-over","lighter","darker","xor","copy"];var c=a.operation={source_atop:"source-atop",source_in:"source-in",source_out:"source-out",source_over:"source-over",destination_atop:"destination-atop",destination_in:"destination-in",destination_out:"destination-out",destination_over:"destination-over",lighter:"lighter",darker:"darker",xor:"xor",copy:"copy"};a.compositeVideoOverCanvas=function(e,t,n){var r;return(r=e.compositeCanvas)||(r=new a({compositeCanvasTag:e,requestOneFrame:function(){t&&r.drawImage(t,0,0,e.width,e.height),n&&r.drawImage(n,0,0,e.width,e.height)}}),e.compositeCanvas=r),r},e.exports=a},function(e,t,n){"use strict";var r=n(87);r.tagLogger("Keyboard");e.exports=r.prototypeExtend({onKeyDown:function(e){},onKeyUp:function(e){}})},function(e,t,n){"use strict";window.emedia=window.emedia||{};var r=n(87),i=r.tagLogger("electron");emedia.electron=window.require("electron"),emedia.chooseElectronDesktopMedia=function(e,t,n){i.info("Choose desktop. ",e[0]),t(e[0])}}])}))},"159b":function(e,t,n){var r=n("da84"),i=n("fdbc"),o=n("17c2"),s=n("9112");for(var a in i){var c=r[a],u=c&&c.prototype;if(u&&u.forEach!==o)try{s(u,"forEach",o)}catch(f){u.forEach=o}}},1609:function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},"170b":function(e,t,n){"use strict";var r=n("ebb5"),i=n("50c4"),o=n("23cb"),s=n("4840"),a=r.aTypedArray,c=r.exportTypedArrayMethod;c("subarray",(function(e,t){var n=a(this),r=n.length,c=o(e,r);return new(s(n,n.constructor))(n.buffer,n.byteOffset+c*n.BYTES_PER_ELEMENT,i((void 0===t?r:o(t,r))-c))}))},"17c2":function(e,t,n){"use strict";var r=n("b727").forEach,i=n("a640"),o=n("ae40"),s=i("forEach"),a=o("forEach");e.exports=s&&a?[].forEach:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}},"17ed":function(e,t,n){e.exports={default:n("511f"),__esModule:!0}},"182d":function(e,t,n){var r=n("f8cd");e.exports=function(e,t){var n=r(e);if(n%t)throw RangeError("Wrong offset");return n}},1836:function(e,t,n){var r=n("6ca1"),i=n("6438").f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(e){try{return i(e)}catch(t){return s.slice()}};e.exports.f=function(e){return s&&"[object Window]"==o.call(e)?a(e):i(r(e))}},1917:function(e,t){t.f={}.propertyIsEnumerable},"19aa":function(e,t){e.exports=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e}},"19fa":function(e,t,n){var r=n("fc5e"),i=n("c901");e.exports=function(e){return function(t,n){var o,s,a=String(i(t)),c=r(n),u=a.length;return c<0||c>=u?e?"":void 0:(o=a.charCodeAt(c),o<55296||o>56319||c+1===u||(s=a.charCodeAt(c+1))<56320||s>57343?e?a.charAt(c):o:e?a.slice(c,c+2):s-56320+(o-55296<<10)+65536)}}},"1a14":function(e,t,n){var r=n("77e9"),i=n("faf5"),o=n("3397"),s=Object.defineProperty;t.f=n("0bad")?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return s(e,t,n)}catch(a){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},"1be4":function(e,t,n){var r=n("d066");e.exports=r("document","documentElement")},"1c0b":function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},"1c7e":function(e,t,n){var r=n("b622"),i=r("iterator"),o=!1;try{var s=0,a={next:function(){return{done:!!s++}},return:function(){o=!0}};a[i]=function(){return this},Array.from(a,(function(){throw 2}))}catch(c){}e.exports=function(e,t){if(!t&&!o)return!1;var n=!1;try{var r={};r[i]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(c){}return n}},"1cdc":function(e,t,n){var r=n("342f");e.exports=/(iphone|ipod|ipad).*applewebkit/i.test(r)},"1d2b":function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},"1d80":function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on "+e);return e}},"1da1":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n("d3b7");function r(e,t,n,r,i,o,s){try{var a=e[o](s),c=a.value}catch(u){return void n(u)}a.done?t(c):Promise.resolve(c).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var s=e.apply(t,n);function a(e){r(s,i,o,a,c,"next",e)}function c(e){r(s,i,o,a,c,"throw",e)}a(void 0)}))}}},"1dde":function(e,t,n){var r=n("d039"),i=n("b622"),o=n("2d00"),s=i("species");e.exports=function(e){return o>=51||!r((function(){var t=[],n=t.constructor={};return n[s]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"219c":function(e,t,n){"use strict";var r=n("ebb5"),i=r.aTypedArray,o=r.exportTypedArrayMethod,s=[].sort;o("sort",(function(e){return s.call(i(this),e)}))},"21a1":function(e,t,n){(function(t){(function(t,n){e.exports=n()})(0,(function(){"use strict";"undefined"!==typeof window?window:"undefined"!==typeof t||"undefined"!==typeof self&&self;function e(e,t){return t={exports:{}},e(t,t.exports),t.exports}var n=e((function(e,t){(function(t,n){e.exports=n()})(0,(function(){function e(e){var t=e&&"object"===typeof e;return t&&"[object RegExp]"!==Object.prototype.toString.call(e)&&"[object Date]"!==Object.prototype.toString.call(e)}function t(e){return Array.isArray(e)?[]:{}}function n(n,r){var i=r&&!0===r.clone;return i&&e(n)?o(t(n),n,r):n}function r(t,r,i){var s=t.slice();return r.forEach((function(r,a){"undefined"===typeof s[a]?s[a]=n(r,i):e(r)?s[a]=o(t[a],r,i):-1===t.indexOf(r)&&s.push(n(r,i))})),s}function i(t,r,i){var s={};return e(t)&&Object.keys(t).forEach((function(e){s[e]=n(t[e],i)})),Object.keys(r).forEach((function(a){e(r[a])&&t[a]?s[a]=o(t[a],r[a],i):s[a]=n(r[a],i)})),s}function o(e,t,o){var s=Array.isArray(t),a=o||{arrayMerge:r},c=a.arrayMerge||r;return s?Array.isArray(e)?c(e,t,o):n(t,o):i(e,t,o)}return o.all=function(e,t){if(!Array.isArray(e)||e.length<2)throw new Error("first argument should be an array with at least two elements");return e.reduce((function(e,n){return o(e,n,t)}))},o}))}));function r(e){return e=e||Object.create(null),{on:function(t,n){(e[t]||(e[t]=[])).push(n)},off:function(t,n){e[t]&&e[t].splice(e[t].indexOf(n)>>>0,1)},emit:function(t,n){(e[t]||[]).map((function(e){e(n)})),(e["*"]||[]).map((function(e){e(t,n)}))}}}var i=e((function(e,t){var n={svg:{name:"xmlns",uri:"http://www.w3.org/2000/svg"},xlink:{name:"xmlns:xlink",uri:"http://www.w3.org/1999/xlink"}};t.default=n,e.exports=t.default})),o=function(e){return Object.keys(e).map((function(t){var n=e[t].toString().replace(/"/g,"&quot;");return t+'="'+n+'"'})).join(" ")},s=i.svg,a=i.xlink,c={};c[s.name]=s.uri,c[a.name]=a.uri;var u,f=function(e,t){void 0===e&&(e="");var r=n(c,t||{}),i=o(r);return"<svg "+i+">"+e+"</svg>"},d=i.svg,l=i.xlink,p={attrs:(u={style:["position: absolute","width: 0","height: 0"].join("; ")},u[d.name]=d.uri,u[l.name]=l.uri,u)},h=function(e){this.config=n(p,e||{}),this.symbols=[]};h.prototype.add=function(e){var t=this,n=t.symbols,r=this.find(e.id);return r?(n[n.indexOf(r)]=e,!1):(n.push(e),!0)},h.prototype.remove=function(e){var t=this,n=t.symbols,r=this.find(e);return!!r&&(n.splice(n.indexOf(r),1),r.destroy(),!0)},h.prototype.find=function(e){return this.symbols.filter((function(t){return t.id===e}))[0]||null},h.prototype.has=function(e){return null!==this.find(e)},h.prototype.stringify=function(){var e=this.config,t=e.attrs,n=this.symbols.map((function(e){return e.stringify()})).join("");return f(n,t)},h.prototype.toString=function(){return this.stringify()},h.prototype.destroy=function(){this.symbols.forEach((function(e){return e.destroy()}))};var m=function(e){var t=e.id,n=e.viewBox,r=e.content;this.id=t,this.viewBox=n,this.content=r};m.prototype.stringify=function(){return this.content},m.prototype.toString=function(){return this.stringify()},m.prototype.destroy=function(){var e=this;["id","viewBox","content"].forEach((function(t){return delete e[t]}))};var v=function(e){var t=!!document.importNode,n=(new DOMParser).parseFromString(e,"image/svg+xml").documentElement;return t?document.importNode(n,!0):n},g=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={isMounted:{}};return n.isMounted.get=function(){return!!this.node},t.createFromExistingNode=function(e){return new t({id:e.getAttribute("id"),viewBox:e.getAttribute("viewBox"),content:e.outerHTML})},t.prototype.destroy=function(){this.isMounted&&this.unmount(),e.prototype.destroy.call(this)},t.prototype.mount=function(e){if(this.isMounted)return this.node;var t="string"===typeof e?document.querySelector(e):e,n=this.render();return this.node=n,t.appendChild(n),n},t.prototype.render=function(){var e=this.stringify();return v(f(e)).childNodes[0]},t.prototype.unmount=function(){this.node.parentNode.removeChild(this.node)},Object.defineProperties(t.prototype,n),t}(m),y={autoConfigure:!0,mountTo:"body",syncUrlsWithBaseTag:!1,listenLocationChangeEvent:!0,locationChangeEvent:"locationChange",locationChangeAngularEmitter:!1,usagesToUpdate:"use[*|href]",moveGradientsOutsideSymbol:!1},b=function(e){return Array.prototype.slice.call(e,0)},_=navigator.userAgent,w={isChrome:/chrome/i.test(_),isFirefox:/firefox/i.test(_),isIE:/msie/i.test(_)||/trident/i.test(_),isEdge:/edge/i.test(_)},S=function(e,t){var n=document.createEvent("CustomEvent");n.initCustomEvent(e,!1,!1,t),window.dispatchEvent(n)},x=function(e){var t=[];return b(e.querySelectorAll("style")).forEach((function(e){e.textContent+="",t.push(e)})),t},C=function(e){return(e||window.location.href).split("#")[0]},E=function(e){angular.module("ng").run(["$rootScope",function(t){t.$on("$locationChangeSuccess",(function(t,n,r){S(e,{oldUrl:r,newUrl:n})}))}])},I="linearGradient, radialGradient, pattern",T=function(e,t){return void 0===t&&(t=I),b(e.querySelectorAll("symbol")).forEach((function(e){b(e.querySelectorAll(t)).forEach((function(t){e.parentNode.insertBefore(t,e)}))})),e};function O(e,t){var n=b(e).reduce((function(e,n){if(!n.attributes)return e;var r=b(n.attributes),i=t?r.filter(t):r;return e.concat(i)}),[]);return n}var R=i.xlink.uri,k="xlink:href",M=/[{}|\\\^\[\]`"<>]/g;function A(e){return e.replace(M,(function(e){return"%"+e[0].charCodeAt(0).toString(16).toUpperCase()}))}function P(e,t,n){return b(e).forEach((function(e){var r=e.getAttribute(k);if(r&&0===r.indexOf(t)){var i=r.replace(t,n);e.setAttributeNS(R,k,i)}})),e}var j,N=["clipPath","colorProfile","src","cursor","fill","filter","marker","markerStart","markerMid","markerEnd","mask","stroke","style"],L=N.map((function(e){return"["+e+"]"})).join(","),D=function(e,t,n,r){var i=A(n),o=A(r),s=e.querySelectorAll(L),a=O(s,(function(e){var t=e.localName,n=e.value;return-1!==N.indexOf(t)&&-1!==n.indexOf("url("+i)}));a.forEach((function(e){return e.value=e.value.replace(i,o)})),P(t,i,o)},B={MOUNT:"mount",SYMBOL_MOUNT:"symbol_mount"},U=function(e){function t(t){var i=this;void 0===t&&(t={}),e.call(this,n(y,t));var o=r();this._emitter=o,this.node=null;var s=this,a=s.config;if(a.autoConfigure&&this._autoConfigure(t),a.syncUrlsWithBaseTag){var c=document.getElementsByTagName("base")[0].getAttribute("href");o.on(B.MOUNT,(function(){return i.updateUrls("#",c)}))}var u=this._handleLocationChange.bind(this);this._handleLocationChange=u,a.listenLocationChangeEvent&&window.addEventListener(a.locationChangeEvent,u),a.locationChangeAngularEmitter&&E(a.locationChangeEvent),o.on(B.MOUNT,(function(e){a.moveGradientsOutsideSymbol&&T(e)})),o.on(B.SYMBOL_MOUNT,(function(e){a.moveGradientsOutsideSymbol&&T(e.parentNode),(w.isIE||w.isEdge)&&x(e)}))}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var i={isMounted:{}};return i.isMounted.get=function(){return!!this.node},t.prototype._autoConfigure=function(e){var t=this,n=t.config;"undefined"===typeof e.syncUrlsWithBaseTag&&(n.syncUrlsWithBaseTag="undefined"!==typeof document.getElementsByTagName("base")[0]),"undefined"===typeof e.locationChangeAngularEmitter&&(n.locationChangeAngularEmitter="angular"in window),"undefined"===typeof e.moveGradientsOutsideSymbol&&(n.moveGradientsOutsideSymbol=w.isFirefox)},t.prototype._handleLocationChange=function(e){var t=e.detail,n=t.oldUrl,r=t.newUrl;this.updateUrls(n,r)},t.prototype.add=function(t){var n=this,r=e.prototype.add.call(this,t);return this.isMounted&&r&&(t.mount(n.node),this._emitter.emit(B.SYMBOL_MOUNT,t.node)),r},t.prototype.attach=function(e){var t=this,n=this;if(n.isMounted)return n.node;var r="string"===typeof e?document.querySelector(e):e;return n.node=r,this.symbols.forEach((function(e){e.mount(n.node),t._emitter.emit(B.SYMBOL_MOUNT,e.node)})),b(r.querySelectorAll("symbol")).forEach((function(e){var t=g.createFromExistingNode(e);t.node=e,n.add(t)})),this._emitter.emit(B.MOUNT,r),r},t.prototype.destroy=function(){var e=this,t=e.config,n=e.symbols,r=e._emitter;n.forEach((function(e){return e.destroy()})),r.off("*"),window.removeEventListener(t.locationChangeEvent,this._handleLocationChange),this.isMounted&&this.unmount()},t.prototype.mount=function(e,t){void 0===e&&(e=this.config.mountTo),void 0===t&&(t=!1);var n=this;if(n.isMounted)return n.node;var r="string"===typeof e?document.querySelector(e):e,i=n.render();return this.node=i,t&&r.childNodes[0]?r.insertBefore(i,r.childNodes[0]):r.appendChild(i),this._emitter.emit(B.MOUNT,i),i},t.prototype.render=function(){return v(this.stringify())},t.prototype.unmount=function(){this.node.parentNode.removeChild(this.node)},t.prototype.updateUrls=function(e,t){if(!this.isMounted)return!1;var n=document.querySelectorAll(this.config.usagesToUpdate);return D(this.node,n,C(e)+"#",C(t)+"#"),!0},Object.defineProperties(t.prototype,i),t}(h),F=e((function(e){
/*!
  * domready (c) Dustin Diaz 2014 - License MIT
  */
!function(t,n){e.exports=n()}(0,(function(){var e,t=[],n=document,r=n.documentElement.doScroll,i="DOMContentLoaded",o=(r?/^loaded|^c/:/^loaded|^i|^c/).test(n.readyState);return o||n.addEventListener(i,e=function(){n.removeEventListener(i,e),o=1;while(e=t.shift())e()}),function(e){o?setTimeout(e,0):t.push(e)}}))})),V="__SVG_SPRITE_NODE__",W="__SVG_SPRITE__",q=!!window[W];q?j=window[W]:(j=new U({attrs:{id:V}}),window[W]=j);var $=function(){var e=document.getElementById(V);e?j.attach(e):j.mount(document.body,!0)};document.body?$():F($);var G=j;return G}))}).call(this,n("c8ba"))},2266:function(e,t,n){var r=n("825a"),i=n("e95a"),o=n("50c4"),s=n("0366"),a=n("35a1"),c=n("9bdd"),u=function(e,t){this.stopped=e,this.result=t},f=e.exports=function(e,t,n,f,d){var l,p,h,m,v,g,y,b=s(t,n,f?2:1);if(d)l=e;else{if(p=a(e),"function"!=typeof p)throw TypeError("Target is not iterable");if(i(p)){for(h=0,m=o(e.length);m>h;h++)if(v=f?b(r(y=e[h])[0],y[1]):b(e[h]),v&&v instanceof u)return v;return new u(!1)}l=p.call(e)}g=l.next;while(!(y=g.call(l)).done)if(v=c(l,b,y.value,f),"object"==typeof v&&v&&v instanceof u)return v;return new u(!1)};f.stop=function(e){return new u(!0,e)}},"23cb":function(e,t,n){var r=n("a691"),i=Math.max,o=Math.min;e.exports=function(e,t){var n=r(e);return n<0?i(n+t,0):o(n,t)}},"23e7":function(e,t,n){var r=n("da84"),i=n("06cf").f,o=n("9112"),s=n("6eeb"),a=n("ce4e"),c=n("e893"),u=n("94ca");e.exports=function(e,t){var n,f,d,l,p,h,m=e.target,v=e.global,g=e.stat;if(f=v?r:g?r[m]||a(m,{}):(r[m]||{}).prototype,f)for(d in t){if(p=t[d],e.noTargetGet?(h=i(f,d),l=h&&h.value):l=f[d],n=u(v?d:m+(g?".":"#")+d,e.forced),!n&&void 0!==l){if(typeof p===typeof l)continue;c(p,l)}(e.sham||l&&l.sham)&&o(p,"sham",!0),s(f,d,p,e)}}},"241c":function(e,t,n){var r=n("ca84"),i=n("7839"),o=i.concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,o)}},2444:function(e,t,n){"use strict";(function(t){var r=n("c532"),i=n("c8af"),o={"Content-Type":"application/x-www-form-urlencoded"};function s(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function a(){var e;return("undefined"!==typeof XMLHttpRequest||"undefined"!==typeof t)&&(e=n("b50d")),e}var c={adapter:a(),transformRequest:[function(e,t){return i(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(s(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)?(s(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"===typeof e)try{e=JSON.parse(e)}catch(t){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(e){c.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){c.headers[e]=r.merge(o)})),e.exports=c}).call(this,n("4362"))},"25a1":function(e,t,n){"use strict";var r=n("ebb5"),i=n("d58f").right,o=r.aTypedArray,s=r.exportTypedArrayMethod;s("reduceRight",(function(e){return i(o(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)}))},2626:function(e,t,n){"use strict";var r=n("d066"),i=n("9bf2"),o=n("b622"),s=n("83ab"),a=o("species");e.exports=function(e){var t=r(e),n=i.f;s&&t&&!t[a]&&n(t,a,{configurable:!0,get:function(){return this}})}},"26dd":function(e,t,n){"use strict";var r=n("6f4f"),i=n("10db"),o=n("92f0"),s={};n("051b")(s,n("cc15")("iterator"),(function(){return this})),e.exports=function(e,t,n){e.prototype=r(s,{next:i(1,n)}),o(e,t+" Iterator")}},2715:function(module,exports,__webpack_require__){(function(e,t){module.exports=t()})(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/Users/suqin/Desktop/软件开发文档/环信/project/websdk/packages/webrtc",n(n.s=0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";(function(e){var r,i,o=n(3),s=a(o);function a(e){return e&&e.__esModule?e:{default:e}}var c=n(70).default,u=n(439),f=n(71);window.WebIM="undefined"!==typeof WebIM?WebIM:{},WebIM.WebRTC=WebIM.WebRTC||{},WebIM.WebRTC.Call=u,WebIM.WebRTC.Util=c,WebIM.WebRTC.emedia=f,WebIM.__alreadyOpenMedias=[],"object"===(0,s.default)(e)&&"object"===(0,s.default)(e.exports)?e.exports=WebIM.WebRTC:(r=[],i=function(){return WebIM.WebRTC}.apply(t,r),void 0===i||(e.exports=i)),WebIM.WebRTC.config=function(e){if(e instanceof Object!=0)for(var t in e)this[t]=e[t]},WebIM.WebRTC.supportPRAnswer=f.supportPRAnswer,console&&console.warn("Webrtc version","Git.e4f0006")}).call(this,n(2)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";t.__esModule=!0;var r=n(4),i=c(r),o=n(55),s=c(o),a="function"===typeof s.default&&"symbol"===typeof i.default?function(e){return typeof e}:function(e){return e&&"function"===typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":typeof e};function c(e){return e&&e.__esModule?e:{default:e}}t.default="function"===typeof s.default&&"symbol"===a(i.default)?function(e){return"undefined"===typeof e?"undefined":a(e)}:function(e){return e&&"function"===typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":"undefined"===typeof e?"undefined":a(e)}},function(e,t,n){e.exports={default:n(5),__esModule:!0}},function(e,t,n){n(6),n(50),e.exports=n(54).f("iterator")},function(e,t,n){"use strict";var r=n(7)(!0);n(10)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})}))},function(e,t,n){var r=n(8),i=n(9);e.exports=function(e){return function(t,n){var o,s,a=String(i(t)),c=r(n),u=a.length;return c<0||c>=u?e?"":void 0:(o=a.charCodeAt(c),o<55296||o>56319||c+1===u||(s=a.charCodeAt(c+1))<56320||s>57343?e?a.charAt(c):o:e?a.slice(c,c+2):s-56320+(o-55296<<10)+65536)}}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){"use strict";var r=n(11),i=n(12),o=n(28),s=n(17),a=n(29),c=n(30),u=n(46),f=n(48),d=n(47)("iterator"),l=!([].keys&&"next"in[].keys()),p="@@iterator",h="keys",m="values",v=function(){return this};e.exports=function(e,t,n,g,y,b,_){c(n,t,g);var w,S,x,C=function(e){if(!l&&e in O)return O[e];switch(e){case h:return function(){return new n(this,e)};case m:return function(){return new n(this,e)}}return function(){return new n(this,e)}},E=t+" Iterator",I=y==m,T=!1,O=e.prototype,R=O[d]||O[p]||y&&O[y],k=R||C(y),M=y?I?C("entries"):k:void 0,A="Array"==t&&O.entries||R;if(A&&(x=f(A.call(new e)),x!==Object.prototype&&x.next&&(u(x,E,!0),r||"function"==typeof x[d]||s(x,d,v))),I&&R&&R.name!==m&&(T=!0,k=function(){return R.call(this)}),r&&!_||!l&&!T&&O[d]||s(O,d,k),a[t]=k,a[E]=v,y)if(w={values:I?k:C(m),keys:b?k:C(h),entries:M},_)for(S in w)S in O||o(O,S,w[S]);else i(i.P+i.F*(l||T),t,w);return w}},function(e,t){e.exports=!0},function(e,t,n){var r=n(13),i=n(14),o=n(15),s=n(17),a=n(27),c="prototype",u=function(e,t,n){var f,d,l,p=e&u.F,h=e&u.G,m=e&u.S,v=e&u.P,g=e&u.B,y=e&u.W,b=h?i:i[t]||(i[t]={}),_=b[c],w=h?r:m?r[t]:(r[t]||{})[c];for(f in h&&(n=t),n)d=!p&&w&&void 0!==w[f],d&&a(b,f)||(l=d?w[f]:n[f],b[f]=h&&"function"!=typeof w[f]?n[f]:g&&d?o(l,r):y&&w[f]==l?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t[c]=e[c],t}(l):v&&"function"==typeof l?o(Function.call,l):l,v&&((b.virtual||(b.virtual={}))[f]=l,e&u.R&&_&&!_[f]&&s(_,f,l)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){var n=e.exports={version:"2.6.11"};"number"==typeof __e&&(__e=n)},function(e,t,n){var r=n(16);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var r=n(18),i=n(26);e.exports=n(22)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(19),i=n(21),o=n(25),s=Object.defineProperty;t.f=n(22)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return s(e,t,n)}catch(a){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(20);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},function(e,t,n){e.exports=!n(22)&&!n(23)((function(){return 7!=Object.defineProperty(n(24)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){e.exports=!n(23)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},function(e,t,n){var r=n(20),i=n(13).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,n){var r=n(20);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){e.exports=n(17)},function(e,t){e.exports={}},function(e,t,n){"use strict";var r=n(31),i=n(26),o=n(46),s={};n(17)(s,n(47)("iterator"),(function(){return this})),e.exports=function(e,t,n){e.prototype=r(s,{next:i(1,n)}),o(e,t+" Iterator")}},function(e,t,n){var r=n(19),i=n(32),o=n(44),s=n(41)("IE_PROTO"),a=function(){},c="prototype",u=function(){var e,t=n(24)("iframe"),r=o.length,i="<",s=">";t.style.display="none",n(45).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write(i+"script"+s+"document.F=Object"+i+"/script"+s),e.close(),u=e.F;while(r--)delete u[c][o[r]];return u()};e.exports=Object.create||function(e,t){var n;return null!==e?(a[c]=r(e),n=new a,a[c]=null,n[s]=e):n=u(),void 0===t?n:i(n,t)}},function(e,t,n){var r=n(18),i=n(19),o=n(33);e.exports=n(22)?Object.defineProperties:function(e,t){i(e);var n,s=o(t),a=s.length,c=0;while(a>c)r.f(e,n=s[c++],t[n]);return e}},function(e,t,n){var r=n(34),i=n(44);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t,n){var r=n(27),i=n(35),o=n(38)(!1),s=n(41)("IE_PROTO");e.exports=function(e,t){var n,a=i(e),c=0,u=[];for(n in a)n!=s&&r(a,n)&&u.push(n);while(t.length>c)r(a,n=t[c++])&&(~o(u,n)||u.push(n));return u}},function(e,t,n){var r=n(36),i=n(9);e.exports=function(e){return r(i(e))}},function(e,t,n){var r=n(37);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r=n(35),i=n(39),o=n(40);e.exports=function(e){return function(t,n,s){var a,c=r(t),u=i(c.length),f=o(s,u);if(e&&n!=n){while(u>f)if(a=c[f++],a!=a)return!0}else for(;u>f;f++)if((e||f in c)&&c[f]===n)return e||f||0;return!e&&-1}}},function(e,t,n){var r=n(8),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t,n){var r=n(8),i=Math.max,o=Math.min;e.exports=function(e,t){return e=r(e),e<0?i(e+t,0):o(e,t)}},function(e,t,n){var r=n(42)("keys"),i=n(43);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t,n){var r=n(14),i=n(13),o="__core-js_shared__",s=i[o]||(i[o]={});(e.exports=function(e,t){return s[e]||(s[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(11)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var r=n(13).document;e.exports=r&&r.documentElement},function(e,t,n){var r=n(18).f,i=n(27),o=n(47)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t,n){var r=n(42)("wks"),i=n(43),o=n(13).Symbol,s="function"==typeof o,a=e.exports=function(e){return r[e]||(r[e]=s&&o[e]||(s?o:i)("Symbol."+e))};a.store=r},function(e,t,n){var r=n(27),i=n(49),o=n(41)("IE_PROTO"),s=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?s:null}},function(e,t,n){var r=n(9);e.exports=function(e){return Object(r(e))}},function(e,t,n){n(51);for(var r=n(13),i=n(17),o=n(29),s=n(47)("toStringTag"),a="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),c=0;c<a.length;c++){var u=a[c],f=r[u],d=f&&f.prototype;d&&!d[s]&&i(d,s,u),o[u]=o.Array}},function(e,t,n){"use strict";var r=n(52),i=n(53),o=n(29),s=n(35);e.exports=n(10)(Array,"Array",(function(e,t){this._t=s(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){t.f=n(47)},function(e,t,n){e.exports={default:n(56),__esModule:!0}},function(e,t,n){n(57),n(67),n(68),n(69),e.exports=n(14).Symbol},function(e,t,n){"use strict";var r=n(13),i=n(27),o=n(22),s=n(12),a=n(28),c=n(58).KEY,u=n(23),f=n(42),d=n(46),l=n(43),p=n(47),h=n(54),m=n(59),v=n(60),g=n(63),y=n(19),b=n(20),_=n(49),w=n(35),S=n(25),x=n(26),C=n(31),E=n(64),I=n(66),T=n(61),O=n(18),R=n(33),k=I.f,M=O.f,A=E.f,P=r.Symbol,j=r.JSON,N=j&&j.stringify,L="prototype",D=p("_hidden"),B=p("toPrimitive"),U={}.propertyIsEnumerable,F=f("symbol-registry"),V=f("symbols"),W=f("op-symbols"),q=Object[L],$="function"==typeof P&&!!T.f,G=r.QObject,z=!G||!G[L]||!G[L].findChild,H=o&&u((function(){return 7!=C(M({},"a",{get:function(){return M(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=k(q,t);r&&delete q[t],M(e,t,n),r&&e!==q&&M(q,t,r)}:M,K=function(e){var t=V[e]=C(P[L]);return t._k=e,t},J=$&&"symbol"==typeof P.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof P},Y=function(e,t,n){return e===q&&Y(W,t,n),y(e),t=S(t,!0),y(n),i(V,t)?(n.enumerable?(i(e,D)&&e[D][t]&&(e[D][t]=!1),n=C(n,{enumerable:x(0,!1)})):(i(e,D)||M(e,D,x(1,{})),e[D][t]=!0),H(e,t,n)):M(e,t,n)},X=function(e,t){y(e);var n,r=v(t=w(t)),i=0,o=r.length;while(o>i)Y(e,n=r[i++],t[n]);return e},Z=function(e,t){return void 0===t?C(e):X(C(e),t)},Q=function(e){var t=U.call(this,e=S(e,!0));return!(this===q&&i(V,e)&&!i(W,e))&&(!(t||!i(this,e)||!i(V,e)||i(this,D)&&this[D][e])||t)},ee=function(e,t){if(e=w(e),t=S(t,!0),e!==q||!i(V,t)||i(W,t)){var n=k(e,t);return!n||!i(V,t)||i(e,D)&&e[D][t]||(n.enumerable=!0),n}},te=function(e){var t,n=A(w(e)),r=[],o=0;while(n.length>o)i(V,t=n[o++])||t==D||t==c||r.push(t);return r},ne=function(e){var t,n=e===q,r=A(n?W:w(e)),o=[],s=0;while(r.length>s)!i(V,t=r[s++])||n&&!i(q,t)||o.push(V[t]);return o};$||(P=function(){if(this instanceof P)throw TypeError("Symbol is not a constructor!");var e=l(arguments.length>0?arguments[0]:void 0),t=function(n){this===q&&t.call(W,n),i(this,D)&&i(this[D],e)&&(this[D][e]=!1),H(this,e,x(1,n))};return o&&z&&H(q,e,{configurable:!0,set:t}),K(e)},a(P[L],"toString",(function(){return this._k})),I.f=ee,O.f=Y,n(65).f=E.f=te,n(62).f=Q,T.f=ne,o&&!n(11)&&a(q,"propertyIsEnumerable",Q,!0),h.f=function(e){return K(p(e))}),s(s.G+s.W+s.F*!$,{Symbol:P});for(var re="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ie=0;re.length>ie;)p(re[ie++]);for(var oe=R(p.store),se=0;oe.length>se;)m(oe[se++]);s(s.S+s.F*!$,"Symbol",{for:function(e){return i(F,e+="")?F[e]:F[e]=P(e)},keyFor:function(e){if(!J(e))throw TypeError(e+" is not a symbol!");for(var t in F)if(F[t]===e)return t},useSetter:function(){z=!0},useSimple:function(){z=!1}}),s(s.S+s.F*!$,"Object",{create:Z,defineProperty:Y,defineProperties:X,getOwnPropertyDescriptor:ee,getOwnPropertyNames:te,getOwnPropertySymbols:ne});var ae=u((function(){T.f(1)}));s(s.S+s.F*ae,"Object",{getOwnPropertySymbols:function(e){return T.f(_(e))}}),j&&s(s.S+s.F*(!$||u((function(){var e=P();return"[null]"!=N([e])||"{}"!=N({a:e})||"{}"!=N(Object(e))}))),"JSON",{stringify:function(e){var t,n,r=[e],i=1;while(arguments.length>i)r.push(arguments[i++]);if(n=t=r[1],(b(t)||void 0!==e)&&!J(e))return g(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!J(t))return t}),r[1]=t,N.apply(j,r)}}),P[L][B]||n(17)(P[L],B,P[L].valueOf),d(P,"Symbol"),d(Math,"Math",!0),d(r.JSON,"JSON",!0)},function(e,t,n){var r=n(43)("meta"),i=n(20),o=n(27),s=n(18).f,a=0,c=Object.isExtensible||function(){return!0},u=!n(23)((function(){return c(Object.preventExtensions({}))})),f=function(e){s(e,r,{value:{i:"O"+ ++a,w:{}}})},d=function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,r)){if(!c(e))return"F";if(!t)return"E";f(e)}return e[r].i},l=function(e,t){if(!o(e,r)){if(!c(e))return!0;if(!t)return!1;f(e)}return e[r].w},p=function(e){return u&&h.NEED&&c(e)&&!o(e,r)&&f(e),e},h=e.exports={KEY:r,NEED:!1,fastKey:d,getWeak:l,onFreeze:p}},function(e,t,n){var r=n(13),i=n(14),o=n(11),s=n(54),a=n(18).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||a(t,e,{value:s.f(e)})}},function(e,t,n){var r=n(33),i=n(61),o=n(62);e.exports=function(e){var t=r(e),n=i.f;if(n){var s,a=n(e),c=o.f,u=0;while(a.length>u)c.call(e,s=a[u++])&&t.push(s)}return t}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){var r=n(37);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(35),i=n(65).f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(e){try{return i(e)}catch(t){return s.slice()}};e.exports.f=function(e){return s&&"[object Window]"==o.call(e)?a(e):i(r(e))}},function(e,t,n){var r=n(34),i=n(44).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t,n){var r=n(62),i=n(26),o=n(35),s=n(25),a=n(27),c=n(21),u=Object.getOwnPropertyDescriptor;t.f=n(22)?u:function(e,t){if(e=o(e),t=s(t,!0),c)try{return u(e,t)}catch(n){}if(a(e,t))return i(!r.f.call(e,t),e[t])}},function(e,t){},function(e,t,n){n(59)("asyncIterator")},function(e,t,n){n(59)("observable")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(71);t.default=r.util},function(e,t,n){"use strict";var r=window.emedia=window.emedia||{},i=r.util=n(72),o=n(146);if(r.config=function(e){for(var t in e=i.extend({},e),e)r.config[t]=e[t],"logLevel"===t&&(r.LOG_LEVEL=e[t]);r.config.loglastConfrCount&&!r._logContext&&(r._logContext=new Array(r.config.loglastConfrCount),r._logContextIndex=-1)},r.config({autoSub:!0,onlyEnter:!1,reconnect:13,reconnectDelay:3e3,getCopyIntervalMillis:3e4,checkConnectIntervalMillis:1e3,iceRebuildCount:3,iceRebuildIntervalMillis:500,enterTimeout:2e4,useRTCCfgIfServerReturn:!1,forceUseRTCCfgIfServerReturnWhenP2P:!0,allowRepeatAudioMixerPublish:!1,logVolumeWhenInstantGE:.5,getMediaMeterIntervalMillis:400,_useRequestAnimationFrame:!1,meterWithTrackAudioLevel:!1,judgeTalkingByInstantGE:.05,_printSoundData:!1,trackBufferSize:20,allowSendWhenLessThan:4,disableTrack:!1,ctrlCheckIntervalMillis:1e4,ctrlTimeoutMillis:3e4,_printDebugStats:!1,statsSeconds:10,remainLastStatsCount:120,loglastConfrCount:2,loglastStoreArray:!0,consoleLogger:!0,printStatsWhenPCClose:!0,rebuildPeerConnectionWhenNetworkChanaged:!0,useDeployMore:!1,useDTX:!0,uploadStats:!0,liveCfgs:[],rtcStatsTypeMath:function(e,t){switch(e.type){case"remote-candidate":case"local-candidate":case"track":case"stream":case"inbound-rtp":case"outbound-rtp":case"transport":return!0}return!1}}),i.logger.count(),function(){var e=n(147).default;if(r.browser=e.__browser,r.browserVersion=e.__browserVersion,void 0===r.browser)throw"Not discern browser. may require adapter error. eg. it.default"}(),i.logger.info("Current browser",r.browser,r.browserVersion),r.AudioContext=window.AudioContext||window.webkitAudioContext,r.config.getMediaMeterIntervalMillis){try{"function"===typeof r.AudioContext?(r.__audioContext=new r.AudioContext,r.__usingWebAudio=!0):r.__usingWebAudio=!1}catch(f){r.__usingWebAudio=!1}r.__usingWebAudio&&"suspended"===r.__audioContext.state&&o((function(){var e=function e(){"suspended"===r.__audioContext.state&&r.__audioContext.resume(),i.logger.warn("AudioContext state suspended ->",r.__audioContext.state),setTimeout((function(){"running"===r.__audioContext.state&&(document.body.removeEventListener("touchend",e,!1),document.body.removeEventListener("click",e,!1))}),0)};document.body.addEventListener("touchend",e,!1),document.body.addEventListener("click",e,!1)})),r.__usingWebAudio||console.warn("'new AudioContext()' failed. can not know who talking."),r.__audioContext&&"suspended"===r.__audioContext.state&&console.warn("audioContext.state is suspended. can not know who talking. You can resume() emedia.__audioContext, but only in response to a tap.")}if(window.requestAnimationFrame&&r.config._useRequestAnimationFrame?r.requestAnimationFrame=function(e){window.requestAnimationFrame(e)}:r.requestAnimationFrame=function(e,t){return setTimeout(e,t||r.config.getMediaMeterIntervalMillis)},window.cancelAnimationFrame&&r.config._useRequestAnimationFrame?r.cancelAnimationFrame=function(e){window.cancelAnimationFrame(e)}:r.cancelAnimationFrame=function(e){clearTimeout(e)},r.isWifi=function(){try{var e=!0,t=window.navigator.userAgent,n=window.navigator.connection||window.navigator.mozConnection||window.navigator.webkitConnection;if(/MicroMessenger/.test(t)){if(t.indexOf("WIFI")>=0)return!0;e=!1}else if(n){var r=n.type;"wifi"!==r&&"2"!==r&&"unknown"!==r&&(e=!1)}return e}catch(f){return!1}},r.stopAudioTracks=function(e){e&&e.getAudioTracks().forEach((function(t){t.stop(),i.logger.info("Media stream stop audio track. stream =",e.id,"track =",t.id,t.kind)}))},r.stopAndRemoveAudioTracks=function(e){var t=[];e&&e.getAudioTracks().forEach((function(n){n.stop(),t.push(n),i.logger.info("Media stream stop and remove audio tracks. stream =",e.id,"track =",n.id,n.kind)})),i.forEach(t,(function(t,n){e.removeTrack(n)}))},r.stopTracks=function(e){try{var t=function(){e.getTracks().forEach((function(t){t.stop(),i.logger.info("Media stream stop track. stream =",e.id," track =",t.id,t.kind)})),e._bindAttendee&&(i.removeAttribute(e._bindAttendee._openedRtcMediaStreams,e.id),e._bindAttendee=null),i.logger.info("stream tracks stoped. it ",e.id)};if(!e||!1===e.active)return void i.logger.debug("stream tracks had been stoped. it ",e&&e.id);t()}catch(f){i.logger.error(f)}},r.enableVideoTracks=function(e,t){e&&e.getVideoTracks().forEach((function(n){if("function"===typeof n.enable)return n.enable(),i.logger.info("Media stream enable video track. stream =",e.id,"track =",n.kind,n.enabled,n.id),void(n.enabled===t||n.enable(t));n.enabled===t||(n.enabled=t),i.logger.info("Media stream enable video track. stream =",e.id,"track =",n.kind,n.enabled,n.id)}))},r.enableAudioTracks=function(e,t){e&&e.getAudioTracks().forEach((function(n){if("function"===typeof n.enable)return n.enable(),i.logger.info("Media stream enable audio track. stream =",e.id,"track =",n.kind,n.enabled,n.id),void(n.enabled===t||n.enable(t));n.enabled===t||(n.enabled=t),i.logger.info("Media stream enable audio track. stream =",e.id,"track =",n.kind,n.enabled,n.id)}))},r.hasEnabledTracks=function(e){if(!e||"function"!==typeof e.getAudioTracks)return!1;if(!e.active)return!1;var t=e.getAudioTracks();if(0===t.length)return!1;for(var n in t)if("function"===typeof t[n].enable&&t[n].enable(),t[n].enabled)return!0;return!1},r.genReportName=function(){var e=r._lastSetupDate||new Date;return(r._lastSetupTktId||r._lastSetupConfr)+"_"+r._lastSetupMemName+"_"+e.getTime()+".log"},r.getReportUploadUrl=function(e,t,n){var r=new XMLHttpRequest;r.open(e,t,!0),r.addEventListener("load",(function(e){n&&n(e)}),!1),r.send(null)},r.uploadReport=function(e,t,n,o,s,a){var c=r.genReport();if(c){"function"===typeof n&&(a=s,s=o,o=n,n=void 0);var u=new Blob([c],{type:"text/plain"}),f=new FormData;f.append(e,u,e),n&&"function"===typeof f.set&&i.forEach(n,(function(e,t){f.set(e,t)}));var d=new XMLHttpRequest;d.open("POST",t,!0),d.setRequestHeader("X-File-Name",e),a&&a(d),d.addEventListener("load",l,!1),d.send(f),console.info("log begin upload. ",e," > ",t)}else s&&s("not logs");function l(n){console.info("log begin upload. result = ",n.currentTarget.status,e," > ",t),200===n.currentTarget.status?o&&o(n):s&&s(n)}},r.genReport=function(){if(r._logContext&&r._logContext instanceof Array&&!("undefined"===typeof r._logContextIndex||r._logContextIndex<0)){var e=0,t=r._logContextIndex;r._logContextIndex>=r._logContext.length&&(e=r._logContextIndex-r._logContext.length+1);for(var n="",i=e;i<=t;i++){var o=i%r._logContext.length,s=r._logContext[o];n+=s.join("\r\n")+"\r\n"}return r._logContext.loadlogs&&r._logContext.loadlogs instanceof Array&&(n+="-------------------------------------------------------------\r\n",n+=r._logContext.loadlogs.join("\r\n")+"\r\n"),n}},r.fileReport=function(e){var t=r.genReport();if(t){var n=encodeURIComponent(t),i=document.createElement("a");i.style.display="none",i.download=e||"emedia-"+(new Date).toJSON()+".log",i.href="data:text/plain;charset=utf-8,"+n,document.body.appendChild(i),i.click(),i.parentNode.removeChild(i)}},navigator.mediaDevices){var s=navigator.mediaDevices.getSupportedConstraints();i.logger.info("Supported constraints",s)}r.config({globalConstraints:{}});var a=n(200),c=n(208);r.Webrtc=n(213),r.Service=a,r.P2P=n(223),r.XService=a,r.XServiceWithP2P=r.P2P(a),r.mgr=n(224).outer,r.ctrl=n(430),r.CompositeCanvas=n(436),r.pannel||(r.pannel={}),r.pannel.DefaultMouseTrack=n(220),r.pannel.MouseTrack=n(221),r.pannel.KeyboardTrack=n(437);var u=r.PCStats=n(219);if(r.helper=r.helper||{},r.helper.PCStats=u,r.helper.pcstats=u.echo,r.helper.intervalPcstats=u.intervalEcho,r.helper.inboundAudio=u.inboundAudio,r.helper.inboundVideo=u.inboundVideo,r.helper.outboundAudio=u.outboundAudio,r.helper.outboundVideo=u.outboundVideo,r.event=c,r.LOG_LEVEL=0,r.isFirefox="firefox"===r.browser,r.isChrome="chrome"===r.browser,r.isSafari="safari"===r.browser,r.isEdge="edge"===r.browser,r.isElectron=/Electron/.test(navigator.userAgent),r.isElectron)try{n(438)}catch(f){i.logger.error(f)}r.youInSomeBrowsers=function(){if(r.isSafari){var e=new RegExp("(Version)/([0-9.]+)","i"),t=navigator.userAgent.match(e);if(null!=t){var n=unescape(t[2]);return n=parseInt(n),n<13}}return!1},r.replaceIpAndPortOfCandidate=function(e,t,n){var r="string"===typeof e?e:e.candidate;return r=r.replace(/(candidate:\d+\s+\d+\s+udp\s+\d+\s+)([\d\.]+)\s+(\d+)(\s+.*)/g,(function(e,r,i,o,s){return r+t+" "+n+s})),e.candidate?(e=i.extend(!0,{},e),e.candidate=r):e=r,e},r.replaceIpAndPort=function(e,t){if("function"!==typeof t)return e;var n="string"===typeof e?e:e.candidate;return n=n.replace(/(candidate:\d+\s+\d+\s+udp\s+\d+\s+)([\d\.]+)\s+(\d+)(\s+.*)/g,(function(e,n,r,i,o){var s=t(r,i);return"string"===typeof s?(s=s.replace(":"," "),n+s+o):n+r+" "+i+o})),e.candidate?(e=i.extend(!0,{},e),e.candidate=n):e=n,e},r.replaceURL=function(e,t){return"function"!==typeof t?e:e.replace(/([^:\/?&#=]+):\/\/([^\/:?#]+)(:\d+)?(\/[^?#]*)?(\?[^\/#]*)?(#[^\/?]*)?/g,(function(n,r,i,o,s,a,c){o&&(o=o.substring(1));var u=t(n,r,i,o,s,a,c);if(!u)return e;if("string"===typeof u)return u;var f=u.protocol||r,d=u.host||i,l=u.port||o,p=u.path||s,h=u.query||a,m=u.fragment||c;return f+"://"+d+(l?":"+l:"")+(p||"")+(h||"")+(m||"")}))},r.requireTrustBeforeJoin=function(){return!1},r.isWebRTC=window.RTCPeerConnection&&/^https\:$/.test(window.location.protocol),(r.isChrome||r.isSafari)&&(r.supportPRAnswer=!0),r.supportPRAnswer=!1,r.config({baseAcptOps:[102,104,105,106,107,300,302,303,304,301,204,206,400,401,1001,100221,100222,100223,100224,100201,100202,100203]}),r.config({clientType:"WEB",version:"3.2.2",userAgent:navigator.userAgent,acptOps:[100230,100205,1003,1004]}),e.exports=r},function(module,exports,__webpack_require__){"use strict";var _typeof2=__webpack_require__(73),_typeof3=_interopRequireDefault(_typeof2),_getPrototypeOf=__webpack_require__(140),_getPrototypeOf2=_interopRequireDefault(_getPrototypeOf),_stringify=__webpack_require__(144),_stringify2=_interopRequireDefault(_stringify);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function Util(){}(function(){var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");Math.uuid=function(t,n){var r,i,o=e,s=[];if(n=n||o.length,t)for(r=0;r<t;r++)s[r]=o[0|Math.random()*n];else for(s[8]=s[13]=s[18]=s[23]="-",s[14]="4",r=0;r<36;r++)s[r]||(i=0|16*Math.random(),s[r]=o[19==r?3&i|8:i]);return s.join("")},Math.uuidFast=function(){for(var t,n=e,r=new Array(36),i=0,o=0;o<36;o++)8==o||13==o||18==o||23==o?r[o]="-":14==o?r[o]="4":(i<=2&&(i=33554432+16777216*Math.random()|0),t=15&i,i>>=4,r[o]=n[19==o?3&t|8:t]);return r.join("")},Math.uuidCompact=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)}))}})(),String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.indexOf(e,t)===t});var Logger=function(e){var t=this,n={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,FATAL:5},r=["TRACE","DEBUG","INFO","WARN","ERROR","FATAL"];function i(e,t){try{a(e,t)}catch(n){if(console){if(console.error)return void console.error(n);if(console.log)return void console.log(n)}throw n}}function o(){if(!(emedia._logContextIndex<0)&&emedia._logContext&&emedia._logContext instanceof Array){var e=emedia._logContextIndex%emedia._logContext.length,t=emedia._logContext[e];t&&t instanceof Array||(t=emedia._logContext[e]=[]);var n=[];n.push(emedia._logContextIndex);var r,i=new Date;"function"===typeof i.toLocaleString?n.push(i.toLocaleString()):i.toJSON?n.push(i.toJSON()):i.toISOString?n.push(i.toISOString()):n.push(i+"");for(var o=0;o<arguments.length;o++){var s=arguments[o];"string"!==typeof s?s?"string"!==typeof s.message?"function"!==typeof s.message?"string"!==typeof s.stack?s.event&&"function"===typeof s.event.toString||s.event&&"function"===typeof s.event.toString?n.push(s.event.toString()):"string"!==typeof s.candidate?"string"!==typeof s.sdp?isPlainObject(s)?n.push((0,_stringify2.default)(s)):n.push(String(s)):n.push(s.sdp):n.push(s.candidate):n.push(s.stack):n.push(s.message()):n.push(s.message):n.push(s):n.push(s)}if(emedia.config.loglastStoreArray&&t.push(r=n.join(" ")),"function"===typeof emedia.config.onSdkLog)try{r||(r=n.join(" ")),emedia.config.onSdkLog(r)}catch(a){console.error(a)}}}function s(){try{o.apply(null,arguments)}catch(e){console.warn(e)}}function a(n,r){if(!(emedia&&emedia.LOG_LEVEL&&n<emedia.LOG_LEVEL)){var i=[];i.push(n),e&&i.push(e);for(var o=0;o<r.length;o++)i.push(r[o]&&r[o]._toString?r[o]._toString.call(r[o]):r[o]);t._log.apply(t,i)}}this._log=function(){var e=arguments[0];e=arguments[0]=r[e],emedia._logContext&&s.apply(null,arguments),!0===emedia.config.consoleLogger&&(emedia&&emedia.isElectron?console.log.apply(console,arguments):console)},this.log=function(){this._log&&i(n.INFO,arguments)},this.trace=function(){this._log&&i(n.TRACE,arguments)},this.debug=function(){this._log&&i(n.DEBUG,arguments)},this.info=function(){this._log&&i(n.INFO,arguments)},this.warn=function(){this._log&&i(n.WARN,arguments)},this.error=function(){this._log&&i(n.ERROR,arguments)},this.fatal=function(){this._log&&i(n.FATAL,arguments)}};Logger.prototype.count=function(){if(emedia._logContext){emedia._logContextIndex++;var e=emedia._logContextIndex%emedia._logContext.length;0===e&&0!==emedia._logContextIndex&&(emedia._logContext.loadlogs=emedia._logContext[e]),emedia._logContext[e]=[]}},Util.prototype.logger=new Logger,Util.prototype.tagLogger=function(e){return new Logger(e)},Util.prototype.parseJSON=function(e){return JSON.parse(e)};var stringifyJSON=Util.prototype.stringifyJSON=function(e){return(0,_stringify2.default)(e)},class2type={},toString=class2type.toString,hasOwn=class2type.hasOwnProperty,fnToString=hasOwn.toString,ObjectFunctionString=fnToString.call(Object),isPlainObject=Util.prototype.isPlainObject=function(e){var t,n;return!(!e||"[object Object]"!==toString.call(e)||"<JSAPI-Auto Javascript Object>"===e.toString()||"[object IFBComJavascriptObject]"===e.toString())&&(t=(0,_getPrototypeOf2.default)(e),!t||(n=hasOwn.call(t,"constructor")&&t.constructor,"function"===typeof n&&fnToString.call(n)===ObjectFunctionString))};Util.prototype.isArray=Array.isArray,Util.prototype.isEmptyObject=function(e){var t;for(t in e)return!1;return!0},Util.prototype.type=function(e){return null==e?e+"":"object"===("undefined"===typeof e?"undefined":(0,_typeof3.default)(e))||"function"===typeof e?class2type[toString.call(e)]||"object":"undefined"===typeof e?"undefined":(0,_typeof3.default)(e)},Util.prototype.extend=function(){var e,t,n,r,i,o,s=this,a=arguments[0]||{},c=1,u=arguments.length,f=!1;for("boolean"===typeof a&&(f=a,a=arguments[c]||{},c++),"object"===("undefined"===typeof a?"undefined":(0,_typeof3.default)(a))||s.isFunction(a)||(a={}),c===u&&(a=this,c--);c<u;c++)if(null!=(e=arguments[c]))for(t in e)n=a[t],r=e[t],a!==r&&(f&&r&&(s.isPlainObject(r)||(i=s.isArray(r)))?(i?(i=!1,o=n&&s.isArray(n)?n:[]):o=n&&s.isPlainObject(n)?n:{},a[t]=s.extend(f,o,r)):void 0!==r&&(a[t]=r));return a},Util.prototype.removeAttribute=function(e,t){if(null!==e&&void 0!==e){var n=e[t];return delete e[t],n}},Util.prototype.prototypeExtend_000=Util.prototype.classExtend=function(){var e,t=this;function n(){for(var e=0;e<arguments.length;e++){var n=arguments[e]||{};t.extend(!0,this,n)}this.__init__&&this.__init__.apply(this,arguments)}for(var r=0;r<arguments.length;r++){var i=arguments[r]||{};"function"===typeof i?e?(i.constructor=e,i.__proto__=e.prototype):e=i:t.extend(!0,n.prototype,i)}return e&&(n.prototype.__proto__=e.prototype),e&&(n.prototype.constructor=e),n.extend||(n.extend=function(e){return t.prototypeExtend(n,e)}),n},Util.prototype.prototypeExtend=Util.prototype.classExtend=function(){var e=this;function t(){for(var t=0;t<arguments.length;t++){var n=arguments[t]||{};e.extend(!0,this,n)}this.__init__&&this.__init__.apply(this,arguments)}for(var n=0;n<arguments.length;n++){var r=arguments[n]||{};"function"===typeof r&&(r=r.prototype),e.extend(!0,t.prototype,r)}return t.extend||(t.extend=function(n){return e.prototypeExtend(t,n)}),t},Util.prototype.hasLocalStorage=function(e){return null!=localStorage.getItem(e)&&"{}"!=localStorage.getItem(e)},Util.prototype.toggleClass=function(e,t){e.hasClass(t)?e.removeClass(t):e.addClass(t)},Util.prototype.setCookie=function(e,t,n){var r=new Date;r.setTime(r.getTime()+60*n*60*1e3),document.cookie=e+"="+escape(t)+";expires="+r.toGMTString()},Util.prototype.getCookie=function(e){var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return null!=t?unescape(t[2]):null},Util.prototype.parseURL=function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=window.location.search.substr(1).match(t);return null!=n?unescape(n[2]):null},Util.prototype.forEach=function(e,t){if(e&&(!this.isArray(e)||0!==e.length)&&(void 0===e.length||0!==e.length))if(e.length)for(var n=0;n<e.length;n++)t(n,e[n]);else if(e&&!this.isEmptyObject(e)){e=e||{};var r=this.extend(!1,{},e);for(var i in r)t(i,e[i])}},Util.prototype.isInt=function(e){return Number(e)===e&&e%1===0},Util.prototype.isFloat=function(e){return Number(e)===e&&e%1!==0},Util.prototype.list=function(){var e=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);return e},Util.prototype.addEvent=function(e,t,n){if(e.attachEvent)return e.attachEvent("on"+t,n);if(e.addEventListener)return e.addEventListener(t,n,!1);throw"Handler could not be attached"},Util.prototype.removeEvent=function(e,t,n){if(e.detachEvent)return e.detachEvent("on"+t,n);if(e.removeEventListener)return e.removeEventListener(t,n,!1);throw"Handler could not be removed"},Util.prototype.stopEvent=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,e.preventDefault?e.preventDefault():e.returnValue=!1},Util.prototype.getDomPageRect=function(e){var t=e.getBoundingClientRect();return{x:t.left+(window.pageXOffset||window.document.documentElement.scrollLeft),y:t.top+(window.pageYOffset||window.document.documentElement.scrollTop),width:t.width||e.offsetWidth,height:t.height||e.offsetHeight}},Util.prototype.getEventElementXY=function(e,t,n){e=e||window.event;var r,i,o=e.changedTouches?e.changedTouches[0]:e.touches?e.touches[0]:e;void 0!=o.pageX&&void 0!=o.pageY?(r=o.pageX,i=o.pageY):void 0!=o.clientX&&void 0!=o.clientY&&(r=o.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,i=o.clientY+document.body.scrollTop+document.documentElement.scrollTop);var s=this.getDomPageRect(t),a=r-s.x,c=i-s.y;return(0===n||void 0==n)&&(n=1),{x:Math.round(Math.max(Math.min(a,s.width-1),0)/n),y:Math.round(Math.max(Math.min(c,s.height-1),0)/n),width:Math.round(s.width/n),height:Math.round(s.height/n),realX:a,realY:c}},Util.prototype.layoutEngine=function(){var e={presto:!!window.opera,trident:!!window.ActiveXObject&&(window.XMLHttpRequest?document.querySelectorAll?6:5:4),webkit:function(){try{return!navigator.taintEnabled&&(i.Features.xpath?i.Features.query?525:420:419)}catch(e){return!1}}(),gecko:!(!document.getBoxObjectFor&&null==window.mozInnerScreenX)&&(document.getElementsByClassName?19:18)};return e.webkit&&(e.webkit=function(e){var t=(navigator.userAgent.match(/WebKit\/([0-9\.]*) /)||["",e])[1];return parseFloat(t,10)}(e)),e}(),Util.prototype.targetDOM="object"===("undefined"===typeof HTMLElement?"undefined":(0,_typeof3.default)(HTMLElement))?function(e){return e instanceof HTMLElement}:function(e){return e&&"object"===("undefined"===typeof e?"undefined":(0,_typeof3.default)(e))&&1===e.nodeType&&"string"===typeof e.nodeName},Util.prototype.cloneCSS=function(e,t){var n=window.getComputedStyle&&window.getComputedStyle(e,null)||e.currentStyle;for(var r in n){var i=n[r];/^[a-z]/i.test(r)&&[null,"",void 0].indexOf(i)<0&&(t.style[r]=i)}},Util.prototype.canYield=function(){try{return eval("!!Function('yield true;')().next()")}catch(e){return!1}}(),module.exports=new Util},function(e,t,n){"use strict";t.__esModule=!0;var r=n(74),i=c(r),o=n(125),s=c(o),a="function"===typeof s.default&&"symbol"===typeof i.default?function(e){return typeof e}:function(e){return e&&"function"===typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":typeof e};function c(e){return e&&e.__esModule?e:{default:e}}t.default="function"===typeof s.default&&"symbol"===a(i.default)?function(e){return"undefined"===typeof e?"undefined":a(e)}:function(e){return e&&"function"===typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":"undefined"===typeof e?"undefined":a(e)}},function(e,t,n){e.exports={default:n(75),__esModule:!0}},function(e,t,n){n(76),n(120),e.exports=n(124).f("iterator")},function(e,t,n){"use strict";var r=n(77)(!0);n(80)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})}))},function(e,t,n){var r=n(78),i=n(79);e.exports=function(e){return function(t,n){var o,s,a=String(i(t)),c=r(n),u=a.length;return c<0||c>=u?e?"":void 0:(o=a.charCodeAt(c),o<55296||o>56319||c+1===u||(s=a.charCodeAt(c+1))<56320||s>57343?e?a.charAt(c):o:e?a.slice(c,c+2):s-56320+(o-55296<<10)+65536)}}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){"use strict";var r=n(81),i=n(82),o=n(98),s=n(87),a=n(99),c=n(100),u=n(116),f=n(118),d=n(117)("iterator"),l=!([].keys&&"next"in[].keys()),p="@@iterator",h="keys",m="values",v=function(){return this};e.exports=function(e,t,n,g,y,b,_){c(n,t,g);var w,S,x,C=function(e){if(!l&&e in O)return O[e];switch(e){case h:return function(){return new n(this,e)};case m:return function(){return new n(this,e)}}return function(){return new n(this,e)}},E=t+" Iterator",I=y==m,T=!1,O=e.prototype,R=O[d]||O[p]||y&&O[y],k=R||C(y),M=y?I?C("entries"):k:void 0,A="Array"==t&&O.entries||R;if(A&&(x=f(A.call(new e)),x!==Object.prototype&&x.next&&(u(x,E,!0),r||"function"==typeof x[d]||s(x,d,v))),I&&R&&R.name!==m&&(T=!0,k=function(){return R.call(this)}),r&&!_||!l&&!T&&O[d]||s(O,d,k),a[t]=k,a[E]=v,y)if(w={values:I?k:C(m),keys:b?k:C(h),entries:M},_)for(S in w)S in O||o(O,S,w[S]);else i(i.P+i.F*(l||T),t,w);return w}},function(e,t){e.exports=!0},function(e,t,n){var r=n(83),i=n(84),o=n(85),s=n(87),a=n(97),c="prototype",u=function(e,t,n){var f,d,l,p=e&u.F,h=e&u.G,m=e&u.S,v=e&u.P,g=e&u.B,y=e&u.W,b=h?i:i[t]||(i[t]={}),_=b[c],w=h?r:m?r[t]:(r[t]||{})[c];for(f in h&&(n=t),n)d=!p&&w&&void 0!==w[f],d&&a(b,f)||(l=d?w[f]:n[f],b[f]=h&&"function"!=typeof w[f]?n[f]:g&&d?o(l,r):y&&w[f]==l?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t[c]=e[c],t}(l):v&&"function"==typeof l?o(Function.call,l):l,v&&((b.virtual||(b.virtual={}))[f]=l,e&u.R&&_&&!_[f]&&s(_,f,l)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){var n=e.exports={version:"2.6.10"};"number"==typeof __e&&(__e=n)},function(e,t,n){var r=n(86);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var r=n(88),i=n(96);e.exports=n(92)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(89),i=n(91),o=n(95),s=Object.defineProperty;t.f=n(92)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return s(e,t,n)}catch(a){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(90);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},function(e,t,n){e.exports=!n(92)&&!n(93)((function(){return 7!=Object.defineProperty(n(94)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){e.exports=!n(93)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},function(e,t,n){var r=n(90),i=n(83).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,n){var r=n(90);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){e.exports=n(87)},function(e,t){e.exports={}},function(e,t,n){"use strict";var r=n(101),i=n(96),o=n(116),s={};n(87)(s,n(117)("iterator"),(function(){return this})),e.exports=function(e,t,n){e.prototype=r(s,{next:i(1,n)}),o(e,t+" Iterator")}},function(e,t,n){var r=n(89),i=n(102),o=n(114),s=n(111)("IE_PROTO"),a=function(){},c="prototype",u=function(){var e,t=n(94)("iframe"),r=o.length,i="<",s=">";t.style.display="none",n(115).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write(i+"script"+s+"document.F=Object"+i+"/script"+s),e.close(),u=e.F;while(r--)delete u[c][o[r]];return u()};e.exports=Object.create||function(e,t){var n;return null!==e?(a[c]=r(e),n=new a,a[c]=null,n[s]=e):n=u(),void 0===t?n:i(n,t)}},function(e,t,n){var r=n(88),i=n(89),o=n(103);e.exports=n(92)?Object.defineProperties:function(e,t){i(e);var n,s=o(t),a=s.length,c=0;while(a>c)r.f(e,n=s[c++],t[n]);return e}},function(e,t,n){var r=n(104),i=n(114);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t,n){var r=n(97),i=n(105),o=n(108)(!1),s=n(111)("IE_PROTO");e.exports=function(e,t){var n,a=i(e),c=0,u=[];for(n in a)n!=s&&r(a,n)&&u.push(n);while(t.length>c)r(a,n=t[c++])&&(~o(u,n)||u.push(n));return u}},function(e,t,n){var r=n(106),i=n(79);e.exports=function(e){return r(i(e))}},function(e,t,n){var r=n(107);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r=n(105),i=n(109),o=n(110);e.exports=function(e){return function(t,n,s){var a,c=r(t),u=i(c.length),f=o(s,u);if(e&&n!=n){while(u>f)if(a=c[f++],a!=a)return!0}else for(;u>f;f++)if((e||f in c)&&c[f]===n)return e||f||0;return!e&&-1}}},function(e,t,n){var r=n(78),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t,n){var r=n(78),i=Math.max,o=Math.min;e.exports=function(e,t){return e=r(e),e<0?i(e+t,0):o(e,t)}},function(e,t,n){var r=n(112)("keys"),i=n(113);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t,n){var r=n(84),i=n(83),o="__core-js_shared__",s=i[o]||(i[o]={});(e.exports=function(e,t){return s[e]||(s[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(81)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var r=n(83).document;e.exports=r&&r.documentElement},function(e,t,n){var r=n(88).f,i=n(97),o=n(117)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t,n){var r=n(112)("wks"),i=n(113),o=n(83).Symbol,s="function"==typeof o,a=e.exports=function(e){return r[e]||(r[e]=s&&o[e]||(s?o:i)("Symbol."+e))};a.store=r},function(e,t,n){var r=n(97),i=n(119),o=n(111)("IE_PROTO"),s=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?s:null}},function(e,t,n){var r=n(79);e.exports=function(e){return Object(r(e))}},function(e,t,n){n(121);for(var r=n(83),i=n(87),o=n(99),s=n(117)("toStringTag"),a="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),c=0;c<a.length;c++){var u=a[c],f=r[u],d=f&&f.prototype;d&&!d[s]&&i(d,s,u),o[u]=o.Array}},function(e,t,n){"use strict";var r=n(122),i=n(123),o=n(99),s=n(105);e.exports=n(80)(Array,"Array",(function(e,t){this._t=s(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){t.f=n(117)},function(e,t,n){e.exports={default:n(126),__esModule:!0}},function(e,t,n){n(127),n(137),n(138),n(139),e.exports=n(84).Symbol},function(e,t,n){"use strict";var r=n(83),i=n(97),o=n(92),s=n(82),a=n(98),c=n(128).KEY,u=n(93),f=n(112),d=n(116),l=n(113),p=n(117),h=n(124),m=n(129),v=n(130),g=n(133),y=n(89),b=n(90),_=n(119),w=n(105),S=n(95),x=n(96),C=n(101),E=n(134),I=n(136),T=n(131),O=n(88),R=n(103),k=I.f,M=O.f,A=E.f,P=r.Symbol,j=r.JSON,N=j&&j.stringify,L="prototype",D=p("_hidden"),B=p("toPrimitive"),U={}.propertyIsEnumerable,F=f("symbol-registry"),V=f("symbols"),W=f("op-symbols"),q=Object[L],$="function"==typeof P&&!!T.f,G=r.QObject,z=!G||!G[L]||!G[L].findChild,H=o&&u((function(){return 7!=C(M({},"a",{get:function(){return M(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=k(q,t);r&&delete q[t],M(e,t,n),r&&e!==q&&M(q,t,r)}:M,K=function(e){var t=V[e]=C(P[L]);return t._k=e,t},J=$&&"symbol"==typeof P.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof P},Y=function(e,t,n){return e===q&&Y(W,t,n),y(e),t=S(t,!0),y(n),i(V,t)?(n.enumerable?(i(e,D)&&e[D][t]&&(e[D][t]=!1),n=C(n,{enumerable:x(0,!1)})):(i(e,D)||M(e,D,x(1,{})),e[D][t]=!0),H(e,t,n)):M(e,t,n)},X=function(e,t){y(e);var n,r=v(t=w(t)),i=0,o=r.length;while(o>i)Y(e,n=r[i++],t[n]);return e},Z=function(e,t){return void 0===t?C(e):X(C(e),t)},Q=function(e){var t=U.call(this,e=S(e,!0));return!(this===q&&i(V,e)&&!i(W,e))&&(!(t||!i(this,e)||!i(V,e)||i(this,D)&&this[D][e])||t)},ee=function(e,t){if(e=w(e),t=S(t,!0),e!==q||!i(V,t)||i(W,t)){var n=k(e,t);return!n||!i(V,t)||i(e,D)&&e[D][t]||(n.enumerable=!0),n}},te=function(e){var t,n=A(w(e)),r=[],o=0;while(n.length>o)i(V,t=n[o++])||t==D||t==c||r.push(t);return r},ne=function(e){var t,n=e===q,r=A(n?W:w(e)),o=[],s=0;while(r.length>s)!i(V,t=r[s++])||n&&!i(q,t)||o.push(V[t]);return o};$||(P=function(){if(this instanceof P)throw TypeError("Symbol is not a constructor!");var e=l(arguments.length>0?arguments[0]:void 0),t=function(n){this===q&&t.call(W,n),i(this,D)&&i(this[D],e)&&(this[D][e]=!1),H(this,e,x(1,n))};return o&&z&&H(q,e,{configurable:!0,set:t}),K(e)},a(P[L],"toString",(function(){return this._k})),I.f=ee,O.f=Y,n(135).f=E.f=te,n(132).f=Q,T.f=ne,o&&!n(81)&&a(q,"propertyIsEnumerable",Q,!0),h.f=function(e){return K(p(e))}),s(s.G+s.W+s.F*!$,{Symbol:P});for(var re="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ie=0;re.length>ie;)p(re[ie++]);for(var oe=R(p.store),se=0;oe.length>se;)m(oe[se++]);s(s.S+s.F*!$,"Symbol",{for:function(e){return i(F,e+="")?F[e]:F[e]=P(e)},keyFor:function(e){if(!J(e))throw TypeError(e+" is not a symbol!");for(var t in F)if(F[t]===e)return t},useSetter:function(){z=!0},useSimple:function(){z=!1}}),s(s.S+s.F*!$,"Object",{create:Z,defineProperty:Y,defineProperties:X,getOwnPropertyDescriptor:ee,getOwnPropertyNames:te,getOwnPropertySymbols:ne});var ae=u((function(){T.f(1)}));s(s.S+s.F*ae,"Object",{getOwnPropertySymbols:function(e){return T.f(_(e))}}),j&&s(s.S+s.F*(!$||u((function(){var e=P();return"[null]"!=N([e])||"{}"!=N({a:e})||"{}"!=N(Object(e))}))),"JSON",{stringify:function(e){var t,n,r=[e],i=1;while(arguments.length>i)r.push(arguments[i++]);if(n=t=r[1],(b(t)||void 0!==e)&&!J(e))return g(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!J(t))return t}),r[1]=t,N.apply(j,r)}}),P[L][B]||n(87)(P[L],B,P[L].valueOf),d(P,"Symbol"),d(Math,"Math",!0),d(r.JSON,"JSON",!0)},function(e,t,n){var r=n(113)("meta"),i=n(90),o=n(97),s=n(88).f,a=0,c=Object.isExtensible||function(){return!0},u=!n(93)((function(){return c(Object.preventExtensions({}))})),f=function(e){s(e,r,{value:{i:"O"+ ++a,w:{}}})},d=function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,r)){if(!c(e))return"F";if(!t)return"E";f(e)}return e[r].i},l=function(e,t){if(!o(e,r)){if(!c(e))return!0;if(!t)return!1;f(e)}return e[r].w},p=function(e){return u&&h.NEED&&c(e)&&!o(e,r)&&f(e),e},h=e.exports={KEY:r,NEED:!1,fastKey:d,getWeak:l,onFreeze:p}},function(e,t,n){var r=n(83),i=n(84),o=n(81),s=n(124),a=n(88).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||a(t,e,{value:s.f(e)})}},function(e,t,n){var r=n(103),i=n(131),o=n(132);e.exports=function(e){var t=r(e),n=i.f;if(n){var s,a=n(e),c=o.f,u=0;while(a.length>u)c.call(e,s=a[u++])&&t.push(s)}return t}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){var r=n(107);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(105),i=n(135).f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(e){try{return i(e)}catch(t){return s.slice()}};e.exports.f=function(e){return s&&"[object Window]"==o.call(e)?a(e):i(r(e))}},function(e,t,n){var r=n(104),i=n(114).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t,n){var r=n(132),i=n(96),o=n(105),s=n(95),a=n(97),c=n(91),u=Object.getOwnPropertyDescriptor;t.f=n(92)?u:function(e,t){if(e=o(e),t=s(t,!0),c)try{return u(e,t)}catch(n){}if(a(e,t))return i(!r.f.call(e,t),e[t])}},function(e,t){},function(e,t,n){n(129)("asyncIterator")},function(e,t,n){n(129)("observable")},function(e,t,n){e.exports={default:n(141),__esModule:!0}},function(e,t,n){n(142),e.exports=n(84).Object.getPrototypeOf},function(e,t,n){var r=n(119),i=n(118);n(143)("getPrototypeOf",(function(){return function(e){return i(r(e))}}))},function(e,t,n){var r=n(82),i=n(84),o=n(93);e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],s={};s[e]=t(n),r(r.S+r.F*o((function(){n(1)})),"Object",s)}},function(e,t,n){e.exports={default:n(145),__esModule:!0}},function(e,t,n){var r=n(84),i=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}},function(e,t,n){var r;(function(i,o){r=function(){return o(i)}.call(t,n,t,e),void 0===r||(e.exports=r)})(this,(function(){var t=function(){var e,t,n,r,i,o,s=[],a=s.concat,c=s.filter,u=s.slice,f=window.document,d={},l={},p={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},h=/^\s*<(\w+|!)[^>]*>/,m=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,v=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,g=/^(?:body|html)$/i,y=/([A-Z])/g,b=["val","css","html","text","data","width","height","offset"],_=["after","prepend","before","append"],w=f.createElement("table"),S=f.createElement("tr"),x={tr:f.createElement("tbody"),tbody:w,thead:w,tfoot:w,td:S,th:S,"*":f.createElement("div")},C=/complete|loaded|interactive/,E=/^[\w-]*$/,I={},T=I.toString,O={},R=f.createElement("div"),k={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},M=Array.isArray||function(e){return e instanceof Array};function A(e){return null==e?String(e):I[T.call(e)]||"object"}function P(e){return"function"==A(e)}function j(e){return null!=e&&e==e.window}function N(e){return null!=e&&e.nodeType==e.DOCUMENT_NODE}function L(e){return"object"==A(e)}function D(e){return L(e)&&!j(e)&&Object.getPrototypeOf(e)==Object.prototype}function B(e){var t=!!e&&"length"in e&&e.length,r=n.type(e);return"function"!=r&&!j(e)&&("array"==r||0===t||"number"==typeof t&&t>0&&t-1 in e)}function U(e){return c.call(e,(function(e){return null!=e}))}function F(e){return e.length>0?n.fn.concat.apply([],e):e}function V(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function W(e){return e in l?l[e]:l[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function q(e,t){return"number"!=typeof t||p[V(e)]?t:t+"px"}function $(e){var t,n;return d[e]||(t=f.createElement(e),f.body.appendChild(t),n=getComputedStyle(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),"none"==n&&(n="block"),d[e]=n),d[e]}function G(e){return"children"in e?u.call(e.children):n.map(e.childNodes,(function(e){if(1==e.nodeType)return e}))}function z(e,t){var n,r=e?e.length:0;for(n=0;n<r;n++)this[n]=e[n];this.length=r,this.selector=t||""}function H(n,r,i){for(t in r)i&&(D(r[t])||M(r[t]))?(D(r[t])&&!D(n[t])&&(n[t]={}),M(r[t])&&!M(n[t])&&(n[t]=[]),H(n[t],r[t],i)):r[t]!==e&&(n[t]=r[t])}function K(e,t){return null==t?n(e):n(e).filter(t)}function J(e,t,n,r){return P(t)?t.call(e,n,r):t}function Y(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function X(t,n){var r=t.className||"",i=r&&r.baseVal!==e;if(n===e)return i?r.baseVal:r;i?r.baseVal=n:t.className=n}function Z(e){try{return e?"true"==e||"false"!=e&&("null"==e?null:+e+""==e?+e:/^[\[\{]/.test(e)?n.parseJSON(e):e):e}catch(t){return e}}function Q(e,t){t(e);for(var n=0,r=e.childNodes.length;n<r;n++)Q(e.childNodes[n],t)}return O.matches=function(e,t){if(!t||!e||1!==e.nodeType)return!1;var n=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(n)return n.call(e,t);var r,i=e.parentNode,o=!i;return o&&(i=R).appendChild(e),r=~O.qsa(i,t).indexOf(e),o&&R.removeChild(e),r},i=function(e){return e.replace(/-+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))},o=function(e){return c.call(e,(function(t,n){return e.indexOf(t)==n}))},O.fragment=function(t,r,i){var o,s,a;return m.test(t)&&(o=n(f.createElement(RegExp.$1))),o||(t.replace&&(t=t.replace(v,"<$1></$2>")),r===e&&(r=h.test(t)&&RegExp.$1),r in x||(r="*"),a=x[r],a.innerHTML=""+t,o=n.each(u.call(a.childNodes),(function(){a.removeChild(this)}))),D(i)&&(s=n(o),n.each(i,(function(e,t){b.indexOf(e)>-1?s[e](t):s.attr(e,t)}))),o},O.Z=function(e,t){return new z(e,t)},O.isZ=function(e){return e instanceof O.Z},O.init=function(t,r){var i;if(!t)return O.Z();if("string"==typeof t)if(t=t.trim(),"<"==t[0]&&h.test(t))i=O.fragment(t,RegExp.$1,r),t=null;else{if(r!==e)return n(r).find(t);i=O.qsa(f,t)}else{if(P(t))return n(f).ready(t);if(O.isZ(t))return t;if(M(t))i=U(t);else if(L(t))i=[t],t=null;else if(h.test(t))i=O.fragment(t.trim(),RegExp.$1,r),t=null;else{if(r!==e)return n(r).find(t);i=O.qsa(f,t)}}return O.Z(i,t)},n=function(e,t){return O.init(e,t)},n.extend=function(e){var t,n=u.call(arguments,1);return"boolean"==typeof e&&(t=e,e=n.shift()),n.forEach((function(n){H(e,n,t)})),e},O.qsa=function(e,t){var n,r="#"==t[0],i=!r&&"."==t[0],o=r||i?t.slice(1):t,s=E.test(o);return e.getElementById&&s&&r?(n=e.getElementById(o))?[n]:[]:1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType?[]:u.call(s&&!r&&e.getElementsByClassName?i?e.getElementsByClassName(o):e.getElementsByTagName(t):e.querySelectorAll(t))},n.contains=f.documentElement.contains?function(e,t){return e!==t&&e.contains(t)}:function(e,t){while(t&&(t=t.parentNode))if(t===e)return!0;return!1},n.type=A,n.isFunction=P,n.isWindow=j,n.isArray=M,n.isPlainObject=D,n.isEmptyObject=function(e){var t;for(t in e)return!1;return!0},n.isNumeric=function(e){var t=Number(e),n=typeof e;return null!=e&&"boolean"!=n&&("string"!=n||e.length)&&!isNaN(t)&&isFinite(t)||!1},n.inArray=function(e,t,n){return s.indexOf.call(t,e,n)},n.camelCase=i,n.trim=function(e){return null==e?"":String.prototype.trim.call(e)},n.uuid=0,n.support={},n.expr={},n.noop=function(){},n.map=function(e,t){var n,r,i,o=[];if(B(e))for(r=0;r<e.length;r++)n=t(e[r],r),null!=n&&o.push(n);else for(i in e)n=t(e[i],i),null!=n&&o.push(n);return F(o)},n.each=function(e,t){var n,r;if(B(e)){for(n=0;n<e.length;n++)if(!1===t.call(e[n],n,e[n]))return e}else for(r in e)if(!1===t.call(e[r],r,e[r]))return e;return e},n.grep=function(e,t){return c.call(e,t)},window.JSON&&(n.parseJSON=JSON.parse),n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),(function(e,t){I["[object "+t+"]"]=t.toLowerCase()})),n.fn={constructor:O.Z,length:0,forEach:s.forEach,reduce:s.reduce,push:s.push,sort:s.sort,splice:s.splice,indexOf:s.indexOf,concat:function(){var e,t,n=[];for(e=0;e<arguments.length;e++)t=arguments[e],n[e]=O.isZ(t)?t.toArray():t;return a.apply(O.isZ(this)?this.toArray():this,n)},map:function(e){return n(n.map(this,(function(t,n){return e.call(t,n,t)})))},slice:function(){return n(u.apply(this,arguments))},ready:function(e){return C.test(f.readyState)&&f.body?e(n):f.addEventListener("DOMContentLoaded",(function(){e(n)}),!1),this},get:function(t){return t===e?u.call(this):this[t>=0?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each((function(){null!=this.parentNode&&this.parentNode.removeChild(this)}))},each:function(e){return s.every.call(this,(function(t,n){return!1!==e.call(t,n,t)})),this},filter:function(e){return P(e)?this.not(this.not(e)):n(c.call(this,(function(t){return O.matches(t,e)})))},add:function(e,t){return n(o(this.concat(n(e,t))))},is:function(e){return this.length>0&&O.matches(this[0],e)},not:function(t){var r=[];if(P(t)&&t.call!==e)this.each((function(e){t.call(this,e)||r.push(this)}));else{var i="string"==typeof t?this.filter(t):B(t)&&P(t.item)?u.call(t):n(t);this.forEach((function(e){i.indexOf(e)<0&&r.push(e)}))}return n(r)},has:function(e){return this.filter((function(){return L(e)?n.contains(this,e):n(this).find(e).size()}))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!L(e)?e:n(e)},last:function(){var e=this[this.length-1];return e&&!L(e)?e:n(e)},find:function(e){var t,r=this;return t=e?"object"==typeof e?n(e).filter((function(){var e=this;return s.some.call(r,(function(t){return n.contains(t,e)}))})):1==this.length?n(O.qsa(this[0],e)):this.map((function(){return O.qsa(this,e)})):n(),t},closest:function(e,t){var r=[],i="object"==typeof e&&n(e);return this.each((function(n,o){while(o&&!(i?i.indexOf(o)>=0:O.matches(o,e)))o=o!==t&&!N(o)&&o.parentNode;o&&r.indexOf(o)<0&&r.push(o)})),n(r)},parents:function(e){var t=[],r=this;while(r.length>0)r=n.map(r,(function(e){if((e=e.parentNode)&&!N(e)&&t.indexOf(e)<0)return t.push(e),e}));return K(t,e)},parent:function(e){return K(o(this.pluck("parentNode")),e)},children:function(e){return K(this.map((function(){return G(this)})),e)},contents:function(){return this.map((function(){return this.contentDocument||u.call(this.childNodes)}))},siblings:function(e){return K(this.map((function(e,t){return c.call(G(t.parentNode),(function(e){return e!==t}))})),e)},empty:function(){return this.each((function(){this.innerHTML=""}))},pluck:function(e){return n.map(this,(function(t){return t[e]}))},show:function(){return this.each((function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=$(this.nodeName))}))},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){var t=P(e);if(this[0]&&!t)var r=n(e).get(0),i=r.parentNode||this.length>1;return this.each((function(o){n(this).wrapAll(t?e.call(this,o):i?r.cloneNode(!0):r)}))},wrapAll:function(e){if(this[0]){var t;n(this[0]).before(e=n(e));while((t=e.children()).length)e=t.first();n(e).append(this)}return this},wrapInner:function(e){var t=P(e);return this.each((function(r){var i=n(this),o=i.contents(),s=t?e.call(this,r):e;o.length?o.wrapAll(s):i.append(s)}))},unwrap:function(){return this.parent().each((function(){n(this).replaceWith(n(this).children())})),this},clone:function(){return this.map((function(){return this.cloneNode(!0)}))},hide:function(){return this.css("display","none")},toggle:function(t){return this.each((function(){var r=n(this);(t===e?"none"==r.css("display"):t)?r.show():r.hide()}))},prev:function(e){return n(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return n(this.pluck("nextElementSibling")).filter(e||"*")},html:function(e){return 0 in arguments?this.each((function(t){var r=this.innerHTML;n(this).empty().append(J(this,e,t,r))})):0 in this?this[0].innerHTML:null},text:function(e){return 0 in arguments?this.each((function(t){var n=J(this,e,t,this.textContent);this.textContent=null==n?"":""+n})):0 in this?this.pluck("textContent").join(""):null},attr:function(n,r){var i;return"string"!=typeof n||1 in arguments?this.each((function(e){if(1===this.nodeType)if(L(n))for(t in n)Y(this,t,n[t]);else Y(this,n,J(this,r,e,this.getAttribute(n)))})):0 in this&&1==this[0].nodeType&&null!=(i=this[0].getAttribute(n))?i:e},removeAttr:function(e){return this.each((function(){1===this.nodeType&&e.split(" ").forEach((function(e){Y(this,e)}),this)}))},prop:function(e,t){return e=k[e]||e,1 in arguments?this.each((function(n){this[e]=J(this,t,n,this[e])})):this[0]&&this[0][e]},removeProp:function(e){return e=k[e]||e,this.each((function(){delete this[e]}))},data:function(t,n){var r="data-"+t.replace(y,"-$1").toLowerCase(),i=1 in arguments?this.attr(r,n):this.attr(r);return null!==i?Z(i):e},val:function(e){return 0 in arguments?(null==e&&(e=""),this.each((function(t){this.value=J(this,e,t,this.value)}))):this[0]&&(this[0].multiple?n(this[0]).find("option").filter((function(){return this.selected})).pluck("value"):this[0].value)},offset:function(e){if(e)return this.each((function(t){var r=n(this),i=J(this,e,t,r.offset()),o=r.offsetParent().offset(),s={top:i.top-o.top,left:i.left-o.left};"static"==r.css("position")&&(s["position"]="relative"),r.css(s)}));if(!this.length)return null;if(f.documentElement!==this[0]&&!n.contains(f.documentElement,this[0]))return{top:0,left:0};var t=this[0].getBoundingClientRect();return{left:t.left+window.pageXOffset,top:t.top+window.pageYOffset,width:Math.round(t.width),height:Math.round(t.height)}},css:function(e,r){if(arguments.length<2){var o=this[0];if("string"==typeof e){if(!o)return;return o.style[i(e)]||getComputedStyle(o,"").getPropertyValue(e)}if(M(e)){if(!o)return;var s={},a=getComputedStyle(o,"");return n.each(e,(function(e,t){s[t]=o.style[i(t)]||a.getPropertyValue(t)})),s}}var c="";if("string"==A(e))r||0===r?c=V(e)+":"+q(e,r):this.each((function(){this.style.removeProperty(V(e))}));else for(t in e)e[t]||0===e[t]?c+=V(t)+":"+q(t,e[t])+";":this.each((function(){this.style.removeProperty(V(t))}));return this.each((function(){this.style.cssText+=";"+c}))},index:function(e){return e?this.indexOf(n(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return!!e&&s.some.call(this,(function(e){return this.test(X(e))}),W(e))},addClass:function(e){return e?this.each((function(t){if("className"in this){r=[];var i=X(this),o=J(this,e,t,i);o.split(/\s+/g).forEach((function(e){n(this).hasClass(e)||r.push(e)}),this),r.length&&X(this,i+(i?" ":"")+r.join(" "))}})):this},removeClass:function(t){return this.each((function(n){if("className"in this){if(t===e)return X(this,"");r=X(this),J(this,t,n,r).split(/\s+/g).forEach((function(e){r=r.replace(W(e)," ")})),X(this,r.trim())}}))},toggleClass:function(t,r){return t?this.each((function(i){var o=n(this),s=J(this,t,i,X(this));s.split(/\s+/g).forEach((function(t){(r===e?!o.hasClass(t):r)?o.addClass(t):o.removeClass(t)}))})):this},scrollTop:function(t){if(this.length){var n="scrollTop"in this[0];return t===e?n?this[0].scrollTop:this[0].pageYOffset:this.each(n?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})}},scrollLeft:function(t){if(this.length){var n="scrollLeft"in this[0];return t===e?n?this[0].scrollLeft:this[0].pageXOffset:this.each(n?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})}},position:function(){if(this.length){var e=this[0],t=this.offsetParent(),r=this.offset(),i=g.test(t[0].nodeName)?{top:0,left:0}:t.offset();return r.top-=parseFloat(n(e).css("margin-top"))||0,r.left-=parseFloat(n(e).css("margin-left"))||0,i.top+=parseFloat(n(t[0]).css("border-top-width"))||0,i.left+=parseFloat(n(t[0]).css("border-left-width"))||0,{top:r.top-i.top,left:r.left-i.left}}},offsetParent:function(){return this.map((function(){var e=this.offsetParent||f.body;while(e&&!g.test(e.nodeName)&&"static"==n(e).css("position"))e=e.offsetParent;return e}))}},n.fn.detach=n.fn.remove,["width","height"].forEach((function(t){var r=t.replace(/./,(function(e){return e[0].toUpperCase()}));n.fn[t]=function(i){var o,s=this[0];return i===e?j(s)?s["inner"+r]:N(s)?s.documentElement["scroll"+r]:(o=this.offset())&&o[t]:this.each((function(e){s=n(this),s.css(t,J(this,i,e,s[t]()))}))}})),_.forEach((function(t,r){var i=r%2;n.fn[t]=function(){var t,o,s=n.map(arguments,(function(r){var i=[];return t=A(r),"array"==t?(r.forEach((function(t){return t.nodeType!==e?i.push(t):n.zepto.isZ(t)?i=i.concat(t.get()):void(i=i.concat(O.fragment(t)))})),i):"object"==t||null==r?r:O.fragment(r)})),a=this.length>1;return s.length<1?this:this.each((function(e,t){o=i?t:t.parentNode,t=0==r?t.nextSibling:1==r?t.firstChild:2==r?t:null;var c=n.contains(f.documentElement,o);s.forEach((function(e){if(a)e=e.cloneNode(!0);else if(!o)return n(e).remove();o.insertBefore(e,t),c&&Q(e,(function(e){if(null!=e.nodeName&&"SCRIPT"===e.nodeName.toUpperCase()&&(!e.type||"text/javascript"===e.type)&&!e.src){var t=e.ownerDocument?e.ownerDocument.defaultView:window;t["eval"].call(t,e.innerHTML)}}))}))}))},n.fn[i?t+"To":"insert"+(r?"Before":"After")]=function(e){return n(e)[t](this),this}})),O.Z.prototype=z.prototype=n.fn,O.uniq=o,O.deserializeValue=Z,n.zepto=O,n}();return window.Zepto=t,void 0===window.$&&(window.$=t),e.exports=t,function(e){var t,n=1,r=Array.prototype.slice,i=e.isFunction,o=function(e){return"string"==typeof e},s={},a={},c="onfocusin"in window,u={focus:"focusin",blur:"focusout"},f={mouseenter:"mouseover",mouseleave:"mouseout"};function d(e){return e._zid||(e._zid=n++)}function l(e,t,n,r){if(t=p(t),t.ns)var i=h(t.ns);return(s[d(e)]||[]).filter((function(e){return e&&(!t.e||e.e==t.e)&&(!t.ns||i.test(e.ns))&&(!n||d(e.fn)===d(n))&&(!r||e.sel==r)}))}function p(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function h(e){return new RegExp("(?:^| )"+e.replace(" "," .* ?")+"(?: |$)")}function m(e,t){return e.del&&!c&&e.e in u||!!t}function v(e){return f[e]||c&&u[e]||e}function g(n,r,i,o,a,c,u){var l=d(n),h=s[l]||(s[l]=[]);r.split(/\s/).forEach((function(r){if("ready"==r)return e(document).ready(i);var s=p(r);s.fn=i,s.sel=a,s.e in f&&(i=function(t){var n=t.relatedTarget;if(!n||n!==this&&!e.contains(this,n))return s.fn.apply(this,arguments)}),s.del=c;var d=c||i;s.proxy=function(e){if(e=x(e),!e.isImmediatePropagationStopped()){e.data=o;var r=d.apply(n,e._args==t?[e]:[e].concat(e._args));return!1===r&&(e.preventDefault(),e.stopPropagation()),r}},s.i=h.length,h.push(s),"addEventListener"in n&&n.addEventListener(v(s.e),s.proxy,m(s,u))}))}function y(e,t,n,r,i){var o=d(e);(t||"").split(/\s/).forEach((function(t){l(e,t,n,r).forEach((function(t){delete s[o][t.i],"removeEventListener"in e&&e.removeEventListener(v(t.e),t.proxy,m(t,i))}))}))}a.click=a.mousedown=a.mouseup=a.mousemove="MouseEvents",e.event={add:g,remove:y},e.proxy=function(t,n){var s=2 in arguments&&r.call(arguments,2);if(i(t)){var a=function(){return t.apply(n,s?s.concat(r.call(arguments)):arguments)};return a._zid=d(t),a}if(o(n))return s?(s.unshift(t[n],t),e.proxy.apply(null,s)):e.proxy(t[n],t);throw new TypeError("expected function")},e.fn.bind=function(e,t,n){return this.on(e,t,n)},e.fn.unbind=function(e,t){return this.off(e,t)},e.fn.one=function(e,t,n,r){return this.on(e,t,n,r,1)};var b=function(){return!0},_=function(){return!1},w=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,S={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function x(n,r){return!r&&n.isDefaultPrevented||(r||(r=n),e.each(S,(function(e,t){var i=r[e];n[e]=function(){return this[t]=b,i&&i.apply(r,arguments)},n[t]=_})),n.timeStamp||(n.timeStamp=Date.now()),(r.defaultPrevented!==t?r.defaultPrevented:"returnValue"in r?!1===r.returnValue:r.getPreventDefault&&r.getPreventDefault())&&(n.isDefaultPrevented=b)),n}function C(e){var n,r={originalEvent:e};for(n in e)w.test(n)||e[n]===t||(r[n]=e[n]);return x(r,e)}e.fn.delegate=function(e,t,n){return this.on(t,e,n)},e.fn.undelegate=function(e,t,n){return this.off(t,e,n)},e.fn.live=function(t,n){return e(document.body).delegate(this.selector,t,n),this},e.fn.die=function(t,n){return e(document.body).undelegate(this.selector,t,n),this},e.fn.on=function(n,s,a,c,u){var f,d,l=this;return n&&!o(n)?(e.each(n,(function(e,t){l.on(e,s,a,t,u)})),l):(o(s)||i(c)||!1===c||(c=a,a=s,s=t),c!==t&&!1!==a||(c=a,a=t),!1===c&&(c=_),l.each((function(t,i){u&&(f=function(e){return y(i,e.type,c),c.apply(this,arguments)}),s&&(d=function(t){var n,o=e(t.target).closest(s,i).get(0);if(o&&o!==i)return n=e.extend(C(t),{currentTarget:o,liveFired:i}),(f||c).apply(o,[n].concat(r.call(arguments,1)))}),g(i,n,c,a,s,d||f)})))},e.fn.off=function(n,r,s){var a=this;return n&&!o(n)?(e.each(n,(function(e,t){a.off(e,r,t)})),a):(o(r)||i(s)||!1===s||(s=r,r=t),!1===s&&(s=_),a.each((function(){y(this,n,s,r)})))},e.fn.trigger=function(t,n){return t=o(t)||e.isPlainObject(t)?e.Event(t):x(t),t._args=n,this.each((function(){t.type in u&&"function"==typeof this[t.type]?this[t.type]():"dispatchEvent"in this?this.dispatchEvent(t):e(this).triggerHandler(t,n)}))},e.fn.triggerHandler=function(t,n){var r,i;return this.each((function(s,a){r=C(o(t)?e.Event(t):t),r._args=n,r.target=a,e.each(l(a,t.type||t),(function(e,t){if(i=t.proxy(r),r.isImmediatePropagationStopped())return!1}))})),i},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach((function(t){e.fn[t]=function(e){return 0 in arguments?this.bind(t,e):this.trigger(t)}})),e.Event=function(e,t){o(e)||(t=e,e=t.type);var n=document.createEvent(a[e]||"Events"),r=!0;if(t)for(var i in t)"bubbles"==i?r=!!t[i]:n[i]=t[i];return n.initEvent(e,r,!0),x(n)}}(t),function(e){var t,n,r=+new Date,i=window.document,o=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,s=/^(?:text|application)\/javascript/i,a=/^(?:text|application)\/xml/i,c="application/json",u="text/html",f=/^\s*$/,d=i.createElement("a");function l(t,n,r){var i=e.Event(n);return e(t).trigger(i,r),!i.isDefaultPrevented()}function p(e,t,n,r){if(e.global)return l(t||i,n,r)}function h(t){t.global&&0===e.active++&&p(t,null,"ajaxStart")}function m(t){t.global&&!--e.active&&p(t,null,"ajaxStop")}function v(e,t){var n=t.context;if(!1===t.beforeSend.call(n,e,t)||!1===p(t,n,"ajaxBeforeSend",[e,t]))return!1;p(t,n,"ajaxSend",[e,t])}function g(e,t,n,r){var i=n.context,o="success";n.success.call(i,e,o,t),r&&r.resolveWith(i,[e,o,t]),p(n,i,"ajaxSuccess",[t,n,e]),b(o,t,n)}function y(e,t,n,r,i){var o=r.context;r.error.call(o,n,t,e),i&&i.rejectWith(o,[n,t,e]),p(r,o,"ajaxError",[n,r,e||t]),b(t,n,r)}function b(e,t,n){var r=n.context;n.complete.call(r,t,e),p(n,r,"ajaxComplete",[t,n]),m(n)}function _(e,t,n){if(n.dataFilter==w)return e;var r=n.context;return n.dataFilter.call(r,e,t)}function w(){}function S(e){return e&&(e=e.split(";",2)[0]),e&&(e==u?"html":e==c?"json":s.test(e)?"script":a.test(e)&&"xml")||"text"}function x(e,t){return""==t?e:(e+"&"+t).replace(/[&?]{1,2}/,"?")}function C(t){t.processData&&t.data&&"string"!=e.type(t.data)&&(t.data=e.param(t.data,t.traditional)),!t.data||t.type&&"GET"!=t.type.toUpperCase()&&"jsonp"!=t.dataType||(t.url=x(t.url,t.data),t.data=void 0)}function E(t,n,r,i){return e.isFunction(n)&&(i=r,r=n,n=void 0),e.isFunction(r)||(i=r,r=void 0),{url:t,data:n,success:r,dataType:i}}d.href=window.location.href,e.active=0,e.ajaxJSONP=function(t,n){if(!("type"in t))return e.ajax(t);var o,s,a=t.jsonpCallback,c=(e.isFunction(a)?a():a)||"Zepto"+r++,u=i.createElement("script"),f=window[c],d=function(t){e(u).triggerHandler("error",t||"abort")},l={abort:d};return n&&n.promise(l),e(u).on("load error",(function(r,i){clearTimeout(s),e(u).off().remove(),"error"!=r.type&&o?g(o[0],l,t,n):y(null,i||"error",l,t,n),window[c]=f,o&&e.isFunction(f)&&f(o[0]),f=o=void 0})),!1===v(l,t)?(d("abort"),l):(window[c]=function(){o=arguments},u.src=t.url.replace(/\?(.+)=\?/,"?$1="+c),i.head.appendChild(u),t.timeout>0&&(s=setTimeout((function(){d("timeout")}),t.timeout)),l)},e.ajaxSettings={type:"GET",beforeSend:w,success:w,error:w,complete:w,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:c,xml:"application/xml, text/xml",html:u,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0,dataFilter:w},e.ajax=function(r){var o,s,a=e.extend({},r||{}),c=e.Deferred&&e.Deferred();for(t in e.ajaxSettings)void 0===a[t]&&(a[t]=e.ajaxSettings[t]);h(a),a.crossDomain||(o=i.createElement("a"),o.href=a.url,o.href=o.href,a.crossDomain=d.protocol+"//"+d.host!==o.protocol+"//"+o.host),a.url||(a.url=window.location.toString()),(s=a.url.indexOf("#"))>-1&&(a.url=a.url.slice(0,s)),C(a);var u=a.dataType,l=/\?.+=\?/.test(a.url);if(l&&(u="jsonp"),!1!==a.cache&&(r&&!0===r.cache||"script"!=u&&"jsonp"!=u)||(a.url=x(a.url,"_="+Date.now())),"jsonp"==u)return l||(a.url=x(a.url,a.jsonp?a.jsonp+"=?":!1===a.jsonp?"":"callback=?")),e.ajaxJSONP(a,c);var p,m=a.accepts[u],b={},E=function(e,t){b[e.toLowerCase()]=[e,t]},I=/^([\w-]+:)\/\//.test(a.url)?RegExp.$1:window.location.protocol,T=a.xhr(),O=T.setRequestHeader;if(c&&c.promise(T),a.crossDomain||E("X-Requested-With","XMLHttpRequest"),E("Accept",m||"*/*"),(m=a.mimeType||m)&&(m.indexOf(",")>-1&&(m=m.split(",",2)[0]),T.overrideMimeType&&T.overrideMimeType(m)),(a.contentType||!1!==a.contentType&&a.data&&"GET"!=a.type.toUpperCase())&&E("Content-Type",a.contentType||"application/x-www-form-urlencoded"),a.headers)for(n in a.headers)E(n,a.headers[n]);if(T.setRequestHeader=E,T.onreadystatechange=function(){if(4==T.readyState){T.onreadystatechange=w,clearTimeout(p);var t,n=!1;if(T.status>=200&&T.status<300||304==T.status||0==T.status&&"file:"==I){if(u=u||S(a.mimeType||T.getResponseHeader("content-type")),"arraybuffer"==T.responseType||"blob"==T.responseType)t=T.response;else{t=T.responseText;try{t=_(t,u,a),"script"==u?(0,eval)(t):"xml"==u?t=T.responseXML:"json"==u&&(t=f.test(t)?null:e.parseJSON(t))}catch(r){n=r}if(n)return y(n,"parsererror",T,a,c)}g(t,T,a,c)}else y(T.statusText||null,T.status?"error":"abort",T,a,c)}},!1===v(T,a))return T.abort(),y(null,"abort",T,a,c),T;var R=!("async"in a)||a.async;if(T.open(a.type,a.url,R,a.username,a.password),a.xhrFields)for(n in a.xhrFields)T[n]=a.xhrFields[n];for(n in b)O.apply(T,b[n]);return a.timeout>0&&(p=setTimeout((function(){T.onreadystatechange=w,T.abort(),y(null,"timeout",T,a,c)}),a.timeout)),T.send(a.data?a.data:null),T},e.get=function(){return e.ajax(E.apply(null,arguments))},e.post=function(){var t=E.apply(null,arguments);return t.type="POST",e.ajax(t)},e.getJSON=function(){var t=E.apply(null,arguments);return t.dataType="json",e.ajax(t)},e.fn.load=function(t,n,r){if(!this.length)return this;var i,s=this,a=t.split(/\s/),c=E(t,n,r),u=c.success;return a.length>1&&(c.url=a[0],i=a[1]),c.success=function(t){s.html(i?e("<div>").html(t.replace(o,"")).find(i):t),u&&u.apply(s,arguments)},e.ajax(c),this};var I=encodeURIComponent;function T(t,n,r,i){var o,s=e.isArray(n),a=e.isPlainObject(n);e.each(n,(function(n,c){o=e.type(c),i&&(n=r?i:i+"["+(a||"object"==o||"array"==o?n:"")+"]"),!i&&s?t.add(c.name,c.value):"array"==o||!r&&"object"==o?T(t,c,r,n):t.add(n,c)}))}e.param=function(t,n){var r=[];return r.add=function(t,n){e.isFunction(n)&&(n=n()),null==n&&(n=""),this.push(I(t)+"="+I(n))},T(r,t,n),r.join("&").replace(/%20/g,"+")}}(t),function(e){e.fn.serializeArray=function(){var t,n,r=[],i=function(e){if(e.forEach)return e.forEach(i);r.push({name:t,value:e})};return this[0]&&e.each(this[0].elements,(function(r,o){n=o.type,t=o.name,t&&"fieldset"!=o.nodeName.toLowerCase()&&!o.disabled&&"submit"!=n&&"reset"!=n&&"button"!=n&&"file"!=n&&("radio"!=n&&"checkbox"!=n||o.checked)&&i(e(o).val())})),r},e.fn.serialize=function(){var e=[];return this.serializeArray().forEach((function(t){e.push(encodeURIComponent(t.name)+"="+encodeURIComponent(t.value))})),e.join("&")},e.fn.submit=function(t){if(0 in arguments)this.bind("submit",t);else if(this.length){var n=e.Event("submit");this.eq(0).trigger(n),n.isDefaultPrevented()||this.get(0).submit()}return this}}(t),function(){try{getComputedStyle(void 0)}catch(t){var e=getComputedStyle;window.getComputedStyle=function(n,r){try{return e(n,r)}catch(t){return null}}}}(),t}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=emedia.singleWebrtcAdapter;function i(){emedia.util.logger.warn("webrtc-adapter must load once. if more, safari may initC sdp error(too many audio video, easemob server dont work)")}function o(){if(document.documentMode){var e=/\brv[ :]+(\d+)/g.exec(navigator.userAgent)||[],t="IE",i=parseInt(e[1],10);i||(e=/\bMSIE[ :]+(\d+)/g.exec(navigator.userAgent)||[],i=parseInt(e[1]||"0",10)),emedia.util.logger.error("adapter.ie not required"),r.__browser=t,r.__browserVersion=i}else r=n(148),emedia.util.logger.info("webrtc-adapter load first"),s();emedia.singleWebrtcAdapter=r}function s(){function e(e,t){e.srcObject=t,emedia.isSafari&&(e.pause(),e.play());var n=emedia.util.logger||window.console||console;if(n){if(t&&n.info("stream attach videoTag.",t.id,t._located,">>",e.id,e.muted,e.volume,e),t||n.info("stream(null) attach videoTag.",e.id,e.muted,e.volume,e),!e.hxSetOnvolumechange){var r=e.onvolumechange;e.onvolumechange=function(){n.debug("stream attach detail: video tag volume chanage",e.volume,t?t.id:t),r&&r.apply(e,arguments)},e.hxSetOnvolumechange=!0}if(!e.hxSetOnstalled){var i=e.onstalled;e.onstalled=function(){n.debug("stream attach detail: video tag onstalled",t?t.id:t),i&&i.apply(e,arguments)},e.hxSetOnstalled=!0}if(!e.hxSetOnabort){var o=e.onabort;e.onabort=function(){n.debug("stream attach detail: video tag onabort",t?t.id:t),o&&o.apply(e,arguments)},e.hxSetOnabort=!0}if(!e.hxSetOncanplay){var s=e.oncanplay;e.oncanplay=function(){t&&t.getTracks().forEach((function(e){"function"===typeof e.getSettings&&n.debug("stream attach detail",t.id," track setting =",e.enabled,e.id,e.kind,e.label,e.getSettings())})),n.debug("stream attach detail: video tag",e.videoWidth,"x",e.videoHeight,t?t.id:t),s&&s.apply(e,arguments)},e.hxSetOncanplay=!0}}}function t(t,n,r,i){function o(){r=!!(void 0===r?n._located:r),t.muted=!1,r!==t.muted&&(t.muted=!0)}if(i||(i=window.__attachMediaStream)||(i=e.bind(this)),t){if(n)return t.srcObject&&t.srcObject._located&&n._located&&t.srcObject.id===n.id?t.srcObject:(o(),i(t,n),t);i(t,n)}}window.attachMediaStream&&!0!==window.attachMediaStream._wrapped&&(window.__attachMediaStream=window.attachMediaStream),window.attachMediaStream=t,window.attachMediaStream._wrapped=!0,console&&"function"===typeof console.info&&console.info("Wrap the attachMediaStream ",r.__browser,r.__browserVersion)}i(),r?emedia.util.logger.error("webrtc-adapter repeated load, safari may dont work"):o(),r.__browser=r.__browser||r.browserDetails.browser,r.__browserVersion=r.__browserVersion||r.browserDetails.version,emedia.util.logger.info("Current browser",r.__browser,r.__browserVersion),"Not a supported browser."===r.__browser&&emedia.util.logger.error("Not a supported browser"),t.default=r},function(e,t,n){"use strict";var r,i,o,s,a=n(149),c=T(a),u=n(144),f=T(u),d=n(153),l=T(d),p=n(156),h=T(p),m=n(178),v=T(m),g=n(181),y=T(g),b=n(197),_=T(b),w=n(74),S=T(w),x=n(125),C=T(x),E=n(73),I=T(E);function T(e){return e&&e.__esModule?e:{default:e}}(function(n){"object"===(0,I.default)(t)&&"undefined"!==typeof e?e.exports=n():(i=[],r=n,o="function"===typeof r?r.apply(t,i):r,void 0===o||(e.exports=o))})((function(){return function(){function e(t,n,r){function i(a,c){if(!n[a]){if(!t[a]){var u="function"==typeof s&&s;if(!c&&u)return s(a,!0);if(o)return o(a,!0);var f=new Error("Cannot find module '"+a+"'");throw f.code="MODULE_NOT_FOUND",f}var d=n[a]={exports:{}};t[a][0].call(d.exports,(function(e){var n=t[a][1][e];return i(n||e)}),d,d.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof s&&s,a=0;a<r.length;a++)i(r[a]);return i}return e}()({1:[function(e,t,n){console.warn("webrtc adapter version: 7.6.1");var r=e("./adapter_factory.js"),i=(0,r.adapterFactory)({window:window});t.exports=i},{"./adapter_factory.js":2}],2:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.adapterFactory=v;var r=e("./utils"),i=m(r),o=e("./chrome/chrome_shim"),s=m(o),a=e("./edge/edge_shim"),c=m(a),u=e("./firefox/firefox_shim"),f=m(u),d=e("./safari/safari_shim"),l=m(d),p=e("./common_shim"),h=m(p);function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.window,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0},r=i.log,o=i.detectBrowser(t),a={browserDetails:o,commonShim:h,extractVersion:i.extractVersion,disableLog:i.disableLog,disableWarnings:i.disableWarnings};switch(o.browser){case"chrome":if(!s||!s.shimPeerConnection||!n.shimChrome)return r("Chrome shim is not included in this adapter release."),a;if(null===o.version)return r("Chrome shim can not determine version, not shimming."),a;r("adapter.js shimming chrome."),a.browserShim=s,s.shimGetUserMedia(t),s.shimMediaStream(t),s.shimPeerConnection(t),s.shimOnTrack(t),s.shimAddTrackRemoveTrack(t),s.shimGetSendersWithDtmf(t),s.shimGetStats(t),s.shimSenderReceiverGetStats(t),s.fixNegotiationNeeded(t),h.shimRTCIceCandidate(t),h.shimConnectionState(t),h.shimMaxMessageSize(t),h.shimSendThrowTypeError(t),h.removeAllowExtmapMixed(t);break;case"firefox":if(!f||!f.shimPeerConnection||!n.shimFirefox)return r("Firefox shim is not included in this adapter release."),a;r("adapter.js shimming firefox."),a.browserShim=f,f.shimGetUserMedia(t),f.shimPeerConnection(t),f.shimOnTrack(t),f.shimRemoveStream(t),f.shimSenderGetStats(t),f.shimReceiverGetStats(t),f.shimRTCDataChannel(t),f.shimAddTransceiver(t),f.shimCreateOffer(t),f.shimCreateAnswer(t),h.shimRTCIceCandidate(t),h.shimConnectionState(t),h.shimMaxMessageSize(t),h.shimSendThrowTypeError(t);break;case"edge":if(!c||!c.shimPeerConnection||!n.shimEdge)return r("MS edge shim is not included in this adapter release."),a;r("adapter.js shimming edge."),a.browserShim=c,c.shimGetUserMedia(t),c.shimGetDisplayMedia(t),c.shimPeerConnection(t),c.shimReplaceTrack(t),h.shimMaxMessageSize(t),h.shimSendThrowTypeError(t);break;case"safari":if(!l||!n.shimSafari)return r("Safari shim is not included in this adapter release."),a;r("adapter.js shimming safari."),a.browserShim=l,l.shimRTCIceServerUrls(t),l.shimCreateOfferLegacy(t),l.shimCallbacksAPI(t),l.shimLocalStreamsAPI(t),l.shimRemoteStreamsAPI(t),l.shimTrackEventTransceiver(t),l.shimGetUserMedia(t),l.shimAudioContext(t),h.shimRTCIceCandidate(t),h.shimMaxMessageSize(t),h.shimSendThrowTypeError(t),h.removeAllowExtmapMixed(t);break;default:r("Unsupported browser!");break}return a}},{"./chrome/chrome_shim":3,"./common_shim":6,"./edge/edge_shim":7,"./firefox/firefox_shim":11,"./safari/safari_shim":14,"./utils":15}],3:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=n.shimGetUserMedia=void 0;var r="function"===typeof C.default&&"symbol"===(0,I.default)(S.default)?function(e){return"undefined"===typeof e?"undefined":(0,I.default)(e)}:function(e){return e&&"function"===typeof C.default&&e.constructor===C.default&&e!==C.default.prototype?"symbol":"undefined"===typeof e?"undefined":(0,I.default)(e)},i=e("./getusermedia");Object.defineProperty(n,"shimGetUserMedia",{enumerable:!0,get:function(){return i.shimGetUserMedia}});var o=e("./getdisplaymedia");Object.defineProperty(n,"shimGetDisplayMedia",{enumerable:!0,get:function(){return o.shimGetDisplayMedia}}),n.shimMediaStream=f,n.shimOnTrack=d,n.shimGetSendersWithDtmf=p,n.shimGetStats=m,n.shimSenderReceiverGetStats=g,n.shimAddTrackRemoveTrackWithNative=b,n.shimAddTrackRemoveTrack=w,n.shimPeerConnection=x,n.fixNegotiationNeeded=E;var s=e("../utils.js"),a=c(s);function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function u(e,t,n){return t in e?(0,_.default)(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function d(e){if("object"===("undefined"===typeof e?"undefined":r(e))&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var n=this;return this._ontrackpoly||(this._ontrackpoly=function(t){t.stream.addEventListener("addtrack",(function(r){var i=void 0;i=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find((function(e){return e.track&&e.track.id===r.track.id})):{track:r.track};var o=new Event("track");o.track=r.track,o.receiver=i,o.transceiver={receiver:i},o.streams=[t.stream],n.dispatchEvent(o)})),t.stream.getTracks().forEach((function(r){var i=void 0;i=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find((function(e){return e.track&&e.track.id===r.id})):{track:r};var o=new Event("track");o.track=r,o.receiver=i,o.transceiver={receiver:i},o.streams=[t.stream],n.dispatchEvent(o)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else a.wrapPeerConnectionEvent(e,"track",(function(e){return e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e}))}function p(e){if("object"===("undefined"===typeof e?"undefined":r(e))&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){var i=n.apply(this,arguments);return i||(i=t(this,e),this._senders.push(i)),i};var i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){i.apply(this,arguments);var t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}var o=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;this._senders=this._senders||[],o.apply(this,[e]),e.getTracks().forEach((function(e){n._senders.push(t(n,e))}))};var s=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._senders=this._senders||[],s.apply(this,[e]),e.getTracks().forEach((function(e){var n=t._senders.find((function(t){return t.track===e}));n&&t._senders.splice(t._senders.indexOf(n),1)}))}}else if("object"===("undefined"===typeof e?"undefined":r(e))&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var a=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=a.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function m(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=this,n=Array.prototype.slice.call(arguments),r=n[0],i=n[1],o=n[2];if(arguments.length>0&&"function"===typeof r)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!==typeof r))return t.apply(this,[]);var s=function(e){var t={},n=e.result();return n.forEach((function(e){var n={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach((function(t){n[t]=e.stat(t)})),t[n.id]=n})),t},a=function(e){return new y.default((0,v.default)(e).map((function(t){return[t,e[t]]})))};if(arguments.length>=2){var c=function(e){i(a(s(e)))};return t.apply(this,[c,r])}return new h.default((function(n,r){t.apply(e,[function(e){n(a(s(e)))},r])})).then(i,o)}}}function g(e){if("object"===("undefined"===typeof e?"undefined":r(e))&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver){if(!("getStats"in e.RTCRtpSender.prototype)){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return a.filterStats(t,e.track,!0)}))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){var i=e.RTCPeerConnection.prototype.getReceivers;i&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,t=i.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t}),a.wrapPeerConnectionEvent(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return a.filterStats(t,e.track,!1)}))}}if("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype){var o=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){var t=arguments[0],n=void 0,r=void 0,i=void 0;return this.getSenders().forEach((function(e){e.track===t&&(n?i=!0:n=e)})),this.getReceivers().forEach((function(e){return e.track===t&&(r?i=!0:r=e),e.track===t})),i||n&&r?h.default.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):n?n.getStats():r?r.getStats():h.default.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return o.apply(this,arguments)}}}}function b(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},(0,v.default)(this._shimmedLocalStreams).map((function(t){return e._shimmedLocalStreams[t][0]}))};var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var r=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(r)&&this._shimmedLocalStreams[n.id].push(r):this._shimmedLocalStreams[n.id]=[n,r],r};var n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var t=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((function(e){var n=t.getSenders().find((function(t){return t.track===e}));if(n)throw new DOMException("Track already exists.","InvalidAccessError")}));var r=this.getSenders();n.apply(this,arguments);var i=this.getSenders().filter((function(e){return-1===r.indexOf(e)}));this._shimmedLocalStreams[e.id]=[e].concat(i)};var r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],r.apply(this,arguments)};var i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&(0,v.default)(this._shimmedLocalStreams).forEach((function(n){var r=t._shimmedLocalStreams[n].indexOf(e);-1!==r&&t._shimmedLocalStreams[n].splice(r,1),1===t._shimmedLocalStreams[n].length&&delete t._shimmedLocalStreams[n]})),i.apply(this,arguments)}}function w(e){if(e.RTCPeerConnection){var t=a.detectBrowser(e);if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return b(e);var n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this,t=n.apply(this);return this._reverseStreams=this._reverseStreams||{},t.map((function(t){return e._reverseStreams[t.id]}))};var r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){var n=this;if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((function(e){var t=n.getSenders().find((function(t){return t.track===e}));if(t)throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[t.id]){var i=new e.MediaStream(t.getTracks());this._streams[t.id]=i,this._reverseStreams[i.id]=t,t=i}r.apply(this,[t])};var i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){var r=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var i=[].slice.call(arguments,1);if(1!==i.length||!i[0].getTracks().find((function(e){return e===t})))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");var o=this.getSenders().find((function(e){return e.track===t}));if(o)throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};var s=this._streams[n.id];if(s)s.addTrack(t),h.default.resolve().then((function(){r.dispatchEvent(new Event("negotiationneeded"))}));else{var a=new e.MediaStream([t]);this._streams[n.id]=a,this._reverseStreams[a.id]=n,this.addStream(a)}return this.getSenders().find((function(e){return e.track===t}))},["createOffer","createAnswer"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t],r=u({},t,(function(){var e=this,t=arguments,r=arguments.length&&"function"===typeof arguments[0];return r?n.apply(this,[function(n){var r=c(e,n);t[0].apply(null,[r])},function(e){t[1]&&t[1].apply(null,e)},arguments[2]]):n.apply(this,arguments).then((function(t){return c(e,t)}))}));e.RTCPeerConnection.prototype[t]=r[t]}));var o=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=f(this,arguments[0]),o.apply(this,arguments)):o.apply(this,arguments)};var s=(0,l.default)(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get:function(){var e=s.get.apply(this);return""===e.type?e:c(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");var n=e._pc===this;if(!n)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};var r=void 0;(0,v.default)(this._streams).forEach((function(n){var i=t._streams[n].getTracks().find((function(t){return e.track===t}));i&&(r=t._streams[n])})),r&&(1===r.getTracks().length?this.removeStream(this._reverseStreams[r.id]):r.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function c(e,t){var n=t.sdp;return(0,v.default)(e._reverseStreams||[]).forEach((function(t){var r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(i.id,"g"),r.id)})),new RTCSessionDescription({type:t.type,sdp:n})}function f(e,t){var n=t.sdp;return(0,v.default)(e._reverseStreams||[]).forEach((function(t){var r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(r.id,"g"),i.id)})),new RTCSessionDescription({type:t.type,sdp:n})}}function x(e){var t=a.detectBrowser(e);if(!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection){var n=0===e.RTCPeerConnection.prototype.addIceCandidate.length;t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t],r=u({},t,(function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}));e.RTCPeerConnection.prototype[t]=r[t]}));var r=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return n||arguments[0]?t.version<78&&arguments[0]&&""===arguments[0].candidate?h.default.resolve():r.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),h.default.resolve())}}}function E(e){var t=a.detectBrowser(e);a.wrapPeerConnectionEvent(e,"negotiationneeded",(function(e){var n=e.target;if(!(t.version<72||n.getConfiguration&&"plan-b"===n.getConfiguration().sdpSemantics)||"stable"===n.signalingState)return e}))}},{"../utils.js":15,"./getdisplaymedia":4,"./getusermedia":5}],4:[function(e,t,n){function r(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"===typeof t?e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then((function(t){var r=n.video&&n.video.width,i=n.video&&n.video.height,o=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:o||3}},r&&(n.video.mandatory.maxWidth=r),i&&(n.video.mandatory.maxHeight=i),e.navigator.mediaDevices.getUserMedia(n)}))}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=r},{}],5:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r="function"===typeof C.default&&"symbol"===(0,I.default)(S.default)?function(e){return"undefined"===typeof e?"undefined":(0,I.default)(e)}:function(e){return e&&"function"===typeof C.default&&e.constructor===C.default&&e!==C.default.prototype?"symbol":"undefined"===typeof e?"undefined":(0,I.default)(e)};n.shimGetUserMedia=c;var i=e("../utils.js"),o=s(i);function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}var a=o.log;function c(e){var t=e&&e.navigator;if(t.mediaDevices){var n=o.detectBrowser(e),i=function(e){if("object"!==("undefined"===typeof e?"undefined":r(e))||e.mandatory||e.optional)return e;var t={};return(0,v.default)(e).forEach((function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var i="object"===r(e[n])?e[n]:{ideal:e[n]};void 0!==i.exact&&"number"===typeof i.exact&&(i.min=i.max=i.exact);var o=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==i.ideal){t.optional=t.optional||[];var s={};"number"===typeof i.ideal?(s[o("min",n)]=i.ideal,t.optional.push(s),s={},s[o("max",n)]=i.ideal,t.optional.push(s)):(s[o("",n)]=i.ideal,t.optional.push(s))}void 0!==i.exact&&"number"!==typeof i.exact?(t.mandatory=t.mandatory||{},t.mandatory[o("",n)]=i.exact):["min","max"].forEach((function(e){void 0!==i[e]&&(t.mandatory=t.mandatory||{},t.mandatory[o(e,n)]=i[e])}))}})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},s=function(e,o){if(n.version>=61)return o(e);if(e=JSON.parse((0,f.default)(e)),e&&"object"===r(e.audio)){var s=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};e=JSON.parse((0,f.default)(e)),s(e.audio,"autoGainControl","googAutoGainControl"),s(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=i(e.audio)}if(e&&"object"===r(e.video)){var c=e.video.facingMode;c=c&&("object"===("undefined"===typeof c?"undefined":r(c))?c:{ideal:c});var u=n.version<66;if(c&&("user"===c.exact||"environment"===c.exact||"user"===c.ideal||"environment"===c.ideal)&&(!t.mediaDevices.getSupportedConstraints||!t.mediaDevices.getSupportedConstraints().facingMode||u)){delete e.video.facingMode;var d=void 0;if("environment"===c.exact||"environment"===c.ideal?d=["back","rear"]:"user"!==c.exact&&"user"!==c.ideal||(d=["front"]),d)return t.mediaDevices.enumerateDevices().then((function(t){t=t.filter((function(e){return"videoinput"===e.kind}));var n=t.find((function(e){return d.some((function(t){return e.label.toLowerCase().includes(t)}))}));return!n&&t.length&&d.includes("back")&&(n=t[t.length-1]),n&&(e.video.deviceId=c.exact?{exact:n.deviceId}:{ideal:n.deviceId}),e.video=i(e.video),a("chrome: "+(0,f.default)(e)),o(e)}))}e.video=i(e.video)}return a("chrome: "+(0,f.default)(e)),o(e)},c=function(e){return n.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}},u=function(e,n,r){s(e,(function(e){t.webkitGetUserMedia(e,n,(function(e){r&&r(c(e))}))}))};if(t.getUserMedia=u.bind(t),t.mediaDevices.getUserMedia){var d=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return s(e,(function(e){return d(e).then((function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach((function(e){e.stop()})),new DOMException("","NotFoundError");return t}),(function(e){return h.default.reject(c(e))}))}))}}}}},{"../utils.js":15}],6:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r="function"===typeof C.default&&"symbol"===(0,I.default)(S.default)?function(e){return"undefined"===typeof e?"undefined":(0,I.default)(e)}:function(e){return e&&"function"===typeof C.default&&e.constructor===C.default&&e!==C.default.prototype?"symbol":"undefined"===typeof e?"undefined":(0,I.default)(e)};n.shimRTCIceCandidate=l,n.shimMaxMessageSize=p,n.shimSendThrowTypeError=h,n.shimConnectionState=m,n.removeAllowExtmapMixed=v;var i=e("sdp"),o=d(i),s=e("./utils"),a=u(s);function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function d(e){return e&&e.__esModule?e:{default:e}}function l(e){if(!(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)){var t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"===("undefined"===typeof e?"undefined":r(e))&&e.candidate&&0===e.candidate.indexOf("a=")&&(e=JSON.parse((0,f.default)(e)),e.candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){var n=new t(e),i=o.default.parseCandidate(e.candidate),s=(0,c.default)(n,i);return s.toJSON=function(){return{candidate:s.candidate,sdpMid:s.sdpMid,sdpMLineIndex:s.sdpMLineIndex,usernameFragment:s.usernameFragment}},s}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,a.wrapPeerConnectionEvent(e,"icecandidate",(function(t){return t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t}))}}function p(e){if(e.RTCPeerConnection){var t=a.detectBrowser(e);"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get:function(){return"undefined"===typeof this._sctp?null:this._sctp}});var n=function(e){if(!e||!e.sdp)return!1;var t=o.default.splitSections(e.sdp);return t.shift(),t.some((function(e){var t=o.default.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))},r=function(e){var t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;var n=parseInt(t[1],10);return n!==n?-1:n},i=function(e){var n=65536;return"firefox"===t.browser&&(n=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),n},s=function(e,n){var r=65536;"firefox"===t.browser&&57===t.version&&(r=65535);var i=o.default.matchPrefix(e.sdp,"a=max-message-size:");return i.length>0?r=parseInt(i[0].substr(19),10):"firefox"===t.browser&&-1!==n&&(r=2147483637),r},c=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){var e=this.getConfiguration(),o=e.sdpSemantics;"plan-b"===o&&Object.defineProperty(this,"sctp",{get:function(){return"undefined"===typeof this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){var a=r(arguments[0]),u=i(a),f=s(arguments[0],a),d=void 0;d=0===u&&0===f?Number.POSITIVE_INFINITY:0===u||0===f?Math.max(u,f):Math.min(u,f);var l={};Object.defineProperty(l,"maxMessageSize",{get:function(){return d}}),this._sctp=l}return c.apply(this,arguments)}}}function h(e){if(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype){var t=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){var e=t.apply(this,arguments);return n(e,this),e},a.wrapPeerConnectionEvent(e,"datachannel",(function(e){return n(e.channel,e.target),e}))}function n(e,t){var n=e.send;e.send=function(){var r=arguments[0],i=r.length||r.size||r.byteLength;if("open"===e.readyState&&t.sctp&&i>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}}function m(e){if(e.RTCPeerConnection&&!("connectionState"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null},set:function(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((function(e){var n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(e){var t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;var n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}}))}}function v(e){if(e.RTCPeerConnection){var t=a.detectBrowser(e);if(!("chrome"===t.browser&&t.version>=71)){var n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(e){return e&&e.sdp&&-1!==e.sdp.indexOf("\na=extmap-allow-mixed")&&(e.sdp=e.sdp.split("\n").filter((function(e){return"a=extmap-allow-mixed"!==e.trim()})).join("\n")),n.apply(this,arguments)}}}}},{"./utils":15,sdp:17}],7:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=n.shimGetUserMedia=void 0;var r=e("./getusermedia");Object.defineProperty(n,"shimGetUserMedia",{enumerable:!0,get:function(){return r.shimGetUserMedia}});var i=e("./getdisplaymedia");Object.defineProperty(n,"shimGetDisplayMedia",{enumerable:!0,get:function(){return i.shimGetDisplayMedia}}),n.shimPeerConnection=p,n.shimReplaceTrack=h;var o=e("../utils"),s=d(o),a=e("./filtericeservers"),c=e("rtcpeerconnection-shim"),u=f(c);function f(e){return e&&e.__esModule?e:{default:e}}function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function p(e){var t=s.detectBrowser(e);if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)){var n=(0,l.default)(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set:function(e){n.set.call(this,e);var t=new Event("enabled");t.enabled=e,this.dispatchEvent(t)}})}e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)&&Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);var r=(0,u.default)(e,t.version);e.RTCPeerConnection=function(e){return e&&e.iceServers&&(e.iceServers=(0,a.filterIceServers)(e.iceServers,t.version),s.log("ICE servers after filtering:",e.iceServers)),new r(e)},e.RTCPeerConnection.prototype=r.prototype}function h(e){e.RTCRtpSender&&!("replaceTrack"in e.RTCRtpSender.prototype)&&(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}},{"../utils":15,"./filtericeservers":8,"./getdisplaymedia":9,"./getusermedia":10,"rtcpeerconnection-shim":16}],8:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.filterIceServers=s;var r=e("../utils"),i=o(r);function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function s(e,t){var n=!1;return e=JSON.parse((0,f.default)(e)),e.filter((function(e){if(e&&(e.urls||e.url)){var t=e.urls||e.url;e.url&&!e.urls&&i.deprecated("RTCIceServer.url","RTCIceServer.urls");var r="string"===typeof t;return r&&(t=[t]),t=t.filter((function(e){if(0===e.indexOf("stun:"))return!1;var t=e.startsWith("turn")&&!e.startsWith("turn:[")&&e.includes("transport=udp");return t&&!n?(n=!0,!0):t&&!n})),delete e.url,e.urls=r?t[0]:t,!!t.length}}))}},{"../utils":15}],9:[function(e,t,n){function r(e){"getDisplayMedia"in e.navigator&&e.navigator.mediaDevices&&(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)))}Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=r},{}],10:[function(e,t,n){function r(e){var t=e&&e.navigator,n=function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString:function(){return this.name}}},r=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return r(e).catch((function(e){return h.default.reject(n(e))}))}}Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetUserMedia=r},{}],11:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=n.shimGetUserMedia=void 0;var r="function"===typeof C.default&&"symbol"===(0,I.default)(S.default)?function(e){return"undefined"===typeof e?"undefined":(0,I.default)(e)}:function(e){return e&&"function"===typeof C.default&&e.constructor===C.default&&e!==C.default.prototype?"symbol":"undefined"===typeof e?"undefined":(0,I.default)(e)},i=e("./getusermedia");Object.defineProperty(n,"shimGetUserMedia",{enumerable:!0,get:function(){return i.shimGetUserMedia}});var o=e("./getdisplaymedia");Object.defineProperty(n,"shimGetDisplayMedia",{enumerable:!0,get:function(){return o.shimGetDisplayMedia}}),n.shimOnTrack=d,n.shimPeerConnection=l,n.shimSenderGetStats=p,n.shimReceiverGetStats=m,n.shimRemoveStream=v,n.shimRTCDataChannel=g,n.shimAddTransceiver=b,n.shimCreateOffer=w,n.shimCreateAnswer=x;var s=e("../utils"),a=u(s);function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function f(e,t,n){return t in e?(0,_.default)(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e){"object"===("undefined"===typeof e?"undefined":r(e))&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function l(e){var t=a.detectBrowser(e);if("object"===("undefined"===typeof e?"undefined":r(e))&&(e.RTCPeerConnection||e.mozRTCPeerConnection)){if(!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t],r=f({},t,(function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}));e.RTCPeerConnection.prototype[t]=r[t]})),t.version<68){var n=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?arguments[0]&&""===arguments[0].candidate?h.default.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),h.default.resolve())}}var i={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},o=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=Array.prototype.slice.call(arguments),n=e[0],r=e[1],s=e[2];return o.apply(this,[n||null]).then((function(e){if(t.version<53&&!r)try{e.forEach((function(e){e.type=i[e.type]||e.type}))}catch(n){if("TypeError"!==n.name)throw n;e.forEach((function(t,n){e.set(n,(0,c.default)({},t,{type:i[t.type]||t.type}))}))}return e})).then(r,s)}}}function p(e){if("object"===("undefined"===typeof e?"undefined":r(e))&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpSender.prototype))){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):h.default.resolve(new y.default)}}}function m(e){if("object"===("undefined"===typeof e?"undefined":r(e))&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpReceiver.prototype))){var t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n}),a.wrapPeerConnectionEvent(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}}function v(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;a.deprecated("removeStream","removeTrack"),this.getSenders().forEach((function(n){n.track&&e.getTracks().includes(n.track)&&t.removeTrack(n)}))})}function g(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function b(e){if("object"===("undefined"===typeof e?"undefined":r(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];var e=arguments[1],n=e&&"sendEncodings"in e;n&&e.sendEncodings.forEach((function(e){if("rid"in e){var t=/^[a-z0-9]{0,16}$/i;if(!t.test(e.rid))throw new TypeError("Invalid RID value provided.")}if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")}));var r=t.apply(this,arguments);if(n){var i=r.sender,o=i.getParameters();"encodings"in o||(o.encodings=e.sendEncodings,this.setParametersPromises.push(i.setParameters(o).catch((function(){}))))}return r})}}function w(e){if("object"===("undefined"===typeof e?"undefined":r(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){var e=this,n=arguments;return this.setParametersPromises&&this.setParametersPromises.length?h.default.all(this.setParametersPromises).then((function(){return t.apply(e,n)})).finally((function(){e.setParametersPromises=[]})):t.apply(this,arguments)}}}function x(e){if("object"===("undefined"===typeof e?"undefined":r(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){var e=this,n=arguments;return this.setParametersPromises&&this.setParametersPromises.length?h.default.all(this.setParametersPromises).then((function(){return t.apply(e,n)})).finally((function(){e.setParametersPromises=[]})):t.apply(this,arguments)}}}},{"../utils":15,"./getdisplaymedia":12,"./getusermedia":13}],12:[function(e,t,n){function r(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){var r=new DOMException("getDisplayMedia without video constraints is undefined");return r.name="NotFoundError",r.code=8,h.default.reject(r)}return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})}Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=r},{}],13:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r="function"===typeof C.default&&"symbol"===(0,I.default)(S.default)?function(e){return"undefined"===typeof e?"undefined":(0,I.default)(e)}:function(e){return e&&"function"===typeof C.default&&e.constructor===C.default&&e!==C.default.prototype?"symbol":"undefined"===typeof e?"undefined":(0,I.default)(e)};n.shimGetUserMedia=a;var i=e("../utils"),o=s(i);function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){var t=o.detectBrowser(e),n=e&&e.navigator,i=e&&e.MediaStreamTrack;if(n.getUserMedia=function(e,t,r){o.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(t,r)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){var s=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},a=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(e){return"object"===("undefined"===typeof e?"undefined":r(e))&&"object"===r(e.audio)&&(e=JSON.parse((0,f.default)(e)),s(e.audio,"autoGainControl","mozAutoGainControl"),s(e.audio,"noiseSuppression","mozNoiseSuppression")),a(e)},i&&i.prototype.getSettings){var c=i.prototype.getSettings;i.prototype.getSettings=function(){var e=c.apply(this,arguments);return s(e,"mozAutoGainControl","autoGainControl"),s(e,"mozNoiseSuppression","noiseSuppression"),e}}if(i&&i.prototype.applyConstraints){var u=i.prototype.applyConstraints;i.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"===("undefined"===typeof e?"undefined":r(e))&&(e=JSON.parse((0,f.default)(e)),s(e,"autoGainControl","mozAutoGainControl"),s(e,"noiseSuppression","mozNoiseSuppression")),u.apply(this,[e])}}}}},{"../utils":15}],14:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r="function"===typeof C.default&&"symbol"===(0,I.default)(S.default)?function(e){return"undefined"===typeof e?"undefined":(0,I.default)(e)}:function(e){return e&&"function"===typeof C.default&&e.constructor===C.default&&e!==C.default.prototype?"symbol":"undefined"===typeof e?"undefined":(0,I.default)(e)};n.shimLocalStreamsAPI=a,n.shimRemoteStreamsAPI=u,n.shimCallbacksAPI=d,n.shimGetUserMedia=l,n.shimConstraints=p,n.shimRTCIceServerUrls=m,n.shimTrackEventTransceiver=v,n.shimCreateOfferLegacy=g,n.shimAudioContext=y;var i=e("../utils"),o=s(i);function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){if("object"===("undefined"===typeof e?"undefined":r(e))&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach((function(r){return t.call(n,r,e)})),e.getVideoTracks().forEach((function(r){return t.call(n,r,e)}))},e.RTCPeerConnection.prototype.addTrack=function(e){for(var n=this,r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return i&&i.forEach((function(e){n._localStreams?n._localStreams.includes(e)||n._localStreams.push(e):n._localStreams=[e]})),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._localStreams||(this._localStreams=[]);var n=this._localStreams.indexOf(e);if(-1!==n){this._localStreams.splice(n,1);var r=e.getTracks();this.getSenders().forEach((function(e){r.includes(e.track)&&t.removeTrack(e)}))}})}}function u(e){if("object"===("undefined"===typeof e?"undefined":r(e))&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){var t=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach((function(e){if(t._remoteStreams||(t._remoteStreams=[]),!t._remoteStreams.includes(e)){t._remoteStreams.push(e);var n=new Event("addstream");n.stream=e,t.dispatchEvent(n)}}))})}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((function(t){if(e._remoteStreams||(e._remoteStreams=[]),!(e._remoteStreams.indexOf(t)>=0)){e._remoteStreams.push(t);var n=new Event("addstream");n.stream=t,e.dispatchEvent(n)}}))}),t.apply(e,arguments)}}}function d(e){if("object"===("undefined"===typeof e?"undefined":r(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype,n=t.createOffer,i=t.createAnswer,o=t.setLocalDescription,s=t.setRemoteDescription,a=t.addIceCandidate;t.createOffer=function(e,t){var r=arguments.length>=2?arguments[2]:arguments[0],i=n.apply(this,[r]);return t?(i.then(e,t),h.default.resolve()):i},t.createAnswer=function(e,t){var n=arguments.length>=2?arguments[2]:arguments[0],r=i.apply(this,[n]);return t?(r.then(e,t),h.default.resolve()):r};var c=function(e,t,n){var r=o.apply(this,[e]);return n?(r.then(t,n),h.default.resolve()):r};t.setLocalDescription=c,c=function(e,t,n){var r=s.apply(this,[e]);return n?(r.then(t,n),h.default.resolve()):r},t.setRemoteDescription=c,c=function(e,t,n){var r=a.apply(this,[e]);return n?(r.then(t,n),h.default.resolve()):r},t.addIceCandidate=c}}function l(e){var t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){var n=t.mediaDevices,r=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=function(e){return r(p(e))}}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,r){t.mediaDevices.getUserMedia(e).then(n,r)}.bind(t))}function p(e){return e&&void 0!==e.video?(0,c.default)({},e,{video:o.compactObject(e.video)}):e}function m(e){var t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){for(var r=[],i=0;i<e.iceServers.length;i++){var s=e.iceServers[i];!s.hasOwnProperty("urls")&&s.hasOwnProperty("url")?(o.deprecated("RTCIceServer.url","RTCIceServer.urls"),s=JSON.parse((0,f.default)(s)),s.urls=s.url,delete s.url,r.push(s)):r.push(e.iceServers[i])}e.iceServers=r}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in e.RTCPeerConnection&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return t.generateCertificate}})}function v(e){"object"===("undefined"===typeof e?"undefined":r(e))&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function g(e){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){"undefined"!==typeof e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);var n=this.getTransceivers().find((function(e){return"audio"===e.receiver.track.kind}));!1===e.offerToReceiveAudio&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveAudio||n||this.addTransceiver("audio"),"undefined"!==typeof e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);var r=this.getTransceivers().find((function(e){return"video"===e.receiver.track.kind}));!1===e.offerToReceiveVideo&&r?"sendrecv"===r.direction?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":"recvonly"===r.direction&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):!0!==e.offerToReceiveVideo||r||this.addTransceiver("video")}return t.apply(this,arguments)}}function y(e){"object"!==("undefined"===typeof e?"undefined":r(e))||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}},{"../utils":15}],15:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r="function"===typeof C.default&&"symbol"===(0,I.default)(S.default)?function(e){return"undefined"===typeof e?"undefined":(0,I.default)(e)}:function(e){return e&&"function"===typeof C.default&&e.constructor===C.default&&e!==C.default.prototype?"symbol":"undefined"===typeof e?"undefined":(0,I.default)(e)};function i(e,t,n){return t in e?(0,_.default)(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.extractVersion=a,n.wrapPeerConnectionEvent=u,n.disableLog=f,n.disableWarnings=d,n.log=l,n.deprecated=p,n.detectBrowser=h,n.compactObject=g,n.walkStats=b,n.filterStats=w;var o=!0,s=!0;function a(e,t,n){var r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function u(e,t,n){if(e.RTCPeerConnection){var r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(e,r){if(e!==t)return i.apply(this,arguments);var o=function(e){var t=n(e);t&&r(t)};return this._eventMap=this._eventMap||{},this._eventMap[r]=o,i.apply(this,[e,o])};var o=r.removeEventListener;r.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[n])return o.apply(this,arguments);var r=this._eventMap[n];return delete this._eventMap[n],o.apply(this,[e,r])},(0,_.default)(r,"on"+t,{get:function(){return this["_on"+t]},set:function(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}}function f(e){return"boolean"!==typeof e?new Error("Argument type: "+("undefined"===typeof e?"undefined":r(e))+". Please use a boolean."):(o=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function d(e){return"boolean"!==typeof e?new Error("Argument type: "+("undefined"===typeof e?"undefined":r(e))+". Please use a boolean."):(s=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function l(){if("object"===("undefined"===typeof window?"undefined":r(window))){if(o)return;"undefined"!==typeof console&&"function"===typeof console.log&&console.log.apply(console,arguments)}}function p(e,t){s&&console.warn(e+" is deprecated, please use "+t+" instead.")}function h(e){var t=e.navigator,n={browser:null,version:null};if("undefined"===typeof e||!e.navigator)return n.browser="Not a browser.",n;if(t.mozGetUserMedia)n.browser="firefox",n.version=a(t.userAgent,/Firefox\/(\d+)\./,1);else if(t.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)n.browser="chrome",n.version=a(t.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(t.mediaDevices&&t.userAgent.match(/Edge\/(\d+).(\d+)$/))n.browser="edge",n.version=a(t.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!t.userAgent.match(/AppleWebKit\/(\d+)\./))return n.browser="Not a supported browser.",n;n.browser="safari",n.version=a(t.userAgent,/AppleWebKit\/(\d+)\./,1),n.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return n}function m(e){return"[object Object]"===Object.prototype.toString.call(e)}function g(e){return m(e)?(0,v.default)(e).reduce((function(t,n){var r=m(e[n]),o=r?g(e[n]):e[n],s=r&&!(0,v.default)(o).length;return void 0===o||s?t:(0,c.default)(t,i({},n,o))}),{}):e}function b(e,t,n){t&&!n.has(t.id)&&(n.set(t.id,t),(0,v.default)(t).forEach((function(r){r.endsWith("Id")?b(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach((function(t){b(e,e.get(t),n)}))})))}function w(e,t,n){var r=n?"outbound-rtp":"inbound-rtp",i=new y.default;if(null===t)return i;var o=[];return e.forEach((function(e){"track"===e.type&&e.trackIdentifier===t.id&&o.push(e)})),o.forEach((function(t){e.forEach((function(n){n.type===r&&n.trackId===t.id&&b(e,n,i)}))})),i}},{}],16:[function(e,t,n){var r=e("sdp");function i(e){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type}function o(e,t,n,i,o){var s=r.writeRtpDescription(e.kind,t);if(s+=r.writeIceParameters(e.iceGatherer.getLocalParameters()),s+=r.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":o||"active"),s+="a=mid:"+e.mid+"\r\n",e.rtpSender&&e.rtpReceiver?s+="a=sendrecv\r\n":e.rtpSender?s+="a=sendonly\r\n":e.rtpReceiver?s+="a=recvonly\r\n":s+="a=inactive\r\n",e.rtpSender){var a=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=a;var c="msid:"+(i?i.id:"-")+" "+a+"\r\n";s+="a="+c,s+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+c,e.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+c,s+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return s+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+r.localCName+"\r\n"),s}function s(e,t){var n=!1;return e=JSON.parse((0,f.default)(e)),e.filter((function(e){if(e&&(e.urls||e.url)){var r=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var i="string"===typeof r;return i&&(r=[r]),r=r.filter((function(e){var r=0===e.indexOf("turn:")&&-1!==e.indexOf("transport=udp")&&-1===e.indexOf("turn:[")&&!n;return r?(n=!0,!0):0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp")})),delete e.url,e.urls=i?r[0]:r,!!r.length}}))}function a(e,t){var n={codecs:[],headerExtensions:[],fecMechanisms:[]},r=function(e,t){e=parseInt(e,10);for(var n=0;n<t.length;n++)if(t[n].payloadType===e||t[n].preferredPayloadType===e)return t[n]},i=function(e,t,n,i){var o=r(e.parameters.apt,n),s=r(t.parameters.apt,i);return o&&s&&o.name.toLowerCase()===s.name.toLowerCase()};return e.codecs.forEach((function(r){for(var o=0;o<t.codecs.length;o++){var s=t.codecs[o];if(r.name.toLowerCase()===s.name.toLowerCase()&&r.clockRate===s.clockRate){if("rtx"===r.name.toLowerCase()&&r.parameters&&s.parameters.apt&&!i(r,s,e.codecs,t.codecs))continue;s=JSON.parse((0,f.default)(s)),s.numChannels=Math.min(r.numChannels,s.numChannels),n.codecs.push(s),s.rtcpFeedback=s.rtcpFeedback.filter((function(e){for(var t=0;t<r.rtcpFeedback.length;t++)if(r.rtcpFeedback[t].type===e.type&&r.rtcpFeedback[t].parameter===e.parameter)return!0;return!1}));break}}})),e.headerExtensions.forEach((function(e){for(var r=0;r<t.headerExtensions.length;r++){var i=t.headerExtensions[r];if(e.uri===i.uri){n.headerExtensions.push(i);break}}})),n}function u(e,t,n){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(n)}function d(e,t){var n=e.getRemoteCandidates().find((function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type}));return n||e.addRemoteCandidate(t),!n}function l(e,t){var n=new Error(t);return n.name=e,n.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],n}t.exports=function(e,t){function n(t,n){n.addTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:t}))}function p(t,n){n.removeTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:t}))}function m(t,n,r,i){var o=new Event("track");o.track=n,o.receiver=r,o.transceiver={receiver:r},o.streams=i,e.setTimeout((function(){t._dispatchEvent("track",o)}))}var g=function(n){var i=this,o=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach((function(e){i[e]=o[e].bind(o)})),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",n=JSON.parse((0,f.default)(n||{})),this.usingBundle="max-bundle"===n.bundlePolicy,"negotiate"===n.rtcpMuxPolicy)throw l("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(n.rtcpMuxPolicy||(n.rtcpMuxPolicy="require"),n.iceTransportPolicy){case"all":case"relay":break;default:n.iceTransportPolicy="all";break}switch(n.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:n.bundlePolicy="balanced";break}if(n.iceServers=s(n.iceServers||[],t),this._iceGatherers=[],n.iceCandidatePoolSize)for(var a=n.iceCandidatePoolSize;a>0;a--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:n.iceServers,gatherPolicy:n.iceTransportPolicy}));else n.iceCandidatePoolSize=0;this._config=n,this.transceivers=[],this._sdpSessionId=r.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(g.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(g.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),g.prototype.onicecandidate=null,g.prototype.onaddstream=null,g.prototype.ontrack=null,g.prototype.onremovestream=null,g.prototype.onsignalingstatechange=null,g.prototype.oniceconnectionstatechange=null,g.prototype.onconnectionstatechange=null,g.prototype.onicegatheringstatechange=null,g.prototype.onnegotiationneeded=null,g.prototype.ondatachannel=null,g.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"===typeof this["on"+e]&&this["on"+e](t))},g.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},g.prototype.getConfiguration=function(){return this._config},g.prototype.getLocalStreams=function(){return this.localStreams},g.prototype.getRemoteStreams=function(){return this.remoteStreams},g.prototype._createTransceiver=function(e,t){var n=this.transceivers.length>0,r={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&n)r.iceTransport=this.transceivers[0].iceTransport,r.dtlsTransport=this.transceivers[0].dtlsTransport;else{var i=this._createIceAndDtlsTransports();r.iceTransport=i.iceTransport,r.dtlsTransport=i.dtlsTransport}return t||this.transceivers.push(r),r},g.prototype.addTrack=function(t,n){if(this._isClosed)throw l("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var r,i=this.transceivers.find((function(e){return e.track===t}));if(i)throw l("InvalidAccessError","Track already exists.");for(var o=0;o<this.transceivers.length;o++)this.transceivers[o].track||this.transceivers[o].kind!==t.kind||(r=this.transceivers[o]);return r||(r=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(n)&&this.localStreams.push(n),r.track=t,r.stream=n,r.rtpSender=new e.RTCRtpSender(t,r.dtlsTransport),r.rtpSender},g.prototype.addStream=function(e){var n=this;if(t>=15025)e.getTracks().forEach((function(t){n.addTrack(t,e)}));else{var r=e.clone();e.getTracks().forEach((function(e,t){var n=r.getTracks()[t];e.addEventListener("enabled",(function(e){n.enabled=e.enabled}))})),r.getTracks().forEach((function(e){n.addTrack(e,r)}))}},g.prototype.removeTrack=function(t){if(this._isClosed)throw l("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(t instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var n=this.transceivers.find((function(e){return e.rtpSender===t}));if(!n)throw l("InvalidAccessError","Sender was not created by this connection.");var r=n.stream;n.rtpSender.stop(),n.rtpSender=null,n.track=null,n.stream=null;var i=this.transceivers.map((function(e){return e.stream}));-1===i.indexOf(r)&&this.localStreams.indexOf(r)>-1&&this.localStreams.splice(this.localStreams.indexOf(r),1),this._maybeFireNegotiationNeeded()},g.prototype.removeStream=function(e){var t=this;e.getTracks().forEach((function(e){var n=t.getSenders().find((function(t){return t.track===e}));n&&t.removeTrack(n)}))},g.prototype.getSenders=function(){return this.transceivers.filter((function(e){return!!e.rtpSender})).map((function(e){return e.rtpSender}))},g.prototype.getReceivers=function(){return this.transceivers.filter((function(e){return!!e.rtpReceiver})).map((function(e){return e.rtpReceiver}))},g.prototype._createIceGatherer=function(t,n){var r=this;if(n&&t>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var i=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(i,"state",{value:"new",writable:!0}),this.transceivers[t].bufferedCandidateEvents=[],this.transceivers[t].bufferCandidates=function(e){var n=!e.candidate||0===(0,v.default)(e.candidate).length;i.state=n?"completed":"gathering",null!==r.transceivers[t].bufferedCandidateEvents&&r.transceivers[t].bufferedCandidateEvents.push(e)},i.addEventListener("localcandidate",this.transceivers[t].bufferCandidates),i},g.prototype._gather=function(t,n){var i=this,o=this.transceivers[n].iceGatherer;if(!o.onlocalcandidate){var s=this.transceivers[n].bufferedCandidateEvents;this.transceivers[n].bufferedCandidateEvents=null,o.removeEventListener("localcandidate",this.transceivers[n].bufferCandidates),o.onlocalcandidate=function(e){if(!(i.usingBundle&&n>0)){var s=new Event("icecandidate");s.candidate={sdpMid:t,sdpMLineIndex:n};var a=e.candidate,u=!a||0===(0,v.default)(a).length;if(u)"new"!==o.state&&"gathering"!==o.state||(o.state="completed");else{"new"===o.state&&(o.state="gathering"),a.component=1,a.ufrag=o.getLocalParameters().usernameFragment;var f=r.writeCandidate(a);s.candidate=(0,c.default)(s.candidate,r.parseCandidate(f)),s.candidate.candidate=f,s.candidate.toJSON=function(){return{candidate:s.candidate.candidate,sdpMid:s.candidate.sdpMid,sdpMLineIndex:s.candidate.sdpMLineIndex,usernameFragment:s.candidate.usernameFragment}}}var d=r.getMediaSections(i._localDescription.sdp);d[s.candidate.sdpMLineIndex]+=u?"a=end-of-candidates\r\n":"a="+s.candidate.candidate+"\r\n",i._localDescription.sdp=r.getDescription(i._localDescription.sdp)+d.join("");var l=i.transceivers.every((function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state}));"gathering"!==i.iceGatheringState&&(i.iceGatheringState="gathering",i._emitGatheringStateChange()),u||i._dispatchEvent("icecandidate",s),l&&(i._dispatchEvent("icecandidate",new Event("icecandidate")),i.iceGatheringState="complete",i._emitGatheringStateChange())}},e.setTimeout((function(){s.forEach((function(e){o.onlocalcandidate(e)}))}),0)}},g.prototype._createIceAndDtlsTransports=function(){var t=this,n=new e.RTCIceTransport(null);n.onicestatechange=function(){t._updateIceConnectionState(),t._updateConnectionState()};var r=new e.RTCDtlsTransport(n);return r.ondtlsstatechange=function(){t._updateConnectionState()},r.onerror=function(){Object.defineProperty(r,"state",{value:"failed",writable:!0}),t._updateConnectionState()},{iceTransport:n,dtlsTransport:r}},g.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var n=this.transceivers[e].iceTransport;n&&(delete n.onicestatechange,delete this.transceivers[e].iceTransport);var r=this.transceivers[e].dtlsTransport;r&&(delete r.ondtlsstatechange,delete r.onerror,delete this.transceivers[e].dtlsTransport)},g.prototype._transceive=function(e,n,i){var o=a(e.localCapabilities,e.remoteCapabilities);n&&e.rtpSender&&(o.encodings=e.sendEncodingParameters,o.rtcp={cname:r.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(o.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(o)),i&&e.rtpReceiver&&o.codecs.length>0&&("video"===e.kind&&e.recvEncodingParameters&&t<15019&&e.recvEncodingParameters.forEach((function(e){delete e.rtx})),e.recvEncodingParameters.length?o.encodings=e.recvEncodingParameters:o.encodings=[{}],o.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(o.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(o.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(o))},g.prototype.setLocalDescription=function(e){var t,n,i=this;if(-1===["offer","answer"].indexOf(e.type))return h.default.reject(l("TypeError",'Unsupported type "'+e.type+'"'));if(!u("setLocalDescription",e.type,i.signalingState)||i._isClosed)return h.default.reject(l("InvalidStateError","Can not set local "+e.type+" in state "+i.signalingState));if("offer"===e.type)t=r.splitSections(e.sdp),n=t.shift(),t.forEach((function(e,t){var n=r.parseRtpParameters(e);i.transceivers[t].localCapabilities=n})),i.transceivers.forEach((function(e,t){i._gather(e.mid,t)}));else if("answer"===e.type){t=r.splitSections(i._remoteDescription.sdp),n=t.shift();var o=r.matchPrefix(n,"a=ice-lite").length>0;t.forEach((function(e,t){var s=i.transceivers[t],c=s.iceGatherer,u=s.iceTransport,f=s.dtlsTransport,d=s.localCapabilities,l=s.remoteCapabilities,p=r.isRejected(e)&&0===r.matchPrefix(e,"a=bundle-only").length;if(!p&&!s.rejected){var h=r.getIceParameters(e,n),m=r.getDtlsParameters(e,n);o&&(m.role="server"),i.usingBundle&&0!==t||(i._gather(s.mid,t),"new"===u.state&&u.start(c,h,o?"controlling":"controlled"),"new"===f.state&&f.start(m));var v=a(d,l);i._transceive(s,v.codecs.length>0,!1)}}))}return i._localDescription={type:e.type,sdp:e.sdp},"offer"===e.type?i._updateSignalingState("have-local-offer"):i._updateSignalingState("stable"),h.default.resolve()},g.prototype.setRemoteDescription=function(i){var o=this;if(-1===["offer","answer"].indexOf(i.type))return h.default.reject(l("TypeError",'Unsupported type "'+i.type+'"'));if(!u("setRemoteDescription",i.type,o.signalingState)||o._isClosed)return h.default.reject(l("InvalidStateError","Can not set remote "+i.type+" in state "+o.signalingState));var s={};o.remoteStreams.forEach((function(e){s[e.id]=e}));var c=[],f=r.splitSections(i.sdp),g=f.shift(),y=r.matchPrefix(g,"a=ice-lite").length>0,b=r.matchPrefix(g,"a=group:BUNDLE ").length>0;o.usingBundle=b;var _=r.matchPrefix(g,"a=ice-options:")[0];return o.canTrickleIceCandidates=!!_&&_.substr(14).split(" ").indexOf("trickle")>=0,f.forEach((function(u,f){var l=r.splitLines(u),h=r.getKind(u),m=r.isRejected(u)&&0===r.matchPrefix(u,"a=bundle-only").length,v=l[0].substr(2).split(" ")[2],_=r.getDirection(u,g),w=r.parseMsid(u),S=r.getMid(u)||r.generateIdentifier();if(m||"application"===h&&("DTLS/SCTP"===v||"UDP/DTLS/SCTP"===v))o.transceivers[f]={mid:S,kind:h,protocol:v,rejected:!0};else{var x,C,E,I,T,O,R,k,M;!m&&o.transceivers[f]&&o.transceivers[f].rejected&&(o.transceivers[f]=o._createTransceiver(h,!0));var A,P,j=r.parseRtpParameters(u);m||(A=r.getIceParameters(u,g),P=r.getDtlsParameters(u,g),P.role="client"),R=r.parseRtpEncodingParameters(u);var N=r.parseRtcpParameters(u),L=r.matchPrefix(u,"a=end-of-candidates",g).length>0,D=r.matchPrefix(u,"a=candidate:").map((function(e){return r.parseCandidate(e)})).filter((function(e){return 1===e.component}));if(("offer"===i.type||"answer"===i.type)&&!m&&b&&f>0&&o.transceivers[f]&&(o._disposeIceAndDtlsTransports(f),o.transceivers[f].iceGatherer=o.transceivers[0].iceGatherer,o.transceivers[f].iceTransport=o.transceivers[0].iceTransport,o.transceivers[f].dtlsTransport=o.transceivers[0].dtlsTransport,o.transceivers[f].rtpSender&&o.transceivers[f].rtpSender.setTransport(o.transceivers[0].dtlsTransport),o.transceivers[f].rtpReceiver&&o.transceivers[f].rtpReceiver.setTransport(o.transceivers[0].dtlsTransport)),"offer"!==i.type||m){if("answer"===i.type&&!m){x=o.transceivers[f],C=x.iceGatherer,E=x.iceTransport,I=x.dtlsTransport,T=x.rtpReceiver,O=x.sendEncodingParameters,k=x.localCapabilities,o.transceivers[f].recvEncodingParameters=R,o.transceivers[f].remoteCapabilities=j,o.transceivers[f].rtcpParameters=N,D.length&&"new"===E.state&&(!y&&!L||b&&0!==f?D.forEach((function(e){d(x.iceTransport,e)})):E.setRemoteCandidates(D)),b&&0!==f||("new"===E.state&&E.start(C,A,"controlling"),"new"===I.state&&I.start(P));var B=a(x.localCapabilities,x.remoteCapabilities),U=B.codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length;!U&&x.sendEncodingParameters[0].rtx&&delete x.sendEncodingParameters[0].rtx,o._transceive(x,"sendrecv"===_||"recvonly"===_,"sendrecv"===_||"sendonly"===_),!T||"sendrecv"!==_&&"sendonly"!==_?delete x.rtpReceiver:(M=T.track,w?(s[w.stream]||(s[w.stream]=new e.MediaStream),n(M,s[w.stream]),c.push([M,T,s[w.stream]])):(s.default||(s.default=new e.MediaStream),n(M,s.default),c.push([M,T,s.default])))}}else{x=o.transceivers[f]||o._createTransceiver(h),x.mid=S,x.iceGatherer||(x.iceGatherer=o._createIceGatherer(f,b)),D.length&&"new"===x.iceTransport.state&&(!L||b&&0!==f?D.forEach((function(e){d(x.iceTransport,e)})):x.iceTransport.setRemoteCandidates(D)),k=e.RTCRtpReceiver.getCapabilities(h),t<15019&&(k.codecs=k.codecs.filter((function(e){return"rtx"!==e.name}))),O=x.sendEncodingParameters||[{ssrc:1001*(2*f+2)}];var F,V=!1;if("sendrecv"===_||"sendonly"===_){if(V=!x.rtpReceiver,T=x.rtpReceiver||new e.RTCRtpReceiver(x.dtlsTransport,h),V)M=T.track,w&&"-"===w.stream||(w?(s[w.stream]||(s[w.stream]=new e.MediaStream,Object.defineProperty(s[w.stream],"id",{get:function(){return w.stream}})),Object.defineProperty(M,"id",{get:function(){return w.track}}),F=s[w.stream]):(s.default||(s.default=new e.MediaStream),F=s.default)),F&&(n(M,F),x.associatedRemoteMediaStreams.push(F)),c.push([M,T,F])}else x.rtpReceiver&&x.rtpReceiver.track&&(x.associatedRemoteMediaStreams.forEach((function(e){var t=e.getTracks().find((function(e){return e.id===x.rtpReceiver.track.id}));t&&p(t,e)})),x.associatedRemoteMediaStreams=[]);x.localCapabilities=k,x.remoteCapabilities=j,x.rtpReceiver=T,x.rtcpParameters=N,x.sendEncodingParameters=O,x.recvEncodingParameters=R,o._transceive(o.transceivers[f],!1,V)}}})),void 0===o._dtlsRole&&(o._dtlsRole="offer"===i.type?"active":"passive"),o._remoteDescription={type:i.type,sdp:i.sdp},"offer"===i.type?o._updateSignalingState("have-remote-offer"):o._updateSignalingState("stable"),(0,v.default)(s).forEach((function(t){var n=s[t];if(n.getTracks().length){if(-1===o.remoteStreams.indexOf(n)){o.remoteStreams.push(n);var r=new Event("addstream");r.stream=n,e.setTimeout((function(){o._dispatchEvent("addstream",r)}))}c.forEach((function(e){var t=e[0],r=e[1];n.id===e[2].id&&m(o,t,r,[n])}))}})),c.forEach((function(e){e[2]||m(o,e[0],e[1],[])})),e.setTimeout((function(){o&&o.transceivers&&o.transceivers.forEach((function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))}))}),4e3),h.default.resolve()},g.prototype.close=function(){this.transceivers.forEach((function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()})),this._isClosed=!0,this._updateSignalingState("closed")},g.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)},g.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,e.setTimeout((function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t._dispatchEvent("negotiationneeded",e)}}),0))},g.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++})),e="new",t.failed>0?e="failed":t.checking>0?e="checking":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0?e="connected":t.completed>0&&(e="completed"),e!==this.iceConnectionState){this.iceConnectionState=e;var n=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",n)}},g.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)})),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0?e="connecting":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0&&(e="connected"),e!==this.connectionState){this.connectionState=e;var n=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",n)}},g.prototype.createOffer=function(){var n=this;if(n._isClosed)return h.default.reject(l("InvalidStateError","Can not call createOffer after close"));var i=n.transceivers.filter((function(e){return"audio"===e.kind})).length,s=n.transceivers.filter((function(e){return"video"===e.kind})).length,a=arguments[0];if(a){if(a.mandatory||a.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==a.offerToReceiveAudio&&(i=!0===a.offerToReceiveAudio?1:!1===a.offerToReceiveAudio?0:a.offerToReceiveAudio),void 0!==a.offerToReceiveVideo&&(s=!0===a.offerToReceiveVideo?1:!1===a.offerToReceiveVideo?0:a.offerToReceiveVideo)}n.transceivers.forEach((function(e){"audio"===e.kind?(i--,i<0&&(e.wantReceive=!1)):"video"===e.kind&&(s--,s<0&&(e.wantReceive=!1))}));while(i>0||s>0)i>0&&(n._createTransceiver("audio"),i--),s>0&&(n._createTransceiver("video"),s--);var c=r.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.transceivers.forEach((function(i,o){var s=i.track,a=i.kind,c=i.mid||r.generateIdentifier();i.mid=c,i.iceGatherer||(i.iceGatherer=n._createIceGatherer(o,n.usingBundle));var u=e.RTCRtpSender.getCapabilities(a);t<15019&&(u.codecs=u.codecs.filter((function(e){return"rtx"!==e.name}))),u.codecs.forEach((function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),i.remoteCapabilities&&i.remoteCapabilities.codecs&&i.remoteCapabilities.codecs.forEach((function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)}))})),u.headerExtensions.forEach((function(e){var t=i.remoteCapabilities&&i.remoteCapabilities.headerExtensions||[];t.forEach((function(t){e.uri===t.uri&&(e.id=t.id)}))}));var f=i.sendEncodingParameters||[{ssrc:1001*(2*o+1)}];s&&t>=15019&&"video"===a&&!f[0].rtx&&(f[0].rtx={ssrc:f[0].ssrc+1}),i.wantReceive&&(i.rtpReceiver=new e.RTCRtpReceiver(i.dtlsTransport,a)),i.localCapabilities=u,i.sendEncodingParameters=f})),"max-compat"!==n._config.bundlePolicy&&(c+="a=group:BUNDLE "+n.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),c+="a=ice-options:trickle\r\n",n.transceivers.forEach((function(e,t){c+=o(e,e.localCapabilities,"offer",e.stream,n._dtlsRole),c+="a=rtcp-rsize\r\n",!e.iceGatherer||"new"===n.iceGatheringState||0!==t&&n.usingBundle||(e.iceGatherer.getLocalCandidates().forEach((function(e){e.component=1,c+="a="+r.writeCandidate(e)+"\r\n"})),"completed"===e.iceGatherer.state&&(c+="a=end-of-candidates\r\n"))}));var u=new e.RTCSessionDescription({type:"offer",sdp:c});return h.default.resolve(u)},g.prototype.createAnswer=function(){var n=this;if(n._isClosed)return h.default.reject(l("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==n.signalingState&&"have-local-pranswer"!==n.signalingState)return h.default.reject(l("InvalidStateError","Can not call createAnswer in signalingState "+n.signalingState));var i=r.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.usingBundle&&(i+="a=group:BUNDLE "+n.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),i+="a=ice-options:trickle\r\n";var s=r.getMediaSections(n._remoteDescription.sdp).length;n.transceivers.forEach((function(e,r){if(!(r+1>s)){if(e.rejected)return"application"===e.kind?"DTLS/SCTP"===e.protocol?i+="m=application 0 DTLS/SCTP 5000\r\n":i+="m=application 0 "+e.protocol+" webrtc-datachannel\r\n":"audio"===e.kind?i+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(i+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(i+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n");var c;if(e.stream)"audio"===e.kind?c=e.stream.getAudioTracks()[0]:"video"===e.kind&&(c=e.stream.getVideoTracks()[0]),c&&t>=15019&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1});var u=a(e.localCapabilities,e.remoteCapabilities),f=u.codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length;!f&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,i+=o(e,u,"answer",e.stream,n._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(i+="a=rtcp-rsize\r\n")}}));var c=new e.RTCSessionDescription({type:"answer",sdp:i});return h.default.resolve(c)},g.prototype.addIceCandidate=function(e){var t,n=this;return e&&void 0===e.sdpMLineIndex&&!e.sdpMid?h.default.reject(new TypeError("sdpMLineIndex or sdpMid required")):new h.default((function(i,o){if(!n._remoteDescription)return o(l("InvalidStateError","Can not add ICE candidate without a remote description"));if(e&&""!==e.candidate){var s=e.sdpMLineIndex;if(e.sdpMid)for(var a=0;a<n.transceivers.length;a++)if(n.transceivers[a].mid===e.sdpMid){s=a;break}var c=n.transceivers[s];if(!c)return o(l("OperationError","Can not add ICE candidate"));if(c.rejected)return i();var u=(0,v.default)(e.candidate).length>0?r.parseCandidate(e.candidate):{};if("tcp"===u.protocol&&(0===u.port||9===u.port))return i();if(u.component&&1!==u.component)return i();if((0===s||s>0&&c.iceTransport!==n.transceivers[0].iceTransport)&&!d(c.iceTransport,u))return o(l("OperationError","Can not add ICE candidate"));var f=e.candidate.trim();0===f.indexOf("a=")&&(f=f.substr(2)),t=r.getMediaSections(n._remoteDescription.sdp),t[s]+="a="+(u.type?f:"end-of-candidates")+"\r\n",n._remoteDescription.sdp=r.getDescription(n._remoteDescription.sdp)+t.join("")}else for(var p=0;p<n.transceivers.length;p++)if(!n.transceivers[p].rejected&&(n.transceivers[p].iceTransport.addRemoteCandidate({}),t=r.getMediaSections(n._remoteDescription.sdp),t[p]+="a=end-of-candidates\r\n",n._remoteDescription.sdp=r.getDescription(n._remoteDescription.sdp)+t.join(""),n.usingBundle))break;i()}))},g.prototype.getStats=function(t){if(t&&t instanceof e.MediaStreamTrack){var n=null;if(this.transceivers.forEach((function(e){e.rtpSender&&e.rtpSender.track===t?n=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(n=e.rtpReceiver)})),!n)throw l("InvalidAccessError","Invalid selector.");return n.getStats()}var r=[];return this.transceivers.forEach((function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach((function(t){e[t]&&r.push(e[t].getStats())}))})),h.default.all(r).then((function(e){var t=new y.default;return e.forEach((function(e){e.forEach((function(e){t.set(e.id,e)}))})),t}))};var b=["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"];b.forEach((function(t){var n=e[t];if(n&&n.prototype&&n.prototype.getStats){var r=n.prototype.getStats;n.prototype.getStats=function(){return r.apply(this).then((function(e){var t=new y.default;return(0,v.default)(e).forEach((function(n){e[n].type=i(e[n]),t.set(n,e[n])})),t}))}}}));var _=["createOffer","createAnswer"];return _.forEach((function(e){var t=g.prototype[e];g.prototype[e]=function(){var e=arguments;return"function"===typeof e[0]||"function"===typeof e[1]?t.apply(this,[arguments[2]]).then((function(t){"function"===typeof e[0]&&e[0].apply(null,[t])}),(function(t){"function"===typeof e[1]&&e[1].apply(null,[t])})):t.apply(this,arguments)}})),_=["setLocalDescription","setRemoteDescription","addIceCandidate"],_.forEach((function(e){var t=g.prototype[e];g.prototype[e]=function(){var e=arguments;return"function"===typeof e[1]||"function"===typeof e[2]?t.apply(this,arguments).then((function(){"function"===typeof e[1]&&e[1].apply(null)}),(function(t){"function"===typeof e[2]&&e[2].apply(null,[t])})):t.apply(this,arguments)}})),["getStats"].forEach((function(e){var t=g.prototype[e];g.prototype[e]=function(){var e=arguments;return"function"===typeof e[1]?t.apply(this,arguments).then((function(){"function"===typeof e[1]&&e[1].apply(null)})):t.apply(this,arguments)}})),g}},{sdp:17}],17:[function(e,t,n){var r={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};r.localCName=r.generateIdentifier(),r.splitLines=function(e){return e.trim().split("\n").map((function(e){return e.trim()}))},r.splitSections=function(e){var t=e.split("\nm=");return t.map((function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"}))},r.getDescription=function(e){var t=r.splitSections(e);return t&&t[0]},r.getMediaSections=function(e){var t=r.splitSections(e);return t.shift(),t},r.matchPrefix=function(e,t){return r.splitLines(e).filter((function(e){return 0===e.indexOf(t)}))},r.parseCandidate=function(e){var t;t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" ");for(var n={foundation:t[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1];break;case"ufrag":n.ufrag=t[r+1],n.usernameFragment=t[r+1];break;default:n[t[r]]=t[r+1];break}return n},r.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var n=e.type;return t.push("typ"),t.push(n),"host"!==n&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},r.parseIceOptions=function(e){return e.substr(14).split(" ")},r.parseRtpMap=function(e){var t=e.substr(9).split(" "),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},r.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},r.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},r.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},r.parseFmtp=function(e){for(var t,n={},r=e.substr(e.indexOf(" ")+1).split(";"),i=0;i<r.length;i++)t=r[i].trim().split("="),n[t[0].trim()]=t[1];return n},r.writeFmtp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&(0,v.default)(e.parameters).length){var r=[];(0,v.default)(e.parameters).forEach((function(t){e.parameters[t]?r.push(t+"="+e.parameters[t]):r.push(t)})),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},r.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},r.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},r.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substr(t+1,r-t-1),n.value=e.substr(r+1)):n.attribute=e.substr(t+1),n},r.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((function(e){return parseInt(e,10)}))}},r.getMid=function(e){var t=r.matchPrefix(e,"a=mid:")[0];if(t)return t.substr(6)},r.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},r.getDtlsParameters=function(e,t){var n=r.matchPrefix(e+t,"a=fingerprint:");return{role:"auto",fingerprints:n.map(r.parseFingerprint)}},r.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach((function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),n},r.parseCryptoLine=function(e){var t=e.substr(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},r.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"===(0,I.default)(e.keyParams)?r.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},r.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;var t=e.substr(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},r.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},r.getCryptoParameters=function(e,t){var n=r.matchPrefix(e+t,"a=crypto:");return n.map(r.parseCryptoLine)},r.getIceParameters=function(e,t){var n=r.matchPrefix(e+t,"a=ice-ufrag:")[0],i=r.matchPrefix(e+t,"a=ice-pwd:")[0];return n&&i?{usernameFragment:n.substr(12),password:i.substr(10)}:null},r.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},r.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},n=r.splitLines(e),i=n[0].split(" "),o=3;o<i.length;o++){var s=i[o],a=r.matchPrefix(e,"a=rtpmap:"+s+" ")[0];if(a){var c=r.parseRtpMap(a),u=r.matchPrefix(e,"a=fmtp:"+s+" ");switch(c.parameters=u.length?r.parseFmtp(u[0]):{},c.rtcpFeedback=r.matchPrefix(e,"a=rtcp-fb:"+s+" ").map(r.parseRtcpFb),t.codecs.push(c),c.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(c.name.toUpperCase());break;default:break}}}return r.matchPrefix(e,"a=extmap:").forEach((function(e){t.headerExtensions.push(r.parseExtmap(e))})),t},r.writeRtpDescription=function(e,t){var n="";n+="m="+e+" ",n+=t.codecs.length>0?"9":"0",n+=" UDP/TLS/RTP/SAVPF ",n+=t.codecs.map((function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType})).join(" ")+"\r\n",n+="c=IN IP4 0.0.0.0\r\n",n+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach((function(e){n+=r.writeRtpMap(e),n+=r.writeFmtp(e),n+=r.writeRtcpFb(e)}));var i=0;return t.codecs.forEach((function(e){e.maxptime>i&&(i=e.maxptime)})),i>0&&(n+="a=maxptime:"+i+"\r\n"),n+="a=rtcp-mux\r\n",t.headerExtensions&&t.headerExtensions.forEach((function(e){n+=r.writeExtmap(e)})),n},r.parseRtpEncodingParameters=function(e){var t,n=[],i=r.parseRtpParameters(e),o=-1!==i.fecMechanisms.indexOf("RED"),s=-1!==i.fecMechanisms.indexOf("ULPFEC"),a=r.matchPrefix(e,"a=ssrc:").map((function(e){return r.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute})),c=a.length>0&&a[0].ssrc,u=r.matchPrefix(e,"a=ssrc-group:FID").map((function(e){var t=e.substr(17).split(" ");return t.map((function(e){return parseInt(e,10)}))}));u.length>0&&u[0].length>1&&u[0][0]===c&&(t=u[0][1]),i.codecs.forEach((function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var r={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10)};c&&t&&(r.rtx={ssrc:t}),n.push(r),o&&(r=JSON.parse((0,f.default)(r)),r.fec={ssrc:c,mechanism:s?"red+ulpfec":"red"},n.push(r))}})),0===n.length&&c&&n.push({ssrc:c});var d=r.matchPrefix(e,"b=");return d.length&&(d=0===d[0].indexOf("b=TIAS:")?parseInt(d[0].substr(7),10):0===d[0].indexOf("b=AS:")?1e3*parseInt(d[0].substr(5),10)*.95-16e3:void 0,n.forEach((function(e){e.maxBitrate=d}))),n},r.parseRtcpParameters=function(e){var t={},n=r.matchPrefix(e,"a=ssrc:").map((function(e){return r.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute}))[0];n&&(t.cname=n.value,t.ssrc=n.ssrc);var i=r.matchPrefix(e,"a=rtcp-rsize");t.reducedSize=i.length>0,t.compound=0===i.length;var o=r.matchPrefix(e,"a=rtcp-mux");return t.mux=o.length>0,t},r.parseMsid=function(e){var t,n=r.matchPrefix(e,"a=msid:");if(1===n.length)return t=n[0].substr(7).split(" "),{stream:t[0],track:t[1]};var i=r.matchPrefix(e,"a=ssrc:").map((function(e){return r.parseSsrcMedia(e)})).filter((function(e){return"msid"===e.attribute}));return i.length>0?(t=i[0].value.split(" "),{stream:t[0],track:t[1]}):void 0},r.parseSctpDescription=function(e){var t,n=r.parseMLine(e),i=r.matchPrefix(e,"a=max-message-size:");i.length>0&&(t=parseInt(i[0].substr(19),10)),isNaN(t)&&(t=65536);var o=r.matchPrefix(e,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substr(12),10),protocol:n.fmt,maxMessageSize:t};var s=r.matchPrefix(e,"a=sctpmap:");if(s.length>0){var a=r.matchPrefix(e,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(a[0],10),protocol:a[1],maxMessageSize:t}}},r.writeSctpDescription=function(e,t){var n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},r.generateSessionId=function(){return Math.random().toString().substr(2,21)},r.writeSessionBoilerplate=function(e,t,n){var i,o=void 0!==t?t:2;i=e||r.generateSessionId();var s=n||"thisisadapterortc";return"v=0\r\no="+s+" "+i+" "+o+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},r.writeMediaSection=function(e,t,n,i){var o=r.writeRtpDescription(e.kind,t);if(o+=r.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=r.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":"active"),o+="a=mid:"+e.mid+"\r\n",e.direction?o+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?o+="a=sendrecv\r\n":e.rtpSender?o+="a=sendonly\r\n":e.rtpReceiver?o+="a=recvonly\r\n":o+="a=inactive\r\n",e.rtpSender){var s="msid:"+i.id+" "+e.rtpSender.track.id+"\r\n";o+="a="+s,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+s,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+s,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+r.localCName+"\r\n"),o},r.getDirection=function(e,t){for(var n=r.splitLines(e),i=0;i<n.length;i++)switch(n[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[i].substr(2);default:}return t?r.getDirection(t):"sendrecv"},r.getKind=function(e){var t=r.splitLines(e),n=t[0].split(" ");return n[0].substr(2)},r.isRejected=function(e){return"0"===e.split(" ",2)[1]},r.parseMLine=function(e){var t=r.splitLines(e),n=t[0].substr(2).split(" ");return{kind:n[0],port:parseInt(n[1],10),protocol:n[2],fmt:n.slice(3).join(" ")}},r.parseOLine=function(e){var t=r.matchPrefix(e,"o=")[0],n=t.substr(2).split(" ");return{username:n[0],sessionId:n[1],sessionVersion:parseInt(n[2],10),netType:n[3],addressType:n[4],address:n[5]}},r.isValidSDP=function(e){if("string"!==typeof e||0===e.length)return!1;for(var t=r.splitLines(e),n=0;n<t.length;n++)if(t[n].length<2||"="!==t[n].charAt(1))return!1;return!0},"object"===("undefined"===typeof t?"undefined":(0,I.default)(t))&&(t.exports=r)},{}]},{},[1])(1)}))},function(e,t,n){e.exports={default:n(150),__esModule:!0}},function(e,t,n){n(151),e.exports=n(84).Object.assign},function(e,t,n){var r=n(82);r(r.S+r.F,"Object",{assign:n(152)})},function(e,t,n){"use strict";var r=n(92),i=n(103),o=n(131),s=n(132),a=n(119),c=n(106),u=Object.assign;e.exports=!u||n(93)((function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=u({},e)[n]||Object.keys(u({},t)).join("")!=r}))?function(e,t){var n=a(e),u=arguments.length,f=1,d=o.f,l=s.f;while(u>f){var p,h=c(arguments[f++]),m=d?i(h).concat(d(h)):i(h),v=m.length,g=0;while(v>g)p=m[g++],r&&!l.call(h,p)||(n[p]=h[p])}return n}:u},function(e,t,n){e.exports={default:n(154),__esModule:!0}},function(e,t,n){n(155);var r=n(84).Object;e.exports=function(e,t){return r.getOwnPropertyDescriptor(e,t)}},function(e,t,n){var r=n(105),i=n(136).f;n(143)("getOwnPropertyDescriptor",(function(){return function(e,t){return i(r(e),t)}}))},function(e,t,n){e.exports={default:n(157),__esModule:!0}},function(e,t,n){n(137),n(76),n(120),n(158),n(176),n(177),e.exports=n(84).Promise},function(e,t,n){"use strict";var r,i,o,s,a=n(81),c=n(83),u=n(85),f=n(159),d=n(82),l=n(90),p=n(86),h=n(160),m=n(161),v=n(165),g=n(166).set,y=n(168)(),b=n(169),_=n(170),w=n(171),S=n(172),x="Promise",C=c.TypeError,E=c.process,I=E&&E.versions,T=I&&I.v8||"",O=c[x],R="process"==f(E),k=function(){},M=i=b.f,A=!!function(){try{var e=O.resolve(1),t=(e.constructor={})[n(117)("species")]=function(e){e(k,k)};return(R||"function"==typeof PromiseRejectionEvent)&&e.then(k)instanceof t&&0!==T.indexOf("6.6")&&-1===w.indexOf("Chrome/66")}catch(r){}}(),P=function(e){var t;return!(!l(e)||"function"!=typeof(t=e.then))&&t},j=function(e,t){if(!e._n){e._n=!0;var n=e._c;y((function(){var r=e._v,i=1==e._s,o=0,s=function(t){var n,o,s,a=i?t.ok:t.fail,c=t.resolve,u=t.reject,f=t.domain;try{a?(i||(2==e._h&&D(e),e._h=1),!0===a?n=r:(f&&f.enter(),n=a(r),f&&(f.exit(),s=!0)),n===t.promise?u(C("Promise-chain cycle")):(o=P(n))?o.call(n,c,u):c(n)):u(r)}catch(d){f&&!s&&f.exit(),u(d)}};while(n.length>o)s(n[o++]);e._c=[],e._n=!1,t&&!e._h&&N(e)}))}},N=function(e){g.call(c,(function(){var t,n,r,i=e._v,o=L(e);if(o&&(t=_((function(){R?E.emit("unhandledRejection",i,e):(n=c.onunhandledrejection)?n({promise:e,reason:i}):(r=c.console)&&r.error&&r.error("Unhandled promise rejection",i)})),e._h=R||L(e)?2:1),e._a=void 0,o&&t.e)throw t.v}))},L=function(e){return 1!==e._h&&0===(e._a||e._c).length},D=function(e){g.call(c,(function(){var t;R?E.emit("rejectionHandled",e):(t=c.onrejectionhandled)&&t({promise:e,reason:e._v})}))},B=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),j(t,!0))},U=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw C("Promise can't be resolved itself");(t=P(e))?y((function(){var r={_w:n,_d:!1};try{t.call(e,u(U,r,1),u(B,r,1))}catch(i){B.call(r,i)}})):(n._v=e,n._s=1,j(n,!1))}catch(r){B.call({_w:n,_d:!1},r)}}};A||(O=function(e){h(this,O,x,"_h"),p(e),r.call(this);try{e(u(U,this,1),u(B,this,1))}catch(t){B.call(this,t)}},r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=n(173)(O.prototype,{then:function(e,t){var n=M(v(this,O));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=R?E.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&j(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new r;this.promise=e,this.resolve=u(U,e,1),this.reject=u(B,e,1)},b.f=M=function(e){return e===O||e===s?new o(e):i(e)}),d(d.G+d.W+d.F*!A,{Promise:O}),n(116)(O,x),n(174)(x),s=n(84)[x],d(d.S+d.F*!A,x,{reject:function(e){var t=M(this),n=t.reject;return n(e),t.promise}}),d(d.S+d.F*(a||!A),x,{resolve:function(e){return S(a&&this===s?O:this,e)}}),d(d.S+d.F*!(A&&n(175)((function(e){O.all(e)["catch"](k)}))),x,{all:function(e){var t=this,n=M(t),r=n.resolve,i=n.reject,o=_((function(){var n=[],o=0,s=1;m(e,!1,(function(e){var a=o++,c=!1;n.push(void 0),s++,t.resolve(e).then((function(e){c||(c=!0,n[a]=e,--s||r(n))}),i)})),--s||r(n)}));return o.e&&i(o.v),n.promise},race:function(e){var t=this,n=M(t),r=n.reject,i=_((function(){m(e,!1,(function(e){t.resolve(e).then(n.resolve,r)}))}));return i.e&&r(i.v),n.promise}})},function(e,t,n){var r=n(107),i=n(117)("toStringTag"),o="Arguments"==r(function(){return arguments}()),s=function(e,t){try{return e[t]}catch(n){}};e.exports=function(e){var t,n,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=s(t=Object(e),i))?n:o?r(t):"Object"==(a=r(t))&&"function"==typeof t.callee?"Arguments":a}},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var r=n(85),i=n(162),o=n(163),s=n(89),a=n(109),c=n(164),u={},f={};t=e.exports=function(e,t,n,d,l){var p,h,m,v,g=l?function(){return e}:c(e),y=r(n,d,t?2:1),b=0;if("function"!=typeof g)throw TypeError(e+" is not iterable!");if(o(g)){for(p=a(e.length);p>b;b++)if(v=t?y(s(h=e[b])[0],h[1]):y(e[b]),v===u||v===f)return v}else for(m=g.call(e);!(h=m.next()).done;)if(v=i(m,y,h.value,t),v===u||v===f)return v};t.BREAK=u,t.RETURN=f},function(e,t,n){var r=n(89);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(s){var o=e["return"];throw void 0!==o&&r(o.call(e)),s}}},function(e,t,n){var r=n(99),i=n(117)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[i]===e)}},function(e,t,n){var r=n(159),i=n(117)("iterator"),o=n(99);e.exports=n(84).getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||o[r(e)]}},function(e,t,n){var r=n(89),i=n(86),o=n(117)("species");e.exports=function(e,t){var n,s=r(e).constructor;return void 0===s||void 0==(n=r(s)[o])?t:i(n)}},function(e,t,n){var r,i,o,s=n(85),a=n(167),c=n(115),u=n(94),f=n(83),d=f.process,l=f.setImmediate,p=f.clearImmediate,h=f.MessageChannel,m=f.Dispatch,v=0,g={},y="onreadystatechange",b=function(){var e=+this;if(g.hasOwnProperty(e)){var t=g[e];delete g[e],t()}},_=function(e){b.call(e.data)};l&&p||(l=function(e){var t=[],n=1;while(arguments.length>n)t.push(arguments[n++]);return g[++v]=function(){a("function"==typeof e?e:Function(e),t)},r(v),v},p=function(e){delete g[e]},"process"==n(107)(d)?r=function(e){d.nextTick(s(b,e,1))}:m&&m.now?r=function(e){m.now(s(b,e,1))}:h?(i=new h,o=i.port2,i.port1.onmessage=_,r=s(o.postMessage,o,1)):f.addEventListener&&"function"==typeof postMessage&&!f.importScripts?(r=function(e){f.postMessage(e+"","*")},f.addEventListener("message",_,!1)):r=y in u("script")?function(e){c.appendChild(u("script"))[y]=function(){c.removeChild(this),b.call(e)}}:function(e){setTimeout(s(b,e,1),0)}),e.exports={set:l,clear:p}},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var r=n(83),i=n(166).set,o=r.MutationObserver||r.WebKitMutationObserver,s=r.process,a=r.Promise,c="process"==n(107)(s);e.exports=function(){var e,t,n,u=function(){var r,i;c&&(r=s.domain)&&r.exit();while(e){i=e.fn,e=e.next;try{i()}catch(o){throw e?n():t=void 0,o}}t=void 0,r&&r.enter()};if(c)n=function(){s.nextTick(u)};else if(!o||r.navigator&&r.navigator.standalone)if(a&&a.resolve){var f=a.resolve(void 0);n=function(){f.then(u)}}else n=function(){i.call(r,u)};else{var d=!0,l=document.createTextNode("");new o(u).observe(l,{characterData:!0}),n=function(){l.data=d=!d}}return function(r){var i={fn:r,next:void 0};t&&(t.next=i),e||(e=i,n()),t=i}}},function(e,t,n){"use strict";var r=n(86);function i(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)}e.exports.f=function(e){return new i(e)}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(t){return{e:!0,v:t}}}},function(e,t,n){var r=n(83),i=r.navigator;e.exports=i&&i.userAgent||""},function(e,t,n){var r=n(89),i=n(90),o=n(169);e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=o.f(e),s=n.resolve;return s(t),n.promise}},function(e,t,n){var r=n(87);e.exports=function(e,t,n){for(var i in t)n&&e[i]?e[i]=t[i]:r(e,i,t[i]);return e}},function(e,t,n){"use strict";var r=n(83),i=n(84),o=n(88),s=n(92),a=n(117)("species");e.exports=function(e){var t="function"==typeof i[e]?i[e]:r[e];s&&t&&!t[a]&&o.f(t,a,{configurable:!0,get:function(){return this}})}},function(e,t,n){var r=n(117)("iterator"),i=!1;try{var o=[7][r]();o["return"]=function(){i=!0},Array.from(o,(function(){throw 2}))}catch(s){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},e(o)}catch(s){}return n}},function(e,t,n){"use strict";var r=n(82),i=n(84),o=n(83),s=n(165),a=n(172);r(r.P+r.R,"Promise",{finally:function(e){var t=s(this,i.Promise||o.Promise),n="function"==typeof e;return this.then(n?function(n){return a(t,e()).then((function(){return n}))}:e,n?function(n){return a(t,e()).then((function(){throw n}))}:e)}})},function(e,t,n){"use strict";var r=n(82),i=n(169),o=n(170);r(r.S,"Promise",{try:function(e){var t=i.f(this),n=o(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}})},function(e,t,n){e.exports={default:n(179),__esModule:!0}},function(e,t,n){n(180),e.exports=n(84).Object.keys},function(e,t,n){var r=n(119),i=n(103);n(143)("keys",(function(){return function(e){return i(r(e))}}))},function(e,t,n){e.exports={default:n(182),__esModule:!0}},function(e,t,n){n(137),n(76),n(120),n(183),n(190),n(193),n(195),e.exports=n(84).Map},function(e,t,n){"use strict";var r=n(184),i=n(185),o="Map";e.exports=n(186)(o,(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(e){var t=r.getEntry(i(this,o),e);return t&&t.v},set:function(e,t){return r.def(i(this,o),0===e?0:e,t)}},r,!0)},function(e,t,n){"use strict";var r=n(88).f,i=n(101),o=n(173),s=n(85),a=n(160),c=n(161),u=n(80),f=n(123),d=n(174),l=n(92),p=n(128).fastKey,h=n(185),m=l?"_s":"size",v=function(e,t){var n,r=p(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,u){var f=e((function(e,r){a(e,f,t,"_i"),e._t=t,e._i=i(null),e._f=void 0,e._l=void 0,e[m]=0,void 0!=r&&c(r,n,e[u],e)}));return o(f.prototype,{clear:function(){for(var e=h(this,t),n=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];e._f=e._l=void 0,e[m]=0},delete:function(e){var n=h(this,t),r=v(n,e);if(r){var i=r.n,o=r.p;delete n._i[r.i],r.r=!0,o&&(o.n=i),i&&(i.p=o),n._f==r&&(n._f=i),n._l==r&&(n._l=o),n[m]--}return!!r},forEach:function(e){h(this,t);var n,r=s(e,arguments.length>1?arguments[1]:void 0,3);while(n=n?n.n:this._f){r(n.v,n.k,this);while(n&&n.r)n=n.p}},has:function(e){return!!v(h(this,t),e)}}),l&&r(f.prototype,"size",{get:function(){return h(this,t)[m]}}),f},def:function(e,t,n){var r,i,o=v(e,t);return o?o.v=n:(e._l=o={i:i=p(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=o),r&&(r.n=o),e[m]++,"F"!==i&&(e._i[i]=o)),e},getEntry:v,setStrong:function(e,t,n){u(e,t,(function(e,n){this._t=h(e,t),this._k=n,this._l=void 0}),(function(){var e=this,t=e._k,n=e._l;while(n&&n.r)n=n.p;return e._t&&(e._l=n=n?n.n:e._t._f)?f(0,"keys"==t?n.k:"values"==t?n.v:[n.k,n.v]):(e._t=void 0,f(1))}),n?"entries":"values",!n,!0),d(t)}}},function(e,t,n){var r=n(90);e.exports=function(e,t){if(!r(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,n){"use strict";var r=n(83),i=n(82),o=n(128),s=n(93),a=n(87),c=n(173),u=n(161),f=n(160),d=n(90),l=n(116),p=n(88).f,h=n(187)(0),m=n(92);e.exports=function(e,t,n,v,g,y){var b=r[e],_=b,w=g?"set":"add",S=_&&_.prototype,x={};return m&&"function"==typeof _&&(y||S.forEach&&!s((function(){(new _).entries().next()})))?(_=t((function(t,n){f(t,_,e,"_c"),t._c=new b,void 0!=n&&u(n,g,t[w],t)})),h("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),(function(e){var t="add"==e||"set"==e;!(e in S)||y&&"clear"==e||a(_.prototype,e,(function(n,r){if(f(this,_,e),!t&&y&&!d(n))return"get"==e&&void 0;var i=this._c[e](0===n?0:n,r);return t?this:i}))})),y||p(_.prototype,"size",{get:function(){return this._c.size}})):(_=v.getConstructor(t,e,g,w),c(_.prototype,n),o.NEED=!0),l(_,e),x[e]=_,i(i.G+i.W+i.F,x),y||v.setStrong(_,e,g),_}},function(e,t,n){var r=n(85),i=n(106),o=n(119),s=n(109),a=n(188);e.exports=function(e,t){var n=1==e,c=2==e,u=3==e,f=4==e,d=6==e,l=5==e||d,p=t||a;return function(t,a,h){for(var m,v,g=o(t),y=i(g),b=r(a,h,3),_=s(y.length),w=0,S=n?p(t,_):c?p(t,0):void 0;_>w;w++)if((l||w in y)&&(m=y[w],v=b(m,w,g),e))if(n)S[w]=v;else if(v)switch(e){case 3:return!0;case 5:return m;case 6:return w;case 2:S.push(m)}else if(f)return!1;return d?-1:u||f?f:S}}},function(e,t,n){var r=n(189);e.exports=function(e,t){return new(r(e))(t)}},function(e,t,n){var r=n(90),i=n(133),o=n(117)("species");e.exports=function(e){var t;return i(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!i(t.prototype)||(t=void 0),r(t)&&(t=t[o],null===t&&(t=void 0))),void 0===t?Array:t}},function(e,t,n){var r=n(82);r(r.P+r.R,"Map",{toJSON:n(191)("Map")})},function(e,t,n){var r=n(159),i=n(192);e.exports=function(e){return function(){if(r(this)!=e)throw TypeError(e+"#toJSON isn't generic");return i(this)}}},function(e,t,n){var r=n(161);e.exports=function(e,t){var n=[];return r(e,!1,n.push,n,t),n}},function(e,t,n){n(194)("Map")},function(e,t,n){"use strict";var r=n(82);e.exports=function(e){r(r.S,e,{of:function(){var e=arguments.length,t=new Array(e);while(e--)t[e]=arguments[e];return new this(t)}})}},function(e,t,n){n(196)("Map")},function(e,t,n){"use strict";var r=n(82),i=n(86),o=n(85),s=n(161);e.exports=function(e){r(r.S,e,{from:function(e){var t,n,r,a,c=arguments[1];return i(this),t=void 0!==c,t&&i(c),void 0==e?new this:(n=[],t?(r=0,a=o(c,arguments[2],2),s(e,!1,(function(e){n.push(a(e,r++))}))):s(e,!1,n.push,n),new this(n))}})}},function(e,t,n){e.exports={default:n(198),__esModule:!0}},function(e,t,n){n(199);var r=n(84).Object;e.exports=function(e,t,n){return r.defineProperty(e,t,n)}},function(e,t,n){var r=n(82);r(r.S+r.F*!n(92),"Object",{defineProperty:n(88).f})},function(e,t,n){"use strict";var r=n(178),i=p(r),o=n(201),s=p(o),a=n(144),c=p(a),u=n(204),f=p(u),d=n(73),l=p(d);function p(e){return e&&e.__esModule?e:{default:e}}var h=n(72),m=n(205),v=h.tagLogger("Service"),g=n(207),y=n(211),b=n(208),_=n(217),w=n(218),S=new w({onExtLoaded:function(){v.info("Share desktop ext. had loaded.")}}),x=n(215),C=n(219),E=n(220);e.exports=h.prototypeExtend({__init__:function(){var e=this;v.warn("emedia version: ",window._emediaVersion||"unkown"),v.warn("UserAgent: ",navigator.userAgent);var t=h.parseURL("__log_level___");t&&(emedia.LOG_LEVEL=parseInt(t)),e.namespace=Math.uuidFast(),emedia.useCurrentXService=e,void 0===e.useRTCCfg&&(e.useRTCCfg=emedia.config.useRTCCfgIfServerReturn),"string"===typeof e.useRTCCfg&&(e.useRTCCfg=JSON.parse(e.useRTCCfg)),e.inboundAudio=C.inboundAudio.bind(e),e.inboundVideo=C.inboundVideo.bind(e),e.outboundAudio=C.outboundAudio.bind(e),e.outboundVideo=C.outboundVideo.bind(e),e._cache_receive_sessions=[]},AVPubstream:x.extend({__init__:function(){var e=this;e.type=0,e._located=!0,e.mutedMuted=!0,e.constaints&&(e.constaints.video||(e.voff=1),e.constaints.audio||(e.aoff=1)),e.constaints||(e.constaints={audio:!0,video:!0}),emedia.config.maxVideoBitrate&&(e.vbitrate=emedia.config.maxVideoBitrate),emedia.config.maxAudioBitrate&&(e.abitrate=emedia.config.maxAudioBitrate)}}),AudioMixerPubstream:new x.extend({__init__:function(){var e=this;if(e.type=2,e._located=!0,e.mutedMuted=!0,e.constaints||(e.constaints={audio:!0,video:!1}),e.constaints){var t=!!e.constaints.audio;e.constaints.video||(e.constaints.video=!1),e.constaints.video||(e.voff=1),e.constaints.audio||(e.aoff=1),!1===t&&(e.aoff=1)}emedia.config.maxVideoBitrate&&(e.vbitrate=emedia.config.maxVideoBitrate),emedia.config.maxAudioBitrate&&(e.abitrate=emedia.config.maxAudioBitrate)},onGotRemoteMediaStream:function(e){var t=this;if(!t.remotePlayAudioObject){var n="__o_remote_play_audio_"+t.id,r=document.querySelector("#"+n);r||(r=document.createElement("audio"),r.style.display="none",r.id="__o_remote_play_audio_"+t.id,r.autoplay=!0,r.playsinline=!0,document.body.appendChild(r)),t.remotePlayAudioObject=r}t.remotePlayAudioObject.srcObject=e}}),ShareDesktopPubstream:x.extend({voff:0,__init__:function(){var e=this;e.type=1,e._located=!0,e.mutedMuted=!0,e.constaints={audio:!this.aoff,video:!0},emedia.config.maxVideoBitrate&&(e.vbitrate=emedia.config.maxVideoBitrate),emedia.config.maxAudioBitrate&&(e.abitrate=emedia.config.maxAudioBitrate)}}),__assertCurrent:function(){var e=this;if(!e.current)throw v.error("Please call emedia.service.setup(ticket)"),"Please call emedia.service.setup(ticket)";if(e.current.closed)throw v.error("current closed"),"current closed"},hasAudioMixers:function(){var e=this;for(var t in e.__assertCurrent(),e.current.audioMixers){var n=e.current.audioMixers[t];if(n&&n.located())return!0}},getMediaDevices:function(e,t,n){function r(n){for(var r=[],i=0;i!==n.length;++i){var o=n[i];e?e===o.kind?r.push(o):"audioinput"===o.kind||"audiooutput"===o.kind||"videoinput"===o.kind||v.info("Some other kind of source/device: ",o):r.push(o)}t&&t(r)}"function"===typeof e&&(n=t,t=e,e=void 0),navigator.mediaDevices.enumerateDevices().then(r).catch((function(e){v.warn("navigator.getUserMedia error: ",e),n&&n(e)}))},attachSinkId:function(e,t){"undefined"!==typeof e.sinkId?e.setSinkId(t).then((function(){v.info("Success, audio output device attached: "+t)})).catch((function(e){var t=e;"SecurityError"===e.name&&(t="You need to use HTTPS for selecting audio output device: "+e),v.warn(t)})):v.warn("Browser does not support output device selection.")},_stopTracks:function(e){emedia.stopTracks(e),e&&v.warn("Stream tracks stop. it = ",e)},_enableVideoTracks:function(e,t){emedia.enableVideoTracks(e,t)},_enableAudioTracks:function(e,t){emedia.enableAudioTracks(e,t)},openUserMedia:function(e){v.debug("begin open user media",e);var t=this;if(!e)throw v.error("require pubS"),"require pubS";return{then:function(n,r){function i(){n.apply(null,arguments);var r=e.localStream;r&&(r.oninactive=t._onStreamInactive.bind(t,e,r),r.onactive=t._onStreamActive.bind(t,e,r))}if(e instanceof t.AVPubstream)t._openCamera(e,i,r);else if(e instanceof t.ShareDesktopPubstream)t._openSharedDesktop(e,i,r);else{if(!(e instanceof t.AudioMixerPubstream))throw v.error("Unspported pubS"),"Unspported pubS";t._openCamera(e,i,r)}}}},_openSharedDesktop:function(e,t,n){var r,i=this;function o(e){var r={audio:!0};e.constaints&&("object"===(0,l.default)(e.constaints.audio)&&e.constaints.audio||e.constaints.audio||(r.audio=!1)),i.__getUserMedia(r,(function(n,r){var o=new MediaStream;o._located=!0,r&&r.getAudioTracks().forEach((function(e){o.addTrack(e)})),e.localStream&&e.localStream.getVideoTracks().forEach((function(e){o.addTrack(e)})),e.localStream=o,t&&t(i.current,o)}),n)}if(e._localMediaStream&&(r=e._localMediaStream.getVideoTracks())&&r.length>0)return e.localStream=e._localMediaStream,void(e.constaints.audio?o(e):t&&t(i.current,stream));S.openDesktopMedia(e.screenOptions||["screen","window","tab"],(function(r){if(r instanceof b.OpenDesktopMedia){var s=r.desktopStreamId;v.warn("desktop streamId",s);var a={audio:!1,video:{mandatory:h.extend(e.mandatory||{},{chromeMediaSource:"desktop",chromeMediaSourceId:s}),optional:[]}};i.__getUserMedia(a,(function(n,r){e.localStream=r,e.constaints.audio?o(e):t&&t(i.current,r)}),n)}else i.current&&i.current.onEvent(new b.ShareDesktopExtensionNotFound({member:i.current})),n&&n(r)}))},_openCamera:function(e,t,n){var r=this,i=e.constaints||{audio:!0,video:!0};function o(n,i){r.__controlStream(e,i),e.localStream=i,t&&t(r.current,i)}r.__getUserMedia(i,o.bind(i),n)},__controlStream:function(e,t){emedia.enableVideoTracks(t,!e.voff),emedia.enableAudioTracks(t,!e.aoff)},__getUserMedia:function(e,t,n){v.debug("get user media. using constaints",e);var r,i=this;function o(e){v.debug("[WebRTC-API] getUserMedia() error: ",e),emedia.stopTracks(r),i.current&&i.current.onEvent(new b.OpenMediaError({member:i.current,event:e})),n&&n(new b.OpenMediaError({member:i.current,event:e}))}function s(n){i.current&&!i.current.closed&&(i.current._openedRtcMediaStreams[n.id]=n,n._bindAttendee=i.current,n._bindAttendeeId=i.current.getMemberId(),v.info("stream bind attendee.",n.id,i.current.ticket&&i.current.ticket.id,i.current.getMemberId(),i.current.memName)),emedia._yetGetUserMedia=!0,r=n;var s=n.getVideoTracks(),a=n.getAudioTracks();if(s.length>0){var c=s[0];v.debug(n.id,"using video device: ",c.id,c.label,c.kind,c.enabled)}if(a.length>0){var u=a[0];v.debug(n.id,"using audio device: ",u.id,u.label,u.kind,u.enabled)}if(n._located=!0,"boolean"===typeof n.active&&!n.active)return v.error("media stream not active. it is",n.id),void o({constraint:e,name:"NotAllowedStreamNonactive",message:"stream non-active"});t&&t(i.current,n)}e=h.extend({},e),i.__sysGetUserMedia(e,s,o)},_onStreamInactive:function(e,t,n){var r=this;v.warn("media stream inactive. it =",t.id),e.onMediaInactive&&r.current&&h.forEach(r.current._cacheStreams,(function(i,o){o.located()&&o.localStream&&o.localStream.id===t.id&&(o._webrtc&&o._webrtc.closed||e.onMediaInactive.call(o,t,n,r))}))},_onStreamActive:function(e,t,n){var r=this;v.warn("media stream active. it =",t.id),e.onMediaActive&&r.current&&h.forEach(r.current._cacheStreams,(function(i,o){o.located()&&o.localStream&&o.localStream.id===t.id&&e.onMediaActive.call(o,t,n,r)}))},__sysGetUserMedia:function(e,t,n){var r=function(){var e=(0,f.default)(s.default.mark((function e(t,n,r){var i,o,a;return s.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("object"===(0,l.default)(emedia.config.globalConstraints)&&("object"===(0,l.default)(emedia.config.globalConstraints.audio)&&t.audio&&("boolean"===typeof t.audio?t.audio=h.extend({},emedia.config.globalConstraints.audio):t.audio=h.extend({},emedia.config.globalConstraints.audio,t.audio)),"object"===(0,l.default)(emedia.config.globalConstraints.video)&&t.video&&("boolean"===typeof t.video?t.video=h.extend({},emedia.config.globalConstraints.video):t.video=h.extend({},emedia.config.globalConstraints.video,t.video))),v.info("navigator.mediaDevices.getUserMedia constaints = ",(0,c.default)(t)),i=new MediaStream,o=void 0,a=void 0,!t.audio){e.next=14;break}return e.prev=5,e.next=8,navigator.mediaDevices.getUserMedia({audio:!0});case 8:o=e.sent,e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](5),console.error("getUserMedia audio error",e.t0);case 14:if(!t.video){e.next=24;break}return e.prev=15,e.next=18,navigator.mediaDevices.getUserMedia({video:!0});case 18:a=e.sent,e.next=24;break;case 21:e.prev=21,e.t1=e["catch"](15),console.error("getUserMedia video error",e.t1);case 24:o&&o.getAudioTracks().forEach((function(e){i.addTrack(e)})),a&&a.getVideoTracks().forEach((function(e){i.addTrack(e)})),o||a?n(i):r({message:"getUserMedia error: not have input device"});case 27:case"end":return e.stop()}}),e,this,[[5,11],[15,21]])})));return function(t,n,r){return e.apply(this,arguments)}}();r(e,t,n)},attachMediaStream:window.attachMediaStream.bind({logger:v}),setup:function(e,t){var n=this;v.count(),v.debug("recv ticket",e,t),v.debug("use sdk version",window._emediaVersion),v.debug(navigator.userAgent),t=t||{};var r,i,o=t;if(h.isPlainObject(t))t=(0,c.default)(t);else try{o=JSON.parse(t)}catch(d){}if("string"===typeof e&&(e=JSON.parse(e)),r=i=e.memName,emedia._lastSetupConfr=e.confrId,emedia._lastSetupMemName=i,emedia._lastSetupDate=new Date,emedia._lastSetupTktId=e.tktId,n.current&&!n.current.closed){var s=new b.CurrentCalling;throw n.current.onEvent(s),v.error("confr not close. calling..."),s}var a=n.Attendee||y,u=a.extend(_),f=n.current=new u({_service:n,service:n,autoSub:emedia.config.autoSub,getCopyIntervalMillis:emedia.config.getCopyIntervalMillis,sysUserId:r,memName:i,resource:n.resource,nickName:n.nickName,ticket:e,ext:t,extObj:o,sessionFactory:function(){return n.newSession(this,e)}},n.listeners||{});return f},getStreamById:function(e){var t=this.current&&this.current._cacheStreams[e];return t&&h.extend(!1,{},t)},getStreamsByRtcId:function(e){if(this.current&&this.current._cacheStreams){var t=[];return h.forEach(this.current._cacheStreams,(function(n,r){r.rtcId===e&&t.push(r)})),t}},getMemberById:function(e){var t=this.current&&this.current._cacheMembers[e];return t&&h.extend(!1,{},t)},exit:function(e){v.warn("User click exit ",e),this.current&&this.current.exit(e)},join:function(e,t){v.debug("begin join ...");var n=this;if(n.__assertCurrent(),n.current._memberId)return v.warn("Had joined. igrone it"),void(e&&e(n.memId));n.current._session._sessionId=void 0,n.current.join(e,t)},withpublish:function(e){var t=this;if(!e||!e.localStream)throw v.error("pubS null or stream not open"),"pubS null or stream not open";return t.__assertCurrent(),t.current._memberId?v.warn("Had joined. igrone it"):t.current._session._sessionId=void 0,t.current.withpublish(e)},push:function(e,t,n){v.debug("begin push ...");var r=this;if(2===arguments.length&&(n=t,t=void 0),!e||!e.localStream)throw v.error("pubS or stream open"),"pubS or stream open";r.__assertCurrent(),r.current.push(e,t,n,!1)},subscribe:function(e,t,n,r){var i=this;if(v.info("begin subscribe ",e,r),t&&h.isPlainObject(t)&&(r=t,t=n=void 0),n&&h.isPlainObject(n)&&(r=n,n=t,t=void 0),emedia.isSafari){var o=function(){try{var e=u.shift();e&&e.onSub&&e.onSub.apply(e,arguments)}finally{a()}},s=function(){try{var e=u.shift();e&&e.subfail&&e.subfail.apply(e,arguments)}finally{a()}},a=function(){u.length>0&&i.__subscribe(u[0].streamId,o,s,u[0].subArgs)},c={streamId:e,onSub:t,subfail:n,subArgs:r},u=i.__safari_subs||(i.__safari_subs=[]);u.push(c),1===u.length&&a()}else i.__subscribe(e,t,n,r)},__subscribe:function(e,t,n,r){var i=this;i.__assertCurrent(),2==arguments.length&&(n=t,t=void 0),t&&h.isPlainObject(t)&&(r=t,t=void 0),n&&h.isPlainObject(n)&&(r=n,n=void 0),r||(r={subSVideo:!0,subSAudio:!0});i.current._cacheStreams[e];var o=i.current._getWebrtc(e),s=o&&o.isConnected(),a=s&&o.getRemoteStream();if(a&&(s=a.active)){var c=a.getAudioTracks().length,u=a.getVideoTracks().length;(c||!0!==r.subSAudio)&&(u||!0!==r.subSVideo)||(s=!1)}if(v.info("sub stream",e,", use prertcpeer =",s),s)return i.current.subscribeStream(o._rtcId,e,n,r,t),void(t&&t());o&&!o.closed&&i.current.closeWebrtc(o.getRtcId(),!0,!1),i.current.createWebrtcAndSubscribeStream(e,{onGotRemote:function(e){t&&t(e)},onEvent:function(e){n&&n(e)}},void 0,r)},closePubstream:function(e){e.located()&&(emedia.stopTracks(e._localMediaStream),emedia.stopTracks(e.localStream))},hungup:function(e){var t=this.getStreamById(e);try{this._hungup(e)}finally{this.onHungup&&t&&this.onHungup(t)}},_hungup:function(e){var t=this;t.__assertCurrent();var n=t.current,r=n._cacheStreams[e];r&&!r.closeReason&&r.updateAttributes({closeReason:"UserHangup"});var i=r&&r.rtcId;if(i&&(n.closeWebrtc(i),r.located()&&(1!==r.type&&r._localMediaStream&&emedia.stopTracks(r._localMediaStream),r.remotePlayAudioObject&&document.body.removeChild(r.remotePlayAudioObject),n._cacheStreams[e]&&n.onRemoveStream(r),h.removeAttribute(n._cacheStreams,e),t._streamAutomators&&h.removeAttribute(t._streamAutomators,e))),r&&!r.located()){if(n._linkedStreams[r.id]&&h.removeAttribute(n._linkedStreams,r.id),v.warn("Hangeup remove from _linkedStreams. stream = ",r.id),r=n._cacheStreams[e],!r)return;r.updateAttributes({rtcId:void 0,_webrtc:void 0,mediaStream:void 0});var o=new x(r);n.onUpdateStream(o,new o.Update(o))}},postMessage:function(e,t,n,r){var i=this,o=t;"string"!==typeof t&&(t=(0,c.default)(t)),i.__assertCurrent();var s,a=i.current,u=a._linkedStreams[e];s=u&&u.owner?u.owner.id:e;t=a.newMessage({op:1003,memId:s,arg:t});a.postMessage(t,(n||r)&&function(e){if(r&&r(e,o),0!=e.result){var i=new b.RemoteControlFail({memId:s,failed:e.result,cause:e.msg,type:"postMessage",postMessage:t});return a.onEvent(i),void(n&&n(i,o))}})},torchRemote:function(e,t,n,r){var i=this;"function"===typeof t&&(r=n,n=t,t=void 0),void 0!==t&&(t=t?1:0),i.__assertCurrent();var o=i.current,s=o._linkedStreams[e];if(!s||s.located())throw v.error("not exsits or locate, not connect",e),e+" not exsits or locate, not connect";var a=s.torch,u=(t=void 0===t?s.torch?0:1:t,{op2:20,streamId:e,tor:t}),f=o.newMessage({op:1002,memId:s.owner.id,arg:(0,c.default)(u),_reqOps:[100206]});s.updateAttributes({torch:t}),o.postMessage(f,(function(e){if(0!=e.result){var t=new b.RemoteControlFail({stream:s,failed:e.result,cause:e.msg,type:"torch_control"});return o.onEvent(t),s.updateAttributes({torch:a}),void(r&&r(t,s.torch))}n&&n(s.torch)}))},freezeFrameRemote:function(e,t,n){var r=this;r.__assertCurrent();var i=r.current,o=i._linkedStreams[e];if(!o||o.located())throw v.error("not exsits or locate, not connect",e),e+" not exsits or locate, not connect";var s=!o.freezeFrame,a={op2:20,streamId:e,frz:s?1:0},u=i.newMessage({op:1002,memId:o.owner.id,arg:(0,c.default)(a),_reqOps:[100204]});o.updateAttributes({freezeFrame:s}),i.postMessage(u,(function(e){if(0!=e.result){var r=new b.RemoteControlFail({stream:o,failed:e.result,cause:e.msg,type:"freeze_control"});return i.onEvent(r),o.updateAttributes({freezeFrame:!o.freezeFrame}),void(n&&n(r,o.freezeFrame))}t&&t(o.freezeFrame)}))},base64Img2Blob:function(e){for(var t=e.split(";base64,"),n=t[0].split(":")[1],r=window.atob(t[1]),i=r.length,o=new Uint8Array(i),s=0;s<i;++s)o[s]=r.charCodeAt(s);return new Blob([o],{type:n})},blob2URL:function(e){return URL.createObjectURL(e)},imagesPngContext2URL:function(e){var t=this;return t.blob2URL(t.blob2URL(e))},downloadFile:function(e,t,n){var r=this,i=document.createElement("a");i.style.display="none";var o,s=t?r.base64Img2Blob(t):n;i.download=e,i.href=o=r.blob2URL(s),i.rel="noopener";var a=document.createEvent("HTMLEvents");a.initEvent("click",!1,!1),i.dispatchEvent(a),document.body.appendChild(i),i.click(),i.parentNode.removeChild(i),setTimeout((function(){URL.revokeObjectURL&&URL.revokeObjectURL(o)}),4e4)},videoCaptureBase64Context2URL:function(e){var t=this;return t.imagesPngContext2URL(t.getCaptureBase64Context(e))},getCaptureBase64Context:function(e){var t=document.createElement("canvas");t.id="__capture_video_"+(new Date).getTime();t.width=e.videoWidth,t.height=e.videoHeight;var n=t.getContext("2d");n.drawImage(e,0,0,t.width,t.height);var r=t.toDataURL("images/png");return r},captureVideo:function(e,t,n){var r=this,i=r.getCaptureBase64Context(e);return t&&(n=n||"capture_"+(new Date).getTime(),r.downloadFile(n,i)),i},capturePictureRemote:function(e,t,n,r){var i=this;i.__assertCurrent();var o=i.current,s=o._linkedStreams[e];if(!s||s.located())throw v.error("not exsits or locate, not connect",e),e+" not exsits or locate, not connect";var a={op2:20,streamId:e,pic:1,rspBase64Pic:!0===t},u=o.newMessage({op:1002,memId:s.owner.id,arg:(0,c.default)(a),_reqOps:[100205]});o.postMessage(u,(function(e){if(0!=e.result){var i=new b.RemoteControlFail({stream:s,failed:e.result,cause:e.msg,type:"capture_control"});return o.onEvent(i),void(r&&r(i))}if(t)if(e.arg){var a=JSON.parse(e.arg);n&&n(a.pic)}else r&&r(new b.RemoteControlFail({stream:s,failed:e.result,cause:"Not found base64 pic"}));else n&&n()}))},zoomRemote:function(e,t,n,r){var i=this;i.__assertCurrent();var o=i.current,s=o._linkedStreams[e];if(!s||s.located())throw v.error("not exsits or locate, not connect",e),e+" not exsits or locate, not connect";s._zoom||s.updateAttributes({_zoom:1});var a=s._zoom*t;if(!(a<1)){s.updateAttributes({_zoom:a});var u={op2:20,streamId:e,zoom:Math.round(1e4*a)},f=o.newMessage({op:1002,memId:s.owner.id,arg:(0,c.default)(u),_reqOps:[100201]});o.postMessage(f,(function(e){if(0!=e.result){var t=new b.RemoteControlFail({stream:s,failed:e.result,cause:e.msg,type:"zoom_control"});return o.onEvent(t),void(n&&n(t))}r&&r()}))}},_getPosition:function(e){var t=0,n=0;while(e)n+=e.offsetLeft,t+=e.offsetTop,e=e.offsetParent;return{clientX:n,clientY:t}},eventXYAtMedia:function(e,t){var n=h.getDomPageRect(t),r=n.width,i=n.height,o=t.videoWidth,s=t.videoHeight;if(s/o>i/r){var a=o/s;s=i,o=s*a}else{a=s/o;o=r,s=o*a}var c,u,f=e;if((c=h.isFloat(f.x))&&(f.x=f.x*r),(u=h.isFloat(f.y))&&(f.y=f.y*i),!(Math.abs(f.x)<(r-o)/2||r-Math.abs(f.x)<(r-o)/2)&&!(Math.abs(f.y)<(i-s)/2||i-Math.abs(f.y)<(i-s)/2))return f.x=f.x<0?Math.floor(f.x+(r-o)/2):Math.floor(f.x-(r-o)/2),f.y=f.y<0?Math.floor(f.y+(i-s)/2):Math.floor(f.y-(i-s)/2),c&&(f.x=f.x/o),u&&(f.y=f.y/s),{x:f.x,y:f.y,width:o,height:s}},eventXYAtVideo:function(e,t){var n,r,i=h.getDomPageRect(t),o=i.width,s=i.height,a=t.videoWidth,c=t.videoHeight;if(c/a>s/o){var u=a/c;c=s,a=c*u}else{u=c/a;a=o,c=a*u}return(n=h.isFloat(e.x))&&(e.x=e.x*a),(r=h.isFloat(e.y))&&(e.y=e.y*c),e.x=e.x<0?Math.floor(e.x-(o-a)/2):Math.floor(e.x+(o-a)/2),e.y=e.y<0?Math.floor(e.y-(s-c)/2):Math.floor(e.y+(s-c)/2),n&&(e.x=e.x/o),r&&(e.y=e.y/s),e},getClickXY:function(e,t){var n=this,r=t||window.event,i=document.documentElement.scrollLeft||document.body.scrollLeft,o=document.documentElement.scrollTop||document.body.scrollTop,s=r.pageX||r.clientX+i,a=r.pageY||r.clientY+o,c=n._getPosition(e);v.info("Video tag position ",c.clientX,":",c.clientY);var u=e.videoWidth,f=e.videoHeight;if(f/u>e.offsetHeight/e.offsetWidth){var d=u/f;f=e.offsetHeight,u=f*d,c.clientX+=(e.offsetWidth-u)/2}else{d=f/u;u=e.offsetWidth,f=u*d,c.clientY+=(e.offsetHeight-f)/2}return v.info("Media position ",c.clientX,":",c.clientY),v.info("Media xy ",u,":",f),v.info("Click position ",s,":",a),{mediaWidth:u,mediaHeight:f,x:s-c.clientX,y:a-c.clientY}},focusExpoRemote:function(e,t,n,r,i){var o=this,s=n||window.event,a=document.documentElement.scrollLeft||document.body.scrollLeft,c=document.documentElement.scrollTop||document.body.scrollTop,u=s.pageX||s.clientX+a,f=s.pageY||s.clientY+c,d=o._getPosition(t);v.info("Video tag position ",d.clientX,":",d.clientY);var l=t.videoWidth,p=t.videoHeight;if(p/l>t.offsetHeight/t.offsetWidth){var h=l/p;p=t.offsetHeight,l=p*h,d.clientX+=(t.offsetWidth-l)/2}else{h=p/l;l=t.offsetWidth,p=l*h,d.clientY+=(t.offsetHeight-p)/2}v.info("Media position ",d.clientX,":",d.clientY),v.info("Media xy ",l,":",p),v.info("Click position ",u,":",f),o._focusExpo(e,l,p,u-d.clientX,f-d.clientY,r,i)},_focusExpo:function(e,t,n,r,i,o,s){var a=this;if(!(r<=0||r>t)&&!(i<=0||i>n)){a.__assertCurrent();var u=a.current,f=u._linkedStreams[e];if(!f||f.located())throw v.error("not exsits or locate, not connect",e),e+" not exsits or locate, not connect";var d={op2:20,streamId:e,focus:1,expo:1,x:0===t?0:Math.round(1e4*r/t),y:0===n?0:Math.round(1e4*i/n)},l=u.newMessage({op:1002,memId:f.owner.id,arg:(0,c.default)(d),_reqOps:[100202,100203]});u.postMessage(l,(function(e){if(0!=e.result){var t=new b.RemoteControlFail({stream:f,failed:e.result,cause:e.msg,type:"focus_expo_control"});return u.onEvent(t),void(o&&o(t))}s&&s()}))}},_republish:function(e,t,n){v.info("Republish stream. it = ",e.id);var r,i,o=this;if(e.id){var s=o.current.__getWebrtcFor(e.id);s&&o.current.closeWebrtc(s,!0),r=o.current._getWebrtc(e.id)}switch(e.type){case 0:emedia.stopTracks(e._localMediaStream),i=new o.AVPubstream(e);break;case 1:emedia.stopAndRemoveAudioTracks(e._localMediaStream),i=new o.ShareDesktopPubstream(e);break;case 2:emedia.stopTracks(e._localMediaStream),i=new o.AudioMixerPubstream(e);break}setTimeout((function(){o.openUserMedia(i).then((function(){e.localStream=i.localStream,e.isRepublished=!0,e.optimalVideoCodecs=e.optimalVideoCodecs||r&&r.optimalVideoCodecs,o.push(e,t,n)}),n)}),100)},switchMobileCamera:function(e,t,n){var r=this;if("string"===typeof e?e=r.current._cacheStreams[e]:e.id&&(e=r.current._cacheStreams[e.id]),e.voff)v.warn("Stream id = ",e.id," voff, do not chanage camera.");else{e.constaints||(e.constaints={});var i=h.extend({},e.constaints);e._lastConstaints=i,e.constaints.video="object"===(0,l.default)(e.constaints.video)?e.constaints.video:{},"user"!==e.constaints.video.facingMode&&e.constaints.video.facingMode?e.constaints.video.facingMode="user":e.constaints.video.facingMode={exact:"environment"},r._republish(e,(function(e){n&&n(e)}),(function(n){n instanceof emedia.event.OpenMediaError&&(e.constaints=i),t&&t(n)}))}},chanageCamera:function(e,t,n){var r=this;"string"===typeof e?e=r.current._cacheStreams[e]:e.id&&(e=r.current._cacheStreams[e.id]),e.voff?v.warn("Stream id = ",e.id," voff, do not chanage camera."):r.getMediaDevices("videoinput",(function(i){if(i.length<=1)v.warn("Only video input. not chanage");else{var o=e._cameraIndex;if(null===e._cameraIndex||void 0===e._cameraIndex){var s=e.getLocalMediaStream(),a=s&&s.getVideoTracks(),c=a&&a.length&&a[0];if(c&&c.getCapabilities&&"function"===typeof c.getCapabilities){var u=c.getCapabilities(),f=u&&u.deviceId;for(var d in i){var p=i[d];if(p.deviceId===f||p.label==c.label){o=parseInt(d);break}}}else for(var d in i){p=i[d];if(p.label==c.label){o=parseInt(d);break}}}while(o<i.length){var m=i[o];o=(o+1)%i.length;p=i[o],a=e.getLocalMediaStream().getVideoTracks();if(!a||0===a.length||p.label!=a[0].label)break}p=i[o];var g=p.label;v.warn("Stream ",e.id,m.label,">>",g),e._cameraIndex=o,e.constaints||(e.constaints={});var y=h.extend({},e.constaints);e._lastConstaints=y,e.constaints.video="object"===(0,l.default)(e.constaints.video)?e.constaints.video:{},e.constaints.video.deviceId={exact:p.deviceId},r._republish(e,(function(e){n&&n(e)}),(function(n){n instanceof emedia.event.OpenMediaError&&(e.constaints=y),t&&t(n)}))}}),t)},chanageConstraints:function(e,t,n,r){var i=this;if("string"===typeof e?e=i.current._cacheStreams[e]:e.id&&(e=i.current._cacheStreams[e.id]),e){if(v.info("chanage pubstream constraints. it",e.id,t),m.isObject(t)&&!m.isEqual(e.constaints,t)){var o=e.constaints||{},s=e.voff,a=e.aoff;return e._lastConstaints=o,e.constaints=h.extend(!0,{},o,t),e.aoff=e.constaints.audio?0:1,e.voff=e.constaints.video?0:1,void i._republish(e,(function(e){c(),r&&r(e)}),(function(t){t instanceof emedia.event.OpenMediaError&&(e.constaints=o,e.aoff=a,e.voff=s),n&&n(t)}))}c(),r&&r(e.getMediaStream())}else v.warn("Not found pubS");function c(){var t=e.getMediaStream();emedia.enableVideoTracks(t,!e.voff),emedia.enableAudioTracks(t,!e.aoff)}},voff:function(e,t,n,r){var i=this;"string"===typeof e&&(e=i.current._cacheStreams[e]);var o=e.voff;function s(){t!=o?(emedia.enableVideoTracks(e.getMediaStream(),!t),i.current&&i.current.voff(e,t)):v.info("pubstream voff not chanage.")}if(t=t?1:0,e.voff=t,!t&&e.constaints&&!e.constaints.video){var a=e.constaints.video;return e.constaints.video=!0,void i._republish(e,(function(e){s(),r&&r(e)}),(function(t){t instanceof emedia.event.OpenMediaError&&(e.constaints.video=a,e.voff=o),n&&n(t)}))}s(),r&&r(e.getMediaStream())},aoff:function(e,t,n,r){var i=this;"string"===typeof e&&(e=i.current._cacheStreams[e]);var o=e.aoff;function s(){t!=o?(emedia.enableAudioTracks(e.getMediaStream(),!t),i.current&&i.current.aoff(e,t)):v.info("pubstream aoff not chanage.")}if(t=t?1:0,e.aoff=t,!t&&e.constaints&&!e.constaints.audio){var a=e.constaints.audio;return e.constaints.audio=!0,void i._republish(e,(function(e){s(),r&&r(e)}),(function(t){t instanceof emedia.event.OpenMediaError&&(e.constaints.audio=a,e.aoff=o),n&&n(t)}))}s(),r&&r(e.getMediaStream())},iceing:function(e){var t=this;return h.isPlainObject(t.current._linkedStreams[e])},recording:function(e){var t=this;return h.isPlainObject(t.current._records[e])},startRecord:function(e,t){var n=this,r=n.current._linkedStreams[e];if(!r)throw v.error("not at linked streams",e),e+" not at linked streams";r._webrtc||t&&t(!1),n.current.startRecord(r,t)},stopRecord:function(e,t){var n=this,r=n.current._records[e];if(!r)throw v.error("not at recording streams",e),e+" not at recording streams";n.current.stopRecord(r,t)},getCurrentMembers:function(){var e=this;return e.current.getCurrentMembers()},_onCapturePicture:function(e){var t,n=this,r=e.arg.rspBase64Pic,i=e.arg.streamId,o=n.current._cacheStreams[i];if(r){var s;if("function"!==typeof n.getHTMLVideo||!(s=n.getHTMLVideo(i)))return void v.warn("Not support capture picture. caused by htmlVideo not found");t=n.getCaptureBase64Context(s)}else{if("function"!==typeof n.onCapturePicture)return void v.warn("Not support capture picture. caused by onCapturePicture not found");n.onCapturePicture(o)}var a=n.current.newMessage({op:1001,tsxId:e.tsxId,memId:e.memId,arg:(0,c.default)(t?{pic:t}:{}),result:0});return n.current.postMessage(a,(function(e){v.warn("Send remote control onCapturePicture response. the result = ",e.result,e.msg||"")})),!0},newSession:function(e,t){var n=this,r=n.Session||g,o=new r({ticket:t,owner:e,onTcklC:function(t){e.onTcklC(t.rtcId,t.cands)},onAcptC:function(t){e.onAcptC(t.rtcId,t.sdp,t.cands)},onAnsC:function(t){e.onAnsC(t.rtcId,t.sdp,t.cands)},onTermC:function(t){v.info("Server termc rtc: ",t.rtcId,t.message||t.msg);var r=t.endReason;if(21===r||22===r)h.forEach(e._cacheStreams,(function(n,i){var o;i.rtcId===t.rtcId&&(o=21===r?new emedia.event.SwitchVCodes({stream:i,useVCodes:t.useVCodes}):new emedia.event.SubFailNotSupportVCodes({stream:i}),e.onEvent(o))}));else if(23==r){var i=n.listeners.mgr.onPubVideoTooMuch;if(!i||"function"!=typeof i)return;i()}else if(24==r){var o=n.listeners.mgr.onPubDesktopTooMuch;if(!o||"function"!=typeof o)return;o()}else e.closeWebrtc(t.rtcId,!1,!0)},onEnter:function(t){e.onEnter(t.cver,t.mem)},onExit:function(t){e.onExit(t.cver,t.memId,t.reason||0)},onPub:function(t){e.onPub(t.cver,t.memId,t.pubS)},onUnpub:function(t){e.onUnpub(t.cver,t.memId,t.pubSId)},onMems:function(e){},onClose:function(t){e.onClose(t.cver,t.confrId)},onEvent:function(t){e.onEvent(t)},onStreamControl:function(t){e.onStreamControl(t.cver,t.streamId,t.voff,t.aoff,t.sver)},onRoleUpdate:function(t){e._onRoleUpdate(t.role,t.roleToken)},onRemoteControl:function(t){if("string"===typeof t.arg&&(t.arg=JSON.parse(t.arg)),20!==t.arg.op2||!t.arg.pic||!n._onCapturePicture.call(n,t)){if(30===t.arg.op2&&n._onRemotePannelControl)try{return void n._onRemotePannelControl.call(n,t)}catch(y){v.warn(y)}if(21!==t.arg.op2)if(22!==t.arg.op2){if(23===t.arg.op2){var r=n.listeners.mgr.onMuted;if(r&&"function"==typeof r)return void r()}if(24===t.arg.op2){var i=n.listeners.mgr.onUnmuted;if(i&&"function"==typeof i)return void i()}v.warn("Not support remote control");var o=e.newMessage({op:1001,tsxId:t.tsxId,memId:t.memId,arg:(0,c.default)(t.arg),result:t&&t.arg&&30===t.arg.op2?-405:-507,msg:"Not support the remote control."});e.postMessage(o,(function(e){v.warn("Send remote control response. the result = ",e.result,e.msg||"")}))}else{var s=t.arg,a=s.memId,u=s.nickName;if(!a)return void console.warn("onRequestToAdmin not have memberId");n._cache_receive_sessions.push(t);var f=n.listeners.mgr.onRequestToAdmin,d={memberId:a,nickName:u};f&&"function"==typeof f&&f(d,(function(e){return n.agreeRequestToAdmin(e)}),(function(e){return n.refuseRequestToAdmin(e)}))}else{var l=t.arg,p=l.memId,h=l.nickName;if(!p)return void console.warn("onRequestToTalker not have memberId");n._cache_receive_sessions.push(t);var m=n.listeners.mgr.onRequestToTalker,g={memberId:p,nickName:h};m&&"function"==typeof m&&m(g,(function(e,t){return n.agreeRequestToTalker(e,t)}),(function(e){return n.refuseRequestToTalker(e)}))}}},onRecvRemoteMessage:function(t){e._onRecvRemoteMessage&&e._onRecvRemoteMessage(t.memId,t.arg,t)},onConfrAttrsUpdated:function(e){var t=function(e){if(n.listeners.mgr){var t=n.listeners.mgr.catrrs||[];t=e.cattrs instanceof Array==1?o(t,e.cattrs):i(e.cattrs),n.listeners.mgr.catrrs=t;var r=n.listeners.mgr.onConfrAttrsUpdated;r&&"function"==typeof r&&(r=r.bind(n.listeners.mgr),r(t))}function i(e){var t=[];for(var n in e){var r={};r.key=n,r.val=e[n],r.op="",t.push(r)}return t}function o(e,t){return 0==t.length||t.forEach((function(t){var n=!1;e.forEach((function(r,i){if(r.key==t.key)return e.splice(i,1,t),void(n=!0)})),n||e.push(t)})),e}},r=function(e){if(e.cstate&&0!=(0,i.default)(e.cstate).length){var t=n.listeners.mgr.onConfrStateUpdated;t&&"function"==typeof t&&(t=t.bind(n.listeners.mgr),t(e.cstate))}};e.cattrs instanceof Array==1&&e.cattrs.length>0&&t(e),e.cattrs.constructor==Object&&(0,i.default)(e.cattrs).length>0&&t(e),e.cstate&&r(e)},onAdminChanged:function(e){var t=n.listeners.mgr.onAdminChanged;t&&"function"==typeof t&&t(e)},onRequestToTalkerReply:function(e){var t=n.listeners.mgr.onRequestToTalkerReply;t&&"function"==typeof t&&t(e)},onRequestToAdminReply:function(e){var t=n.listeners.mgr.onRequestToAdminReply;t&&"function"==typeof t&&t(e)},onLivecfgsChanged:function(e){e.liveCfgs&&emedia.config({liveCfgs:e.liveCfgs})}});return o},_judgeTalking:function(e){return!!e&&e.instant>=emedia.config.judgeTalkingByInstantGE},graffitiVideo:function(e,t,n){var r=this,i=r.getStreamById(e),o=new MediaStream;o._located=!0,i._localMediaStream.getAudioTracks().forEach((function(e){o.addTrack(e)}));var s=n.captureStream(25);s.getVideoTracks().forEach((function(e){o.addTrack(e)})),t.srcObject=o,i.updateAttributes({localStream:o,isRepublished:!0,optimalVideoCodecs:i.optimalVideoCodecs}),r.push(i)},resetCanvas:function(e){var t;if(arguments.length>1)for(var n=0;n<arguments.length;n++)t=arguments[n],"function"===typeof t&&t(e),"function"!==typeof t&&h.isPlainObject(t)&&h.forEach(t,(function(t,n){v.debug("Canvas set ",t," = ",n),e.setAttribute(t,n)}))},_random:function(e){return Math.floor(Math.random()*e)},requestFrame:function(e,t){var n,r=this;if("string"===typeof e)n=this.current._cacheStreams[e];else{if(!e.id)return;n=this.current._cacheStreams[e.id]}function i(){if(n.requestFrame(),n.canvas){var e=E.prototype.redraw.bind({_canvasContext:n.canvas.getContext("2d")});e(3,3)}}n&&(t?setTimeout((function(){i(),r.requestFrame(n,t)}),t):i())},graffitiCanvas:function(e,t){h.targetDOM(e)&&(t=e,e=!1);var n=this,r=new n.ShareDesktopPubstream({voff:0,aoff:e?0:1});t||(t=document.createElement("canvas")),t.getContext("2d"),r.canvas=t;var i=function(){};return i.prototype.setCanvas=function(e){return this.canvasTag=t,n.resetCanvas(t,e),this},i.prototype.push=function(e,t){var n=this;n._push(e,t)},i.prototype._push=function(i,o){"function"===typeof i&&(o=i,i=void 0),t.captureStream&&(t.captureStream.enabled=!0);var s=t.captureStream(i||25);function a(n){n.canvas=t,o&&o(n,t,s),e&&n.requestFrame()}function c(e,t){var r=new MediaStream;r._located=!0,e._localMediaStream&&e._localMediaStream.getAudioTracks().forEach((function(e){r.addTrack(e)})),s.getVideoTracks().forEach((function(e){r.addTrack(e)})),e._localMediaStream=r,e.localStream=r,n.push(e,t)}return e?n.__getUserMedia({audio:!0},(function(e,t){r._localMediaStream=t,c(r,a)})):c(r,a),this},new i},blobRecorder:function(e,t,n,r){var i=this;h.targetDOM(e)&&(e=e.srcObject),t||(t={mimeType:"video/webm;codecs=vp9"}),MediaRecorder.isTypeSupported(t.mimeType)||(v.info(t.mimeType," is not Supported"),t={mimeType:"video/webm;codecs=vp8"},MediaRecorder.isTypeSupported(t.mimeType)||(v.info(t.mimeType," is not Supported"),t={mimeType:"video/webm"},MediaRecorder.isTypeSupported(t.mimeType)||(v.info(t.mimeType," is not Supported"),t={mimeType:""})));try{var o=new MediaRecorder(e,t)}catch(c){return void v.error("Exception while creating MediaRecorder: ",c)}var s=[];function a(){this.blobs=s}return o.onstop=r||function(e){v.info("Recorder stopped: ",e)},o.ondataavailable=n||function(e){e.data&&e.data.size>0&&s.push(e.data)},a.prototype.start=function(e){o.start(e)},a.prototype.stop=function(){o.stop()},a.prototype.playurl=function(e){var t=new Blob(this.blobs,e||{type:"video/webm"});return window.URL.createObjectURL(t)},a.prototype.download=function(e,t){var n=new Blob(this.blobs,t||{type:"video/webm"});i.downloadFile(e,void 0,n)},new a},requestToTalker:function(){this.current.requestToTalker()},_get_session_by_memberId_and_op_type:function(e,t){if(e&&t){var n=void 0;return this._cache_receive_sessions.map((function(r){var o=r.arg;if(o&&o instanceof Object&&(0,i.default)(o).length>0){var s=o.memId,a=o.op2;s==e&&a==t&&(n=r)}})),n}},_delete_session_by_memberId_and_op_type:function(e,t){if(e&&t){var n=this;this._cache_receive_sessions.map((function(r,o){var s=r.arg;if(s&&s instanceof Object&&(0,i.default)(s).length>0){var a=s.memId,c=s.op2;a==e&&c==t&&n._cache_receive_sessions.splice(o,1)}}))}},agreeRequestToTalker:function(){var e=(0,f.default)(s.default.mark((function e(t,n){var r,i,o;return s.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=this._get_session_by_memberId_and_op_type(t,21),r){e.next=3;break}return e.abrupt("return");case 3:return i=r.arg.memName,o=this.listeners.confrId,e.prev=5,e.next=8,this.listeners.mgr.chanageRoles(3,[i],o);case 8:e.next=16;break;case 10:if(e.prev=10,e.t0=e["catch"](5),-523!=e.t0.error){e.next=16;break}if(!n||"function"!=typeof n){e.next=16;break}return n(),e.abrupt("return");case 16:this._delete_session_by_memberId_and_op_type(t,21);case 17:case"end":return e.stop()}}),e,this,[[5,10]])})));function t(t,n){return e.apply(this,arguments)}return t}(),refuseRequestToTalker:function(e){if(e){var t=this._get_session_by_memberId_and_op_type(e,21);t&&(this.current.refuseRequestToTalker(t),this._delete_session_by_memberId_and_op_type(e,21))}else console.warn("refuseRequestToTalker memberId is required")},requestToAdmin:function(){this.current.requestToAdmin()},agreeRequestToAdmin:function(e){var t=this._get_session_by_memberId_and_op_type(e,22);if(t){var n=t.arg.memName,r=this.listeners.confrId;this.listeners.mgr.chanageRoles(7,[n],r),this._delete_session_by_memberId_and_op_type(e,22)}},refuseRequestToAdmin:function(e){if(e){var t=this._get_session_by_memberId_and_op_type(e,22);t&&(this.current.refuseRequestToAdmin(t),this._delete_session_by_memberId_and_op_type(e,22))}else console.warn("refuseRequestToAdmin memberId is required")},muteBymemberId:function(e){this.current&&7==this.current.role&&this.current.muteBymemberId(e)},unmuteBymemberId:function(e){this.current&&7==this.current.role&&this.current.unmuteBymemberId(e)}})},function(e,t,n){e.exports=n(202)},function(e,t,n){var r=function(){return this}()||Function("return this")(),i=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,o=i&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,e.exports=n(203),i)r.regeneratorRuntime=o;else try{delete r.regeneratorRuntime}catch(s){r.regeneratorRuntime=void 0}},function(e,t){!function(t){"use strict";var n,r=Object.prototype,i=r.hasOwnProperty,o="function"===typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag",u="object"===typeof e,f=t.regeneratorRuntime;if(f)u&&(e.exports=f);else{f=t.regeneratorRuntime=u?e.exports:{},f.wrap=_;var d="suspendedStart",l="suspendedYield",p="executing",h="completed",m={},v={};v[s]=function(){return this};var g=Object.getPrototypeOf,y=g&&g(g(A([])));y&&y!==r&&i.call(y,s)&&(v=y);var b=C.prototype=S.prototype=Object.create(v);x.prototype=b.constructor=C,C.constructor=x,C[c]=x.displayName="GeneratorFunction",f.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===x||"GeneratorFunction"===(t.displayName||t.name))},f.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,C):(e.__proto__=C,c in e||(e[c]="GeneratorFunction")),e.prototype=Object.create(b),e},f.awrap=function(e){return{__await:e}},E(I.prototype),I.prototype[a]=function(){return this},f.AsyncIterator=I,f.async=function(e,t,n,r){var i=new I(_(e,t,n,r));return f.isGeneratorFunction(t)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(b),b[c]="Generator",b[s]=function(){return this},b.toString=function(){return"[object Generator]"},f.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){while(t.length){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},f.values=A,M.prototype={constructor:M,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,i){return a.type="throw",a.arg=e,t.next=r,i&&(t.method="next",t.arg=n),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var c=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:A(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=n),m}}}function _(e,t,n,r){var i=t&&t.prototype instanceof S?t:S,o=Object.create(i.prototype),s=new M(r||[]);return o._invoke=T(e,n,s),o}function w(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(r){return{type:"throw",arg:r}}}function S(){}function x(){}function C(){}function E(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function I(e){function t(n,r,o,s){var a=w(e[n],e,r);if("throw"!==a.type){var c=a.arg,u=c.value;return u&&"object"===typeof u&&i.call(u,"__await")?Promise.resolve(u.__await).then((function(e){t("next",e,o,s)}),(function(e){t("throw",e,o,s)})):Promise.resolve(u).then((function(e){c.value=e,o(c)}),s)}s(a.arg)}var n;function r(e,r){function i(){return new Promise((function(n,i){t(e,r,n,i)}))}return n=n?n.then(i,i):i()}this._invoke=r}function T(e,t,n){var r=d;return function(i,o){if(r===p)throw new Error("Generator is already running");if(r===h){if("throw"===i)throw o;return P()}n.method=i,n.arg=o;while(1){var s=n.delegate;if(s){var a=O(s,n);if(a){if(a===m)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var c=w(e,t,n);if("normal"===c.type){if(r=n.done?h:l,c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=h,n.method="throw",n.arg=c.arg)}}}function O(e,t){var r=e.iterator[t.method];if(r===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=n,O(e,t),"throw"===t.method))return m;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var i=w(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,m;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=n),t.delegate=null,m):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function R(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function M(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(R,this),this.reset(!0)}function A(e){if(e){var t=e[s];if(t)return t.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){while(++r<e.length)if(i.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=n,t.done=!0,t};return o.next=o}}return{next:P}}function P(){return{value:n,done:!0}}}(function(){return this}()||Function("return this")())},function(e,t,n){"use strict";t.__esModule=!0;var r=n(156),i=o(r);function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){return function(){var t=e.apply(this,arguments);return new i.default((function(e,n){function r(o,s){try{var a=t[o](s),c=a.value}catch(u){return void n(u)}if(!a.done)return i.default.resolve(c).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(c)}return r("next")}))}}},function(e,t,n){(function(e,n){var r,i;(function(){var o="object"==typeof self&&self.self===self&&self||"object"==typeof e&&e.global===e&&e||this||{},s=o._,a=Array.prototype,c=Object.prototype,u="undefined"!==typeof Symbol?Symbol.prototype:null,f=a.push,d=a.slice,l=c.toString,p=c.hasOwnProperty,h=Array.isArray,m=Object.keys,v=Object.create,g=function(){},y=function(e){return e instanceof y?e:this instanceof y?void(this._wrapped=e):new y(e)};t.nodeType?o._=y:(!n.nodeType&&n.exports&&(t=n.exports=y),t._=y),y.VERSION="1.9.1";var b,_=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,o){return e.call(t,n,r,i,o)}}return function(){return e.apply(t,arguments)}},w=function(e,t,n){return y.iteratee!==b?y.iteratee(e,t):null==e?y.identity:y.isFunction(e)?_(e,t,n):y.isObject(e)&&!y.isArray(e)?y.matcher(e):y.property(e)};y.iteratee=b=function(e,t){return w(e,t,1/0)};var S=function(e,t){return t=null==t?e.length-1:+t,function(){for(var n=Math.max(arguments.length-t,0),r=Array(n),i=0;i<n;i++)r[i]=arguments[i+t];switch(t){case 0:return e.call(this,r);case 1:return e.call(this,arguments[0],r);case 2:return e.call(this,arguments[0],arguments[1],r)}var o=Array(t+1);for(i=0;i<t;i++)o[i]=arguments[i];return o[t]=r,e.apply(this,o)}},x=function(e){if(!y.isObject(e))return{};if(v)return v(e);g.prototype=e;var t=new g;return g.prototype=null,t},C=function(e){return function(t){return null==t?void 0:t[e]}},E=function(e,t){return null!=e&&p.call(e,t)},I=function(e,t){for(var n=t.length,r=0;r<n;r++){if(null==e)return;e=e[t[r]]}return n?e:void 0},T=Math.pow(2,53)-1,O=C("length"),R=function(e){var t=O(e);return"number"==typeof t&&t>=0&&t<=T};y.each=y.forEach=function(e,t,n){var r,i;if(t=_(t,n),R(e))for(r=0,i=e.length;r<i;r++)t(e[r],r,e);else{var o=y.keys(e);for(r=0,i=o.length;r<i;r++)t(e[o[r]],o[r],e)}return e},y.map=y.collect=function(e,t,n){t=w(t,n);for(var r=!R(e)&&y.keys(e),i=(r||e).length,o=Array(i),s=0;s<i;s++){var a=r?r[s]:s;o[s]=t(e[a],a,e)}return o};var k=function(e){var t=function(t,n,r,i){var o=!R(t)&&y.keys(t),s=(o||t).length,a=e>0?0:s-1;for(i||(r=t[o?o[a]:a],a+=e);a>=0&&a<s;a+=e){var c=o?o[a]:a;r=n(r,t[c],c,t)}return r};return function(e,n,r,i){var o=arguments.length>=3;return t(e,_(n,i,4),r,o)}};y.reduce=y.foldl=y.inject=k(1),y.reduceRight=y.foldr=k(-1),y.find=y.detect=function(e,t,n){var r=R(e)?y.findIndex:y.findKey,i=r(e,t,n);if(void 0!==i&&-1!==i)return e[i]},y.filter=y.select=function(e,t,n){var r=[];return t=w(t,n),y.each(e,(function(e,n,i){t(e,n,i)&&r.push(e)})),r},y.reject=function(e,t,n){return y.filter(e,y.negate(w(t)),n)},y.every=y.all=function(e,t,n){t=w(t,n);for(var r=!R(e)&&y.keys(e),i=(r||e).length,o=0;o<i;o++){var s=r?r[o]:o;if(!t(e[s],s,e))return!1}return!0},y.some=y.any=function(e,t,n){t=w(t,n);for(var r=!R(e)&&y.keys(e),i=(r||e).length,o=0;o<i;o++){var s=r?r[o]:o;if(t(e[s],s,e))return!0}return!1},y.contains=y.includes=y.include=function(e,t,n,r){return R(e)||(e=y.values(e)),("number"!=typeof n||r)&&(n=0),y.indexOf(e,t,n)>=0},y.invoke=S((function(e,t,n){var r,i;return y.isFunction(t)?i=t:y.isArray(t)&&(r=t.slice(0,-1),t=t[t.length-1]),y.map(e,(function(e){var o=i;if(!o){if(r&&r.length&&(e=I(e,r)),null==e)return;o=e[t]}return null==o?o:o.apply(e,n)}))})),y.pluck=function(e,t){return y.map(e,y.property(t))},y.where=function(e,t){return y.filter(e,y.matcher(t))},y.findWhere=function(e,t){return y.find(e,y.matcher(t))},y.max=function(e,t,n){var r,i,o=-1/0,s=-1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e){e=R(e)?e:y.values(e);for(var a=0,c=e.length;a<c;a++)r=e[a],null!=r&&r>o&&(o=r)}else t=w(t,n),y.each(e,(function(e,n,r){i=t(e,n,r),(i>s||i===-1/0&&o===-1/0)&&(o=e,s=i)}));return o},y.min=function(e,t,n){var r,i,o=1/0,s=1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e){e=R(e)?e:y.values(e);for(var a=0,c=e.length;a<c;a++)r=e[a],null!=r&&r<o&&(o=r)}else t=w(t,n),y.each(e,(function(e,n,r){i=t(e,n,r),(i<s||i===1/0&&o===1/0)&&(o=e,s=i)}));return o},y.shuffle=function(e){return y.sample(e,1/0)},y.sample=function(e,t,n){if(null==t||n)return R(e)||(e=y.values(e)),e[y.random(e.length-1)];var r=R(e)?y.clone(e):y.values(e),i=O(r);t=Math.max(Math.min(t,i),0);for(var o=i-1,s=0;s<t;s++){var a=y.random(s,o),c=r[s];r[s]=r[a],r[a]=c}return r.slice(0,t)},y.sortBy=function(e,t,n){var r=0;return t=w(t,n),y.pluck(y.map(e,(function(e,n,i){return{value:e,index:r++,criteria:t(e,n,i)}})).sort((function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return e.index-t.index})),"value")};var M=function(e,t){return function(n,r,i){var o=t?[[],[]]:{};return r=w(r,i),y.each(n,(function(t,i){var s=r(t,i,n);e(o,t,s)})),o}};y.groupBy=M((function(e,t,n){E(e,n)?e[n].push(t):e[n]=[t]})),y.indexBy=M((function(e,t,n){e[n]=t})),y.countBy=M((function(e,t,n){E(e,n)?e[n]++:e[n]=1}));var A=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;y.toArray=function(e){return e?y.isArray(e)?d.call(e):y.isString(e)?e.match(A):R(e)?y.map(e,y.identity):y.values(e):[]},y.size=function(e){return null==e?0:R(e)?e.length:y.keys(e).length},y.partition=M((function(e,t,n){e[n?0:1].push(t)}),!0),y.first=y.head=y.take=function(e,t,n){return null==e||e.length<1?null==t?void 0:[]:null==t||n?e[0]:y.initial(e,e.length-t)},y.initial=function(e,t,n){return d.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},y.last=function(e,t,n){return null==e||e.length<1?null==t?void 0:[]:null==t||n?e[e.length-1]:y.rest(e,Math.max(0,e.length-t))},y.rest=y.tail=y.drop=function(e,t,n){return d.call(e,null==t||n?1:t)},y.compact=function(e){return y.filter(e,Boolean)};var P=function(e,t,n,r){r=r||[];for(var i=r.length,o=0,s=O(e);o<s;o++){var a=e[o];if(R(a)&&(y.isArray(a)||y.isArguments(a)))if(t){var c=0,u=a.length;while(c<u)r[i++]=a[c++]}else P(a,t,n,r),i=r.length;else n||(r[i++]=a)}return r};y.flatten=function(e,t){return P(e,t,!1)},y.without=S((function(e,t){return y.difference(e,t)})),y.uniq=y.unique=function(e,t,n,r){y.isBoolean(t)||(r=n,n=t,t=!1),null!=n&&(n=w(n,r));for(var i=[],o=[],s=0,a=O(e);s<a;s++){var c=e[s],u=n?n(c,s,e):c;t&&!n?(s&&o===u||i.push(c),o=u):n?y.contains(o,u)||(o.push(u),i.push(c)):y.contains(i,c)||i.push(c)}return i},y.union=S((function(e){return y.uniq(P(e,!0,!0))})),y.intersection=function(e){for(var t=[],n=arguments.length,r=0,i=O(e);r<i;r++){var o=e[r];if(!y.contains(t,o)){var s;for(s=1;s<n;s++)if(!y.contains(arguments[s],o))break;s===n&&t.push(o)}}return t},y.difference=S((function(e,t){return t=P(t,!0,!0),y.filter(e,(function(e){return!y.contains(t,e)}))})),y.unzip=function(e){for(var t=e&&y.max(e,O).length||0,n=Array(t),r=0;r<t;r++)n[r]=y.pluck(e,r);return n},y.zip=S(y.unzip),y.object=function(e,t){for(var n={},r=0,i=O(e);r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n};var j=function(e){return function(t,n,r){n=w(n,r);for(var i=O(t),o=e>0?0:i-1;o>=0&&o<i;o+=e)if(n(t[o],o,t))return o;return-1}};y.findIndex=j(1),y.findLastIndex=j(-1),y.sortedIndex=function(e,t,n,r){n=w(n,r,1);var i=n(t),o=0,s=O(e);while(o<s){var a=Math.floor((o+s)/2);n(e[a])<i?o=a+1:s=a}return o};var N=function(e,t,n){return function(r,i,o){var s=0,a=O(r);if("number"==typeof o)e>0?s=o>=0?o:Math.max(o+a,s):a=o>=0?Math.min(o+1,a):o+a+1;else if(n&&o&&a)return o=n(r,i),r[o]===i?o:-1;if(i!==i)return o=t(d.call(r,s,a),y.isNaN),o>=0?o+s:-1;for(o=e>0?s:a-1;o>=0&&o<a;o+=e)if(r[o]===i)return o;return-1}};y.indexOf=N(1,y.findIndex,y.sortedIndex),y.lastIndexOf=N(-1,y.findLastIndex),y.range=function(e,t,n){null==t&&(t=e||0,e=0),n||(n=t<e?-1:1);for(var r=Math.max(Math.ceil((t-e)/n),0),i=Array(r),o=0;o<r;o++,e+=n)i[o]=e;return i},y.chunk=function(e,t){if(null==t||t<1)return[];var n=[],r=0,i=e.length;while(r<i)n.push(d.call(e,r,r+=t));return n};var L=function(e,t,n,r,i){if(!(r instanceof t))return e.apply(n,i);var o=x(e.prototype),s=e.apply(o,i);return y.isObject(s)?s:o};y.bind=S((function(e,t,n){if(!y.isFunction(e))throw new TypeError("Bind must be called on a function");var r=S((function(i){return L(e,r,t,this,n.concat(i))}));return r})),y.partial=S((function(e,t){var n=y.partial.placeholder,r=function(){for(var i=0,o=t.length,s=Array(o),a=0;a<o;a++)s[a]=t[a]===n?arguments[i++]:t[a];while(i<arguments.length)s.push(arguments[i++]);return L(e,r,this,this,s)};return r})),y.partial.placeholder=y,y.bindAll=S((function(e,t){t=P(t,!1,!1);var n=t.length;if(n<1)throw new Error("bindAll must be passed function names");while(n--){var r=t[n];e[r]=y.bind(e[r],e)}})),y.memoize=function(e,t){var n=function(r){var i=n.cache,o=""+(t?t.apply(this,arguments):r);return E(i,o)||(i[o]=e.apply(this,arguments)),i[o]};return n.cache={},n},y.delay=S((function(e,t,n){return setTimeout((function(){return e.apply(null,n)}),t)})),y.defer=y.partial(y.delay,y,1),y.throttle=function(e,t,n){var r,i,o,s,a=0;n||(n={});var c=function(){a=!1===n.leading?0:y.now(),r=null,s=e.apply(i,o),r||(i=o=null)},u=function(){var u=y.now();a||!1!==n.leading||(a=u);var f=t-(u-a);return i=this,o=arguments,f<=0||f>t?(r&&(clearTimeout(r),r=null),a=u,s=e.apply(i,o),r||(i=o=null)):r||!1===n.trailing||(r=setTimeout(c,f)),s};return u.cancel=function(){clearTimeout(r),a=0,r=i=o=null},u},y.debounce=function(e,t,n){var r,i,o=function(t,n){r=null,n&&(i=e.apply(t,n))},s=S((function(s){if(r&&clearTimeout(r),n){var a=!r;r=setTimeout(o,t),a&&(i=e.apply(this,s))}else r=y.delay(o,t,this,s);return i}));return s.cancel=function(){clearTimeout(r),r=null},s},y.wrap=function(e,t){return y.partial(t,e)},y.negate=function(e){return function(){return!e.apply(this,arguments)}},y.compose=function(){var e=arguments,t=e.length-1;return function(){var n=t,r=e[t].apply(this,arguments);while(n--)r=e[n].call(this,r);return r}},y.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},y.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}},y.once=y.partial(y.before,2),y.restArguments=S;var D=!{toString:null}.propertyIsEnumerable("toString"),B=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],U=function(e,t){var n=B.length,r=e.constructor,i=y.isFunction(r)&&r.prototype||c,o="constructor";E(e,o)&&!y.contains(t,o)&&t.push(o);while(n--)o=B[n],o in e&&e[o]!==i[o]&&!y.contains(t,o)&&t.push(o)};y.keys=function(e){if(!y.isObject(e))return[];if(m)return m(e);var t=[];for(var n in e)E(e,n)&&t.push(n);return D&&U(e,t),t},y.allKeys=function(e){if(!y.isObject(e))return[];var t=[];for(var n in e)t.push(n);return D&&U(e,t),t},y.values=function(e){for(var t=y.keys(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=e[t[i]];return r},y.mapObject=function(e,t,n){t=w(t,n);for(var r=y.keys(e),i=r.length,o={},s=0;s<i;s++){var a=r[s];o[a]=t(e[a],a,e)}return o},y.pairs=function(e){for(var t=y.keys(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=[t[i],e[t[i]]];return r},y.invert=function(e){for(var t={},n=y.keys(e),r=0,i=n.length;r<i;r++)t[e[n[r]]]=n[r];return t},y.functions=y.methods=function(e){var t=[];for(var n in e)y.isFunction(e[n])&&t.push(n);return t.sort()};var F=function(e,t){return function(n){var r=arguments.length;if(t&&(n=Object(n)),r<2||null==n)return n;for(var i=1;i<r;i++)for(var o=arguments[i],s=e(o),a=s.length,c=0;c<a;c++){var u=s[c];t&&void 0!==n[u]||(n[u]=o[u])}return n}};y.extend=F(y.allKeys),y.extendOwn=y.assign=F(y.keys),y.findKey=function(e,t,n){t=w(t,n);for(var r,i=y.keys(e),o=0,s=i.length;o<s;o++)if(r=i[o],t(e[r],r,e))return r};var V,W,q=function(e,t,n){return t in n};y.pick=S((function(e,t){var n={},r=t[0];if(null==e)return n;y.isFunction(r)?(t.length>1&&(r=_(r,t[1])),t=y.allKeys(e)):(r=q,t=P(t,!1,!1),e=Object(e));for(var i=0,o=t.length;i<o;i++){var s=t[i],a=e[s];r(a,s,e)&&(n[s]=a)}return n})),y.omit=S((function(e,t){var n,r=t[0];return y.isFunction(r)?(r=y.negate(r),t.length>1&&(n=t[1])):(t=y.map(P(t,!1,!1),String),r=function(e,n){return!y.contains(t,n)}),y.pick(e,r,n)})),y.defaults=F(y.allKeys,!0),y.create=function(e,t){var n=x(e);return t&&y.extendOwn(n,t),n},y.clone=function(e){return y.isObject(e)?y.isArray(e)?e.slice():y.extend({},e):e},y.tap=function(e,t){return t(e),e},y.isMatch=function(e,t){var n=y.keys(t),r=n.length;if(null==e)return!r;for(var i=Object(e),o=0;o<r;o++){var s=n[o];if(t[s]!==i[s]||!(s in i))return!1}return!0},V=function(e,t,n,r){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return!1;if(e!==e)return t!==t;var i=typeof e;return("function"===i||"object"===i||"object"==typeof t)&&W(e,t,n,r)},W=function(e,t,n,r){e instanceof y&&(e=e._wrapped),t instanceof y&&(t=t._wrapped);var i=l.call(e);if(i!==l.call(t))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+e===""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t;case"[object Symbol]":return u.valueOf.call(e)===u.valueOf.call(t)}var o="[object Array]"===i;if(!o){if("object"!=typeof e||"object"!=typeof t)return!1;var s=e.constructor,a=t.constructor;if(s!==a&&!(y.isFunction(s)&&s instanceof s&&y.isFunction(a)&&a instanceof a)&&"constructor"in e&&"constructor"in t)return!1}n=n||[],r=r||[];var c=n.length;while(c--)if(n[c]===e)return r[c]===t;if(n.push(e),r.push(t),o){if(c=e.length,c!==t.length)return!1;while(c--)if(!V(e[c],t[c],n,r))return!1}else{var f,d=y.keys(e);if(c=d.length,y.keys(t).length!==c)return!1;while(c--)if(f=d[c],!E(t,f)||!V(e[f],t[f],n,r))return!1}return n.pop(),r.pop(),!0},y.isEqual=function(e,t){return V(e,t)},y.isEmpty=function(e){return null==e||(R(e)&&(y.isArray(e)||y.isString(e)||y.isArguments(e))?0===e.length:0===y.keys(e).length)},y.isElement=function(e){return!(!e||1!==e.nodeType)},y.isArray=h||function(e){return"[object Array]"===l.call(e)},y.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},y.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],(function(e){y["is"+e]=function(t){return l.call(t)==="[object "+e+"]"}})),y.isArguments(arguments)||(y.isArguments=function(e){return E(e,"callee")});var $=o.document&&o.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof $&&(y.isFunction=function(e){return"function"==typeof e||!1}),y.isFinite=function(e){return!y.isSymbol(e)&&isFinite(e)&&!isNaN(parseFloat(e))},y.isNaN=function(e){return y.isNumber(e)&&isNaN(e)},y.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"===l.call(e)},y.isNull=function(e){return null===e},y.isUndefined=function(e){return void 0===e},y.has=function(e,t){if(!y.isArray(t))return E(e,t);for(var n=t.length,r=0;r<n;r++){var i=t[r];if(null==e||!p.call(e,i))return!1;e=e[i]}return!!n},y.noConflict=function(){return o._=s,this},y.identity=function(e){return e},y.constant=function(e){return function(){return e}},y.noop=function(){},y.property=function(e){return y.isArray(e)?function(t){return I(t,e)}:C(e)},y.propertyOf=function(e){return null==e?function(){}:function(t){return y.isArray(t)?I(e,t):e[t]}},y.matcher=y.matches=function(e){return e=y.extendOwn({},e),function(t){return y.isMatch(t,e)}},y.times=function(e,t,n){var r=Array(Math.max(0,e));t=_(t,n,1);for(var i=0;i<e;i++)r[i]=t(i);return r},y.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},y.now=Date.now||function(){return(new Date).getTime()};var G={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},z=y.invert(G),H=function(e){var t=function(t){return e[t]},n="(?:"+y.keys(e).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(e){return e=null==e?"":""+e,r.test(e)?e.replace(i,t):e}};y.escape=H(G),y.unescape=H(z),y.result=function(e,t,n){y.isArray(t)||(t=[t]);var r=t.length;if(!r)return y.isFunction(n)?n.call(e):n;for(var i=0;i<r;i++){var o=null==e?void 0:e[t[i]];void 0===o&&(o=n,i=r),e=y.isFunction(o)?o.call(e):o}return e};var K=0;y.uniqueId=function(e){var t=++K+"";return e?e+t:t},y.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var J=/(.)^/,Y={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},X=/\\|'|\r|\n|\u2028|\u2029/g,Z=function(e){return"\\"+Y[e]};y.template=function(e,t,n){!t&&n&&(t=n),t=y.defaults({},t,y.templateSettings);var r,i=RegExp([(t.escape||J).source,(t.interpolate||J).source,(t.evaluate||J).source].join("|")+"|$","g"),o=0,s="__p+='";e.replace(i,(function(t,n,r,i,a){return s+=e.slice(o,a).replace(X,Z),o=a+t.length,n?s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?s+="'+\n((__t=("+r+"))==null?'':__t)+\n'":i&&(s+="';\n"+i+"\n__p+='"),t})),s+="';\n",t.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{r=new Function(t.variable||"obj","_",s)}catch(u){throw u.source=s,u}var a=function(e){return r.call(this,e,y)},c=t.variable||"obj";return a.source="function("+c+"){\n"+s+"}",a},y.chain=function(e){var t=y(e);return t._chain=!0,t};var Q=function(e,t){return e._chain?y(t).chain():t};y.mixin=function(e){return y.each(y.functions(e),(function(t){var n=y[t]=e[t];y.prototype[t]=function(){var e=[this._wrapped];return f.apply(e,arguments),Q(this,n.apply(y,e))}})),y},y.mixin(y),y.each(["pop","push","reverse","shift","sort","splice","unshift"],(function(e){var t=a[e];y.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],Q(this,n)}})),y.each(["concat","join","slice"],(function(e){var t=a[e];y.prototype[e]=function(){return Q(this,t.apply(this._wrapped,arguments))}})),y.prototype.value=function(){return this._wrapped},y.prototype.valueOf=y.prototype.toJSON=y.prototype.value,y.prototype.toString=function(){return String(this._wrapped)},r=[],i=function(){return y}.apply(t,r),void 0===i||(n.exports=i)})()}).call(this,n(206),n(2)(e))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";var r=n(73),i=a(r),o=n(144),s=a(o);function a(e){return e&&e.__esModule?e:{default:e}}var c=n(72),u=c.tagLogger("Sess"),f=n(208),d=0,l=n(209).default,p=c.prototypeExtend({setSessId:function(e){return e&&(this.sessId=e),this},setOp:function(e){return e&&(this.op=e),200===e&&(this.res={type:emedia.config.clientType,ver:window._emediaVersion||emedia.config.version,agent:emedia.config.userAgent,ops:emedia.config.acptOps}),this},setTsxId:function(e){return e&&(this.tsxId=e),this},setTicket:function(e){return e&&(this.tkt=e),this},setSdp:function(e){return e&&(this.sdp=e),this},setCands:function(e){return e&&(this.cands=e),this},setSubSId:function(e){return e&&(this.subSId=e),this},setMemId:function(e){return e&&(this.memId=e),this},setPubS:function(e){e&&(this.pubS=c.extend(!1,{},e));var t=this.pubS;return t.ext&&c.isPlainObject(t.ext)&&(t.ext=(0,s.default)(t.ext)),t&&c.forEach(t,(function(e,n){(c.isPlainObject(n)||"function"===typeof n)&&"resolution"!=e&&c.removeAttribute(t,e)})),t&&c.removeAttribute(t,"localStream"),t&&c.removeAttribute(t,"_localMediaStream"),t&&c.removeAttribute(t,"_webrtc"),this},setRtcId:function(e){return e&&(this.rtcId=e),this},setCver:function(e){return e&&(this.cver=e),this},setEndReason:function(e){return e&&(this.endReason=e),this},setNickName:function(e){return e&&(this.nickName=e),this},setResource:function(e){return e&&(this.resource=e),this},setReason:function(e){return e&&(this.reason=e),this},setConfrId:function(e){return e&&(this.confrId=e),this},setVoff:function(e){return"undefined"===typeof e||(this.voff=e?1:0),this},setAoff:function(e){return"undefined"===typeof e||(this.aoff=e?1:0),this},setFlag:function(e){return 0===e&&(this.flag=0),1===e&&(this.flag=1),this},setExt:function(e){return e&&c.isPlainObject(e)&&(e=(0,s.default)(e)),e&&(this.ext=e),this}}),h=emedia.__session_globalCount=0;function m(e,t,n){var r=this;function i(e,i){try{r.onWebsocketEvent(new f.WSClose({url:r.thisWsUri,retry:n,online:r.online,cause:e,event:i,session:r}))}finally{t&&t(new f.WSClose({url:r.thisWsUri,retry:n,online:r.online,cause:e,event:i,session:r}))}}function o(e){if(r.connected(r.thisWsUri)){if(c.isPlainObject(e)&&!(e instanceof p))throw u.error("message not a Messages"),"message not a Messages";if(r.sessId&&e.sessId!=r.sessId)u.warn("self.sessId && message.sessId != self.sessId",e);else{var t=(0,s.default)(e);r.thisWsUri===r._websocket.url&&r._websocket.send(t),r.thisWsUri===r._websocket.url&&u.debug("Done send req:",t,r._websocket.url),r.thisWsUri===r._websocket.url||u.debug("Donot send(url not equal): req:",t,r._websocket.url)}}else u.debug("current dont connect. the message = ",e)}function a(){if(r.connected(r.thisWsUri)){if(0===r._bufferedMessages.length)return;var e,t=[];while(e=r._bufferedMessages.shift())if(e.sessId||r.sessId||200==e.op){if(200===e.op){o(e);break}r.sessId&&!e.sessId&&(e.sessId=r.sessId);var i=o(e);i&&t.push(i)}else t.push(e),u.warn("tmp store message, util enter success!",e);t.length>0&&Array.prototype.push.apply(r._bufferedMessages,t)}else if(0!==n&&r.online)r.connected();else{var s=c.extend(!1,{},r._callbacks),a=[];for(var f in s){var d=s[f];n>0&&!r.online?a.push(d):r.onMessage({op:1001,tsxId:f,result:-9527,msg:"sdk rsp fail. retry fail or online = "+r.online})}r._bufferedMessages=r._bufferedMessages||[],a.length>0&&Array.prototype.push.apply(r._bufferedMessages,a)}}if(r.connected(r.thisWsUri))return e&&e(r),u.info("Session connected. dont continue connect"),void(r.notifyNewMessage&&r.notifyNewMessage());if(r.online){r.notifyNewMessage=a,u.info("Session begin connect.");var d=r._websocket;d&&(u.warn("will close. websocket state",d.readyState,d.url,r.thisWsUri),d.close(1e3));try{u.info("Connecting",r.thisWsUri,n),d=r._websocket=new WebSocket(r.thisWsUri)}catch(l){return u.warn(l),void i(l)}d.onopen=function(n){var i=this.url;if(i===r.thisWsUri)try{u.info("websocket connected:",i),t&&(t=null),e&&e(r),r.onWebsocketEvent(new f.WSConnected({event:n,session:r}))}finally{}else u.warn("ignore the onopen. caused by websocket url not ",r.thisWsUri,i)},d.onmessage=function(e){var t=this.url;if(t===r.thisWsUri){u.debug("recv data",e.data);var n=JSON.parse(e.data);n&&1001==n.op&&u.debug("recv message: rsp:",n),n&&1001!=n.op&&u.debug("recv message: evt:",n),r.onMessage(n)}else u.warn("ignore recv data. caused by websocket url not ",r.thisWsUri,t,e.data)},d.onclose=function(e){var t=this.url;u.info("Disconnected:",t,r.thisWsUri,e),t===r.thisWsUri?(r.notifyNewMessage(),1e3!==e.code&&i(void 0,e)):u.warn("ignore onclose. caused by websocket url not ",r.thisWsUri,t)},d.onerror=function(e){u.info("On error:",e),r.onWebsocketEvent(new f.WSError({event:e,online:r.online,session:r,url:this.url}))}}else i()}e.exports=c.prototypeExtend({_events:{0:"onReqP2P",1:"onNewCfr",2:"onDelCfr",3:"onReqTkt",100:"onPing",101:"onPong",102:"onInitC",103:"onReqC",104:"onAcptC",105:"onTcklC",106:"onAnsC",107:"onTermC",300:"onEnter",301:"onExit",302:"onPub",303:"onUnpub",304:"onMems",204:"onClose",400:"onStreamControl",401:"onJoin",412:"onRoleUpdate",1002:"onRemoteControl",1003:"onRecvRemoteMessage",402:"onConfrAttrsUpdated",413:"onAdminChanged",452:"onLivecfgsChanged"},__init__:function(){var e=this;function t(){navigator.onLine?e.online=!0:e.online=!1}function n(t){e.online=!0,u.warn("online online online"),e.closed||e._reconnect(emedia.config.reconnect)}function r(t){e.online=!1,u.warn("offline offline offline"),e.__checkConnectIntervalId&&clearTimeout(e.__checkConnectIntervalId),e.__retryConnectIntervalId&&clearTimeout(e.__retryConnectIntervalId),e.__retryConnectIntervalId&&delete e.__retryConnectIntervalId,e._websocket&&e._websocket.close(1e3)}e._bufferedMessages=[],e._callbacks={},t(),window.addEventListener("online",n,!0),window.addEventListener("offline",r,!0),u.info("online status = ",e.online)},_nextWsUri:function(){var e=this,t=e.ticket.url;emedia.config.useDeployMore&&(emedia.mgr.rtc_url_config=null,emedia.mgr.rtc_url_config=new l(emedia.config.rtcConfigUrl||""),t=emedia.mgr.rtc_url_config.replace_ws(t));var n=emedia.config&&emedia.config.convertWebsocketURLOfTicket||emedia.convertWebsocketURLOfTicket;if("function"===typeof n){var r=t;t=n(t),u.warn(r,"--\x3e",t)}if(t.startsWith("/")){if(emedia.config.wsorigin)t=emedia.config.wsorigin+t;else{var i=window.location.href,o=i.startsWith("https")?"wss://":"ws://",s=i.indexOf("://")+3,a=i.indexOf("/",s),c=i.substring(s,a);t=o+c+t}u.warn("websocket url. update. {} -> {}",e.ticket.url,t)}else emedia.config.wsorigin&&u.warn("emedia.config.wsorigin invalidate. causeby server url {}",t);return t.indexOf("?")>=0?t+="&"+d++:t+="?"+d++,t},_reconnect:function(e){var t=this;function n(){u.warn("Reconnected. at ",e,t._websocket.url),t.__retryConnectIntervalId&&clearTimeout(t.__retryConnectIntervalId),t.__retryConnectIntervalId&&delete t.__retryConnectIntervalId;var n=t.newMessage().setOp(200).setSessId(t._sessionId).setTicket(t.ticket).setNickName(t.nickName||t.ticket.memName).setResource(t.resource).setExt(t.owner.ext);t.postMessage(n,(function(e){if(0==e.result)t.onEvent(new f.EnterSuccess({ip:t.owner.ip})),t.owner.onMembers(e.cver,e.mems),t.owner.onStreams(e.cver,e.streams),t.notifyNewMessage();else try{t.onEvent(new f.EnterFail({me:t.owner,cause:new f.RspFail({request:n,response:e})}))}finally{-9527!==e.result&&t.onEvent(new f.ServerRefuseEnter({failed:e.result,msg:e.msg}))}}))}function r(i){if(e<=0)return u.warn("Reconnect end. but fail.",i.url,e),void(t.__retryConnectIntervalId&&delete t.__retryConnectIntervalId);e&&(t.__retryConnectIntervalId=setTimeout((function(){t.connect(n,r,--e)}),emedia.config.reconnectDelay))}t.connect(n,r,--e)},__checkConnect:function(){var e=this;e.__checkConnectIntervalId&&clearTimeout(e.__checkConnectIntervalId),emedia.config.checkConnectIntervalMillis&&(e.__checkConnectIntervalId=setTimeout((function(){try{e.online&&!e.connected()&&(e.__retryConnectIntervalId&&u.debug("online, reconnecting..."),e.__retryConnectIntervalId||u.debug("online, but disconnect. will reconnect"),e.__retryConnectIntervalId||e._reconnect(emedia.config.reconnect))}finally{e.__checkConnect()}}),emedia.config.checkConnectIntervalMillis))},connect:function(e,t,n){var r=this,i=r.thisWsUri=r._nextWsUri();function o(){try{e.apply(r,arguments)}finally{r.__checkConnect()}}function s(e){try{t.apply(r,arguments)}finally{n||e.url!==i||r.onEvent(new f.ServerRefuseEnter({failed:-95270,msg:"sdk reconnect fail. "+i+"|"+e.url}))}}"undefined"!==typeof n&&u.warn("begin connect... at retry = ",n,i),m.call(r,o,s,n)},connected:function(e){var t=this,n=t.online&&t._websocket&&(!e||e===t._websocket.url)&&t._websocket.readyState==WebSocket.OPEN;return n},onWebsocketEvent:function(e){var t=this;t.onEvent(e)},register:function(e){if("object"===("undefined"===typeof e?"undefined":(0,i.default)(e)))for(var t in e)this.bind(t,e[t])},bind:function(e,t){var n,r=this;if(!(n=r._events[e]))throw u.error("Not supported event = ",e),"Not supported event = "+e;r[n]=t},getSessionId:function(){return this._sessionId},newMessage:function(e){return new p(e)},__modifyMessage:function(e){if(e&&e.sdp&&("string"===typeof e.sdp&&(e.sdp=c.parseJSON(e.sdp)),e.sdp.type&&(e.sdp.type=e.sdp.type.toLowerCase()),e.cctx&&(e.sdp.cctx=e.cctx)),e&&e.cands){"string"===typeof e.cands&&(e.cands=c.parseJSON(e.cands));for(var t=0;t<e.cands.length;t++)"string"===typeof e.cands[t]&&(e.cands[t]=c.parseJSON(e.cands[t])),e.cands[t].sdpMLineIndex=e.cands[t].mlineindex,e.cands[t].sdpMid=e.cands[t].mid,delete e.cands[t].mlineindex,delete e.cands[t].mid,e.cctx&&(e.cands[t].cctx=e.cctx)}if(e&&e.mems){if(!c.isArray(e.mems))return;var n=e.mems;e.mems={},c.forEach(n,(function(t,n){n.name&&(n.memName=n.name),e.mems[n.id]=n;var r=n.acptOps={};if(c.forEach(emedia.config.baseAcptOps,(function(e,t){r[t]=!0})),n.res&&c.forEach(n.res.ops,(function(e,t){r[t]=!0})),n&&n.ext)try{e.mems[n.id].ext=JSON.parse(n.ext)}catch(i){u.debug(i)}}))}if(e&&e.mem){e.mem.name&&(e.mem.memName=e.mem.name);var r=e.mem.acptOps={};if(c.forEach(emedia.config.baseAcptOps,(function(e,t){r[t]=!0})),e.mem.res&&c.forEach(e.mem.res.ops,(function(e,t){r[t]=!0})),e.mem&&e.mem.ext)try{e.mem.ext=JSON.parse(e.mem.ext)}catch(o){u.debug(o)}}if(e&&e.streams){if(!c.isArray(e.streams))return;var i=e.streams;e.streams={},c.forEach(i,(function(t,n){if(e.streams[n.id]=n,n&&n.ext)try{e.streams[n.id].ext=JSON.parse(n.ext)}catch(o){u.debug(o)}}))}if(e&&e.pubS&&e.pubS&&e.pubS.ext)try{e.pubS.ext=JSON.parse(e.pubS.ext)}catch(o){u.debug(o)}if(e&&e.ext)try{e.ext=JSON.parse(e.ext)}catch(o){u.debug(o)}return e},onMessage:function(e){var t=this;function n(e){var n=t._events[e.op],r=t[n];r?r.call(t,e):u.warn("Not supported event = ",e)}if(1001!=e.op&&!e.sessId)throw u.error("message sessId error. server evt data error"),"message sessId error. server evt data error";if(1001!=e.op&&t._sessionId&&t._sessionId!=e.sessId)throw u.error("message sessId error. server and local not equal"),"message sessId error. server and local not equal";if(1004!==e.op){if(1001==e.op&&e.arg){var r=JSON.parse(e.arg),i=r.op2;if(21==i){var o=e,s=o.result;return void t.onRequestToTalkerReply(s)}if(22==i){var a=e,d=a.result;return void t.onRequestToAdminReply(d)}}var l;e=t.__modifyMessage(e);var p=c.removeAttribute(t._callbacks,e.tsxId);if(p&&200===p.op){t._sessionId=e.sessId;var h="string"===typeof e.yourIp?e.yourIp:void 0;if("string"===typeof t._session_ip&&h!=t._session_ip&&(l=t._session_ip),u.info(t._sessionId,"ip is",h,l),t._session_ip=h,t.owner.ip=h,0===e.result){for(var m in t._bufferedMessages){var v=t._bufferedMessages[m];v.sessId||200===v.op||(v.sessId=e.sessId)}setTimeout((function(){t.notifyNewMessage()}),100),1001==e.op&&(e.cattrs||e.cstate)&&t.onConfrAttrsUpdated(e)}else{var g;while(g=t._bufferedMessages.shift())200!==g.op&&t.onMessage({op:1001,tsxId:g.tsxId,result:-9527,msg:"sdk enter fail. sdk callback. enter result = "+e.result})}}if(t.owner&&t.owner.closed)u.warn("self closed. me is "+t.owner.getMemberId()+", session_id = "+t.getSessionId()+". drop message",e);else{if(t.onEvent(new f.RecvResponse({request:p,response:e})),p&&p.__callback__&&1004!==e.op)return p.__callback__(e),void(l&&t.onWebsocketEvent(new f.NetworkChanaged({preIp:l,nowIp:t._session_ip})));e.op&&1001!=e.op?(n(e),l&&t.onWebsocketEvent(new f.NetworkChanaged({preIp:l,nowIp:t._session_ip}))):u.debug("Igron message. caused by op not found.",e)}}else n(e)},__modifyMessageForPost:function(e){if(e.cands){for(var t=[],n=e.cands,r=0;r<n.length;r++){var i;0==r&&n[r].cctx&&(e.cctx=n[r].cctx),i="string"===typeof n[r]?{type:"candidate",candidate:n[r],mlineindex:0,mid:"audio"}:{type:"candidate",candidate:n[r].candidate,mlineindex:n[r].sdpMLineIndex,mid:n[r].sdpMid},t.push((0,s.default)(i))}e.cands=t}if(e.sdp&&"string"!==typeof e.sdp){var o={type:e.sdp.type,sdp:e.sdp.sdp};e.sdp.cctx&&(e.cctx=e.sdp.cctx),e.sdp=o,e.sdp.type=e.sdp.type.toUpperCase(),e.sdp=c.stringifyJSON(e.sdp)}return e.pubS&&c.removeAttribute(e.pubS,"_located"),e.pubS&&c.removeAttribute(e.pubS,"mutedMuted"),e.pubS&&c.removeAttribute(e.pubS,"mediaStream"),e.pubS&&c.removeAttribute(e.pubS,"isRepublished"),e.pubS&&c.removeAttribute(e.pubS,"optimalVideoCodecs"),"function"===typeof e.post&&c.removeAttribute(e,"post"),e},postMessage:function(e,t,n){1002==e.op&&console.log("postMessage 1002",(0,s.default)(e));var r=this;if(e.tsxId||(e.tsxId="MSG"+Date.now()+"-"+h++),e.memId){var i=r.owner._cacheMembers[e.memId],o=e,a=o.arg,f=!1;if(a&&(a=JSON.parse(a),21!=a.op2&&22!=a.op2&&23!=a.op2&&24!=a.op2||(f=!0)),!i&&!f)return u.warn("Member not found at local. memberId = "+e.memId,e),void(t&&t({op:1001,tsxId:e.tsxId,result:-507,msg:" member not found at local. memberId = "+e.memId}));var d=e._reqOps;if(d||(d=[],d.push(e.op)),!f)for(var l in d){var p=d[l];if(!i.acptOps[p])return u.warn("Member not accept op "+p+", "+e.memId,e),void(t&&t({op:1001,tsxId:e.tsxId,result:-507,msg:" member not accept op "+p+", "+e.memId}))}}if(c.removeAttribute(e,"_reqOps"),r._sessionId&&r._sessionId!=e.sessId)return u.warn("sessionId not excepted. self._sessionId = "+r._sessionId,e),void(t&&t({op:1001,tsxId:e.tsxId,result:-9527,msg:"sessionId not excepted."}));if(r.closed)return u.warn("session closed.",e),void(t&&t({op:1001,tsxId:e.tsxId,result:-9527,msg:"session closed"}));var m=c.extend({},e);if(e=r.__modifyMessageForPost(e),!e)return u.warn("Message drop. callback success.",e),void(t&&t({op:1001,tsxId:m.tsxId,result:0,msg:"Message drop. callback success."}));200===e.op?(r._bufferedMessages.unshift(e),t&&setTimeout((function(){r._callbacks[e.tsxId]&&(u.error("Enter timeout. fail."),r.onMessage({op:1001,tsxId:e.tsxId,result:-9527,msg:"enter timeout. millis = "+emedia.config.enterTimeout}))}),emedia.config.enterTimeout)):r._bufferedMessages.push(e),t&&(r._callbacks[e.tsxId]=c.extend(e,{__callback__:t.bind(r.owner)})),r.notifyNewMessage&&r.notifyNewMessage(),n&&t&&setTimeout((function(){var e=r._callbacks[e.tsxId];e&&e.__callback__&&e.__callback__({op:1001,tsxId:m.tsxId,result:-408,msg:"Message request timeout."}),c.removeAttribute(r._callbacks,e.tsxId)}),n)},close:function(e){u.warn("sessiong closing, reason = ",e);var t=this;t.notifyNewMessage&&t.notifyNewMessage(),t.closed=!0,t.seqno=0,t._websocket&&(0==e||100==e?t._websocket.close(1e3):t._websocket.close()),t.__retryConnectIntervalId&&clearTimeout(t.__retryConnectIntervalId),t.__retryConnectIntervalId&&delete t.__retryConnectIntervalId,t.__checkConnectIntervalId&&clearTimeout(t.__checkConnectIntervalId),t.__checkConnectIntervalId&&delete t.__checkConnectIntervalId,t.owner=null,t._bufferedMessages=[],t._callbacks={},u.warn("session closed")}})},function(e,t,n){"use strict";var r=n(72),i=(r.logger,r.prototypeExtend({msg:"",__init__:function(){this.day=new Date},execTime:function(){var e=this.day.getHours();e<10&&(e="0"+e);var t=this.day.getMinutes();t<10&&(t="0"+t);var n=this.day.getSeconds();return n<10&&(n="0"+n),e+":"+t+":"+n}})),o=i.extend({_webrtcDesc:function(){this.webrtc;var e=this.webrtc.getRtcId();return e}});e.exports={Exception:i.extend(),NetworkChanaged:i.extend({message:function(){var e=this.execTime()+" : Network chanage ("+this.preIp+" -> "+this.nowIp+").";return e}}),WSClose:i.extend({message:function(){var e=this.execTime()+" WSClose: Websocket close ("+(this.retry||0)+").";return this.online||(e+=" offline."),this.event&&(e+=" wscode: "+this.event.code),this.cause&&(e+=" cause: "+this.cause.message),this.url&&(e+=" url: "+this.url),e+=" retry: "+(this.retry||0),this.session&&this.session.getSessionId()&&(e=e+", sess = "+this.session.getSessionId()),e}}),WSError:i.extend({message:function(){var e=this.execTime()+" WSError: Websocket error. ready state:"+(this.event.srcElement&&this.event.srcElement.readyState||this.event.currentTarget.readyState)+". online = "+this.online;return this.session&&this.session.getSessionId()&&(e=e+", sess = "+this.session.getSessionId()),this.url&&(e+=" url: "+this.url),e}}),WSConnected:i.extend({message:function(){var e=this.execTime()+" WSConnected: Websocket success. ready state:"+(this.event.srcElement&&this.event.srcElement.readyState||this.event.currentTarget.readyState);return this.session&&this.session.getSessionId()&&(e=e+", sess = "+this.session.getSessionId()),e}}),ICEChanage:o.extend({message:function(){return this.execTime()+" ICEChanage: "+this._webrtcDesc()+" state: "+this.state}}),AddIceCandError:o.extend({message:function(){return this.execTime()+" AddIceCandError: "+this._webrtcDesc()+", add cand error"}}),ICEConnectFail:o.extend({message:function(){return this.execTime()+" ICEConnectFail: "+this._webrtcDesc()+" failed"}}),ICEConnected:o.extend({message:function(){return this.execTime()+" ICEConnected: "+this._webrtcDesc()+" connected"}}),ICEDisconnected:o.extend({message:function(){return this.execTime()+" ICEDisconnected: "+this._webrtcDesc()+" disconnected"}}),ICEClosed:o.extend({message:function(){return this.execTime()+" ICEClosed: "+this._webrtcDesc()+" closed"}}),ICERemoteMediaStream:o.extend({message:function(){return this.execTime()+" ICERemoteMediaStream: "+this._webrtcDesc()+" got remote stream"}}),StreamState:i.extend({message:function(){return this.execTime()+" StreamState:  stream "+this.stream.id+" state: "+this.state+" "+this.msg},iceFail:function(){this.state=1,this.msg="network anomaly. media lost"}}),OpenMediaError:i.extend({message:function(){return this.execTime()+" OpenMediaError:  open media error. caused by "+(this.event.name?this.event.name:this.event.message?this.event.message:this.event.toString())}}),Hangup:i.extend({message:function(){return this.self?"hangup id = "+(this.self.id||"--")+" reason："+(this.reason||0):this.execTime()+" Hangup: "+(this.parnter&&(this.parnter.name||this.parnter.id||" ")||"")+" hangup, reason："+(this.reason||0)}}),ServerRefuseEnter:i.extend({message:function(){return this.execTime()+" ServerRefuseEnter: server refuse, cause："+this.failed+", msg:"+(this.msg||"")}}),RspFail:i.extend({__init__:function(){this.day=new Date,this.failed=this.response.result,this.msg=this.response.msg||this.response.message||"--"},message:function(){return this.execTime()+" RspFail: "+this.request.tsxId+", "+(this.response.sessId||"--")+" op: "+this.request.op+", cause: "+this.failed+" "+this.msg}}),RecvResponse:i.extend({__init__:function(){this.day=new Date,this.failed=this.response.result,this.msg=this.response.msg},message:function(){return this.request?this.execTime()+" RecvResponse: "+(this.request&&this.request.tsxId)+", "+(this.response.sessId||"--")+" op: "+(this.request&&this.request.op)+", cause: "+this.failed+" "+this.msg:this.execTime()+" RecvMessage: "+(this.response&&this.response.tsxId)+", "+(this.response.sessId||"--")+" op: "+(this.response&&this.response.op)+" "+this.msg}}),EnterFail:i.extend({message:function(){return this.execTime()+" EnterFail: enter fail："+(this.cause?this.cause.message():"unkown")}}),EnterSuccess:i.extend({message:function(){return this.execTime()+" EnterSuccess: enter success "+(this.ip?", ip = "+this.ip:"")}}),PushSuccess:i.extend({message:function(){return this.execTime()+" PushSuccess: push success, streamId = "+this.stream.id+", "+this.stream.optimalVideoCodecs+", webrtc = "+this.stream.rtcId}}),PushFail:i.extend({message:function(){return this.execTime()+" PushFail: push fail, streamId = "+this.stream.id+", "+this.stream.optimalVideoCodecs+", webrtc = "+this.stream.rtcId+" cause："+(this.cause?this.cause.message?this.cause.message():this.cause:"unkown")}}),RemoteControlFail:i.extend({message:function(){return this.execTime()+" RemoteControlFail: "+(this.type||"remote control")+" fail, "+(this.stream?this.stream.id:"")+" failed = "+this.failed+" cause："+(this.cause?this.cause.message?this.cause.message():this.cause:"unkown")}}),SubSuccess:i.extend({message:function(){return this.execTime()+" SubSuccess: sub success, streamId = "+this.stream.id+", "+this.stream.vcodes+", webrtc = "+this.stream.rtcId}}),SubFail:i.extend({message:function(){return this.execTime()+" SubFail: sub fail, streamId = "+this.stream.id+", "+this.stream.vcodes+", webrtc = "+this.stream.rtcId+" cause："+(this.cause?this.cause.message?this.cause.message():this.cause:"unkown")}}),SubFailNotSupportVCodes:i.extend({message:function(){return this.execTime()+" SubFailNotSupportVCodes: sub fail, streamId = "+this.stream.id+" cause："+(this.cause?this.cause.message?this.cause.message():this.cause:"unkown")}}),SubFailSafariNotAllowSubBeforePub:i.extend({message:function(){return this.execTime()+" SubFailSafariNotAllowSubBeforePub: sub fail, streamId = "+this.stream.id+" cause：Safari without access to capture devices, WebKit only exposes Server Reflexive and TURN ICE candidates, which expose IPs that could already be gathered by websites."}}),SwitchVCodes:i.extend({message:function(){return this.execTime()+" SwitchVCodes: pub streamId = "+this.stream.id}}),CurrentCalling:i.extend({message:function(){return this.execTime()+" CurrentCalling: warn! current calling..."}}),OpenDesktopMedia:i.extend({message:function(){return this.execTime()+" OpenDesktopMedia: shared desktop, desktopStreamId = "+desktopStreamId}}),OpenDesktopMediaAccessDenied:i.extend({message:function(){return this.execTime()+" OpenDesktopMediaAccessDenied: shared desktop not allow"}}),ShareDesktopExtensionNotFound:i.extend({message:function(){return this.execTime()+" ShareDesktopExtensionNotFound: shared desktop plugin required"}}),OtherDeviceAnswer:i.extend({message:function(){return this.execTime()+" other device answer, webrtc = "+this.rtcId}}),AudioMixerStreamNotAllowSub:i.extend({message:function(){return this.execTime()+" audio mixer stream not allow sub, webrtc = "+this.rtcId+", streamId = "+this.stream.id}}),AudioMixerStreamNotAllowOnlySubVideo:i.extend({message:function(){return this.execTime()+" audio mixer stream not allow only sub video, webrtc = "+this.rtcId+", streamId = "+this.stream.id}}),AudioMixerStreamRepeatPublish:i.extend({message:function(){return this.execTime()+" audio mixer stream repeat publish"}})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(178),i=a(r),o=n(210),s=a(o);function a(e){return e&&e.__esModule?e:{default:e}}function c(e){this.rtcconfig=void 0,this.rtcConfigUrl=e,this.get_rtcconfig()}c.prototype={get_rtcconfig:function(){var e={url:"https://rs.easemob.com/easemob/rtcconfig.json",async:!1};this.rtcConfigUrl&&(e.url=this.rtcConfigUrl);var t=this,n=void 0;try{$.ajax((0,s.default)({},e,{success:function(e){console.log("get_rtcconfig success"),e&&(0,i.default)(e).length>0&&(t.rtcconfig=e,n=e)},error:function(e){return console.error("DeployMore get error",e),e}}))}catch(r){return}return n},replace_ws:function(e){if(this.rtcconfig&&this.rtcconfig.ws){var t="wss://"+this.rtcconfig.ws+"/",n=/wss.*com\//;return e.replace(n,t)}return e},_get_info_from_candifate:function(e){if(!e)return{};var t={};return e=e.split(" "),t.ip=e[4],t.port=e[5],t},_can_replace:function(e,t,n){return!!(e&&t&&n)&&(!!e.src.ip&&(e.src.ip==t&&!(e.src.min_port>n||e.src.max_port<n)))},_replace_candidate:function(e){var t=this._get_info_from_candifate(e),n=t.ip,r=t.port,i=this;return this.rtcconfig.rtc.candidate_map.map((function(t){if(i._can_replace(t,n,r)){var o=t.dst.ip,s=Number(r)-Number(t.src.min_port),a=Number(t.dst.min_port)+Number(s),c=e.split(" ");c[4]=o,c[5]=a,e=c.join(" ")}})),e},replace_candidates:function(e){if(!this.rtcconfig)return e;var t=this;return e=e.map((function(e){return e&&e.candidate?(e.candidate=t._replace_candidate(e.candidate),e):e})),e},replace_trun_url:function(e){if(this.rtcconfig&&this.rtcconfig.turn){var t=e.iceServers;if(!t)return e;if(t instanceof Array==0)return e;var n=this.rtcconfig.turn;return t=t.map((function(e){e.url&&(e.url="turn:"+n)})),e}return e}},t.default=c},function(e,t,n){"use strict";t.__esModule=!0;var r=n(149),i=o(r);function o(e){return e&&e.__esModule?e:{default:e}}t.default=i.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}},function(e,t,n){"use strict";var r=n(149),i=a(r),o=n(144),s=a(o);function a(e){return e&&e.__esModule?e:{default:e}}var c=n(72),u=c.tagLogger("Me"),f=n(212),d=n(208),l=n(215),p=f.extend({__init__:function(){var e=this;if(e._session||e.sessionFactory&&(e._session=e.sessionFactory()),!e._session)throw u.error("Require session"),"Require session";e._cver=0,e._cacheMembers={},e._cacheStreams={},e._streamAutomators={},e._mediaMeters={},e._openedRtcMediaStreams={},e._linkedStreams={},e._maybeNotExistStreams={},e._records={},e._ices={},e.audioMixers={},e.closed=!1,e._nextStreamSeqno=0,e.getMediaMeterIntervalMillis=e.getMediaMeterIntervalMillis||emedia.config.getMediaMeterIntervalMillis},getCurrentMembers:function(){var e=this,t=[];return c.forEach(e._cacheMembers,(function(e,n){var r=c.extend(!0,{},n);t.push(r)})),t},newStream:function(e){var t=this;return new l(e,{__init__:function(){var e=this;if(e.rtcId||e._webrtc&&(e.rtcId=e._webrtc.getRtcId()),e._webrtc||e.rtcId&&(e._webrtc=t._ices[e.rtcId]),e.__create_id=t._nextStreamSeqno++,e.memId&&!e.owner&&(e.owner=c.extend({},t._cacheMembers[e.memId]),!e.owner&&!e.located()))throw u.error("Remote stream, not owner. it = ",e.id),"Remote stream, not owner. it = "+e.id}})},getConfrId:function(){return this.ticket.confrId},isCaller:function(){var e=this;return e.isP2P()&&e.ticket.caller==e.ticket.memName},isCallee:function(){var e=this;return e.isP2P()&&e.ticket.callee==e.ticket.memName},isP2P:function(){var e=this;return e.ticket&&("P2P"==e.ticket.type||"p2p"==e.ticket.type)},isConfr:function(){var e=this;return e.ticket&&("CONFR"==e.ticket.type||"confr"==e.ticket.type)},onEvent:function(e){},join:function(e,t){var n=this;emedia.requireTrustBeforeJoin()?n.someBrowsersRequireGetUserMedia((function(){n._join(e,t)}),t):n._join(e,t)},_join:function(e,t){u.debug("begin join ...");var n,r=this;if(console.log("Attendee self",r),r._memberId)return u.warn("Had joined. igrone it"),void(e&&e(r.memId));function i(e){try{if(e instanceof d.WSClose&&e.retry)return;e instanceof d.EnterFail||(e=new d.EnterFail({attendee:r,cause:e})),r.onEvent(e),t&&t(e)}finally{}}function o(t){if(0==t.result){r.reflushSupportVCodes(t.vcodes),r.setMemberId(t.memId),r.role=t.role,r.onEvent(new d.EnterSuccess({ip:r.ip})),e&&e(t.memId);try{r.__rtc_cfg=t.rtcCfg,"string"===typeof t.rtcCfg&&(r.__rtc_cfg=JSON.parse(t.rtcCfg))}finally{r.onMembers(t.cver,t.mems),r.onStreams(t.cver,t.streams)}}else try{i(new d.RspFail({request:n,response:t}))}finally{-9527!==t.result&&r.onEvent(new d.ServerRefuseEnter({failed:t.result,msg:t.msg}))}}function s(){n=r.newMessage().setOp(200).setTicket(r.ticket).setNickName(r.nickName||r.ticket.memName).setResource(r.resource).setExt(r.ext),r.postMessage(n,o)}r.connect(s,i),u.debug("join",r.ticket.url)},withpublish:function(e){var t,n=this;if(!e||!e.localStream)throw u.error("pubS null or stream not open"),"pubS null or stream not open";var r,i=e&&e.localStream;function o(o,s){if(1===arguments.length&&(s=o,o=void 0),n._memberId)return u.warn("Had joined. igrone it"),void(o&&o(n.memId));function a(e){try{if(e instanceof d.WSClose&&e.retry)return;e instanceof d.EnterFail||(e=new d.EnterFail({attendee:n,cause:e})),n.onEvent(e),s&&s(e)}finally{emedia.stopTracks(i),r&&n.closeWebrtc(r.getRtcId())}}var c=n.getOptimalVideoCodecs();function f(i){if(0==i.result){n.reflushSupportVCodes(i.vcodes),n.setMemberId(i.memId),n.role=i.role,n.onEvent(new d.EnterSuccess({ip:n.ip}));var s=n.newStream(e);s.updateAttributes({_localMediaStream:e.localStream,rtcId:r.getRtcId(),_webrtc:r,id:i.streamId,csrc:i.csrc,owner:{id:i.memId,nickName:n.nickName,name:n.sysUserId,ext:n.extObj},optimalVideoCodecs:c}),o&&o(i.memId,s),r.useIp=n.ip,n.onEvent(new d.PushSuccess({stream:s,hidden:!0})),i.sdp&&n.ansC(r.getRtcId(),i.sdp),i.cands&&n.tcklC(r.getRtcId(),i.cands);try{n.__rtc_cfg=i.rtcCfg,"string"===typeof i.rtcCfg&&(n.__rtc_cfg=JSON.parse(i.rtcCfg)),n.__rtc_cfg&&n.__rtc_cfg.iceServers&&n.__rtc_cfg.iceServers.length>0&&(u.warn("Server rsp one rtc cfg. publish will republish"),n._service&&setTimeout((function(){n._service._republish(s)}),200))}finally{n.onMembers(i.cver,i.mems),n.onStreams(i.cver,i.streams)}}else try{a(new d.RspFail({request:t,response:i}))}finally{-9527!==i.result&&n.onEvent(new d.ServerRefuseEnter({failed:i.result,msg:i.msg}))}}function l(){u.debug("enter and pubs");var i,o,s=e.localStream;2===e.type&&(i={offerToReceiveAudio:!0,offerToReceiveVideo:!1},o={subSVideo:!1,subSAudio:!0}),r=n.createWebrtc({_rtcId:e.rtcId,optimalVideoCodecs:c,offerOptions:i,subArgs:o,vbitrate:e.vbitrate||e.constaints&&e.constaints.video&&e.constaints.video.bitrate,abitrate:e.abitrate||e.constaints&&e.constaints.audio&&e.constaints.audio.bitrate},e.iceRebuildCount),n.setLocalStream(s,r.getRtcId()),n.doOffer(r.getRtcId(),(function(i){t=n.newMessage().setOp(200).setTicket(n.ticket).setNickName(n.nickName||n.ticket.memName).setResource(n.resource).setSdp(i).setRtcId(r.getRtcId()).setPubS(e).setExt(n.ext),n.postMessage(t,f)}))}n.connect(l,a),u.debug("join",n.ticket.url)}return{join:o}},push:function(e,t,n,r){u.debug("begin push ...");var i,o=this;if(2===arguments.length&&(n=t,t=void 0),!e||!e.localStream)throw u.error("pubS or stream open"),"pubS or stream open";var s,a=e.localStream;function c(t){try{var i=o.newStream(e);i.updateAttributes({_localMediaStream:e.localStream,_webrtc:s,rtcId:s&&s.getRtcId(),owner:{id:o.getMemberId(),nickName:o.nickName,name:o.sysUserId,ext:o.extObj}});t=new d.PushFail({stream:i,cause:t,hidden:r&&!0===t.hidden});o.onEvent(t),t.hidden||n&&n(t)}finally{a&&!0!==t.hidden&&emedia.stopTracks(a),s&&o.closeWebrtc(s.getRtcId(),!0===t.hidden)}}if(e.rtcId||2!==e.type||emedia.config.allowRepeatAudioMixerPublish||!o._service.hasAudioMixers()){var f=e.optimalVideoCodecs||o.getOptimalVideoCodecs();p(e),u.debug("push",o.ticket.url)}else c(new d.AudioMixerStreamRepeatPublish);function l(n,r){if(0==r.result){var s=o.newStream(e);s.updateAttributes({_localMediaStream:e.localStream,_webrtc:n,rtcId:n.getRtcId(),id:r.streamId,csrc:r.csrc,owner:{id:o.getMemberId(),nickName:o.nickName,name:o.sysUserId,ext:o.extObj},optimalVideoCodecs:f}),s.id&&2===s.type&&(o.audioMixers[s.id]=s);try{o.onEvent(new d.PushSuccess({stream:s,hidden:!0}))}finally{r.sdp&&o.ansC(n.getRtcId(),r.sdp),r.cands&&o.tcklC(n.getRtcId(),r.cands),t&&t(s)}}else c(new d.RspFail({request:i,response:r,hidden:!0===r.retrying}))}function p(e){u.debug("pubs");var t,n,r=e.localStream;if(2===e.type&&(t={offerToReceiveAudio:!0,offerToReceiveVideo:!1},n={subSVideo:!1,subSAudio:!0}),s=o.createWebrtc({_rtcId:e.rtcId,optimalVideoCodecs:f,offerOptions:t,subArgs:n,vbitrate:e.vbitrate||e.constaints&&e.constaints.video&&e.constaints.video.bitrate,abitrate:e.abitrate||e.constaints&&e.constaints.audio&&e.constaints.audio.bitrate},e.iceRebuildCount),o.setLocalStream(r,s.getRtcId()),e.constaints&&e.constaints.video){var a=e.constaints.video,c=a.width,d=a.height;if(c&&d){var p=c.exact||c.min,h=d.exact||d.min,m={w:p,h:h};e.resolution=m}}o.doOffer(s.getRtcId(),(function(t){i=o.newMessage().setOp(102).setRtcId(s.getRtcId()).setSdp(t).setPubS(e),o.postMessage(i,(function(e){l(s,e)}))}))}},isSafari:function(){return emedia.isSafari},someBrowsersRequireGetUserMedia:function(e,t){var n=this;if(emedia.youInSomeBrowsers()&&!emedia._yetGetUserMedia){if(!0===n.__tryingOpenMedia)n.__tryingOpenMediaWaitSuceess=n.__tryingOpenMediaWaitSuceess||[],n.__tryingOpenMediaWaitFail=n.__tryingOpenMediaWaitFail||[],"function"===typeof e&&n.__tryingOpenMediaWaitSuceess.push(e),"function"===typeof t&&n.__tryingOpenMediaWaitFail.push(t);else{var r=function(t,r){emedia._yetGetUserMedia=!0,emedia.stopTracks(r),setTimeout((function(){n.__tryingOpenMedia=!1,e&&e.apply(n),n.__tryingOpenMediaWaitSuceess&&c.forEach(n.__tryingOpenMediaWaitSuceess,(function(e,t){t.apply(n)})),n.__tryingOpenMediaWaitSuceess=[],n.__tryingOpenMediaWaitFail=[]}),300)},i=function(e){n.__tryingOpenMedia=!1,u.error("Some browsers must getUserMedia, gather cands. now try get audio. fail. subfail"),t&&t.call(n,e),n.__tryingOpenMediaWaitFail&&c.forEach(n.__tryingOpenMediaWaitFail,(function(t,r){r.call(n,e)})),n.__tryingOpenMediaWaitSuceess=[],n.__tryingOpenMediaWaitFail=[]};n.__tryingOpenMedia=!0,n._service.__getUserMedia({audio:!0},r,(function(e){n._service.__getUserMedia({video:!0},r,i)}))}return!0}return!1},createWebrtcAndSubscribeStream:function(e,t,n,r){var i=this;t||(t={});var o=i._cacheStreams[e],s=i._cacheMembers[o.memId],a=o;function f(n){u.warn("sub stream error",e,n),g&&a._webrtc&&a._webrtc.setSubArgs(g),g&&a.updateAttributes({subArgs:g}),n=new d.SubFail({stream:a,hidden:!0===n.hidden,cause:n}),t&&t.onEvent&&t.onEvent(n),i.onEvent&&i.onEvent(n)}function l(){a.updateAttributes(a.subArgs)}r=r||a.subArgs||{subSVideo:!0,subSAudio:2!==o.type};var p=o.vcodes||[],h=s&&s.vcodes||[],m=i.supportVCodes,v=i._getOptimalVideoCodecsSubset(p,h,m);r=r||a.subArgs;var g=a.subArgs,y=!(a.vcodes&&a.vcodes.length>0);emedia.isSafari&&(y=y||!!a.voff);var b={offerToReceiveAudio:!0,offerToReceiveVideo:r.subSVideo&&!y};function _(){var o=i.createWebrtc({iceServerConfig:n,optimalVideoCodecs:v,offerOptions:b,onGotMediaStream:function(e){t.onGotRemote&&t.onGotRemote(a)}},a.iceRebuildCount),f=o.getRtcId();u.warn(f," sub stream ",e,v),a.updateAttributes({_webrtc:o,rtcId:f,owner:c.extend({},s)}),r&&a._webrtc&&a._webrtc.setSubArgs(r),r&&a.updateAttributes({subArgs:r})}b.offerToReceiveAudio||b.offerToReceiveVideo||u.warn("offerToReceiveAudio == false and offerToReceiveVideo == false"),i.someBrowsersRequireGetUserMedia((function(){_(),i.offerCall(a.rtcId,null,e,f,l)}),(function(t){u.error("Some browsers must getUserMedia, gather cands. now try get audio. fail. subfail",e),f(t)}))||(_(),i.offerCall(a.rtcId,null,e,f,l))},_getOptimalVideoCodecsSubset:function(e,t,n){var r=this,i=[];if(e&&e.length>0&&n[e[0]]&&i.push(e[0]),0==i.length)for(var o=0;o<r._orderVCodes.length;o++)c.forEach(t,(function(e,t){t==r._orderVCodes[o]&&i.push(t)}));return i},subscribeStream:function(e,t,n,r,i){var o=this,s=o._ices[e],a=o._cacheStreams[t],u=o._cacheMembers[a.memId],f=a;f.updateAttributes({_webrtc:s,rtcId:e,owner:c.extend({},u)});var l=f.subArgs;if(r=r||{subSVideo:!0,subSAudio:!0},f.updateAttributes({subArgs:f.subArgs||{subSVideo:!0,subSAudio:!0}}),f._webrtc&&f._webrtc.setSubArgs(f._webrtc.subArgs||{subSVideo:!0,subSAudio:!0}),!f.subArgs.subSVideo&&r.subSVideo&&!f.voff){var p=a.vcodes,h=u.vcodes,m=o.supportVCodes;o._getOptimalVideoCodecsSubset(p,h,m)}r&&f._webrtc&&f._webrtc.setSubArgs(r),r&&f.updateAttributes({subArgs:r});var v=o.newMessage().setOp(205).setRtcId(e).setSubSId(t);r&&c.extend(v,r),o.postMessage(v,(function(e){if(0!=e.result){l&&f._webrtc&&f._webrtc.setSubArgs(l),l&&f.updateAttributes({subArgs:l});var t=new d.SubFail({stream:f,cause:new d.RspFail({request:v,response:e})});return n&&n(t),void o.onEvent(t)}f.updateAttributes(f.subArgs);t=new d.SubSuccess({stream:f,hidden:!0});o._updateRemoteStream(f,f._webrtc.getRemoteStream()),o.onEvent(t),"function"===typeof i&&i()}))},unsubscribeStream:function(e){var t=this,n=t._cacheStreams[e],r=n._webrtc&&n._webrtc.getRtcId();if(r){try{var i=t.newMessage().setOp(206).setRtcId(r).setSubSId(e);t.postMessage(i)}finally{t.closeWebrtc(r)}return r}},onEnter:function(e,t){var n=this;if(e&&(n._cver=e),t&&!n._cacheMembers[t.id]){n._cacheMembers[t.id]=t;var r={};t.res&&t.res.vcodes&&t.res.vcodes.length>0&&c.forEach(t.res.vcodes,(function(e,t){r[t]||(r[t]=!0,n.supportVCodes[t]&&n.supportVCodes[t]++)})),n.onAddMember(c.extend({},t))}},_onFinally:function(){var e=this;e._cacheMembers={},e._cacheStreams={},e._linkedStreams={},e._ices={},e._maybeNotExistStreams={};var t=[];if(c.forEach(e._openedRtcMediaStreams,(function(e,n){!1!==n.active&&t.push(n)})),t.length>0)for(var n=0;n<t.length;n++)try{var r=t[n];u.info("exit, close stream = ",r.id),emedia.stopTracks(r)}catch(i){u.error(i)}u.warn("finally. all clean.")},_onRoleUpdate:function(e,t){var n=this;u.info("Role ",e," <-",n.role),u.info(t),n.role=e,n.roleToken=t,n.onRoleUpdate&&n.onRoleUpdate(e,t)},onExit:function(e,t,n){var r=this;if(e&&(r._cver=e),t!=r.getMemberId()){var i=r._cacheMembers[t];i&&(i.res&&i.res.vcodes&&i.res.vcodes.length>0&&c.forEach(i.res.vcodes,(function(e,t){r.supportVCodes[t]--})),r._onRemoveMember(i,n),r.onEvent(new d.Hangup({reason:n,parnter:i})))}else{u.warn("Me exit. ",n,t);try{r.closed||r.close(n)}catch(o){r.onEvent(new d.Hangup({reason:n,self:{id:r._memberId}})),r.onMeExit&&r.onMeExit(n),u.warn(o)}}},onPub:function(e,t,n){var r=this;if(!r._cacheMembers[t])throw u.error("No found member. when pub"),"No found member. when pub";var i=r.newStream(n),o=r._cacheStreams[n.id];if(e&&(r._cver=e),o&&i.sver!==o.sver)return u.info("Onpub. the steam ",o.id," republish. sver ",o.sver,i.sver),!i||i.aoff===o.aoff&&i.voff==o.voff||r.onStreamControl(void 0,n.id,i.voff,i.aoff),c.extend(o,i),void r._onRepublishStream(o);var s=i;return s.updateAttributes({owner:r._cacheMembers[t]}),r._cacheStreams[n.id]=s,r._onAddStream(r.newStream(s)),r.autoSub&&r.createWebrtcAndSubscribeStream(n.id,{onGotRemote:function(e){}}),s},onUnpub:function(e,t,n){var r=this,i=r._cacheStreams[n];r._onRemovePubstream(r._cacheMembers[t],i),e&&(r._cver=e)},onClose:function(e,t,n){var r=this;try{r.close(n||0)}finally{r.onConfrClose&&r.onConfrClose(t,n)}},__getWebrtcFor:function(e){var t=this,n=t._cacheStreams[e]&&t._cacheStreams[e]._webrtc;return n&&n.getRtcId()},_getWebrtc:function(e){var t=this,n=t._cacheStreams[e]&&t._cacheStreams[e]._webrtc;return n},_updateRemoteStream:function(e,t){e.located()&&2===e.type?emedia.enableAudioTracks(t,!0):emedia.enableAudioTracks(t,!e.aoff&&!(e.subArgs&&!1===e.subArgs.subSAudio)),emedia.enableVideoTracks(t,!e.voff&&!(e.subArgs&&!1===e.subArgs.subSVideo))},onStreamControl:function(e,t,n,r,i){var o=this,s=o._cacheStreams[t];s.updateAttributes({voff:n,aoff:r});var a=s._webrtc;a&&a._remoteStream&&o._updateRemoteStream(s,a._remoteStream);var c=o.newStream(s);o.onUpdateStream&&o.onUpdateStream(c,new c.Update({voff:n,aoff:r})),e&&(o._cver=e),i&&s.updateAttributes({sver:i}),emedia.isSafari&&!n&&a&&!a.closed&&a.offerOptions&&!a.offerOptions.offerToReceiveVideo&&(u.warn("stream video turn on. but sub not video, will close it, repsub stream",a.getRtcId(),a.__id,t),o.closeWebrtc(a.getRtcId(),!0,!1),o.createWebrtcAndSubscribeStream(t,{onGotRemote:function(e){}},void 0,s.subArgs))},aoff:function(e,t,n){var r=this,i=r.__getWebrtcFor(e.id);if(!i)throw u.error("pubS not publish",e.id),"pubS not publish"+e.id;var o=r._linkedStreams[e.id];o.updateAttributes({aoff:t}),e.updateAttributes({aoff:t});var s=r.newMessage().setOp(400).setRtcId(i).setVoff(e.voff).setAoff(t);r.postMessage(s,n),r.onUpdateStream&&r.onUpdateStream(e,new e.Update({aoff:t}))},voff:function(e,t,n){var r=this,i=r.__getWebrtcFor(e.id);if(!i)throw u.error("pubS not publish",e.id),"pubS not publish"+e.id;var o=r._linkedStreams[e.id];o.updateAttributes({voff:t}),e.updateAttributes({voff:t});var s=r.newMessage().setOp(400).setRtcId(i).setVoff(t).setAoff(e.aoff);r.postMessage(s,n),r.onUpdateStream&&r.onUpdateStream(e,new e.Update({voff:t}))},startRecord:function(e,t){var n=this,r=e.rtcId,i=n.newMessage().setOp(500).setRtcId(r).setFlag(1);n.postMessage(i,(function(i){u.warn("record ",r,i.result,i.msg),t&&t(0===i.result),0===i.result&&(n._records[e.id]=c.extend(!1,{},e))}))},stopRecord:function(e,t){var n=this,r=e.rtcId,i=n.newMessage().setOp(500).setRtcId(r).setFlag(0);n.postMessage(i,(function(e){u.warn("stop record ",r,e.result,e.msg),t&&t(0===e.result)})),n._records[e.id]&&c.removeAttribute(n._records,e.id)},onMembers:function(e,t){var n=this,r=[];c.forEach(n._cacheMembers,(function(e,n){t[e]||r.push(n)})),c.forEach(r,(function(e,t){n.onExit(void 0,t.id)}));var i=[];c.forEach(t,(function(e,t){(t.name&&t.name!=n.memName||!t.name&&e!=n.getMemberId())&&(n._cacheMembers[e]||i.push(t),n._cacheMembers[e]&&c.extend(n._cacheMembers[e],t))})),c.forEach(i,(function(e,t){n.onEnter(void 0,t)})),e&&(n._cver=e)},onStreams:function(e,t){var n=this,r=[];c.forEach(n._cacheStreams,(function(e,n){n.located()||t[e]||r.push(n)})),c.forEach(r,(function(e,t){n.onUnpub(void 0,t.memId,t.id)}));var i=[];c.forEach(t,(function(e,t){(t.memName&&t.memName!=n.memName||!t.memName&&t.memId!=n.getMemberId())&&(n._cacheStreams[e]||i.push(t),n._cacheStreams[e]&&c.extend(n._cacheStreams[e],t))})),c.forEach(i,(function(e,t){n.onPub(void 0,t.memId,t)})),c.forEach(n._cacheStreams,(function(e,r){var i;r.located()||(i=t[e]),!i||i.aoff===r.aoff&&i.voff==r.voff||n.onStreamControl(void 0,e,i.voff,i.aoff),i&&i.sver!==r.sver&&(c.extend(r,i),n._onRepublishStream(r))})),e&&(n._cver=e)},_onRemoveMember:function(e,t){var n=this;u.info("remove",e,t);var r=[];c.forEach(n._cacheStreams,(function(t,n){(n.memId||n.owner&&n.owner.id)===e.id&&r.push(n)})),c.forEach(r,(function(e,r){n._onRemovePubstream(r.owner,r,t)})),c.removeAttribute(n._cacheMembers,e.id),n.onRemoveMember&&n.onRemoveMember(e,t)},_onAddStream:function(e){u.info("add stream ",e.id),u.debug("add stream ",e);var t=this;t.onAddStream(e)},_onRemovePubstream:function(e,t,n){var r=this;if(t&&0!=t.id)try{var i=c.removeAttribute(r._mediaMeters,t.id);i&&i._finally()}finally{o(t)}function o(e){2===e.type&&(c.removeAttribute(r.audioMixers,e.id),e.remotePlayAudioObject&&document.body.removeChild(e.remotePlayAudioObject)),n||(n="Unpub"),e&&!e.closeReason&&e.updateAttributes({closeReason:n});r.unsubscribeStream(e.id),c.removeAttribute(r._cacheStreams,e.id);if(r._streamAutomators&&c.removeAttribute(r._streamAutomators,e.id),r._monitSoundChanagedStreams&&c.removeAttribute(r._monitSoundChanagedStreams,e.id),r.onRemoveStream){e=r.newStream(e);r.onRemoveStream(e)}}},_onRepublishStream:function(e){var t=this;if(!t._ices[e.rtcId]&&!emedia.subscribed(e)||t._maybeNotExistStreams[e.id])t.onUpdateStream(e);else{t.unsubscribeStream(e.id);t.createWebrtcAndSubscribeStream(e.id,{onGotRemote:function(e){}})}},_onRecvRemoteMessage:function(e,t,n){var r=this;u.debug("Recv remote message",e,t);var i,o=r._cacheMembers[e];try{i=JSON.parse(t)}catch(s){}r.onRecvRemoteMessage&&r.onRecvRemoteMessage(o||e,i||t,n)},_onSoundChanage:function(e,t,n){emedia.config._printSoundData&&u.info("Stream id "+t.id+", meter "+(n&&n.instant.toFixed(2)+" "+n.slow.toFixed(2)+" "+n.clip.toFixed(2)+" "+(n.trackAudioLevel||"--")+" "+(n.trackTotalAudioEnergy||"--"))),n||(n={instant:0,slow:0,clip:0}),emedia.config.logVolumeWhenInstantGE&&emedia.config.logVolumeWhenInstantGE>0&&n.instant>=emedia.config.logVolumeWhenInstantGE&&n.instant<3*emedia.config.logVolumeWhenInstantGE&&u.info("Stream id "+t.id+", webrtc = "+(t._webrtc?t._webrtc.getRtcId():"null")+", media streamId = "+(t.getMediaStream()?t.getMediaStream().id:"null")+", instant >= "+emedia.config.logVolumeWhenInstantGE+", meter instant="+n.instant+", slow="+n.slow+", clip="+n.clip);var r=this;0===n.instant&&(n.instant=n.trackAudioLevel||n.trackTotalAudioEnergy||0),r.onSoundChanage(e,t,n),r._service._judgeTalking(n)&&r.onTalking(e,t,n)},onAddMember:function(e){},onRemoveMember:function(e,t){},onAddStream:function(e){},onRemoveStream:function(e){},onUpdateStream:function(e,t){},onRecvRemoteMessage:function(e,t){},onSoundChanage:function(e,t,n){},onTalking:function(e,t,n){},_sendRequestMessage:function(e){if(e){var t=this,n=function(){var e="";for(var n in t._cacheMembers){var r=t._cacheMembers[n];if(r.role==emedia.mgr.Role.ADMIN){e=r.id;break}}return e},r=n();if(r){var o=this._memberId,a=this.memName,c=this.nickName,u=this.newMessage(),f={op:1002,memId:r,arg:(0,s.default)({op2:e,memId:o,memName:a,nickName:c||a}),tsxTime:(new Date).getTime(),_reqOps:["1002"+e]};(0,i.default)(u,f),this.postMessage(u)}else console.warn("this confrence have not admin")}},requestToTalker:function(){this._sendRequestMessage(21)},_send_action_request_message:function(e,t,n){if(t&&e&&void 0!==n){var r=t.tsxId,o=t.arg,a=o.memId,c=this.newMessage(),u={op:1001,arg:(0,s.default)({op2:e,memId:a}),memId:a,result:n,tsxId:r,_reqOps:["1002"+e]};(0,i.default)(c,u),this.postMessage(c)}},refuseRequestToTalker:function(e){this._send_action_request_message(21,e,1)},refuseRequestToAdmin:function(e){this._send_action_request_message(22,e,1)},requestToAdmin:function(){this._sendRequestMessage(22)},_sendControlAudioMessage:function(e,t){if(e&&t){var n=this.newMessage(),r={op:1002,memId:e,arg:(0,s.default)({op2:t,memId:e}),tsxTime:(new Date).getTime(),_reqOps:[100223,100224]};(0,i.default)(n,r),this.postMessage(n)}},muteBymemberId:function(e){this._sendControlAudioMessage(e,23)},unmuteBymemberId:function(e){this._sendControlAudioMessage(e,24)}});e.exports=p},function(e,t,n){"use strict";var r=n(72),i=r.tagLogger("Member"),o=n(208),s=n(213);e.exports=r.prototypeExtend({__init__:function(){var e=this;if(!e._session)throw i.error("Require session"),"Require session";e.closed=!1,e._ices={},e.supportVCodes={},e.audioMixers={}},reflushSupportVCodes:function(e){var t=this;t.supportVCodes={},t._orderVCodes=e,e&&0!=e.length?r.forEach(e,(function(e,n){t.supportVCodes[n]=1})):i.warn("Not config support vcodes")},getOptimalVideoCodecs:function(){var e=this;if(!e._orderVCodes||0==e._orderVCodes.length)return/Chrome/.test(navigator.userAgent)?"VP8":/Safari/.test(navigator.userAgent)&&/Version\/11/.test(navigator.userAgent)?"H264":"VP8";var t=0;r.forEach(e._cacheMembers,(function(){t++}));for(var n,i=0,o=0;o<e._orderVCodes.length;o++){var s=e._orderVCodes[o];if(0==i&&(i=e.supportVCodes[s]),e.supportVCodes[s]>t)return s;e.supportVCodes[s]>i&&(i=e.supportVCodes[s],n=s)}return n||e._orderVCodes&&e._orderVCodes.length>0&&e._orderVCodes[0]},setMemberId:function(e){this._memberId=e},getMemberId:function(){return this._memberId||this.id},createWebrtc:function(e,t){var n=this;e||(e={}),r.extend(e,{_rebuildCount:t||0}),!0===n._service.useRTCCfg&&n.__rtc_cfg?e.iceServerConfig=r.extend(!0,{},n.__rtc_cfg):r.isPlainObject(n._service.useRTCCfg)&&(e.iceServerConfig=r.extend(!0,{},n._service.useRTCCfg));var a=new s({confrAttendee:n,useIp:n.ip,onIceStateChange:function(e){var t=e;i.debug("evt.target ice state",t);try{if("failed"==t)return n.onEvent(new o.ICEConnectFail({webrtc:a})),void(a.onEvent&&a.onEvent(new o.ICEConnectFail({webrtc:a})));if("connected"==t)return n.onEvent(new o.ICEConnected({webrtc:a})),void(a.onEvent=null);if("closed"==t)return n.onEvent(new o.ICEClosed({webrtc:a})),void(a.onEvent&&a.onEvent(new o.ICEClosed({webrtc:a})));if("disconnected"==t)return n.onEvent(new o.ICEDisconnected({webrtc:a})),void(a.onEvent&&a.onEvent(new o.ICEDisconnected({webrtc:a})))}finally{n._onIceStateChange&&n._onIceStateChange(a,e)}},onIceCandidate:function(e){n._onIceCandidate&&e&&n._onIceCandidate(a,e)},onGotRemoteStream:function(e){i.info("got stream.",a._rtcId,a.__id,e),a.onGotMediaStream&&a.onGotMediaStream(e),n.onEvent(new o.ICERemoteMediaStream({webrtc:a}))},onAddIceCandidateError:function(e){n.onEvent(new o.AddIceCandError({webrtc:a,event:e}))},onSetSessionDescriptionError:function(e){i.warn("onSetSessionDescriptionError : Failed to set session description: "+e.toString()),n.onEvent&&n.onEvent(new o.ICEConnectFail({webrtc:a,event:e}))},onCreateSessionDescriptionError:function(e){i.warn("Failed to create session description: "+e.toString()),n.onEvent&&n.onEvent(new o.ICEConnectFail({webrtc:a,event:e}))}},e);return n._ices||(n._ices={}),n._ices[a.getRtcId()]&&n._howDoWebrtcWhenCrtExsitsWebrtc(a),n._ices[a.getRtcId()]=a,n._ices[a.__id]=a,n._iceCreateRtcPeerConnection(a.getRtcId()),i.debug("create rtc ",a),a},_howDoWebrtcWhenCrtExsitsWebrtc:function(e){var t=this;t.closeWebrtc(e.getRtcId(),!0,!1)},connect:function(e,t){var n=this;n._session.connect(e,t)},connected:function(){var e=this;return e._session.connected()},newMessage:function(e){var t=this,n=t._session.newMessage(e);return n.post=function(e,n){t.postMessage(this,e,n)},n},message:function(e){var t=this,n=t._session.newMessage(e);return n.post=function(e,n){t.postMessage(this,e,n)},n},postMessage:function(e,t,n){var r=this;try{e.sessId||(e.sessId=r._session._sessionId),r._session.postMessage(e,t,n)}catch(o){t&&t({op:1001,tsxId:e.tsxId,result:-9527,msg:"post message. exception"}),i.warn(o)}},onEvent:function(e){},_onIceStateChange:function(e,t){var n=this;i.info(e.getRtcId(),t),n.onEvent(new o.ICEChanage({webrtc:e,state:t}))},_onIceCandidate:function(e,t){var n,i=this;r.isArray(t)?n=t:(n=[],n.push(t));var s=i.newMessage().setOp(105).setRtcId(e.getRtcId()).setCands(n);i.postMessage(s,(function(e){0==e.result||i.onEvent(new o.RspFail({request:s,response:e}))}))},_initC:function(e,t,n,s,a,c){var u=this;if(t&&t.rtcId!==e.getRtcId())throw i.error("stream and webrtc rtcId not equal."),"stream and webrtc rtcId not equal.";var f=u.newMessage().setOp(102).setRtcId(e.getRtcId()).setSdp(n).setSubSId(s);e.subArgs&&r.extend(f,e.subArgs),t&&t.located()&&f.setPubS(t),u.postMessage(f,(function(n){if(0!=n.result)return u.onEvent(new o.RspFail({request:f,response:n})),void(a&&a(new o.RspFail({request:f,response:n,hidden:!0===n.retrying})));t&&!t.id&&n.streamId&&t.updateAttributes({id:n.streamId});try{c&&c()}catch(r){i.warn(r)}n.sdp&&u.ansC(e.getRtcId(),n.sdp,n.cands),n.mems&&u.onMembers&&u.onMembers(n.cver,n.mems),n.streams&&u.onStreams&&u.onStreams(n.cver,n.streams)}))},_acptC:function(e,t,n){var r=this,i=r.newMessage().setOp(104).setRtcId(e.getRtcId()).setSdp(t);r.postMessage(i,(function(e){if(0!=e.result)return r.onEvent(new o.RspFail({request:i,response:e})),void(n&&n(new o.RspFail({request:i,response:e})))}))},_ansCAndPubstream:function(e,t,n,s,a){var c=this,u=c.newMessage().setOp(106).setRtcId(e.getRtcId()).setSdp(n);e.subArgs&&r.extend(u,e.subArgs),t&&t.located()&&(t=r.extend({},t),r.removeAttribute(t,"mutedMuted"),r.removeAttribute(t,"_located"),u.setPubS(t)),c.postMessage(u,(function(e){if(0!=e.result)return c.onEvent(new o.RspFail({request:u,response:e})),void(s&&s(new o.RspFail({request:u,response:e,hidden:!0===e.retrying})));t&&!t.id&&e.streamId&&t.updateAttributes({id:e.streamId});try{a&&a()}catch(n){i.warn(n)}}))},_ansC:function(e,t,n){var r=this,i=r.newMessage().setOp(106).setRtcId(e.getRtcId()).setSdp(t);r.postMessage(i,(function(e){if(0!=e.result)return r.onEvent(new o.RspFail({request:i,response:e})),void(n&&n(new o.RspFail({request:i,response:e})))}))},_termC:function(e,t,n){var r=this,i="string"===typeof e?e:e.getRtcId(),s=r.newMessage().setOp(107).setRtcId(i).setEndReason(t);r.postMessage(s,(function(e){if(0!=e.result)return r.onEvent(new o.RspFail({request:s,response:e})),void(n&&n(new o.RspFail({request:s,response:e})))}))},_iceCreateRtcPeerConnection:function(e){var t=this;t._ices[e].createRtcPeerConnection(),i.debug("create rtc peer connection",e)},doOffer:function(e,t,n){var r=this,i=r._ices[e];i.createOffer((function(e){t(e)}))},offerCall:function(e,t,n,r,i){var o=this,s=o._ices[e];s.createOffer((function(e){o._initC&&o._initC(s,t,e,n,r,i)}))},accept:function(e,t){var n=this,r=n._ices[e];r.createPRAnswer((function(e){n._acptC&&n._acptC(r,e,t)}))},answerCall:function(e,t,n,r){var i=this,o=i._ices[e];o.createAnswer((function(e){i._ansCAndPubstream&&i._ansCAndPubstream(o,t,e,n,r)}))},answer:function(e,t){var n=this,r=n._ices[e];r.createAnswer((function(e){n._ansC&&n._ansC(r,e,t)}))},onTcklC:function(e,t){var n=this;n._addIceCandidate(t,e)},onAcptC:function(e,t,n){var r=this;r._iceSetRemoteSDP(t,e),n&&r._addIceCandidate(n,e)},onAnsC:function(e,t,n){var r=this;r._iceSetRemoteSDP(t,e),n&&r._addIceCandidate(n,e)},_addIceCandidate:function(e,t){var n=this;if(e&&0!=e.length){var r=n._ices[t];r&&r.addIceCandidate(e)}else i.warn("drop cands",e)},closeWebrtc:function(e,t,n){var o=this,s=o._ices[e];if(r.forEach(o._cacheStreams,(function(t,n){if(n.rtcId===e&&!n.located())try{var s=r.removeAttribute(o._mediaMeters,t);s&&s._finally()}catch(a){i.warn(a)}n.rtcId===e&&2===n.type&&r.removeAttribute(o.audioMixers,n.id)})),!s||s.closed)return i.warn("Webrtc not exsits or closed",s&&s.closed),n&&s&&r.forEach(o._cacheStreams,(function(t,n){n.rtcId===e&&(r.removeAttribute(o._linkedStreams,t),i.warn("Webrtc close, remvoe from _linkedStreams",t))})),void(n||o._termC(e,0));if(o._records){var a=function(e){try{o.stopRecord(e)}catch(t){i.warn(t)}finally{r.removeAttribute(o._records,e.id)}};r.forEach(o._records,(function(t,n){n.rtcId===e&&a(n)}))}try{n||s&&o._termC(s,t&&s._localStream?-10:0)}finally{s&&s.close(t),s&&o.onWebrtcTermC&&o.onWebrtcTermC(s),t||s&&r.forEach(o._cacheStreams,(function(t,s){s.rtcId===e&&(s.located()&&(emedia.stopTracks(s._localMediaStream),s&&!s.closeReason&&s.updateAttributes({closeReason:"WebrtcClose"}),o._cacheStreams[t]&&o._linkedStreams[t]&&o.onRemoveStream(s),r.removeAttribute(o._cacheStreams,t),o._streamAutomators&&r.removeAttribute(o._streamAutomators,t),o._monitSoundChanagedStreams&&r.removeAttribute(o._monitSoundChanagedStreams,t),i.info("Webrtc close. Remove stream",t,". from cache")),n&&(r.removeAttribute(o._linkedStreams,t),i.info("Webrtc close. Remove stream",t,". from _linkedStreams")))}))}return s},__close:function(e){i.warn("closing, reason = ",e);var t=this;if(!t.closed){if(t.closed=!0,t.__getCopyInterval&&(clearInterval(t.__getCopyInterval),i.warn("Stop interval get copy")),t._ices)for(var n in t._ices)t.closeWebrtc(n,!1);var r=t.newMessage().setOp(201).setReason(e||0);t.postMessage(r)}},exit:function(e){var t=this;e?(e&&t._closeMyConfr(11),setTimeout((function(){t.close(0)}),100)):t.close(0)},_closeMyConfr:function(e){var t=this,n=t.newMessage().setOp(204).setReason(e||0);t.postMessage(n,(function(e){i.warn("Close confr ",e.result,e.msg)}))},close:function(e,t){var n=this;if(!n.closed)try{r.forEach(n._cacheStreams||{},(function(e,t){t.located()&&t._localMediaStream&&emedia.stopTracks(t._localMediaStream)})),n.__close(e),r.forEach(n._cacheStreams,(function(e,t){n.onRemoveStream(t)})),r.forEach(n._cacheMembers,(function(e,t){n.onRemoveMember(t)}))}finally{try{setTimeout((function(){n._session&&n._session.close(e)}),500),n.onEvent(new o.Hangup({reason:e,failed:t,self:{id:n._memberId}})),n.onMeExit&&n.onMeExit(e,t)}catch(s){i.error(s)}finally{n._onFinally&&n._onFinally()}}},webrtcState:function(e){var t=this,n=t._ices[e];return n.iceConnectionState()},_iceSetRemoteSDP:function(e,t){var n=this,r=n._ices[t];r.setRemoteDescription(e)},setLocalStream:function(e,t){var n=this,r=n._ices[t];r.setLocalStream(e)},onWebrtcTermC:function(e){}})},function(e,t,n){"use strict";var r=n(144),i=a(r),o=n(178),s=a(o);function a(e){return e&&e.__esModule?e:{default:e}}var c=n(72),u=c.tagLogger("Webrtc"),f=n(214),d=n(209).default,l={headerSection:null,audioSection:null,videoSection:null,_parseHeaderSection:function(e,t,n){var r=t;return-1===n||(r=-1===t?n:Math.min(t,n)),r>=0?e.slice(0,r):e},_parseAudioSection:function(e,t,n){var r=t;if(r>=0)return e.slice(r,n<r?e.length:n)},_parseVideoSection:function(e,t,n){var r=n;if(r>=0)return e.slice(r,t<r?e.length:t)},spiltSection:function(e){var t=this;t._preSDP=e;var n=t._preAudioIndex=e.indexOf("m=audio"),r=t._preVideoIndex=e.indexOf("m=video");t.headerSection=t._parseHeaderSection(e,n,r),t.audioSection=t._parseAudioSection(e,n,r),t.videoSection=t._parseVideoSection(e,n,r)},setVideoBitrate:function(e){e&&this.videoSection&&(this.videoSection=this.setBitrate(this.videoSection,e))},setVideoMinBitrate:function(e){this.setAllFmtpBitrate({"x-google-min-bitrate":e})},setVideoMaxBitrate:function(e){this.setAllFmtpBitrate({"x-google-max-bitrate":e})},setVideoStartBitrate:function(e){this.setAllFmtpBitrate({"x-google-start-bitrate":e})},setAllFmtpBitrate:function(e){if(this.videoSection){var t={};(0,s.default)(e).forEach((function(n){var r=e[n],i=n+"="+r,o=new RegExp("(a=fmtp\\:\\d+\\s\\S*;?)("+n+"=\\d+)(;?\\S*)","g");t[n]={field:i,regex:o}})),this.videoSection=this.videoSection.replace(/(a=fmtp\:\d+[^\r\n]+)([\r\n]+)/g,(function(e,n,r){return n.indexOf("apt=")>=0?e:((0,s.default)(t).forEach((function(e){var r=t[e],i=r.regex,o=r.field,s=n.replace(i,(function(e,t,n,r){return t+o+r}));s.indexOf(e)<0?(s.endsWith(";")||(s+=";"),n=s+o):n=s})),n+r)}))}},setFmtpBitrate:function(e,t){if(t&&this.videoSection){var n=e+"="+t,r=new RegExp("(a=fmtp\\:\\d+\\s\\S*;?)("+e+"=\\d+)(;?\\S*)","g");this.videoSection=this.videoSection.replace(/(a=fmtp\:\d+[^\r\n]+)([\r\n]+)/g,(function(t,i,o){var s=i.replace(r,(function(e,t,r,i){return t+n+i}));return s.indexOf(e)<0&&(s.endsWith(";")||(s+=";"),s+=n),s+o}))}},setAudioBitrate:function(e){e&&this.audioSection&&(this.audioSection=this.setBitrate(this.audioSection,e))},setBitrate0:function(e,t){return e=e.replace(/(b=)(?:AS|TIAS)(\:)\d+/g,"$1AS$2"+t),e.indexOf("b=AS")<0&&(e=e.replace(/(m=(?:audio|video)[^\r\n]+)([\r\n]+)/g,"$1$2b=AS:"+t+"$2")),e},setBitrate:function(e,t){var n="AS";return emedia.isFirefox&&(t=1e3*(t>>>0),n="TIAS"),e=e.replace(/(b=)(?:AS|TIAS)(\:)\d+/g,"$1"+n+"$2"+t),e.indexOf("b="+n+":")<0&&(e=e.indexOf("c=IN ")<0?e.replace(/(m=(?:audio|video)[^\r\n]+)([\r\n]+)/g,"$1$2b="+n+":"+t+"$2"):e.replace(/c=IN ([^\r\n]+)([\r\n]+)/,"c=IN $1$2b="+n+":"+t+"$2")),e},updateVideoSection:function(e,t){var n=this;n.videoSection&&(n.videoSection=n.videoSection.replace(e,t))},updateAudioSection:function(e,t){var n=this;n.audioSection&&(n.audioSection=n.audioSection.replace(e,t))},updateVideoSendonly:function(){var e=this;e.videoSection&&(e.videoSection=e.videoSection.replace(/sendrecv/g,"sendonly"))},updateVideoRecvonly:function(){var e=this;e.videoSection&&(e.videoSection=e.videoSection.replace(/sendrecv/g,"recvonly"))},updateAudioSendonly:function(){var e=this;e.audioSection&&(e.audioSection=e.audioSection.replace(/sendrecv/g,"sendonly"))},updateAudioRecvonly:function(){var e=this;e.audioSection&&(e.audioSection=e.audioSection.replace(/sendrecv/g,"recvonly"))},updateACodes:function(e){var t=this;if(e&&t.audioSection){if("string"===typeof e){var n=[];n.push(e),e=n}for(var r={},i=/a=rtpmap:(\d+) ([A-Za-z0-9]+)\/.*/gi,o=(n=t._parseLine(t.audioSection,i),0);o<n.length;o++){var s=n[++o],a=n[++o];r[a]=s}var f=[];for(o=0;o<e.length;o++){var d=r[e[o]];d&&f.push(d)}0==f.length&&(t._webrtc?u.warn("Not found acodes map",e,t._webrtc._rtcId,t._webrtc.__id):u.warn("Not found acodes map",e));var l=t.audioSection.indexOf("\r"),p=t.audioSection.substring(0,l),h=p.split(" ");Array.prototype.push.apply(f,h.slice(3));var m=[],v={};c.forEach(f,(function(e,t){0==m.length?(m.push(t),v[t]=!0):v[t]||(m.push(t),v[t]=!0)})),h.splice(3,h.length-3,m.join(" ")),p=h.join(" "),t._webrtc&&u.warn(p,t._webrtc._rtcId,t._webrtc.__id),t.audioSection=p+t.audioSection.substring(l)}},updateVCodes:function(e){var t=this;if(e&&t.videoSection){if("string"===typeof e){var n=[];n.push(e),e=n}for(var r={},i=/a=rtpmap:(\d+) ([A-Za-z0-9]+)\/.*/gi,o=(n=t._parseLine(t.videoSection,i),0);o<n.length;o++){var s=n[++o],a=n[++o];r[a]=s}var f=/a=fmtp:(\d+) .*profile-level-id=42e01f;?.*/gi,d=t._parseLine(t.videoSection,f);d&&d.length>=2&&(r["H264"]=d[1]);var l=[];for(o=0;o<e.length;o++){var p=r[e[o]];p&&l.push(p)}0==l.length&&(t._webrtc?u.warn("Not found vcodes map",e,t._webrtc._rtcId,t._webrtc.__id):u.warn("Not found vcodes map",e));var h=t.videoSection.indexOf("\r"),m=t.videoSection.substring(0,h),v=m.split(" ");Array.prototype.push.apply(l,v.slice(3));var g=[],y={};c.forEach(l,(function(e,t){0==g.length?(g.push(t),y[t]=!0):y[t]||(g.push(t),y[t]=!0)})),v.splice(3,v.length-3,g.join(" ")),m=v.join(" "),t._webrtc&&u.warn(m,t._webrtc._rtcId,t._webrtc.__id),t.videoSection=m+t.videoSection.substring(h)}},removeSSRC:function(e){for(var t=[],n=e.split(/a=ssrc:[^\n]+/g),r=0;r<n.length;r++)"\n"!=n[r]&&t.push(n[r]);return t.join("\n")},removeField_msid:function(e){for(var t=[],n=e.split(/a=msid:[^\n]+/g),r=0;r<n.length;r++)"\n"!=n[r]&&t.push(n[r]);e=t.join("\n"),t=[],n=e.split(/[\n]+/g);for(r=0;r<n.length;r++)"\n"!=n[r]&&t.push(n[r]);return t.join("\n")},updateHeaderMsidSemantic:function(e){var t=this,n="a=msid-semantic: WMS "+e,r=t.headerSection.split(/a=msid\-semantic: WMS.*/g),i=[];switch(r.length){case 1:i.push(r[0]);break;case 2:i.push(r[0]),i.push(n),i.push("\n");break;case 3:i.push(r[0]),i.push(n),i.push("\n"),i.push(r[2]),i.push("\n");break}return t.headerSection=i.join("")},updateAudioSSRCSection:function(e,t,n,r){var i=this;i.audioSection&&(i.audioSection=i.removeSSRC(i.audioSection)),i.audioSection&&(i.audioSection=i.removeField_msid(i.audioSection)),i.audioSection&&(i.audioSection=i.audioSection+i.ssrcSection(e,t,n,r))},updateVideoSSRCSection:function(e,t,n,r){var i=this;i.videoSection&&(i.videoSection=i.removeSSRC(i.videoSection)),i.videoSection&&(i.videoSection=i.removeField_msid(i.videoSection)),i.videoSection&&(i.videoSection=i.videoSection+i.ssrcSection(e,t,n,r))},getUpdatedSDP:function(e){var t,n,r,i=this;if(void 0!==e&&null!=e||(e=i._preAudioIndex<i._preVideoIndex),i.videoSection&&i.videoSection.replace(/a=mid:([^\r\n]+)/,(function(e,n){return t=n,e})),i.audioSection&&i.audioSection.replace(/a=mid:([^\r\n]+)/,(function(e,t){return n=t,e})),e){var o=["a=group:BUNDLE"];i.audioSection&&o.push(n),i.videoSection&&o.push(t),r=i.headerSection.replace(/a=group:BUNDLE [^\r\n]+/,o.join(" ")),i.audioSection&&(r+=i.audioSection),i.videoSection&&(r+=i.videoSection)}else{o=["a=group:BUNDLE"];i.videoSection&&o.push(t),i.audioSection&&o.push(n),r=i.headerSection.replace(/a=group:BUNDLE [^\r\n]+/,o.join(" ")),i.videoSection&&(r+=i.videoSection),i.audioSection&&(r+=i.audioSection)}return r},parseMsidSemantic:function(e){var t=this,n=/a=msid\-semantic:\s*WMS (\S+)/gi,r=t._parseLine(e,n);return r&&2==r.length&&(t.msidSemantic={line:r[0],WMS:r[1]}),t.msidSemantic},ssrcSection:function(e,t,n,r){var i=["a=ssrc:"+e+" cname:"+t,"a=ssrc:"+e+" msid:"+n+" "+r,"a=ssrc:"+e+" mslabel:"+n,"a=ssrc:"+e+" label:"+r,""];return i.join("\n")},parseSSRC:function(e){var t=this,n=new RegExp("a=(ssrc):(\\d+) (\\S+):(\\S+)","ig"),r=t._parseLine(e,n);if(r){for(var i={lines:[],updateSSRCSection:t.ssrcSection},o=0;o<r.length;o++){var s=r[o];if(s.indexOf("a=ssrc")>=0)i.lines.push(s);else switch(s){case"ssrc":case"cname":case"msid":case"mslabel":case"label":i[s]=r[++o]}}return i}},_parseLine:function(e,t){var n,r=[];while(null!=(n=t.exec(e)))for(var i=0;i<n.length;i++)r.push(n[i]);if(r.length>0)return r}},p=function(e,t){c.extend(this,l),this._webrtc=t,this.spiltSection(e)};p.isAudioVideo=function(e){var t=e.indexOf("m=audio"),n=e.indexOf("m=video");return t<n},p.isVideoPreAudio=function(e){var t=e.indexOf("m=audio"),n=e.indexOf("m=video");return t>=0&&n>=0&&n<t};var h=emedia.__rtc_globalCount=0,m=c.prototypeExtend({closed:!1,sdpConstraints:{mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}},offerOptions:{offerToReceiveAudio:!0,offerToReceiveVideo:!0},optimalVideoCodecs:null,optimalAudioCodecs:null,__init__:function(){var e=this;e._rtcId||(e._rtcId="RTC"+h++),e.__id="_i_"+h++,e.__setRemoteSDP=!1,e.__tmpRemoteCands=[],e.__tmpLocalCands=[],e._rtcPeerConnection=null,e.cctx=e.__id,emedia&&emedia.config&&emedia.config.forceUseVideoCodecs&&emedia.config.forceUseVideoCodecs.length>0&&(e.optimalVideoCodecs=emedia.config.forceUseVideoCodecs),emedia&&emedia.config&&emedia.config.forceUseAudioCodecs&&emedia.config.forceUseAudioCodecs.length>0&&(e.optimalAudioCodecs=emedia.config.forceUseAudioCodecs),emedia&&emedia.config&&"number"===typeof emedia.config.forceVideoBitrate&&(e.vbitrate=emedia.config.forceVideoBitrate),emedia&&emedia.config&&"number"===typeof emedia.config.forceMinVideoBitrate&&(e.vminBitrate=emedia.config.forceMinVideoBitrate),emedia&&emedia.config&&"number"===typeof emedia.config.forceAudioBitrate&&(e.abitrate=emedia.config.forceAudioBitrate),u.info("Webrtc created. optimal video codecs:",e.optimalVideoCodecs,"audio codecs:",e.optimalAudioCodecs,"vbitrate:",e.vbitrate,"vminBitrate:",e.vminBitrate,"abitrate:",e.abitrate,e._rtcId,e.__id)},getRtcId:function(){return this._rtcId},iceState:function(){var e=this;return e._rtcPeerConnection.iceConnectionState},setSubArgs:function(e){var t=this;t.subArgs=e},getReceiversOfPeerConnection:function(){var e=this;if(e._rtcPeerConnection&&"closed"!=e._rtcPeerConnection.iceConnectionState)return e._rtcPeerConnection.getReceivers()},updateRemoteBySubArgs:function(){var e=this;e.subArgs&&e._remoteStream&&(emedia.enableVideoTracks(e._remoteStream,!(e.subArgs&&!1===e.subArgs.subSVideo)),emedia.enableAudioTracks(e._remoteStream,!(e.subArgs&&!1===e.subArgs.subSAudio)),u.info("enable tracks remote stream",e._remoteStream,e.subArgs,e._rtcId,e.__id,e.closed))},createRtcPeerConnection:function(e){var t=this;u.debug("begin create peer connection ......",t._rtcId,t.__id,t.closed),e||(e=t.iceServerConfig),e||emedia.isEdge?(e||(e={}),!e.iceServers&&(e.iceServers=[]),e.rtcpMuxPolicy="require",e.bundlePolicy="max-bundle",e.relayOnly&&(e.iceTransportPolicy="relay")):e=null,emedia&&emedia.config&&"function"===typeof emedia.config.reconfigRTCConfiguration&&(e=emedia.config.reconfigRTCConfiguration(e)),emedia.config.useDeployMore&&(emedia.mgr.rtc_url_config||(emedia.mgr.rtc_url_config=new d(emedia.config.rtcConfigUrl||"")),e&&e.iceServers&&(e=emedia.mgr.rtc_url_config.replace_trun_url(e))),u.info("create pc, set config:",e,t._rtcId,t.__id,t.closed);var n=t._rtcPeerConnection=new RTCPeerConnection(e);function r(e){u.info("states: connectionState",n.connectionState,", iceConnectionState",n.iceConnectionState,"@",t._rtcId,t.__id,t.closed);try{var r=n.iceConnectionState||n.connectionState;"failed"!=n.connectionState&&"failed"!=n.iceConnectionState||(r="failed"),t.lastIceConnectionState!==r&&(t.lastIceConnectionState=r,t.onIceStateChange(r))}finally{}}n.__peerId=t._rtcId,u.debug("created local peer connection object",n,t._rtcId),n.onicecandidate=function(e){var n=e.candidate;if("icecandidate"!=e.type||n&&("string"!==typeof n.protocol||"tcp"!==n.protocol.toLowerCase())&&!/ TCP /.test(n.candidate)){if(!n.candidate)throw u.error("Not found candidate. candidate is error"),"Not found candidate. candidate is error,";if(n.cctx=t.cctx,!t.__setRemoteSDP)return(t.__tmpLocalCands||(t.__tmpLocalCands={})).push(n),void u.debug("On ICE candidate ok: but tmp buffer caused by not set remote sdp: ",n,t._rtcId,t.__id,t.closed);u.debug("On ICE candidate ok: ",n,t._rtcId,t.__id,t.closed),t._onIceCandidate(n)}else u.debug("On ICE candidate: drop",n,t._rtcId,t.__id,t.closed)},t.lastIceConnectionState="",n.onconnectionstatechange=r.bind(t),n.onicestatechange=r.bind(t),n.oniceconnectionstatechange=r.bind(t),n.onsignalingstatechange=function(e){u.info("states: signaling",n.signalingState,"@",t._rtcId,t.__id,t.closed)},null===n.ontrack&&t._onTrack&&(n.ontrack=function(e){t._onTrack(e)}),n.onaddstream=function(e){t._onGotRemoteStream(e)}},addTrack:function(e,t){var n=this;e.forEach((function(e){n._rtcPeerConnection.addTrack(e,t),u.debug("Added track(",e.id,e.kind,e.label,") of stream(",t.id,") to RtcPeerConnection",n._rtcId,n.__id,n.closed)}))},setLocalStream:function(e){var t=this;if(t._localStream=e,t._rtcPeerConnection.addTrack)e.getTracks().forEach((function(n){t._rtcPeerConnection.addTrack(n,e),u.debug("Added track(",n.enabled,n.id,n.kind,n.label,") of localStream(",e.id,") to RtcPeerConnection",t._rtcId,t.__id,t.closed)}));else{t._rtcPeerConnection.addStream(e);var n=e.getVideoTracks(),r=e.getAudioTracks();n&&n.length>0&&u.debug("RtcPeerConnection video: ",n[0].enabled,n[0].id,n[0].kind,n[0].label,t._rtcId,t.__id,t.closed),r&&r.length>0&&u.debug("RtcPeerConnection audio: ",r[0].enabled,r[0].id,r[0].kind,r[0].label,t._rtcId,t.__id,t.closed)}u.debug("Added local stream to RtcPeerConnection",e.id,e.active,t._rtcId,t.__id,this.closed)},removeStream:function(e){this._rtcPeerConnection.removeStream(e),u.debug("Remove stream from RtcPeerConnection",e,self._rtcId,self.__id,this.closed)},getLocalStream:function(){return this._localStream},getRemoteStream:function(){return this._remoteStream},createOffer:function(e,t){var n=this;u.debug("createOffer start...",n.offerOptions,n._rtcId,n.__id);var r=c.extend({},n.offerOptions);return n.subArgs&&(r={offerToReceiveAudio:!0,offerToReceiveVideo:!0}),n._rtcPeerConnection.createOffer(r).then((function(t){if(n.offerDescription=t,emedia.isEdge&&(t.sdp=t.sdp.replace(/profile-level-id=[^;]+/,"profile-level-id=42e01f")),emedia.isFirefox?n.fireFoxOfferVideoPreAudio=n.__offerVideoPreAudio=p.isVideoPreAudio(t.sdp):n.__offerVideoPreAudio=p.isVideoPreAudio(t.sdp),t.sdp=t.sdp.replace(/m=video 0/g,"m=video 9"),u.warn("setLocalDescription. modify offer. if 'm=video 0' -> 'm=video 9'; if H264, 'profile-level-id=42e01f'",n._rtcId,n.__id),n.optimalVideoCodecs&&n.optimalVideoCodecs.length>0||n.optimalAudioCodecs&&n.optimalAudioCodecs.length>0||n.offerOptions&&(!1===n.offerOptions.offerToReceiveVideo||!1===n.offerOptions.offerToReceiveAudio)){var r=new p(t.sdp,n);n.optimalVideoCodecs&&r.updateVCodes(n.optimalVideoCodecs),n.optimalAudioCodecs&&r.updateACodes(n.optimalAudioCodecs),n.offerOptions&&!1===n.offerOptions.offerToReceiveVideo&&r.updateVideoSection(/a=sendrecv|a=recvonly/g,"a=sendonly"),n.offerOptions&&!1===n.offerOptions.offerToReceiveAudio&&r.updateAudioSection(/a=sendrecv|a=recvonly/g,"a=sendonly"),t.sdp=r.getUpdatedSDP()}if(u.debug("setLocalDescription start",n._rtcId,n.__id,n.closed,n.optimalVideoCodecs,n.optimalAudioCodecs),emedia.config.useDTX){t.sdp=t.sdp.replace(/a=rtpmap:(.*)CN\/(.*)\r\n/g,"");var i=t.sdp.match(/a=rtpmap:(.*)\sopus/)[1];t.sdp=t.sdp.replace(new RegExp("a=fmtp:"+i+"(.*)\\r\\n"),"a=fmtp:"+i+"$1;usedtx=1\r\n")}n._rtcPeerConnection.setLocalDescription(t).then(n._onSetLocalSessionDescriptionSuccess.bind(n),n._onSetSessionDescriptionError.bind(n,t)).then((function(){t.cctx=n.cctx,(e||n.onCreateOfferSuccess.bind(n))(t)}))}),t||n._onCreateSessionDescriptionError.bind(n,r))},createPRAnswer:function(e,t){var n=this;return u.info(" createPRAnswer start",n.closed,n.sdpConstraints),n._rtcPeerConnection.createAnswer(n.sdpConstraints).then((function(t){u.debug("_____________PRAnswer ",t.sdp,n._rtcId,n.__id,n.closed),t.type="pranswer",t.sdp=t.sdp.replace(/a=recvonly/g,"a=inactive");var r=new p(t.sdp,n);n.optimalVideoCodecs&&r.updateVCodes(n.optimalVideoCodecs),n.optimalAudioCodecs&&r.updateACodes(n.optimalAudioCodecs),t.sdp=r.getUpdatedSDP(),n.__prAnswerDescription=t,u.debug("inactive PRAnswer ",t.sdp,n._rtcId,n.__id,n.closed),u.debug("setLocalDescription start",t,n._rtcId,n.__id,n.closed),n._rtcPeerConnection.setLocalDescription(t).then(n._onSetLocalSessionDescriptionSuccess.bind(n),n._onSetSessionDescriptionError.bind(n,t)).then((function(){r.updateHeaderMsidSemantic("MS_0000"),r.updateAudioSSRCSection(1e3,"CHROME0000","MS_0000","LABEL_AUDIO_1000"),r.updateVideoSSRCSection(2e3,"CHROME0000","MS_0000","LABEL_VIDEO_2000"),t.sdp=r.getUpdatedSDP(),u.debug("Send PRAnswer ",t.sdp,n._rtcId,n.__id,n.closed),n.cctx&&(t.cctx=n.cctx),(e||n.onCreatePRAnswerSuccess.bind(n))(t)}))}),t||n._onCreateSessionDescriptionError.bind(n,n.sdpConstraints))},createAnswer:function(e,t){var n=this;return u.info("createAnswer start",n.closed,n.sdpConstraints),n._rtcPeerConnection.createAnswer(n.sdpConstraints).then((function(t){function r(e){var n=e.parseMsidSemantic(e.headerSection);if(n){"*"==n.WMS&&e.updateHeaderMsidSemantic(n.WMS="MS_0000");var r=e.parseSSRC(e.audioSection),i=e.parseSSRC(e.videoSection);r&&e.updateAudioSSRCSection(1e3,"CHROME0000",n.WMS,r.label||"LABEL_AUDIO_1000"),i&&e.updateVideoSSRCSection(2e3,"CHROME0000",n.WMS,i.label||"LABEL_VIDEO_2000"),t.sdp=e.getUpdatedSDP()}}u.debug("_____________________Answer ",n._rtcId,n.__id,n.closed),t.type="answer";var i=new p(t.sdp,n);n.optimalVideoCodecs&&i.updateVCodes(n.optimalVideoCodecs),n.optimalAudioCodecs&&i.updateACodes(n.optimalAudioCodecs),emedia.supportPRAnswer?r(i):t.sdp=i.getUpdatedSDP(),n.__answerDescription=t,u.debug("Answer ",n._rtcId,n.__id,n.closed),u.debug("setLocalDescription start",t,n._rtcId,n.__id,n.closed),n._rtcPeerConnection.setLocalDescription(t).then(n._onSetLocalSessionDescriptionSuccess.bind(n),n._onSetSessionDescriptionError.bind(n,t)).then((function(){emedia.supportPRAnswer&&(i.updateHeaderMsidSemantic("MS_0000"),i.updateAudioSSRCSection(1e3,"CHROME0000","MS_0000","LABEL_AUDIO_1000"),i.updateVideoSSRCSection(2e3,"CHROME0000","MS_0000","LABEL_VIDEO_2000"),t.sdp=i.getUpdatedSDP()),u.debug("Send Answer ",n._rtcId,n.__id,n.closed),n.cctx&&(t.cctx=n.cctx),(e||n.onCreateAnswerSuccess.bind(n))(t)}))}),t||n._onCreateSessionDescriptionError.bind(n,n.sdpConstraints))},_printStats:function(e){var t=this;t.confrAttendee&&emedia.config.remainLastStatsCount&&e&&e.getTracks().forEach((function(e){t._printTrackStats(e)}))},_printTrackStats:function(e){var t=this;if(t.confrAttendee&&emedia.config.remainLastStatsCount){var n=t.confrAttendee._trackStats&&t.confrAttendee._trackStats[e.id];if(n){for(var r in n){var i=n[r];for(var o in i){var s=i[o];if(s)for(var a=s.curIndex,f=0;f<emedia.config.remainLastStatsCount;f++){a=(a-1)%emedia.config.remainLastStatsCount;var d=s[a];if(!d||void 0===d.data)break;u.info("[track]",t._rtcId,t.__id,e.kind,e.id,r,o,d.data,d.timestamp.toLocaleString())}}}c.removeAttribute(t.confrAttendee._trackStats,e.id)}}},close:function(e,t,n){var r=this;if(u.warn("webrtc closing",r._rtcId,r.__id,r.closed),r.__iceWaitIntervalId&&clearTimeout(r.__iceWaitIntervalId),!r.closed){t=!0===t,r.closed=!0;try{var i=function(){if(r._rtcPeerConnection&&r._rtcPeerConnection.close(),u.info("peer connection close. it is",r._rtcPeerConnection&&r._rtcPeerConnection.__peerId),!n&&emedia.isSafari){r._rtcPeerConnection.iceConnectionState||r._rtcPeerConnection.connectionState;setTimeout((function(){r._rtcPeerConnection.iceConnectionState||r._rtcPeerConnection.connectionState;r.onIceStateChange&&r.onIceStateChange("closed")}),200)}},o=r._localStream,s=r._remoteStream;emedia.config.printStatsWhenPCClose?r.getStats((function(){i(),o&&r._printStats(o),s&&r._printStats(s)})):i()}catch(a){u.warn(a)}finally{r._localStream&&!1===e&&emedia.stopTracks(r._localStream),r._remoteStream&&emedia.stopTracks(r._remoteStream),r._remoteStream=null,t||r.onClose&&r.onClose(),!0===n&&(u.info("Webrtc close. but retry build. will onIceStateChange(failed). eg. emedia.config iceWaitBuildMillis",r._rtcId,r.__id),r.onIceStateChange&&r.onIceStateChange("failed")),u.warn("webrtc closed. closed:",r._rtcId,r.__id,r.closed)}}},addIceCandidate:function(e){console.log("addIceCandidate candidate",(0,i.default)(e));var t=this,n=c.isArray(e)?e:[e];if(emedia.mgr.rtc_url_config&&(n=emedia.mgr.rtc_url_config.replace_candidates(n)),emedia&&emedia.config&&"function"===typeof emedia.config.reChanageCandidate){for(var r=[],o=0;o<n.length;o++){e=n[o];var s=emedia.config.reChanageCandidate(e);s&&(u.info("Candidate rechanage. addons. it =",e,"->",s),c.isArray(s)?Array.prototype.push.apply(r,s):r.push(s))}n=r}t._addIceCandidate(n)},_addIceCandidate:function(e){var t=this;if(t._rtcPeerConnection){u.debug("Add ICE candidate: ",e,t._rtcId,t.__id,t.closed);var n=c.isArray(e)?e:[e];
//!_util.isArray(candidate) && _cands.push(candidate);
if(!t.__setRemoteSDP)return Array.prototype.push.apply(t.__tmpRemoteCands||(t.__tmpRemoteCands={}),n),void u.debug("Add ICE candidate but tmp buffer caused by not set remote sdp: ",e,t._rtcId,t.__id,t.closed);for(var r=0;r<n.length;r++)if(e=n[r],e.cctx&&e.cctx!=t.cctx)u.warn("addIceCandidate fail drop. cctx not equal. ",e,t._rtcId,t.__id,t.closed);else{if(!0===t.fireFoxOfferVideoPreAudio){var i=e.sdpMLineIndex;e.sdpMLineIndex=parseInt(e.sdpMid.replace(/[^0-9]*/,"")),u.warn("Firefox sdp section video pre audio, sdp mline index update ",i,"->",e.sdpMLineIndex)}e.candidate&&""!==e.candidate?t._rtcPeerConnection.addIceCandidate(new RTCIceCandidate(e)).then(t.onAddIceCandidateSuccess.bind(t),t._onAddIceCandidateError.bind(t,e)):u.warn("Add ICE candidate fail. drop it ",e,t._rtcId,t.__id,t.closed)}}},setRemoteDescription:function(e){var t=this;return t._setRemoteDescription(e)},_setRemoteDescription:function(e){var t=this;if(t.__iceWaitIntervalId&&(clearTimeout(t.__iceWaitIntervalId),t.__iceWaitIntervalId=null,u.info("emedia.config iceWaitBuildMillis, clear ice wait interval id",t._rtcId,t.__id)),u.debug("setRemoteDescription start. ",t._rtcId,t.__id,t.closed),t.offerDescription){if(e.cctx&&e.cctx!=t.cctx)return void u.warn("setRemoteDescription fail drop. cctx not equal. ",e,t._rtcId,t.__id,t.closed);if(!0===t.fireFoxOfferVideoPreAudio||!0===t.__offerVideoPreAudio){var n=new p(e.sdp,t);e.sdp=n.getUpdatedSDP(!1),u.info("Remote sdp.2. switch audio video",e.sdp)}}else e.cctx&&(t.cctx=e.cctx);if(e.sdp=e.sdp.replace(/UDP\/TLS\/RTP\/SAVPF/g,"RTP/SAVPF"),u.warn("setRemoteDescription. UDP/TLS/RTP/SAVPF -> RTP/SAVPF; if firefox: switch audio video;",t._rtcId,t.__id),t.vbitrate||t.abitrate||t.vminBitrate){n=new p(e.sdp,t);t.vbitrate&&n.setVideoBitrate(t.vbitrate),t.vminBitrate&&n.setVideoMinBitrate(t.vminBitrate),t.abitrate&&n.setAudioBitrate(t.abitrate),u.warn("vbitrate = ",t.vbitrate,"vminBitrate = ",this.vminBitrate,", abitrate = ",t.abitrate,t._rtcId,t.__id),e.sdp=n.getUpdatedSDP("undefined"===typeof t.__offerVideoPreAudio||null===t.__offerVideoPreAudio?void 0:!t.__offerVideoPreAudio)}return u.debug("final remote sdp =",e.sdp,t._rtcId,t.__id),e=t.__remoteDescription=new RTCSessionDescription(e),t._rtcPeerConnection.setRemoteDescription(e).then((function(){t.__setRemoteSDP=!0,t._onSetRemoteSuccess.apply(t,arguments),t.__tmpLocalCands&&t.__tmpLocalCands.length>0&&(u.debug("After setRemoteDescription. send cands",t._rtcId,t.__id,t.closed),t._onIceCandidate(t.__tmpLocalCands),t.__tmpLocalCands=[]),t.__tmpRemoteCands&&t.__tmpRemoteCands.length>0&&(u.debug("After setRemoteDescription. add tmp cands",t._rtcId,t.__id,t.closed),t._addIceCandidate(t.__tmpRemoteCands),t.__tmpRemoteCands=[])}),t._onSetSessionDescriptionError.bind(t,e))},iceConnectionState:function(){var e=this;return e._rtcPeerConnection.iceConnectionState},isConnected:function(){var e=this,t=e.lastIceConnectionState;return"connected"===t||"completed"===t},_onGotRemoteStream:function(e){var t=this;t._remoteStream=e.stream||e.streams[0],t._remoteStream._rtcId=t._rtcId,t._remoteStream.__rtc_c_id=t.__id,u.debug("On got remote stream",t._remoteStream?t._remoteStream.id+"_"+t._remoteStream.active:"null",t._rtcId,t.__id),t._remoteStream&&t._remoteStream.getTracks().forEach((function(e){u.debug("remote stream",t._remoteStream.id," track =",e.enabled,e.id,e.kind,e.label,t._rtcId,t.__id)})),t.updateRemoteBySubArgs(),this.onGotRemoteStream(this._remoteStream,e),u.debug("received remote stream, you will see the other.",t._rtcId,t.__id,this.closed)},_onSetRemoteSuccess:function(){u.info("onSetRemoteSuccess success",this._rtcId,this.__id),this.onSetRemoteSuccess.apply(this,arguments),this.offerDescription&&this.__remoteDescription&&this.__remoteDescription.sdp&&this._onAnswerCodes(this.__remoteDescription.sdp)},_onAnswerCodes:function(e){var t=this,n=new p(e,this);if(n.videoSection){var r=f.parseRtpParameters(n.videoSection);if(!r.codecs||0===r.codecs.length)return void u.info("not found any video codes. @ ",t._rtcId,t.__id);var i=[],o={};c.forEach(r.codecs,(function(e,t){!0!==o[t.name]&&(o[t.name]=!0,i.push(t.name))})),t.finalVCodeChoices=i,t.onVCodeChoices&&t.onVCodeChoices(i)}},onSetRemoteSuccess:function(){},onAddIceCandidateSuccess:function(){u.debug("addIceCandidate success",this._rtcId,this.__id)},_onAddIceCandidateError:function(e,t){u.error("failed to add ICE Candidate: "+t.toString(),", error candidate:",e,this._rtcId,this.__id),this.onAddIceCandidateError(t)},onAddIceCandidateError:function(e){},_onIceCandidate:function(e){u.debug("onIceCandidate:",e,this._rtcId,this.__id),this.onIceCandidate(e)},onIceCandidate:function(e){},onIceStateChange:function(e){u.debug("onIceStateChange : ICE state ",e)},_onCreateSessionDescriptionError:function(e,t){u.error("Failed to create session description: "+t.toString()," offerOptionsOrSDPConstraints:",e,this._rtcId,this.__id),this.onCreateSessionDescriptionError(t)},onCreateSessionDescriptionError:function(e){},onCreateOfferSuccess:function(e){u.debug("create offer success",this._rtcId,this.__id)},onCreatePRAnswerSuccess:function(e){u.debug("create answer success",this._rtcId,this.__id)},onCreateAnswerSuccess:function(e){u.debug("create answer success",this._rtcId,this.__id)},_onSetSessionDescriptionError:function(e,t){u.error("onSetSessionDescriptionError : Failed to set session description: ",t.toString(),this._rtcId,this.__id),e&&e.type&&e.sdp&&u.error("error sdp: type=",e.type,"sdp=",e.sdp,this._rtcId,this.__id),this.onSetSessionDescriptionError(t)},onSetSessionDescriptionError:function(e){},_onSetLocalSessionDescriptionSuccess:function(){var e=this;u.debug("onSetLocalSessionDescriptionSuccess : setLocalDescription complete",this._rtcId,this.__id),emedia.config.iceWaitBuildMillis&&(this.__iceWaitIntervalId&&clearTimeout(this.__iceWaitIntervalId),this.__iceWaitIntervalId=setTimeout((function(){u.info("emedia.config iceWaitBuildMillis, timeout, will close webrtc, will retry build by onIceStateChange(failed)",e._rtcId,e.__id),e.onIceStateChange&&e.onIceStateChange("failed")}),emedia.config.iceWaitBuildMillis),u.info("emedia.config iceWaitBuildMillis, start timeout",e._rtcId,e.__id)),this.onSetLocalSessionDescriptionSuccess(),this.__answerDescription&&this.__answerDescription.sdp&&this._onAnswerCodes(this.__answerDescription.sdp)},onSetLocalSessionDescriptionSuccess:function(){},onGotRemoteStream:function(e){u.debug("Got remote stream. ",e,this._rtcId,this.__id)},getStats:function(e){var t=this;return t._rtcPeerConnection?"function"!==typeof emedia.config.rtcStatsTypeMath?(u.warn("Get stats, but config rtcStatsTypeMather, ",this._rtcId,this.__id),void(e&&e())):void t._rtcPeerConnection.getStats(null).then((function(n){n.forEach((function(e,n){emedia.config.rtcStatsTypeMath(e,n)&&u.info("Rtc stats",e,t._rtcId,t.__id)})),e&&e(n)})):(u.warn("Get stats, but peer connection not exsits, ",this._rtcId,this.__id),void(e&&e()))}});e.exports=m},function(e,t,n){"use strict";var r={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};r.localCName=r.generateIdentifier(),r.splitLines=function(e){return e.trim().split("\n").map((function(e){return e.trim()}))},r.splitSections=function(e){var t=e.split("\nm=");return t.map((function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"}))},r.getDescription=function(e){var t=r.splitSections(e);return t&&t[0]},r.getMediaSections=function(e){var t=r.splitSections(e);return t.shift(),t},r.matchPrefix=function(e,t){return r.splitLines(e).filter((function(e){return 0===e.indexOf(t)}))},r.parseCandidate=function(e){var t;t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" ");for(var n={foundation:t[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1];break;case"ufrag":n.ufrag=t[r+1],n.usernameFragment=t[r+1];break;default:n[t[r]]=t[r+1];break}return n},r.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var n=e.type;return t.push("typ"),t.push(n),"host"!==n&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},r.parseIceOptions=function(e){return e.substr(14).split(" ")},r.parseRtpMap=function(e){var t=e.substr(9).split(" "),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},r.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},r.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},r.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},r.parseFmtp=function(e){for(var t,n={},r=e.substr(e.indexOf(" ")+1).split(";"),i=0;i<r.length;i++)t=r[i].trim().split("="),n[t[0].trim()]=t[1];return n},r.writeFmtp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var r=[];Object.keys(e.parameters).forEach((function(t){e.parameters[t]?r.push(t+"="+e.parameters[t]):r.push(t)})),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},r.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},r.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},r.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substr(t+1,r-t-1),n.value=e.substr(r+1)):n.attribute=e.substr(t+1),n},r.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((function(e){return parseInt(e,10)}))}},r.getMid=function(e){var t=r.matchPrefix(e,"a=mid:")[0];if(t)return t.substr(6)},r.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},r.getDtlsParameters=function(e,t){var n=r.matchPrefix(e+t,"a=fingerprint:");return{role:"auto",fingerprints:n.map(r.parseFingerprint)}},r.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach((function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),n},r.getIceParameters=function(e,t){var n=r.splitLines(e);n=n.concat(r.splitLines(t));var i={usernameFragment:n.filter((function(e){return 0===e.indexOf("a=ice-ufrag:")}))[0].substr(12),password:n.filter((function(e){return 0===e.indexOf("a=ice-pwd:")}))[0].substr(10)};return i},r.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},r.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},n=r.splitLines(e),i=n[0].split(" "),o=3;o<i.length;o++){var s=i[o],a=r.matchPrefix(e,"a=rtpmap:"+s+" ")[0];if(a){var c=r.parseRtpMap(a),u=r.matchPrefix(e,"a=fmtp:"+s+" ");switch(c.parameters=u.length?r.parseFmtp(u[0]):{},c.rtcpFeedback=r.matchPrefix(e,"a=rtcp-fb:"+s+" ").map(r.parseRtcpFb),t.codecs.push(c),c.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(c.name.toUpperCase());break;default:break}}}return r.matchPrefix(e,"a=extmap:").forEach((function(e){t.headerExtensions.push(r.parseExtmap(e))})),t},r.writeRtpDescription=function(e,t){var n="";n+="m="+e+" ",n+=t.codecs.length>0?"9":"0",n+=" UDP/TLS/RTP/SAVPF ",n+=t.codecs.map((function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType})).join(" ")+"\r\n",n+="c=IN IP4 0.0.0.0\r\n",n+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach((function(e){n+=r.writeRtpMap(e),n+=r.writeFmtp(e),n+=r.writeRtcpFb(e)}));var i=0;return t.codecs.forEach((function(e){e.maxptime>i&&(i=e.maxptime)})),i>0&&(n+="a=maxptime:"+i+"\r\n"),n+="a=rtcp-mux\r\n",t.headerExtensions&&t.headerExtensions.forEach((function(e){n+=r.writeExtmap(e)})),n},r.parseRtpEncodingParameters=function(e){var t,n=[],i=r.parseRtpParameters(e),o=-1!==i.fecMechanisms.indexOf("RED"),s=-1!==i.fecMechanisms.indexOf("ULPFEC"),a=r.matchPrefix(e,"a=ssrc:").map((function(e){return r.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute})),c=a.length>0&&a[0].ssrc,u=r.matchPrefix(e,"a=ssrc-group:FID").map((function(e){var t=e.substr(17).split(" ");return t.map((function(e){return parseInt(e,10)}))}));u.length>0&&u[0].length>1&&u[0][0]===c&&(t=u[0][1]),i.codecs.forEach((function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var r={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10)};c&&t&&(r.rtx={ssrc:t}),n.push(r),o&&(r=JSON.parse(JSON.stringify(r)),r.fec={ssrc:c,mechanism:s?"red+ulpfec":"red"},n.push(r))}})),0===n.length&&c&&n.push({ssrc:c});var f=r.matchPrefix(e,"b=");return f.length&&(f=0===f[0].indexOf("b=TIAS:")?parseInt(f[0].substr(7),10):0===f[0].indexOf("b=AS:")?1e3*parseInt(f[0].substr(5),10)*.95-16e3:void 0,n.forEach((function(e){e.maxBitrate=f}))),n},r.parseRtcpParameters=function(e){var t={},n=r.matchPrefix(e,"a=ssrc:").map((function(e){return r.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute}))[0];n&&(t.cname=n.value,t.ssrc=n.ssrc);var i=r.matchPrefix(e,"a=rtcp-rsize");t.reducedSize=i.length>0,t.compound=0===i.length;var o=r.matchPrefix(e,"a=rtcp-mux");return t.mux=o.length>0,t},r.parseMsid=function(e){var t,n=r.matchPrefix(e,"a=msid:");if(1===n.length)return t=n[0].substr(7).split(" "),{stream:t[0],track:t[1]};var i=r.matchPrefix(e,"a=ssrc:").map((function(e){return r.parseSsrcMedia(e)})).filter((function(e){return"msid"===e.attribute}));return i.length>0?(t=i[0].value.split(" "),{stream:t[0],track:t[1]}):void 0},r.parseSctpDescription=function(e){var t,n=r.parseMLine(e),i=r.matchPrefix(e,"a=max-message-size:");i.length>0&&(t=parseInt(i[0].substr(19),10)),isNaN(t)&&(t=65536);var o=r.matchPrefix(e,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substr(12),10),protocol:n.fmt,maxMessageSize:t};var s=r.matchPrefix(e,"a=sctpmap:");if(s.length>0){var a=r.matchPrefix(e,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(a[0],10),protocol:a[1],maxMessageSize:t}}},r.writeSctpDescription=function(e,t){var n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},r.generateSessionId=function(){return Math.random().toString().substr(2,21)},r.writeSessionBoilerplate=function(e,t,n){var i,o=void 0!==t?t:2;i=e||r.generateSessionId();var s=n||"thisisadapterortc";return"v=0\r\no="+s+" "+i+" "+o+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},r.writeMediaSection=function(e,t,n,i){var o=r.writeRtpDescription(e.kind,t);if(o+=r.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=r.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":"active"),o+="a=mid:"+e.mid+"\r\n",e.direction?o+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?o+="a=sendrecv\r\n":e.rtpSender?o+="a=sendonly\r\n":e.rtpReceiver?o+="a=recvonly\r\n":o+="a=inactive\r\n",e.rtpSender){var s="msid:"+i.id+" "+e.rtpSender.track.id+"\r\n";o+="a="+s,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+s,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+s,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+r.localCName+"\r\n"),o},r.getDirection=function(e,t){for(var n=r.splitLines(e),i=0;i<n.length;i++)switch(n[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[i].substr(2);default:}return t?r.getDirection(t):"sendrecv"},r.getKind=function(e){var t=r.splitLines(e),n=t[0].split(" ");return n[0].substr(2)},r.isRejected=function(e){return"0"===e.split(" ",2)[1]},r.parseMLine=function(e){var t=r.splitLines(e),n=t[0].substr(2).split(" ");return{kind:n[0],port:parseInt(n[1],10),protocol:n[2],fmt:n.slice(3).join(" ")}},r.parseOLine=function(e){var t=r.matchPrefix(e,"o=")[0],n=t.substr(2).split(" ");return{username:n[0],sessionId:n[1],sessionVersion:parseInt(n[2],10),netType:n[3],addressType:n[4],address:n[5]}},r.isValidSDP=function(e){if("string"!==typeof e||0===e.length)return!1;for(var t=r.splitLines(e),n=0;n<t.length;n++)if(t[n].length<2||"="!==t[n].charAt(1))return!1;return!0},e.exports=r},function(e,t,n){"use strict";var r=n(72),i=n(216);emedia.subscribed=function(e){return!!e._located||(2===e.type?!(e._located||!e._webrtc):void 0!==e._webrtc)};var o=r.prototypeExtend({voff:0,aoff:0,__init__:function(){var e=this;if(!e._mediaStream)throw _logger.error("_mediaStream empty"),"_mediaStream empty";if(e.hasEnabledTracks(e._mediaStream)){if(!e.__audioContext)throw _logger.error("require audioContext"),"require audioContext";e.__soundMeter=new i(e.__audioContext),e.__soundMeter.connectToSource(e._mediaStream,(function(t){if(t)throw t;e.__worked=e.__soundMeter.__worked=!0}))}},hasEnabledTracks:function(e){return emedia.hasEnabledTracks(e)},getSoundMeters:function(){var e=this;if(e.__soundMeter&&e.__worked)if(e._mediaStream.active){if(e.hasEnabledTracks(e._mediaStream))return{instant:e.__soundMeter.instant,slow:e.__soundMeter.slow,clip:e.__soundMeter.clip}}else e.__worked&&e._finally()},_finally:function(){var e=this;e.__soundMeter&&(e.__soundMeter.stop(),e.__worked=e.__soundMeter.__worked=!1)}});e.exports=r.prototypeExtend({__undefinedEQDelete:!0,Update:r.prototypeExtend({ifAoff:function(e){this.if("aoff",e)},ifVoff:function(e){this.if("voff",e)},ifMediaStream:function(e){this.if("mediaStream",e)},if:function(e,t){"undefined"!==typeof this[e]&&t(this[e])}}),located:function(){return this._located||!1},webrtc:function(e){return e&&(this._webrtc=e),this},getMediaStream:function(){return"undefined"!==typeof this.mediaStream?this.mediaStream:this._located?this._localMediaStream:this._webrtc&&(this._webrtc.getRemoteStream()||this._webrtc.getLocalStream())},requestFrame:function(){this._localMediaStream&&this._localMediaStream.getVideoTracks().forEach((function(e){"function"===typeof e.requestFrame&&e.requestFrame()}))},getLocalMediaStream:function(){return this._localMediaStream},getRemoteMediaStream:function(){if(this._webrtc&&"undefined"!==typeof this._webrtc.getRemoteStream())return this._webrtc.getRemoteStream()},mutedNeed:function(){return this.mutedMuted||!1},ifMediaStream:function(e){"undefined"===typeof this.mediaStream?this._located&&"undefined"!==typeof this._localMediaStream?e(this._localMediaStream):this._located||!this._webrtc||"undefined"===typeof this._webrtc.getRemoteStream()||e(this._webrtc.getRemoteStream()):e(this.mediaStream)},subscribed:function(){return emedia.subscribed(this)},updateAttributes:function(){for(var e=this,t=0;t<arguments.length;t++){var n=arguments[t];if(r.isPlainObject(n))for(var i in n){var o=n[i];e[i]=o}}},getHtmlDOMID:function(){return"_m_"+this.owner.id+"_s_"+this.id},MediaSoundMeter:o,StreamSoundMeter:r.prototypeExtend({__init__:function(){var e=this;if(!e._stream||"function"!==typeof e._stream.getMediaStream)throw _logger.error("_stream empty or not found method getMediaStream"),"_stream empty or not found method getMediaStream";if(e._streamId=e._stream.id,e._streamCreateId=e._stream.__create_id,e._mediaStream=e._mediaStream,2===e._stream.type&&!e._stream.located()&&!e._webrtc)throw _logger.error("require webrtc. when type = 2 and not located"),"require webrtc. when type = 2 and not located";e.__mediaSoundMeter=e.__mediaSoundMeter||new o({__audioContext:e.__audioContext,_mediaStream:e._mediaStream}),e.__mediaSoundMeter.useCount=(e.__mediaSoundMeter.useCount||0)+1},onSoundMeters:function(e){var t=this,n={instant:0,slow:0,clip:0};if(t._stream.aoff)return t._finally(),e(n),n;if(2!==t._stream.type&&t._stream.subArgs&&void 0!==t._stream.subArgs.subSAudio&&!t._stream.subArgs.subSAudio)return t._finally(),e(n),n;if(0==t._stream.id||2===t._stream.type&&!t._stream.located()&&(!t._stream.subArgs||!t._stream.subArgs.subSAudio)){var i,o=t._webrtc.getReceiversOfPeerConnection();if(!o||0===o.length)return e(n),n;for(var s in o)"audio"===o[s].track.kind&&(i=o[s]);if(!i)return e(n),n;if("function"===typeof i.getContributingSources){var a,c=i.getContributingSources();if(emedia.config._printSoundData&&r.logger.debug(t._stream.id,t._stream.csrc,"rtpContributingSources ",c),!c||0===c.length)return e(n),n;for(var s in c)c[s].source==t._stream.csrc&&(a=t._stream.csrc);if(emedia.config._printSoundData&&r.logger.debug(t._stream.id,t._stream.csrc,"source ",a),void 0===a)return e(n),n}}var u=t.__mediaSoundMeter.getSoundMeters()||n,f=2===t._stream.type?t._webrtc:t._stream._webrtc;(emedia.meterWithTrackAudioLevel||0===u.instant)&&f&&!f.closed&&f._rtcPeerConnection&&f._rtcPeerConnection.getStats().then((function(t){t.size>0&&t.forEach((function(t){"track"!==t.type||"audio"!==t.kind&&"audio"!==t.trackIdentifier||(u.trackAudioLevel=t.audioLevel,u.trackTotalAudioEnergy=t.totalAudioEnergy,e(u))}))})),e(u)},_finally:function(){var e=this;2===e._stream.type&&e._stream.located()&&e._remoteMediaSoundMeters&&e._remoteMediaSoundMeters._finally(),e.__mediaSoundMeter.useCount--,0===e.__mediaSoundMeter.useCount&&e.__mediaSoundMeter._finally()}})})},function(e,t,n){"use strict";function r(e){this.context=e,this.instant=0,this.slow=0,this.clip=0,this.script=e.createScriptProcessor(2048,1,1);var t=this;this.script.onaudioprocess=function(e){var n,r=e.inputBuffer.getChannelData(0),i=0,o=0;for(n=0;n<r.length;++n)i+=r[n]*r[n],Math.abs(r[n])>.99&&(o+=1);t.instant=Math.sqrt(i/r.length),t.slow=.95*t.slow+.05*t.instant,t.clip=o/r.length}}r.prototype.connectToSource=function(e,t){console.log("SoundMeter connecting");try{this.mic=this.context.createMediaStreamSource(e),this.mic.connect(this.script),this.script.connect(this.context.destination),"undefined"!==typeof t&&t(null)}catch(n){console.error(n),"undefined"!==typeof t&&t(n)}},r.prototype.stop=function(){this.mic.disconnect(),this.script.disconnect()},e.exports=r},function(e,t,n){"use strict";var r=n(72),i=r.tagLogger("Handler"),o=n(208),s=r.prototypeExtend({onEvent:function(e){this.mgr.upload_stats&&this.mgr.upload_stats.upload_event(e);var t=this;function n(){try{t.handleEvent(e)}catch(n){i.warn(n)}}if(e&&i.info("[EVT]",e.message(),e.hidden||""),e instanceof o.ServerRefuseEnter&&e.failed&&-95270===e.failed&&(e.failed=-9527),e instanceof emedia.event.StreamState&&e.stream&&e.stream.located())n();else try{e.hidden||t.onNotifyEvent&&t.onNotifyEvent(e)}finally{n()}},handleEvent:function(e){var t=this;if(e instanceof o.RecvResponse)t._onRecvResponse(e);else if(e instanceof o.ServerRefuseEnter)i.warn("Server refuse, ",e.failed,e.msg),t.onServerRefuseEnter(e);else if(e instanceof o.NetworkChanaged)i.warn("Network chanaged, ",e.preIp,e.nowIp),t.onNetworkChanaged(e);else if(e instanceof o.EnterFail)i.warn("Enter fail, result = ",e.failed),t.onEnterFail();else if(e instanceof o.WSClose)t.onWSClose();else if(e instanceof o.WSConnected)i.warn("Websocket connected");else if(e instanceof o.ICEConnected){var n=e.webrtc;t.onICEConnected(n)}else if(e instanceof o.ICEConnectFail){n=e.webrtc;t.onICEConnectFail(n)}else if(e instanceof o.ICEDisconnected){n=e.webrtc;t.onICEDisconnected(n)}else if(e instanceof o.ICEClosed){n=e.webrtc;t.onICEClosed(n)}else if(e instanceof o.ICERemoteMediaStream)t.onICERemoteMediaStream(e.webrtc);else if(e instanceof o.PushSuccess){t._cacheStreams[e.stream.id]=t._linkedStreams[e.stream.id]=e.stream;var s=t.newStream(e.stream);if(e.hidden&&!t._maybeNotExistStreams[e.stream.id]&&!s.isRepublished)return void t._onAddStream(s);emedia._yetGetUserMedia=!0;try{!0!==e.hidden&&s&&t.onUpdateStream(s,new s.Update({voff:s.voff,aoff:s.aoff,mediaStream:s.getMediaStream()}))}finally{emedia.isSafari&&r.forEach(t._cacheStreams,(function(e,n){!0===n._autoSubWhenPushStream&&(r.removeAttribute(n,"_autoSubWhenPushStream"),t.createWebrtcAndSubscribeStream(n.id))}))}}else if(e instanceof o.SubSuccess)console.log("__event.SubSuccess",e),t._linkedStreams[e.stream.id]=e.stream,e.stream.updateAttributes({_zoom:1});else if(e instanceof o.PushFail){if(!0!==e.hidden){var a=r.removeAttribute(t._linkedStreams,e.stream.id);if(i.warn("PushFail remove from _linkedStreams",e.stream.id,a),a){s=t.newStream(e.stream);t.onRemoveStream(s)}}}else if(e instanceof o.SubFail){if(!0!==e.hidden){r.removeAttribute(t._linkedStreams,e.stream.id),i.warn("SubFail remove from _linkedStreams",e.stream.id);s=t.newStream(e.stream);s.updateAttributes({rtcId:void 0,_webrtc:void 0,mediaStream:void 0}),t.onUpdateStream(s,new s.Update(s))}}else if(e instanceof o.SubFailNotSupportVCodes){var c=e.stream;i.warn("Rtc donot support pub VCodes. close. sub fail.",c.rtcId," -> ",c.id);try{t.onNotSupportPublishVideoCodecs&&t.onNotSupportPublishVideoCodecs(c)}catch(d){i.warn(d)}}else if(e instanceof o.EnterSuccess)console.log("__event.EnterSuccess",e),t.onEnterSuccess();else if(e instanceof o.SwitchVCodes){c=e.stream;var u,f=e.useVCodes;n=c._webrtc;if(i.warn("Rtc switch VCodes. ",c.id,f),f&&0!=f.length||i.warn("Rtc switch VCodes. error! useVCodes is empty ",c.id,f),emedia.config&&emedia.config.forceUseVideoCodecs&&emedia.config.forceUseVideoCodecs.length>0&&(u=emedia.config.forceUseVideoCodecs,r.isArray(u)||(u=[],u.push(emedia.config.forceUseVideoCodecs))),u){if("string"===typeof u&&u!==f[0])return void i.warn("Rtc switch VCodes. igrone . useVCodes !== forceUseVideoCodecs ",c.id,n._rtcId,f,u);if(r.isArray(u)&&u[0]!==f[0])return void i.warn("Rtc switch VCodes. igrone ddd . useVCodes == forceUseVideoCodecs ",c.id,n._rtcId,f,u)}if(n&&n.optimalVideoCodecs){if("string"===typeof n.optimalVideoCodecs&&n.optimalVideoCodecs==f[0])return void i.warn("Rtc switch VCodes. igrone . useVCodes == optimalVideoCodecs ",c.id,n._rtcId,f);if(r.isArray(n.optimalVideoCodecs)&&n.optimalVideoCodecs.length>0&&n.optimalVideoCodecs[0]==f[0])return void i.warn("Rtc switch VCodes. igrone ddd . useVCodes == optimalVideoCodecs ",c.id,n._rtcId,f)}c.updateAttributes({optimalVideoCodecs:f}),n&&t.closeWebrtc(n.getRtcId(),!0),setTimeout((function(){c.updateAttributes({iceRebuildCount:1}),t.iceRebuild(c),i.warn("Rtc switch VCodes. iceRebuild end.",c.id,f)}),300)}},_onRecvResponse:function(e){var t=this,n=e.request,r=e.response;if(n&&r&&200!==n.op&&1002!==n.op&&0!==r.result){i.warn("Server refuse. when request = ",n);var o=e.failed;switch(o){case-9527:case-95270:break;case-500:case-502:case-504:case-508:case-510:t.close(4,o);break;case-506:t.close(11,o);break;case-501:t.close(11,o);default:}}},onServerRefuseEnter:function(e){var t=this,n=e.failed;switch(n){case-9527:case-95270:t.close(4,-9527);break;case-500:case-502:case-504:case-508:case-510:t.close(4,n);break;case-506:t.close(11,n);break;default:t.close(2)}},onEnterFail:function(){var e=this;e.__getCopyInterval&&clearInterval(e.__getCopyInterval)},onNetworkChanaged:function(e){var t=this,n=e.nowIp;emedia.config.rebuildPeerConnectionWhenNetworkChanaged&&setTimeout((function(){var e={};r.forEach(t._cacheStreams,(function(r,o){if(!t._maybeNotExistStreams[r]&&o._webrtc){var s=o._webrtc;e[o.rtcId]||(s.closed||"string"!==typeof s.useIp||s.useIp===n||(i.warn("network chanage. webrtc will rebuild.",s._rtcId,s.__id),t.onICEClosed(s)),e[o.rtcId]=!0)}}))}),100)},onEnterSuccess:function(){var e=this;setTimeout((function(){e._failIcesRebuild()}),50),e.getCopyIntervalMillis&&e.getCopyIntervalMillis>0&&(i.warn("Run interval get copy. interval = ",e.getCopyIntervalMillis),e.__getCopyInterval&&clearInterval(e.__getCopyInterval),e.__getCopyInterval=setInterval((function(){e._session.connected()?e._sysCopy.apply(e):(i.warn("Warn! cannot get copy. cause offline."),e.__getCopyInterval&&clearInterval(e.__getCopyInterval))}),e.getCopyIntervalMillis)),e.getMediaMeterIntervalMillis&&e.getMediaMeterIntervalMillis>0&&e._intervalGetMediaMeters()},_intervalGetMediaMeters:function(){var e=this;function t(){e.__getMediaMetersIntervalFlag&&emedia.cancelAnimationFrame(e.__getMediaMetersIntervalFlag),e.getMediaMeterIntervalMillis?e.__getMediaMetersIntervalFlag=emedia.requestAnimationFrame((function(n){"function"===typeof emedia.AudioContext&&e._flushMediaMetersByAudioContext.apply(e),!1===e.closed&&t()}),e.getMediaMeterIntervalMillis):i.warn("Ontalking closed. please use getMediaMeterIntervalMillis")}t()},_flushMediaMetersByAudioContext:function(){var e=this;r.forEach(e._cacheStreams,(function(t,n){e._monitSoundChanagedStreams&&!e._monitSoundChanagedStreams[t]||"0"!=n.id&&e._updateMetersOrNewOne.call(e,t,n)}));var t=[];r.forEach(e._mediaMeters,(function(n,r){var i=e._cacheStreams[n];i&&e._updateMetersOrNewOne.call(e,n,i),i||t.push(n)})),r.forEach(t,(function(t,n){r.removeAttribute(e._mediaMeters,n)}))},_updateMetersOrNewOne:function(e,t){var n=this,i=n._mediaMeters[e];if(2===t.type&&!t.located()&&(!t.subArgs||!t.subArgs.subSAudio)){var o=n._oneAudioMixers();if(!o||i&&i._webrtc&&o._webrtc.__id!=i._webrtc.__id)return i&&i._finally(),r.removeAttribute(n._mediaMeters,e),void n._onSoundChanage.call(n,t.owner,t)}return i&&i._streamCreateId===t.__create_id&&i.__mediaSoundMeter.__worked?(i.onSoundMeters((function(e){n._onSoundChanage.call(n,t.owner,t,e)})),i):(i&&(i._streamCreateId!==t.__create_id||i.__mediaSoundMeter.__worked)&&(i&&i._finally(),r.removeAttribute(n._mediaMeters,e),n._onSoundChanage.call(n,t.owner,t)),t.aoff?void 0:(i=n._newMediaMeters(t),i&&(n._mediaMeters[e]&&n._mediaMeters[e]._finally(),n._mediaMeters[e]=i),i))},_newAudioContext:function(){if(emedia.__usingWebAudio)return emedia.__audioContext},_newMediaMeters:function(e){var t,n=this;if(2===e.type&&e.subArgs&&e.subArgs.subSAudio&&e._webrtc&&e._webrtc.getRemoteStream()){var r=new e.StreamSoundMeter({_stream:e,_mediaStream:e._webrtc.getRemoteStream(),_webrtc:e._webrtc,__audioContext:n._newAudioContext()});return r}if(2===e.type&&e.located()){r=new e.StreamSoundMeter({_stream:e,_mediaStream:e._localMediaStream,__audioContext:n._newAudioContext()});return r}if(2===e.type&&!e.located()){var i=n._oneAudioMixers();if(!i||!i._webrtc||i._webrtc.closed)return;if(i&&(void 0===i._remoteMediaSoundMeters||!i._remoteMediaSoundMeters.__worked)&&i._webrtc&&i._webrtc.getRemoteStream()&&(i._remoteMediaSoundMeters=new i.MediaSoundMeter({_mediaStream:i._webrtc.getRemoteStream(),__audioContext:n._newAudioContext()})),!i._remoteMediaSoundMeters)return;r=new e.StreamSoundMeter({_stream:e,_webrtc:i._webrtc,__mediaSoundMeter:i._remoteMediaSoundMeters});return r}if(!e.aoff&&(t=e.getMediaStream())){r=new e.StreamSoundMeter({_stream:e,_mediaStream:t,__audioContext:n._newAudioContext()});return r}},_oneAudioMixers:function(){var e=this,t=e._cacheStreams["0"];if(t&&t._webrtc&&!t._webrtc.closed)return t;for(var n in e.audioMixers){var r=e.audioMixers[n];if(r.located())return r}},onWSClose:function(){var e=this;e.__getCopyInterval&&clearInterval(e.__getCopyInterval),i.info("Websocket closed.")},onICEDisconnected:function(e){var t=this;t.__networkWeakInterval&&clearTimeout(t.__networkWeakInterval),t.__networkWeakInterval=setTimeout((function(){t.onNetworkWeak&&t.onNetworkWeak()}),1e3),r.forEach(t._linkedStreams,(function(n,o){var s;o.rtcId==e.getRtcId()&&((s=t._maybeNotExistStreams[n])||(s=t._maybeNotExistStreams[n]=r.extend({},o),s.updateAttributes({iceRebuildCount:1})),i.info("Stream maybe not exist. caused by disconnected",o.id))}))},onICEConnectFail:function(e){var t=this;for(var n in t._linkedStreams){var s=t._linkedStreams[n];if(s.rtcId==e.getRtcId()){if(s._webrtc&&s._webrtc.__id!==e.__id){i.warn("Stream use other webrtc rtcId = ",s.rtcId,", id: ",s._webrtc.__id,e.__id);continue}var a;if((a=t._maybeNotExistStreams[n])||(a=t._maybeNotExistStreams[n]=r.extend({},s),a.updateAttributes({iceRebuildCount:1})),a){var c=new o.StreamState({stream:a});c.iceFail(),t.onEvent(c)}if(i.info("ice fail. webrtc = ",e.getRtcId()," problem stream is ",a.iceRebuildCount,a.id),a.iceRebuildCount>emedia.config.iceRebuildCount)i.info("ice fail. webrtc = ",e.getRtcId()," rebuild fail. problem stream is ",a.id),a.located()?t.onEvent(new o.PushFail({stream:s,cause:"pub ice rebuild failed."})):t.onEvent(new o.SubFail({stream:s,cause:"sub ice rebuild failed."})),t.closeWebrtc(e.getRtcId(),!1);else{var u=t._records[a.id];a._localMediaStream?i.info("ice fail. webrtc = ",e.getRtcId()," will rebuild. remain local stream. ",a.id):i.info("ice fail. webrtc = ",e.getRtcId()," will rebuild.",a.id),t.closeWebrtc(e.getRtcId(),!0),u&&(t._records[a.id]=u),function(e){setTimeout((function(){t.iceRebuild(e)}),emedia.config.iceRebuildIntervalMillis)}(a),i.info("ice fail. webrtc = ",e.getRtcId()," will rebuilding. problem stream is ",a.id)}2===s.type&&r.removeAttribute(t.audioMixers,s.id)}}},onICEClosed:function(e){var t=this;if(e.closed){i.warn("Webrtc will be removed. by __id = ",e.__id,", rtcId = ",e.getRtcId());var n=r.removeAttribute(t._ices,e.__id);n?i.warn("Webrtc removed. by id = ",n.__id,", rtcId = ",n.getRtcId()):i.warn("Webrtc removed. by id = ",e.__id,", rtcId = ",e.getRtcId());var o=t._ices[e.getRtcId()];o&&o.__id===n.__id&&(n=r.removeAttribute(t._ices,e.getRtcId()),i.warn("Webrtc removed. by rtcId = ",n.getRtcId(),", __id = ",n.__id))}else i.info("ICE self closed. not allow. will rebuild",e.getRtcId()),t.onICEConnectFail(e)},onICEConnected:function(e){var t=this;r.forEach(t._cacheStreams,(function(n,s){if(s.rtcId==e.getRtcId()){if(s.updateAttributes({finalVCodeChoices:e.finalVCodeChoices}),t._maybeNotExistStreams[n]){r.removeAttribute(t._maybeNotExistStreams,s.id),t._linkedStreams[n]=s,i.info("ice reconnected. webrtc = ",e.getRtcId(),"will update stream = ",s.id);var a=t._records[s.id];a&&a.rtcId!==s.rtcId&&(t.startRecord(s),i.warn("Re record. for ",s.id,", after rebuild ice.",a.rtcId,"->",s.rtcId))}else i.info("ice connected. webrtc = ",e.getRtcId(),s.id),s.located()&&t.onEvent(new o.PushSuccess({stream:s})),s.located()||t.onEvent(new o.SubSuccess({stream:s}));2===s.type&&(t.audioMixers[s.id]=s)}}))},onICERemoteMediaStream:function(e){var t=this;r.forEach(t._cacheStreams,(function(n,r){if(r.rtcId==e.getRtcId()&&(!r.located()||2===r.type)){var i=e.getRemoteStream();if(t._updateRemoteStream(r,i),r.onGotRemoteMediaStream)r.onGotRemoteMediaStream.call(r,i);else{r=t.newStream(r);r.updateAttributes({mediaStream:e.getRemoteStream()}),t.onUpdateStream(r,new r.Update({mediaStream:r.mediaStream}))}}}))},_failIcesRebuild:function(){var e=this,t=1;r.forEach(e._maybeNotExistStreams,(function(n,r){setTimeout((function(){e.iceRebuild(r)}),100*t)}))},iceRebuild:function(e){var t=this;return t.connected()?t._linkedStreams[e.id]&&t._cacheStreams[e.id]?void(e.iceRebuildCount>emedia.config.iceRebuildCount?(i.info("ice rebuild fail. count too many. stream is ",e.id),e.located()?t.onEvent(new o.PushFail({stream:e,cause:"pub ice rebuild failed."})):t.onEvent(new o.SubFail({stream:e,cause:"sub ice rebuild failed."}))):t.connected()?(i.info("ice try rebuild. count",e.iceRebuildCount,". stream is ",e.id),t.rebuildIce(e),e.iceRebuildCount++):i.warn("ice rebuild. stop. cause by not websocket disconnect",e.id)):(i.info("ice rebuild fail. it yet closed. stream is ",e.id,e.rtcId),r.removeAttribute(t._maybeNotExistStreams,e.id),r.removeAttribute(t._linkedStreams,e.id),void i.warn("iceRebuild, remvoe from _linkedStreams",e.id)):(e.updateAttributes({iceRebuildCount:1}),void i.warn("Websocket disconnect. waiting. rebuild count reset",e.iceRebuildCount,e.id))},rebuildIce:function(e){var t=this;t._cacheStreams[e.id]?(i.warn("Begin rebuild ice ",e.iceRebuildCount,e.id),e.located()?(e.updateAttributes({isRepublished:!0}),t.push(e,void 0,void 0,!0)):t.createWebrtcAndSubscribeStream(e.id),i.warn("Finish rebuild ice ",e.iceRebuildCount,e.id,t._cacheStreams[e.id].rtcId)):i.warn("Begin rebuild ice. not found stream at local",e.iceRebuildCount,e.id)},_sysCopy:function(){var e=this,t=e.newMessage().setOp(1e3).setCver(e._cver||0);e.postMessage(t,(function(t){0==t.result?(e._cver||0)<t.cver&&(e._cver=t.cver,e.onMembers(t.cver,t.mems||{}),e.onStreams(t.cver,t.streams||{}),i.info("Got copy success.")):i.warn("Get copy fail. result = ",t.result)}))}});e.exports=s},function(e,t,n){"use strict";var r=n(72),i=r.tagLogger("Desktop"),o=n(208);window.__shareDesktopMessageCount__=0,e.exports=r.prototypeExtend({__RTC_PAGE_MSG_TYPE__:"RTC-SD-PAGE",__RTC_EXT_MSG_TYPE__:"RTC-SD-EXT",__init__:function(){var e=this;e.__extLoaded=e.rsdExtLoaded(),e.__extLoaded&&e.__onRsdExtLoad(),window.addEventListener("load",(function(t){if(!e.__extLoaded){var n=e.rsdExtLoaded();e.__extLoaded=n}})),window.addEventListener("message",(function(t){if(t.data){var n=t.data;n.type&&n.type===e.__RTC_EXT_MSG_TYPE__&&n.evname&&(i.info("got ext-msg: ",n),"extLoaded"!==n.evname?e.__onMessage(n):e.__extLoaded||(e.__extLoaded=!0,setTimeout(e.__onRsdExtLoad(),50)))}}))},rsdExtLoaded:function(){var e=document.getElementById("RTC-Share-Deskto-installed-ele-rat1abrr");return!(!emedia.isElectron&&!e)},__sendMessage:function(e,t){var n=this,o="tsx_"+__shareDesktopMessageCount__+++"_"+Math.random().toString(36).substr(2,4);if(!n.__extLoaded)throw i.error("Rtc share desktop not loaded"),"Rtc share desktop not loaded";e.tsxId=o,n["on_"+o]=function(){t&&t.apply(n,arguments),r.removeAttribute(n,"on_"+o)},window.postMessage&&window.postMessage(e,"*")},__onMessage:function(e){var t=this,n=e.tsxId;t["on_"+n]&&t["on_"+n](e)},__onRsdExtLoad:function(){var e=this;e.onExtLoaded&&e.onExtLoaded()},openDesktopMedia:function(e,t){var n=this;if(emedia.isElectron)n.openDesktopMediaInElectron(e,t);else if(n.__extLoaded&&n.rsdExtLoaded()){var r={type:n.__RTC_PAGE_MSG_TYPE__,evname:"chooseDesktopMedia",screenOptions:e};n.__sendMessage(r,(function(e){"onAccessApproved"===e.evname&&e.streamId?t(new o.OpenDesktopMedia({desktopStreamId:e.streamId})):t(new o.OpenDesktopMediaAccessDenied)}))}else t(new o.ShareDesktopExtensionNotFound)},openDesktopMediaInElectron:function(e,t){e||(e=["screen","window"]);var n={types:e,thumbnailSize:{width:230,height:230}};emedia.electron.desktopCapturer.getSources(n).then((function(e){if("function"===typeof emedia.chooseElectronDesktopMedia){for(var n=0;n<e.length;n++){var r=e[n];r.hxThumbDataURL=r.thumbnail.toDataURL()}emedia.chooseElectronDesktopMedia(e,(function(e){var n;n=e&&e.id?e.id:e,t(new o.OpenDesktopMedia({desktopStreamId:n}))}),(function(){t(new o.OpenDesktopMediaAccessDenied({message:function(){return"User denied access"}}))}))}else t(new o.OpenDesktopMedia({desktopStreamId:e[0].id}))})).catch((function(e){return t(new o.OpenDesktopMediaAccessDenied({error:e}))}))}})},function(e,t,n){"use strict";var r,i=n(72),o=i.tagLogger("PCStats");e.exports=r=i.prototypeExtend({__init__:function(){this._webrtc||this._stream&&(this._webrtc=this._stream._webrtc),this.samplesDatas={},this.gatherResults={},this._bysamples={},!1!==this._inbound_&&(this._bysamples["inbound-rtp"]=["bytesRateReceived","packageLossRate","bytesReceived","packetsLost","packetsReceived","pliCount","framesDecoded"]),!1!==this._outbound_&&(this._bysamples["outbound-rtp"]=["bytesRateSent","bytesSent","packetsSent","qpSum","pliCount"])},_onGatherResult:function(e,t,n,r){var i=this;if(i._service&&i._service.current&&emedia.config.remainLastStatsCount){var o=i._service.current._trackStats;o||(o=i._service.current._trackStats={});var s=(o[e]||(o[e]={}))[t];s||(s=o[e][t]={});var a=s[n];a||(a=s[n]=new Array(emedia.config.remainLastStatsCount)),void 0===a.curIndex&&(a.curIndex=0),a[a.curIndex]={data:r,timestamp:new Date},a.curIndex=(a.curIndex+1)%emedia.config.remainLastStatsCount}"function"===typeof this.onGatherResult&&this.onGatherResult(e,t,n,r)},stats:function(e){if(this._webrtc&&this._webrtc._rtcPeerConnection)return this._webrtc._rtcPeerConnection.getStats(e);o.warn("not found webrtc or peer connection")},statsOfTrack:function(e){if(!e instanceof window.MediaStreamTrack)throw o.error("selector not a MediaStreamTrack"),"selector not a MediaStreamTrack";return this.stats(e)},audioTrack:function(e){var t=e&&e.getAudioTracks();return t&&t.length?t[0]:void 0},videoTrack:function(e){var t=e&&e.getVideoTracks();return t&&t.length?t[0]:void 0},gatherTrack:function(e,t){var n=this;t=e.kind||t,t=t&&t.toLowerCase();var r=e.id;this.statsOfTrack(e).then((function(i){n.samplesDatas[r]||(n.samplesDatas[r]={});var s=n.samplesDatas[r];i.forEach((function(r,i){var a=n._bysamples[r.type],c=r.mediaType||i.indexOf("ideo")>=0&&"video"||i.indexOf("udio")>=0&&"audio"||void 0;if(a&&a.length&&(!0===emedia.config._printDebugStats&&o.debug(i,r,e,c,t),!c||c===t)){var u=s[r.type]||(s[r.type]={});a.forEach((function(n){var i=u[n]||(u[n]=[]),o={timestamp:r.timestamp,kind:r.mediaType||e.kind||t};o[n]="packageLossRate"===n?{packetsLost:r["packetsLost"],packetsReceived:r["packetsReceived"]}:"bytesRateReceived"===n?r["bytesReceived"]:"bytesRateSent"===n?r["bytesSent"]:r[n],i.push(o)}))}}))}))},gatherWebrtcMediaStream:function(e,t){var n=this;t?"audio"!==t.toLowerCase()?"video"!==t.toLowerCase()||e.getVideoTracks().forEach((function(e){n.gatherTrack(e,e.kind||t.toLowerCase())})):e.getAudioTracks().forEach((function(e){n.gatherTrack(e,e.kind||t.toLowerCase())})):e.getTracks().forEach((function(e){n.gatherTrack(e)}))},gatherWebrtc:function(){this._webrtc._localStream&&this.gatherWebrtcMediaStream(this._webrtc._localStream),this._webrtc._remoteStream&&this.gatherWebrtcMediaStream(this._webrtc._remoteStream)},_gather_inbound_rtp_packageLossRate:function(e){if(!e||0===e.length)return 0;var t=0,n=0;if(e.length>1)for(var r=1;r<e.length;r++){var i=e[r],o=e[r-1];i.packageLossRate.packetsReceived!=o.packageLossRate.packetsReceived?(t+=(i.packageLossRate.packetsLost-o.packageLossRate.packetsLost)/(i.packageLossRate.packetsReceived-o.packageLossRate.packetsReceived),n++):(t=0,n=0)}return e.length>=emedia.config.statsSeconds&&e.shift(),0==n?0:t/n},_gatherBytesRate:function(e,t,n){if(!n||0===n.length)return 0;var r=n[n.length-1][t]-n[0][t],i=n[n.length-1].timestamp-n[0].timestamp;return n.length>=emedia.config.statsSeconds&&n.shift(),0===i?0:parseFloat(1e3*r/i).toFixed(2)},_gather:function(e,t,n){e=e.replace(/[^\w]/g,"_"),t=t.replace(/[^\w]/g,"_");var r=i.list("_gather",e,t).join("_");if("function"===typeof this[r])return this[r](n);if(t.startsWith("bytesRate"))return this._gatherBytesRate(e,t,n);var o=n.shift();return o&&o[t]||0},_statsCount:function(){var e=this;function t(){i.forEach(e.samplesDatas,(function(t,r){var i=e.gatherResults[t]=e.gatherResults[t]||{};n(t,i,r)}))}function n(e,t,n){i.forEach(n,(function(n,i){var o=t[n]||(t[n]={});r(e,o,n,i)}))}function r(t,n,r,o){i.forEach(o,(function(i,o){var s=n[i]=e._gather(r,i,o);e._onGatherResult(t,r,i,s)}))}t()},gather:function(){this.gatherWebrtc(),this._statsCount()},intervalGather:function(e){this._intervalId&&clearInterval(this._intervalId),this._intervalId=setInterval(this.gather.bind(this),e||1e3)},stopIntervalGather:function(){this._intervalId&&clearInterval(this._intervalId)}});var s={},a=r.echo=function(e){i.forEach(e,(function(e,t){var n;!s[t.id]&&t._webrtc&&!t._webrtc.closed&&t.getMediaStream()?(s[t.id]=n=new r({_webrtc:t._webrtc}),n._mediaStream=t.getMediaStream()):!s[t.id]||t._webrtc&&!t._webrtc.closed&&t.getMediaStream()||i.removeAttribute(s,t.id)}));var t=[];i.forEach(s,(function(n,r){e&&e[n]?(r.gatherWebrtcMediaStream(r._mediaStream),r._statsCount()):t.push(n)})),i.forEach(t,(function(e,t){i.removeAttribute(s,t)}))};r.intervalEcho=function(e,t){return setInterval((function(){a(e)}),t)},i.forEach(["inbound","outbound"],(function(e,t){i.forEach(["Audio","Video"],(function(e,n){(function(e,t){var n;r[e+t]=n=function(o,s,a){var c;n.__intervalIds||(n.__intervalIds={}),c=this instanceof emedia.XService?this:emedia.useCurrentXService;var u=o.id+"___"+c.namespace,f=n.__intervalIds&&n.__intervalIds[u];return f&&clearInterval(f),f=setInterval((function(){var a,d=n[u];(!d&&o&&o._webrtc&&!o._webrtc.closed&&o.getMediaStream()?(n[u]=d=new r({_webrtc:o._webrtc,_inbound_:"inbound"===e,_outbound_:"outbound"===e}),d._service=c,s&&(d.onGatherResult=s),d._mediaStream=o.getMediaStream()):!d||o&&o._webrtc&&!o._webrtc.closed&&o._webrtc.__id===d._webrtc.__id&&o.getMediaStream()&&d._mediaStream&&d._mediaStream.id===o.getMediaStream().id||(i.removeAttribute(n,u),d=null),d)?(d.gatherWebrtcMediaStream(d._mediaStream,t),d._statsCount()):o&&c&&(a=c.getStreamById(o.id))?o=a:f&&clearInterval(f)}),a),n.__intervalIds[u]=f,f}})(t,n)}))}))},function(e,t,n){"use strict";var r,i=n(72),o=i.tagLogger("DefaultTrack"),s=n(221);function a(e){var t;return t=document.createElement("canvas"),e.appendChild(t),t.style.cssText="position: absolute; background: transparent; width: 100%; height: 100%",t.width=e.offsetWidth,t.height=e.offsetHeight,o.warn("Canvas",t.width,t.height),t}e.exports=r=s.extend({__init__:function(){this._canvas||(this._canvas=a(this._target)),this._canvasContext||(this._canvasContext=this._canvas.getContext("2d"))},resizeCanvas:function(){},_calPosition:function(){var e=s.prototype._calPosition.apply(this,arguments);return e.x=Math.floor(e.x*this._canvas.width/e.width),e.y=Math.floor(e.y*this._canvas.height/e.height),e},_draw:function(e,t,n,r,i,o){var s=this,a=s._canvasContext;(!t||t<=1)&&(t=2);var c=a.getImageData(e.x-t/2,e.y-t/2,t,t),u=function(e,t,n,r,i){for(var o=0,s=e.data;o<s.length;o+=4){var a={r:void 0===t?s[o]:t,g:void 0===n?s[o+1]:n,b:void 0===r?s[o+2]:r,alpha:void 0===i?s[o+3]:i};s[o]=a.r,s[o+1]=a.g,s[o+2]=a.b,s[o+3]=a.alpha}};c&&u(c,n,r,i,o),a.putImageData(c,e.x,e.y)},redraw:function(e,t,n,i,o,s){var a=this,c=r.prototype._draw.bind(a);c({x:e,y:t},2)},onMouseTrigger:function(e,t){e.isLeftKey()&&this._draw(e.xy,8,189,56,51,255),e.isRightKey()&&this._draw(e.xy,8,45,23,189,255),e.isWheelKey()&&this._draw(e.xy,8,58,189,76,255)},onMouseTrack:function(e,t,n){this._draw(e,2,227,18,247,255)}})},function(e,t,n){"use strict";var r=n(72),i=(r.tagLogger("MouseTrack"),n(222));e.exports=r.prototypeExtend({_scale:1,__init__:function(){},getTargetPageXY:function(){var e=this;return e._target&&r.extend({},r.getDomPageRect(e._target))},onMouseTrack:function(e,t,n){},onMouseTrigger:function(e,t){},_onMouseTrack:function(e,t,n){this.onMouseTrack&&this.onMouseTrack(e,t,n)},_onMouseTrigger:function(e,t){this.onMouseTrigger&&this.onMouseTrigger(e,t)},track:function(e){var t=this,n=e=r.extend({},e),i=t.getTargetPageXY();i&&(e=t._calPosition(e),n={x:e.x,y:e.y,pageX:i.x+e.x,pageY:i.y+e.y}),t._onMouseTrack(n,t._lastPageXY,t._lastTrigger),t._lastPageXY=n},trigger:function(e){var t=this;e=new i(e);var n,r=t.getTargetPageXY();r&&(n=t._calPosition(e.xy),e.xy={x:n.x,y:n.y,pageX:r.x+n.x,pageY:r.y+n.y}),e._time||(e._time=(new Date).getTime()),t._onMouseTrigger(e,t._lastTrigger),t._lastTrigger=e},releaseTrigger:function(){this._lastTrigger=void 0,this._lastPageXY=void 0,this.onReleaseTrigger&&this.onReleaseTrigger(this._lastTrigger)},_calPosition:function(e){var t=this;t._referenceVideo&&(e=emedia.Service.prototype.eventXYAtVideo.call(null,e,t._referenceVideo));var n=t.getTargetPageXY();if(!n)return e;r.isFloat(e.x)&&void 0!==e.width&&(e.x=e.x*e.width*t._scale*(n.width/e.width)),r.isFloat(e.y)&&void 0!==e.height&&(e.y=e.y*e.height*t._scale*(n.height/e.height)),r.isFloat(e.x)&&void 0===e.width&&(e.x=e.x*t._scale*n.width),r.isFloat(e.y)&&void 0===e.height&&(e.y=e.y*t._scale*n.height),r.isInt(e.x)&&void 0!==e.width&&(e.x=e.x*t._scale*(n.width/e.width)),r.isInt(e.y)&&void 0!==e.height&&(e.y=e.y*t._scale*(n.height/e.height)),r.isInt(e.x)&&void 0===e.width&&(e.x=e.x*t._scale),r.isInt(e.y)&&void 0===e.height&&(e.y=e.y*t._scale);var i=Math.floor(e.x),o=Math.floor(e.y);return i<0&&(i=n.width+i),o<0&&(o=n.width+o),{x:i,y:o,width:n.width,height:n.height}}})},function(e,t,n){"use strict";var r=n(72),i=(r.tagLogger("MouseTrigger"),{LEFT:1,WHEEL:2,RIGHT:4,WHEEL_ROLL_UP:8,WHEEL_ROLL_DOWN:16,KEY_UP:0,KEY_DOWN:1,MOVE:2,KEYBOARD_DOWN:3,KEYBOARD_UP:4});e.exports=r.prototypeExtend({_timeoutMillis:500,_time:(new Date).getTime(),isKeyup:function(){return i.KEY_UP==this.oper},isKeydown:function(){return i.KEY_DOWN==this.oper},isWheelup:function(){return i.WHEEL_ROLL_UP==this.btn},isWheeldown:function(){return i.WHEEL_ROLL_DOWN==this.btn},isLeftKey:function(){return i.LEFT==this.btn},isRightKey:function(){return i.RIGHT==this.btn},isWheelKey:function(){return i.WHEEL==this.btn},isWheelRoll:function(){return this.isWheeldown()||this.isWheelup()},timeout:function(){var e=(new Date).getTime();return e-this._time>=this._timeoutMillis},_toString:function(){return r.list("btn:",this.btn,", oper:",this.oper,", timeout:",this.timeout(),", at (",this.xy.x,", ",this.xy.y,")").join("")}}),e.exports.BTN=i},function(e,t,n){"use strict";var r=n(144),i=o(r);function o(e){return e&&e.__esModule?e:{default:e}}var s=n(72),a=s.tagLogger("AddonsP2P"),c=n(208),u=function(e){var t=e.extend({postMessage:function(t,n){var r=this,i=t.tsxId;t.tsxId||(i=t.tsxId="MSG"+Date.now()+"-"+emedia.__session_globalCount++),e.prototype.postMessage.call(r,t,n),function(e){var t=r.owner;t.isP2P()&&r._callbacks[e]&&setTimeout((function(){var t=r._callbacks[e];if(t&&1004===t.op){var n=r.newMessage({op:1001,tsxId:t.tsxId,memId:t.memId,result:0,msg:"3000ms not recv response. will success callback. "+t.tsxId});r.onMessage(n)}}),3e3)}(i)},__modifyMessageForPost:function(t){var n=this;t=e.prototype.__modifyMessageForPost.call(n,t);var r=n.owner;if(r.isP2P()){if(102===t.op||105===t.op){var o=n.newMessage({op:1001,tsxId:t.tsxId,memId:t.memId,result:0,streamId:t.rtcId+(r.isCaller()?"__Caller":"__Callee"),sver:1});if(setTimeout((function(){n.onMessage(o)}),100),!t._cached_){var a=s.extend({_cached_:!0},t);s.removeAttribute(a,"tsxId"),102===t.op&&(r.__cache_[t.rtcId]=[]).push(a),105===t.op&&r.__cache_[t.rtcId]&&r.__cache_[t.rtcId].push(a),r.__cache_[t.rtcId]&&(r.__cache_[t.rtcId].selfId=r.getMemberId())}}if(s.removeAttribute(t,"_cached_"),t.memId){var c=n.newMessage({op:1004,sessId:s.removeAttribute(t,"sessId"),memId:s.removeAttribute(t,"memId"),tsxId:s.removeAttribute(t,"tsxId"),arg:(0,i.default)(t)});t=c}switch(t.op){case 205:o=n.newMessage({op:1001,tsxId:t.tsxId,result:0});return void setTimeout((function(){n.onMessage(o)}),50);case 102:case 104:case 105:case 106:case 107:if(-10===t.endReason)return;case 1001:case 400:c=n.newMessage({op:1004,sessId:s.removeAttribute(t,"sessId"),tsxId:s.removeAttribute(t,"tsxId"),arg:(0,i.default)(t)});t=c;break;case 303:case 206:return;default:}}return t},onP2PMessage:function(e){var t=this,n=t.owner;if(t.owner.isConfr())a.warn("Recv p2p ctrl message. when CONFR. ignore");else{var r=JSON.parse(e.arg);if(r.memId=e.memId,r.tsxId=e.tsxId,r.sessId=e.sessId,400===r.op&&(r.streamId=r.rtcId+(t.owner.isCaller()?"__Callee":"__Caller")),1001!==r.op){var i=t.newMessage({op:1001,tsxId:e.tsxId,memId:e.memId,sessId:e.sessId,result:0,msg:"Web sdk success recv"});102!==r.op&&105!==r.op||s.extend(i,{streamId:r.rtcId+(n.isCaller()?"__Callee":"__Caller"),sver:1}),t.postMessage(i)}(function(e){setTimeout((function(){t.onMessage(e)}),10)})(r)}}});return s.extend(t.prototype._events,{1004:"onP2PMessage"}),t},f=function(e){var t=e.extend({__init__:function(){var t=this;e.prototype.__init__.call(t),t.__cache_={};var n=t.iceRebuild;t.iceRebuild=function(e){var t=this;t.isP2P()&&e.rtcId?e._webrtc&&!0===e._webrtc.answerWebrtc?a.warn("Stream not auto iceRebuild. caused by answer webrtc. it = ",e.id,e):e.located()?n.call(t,e):a.warn("Stream not auto iceRebuild. caused by not located. it = ",e.id,e):n.call(t,e)}},onEnter:function(t,n){var r=this;try{e.prototype.onEnter.call(r,t,n)}finally{if(!r.isP2P()||!(n=r._cacheMembers[n.id]))return;s.forEach(r.__cache_,(function(e,t){!0!==t.answered&&s.forEach(t,(function(e,t){(function(e){e.memId=n.id,r.postMessage(e)})(t)}))}))}},rejectAnswer:function(e,t,n,r){var i=this,o=i.newMessage().setOp(107).setRtcId(t).setMemId(e).setEndReason(n);i.postMessage(o,(function(e){if(0!=e.result)return i.onEvent(new c.RspFail({request:o,response:e})),void(r&&r(new c.RspFail({request:o,response:e})))}))},closeWebrtc:function(t,n,r){var i=this,o=!1;if(i.isP2P()){var c=i._ices[t];if(c){var u=c.iceConnectionState();o="failed"===u,o=o&&c._rebuildCount<emedia.config.iceRebuildCount,a.warn("Webrtc state failed. it is ",t,c._rebuildCount,emedia.config.iceRebuildCount,c.__id)}}if(e.prototype.closeWebrtc.call(i,t,n,r||o),i.isP2P()&&!r&&o&&s.forEach(i._cacheStreams,(function(e,n){n.rtcId===t&&(i._linkedStreams[e]=n,a.warn("Reput stream to _linkedStreams",e))})),i.isP2P()&&!n){s.removeAttribute(i.__cache_,t);var f=s.extend({},i._cacheStreams);s.forEach(f,(function(e,n){if(t===n.rtcId){s.removeAttribute(i._linkedStreams,n.id);var r=s.removeAttribute(i._cacheStreams,n.id);if(i._streamAutomators&&s.removeAttribute(i._streamAutomators,n.id),a.warn("P2P close webrtc. remove stream from _cacheStreams. it = ",n.id,n),r._localMediaStream&&i._service._stopTracks(r._localMediaStream),i.onRemoveStream){n=i.newStream(n);i.onRemoveStream(n)}}}))}},subscribeStream:function(t,n,r,i){var o=this;if(o.isP2P()){var s=o._ices[t],u=o._cacheStreams[n],f=u;if(f.updateAttributes({_webrtc:s,rtcId:t}),i=i||{subSVideo:!0,subSAudio:!0},f.updateAttributes({subArgs:f.subArgs||{subSVideo:!0,subSAudio:!0}}),f._webrtc&&f._webrtc.setSubArgs(f._webrtc.subArgs||{subSVideo:!0,subSAudio:!0}),!f.subArgs.subSVideo&&i.subSVideo&&f.voff)throw a.error("Sub not allow. stream voff"),"Sub not allow. stream voff";if(!f.subArgs.subSAudio&&i.subSAudio&&f.aoff)throw a.error("Sub not allow. stream aoff"),"Sub not allow. stream aoff";if(f.subArgs.subSVideo&&!i.subSVideo&&!f.voff&&emedia.isSafari)throw a.error("Sub not allow. safari close sub video. will error"),"Sub not allow. safari close sub video. will error";i&&f._webrtc&&f._webrtc.setSubArgs(i),i&&f.updateAttributes({subArgs:i});var d=new c.SubSuccess({stream:f,hidden:!0});o._updateRemoteStream(f,f._webrtc.getRemoteStream()),o.onEvent(d)}else e.prototype.subscribeStream.call(o,t,n,r,i)},unsubscribeStream:function(t){var n=this;n.isP2P()||e.prototype.unsubscribeStream.call(n,t)},onPub:function(t,n,r){var i=this;if(i.isP2P()){var o=e.prototype.onPub.call(i,t,n,r);return o}e.prototype.onPub.call(i,t,n,r)},onStreams:function(t,n){var r=this;r.isP2P()?a.warn("P2P ingrone the onStreams"):e.prototype.onStreams.call(r,t,n)},_howDoWebrtcWhenCrtExsitsWebrtc:function(t){var n=this;n.isP2P()?n.closeWebrtc(t.getRtcId(),!0,!0):e.prototype._howDoWebrtcWhenCrtExsitsWebrtc.call(n,t)},createWebrtcAndSubscribeStream:function(t,n,r,i){var o=this;if(o.isP2P()){o=this;n||(n={});var u=o._cacheStreams[t],f=o._cacheMembers[u.owner.id],d=u;i=i||d.subArgs||{subSVideo:!0,subSAudio:!0};var l=u.vcodes,p=f.vcodes,h=o.supportVCodes,m=o._getOptimalVideoCodecsSubset(l,p,h);i=i||d.subArgs;var v=d.subArgs,g=!(d.vcodes&&d.vcodes.length>0),y={offerToReceiveAudio:!0,offerToReceiveVideo:i.subSVideo&&g};y.offerToReceiveAudio||y.offerToReceiveVideo||a.warn("offerToReceiveAudio == false and offerToReceiveVideo == false");var b=o.createWebrtc({_rtcId:d.rtcId,iceServerConfig:r,optimalVideoCodecs:m,offerOptions:y,onGotMediaStream:function(e){var t=new c.SubSuccess({stream:d,hidden:!0});n.onGotRemote&&n.onGotRemote(d),o.onEvent&&o.onEvent(t)}},d.iceRebuildCount),_=b.getRtcId();a.warn(_," sub stream ",t,m);var w=d._webrtc;if(d.updateAttributes({_webrtc:b,rtcId:_,owner:s.extend({},f)}),o._ices[_]=b,b.answerWebrtc=!0,i&&d._webrtc&&d._webrtc.setSubArgs(i),i&&d.updateAttributes({subArgs:i}),_==="rtc-"+o.ticket.confrId){o.__lastCalleePub;var S=o._cacheStreams[_+(o.isCaller()?"__Caller":"__Callee")];S=new o._service.AVPubstream(S||{constaints:{audio:!d.aoff,video:!d.voff}});w&&w.getLocalStream()&&o._service._stopTracks(w.getLocalStream()),o._service.openUserMedia(S).then((function(){var e=o.newStream(S);e.updateAttributes({_localMediaStream:S.localStream,_webrtc:b,rtcId:b.getRtcId(),id:_+(o.isCaller()?"__Caller":"__Callee"),owner:{id:o.getMemberId(),nickName:o.nickName,name:o.sysUserId,ext:o.extObj}}),o.onEvent(new c.PushSuccess({stream:e,hidden:!0})),C(S.localStream),o.answerCall(_,S,x)}),x)}else C(),o.answer(_,x)}else e.prototype.createWebrtcAndSubscribeStream.call(o,t,n,r,i);function x(e){a.warn("sub stream error",t,e),v&&d._webrtc&&d._webrtc.setSubArgs(v),v&&d.updateAttributes({subArgs:v}),e=new c.SubFail({stream:d,hidden:!0===e.hidden,cause:e}),n&&n.onEvent&&n.onEvent(e),o.onEvent&&o.onEvent(e)}function C(e){e&&b.setLocalStream(e),b.setRemoteDescription(d.sdp),d.cands&&d.cands.length>0&&b.addIceCandidate(d.cands)}}});return t},d=function(e,t,n){var r=e.extend({Session:t,Attendee:n,__init__:function(){var t=this;e.prototype.__init__.call(t),void 0!==t.useRTCCfg&&!1!==t.useRTCCfg&&null!==t.useRTCCfg||(t.useRTCCfg=emedia.config.forceUseRTCCfgIfServerReturnWhenP2P)},push:function(t,n,r){var i=this;if(i.current&&i.current.isP2P()){if(2===t.type)throw a.error("P2P do not allow audio_mixer"),"P2P do not allow audio_mixer";if(t instanceof i.AVPubstream&&!t.rtcId){var o=i.current._cacheStreams["rtc-"+i.current.ticket.confrId+"__Caller"]||i.current._cacheStreams["rtc-"+i.current.ticket.confrId+"__Callee"];o||(t.rtcId="rtc-"+i.current.ticket.confrId)}}e.prototype.push.call(i,t,n,r)},newSession:function(t,n){var r=this,i=e.prototype.newSession.call(r,t,n),o=i.onTermC,u=i.onAnsC;return s.extend(i,{onInitC:function(e){if(t.isP2P()){if(e.rtcId==="rtc-"+t.ticket.confrId){var n=e.rtcId+(t.isCaller()?"__Callee":"__Caller"),r=t._cacheStreams[n];if(r&&r.owner&&r.owner.id!==e.memId)return t.rejectAnswer(e.memId,e.rtcId,10),void t.postMessage(t.newMessage({op:1001,memId:e.memId,tsxId:e.tsxId,result:-554,msg:"Other device call it. you no."}))}e.pubS.sdp=e.sdp,e.pubS.cands=e.cands,e.pubS.id=e.rtcId+(t.isCaller()?"__Callee":"__Caller"),e.pubS._located=!1,e.pubS.memId=e.memId,e.pubS.rtcId=e.rtcId,e.pubS.sver=0;r=t._cacheStreams[e.pubS.id];r&&(e.pubS.sver=r.sver+1,s.removeAttribute(t._maybeNotExistStreams,e.pubS.id)),t.onPub.call(t,++t._cver,e.memId,e.pubS)}},onTermC:function(e){if(t.isP2P()){if(-20===e.endReason){var n=t._cacheStreams[e.rtcId+"__Caller"];return a.warn("Begin re-publish. 20",n),void(n&&r._republish(n))}if(e.memId&&e.memId!==t.getMemberId()){var i=[];return s.forEach(t._cacheStreams,(function(e,t){i.push(t)})),i=i.sort((function(e,n){var r=-1;return e.id>n.id&&(r=1),t.isCallee()?0-r:r})),void s.forEach(i,(function(n,r){r&&r.owner&&r.owner.id===e.memId&&e.rtcId===r.rtcId&&(-10!==e.endReason&&o.call(t,e),e.rtcId==="rtc-"+t.ticket.confrId&&t.onUnpub(++t._cver,e.memId,r.id),10===e.endReason&&t.onEvent(new c.OtherDeviceAnswer({rtcId:e.rtcId,stream:r}))),r&&r.owner&&r.owner.id===t.getMemberId()&&e.rtcId===r.rtcId&&(t.closeWebrtc(e.rtcId),t.onUnpub(++t._cver,r.owner.id,r.id))}))}-10!==e.endReason&&o.call(t,e),10===e.endReason&&t.onEvent(new c.OtherDeviceAnswer({rtcId:e.rtcId}))}else o.call(t,e)},onAnsC:function(e){if(t.isP2P())if(t.__cache_[e.rtcId]){if(!0===t.__cache_[e.rtcId].answered)return a.warn("Webrtc ",e.rtcId,"had been ansC"),t.rejectAnswer(e.memId,e.rtcId,10),void t.postMessage(t.newMessage({op:1001,memId:e.memId,tsxId:e.tsxId,result:-554,msg:"Other device sub it. you no."}));try{if(e.pubS){var n=t.newStream(e.pubS);n.updateAttributes({_webrtc:t._ices[e.rtcId],rtcId:e.rtcId,id:e.rtcId+(t.isCaller()?"__Callee":"__Caller"),owner:t._cacheMembers[e.memId]}),t._cacheStreams[n.id]?t._cacheStreams[n.id]=n:t.onPub.call(t,++t._cver,e.memId,n),t.onEvent(new c.SubSuccess({stream:n,hidden:!0}))}var r=t._cacheMembers[e.memId];u.call(t,e),s.forEach(t._cacheMembers,(function(n,i){n!==e.memId&&r.memName===i.memName&&t.rejectAnswer(n,e.rtcId,10)}))}finally{t.__cache_[e.rtcId].answered=!0}}else a.warn("Webrtc ",e.rtcId,"not created. drop the answer");else u.call(t,e)}})}});return r};e.exports=function(e){var t=e.prototype.Session||n(207),r=u(t.extend({})),i=e.prototype.Attendee||n(211),o=f(i.extend({}));return d(e,r,o)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.outer=void 0;var r=n(201),i=S(r),o=n(149),s=S(o),a=n(204),c=S(a),u=n(178),f=S(u),d=n(210),l=S(d),p=n(156),h=S(p),m=n(144),v=S(m),g=n(225),y=n(205),b=S(y),_=n(146),w=S(_);function S(e){return e&&e.__esModule?e:{default:e}}var x={};function C(e){if(e&&0!=(0,f.default)(e).length)if(e.key){var t=e.key,n=e.val,r=e.success,i=e.error,o=e.type;if(this.__current_confrId){var s=this._confrs[this.__current_confrId].roleToken;if(s){var a={roleToken:s,cattrs:[{key:t,val:n,op:o}]};$.ajax({type:"POST",url:emedia.config.restPrefix+"/easemob/rtc/confr/attrs/update",data:(0,v.default)(a),contentType:"application/json",success:function(e){r&&"function"==typeof r&&r(e)},error:function(e){i&&"function"==typeof i&&i(e)}})}else console.warn("roleToken is not have")}else console.warn("please set_confr_attrs after joined")}else console.warn("options.key is not have");else console.warn("options is not have")}function E(e,t){var n={type:"POST",url:emedia.config.restPrefix+"/easemob/rtc/confr/attrs/update",data:(0,v.default)({roleToken:e,cstate:{muteAll:t}}),contentType:"application/json"};return new h.default((function(e,t){$.ajax((0,l.default)({},n,{success:function(n){0==n.error?e(n):t(n)},error:function(e){t(e)}}))}))}g.single.onMemberJoin=function(e,t){emedia.decodeMemeberName(e),this.onMemberJoined(e,g.single._confr(t))},g.single.onMemberLeave=function(e,t,n){emedia.decodeMemeberName(e),this.onMemberExited(e,t,g.single._confr(n))},g.single._onRoleUpdated=function(e,t){this.onRoleChanged(e,g.single._confr(t))},g.single._onAddMemberStream=function(e,t){e&&emedia.decodeMemeberName(e.owner),this.onStreamAdded(e.owner,e,g.single._confr(t))},g.single._onRemoveMemberStream=function(e,t){e&&emedia.decodeMemeberName(e.owner),this.onStreamRemoved(e.owner,e,g.single._confr(t))},g.single._onUpdateMemberStream=function(e,t,n){e&&emedia.decodeMemeberName(e.owner),this.onStreamUpdated&&this.onStreamUpdated(e.owner,e,t,g.single._confr(n))},g.single.onExit=function(e,t,n){this.onConferenceExit(e,t,g.single._confr(n))},x.onMemberJoined=function(e){},x.onMemberExited=function(e,t){},x.onRoleChanged=function(e){},x.onStreamAdded=function(e,t){},x.onStreamRemoved=function(e,t){},x.onConferenceExit=function(e,t){},x.joinConferenceWithTicket=g.single.joinUseTicket,x.joinConference=g.single.joinUsePassword,x.getConferenceTkt=g.single.reqTkt,x.publish=function(e,t,n){return g.single.shareVideoWithAudio(e.video,e.audio,t,n)},x.unpublish=function(e){return g.single.hungup(e)},x.unsubscribe=function(e){return g.single.hungup(e)},x.exitConference=function(e){return g.single.exit(e||!1)},x.getConferenceInfo=function(e,t){return g.single.selectConfr(e,t)},x.createConference=g.single.createConfrSptMnPrg,x.grantRole=function(e,t,n){return g.single.chanageRoles(n,t,e.id)},x.degradeRole=function(e,t,n){if(e)if(t&&t instanceof Array!=0&&0!=t.length){if(n){var r=this._confrs[e];if(r){var i=r.role,o=r.roleToken;if(!(Number(n)>=Number(i))){var s={type:"POST",url:emedia.config.restPrefix+"/easemob/rtc/role/degrade",data:(0,v.default)({roleToken:o,uids:t,role:n}),contentType:"application/json"};return new h.default((function(e,t){$.ajax((0,l.default)({},s,{success:function(n){0==n.error?e(n):t(n)},error:function(e){t(e)}}))}))}console.warn("only degradeRole,oldRole: "+i+" >>> toRole: "+n)}else console.warn("confr is not exist")}}else console.warn("members is must Array also length > 0")},x.kickMembersById=function(e,t){return g.single.kickMember(t,e.id)},x.destroyConference=function(e){return g.single.disbandConfr(e,e.roleToken)},x.setConferenceAttrs=function(e){e.type="UPDATE",C.call(this,e)},x.deleteConferenceAttrs=function(e){e.type="DEL",C.call(this,e)},x.onConfrStateUpdated=function(e){var t=this,n=function(){var n=e.muteAll;void 0!==n&&(n?t.onMuteAll&&"function"==typeof t.onMuteAll&&t.onMuteAll():t.onUnMuteAll&&"function"==typeof t.onUnMuteAll&&t.onUnMuteAll())},r=this.__current_confrId;if(r){var i=this._services[r];if(i){var o=i.current;o&&o.role&&o.role!=this.Role.ADMIN&&n()}}},x.joinRoom=function(){var e=(0,c.default)(i.default.mark((function e(t){var n,r,o,a,c,u,f,d,p,m,g,y,b,_,w,S,x,C,E,I;return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=function(e){var t=emedia.config,n=t.restPrefix,r=t.appkey;if(!r)throw new Error("in joinRoom appkey is not defined");var i=r.split("#")[0],o=r.split("#")[1],s=n+"/"+i+"/"+o+"/conferences/room";return new h.default((function(t,n){var r={url:s,data:(0,v.default)(e),type:"POST",contentType:"application/json",success:function(e){e.error?n(e):t(e)},error:function(e){n(e)}};$.ajax(r)}))},r=this,o=function(e){var t=emedia.config.restPrefix+"/easemob/rtc/req/ticket?_ct="+(new Date).getTime();e.region&&(t+="&REGION="+e.region),e.confrId&&(t+="&CONFRID="+e.confrId);var n={type:"POST",url:t,data:(0,v.default)(e),contentType:"application/json",dataType:"json"};return new h.default((function(e,t){$.ajax((0,l.default)({},n,{success:function(n){0==n.error?e(n):t(n)},error:function(e){t(e)}}))}))},a=t.roomName,c=t.password,u=t.role,f=t.config,d=this.identityName,p=this.identityToken,a){e.next=7;break}throw new Error("the roomName is required at joinRoom");case 7:if(c){e.next=9;break}throw new Error("the password is required at joinRoom");case 9:if(d){e.next=11;break}throw new Error("the memName is required at joinRoom");case 11:if(p){e.next=13;break}throw new Error("the token is required at joinRoom");case 13:if(u){e.next=15;break}throw new Error("the role is required at joinRoom");case 15:return m=(0,l.default)({roomName:a,password:c,memName:d,token:p},f),f&&f.supportWechatMiniProgram&&(m.useVCodes=["H264","VP8"]),e.next=19,n(m);case 19:return g=e.sent,y=g.confrId,b={uid:d,token:p,confrId:y,password:c,role:u,terminal:this._terminalInfo},e.next=24,o(b);case 24:return _=e.sent,_.mixed=11===_.type||12===_.type,_.id=_.serverConfrId=_.confrId=y,this._confrs[y]=(0,s.default)(this._confrs[y]||{},_),w=_.ticket,S=f||{},x=S.nickName,C=S.ext,E=g.isCreator,e.next=33,r.joinConferenceWithTicket(y,w,(0,l.default)({nickName:x},C));case 33:return I=e.sent,E&&(I.isCreator=E),e.abrupt("return",I);case 36:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),x.requestToTalker=function(e){if(e){var t=this._services[e];t.requestToTalker()}else console.warn("requestToTalker confrId is required")},x.requestToAdmin=function(e){if(e){var t=this._services[e];t.requestToAdmin()}else console.warn("requestToTalker confrId is required")},x.muteBymemberId=function(e,t){if(e&&t){var n=this._services[e];n.muteBymemberId(t)}else console.warn("muteBymemberId confrId and memberId is required")},x.unmuteBymemberId=function(e,t){if(e&&t){var n=this._services[e];n.unmuteBymemberId(t)}else console.warn("muteBymemberId confrId and memberId is required")},x.muteAll=function(e){if(!e)throw new Error("muteAll confrId is required");var t=this._confrs[e];if(!t)throw new Error("confr is not exist");var n=t.role,r=t.roleToken;if(7!=n)throw new Error("only admin can action");if(!r)throw new Error("roleToken is not exist");var i=!0;return E.call(this,r,i)},x.unmuteAll=function(e){if(!e)throw new Error("unmuteAll confrId is required");var t=this._confrs[e];if(!t)throw new Error("confr is not exist");var n=t.role,r=t.roleToken;if(7!=n)throw new Error("only admin can action");if(!r)throw new Error("roleToken is not exist");var i=!1;return E.call(this,r,i)},x.addLive=function(e,t){if(!e)throw new Error("addLive confrId is required");if(!t)throw new Error("addLive liveCfg is required");var n=this._confrs[e];if(!n)throw new Error("confr is not exist");var r=n.role,i=n.roleToken;if(7!=r)throw new Error("only admin can addLive");if(!i)throw new Error("addLive roleToken is required");var o=emedia.config.restPrefix+"/easemob/rtc/livecfg",s={confrId:e,roleToken:i,liveCfg:t};return new h.default((function(e,t){$.ajax({url:o,type:"POST",data:(0,v.default)(s),contentType:"application/json",dataType:"json",success:function(n){0==n.error?e(n):t(n)},error:function(e){t(e)}})}))},x.updateLiveLayout=function(e,t,n){if(!e)throw new Error("updateLiveLayout confrId is required");if(!t)throw new Error("updateLiveLayout liveId is required");if(!n)throw new Error("updateLiveLayout regions is required");var r=this._confrs[e];if(!r)throw new Error("confr is not exist");var i=r.role,o=r.roleToken;if(7!=i)throw new Error("only admin can updateLiveLayout");if(!o)throw new Error("updateLiveLayout roleToken is required");var s=emedia.config.restPrefix+"/easemob/rtc/live/layout",a={confrId:e,liveId:t,regions:n,roleToken:o};return new h.default((function(e,t){$.ajax({url:s,type:"POST",data:(0,v.default)(a),contentType:"application/json",dataType:"json",success:function(n){0==n.error?e(n):t(n)},error:function(e){t(e)}})}))},x.deleteLive=function(e,t){if(!e)throw new Error("deleteLive confrId is required");if(!t)throw new Error("deleteLive liveId is required");var n=this._confrs[e];if(!n)throw new Error("confr is not exist");var r=n.role,i=n.roleToken;if(7==r){if(i){var o=emedia.config.restPrefix+"/easemob/rtc/delete/live",s={confrId:e,liveId:t,roleToken:i};return new h.default((function(e,t){$.ajax({url:o,type:"DELETE",data:(0,v.default)(s),contentType:"application/json",dataType:"json",success:function(n){0==n.error?e(n):t(n)},error:function(e){t(e)}})}))}console.error("updateLiveLayout roleToken is required")}else console.warn("only admin can deleteLive")},emedia.decodeMemeberName=function(e){if("function"!==typeof emedia.decodeMemeberNameString)return e;if("string"===typeof e)return emedia.decodeMemeberNameString(e);if(b.default.isArray(e)){for(var t=0;t<e.length;t++)e[t]=emedia.decodeMemeberName(e[t]);return e}return e.name?(e.globalName=e.name,void(e.memName=e.name=emedia.decodeMemeberName(e.name))):e.memName?(e.globalName=e.memName,void(e.memName=e.name=emedia.decodeMemeberName(e.memName))):void 0},emedia.ConfrType=g.single.ConfrType,emedia.Role=g.single.Role,emedia.StreamType=g.single.StreamType,(0,w.default)((function(){var e=window.WebIM;if(e&&e.conn&&"function"===typeof e.conn.onOpened){var t=function(){emedia.decodeMemeberNameString=function(t){if("string"===typeof t){if(t.indexOf(e.conn.orgName)<0)return t;var n=t.indexOf("_");n<0?n=0:n++;var r=t.indexOf("@");return r<0&&(r=t.length),t.substring(n,r)}return t},g.single.setUrlCreator((function(t,n){return e.conn.apiUrl+t})),g.single.setIdentity(e.conn.orgName+"#"+e.conn.appName+"_"+e.conn.user,e.conn.token),emedia.config({appkey:e.conn.appKey})},n=e.conn.onOpened;e.conn.onOpened=function(){n.apply(e.conn,arguments),t()},e.conn.token&&t()}}));t.outer=b.default.extend(g.single,x)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.single=void 0;var r=n(201),i=I(r),o=n(204),s=I(o),a=n(210),c=I(a),u=n(73),f=I(u),d=n(144),l=I(d),p=n(156),h=(I(p),n(72)),m=I(h),v=n(146),g=I(v),y=n(205),b=I(y),_=n(226),w=I(_),S=n(229),x=n(331),C=n(215),E=I(C);function I(e){return e&&e.__esModule?e:{default:e}}var T=m.default.tagLogger("mgr");window.emedia=window.emedia||{};var O={createConfr:"/easemob/rtc/req/ticket",reqTkt:"/easemob/rtc/req/ticket",chanageRoles:"/easemob/rtc/chanage/roles",disbandConfr:"/easemob/rtc/disband/conference",kickMember:"/easemob/rtc/kick/member",selectConfr:"/easemob/rtc/select/confr"};function R(){this._confrs={},this._services={},this._events={},this._videos={}}R.prototype.ConfrType={COMMUNICATION:10,COMMUNICATION_MIX:11,LIVE:12,P2P:13,INTERCOMM:14},R.prototype.Role={ADMIN:7,TALKER:3,AUDIENCE:1},R.prototype.StreamType={VIDEO:0,DESKTOP:1,MIXVIDEO:2};var k=function(e,t){return function(n){g.default.ajax({type:"POST",url:e,data:(0,l.default)(t),contentType:"application/json",dataType:"json",success:function(r,i,o){T.debug("REST: ",r," -> ",t,e),0===r.error?(m.default.removeAttribute(r,"error"),n.next(r),n.complete()):(m.default.extend(r,{errorType:"server_refuse"}),n.error(r))},error:function(r,i,o){var s={errorType:"http_error",error:r.status,errorMessage:o};T.debug("REST: ",s," -> ",t,e),n.error({errorType:"http_error",error:r.status,errorMessage:o})}})}};(function(e){m.default.forEach(e,(function(e,t){R.prototype[e]=function(n){var r=t;r=r+"?_ct="+(new Date).getTime(),n.region&&(r=r+"&REGION="+n.region),n.confrId&&(r=r+"&CONFRID="+n.confrId);var i=this.createUrl(r,e);return k(i,n)}}))})(O),R.prototype.createUrl=function(e,t){var n=emedia.config&&emedia.config.restPrefix||"";return n+e},R.prototype.setUrlCreator=function(e){this.createUrl=e.bind(this)},R.prototype.destroy=function(){},R.prototype.ZeroStream=E.default.extend({__init__:function(){var e=this;e.type=2,e.id="0",e._located=!1,e.mutedMuted=!1},onGotRemoteMediaStream:function(e){var t=this;if(!t.remotePlayAudioObject){t.id;var n=document.createElement("audio");n.style.display="none",n.id="__o_remote_play_audio_"+t.id,n.autoplay=!0,n.playsinline=!0,t.remotePlayAudioObject=n,document.body.appendChild(n)}t.remotePlayAudioObject.srcObject=e}}),R.prototype.setIdentity=function(e,t,n){this.identityName=e,this.identityToken=t,this.ext=n,this._terminalInfo={browser:emedia.browser,browserVersion:emedia.browserVersion,version:window._emediaVersion||emedia.config.version,userAgent:emedia.config.userAgent},T.info("set identity: ",e,t),this.destroy(),emedia.config({autoSub:!1,onlyEnter:!0})},R.prototype.EventsObservable=n(429).default;var M=(0,x.catchError)((function(e,t){throw T.error(e),e}));function A(e,t,n,r){var i=this,o=void 0,s=void 0;if(arguments.length>=0&&"object"===(0,f.default)(arguments[0])){var a=arguments[0];o=a.region,e=a.confrType,t=a.password,n=a.rec,r=a.recMerge,s=a.liveCfg}return"string"===typeof e&&(e=parseInt(e)),S.Observable.create(R.prototype.createConfr.call(i,{region:o,uid:i.identityName,token:i.identityToken,confrType:e,password:t,terminal:i._terminalInfo,rec:n,recMerge:r,liveCfg:s})).pipe((0,x.map)((function(e){return e.mixed=11===e.type||12===e.type,e.id=e.serverConfrId=e.confrId,i._confrs[e.confrId]=b.default.extend({},e),m.default.removeAttribute(e,"rtcCfg"),e})),M)}function P(e,t,n,r,i){var o=this,s={};if(arguments.length>=0&&"object"===(0,f.default)(arguments[0])){var a=arguments[0];s=(0,c.default)({uid:o.identityName,token:o.identityToken,terminal:o._terminalInfo},a)}else s={uid:o.identityName,token:o.identityToken,terminal:o._terminalInfo,confrType:e,password:t,rec:n,recMerge:r,supportWechatMiniProgram:i};return s.confrType&&(s.confrType=parseInt(s.confrType)),i&&(s.useVCodes=["VP8","H264"]),S.Observable.create(R.prototype.createConfr.call(o,s)).pipe((0,x.map)((function(e){return e.mixed=11===e.type||12===e.type,e.id=e.serverConfrId=e.confrId,o._confrs[e.confrId]=b.default.extend({},e),m.default.removeAttribute(e,"rtcCfg"),e})),M)}function j(e,t){var n,r=this;if(arguments.length>=0&&"object"===(0,f.default)(arguments[0])){var i=arguments[0];e=i.confrId,t=i.password,n=i.role}var o=r._confr(e),s={uid:r.identityName,token:r.identityToken,confrId:o&&o.id||e,password:t,role:n,terminal:r._terminalInfo};return r._confrs[e]&&(s.roleToken=r._confrs[e].roleToken),S.Observable.create(R.prototype.reqTkt.call(r,s)).pipe((0,x.map)((function(t){return t.mixed=11===t.type||12===t.type,t.id=t.serverConfrId=t.confrId=e,r._confrs[e]=m.default.extend(r._confrs[e]||{},t),m.default.removeAttribute(t,"rtcCfg"),t})),M)}function N(e,t,n){var r=this,i=r._confr(n),o=r._service(n),s={confrId:i&&i.id||n,uids:t,role:e,roleToken:i.roleToken};return S.Observable.create(R.prototype.chanageRoles.call(r,s)).pipe((0,x.map)((function(e){return o&&o.current&&o.current._sysCopy(),i.id})),M)}function L(e,t){var n=this,r=n._confr(e),i={confrId:r&&r.id||e,roleToken:r&&r.roleToken||t};return S.Observable.create(R.prototype.disbandConfr.call(n,i)).pipe((0,x.map)((function(t){return n.upload_stats&&setTimeout((function(){return n.upload_stats.stop()}),3e3),m.default.removeAttribute(n._confrs,e),r.id})),M)}function D(e,t){var n=this,r=n._confr(t),i={confrId:r&&r.id||t,uids:e,roleToken:r.roleToken};return S.Observable.create(R.prototype.kickMember.call(n,i)).pipe((0,x.map)((function(e){return r.id})),M)}function B(e,t){var n=this,r=n._confr(e),i={uid:n.identityName,token:n.identityToken,confrId:r&&r.id||e,password:t};return r&&(i.password=t||r.password,i.roleToken=r.roleToken),S.Observable.create(R.prototype.selectConfr.call(n,i)).pipe(M)}function U(e,t){}function F(e,t){var n=this,r=n._confr(e),i=n._service(e);switch(r.type){case 0:case 10:break;case 11:break;case 12:var o=new n.ZeroStream;if(i.current._cacheStreams[o.id]=o,i.current.role==de.Role.AUDIENCE)return re.call(n,e,o,!1,!0).pipe((0,x.concatMap)((function(){return(0,S.of)(m.default.extend({},n._confrs[e]))})));break;case 13:case 14:return(0,S.throwError)("not support conf type: "+r.type);default:return(0,S.throwError)("not support conf type: "+r.type)}return(0,S.of)(m.default.extend({},n._confrs[e]))}function V(e,t,n){var r=this;return emedia.ctrl.support(n,(function(t,n,i){r.onHasRemoteControl(t,n,i,e)}),(function(t,n,i){r.onRemoteFreeControl(t,n,i,e)})),T.info("support remote control. ",e,t),(0,S.of)(m.default.extend({},r._confrs[e]))}function W(e,t,n){var r=this;if(r.joined(e))return(0,S.throwError)("had joined confr "+e+", if you want join again, please call exitConference");var i=r._events[e]=new r.EventsObservable(r,e,(function(t){U.call(r,e,t)}));r.confrEventsObserver&&i.subscribe(r.confrEventsObserver);var o=r._service(e);return o=r._services[e]=new emedia.XService({listeners:i,nickName:n&&n.nickName}),o.setup(t,n),S.Observable.create((function(t){if(emedia.config.uploadStats){r.upload_stats=new w.default(emedia);try{r.upload_stats.connect_ws()}catch(n){console.error("upload_stats.connect_ws error",n)}}o.join((function(n){if(r.upload_stats){var i=o.current._session._sessionId;r.upload_stats.join_success(i)}r.__current_confrId=e,r._confrs[e].joinId=n,r._confrs[e].role=o.current&&o.current.role,t.next(r._confrs[e]),t.complete()}),(function(e){r.upload_stats&&r.upload_stats.join_fail(),o.exit(),t.error({errorType:"join_fail",error:-200,errorMessage:e.message()})}))})).pipe((0,x.concatMap)((function(t,n){return V.call(r,e,t,o)})),(0,x.concatMap)((function(t,n){return F.call(r,e,t)})),M)}function q(e,t,n){var r=this;return j.call(r,e,t,n).pipe((0,x.concatMap)((function(t,i){return W.call(r,e,t.ticket,n)})))}function $(e,t,n){var r=this;return B.call(r,e,t,n).pipe((0,x.concatMap)((function(i,o){return q.call(r,e,t,n)})))}function G(e,t){var n=this,r=n._service(e);return S.Observable.create((function(e){r.openUserMedia(t).then((function(){e.next(t),e.complete()}),(function(t){e.error({errorType:"open_user_media_fail",error:-201,errorMessage:t.message()})}))})).pipe(M)}function z(e,t){var n=this,r=n._service(e);return S.Observable.create((function(e){r.push(t,(function(t){e.next(t),e.complete()}),(function(t){e.error({errorType:"push_fail",error:-203,errorMessage:t.message()})}))})).pipe(M)}function H(e,t,n){var r=this,i=(r._confr(n),r._service(n));return e="string"===typeof e?i.getStreamById(e):i.getStreamById(e.id),e?t?b.default.isEqual(t,e.constaints.video)?J.call(r,n,e,0):Y.call(r,n,e,t):J.call(r,n,e,1):(0,S.throwError)("pub stream not exsits. it is "+e)}function K(e,t){if(this.upload_stats&&e&&t){var n=this._services[this.__current_confrId].current;if(n){var r={event:e,rtcId:t.rtcId,sId:t.id,sessionId:n._session._sessionId,streamType:t.type,voff:t.voff,aoff:t.aoff};this.upload_stats.upload_event(r)}}}function J(e,t,n){var r=this,i=r._service(e);return S.Observable.create((function(e){i.voff(t,n,(function(t){e.error({errorType:"voff_fail",error:-203,errorMessage:t.message()})}),(function(){var o=i.getStreamById(t.id);e.next(o),e.complete();var s=1==n?8:6;K.bind(r)(s,o)}))})).pipe(M)}function Y(e,t,n){var r=this,i=r._service(e);return S.Observable.create((function(e){var r={};b.default.isObject(t.constaints)&&(r=m.default.extend(!0,{},t.constaints)),r.video=n,i.chanageConstraints(t,r,(function(t){e.error({errorType:"ChanageVideoConstraints_fail",error:-203,errorMessage:t.message()})}),(function(){e.next(i.getStreamById(t.id)),e.complete()}))})).pipe(M)}function X(e,t,n){var r=this,i=r._confr(n),o=r._service(n);return e="string"===typeof e?o.getStreamById(e):o.getStreamById(e.id),e?i.type!==r.ConfrType.COMMUNICATION_MIX&&i.type!==r.ConfrType.LIVE||1!==e.type||t?Z.call(r,n,e,t):(T.warn("confr mix. not allow desktop with audio."),(0,S.throwError)("confr mix. not allow desktop with audio.")):(0,S.throwError)("pub stream not exsits. it is "+e)}function Z(e,t,n){var r=this,i=r._service(e);return S.Observable.create((function(e){i.aoff(t,n,(function(t){e.error({errorType:"aoff_fail",error:-203,errorMessage:t.message()})}),(function(){var o=i.getStreamById(t.id);e.next(o),e.complete();var s=1==n?7:5;K.bind(r)(s,o)}))})).pipe(M)}function Q(e,t,n,r){var i=this,o=i._confr(e),s=i._service(e);if(s.current.role==i.Role.AUDIENCE)return(0,S.throwError)("Audience not allow publish");if(o.av)return(0,S.throwError)("Audio and video stream has been published. not allow repeat publish.");var a=o.mixed?s.AudioMixerPubstream:s.AVPubstream,c=o.av=new a({constaints:t,aoff:0,voff:0,ext:r});return G.call(i,o.id,c).pipe((0,x.concatMap)((function(e){return n&&m.default.targetDOM(n)&&attachMediaStream(n,e.localStream),z.call(i,o.id,e,r)})),(0,x.map)((function(e){return o.av=e,n&&i.streamBindVideo(o.av,n),o.type==i.ConfrType.LIVE&&i.hungup(0),m.default.extend({},e)})),(0,x.catchError)((function(e,t){throw o.av&&i.hungup(o.av),o.av=void 0,T.error(e),e})))}function ee(e){var t=this,n=t._confr(e),r=t._service(e);return r.current.role==t.Role.AUDIENCE?(0,S.throwError)("Audience not allow publish"):S.Observable.create((function(e){r.switchMobileCamera(n.av,(function(t){e.error({errorType:"switch_camera_fail",error:-203,errorMessage:t.message()})}),(function(){e.complete()}))})).pipe(M)}function te(e){var t=this,n=t._confr(e),r=t._service(e);return r.current.role==t.Role.AUDIENCE?(0,S.throwError)("Audience not allow publish"):S.Observable.create((function(e){r.chanageCamera(n.av,(function(t){e.error({errorType:"switch_camera_fail",error:-203,errorMessage:t.message()})}),(function(){e.complete()}))})).pipe(M)}function ne(e){var t=e.confrId,n=e.constaints,r=e.videoTag,i=e.ext,o=e.stopSharedCallback,s=this,a=s._confr(t),c=s._service(t);if(c.current.role==s.Role.AUDIENCE)return(0,S.throwError)("Audience not allow publish");if(a.desktop)return(0,S.throwError)("desktop stream has been published. not allow repeat publish.");if((a.type===s.ConfrType.COMMUNICATION_MIX||a.type===s.ConfrType.LIVE)&&n.audio)return T.warn("confr mix. not allow desktop with audio."),(0,S.throwError)("confr mix. not allow desktop with audio.");n.audio||!a.av||a.av.aoff||T.warn("repeat audio. desktop and av");var u=a.desktop=new c.ShareDesktopPubstream({screenOptions:n.video&&n.video.screenOptions||["screen","window","tab"],mandatory:n.video&&n.video.mandatory||{},vbitrate:n.video&&n.video.bitrate,abitrate:n.audio&&n.audio.bitrate,aoff:n.audio?0:1,ext:i,onMediaInactive:function(){"function"==typeof o&&o()}});return G.call(s,a.id,u).pipe((0,x.concatMap)((function(e){return r&&m.default.targetDOM(r)&&attachMediaStream(r,e.localStream),z.call(s,a.id,e,i)})),(0,x.map)((function(e){return a.desktop=e,r&&m.default.targetDOM(r)&&s.streamBindVideo(a.desktop,r),m.default.extend({},e)})),(0,x.catchError)((function(e,t){throw a.desktop=void 0,T.error(e),e})))}function re(e,t,n,r,i){var o=this,s="string"===typeof t?t:t.id,a=o._confr(e),c=o._service(e);return 2===t.type&&1==r&&0!=t.id&&(r=!1,T.warn("Mixed audio stream. not allow repeat sub audio. force reset subSAudio = false")),i&&m.default.targetDOM(i)&&o.streamBindVideo(s,i),S.Observable.create((function(e){c.subscribe(s,(function(t){try{if("0"!=s){var n=c.getStreamById(s),r={video:n.subArgs?n.subArgs.subSVideo:!n.voff,audio:n.subArgs?n.subArgs.subSAudio:!n.aoff};2===n.type&&(r.audio=!0),o._onMemberMediaChanaged(n.owner,n,r,a.confrId)}}finally{e.next(t),e.complete()}}),(function(t){e.error({errorType:"sub_fail",error:-203,errorMessage:t.message()})}),{subSVideo:n,subSAudio:r})})).pipe(M)}function ie(e,t,n){var r=this,i=r._service(n);e=i.current._cacheStreams["string"===typeof e?e:e.id];var o=t||r.crtAndReturnVideo(e.owner,e);if(o){r._videos[e.id]=o,o.setAttribute("autoplay","autoplay"),o.setAttribute("playsinline","playsinline"),o.setAttribute("hx_stream",e.id),e.aoff?o.setAttribute("aoff","aoff"):o.removeAttribute("aoff"),e.voff?o.setAttribute("voff","voff"):o.removeAttribute("voff"),e.ifMediaStream((function(e){o&&attachMediaStream(o,e),o.hasAttribute("flow")&&r.onMediaTransmission(o,(function(e,t,n,r){(0,g.default)(o).trigger("onMediaTransmission",[e,t,n,r])}))}));var s=(0,g.default)(o);s.off("hungup"),s.on("hungup",(function(t,i,o){r.hungup(e,n),o&&o()})),s.off("subscribe"),s.on("subscribe",(function(t,i,o,s,a){e.located()?s&&s("local stream not allow sub"):(i=e.subArgs&&e.subArgs.subSVideo||!0,o=e.subArgs&&e.subArgs.subSAudio||!0,r.subscribe(e.owner,e,i,o,n).then(a).catch(s))})),s.off("pauseVideo"),s.on("pauseVideo",(function(t,o,a){e=i.current._cacheStreams["string"===typeof e?e:e.id],e.located()?(s[0].__constaints_video=e.constaints&&e.constaints.video,r.pauseVideo(e,n).then(a).catch(o)):r.subscribe(e.owner,e,!1,e.subArgs&&e.subArgs.subSAudio||!e.aoff,n).then(a).catch(o)})),s.off("resumeVideo"),s.on("resumeVideo",(function(t,o,a,c){e=i.current._cacheStreams["string"===typeof e?e:e.id],e.located()?(void 0===c&&(c=s[0].__constaints_video,void 0!==c&&null!=c||(c=!0)),s[0].__constaints_video=void 0,r.resumeVideo(e,c,n).then(a).catch(o)):r.subscribe(e.owner,e,!0,e.subArgs&&e.subArgs.subSVideo||!e.voff,n).then(a).catch(o)})),s.off("pauseAudio"),s.on("pauseAudio",(function(t,i,o){e.located()?r.pauseAudio(e,n).then(o).catch(i):r.subscribe(e.owner,e,e.subArgs.subSVideo,!1,n).then(o).catch(i)})),s.off("resumeAudio"),s.on("resumeAudio",(function(t,i,o){e.located()?r.resumeAudio(e,n).then(o).catch(i):r.subscribe(e.owner,e,e.subArgs.subSVideo,!0,n).then(o).catch(i)})),s.off("remoteControl"),s.on("remoteControl",(function(t,i,s,a,c,u,f,d){if(e.located())throw T.error("not allow remote control at local"),"not allow remote control at local";r.remoteControl(e,o,o,i,s,a,c,u,f,d,n)})),s.off("chanageCamera"),s.on("chanageCamera",(function(e,t,i){r.chanageCamera(n).then(i).catch(t)})),s.off("captureVideo"),s.on("captureVideo",(function(e,t,i,s){var a=r.captureVideo(o,i,s,n);t&&t(a)})),s.off("capturePictureRemote"),s.on("capturePictureRemote",(function(t,i,o){r.capturePictureRemote(e,!1,n).then(o).catch(i)})),s.off("freezeFrameRemote"),s.on("freezeFrameRemote",(function(t,i,o){r.freezeFrameRemote(e,n).then(o).catch(i)})),s.off("zoomRemote"),s.on("zoomRemote",(function(t,i,o,s){r.zoomRemote(e,i,n).then(s).catch(o)})),s.off("torchRemote"),s.on("torchRemote",(function(t,i,o,s){r.torchRemote(e,i,n).then(s).catch(o)})),s.off("freeRemoteControl"),s.on("freeRemoteControl",(function(t,i,o){try{r.freeRemoteControl(e,n)}finally{o&&o()}}));var a={video:!e.voff,audio:!e.aoff,voff:e.voff,aoff:e.aoff};e.located()||(a={video:e.subArgs?e.subArgs.subSVideo:!e.voff,audio:e.subArgs?e.subArgs.subSAudio:!e.aoff,voff:e.voff,aoff:e.aoff}),s.trigger("onMediaChanaged",[a,e,e.owner,n]),o.getAttribute("sound")&&(i.current._monitSoundChanagedStreams=i.current._monitSoundChanagedStreams||{},i.current._monitSoundChanagedStreams[e.id]=e.id)}}function oe(e,t,n,r){var i=this;"string"!==typeof t&&(t=t.id);i._confr(e);var o=i._service(e);return S.Observable.create((function(e){o.focusExpoRemote(t,n,r,(function(t){e.error({errorType:"focusexpo_remote_fail",error:-203,errorMessage:t.message()})}),(function(){e.complete()}))})).pipe(M)}function se(e,t,n){var r=this;"string"!==typeof t&&(t=t.id);r._confr(e);var i=r._service(e);return S.Observable.create((function(e){i.capturePictureRemote(t,n,(function(t){e.next(t),e.complete()}),(function(t){e.error({errorType:"capture_remote_fail",error:-203,errorMessage:t.message()})}))})).pipe(M)}function ae(e,t,n){var r=this;"string"!==typeof t&&(t=t.id);r._confr(e);var i=r._service(e);return S.Observable.create((function(e){i.zoomRemote(t,n,(function(t){e.error({errorType:"capture_remote_fail",error:-203,errorMessage:t.message()})}),(function(){e.complete()}))})).pipe(M)}function ce(e,t,n){var r=this;"string"!==typeof t&&(t=t.id);r._confr(e);var i=r._service(e);return S.Observable.create((function(e){i.torchRemote(t,n,(function(t){e.next(t),e.complete()}),(function(t){e.error({errorType:"torch_remote_fail",error:-203,errorMessage:t.message()})}))})).pipe(M)}function ue(e,t){var n=this;"string"!==typeof t&&(t=t.id);n._confr(e);var r=n._service(e);return S.Observable.create((function(e){r.freezeFrameRemote(t,(function(t){e.next(t),e.complete()}),(function(t){e.error({errorType:"freeze_remote_fail",error:-203,errorMessage:t.message()})}))})).pipe(M)}var fe=m.default.extend(new R,{_confr:function(e){var t=this;return e||(e=t.__current_confrId),t._confrs[e]},_service:function(e){var t=this;return e||(e=t.__current_confrId),this._services[e]},getStreamById:function(e,t){var n=this,r=n._service(t);return r&&r.getStreamById(e)},getMemberById:function(e,t){var n=this,r=n._service(t);return r&&r.getMemberById(e)},streamBindVideo:function(e,t,n){ie.call(this,e,t,n)},getBindVideoBy:function(e){var t=this;if("string"!==typeof e&&e&&e.id&&(e=e.id),"string"!==typeof e)throw T.error("Bad stream ",e),"Bad stream "+e;return t._videos[e]},createConfr:function(e,t,n,r){return A.apply(this,arguments).toPromise()},createConfrSptMnPrg:function(e,t,n,r){return P.apply(this,arguments).toPromise()},reqTkt:function(e,t){return j.apply(this,arguments).toPromise()},chanageRoles:function(e,t,n){return N.apply(this,arguments).toPromise()},disbandConfr:function(e,t){return L.apply(this,arguments).toPromise()},kickMember:function(e,t){return D.apply(this,arguments).toPromise()},selectConfr:function(e,t){return B.apply(this,arguments).toPromise()},joinUsePassword:function(e,t,n){return $.call(this,e,t,n).toPromise()},joinUseTicket:function(e,t,n){return W.call(this,e,t,n).toPromise()},joined:function(e){return e&&this._confrs[e]&&this._confrs[e].joinId},shareDesktopWithAudio:function(e){if(navigator.mediaDevices.getDisplayMedia&&!emedia.isElectron)return this.shareDesktopWithAudioNew(e);var t=e.videoConstaints,n=e.withAudio,r=e.videoTag,i=e.ext,o=e.confrId,s=e.sharedCallback,a=e.stopSharedCallback,c=this;m.default.targetDOM(r)||(o=i,i=r,r=void 0);var u={video:t,audio:n},f={confrId:o,constaints:u,videoTag:r,ext:i,sharedCallback:s,stopSharedCallback:a};return ne.call(c,f).toPromise()},shareDesktopWithAudioNew:function(){var e=(0,s.default)(i.default.mark((function e(t){var n,r,o,s,a,c,u;return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.confrId,r=t.withAudio,o=t.ext,n){e.next=3;break}throw new Error("shareDesktop confrId is required");case 3:return s={video:!0,audio:r},e.next=6,navigator.mediaDevices.getDisplayMedia(s);case 6:return a=e.sent,a._located=!0,c={localStream:a,type:1,aoff:r?0:1,voff:0,constaints:s,_located:!0},e.next=11,z.call(this,n,c,o).toPromise();case 11:return u=e.sent,e.abrupt("return",u);case 13:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),changeCamera:function(e){return te.call(this,e).toPromise()},switchMobileCamera:function(e){return ee.call(this,e).toPromise()},shareVideoWithAudio:function(e,t,n,r,i){var o=this;m.default.targetDOM(n)||(i=r,r=n,n=void 0);var s={video:e,audio:t};return Q.call(o,i,s,n,r).toPromise()},captureVideo:function(e,t,n,r){var i=this,o=i._service(r);return o.captureVideo(e,t,n)},openUserMedia:function(e,t){var n=this,r=n._service(t);return S.Observable.create((function(t){r.__getUserMedia(e,(function(e,n){t.next(n),t.complete()}),(function(e){t.error(e)}))})).pipe(M).toPromise()},mediaDevices:function(e){return"function"===typeof e&&(e=void 0),S.Observable.create((function(t){navigator.mediaDevices.enumerateDevices().then((function(n){for(var r=[],i=0;i!==n.length;++i){var o=n[i];o.deviceId;e||r.push(o),e&&e===o.kind?r.push(o):"audioinput"===o.kind||"audiooutput"===o.kind||"videoinput"===o.kind||T.info("Some other kind of source/device: ",o)}t.next(r),t.complete()})).catch((function(e){T.warn("navigator.getUserMedia error: ",e),t.error(e)}))})).pipe(M).toPromise()},resumeVideo:function(e,t,n){return H.call(this,e,t||!0,n).toPromise()},pauseVideo:function(e,t){return H.call(this,e,!1,t).toPromise()},resumeAudio:function(e,t){return X.call(this,e,!1,t).toPromise()},pauseAudio:function(e,t){return X.call(this,e,!0,t).toPromise()},freezeFrameRemote:function(e,t){return ue.call(this,t,e).toPromise()},torchRemote:function(e,t,n){return ce.call(this,n,e,t).toPromise()},zoomRemote:function(e,t,n){return ae.call(this,n,e,t).toPromise()},capturePictureRemote:function(e,t){return se.call(this,t,e,!1).toPromise()},focusExpoRemote:function(e,t,n,r){return oe.call(this,r,e,t,n).toPromise()},onFocusExpoRemoteWhenClickVideo:function(e,t,n,r){var i=this;return"function"===typeof t&&(r=n,n=t,t=void 0),(0,g.default)(e).off(t||"click"),(0,g.default)(e).on(t||"click",(function(t){var o=e.getAttribute("hx_stream");i.focusExpoRemote(o,e,t).then(r).catch(n)})),t},offEventAtTag:function(e,t){t&&(0,g.default)(e).off(t)},hungup:function(e,t){var n,r=this;n="string"===typeof e?e:e.id||e+"";var i=r._service(t),o=r._confr(t);if(o&&i){i.hungup(n);var s=!1;if(o.av&&(s=o.av.id===n)&&(o.av=void 0),o.desktop&&o.desktop.id===n&&(o.desktop=void 0),s&&o.type==r.ConfrType.LIVE&&i.current.role==de.Role.AUDIENCE){var a=i.current&&i.current._cacheStreams["0"];r.subscribe(i.current,a,!1,!0,t)}}else T.warn("when hungup stream. not found confr and service.",e)},subscribe:function(e,t,n,r,i,o){var s=this;return m.default.targetDOM(i)||(o=i,i=void 0),re.call(s,o,t,n,r,i).toPromise()},exit:function(e,t){var n=this,r=n._service(t);r?(r.exit(e),n.upload_stats&&setTimeout((function(){return n.upload_stats.stop()}),3e3)):T.warn("when exit. not found service.",t)},_onExit:function(e,t,n){var r=this;try{r.__current_confrId=void 0,r.onExit(t,n,e)}finally{m.default.removeAttribute(r._confrs,e),m.default.removeAttribute(r._services,e),m.default.removeAttribute(r._videos,e),m.default.removeAttribute(r._events,e)}},onExit:function(e,t,n){},_onRoleUpdated:function(e,t){},onMemberJoin:function(e,t){},onMemberLeave:function(e,t,n){},_onRecvRemoteMessage:function(e,t,n){},crtAndReturnVideo:function(e,t,n){},unloadVideo:function(e,t,n,r){},remoteControl:function(e,t,n,r,i,o,s,a,c,u,f){var d=this,l=d._service(f);r=!!r;var p="string"===typeof e?e:e.id;r?emedia.ctrl.mirrorControlled(l,p,t,n,i,o,s,a,c,u):emedia.ctrl.controlled(l,p,t,n,i,o,s,a,c,u)},freeRemoteControl:function(e,t){var n=this,r=n._service(t),i="string"===typeof e?e:e.id;emedia.ctrl.disControlled(r,i)},zeptoTrigger:function(e,t){var n=[];return Array.prototype.push.apply(n,Array.prototype.slice.call(arguments,2)),S.Observable.create((function(r){var i=[function(){r.error.apply(r,arguments)},function(){r.next.apply(r,arguments),r.complete()}];Array.prototype.push.apply(i,n),(0,g.default)(e).trigger(t,i)})).pipe(M).toPromise()},_onAddMemberStream:function(e,t){},_onRemoveMemberStream:function(e,t){},_onUpdateMemberStream:function(e,t,n){},_onMemberMediaChanaged:function(e,t,n,r){var i=this._videos[t.id];n&&(n.voff=t.voff,n.aoff=t.aoff),i&&(0,g.default)(i).trigger("onMediaChanaged",[n,t,e,r])},onMediaChanaged:function(e,t){this.addVideoEventListener(e,"onMediaChanaged",t)},_onMemberSoundChanaged:function(e,t,n,r){var i=this._videos[t.id];i&&(0,g.default)(i).trigger("onSoundChanaged",[n,t,e,r])},onSoundChanaged:function(e,t){if(!emedia.config.getMediaMeterIntervalMillis||emedia.config.getMediaMeterIntervalMillis<=0)throw T.error("monit sound chanaged not config. please config getMediaMeterIntervalMillis"),"monit sound chanaged not config. please config getMediaMeterIntervalMillis";e.setAttribute("sound","sound"),this.addVideoEventListener(e,"onSoundChanaged",t)},onMediaTransmission:function(e,t){if(emedia.helper&&"function"===typeof emedia.helper.inboundVideo){var n=this._service(),r=e.getAttribute("hx_stream"),i=r&&n.getStreamById(r),o=e.getAttribute("flowWebrtc");i&&i._webrtc&&o==i._webrtc.__id||(e.hasAttribute("flow")&&i&&i._webrtc?(i.located()?emedia.helper.outboundVideo(i,t,1e3):emedia.helper.inboundVideo(i,t,1e3),e.setAttribute("flowWebrtc",i._webrtc.__id)):(this.addVideoEventListener(e,"onMediaTransmission",t),e.setAttribute("flow","flow")))}else T.warn("please import helper. <script>")},_onTalking:function(e,t,n,r){},_onNotSupportMemberPublishVideoCodecs:function(e,t,n){var r=this._videos[t.id];r&&(0,g.default)(r).trigger("onNotSupportVideoCodecs",[t,e,n])},onNotSupportVideoCodecs:function(e,t){this.addVideoEventListener(e,"onNotSupportVideoCodecs",t)},_onStreamIceStateChanged:function(e,t,n,r){var i=this._videos[t.id];i&&(0,g.default)(i).trigger("onIceStateChanged",[n,t,e,r])},onIceStateChanged:function(e,t){this.addVideoEventListener(e,"onIceStateChanged",t)},onHasRemoteControl:function(e,t,n,r){var i=this._videos[e.id];i&&(0,g.default)(i).trigger("onRemoteControl",[t,n,e,r])},onRemoteControl:function(e,t){this.addVideoEventListener(e,"onRemoteControl",t)},onRemoteFreeControl:function(e,t,n,r){var i=this._videos[e.id];i&&(0,g.default)(i).trigger("onFreeControl",[t,n,e,r])},onFreeControl:function(e,t){this.addVideoEventListener(e,"onFreeControl",t)},addVideoEventListener:function(e,t,n){(0,g.default)(e).off(t),(0,g.default)(e).on(t,(function(){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);n&&n.apply(e,t)}))}});b.default.each(["hungup","subscribe","pauseVideo","resumeVideo","pauseAudio","resumeAudio","chanageCamera","freeRemoteControl","capturePictureRemote","freezeFrameRemote"],(function(e,t){var n=e.replace(/\b[a-z]/g,(function(e){return e.toUpperCase()}));fe["trigger"+n]=function(t){var n=[];return n.push(t),n.push(e),Array.prototype.push.apply(n,Array.prototype.slice.call(arguments,1)),fe.zeptoTrigger.apply(fe,n)}})),fe.triggerTorchRemote=function(e,t){return S.Observable.create((function(n){(0,g.default)(e).trigger("torchRemote",[t,function(){n.error.apply(n,arguments)},function(){n.next.apply(n,arguments),n.complete()}])})).pipe(M).toPromise()},fe.triggerZoomRemote=function(e,t){return S.Observable.create((function(n){(0,g.default)(e).trigger("zoomRemote",[t,function(){n.error.apply(n,arguments)},function(){n.next.apply(n,arguments),n.complete()}])})).pipe(M).toPromise()},fe.triggerSubscribe=function(e,t,n){return S.Observable.create((function(r){(0,g.default)(e).trigger("subscribe",[t,n,function(){r.error.apply(r,arguments)},function(){r.next.apply(r,arguments),r.complete()}])})).pipe(M).toPromise()},fe.triggerRemoteControl=function(e,t,n,r,i,o,s,a){(0,g.default)(e).trigger("remoteControl",[t,n,r,i,o,s,a])},fe.triggerCaptureVideo=function(e,t,n){return S.Observable.create((function(r){(0,g.default)(e).trigger("captureVideo",[function(){r.next.apply(r,arguments),r.complete()},t,n])})).pipe(M).toPromise()};var de=t.single=fe},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(201),i=w(r),o=n(204),s=w(o),a=n(149),c=w(a),u=n(73),f=w(u),d=n(144),l=w(d),p=n(178),h=w(p),m=n(227),v=w(m),g=n(228),y=w(g),b=n(208),_=w(b);function w(e){return e&&e.__esModule?e:{default:e}}var S=function(){function e(t){(0,v.default)(this,e),this.emedia=t,this.streams=[],this._intervals_get=null,this._intervals_upload=null,this.data=[],this.counterId=1,this.prev_obj={},this.sessionId=null,this.network_quality_obj={},this.network_quality_threshold={RTT:{time:8e3,value:500},aPLR:{time:8e3,value:18},vPLR:{time:8e3,value:23},disconnect:{time:5e3}}}return(0,y.default)(e,[{key:"_get_url",value:function(){var e="",t=this.emedia.useCurrentXService.current;if(!t)return e;var n=t.ticket,r=n.qoeUpUrl,i=n.memName;i=i.split("_")[1];var o=emedia.config.appkey,s=o.split("#")[0],a=o.split("#")[1],c=(new Date).getTime(),u=emedia.mgr.identityToken;return e=r+"?orgName="+s+"&appName="+a+"&memName="+i+"&ts="+c+"&access_token="+u,e}},{key:"connect_ws",value:function(){var e=this._get_url();if(e){var t=new WebSocket(e),n=this;t.onopen=function(){console.log("upload stats ws connected"),n.socket=t},t.onclose=function(e){n.stop(),console.error("upload stats ws close",e)},t.message=function(e){console.log("upload stats ws recv msg",e)},t.onerror=function(e){console.error("upload stats ws error",e)}}else console.error("upload stats not have ws url")}},{key:"start",value:function(){var e=this;this._intervals_get=setInterval(e.get.bind(this),2e3),this._intervals_upload=setInterval(e.upload.bind(this),500)}},{key:"join_success",value:function(e){e&&(this.sessionId=e,this.data.unshift(this._get_init_data()),this.start())}},{key:"join_fail",value:function(){var e={type:0,result:1,errorInfo:"join fail"};this.socket&&this.socket.send(e)}},{key:"get",value:function(){if(this.emedia.useCurrentXService&&this.emedia.useCurrentXService.current&&this.emedia.useCurrentXService.current._cacheStreams){var e=this.emedia.useCurrentXService.current._cacheStreams,t=this;(0,h.default)(e).map((function(n){t.push_stats_to_data(e[n])}))}}},{key:"upload",value:function(){if(0!=this.data.length){if(this.socket){var e=this.data.shift();if(void 0==e.counterId&&(e.counterId=this.counterId,this.counterId=this.counterId+1),this.socket.send((0,l.default)(e)),1==e.type){var t=document.querySelector("#"+e.sId);if(t){var n="";(0,h.default)(e).map((function(t){n+="<div>"+t+" : "+e[t]+"</div>"})),t.innerHTML=n}}}}else console.warn("upload_stats upload fun -- this.data.length == 0")}},{key:"upload_event",value:function(e){if(e){var t=this._get_format_event_obj(e);t&&this.data.splice(1,0,t)}}},{key:"_get_format_event_obj",value:function(e){var t={type:2,time:(new Date).getTime()};if("object"!=(0,f.default)(e.event)&&void 0!=e.event)return(0,c.default)(t,e);var n=this.sessionId;if(e instanceof _.default.ICEConnected){var r=this._get_ice_connect_state_obj(e.webrtc,2);t=(0,c.default)(t,r)}else if(e instanceof _.default.ICEConnectFail){var i=this._get_ice_connect_state_obj(e.webrtc,4);t=(0,c.default)(t,i)}else if(e instanceof _.default.ICEDisconnected){var o=this._get_ice_connect_state_obj(e.webrtc,5);t=(0,c.default)(t,o)}else if(e instanceof _.default.PushSuccess){if(!e.hidden)return;var s=e.stream,a=s.rtcId,u=s.voff,d=s.aoff,l=s.type,p={event:14,sessionId:n,rtcId:a,voff:u,aoff:d,streamType:l,result:0};t=(0,c.default)(t,p)}else if(e instanceof _.default.SubSuccess){var h=e.stream,m=h.rtcId,v=h.id,g=h.type,y=h.memId,b=h.memName,w={event:16,rtcId:m,sId:v,sessionId:n,result:0,streamType:g,subMemName:b,subMemId:y};t=(0,c.default)(t,w)}else if(e instanceof _.default.EnterSuccess){var S={event:0,ip:e.ip};t=(0,c.default)(t,S)}return void 0!=t.event?t:void 0}},{key:"_get_ice_connect_state_obj",value:function(e,t){var n=this.emedia.useCurrentXService.current,r=null;for(var i in n._linkedStreams)n._linkedStreams[i].rtcId==e.getRtcId()&&(r=n._linkedStreams[i]);if(!r)return{};var o={event:20,rtcId:r.rtcId,connState:t,isPub:r.located(),sId:r.id,rtcCfg:r.rtcCfg,voff:r.voff,aoff:r.aoff};if(!r.located()){var s={subSId:r.id,subMemName:r.memName,subMemId:r.memId,subVideo:r.subSVideo,subAudio:r.subSAudio};o=(0,c.default)(o,s)}return o}},{key:"stop",value:function(){clearInterval(this._intervals_get),clearInterval(this._intervals_upload)}},{key:"push_stats_to_data",value:function(){var e=(0,s.default)(i.default.mark((function e(t){var n,r;return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t._webrtc._rtcPeerConnection.getStats();case 2:n=e.sent,r=this._get_format_upload_obj(n,t),this.data.push(r);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_get_init_data",value:function(){var e={},t=this.emedia.useCurrentXService.current;if(t){var n=this.emedia.config,r=n.appkey,i=n.version,o=t.confrId,s=t._memberId,a=t.memName,c=this.sessionId,u=this.emedia,f=u.browser,d=u.browserVersion;u.isWifi;return e={type:0,counterId:0,appkey:r,confrId:o,memId:s,memName:a,time:(new Date).getTime(),joinConfrTime:t.ticket.timestamp,sessionId:c,networkType:"WIFI",sdkOS:"Web",sdkVersion:i,deviceInfo:f,osVersion:d,result:0},e}}},{key:"_get_format_upload_obj",value:function(e,t){var n={type:1,time:(new Date).getTime(),streamType:t.type,sId:t.id,rtcId:t.rtcId};if(t.located()){n.isPub=!0;var r=this._get_outbound_stats(e);n=(0,c.default)(n,r)}else{n.isPub=!1,n.subMemName=t.memName,n.subMemId=t.memId;var i=this._get_inbound_stats(e);n=(0,c.default)(n,i)}return n=this._calc_KBps_and_PLR(n),n=this._set_stats_int(n),n}},{key:"_get_outbound_stats",value:function(e){var t={};return e.forEach((function(e){"outbound-rtp"==e.type&&("audio"==e.kind&&(t.aP=e.packetsSent,t.aB=e.bytesSent),"video"==e.kind&&(t.vW=e.frameWidth,t.vH=e.frameHeight,t.vP=e.packetsSent,t.vB=e.bytesSent)),"remote-inbound-rtp"==e.type&&("audio"==e.kind&&(t.aPL=e.packetsLost),"video"==e.kind&&(t.vPL=e.packetsLost)),"media-source"==e.type&&("audio"==e.kind&&(t.audioInputLevel=1e3*e.audioLevel),"video"==e.kind&&(t.vFps=e.framesPerSecond)),"candidate-pair"==e.type&&(t.RTT=1e3*e.totalRoundTripTime/e.responsesReceived)})),t}},{key:"_get_inbound_stats",value:function(e){var t={};return e.forEach((function(e){"inbound-rtp"==e.type&&("audio"==e.kind&&(t.aP=e.packetsReceived,t.aPL=e.packetsLost,t.aB=e.bytesReceived),"video"==e.kind&&(t.vP=e.packetsReceived,t.vPL=e.packetsLost,t.vB=e.bytesReceived)),"track"==e.type&&("video"==e.kind&&(t.vW=e.frameWidth,t.vH=e.frameHeight,t.vFR=e.framesReceived),"audio"==e.kind&&(t.audioInputLevel=1e3*e.audioLevel)),"candidate-pair"==e.type&&(t.RTT=1e3*e.totalRoundTripTime/e.responsesReceived)})),t}},{key:"_calc_KBps_and_PLR",value:function(e){var t=e.sId,n=e.aB,r=e.vB,i=e.time;e.aKBps=this._get_KBps_by_sId(t,"audio",n,i)||0,e.vKBps=this._get_KBps_by_sId(t,"video",r,i)||0;var o=e.aP,s=e.aPL,a=e.vP,c=e.vPL,u=this._get_PLR_by_sId(t,"audio",o,s),f=this._get_PLR_by_sId(t,"video",a,c);if((u||0==u)&&(e.aPLR=u),(f||0==f)&&(e.vPLR=f),!e.isPub){var d=e.vFR;if(this.prev_obj[t]&&this.prev_obj[t]["video"]&&this.prev_obj[t]["video"]["framesReceived"]){var l=this.prev_obj[t].time,p=this.prev_obj[t]["video"]["framesReceived"],h=(i-l)/1e3,m=(d-p)/h;m<0&&(m=0),e.vFps=m}}var v=this._network_quality(e),g=this._network_disconnect(e);if(!v){var y={time:(new Date).getTime(),event:4,type:2,counterId:this.counterId,sessionId:this.sessionId,rtcId:e.rtcId,sId:e.sId,isPub:e.isPub,streamType:e.sId,aoff:e.aoff,voff:e.voff,subMemName:e.subMemName,subMemId:e.subMemId};if(this.data.push(y),console.log("network2 weak",(new Date).getTime(),e.sId),this.emedia.mgr&&this.emedia.mgr.onNetworkWeak){var b=this.emedia.mgr.onNetworkWeak;"function"==typeof b&&b(e.sId)}}if(g&&(console.log("network2 disconnect",e.sId),this.emedia.mgr&&this.emedia.mgr.onNetworkDisconnect)){var _=this.emedia.mgr.onNetworkDisconnect;"function"==typeof _&&_(e.sId)}return this._set_prev_obj(e),delete e.aB,delete e.vB,delete e.vFR,delete e.RTT,e}},{key:"_set_stats_int",value:function(e){var t=["audioInputLevel","vKBps","vFps","vW","vH","vP","vPL","vPLR","aKBps","aP","aPL","aPLR"];for(var n in e)t.indexOf(n)>-1&&(e[n]=Math.round(e[n]));return e}},{key:"_get_KBps_by_sId",value:function(e,t,n,r){if(!e||!t||!n)return null;var i=this.prev_obj[e];if(!i||!i[t]||!i[t]["bytes"])return null;var o=i.time,s=i[t].bytes,a=parseInt(r-o),c=n-s;c<0&&(c=0);var u=c/(a/1e3).toFixed(2);return u/1e3}},{key:"_get_PLR_by_sId",value:function(e,t,n,r){if(!e)return null;if(!t||!n||!r)return 0;var i=this.prev_obj[e];if(!i||!i[t]||!i[t]["packets"]||!i[t]["packets_lost"])return 0;var o=i[t],s=o.packets,a=o.packets_lost,c=n-s,u=r-a,f=u/(c+u);return f=Math.round(100*f),f}},{key:"_set_prev_obj",value:function(e){var t=e.sId;if(t){var n=e.aB,r=e.vB,i=e.time,o=e.aP,s=e.aPL,a=e.vP,c=e.vPL,u=e.vFR,f={},d={};n&&(f.bytes=n),o&&(f.packets=o),(s||0==s)&&(f.packets_lost=s),r&&(d.bytes=r),a&&(d.packets=a),(c||0==c)&&(d.packets_lost=c),u&&(d.framesReceived=u),0==(0,h.default)(f).length&&0==(0,h.default)(d).length||(this.prev_obj[t]||(this.prev_obj[t]={}),this.prev_obj[t].time=i,(0,h.default)(f).length>0&&(this.prev_obj[t].audio=f),(0,h.default)(d).length>0&&(this.prev_obj[t].video=d))}}},{key:"_network_quality",value:function(e){if(!e)return!0;var t=this,n=function(n,r,i){if(!n||!r||!i)return!1;var o=t.network_quality_obj[e.sId];if(!o)return t.network_quality_obj[e.sId]={},t.network_quality_obj[e.sId][n]={time:0},!1;if(!o[n])return t.network_quality_obj[e.sId][n]={time:0},!1;var s=o[n],a=t.network_quality_threshold[n].value,c=t.network_quality_threshold[n].time;return r<a?(o[n]={time:0},!1):0===s.time?(o[n]={time:i},!1):i-s.time>=c&&(o[n]={time:0},!0)},r=e.RTT,i=e.aPLR,o=e.vPLR,s=e.time;return!(n("RTT",r,s)||n("aPLR",i,s)||n("vPLR",o,s))}},{key:"_network_disconnect",value:function(e){if(!e)return!1;var t=this.network_quality_obj[e.sId];if(!t)return t={},t["disconnect"]={time:0},!1;if(!t["disconnect"])return t["disconnect"]={time:0},!1;var n=e.vKBps,r=e.aKBps,i=e.time;if(n||r)return t["disconnect"]={time:0},!1;var o=t["disconnect"].time;if(0==o)return t["disconnect"]={time:i},!1;var s=this.network_quality_threshold["disconnect"].time;return i-o>=s&&(t["disconnect"]={time:0},!0)}}]),e}();t.default=S},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){"use strict";t.__esModule=!0;var r=n(197),i=o(r);function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,i.default)(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},function(e,t,n){"use strict";n.r(t);var r=n(230);n.d(t,"Observable",(function(){return r["Observable"]}));var i=n(247);n.d(t,"ConnectableObservable",(function(){return i["ConnectableObservable"]}));var o=n(252);n.d(t,"GroupedObservable",(function(){return o["GroupedObservable"]}));var s=n(244);n.d(t,"observable",(function(){return s["observable"]}));var a=n(248);n.d(t,"Subject",(function(){return a["Subject"]}));var c=n(253);n.d(t,"BehaviorSubject",(function(){return c["BehaviorSubject"]}));var u=n(254);n.d(t,"ReplaySubject",(function(){return u["ReplaySubject"]}));var f=n(271);n.d(t,"AsyncSubject",(function(){return f["AsyncSubject"]}));var d=n(272);n.d(t,"asapScheduler",(function(){return d["asap"]}));var l=n(276);n.d(t,"asyncScheduler",(function(){return l["async"]}));var p=n(255);n.d(t,"queueScheduler",(function(){return p["queue"]}));var h=n(277);n.d(t,"animationFrameScheduler",(function(){return h["animationFrame"]}));var m=n(280);n.d(t,"VirtualTimeScheduler",(function(){return m["VirtualTimeScheduler"]})),n.d(t,"VirtualAction",(function(){return m["VirtualAction"]}));var v=n(261);n.d(t,"Scheduler",(function(){return v["Scheduler"]}));var g=n(238);n.d(t,"Subscription",(function(){return g["Subscription"]}));var y=n(232);n.d(t,"Subscriber",(function(){return y["Subscriber"]}));var b=n(263);n.d(t,"Notification",(function(){return b["Notification"]})),n.d(t,"NotificationKind",(function(){return b["NotificationKind"]}));var _=n(245);n.d(t,"pipe",(function(){return _["pipe"]}));var w=n(246);n.d(t,"noop",(function(){return w["noop"]}));var S=n(281);n.d(t,"identity",(function(){return S["identity"]}));var x=n(282);n.d(t,"isObservable",(function(){return x["isObservable"]}));var C=n(283);n.d(t,"ArgumentOutOfRangeError",(function(){return C["ArgumentOutOfRangeError"]}));var E=n(284);n.d(t,"EmptyError",(function(){return E["EmptyError"]}));var I=n(249);n.d(t,"ObjectUnsubscribedError",(function(){return I["ObjectUnsubscribedError"]}));var T=n(241);n.d(t,"UnsubscriptionError",(function(){return T["UnsubscriptionError"]}));var O=n(285);n.d(t,"TimeoutError",(function(){return O["TimeoutError"]}));var R=n(286);n.d(t,"bindCallback",(function(){return R["bindCallback"]}));var k=n(288);n.d(t,"bindNodeCallback",(function(){return k["bindNodeCallback"]}));var M=n(289);n.d(t,"combineLatest",(function(){return M["combineLatest"]}));var A=n(300);n.d(t,"concat",(function(){return A["concat"]}));var P=n(311);n.d(t,"defer",(function(){return P["defer"]}));var j=n(264);n.d(t,"empty",(function(){return j["empty"]}));var N=n(312);n.d(t,"forkJoin",(function(){return N["forkJoin"]}));var L=n(304);n.d(t,"from",(function(){return L["from"]}));var D=n(313);n.d(t,"fromEvent",(function(){return D["fromEvent"]}));var B=n(314);n.d(t,"fromEventPattern",(function(){return B["fromEventPattern"]}));var U=n(315);n.d(t,"generate",(function(){return U["generate"]}));var F=n(316);n.d(t,"iif",(function(){return F["iif"]}));var V=n(317);n.d(t,"interval",(function(){return V["interval"]}));var W=n(319);n.d(t,"merge",(function(){return W["merge"]}));var q=n(320);n.d(t,"never",(function(){return q["never"]}));var $=n(265);n.d(t,"of",(function(){return $["of"]}));var G=n(321);n.d(t,"onErrorResumeNext",(function(){return G["onErrorResumeNext"]}));var z=n(322);n.d(t,"pairs",(function(){return z["pairs"]}));var H=n(323);n.d(t,"partition",(function(){return H["partition"]}));var K=n(326);n.d(t,"race",(function(){return K["race"]}));var J=n(327);n.d(t,"range",(function(){return J["range"]}));var Y=n(270);n.d(t,"throwError",(function(){return Y["throwError"]}));var X=n(328);n.d(t,"timer",(function(){return X["timer"]}));var Z=n(329);n.d(t,"using",(function(){return Z["using"]}));var Q=n(330);n.d(t,"zip",(function(){return Q["zip"]}));var ee=n(305);n.d(t,"scheduled",(function(){return ee["scheduled"]})),n.d(t,"EMPTY",(function(){return j["EMPTY"]})),n.d(t,"NEVER",(function(){return q["NEVER"]}));var te=n(236);n.d(t,"config",(function(){return te["config"]}))},function(e,t,n){"use strict";n.r(t),n.d(t,"Observable",(function(){return c}));var r=n(231),i=n(243),o=n(244),s=n(245),a=n(236),c=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r=this.operator,o=Object(i["toSubscriber"])(e,t,n);if(r?o.add(r.call(o,this.source)):o.add(this.source||a["config"].useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),a["config"].useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){a["config"].useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),Object(r["canReportError"])(e)?e.error(t):console.warn(t)}},e.prototype.forEach=function(e,t){var n=this;return t=u(t),new t((function(t,r){var i;i=n.subscribe((function(t){try{e(t)}catch(n){r(n),i&&i.unsubscribe()}}),r,t)}))},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[o["observable"]]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:Object(s["pipeFromArray"])(e)(this)},e.prototype.toPromise=function(e){var t=this;return e=u(e),new e((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}();function u(e){if(e||(e=a["config"].Promise||Promise),!e)throw new Error("no Promise impl found");return e}},function(e,t,n){"use strict";n.r(t),n.d(t,"canReportError",(function(){return i}));var r=n(232);function i(e){while(e){var t=e,n=t.closed,i=t.destination,o=t.isStopped;if(n||o)return!1;e=i&&i instanceof r["Subscriber"]?i:null}return!0}},function(e,t,n){"use strict";n.r(t),n.d(t,"Subscriber",(function(){return f})),n.d(t,"SafeSubscriber",(function(){return d}));var r=n(233),i=n(234),o=n(235),s=n(238),a=n(242),c=n(236),u=n(237),f=function(e){function t(n,r,i){var s=e.call(this)||this;switch(s.syncErrorValue=null,s.syncErrorThrown=!1,s.syncErrorThrowable=!1,s.isStopped=!1,arguments.length){case 0:s.destination=o["empty"];break;case 1:if(!n){s.destination=o["empty"];break}if("object"===typeof n){n instanceof t?(s.syncErrorThrowable=n.syncErrorThrowable,s.destination=n,n.add(s)):(s.syncErrorThrowable=!0,s.destination=new d(s,n));break}default:s.syncErrorThrowable=!0,s.destination=new d(s,n,r,i);break}return s}return r["__extends"](t,e),t.prototype[a["rxSubscriber"]]=function(){return this},t.create=function(e,n,r){var i=new t(e,n,r);return i.syncErrorThrowable=!1,i},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(s["Subscription"]),d=function(e){function t(t,n,r,s){var a,c=e.call(this)||this;c._parentSubscriber=t;var u=c;return Object(i["isFunction"])(n)?a=n:n&&(a=n.next,r=n.error,s=n.complete,n!==o["empty"]&&(u=Object.create(n),Object(i["isFunction"])(u.unsubscribe)&&c.add(u.unsubscribe.bind(u)),u.unsubscribe=c.unsubscribe.bind(c))),c._context=u,c._next=a,c._error=r,c._complete=s,c}return r["__extends"](t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;c["config"].useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=c["config"].useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):Object(u["hostReportError"])(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;Object(u["hostReportError"])(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};c["config"].useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),c["config"].useDeprecatedSynchronousErrorHandling)throw n;Object(u["hostReportError"])(n)}},t.prototype.__tryOrSetError=function(e,t,n){if(!c["config"].useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(r){return c["config"].useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):(Object(u["hostReportError"])(r),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(f)},function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",(function(){return i})),n.d(t,"__assign",(function(){return o})),n.d(t,"__rest",(function(){return s})),n.d(t,"__decorate",(function(){return a})),n.d(t,"__param",(function(){return c})),n.d(t,"__metadata",(function(){return u})),n.d(t,"__awaiter",(function(){return f})),n.d(t,"__generator",(function(){return d})),n.d(t,"__exportStar",(function(){return l})),n.d(t,"__values",(function(){return p})),n.d(t,"__read",(function(){return h})),n.d(t,"__spread",(function(){return m})),n.d(t,"__spreadArrays",(function(){return v})),n.d(t,"__await",(function(){return g})),n.d(t,"__asyncGenerator",(function(){return y})),n.d(t,"__asyncDelegator",(function(){return b})),n.d(t,"__asyncValues",(function(){return _})),n.d(t,"__makeTemplateObject",(function(){return w})),n.d(t,"__importStar",(function(){return S})),n.d(t,"__importDefault",(function(){return x}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},r(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o.apply(this,arguments)};function s(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function a(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}function c(e,t){return function(n,r){t(n,r,e)}}function u(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)}function f(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(t){o(t)}}function a(e){try{c(r["throw"](e))}catch(t){o(t)}}function c(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(s,a)}c((r=r.apply(e,t||[])).next())}))}function d(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(e){return function(t){return c([e,t])}}function c(o){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,r&&(i=2&o[0]?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}function l(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function p(e){var t="function"===typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function h(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{while((void 0===t||t-- >0)&&!(r=o.next()).done)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o["return"])&&n.call(o)}finally{if(i)throw i.error}}return s}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(h(arguments[t]));return e}function v(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function g(e){return this instanceof g?(this.v=e,this):new g(e)}function y(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||a(e,t)}))})}function a(e,t){try{c(i[e](t))}catch(n){d(o[0][3],n)}}function c(e){e.value instanceof g?Promise.resolve(e.value.v).then(u,f):d(o[0][2],e)}function u(e){a("next",e)}function f(e){a("throw",e)}function d(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}}function b(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:g(e[r](t)),done:"return"===r}:i?i(t):t}:i}}function _(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e="function"===typeof p?p(e):e[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,o){t=e[n](t),i(r,o,t.done,t.value)}))}}function i(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}}function w(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function S(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function x(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";function r(e){return"function"===typeof e}n.r(t),n.d(t,"isFunction",(function(){return r}))},function(e,t,n){"use strict";n.r(t),n.d(t,"empty",(function(){return o}));var r=n(236),i=n(237),o={closed:!0,next:function(e){},error:function(e){if(r["config"].useDeprecatedSynchronousErrorHandling)throw e;Object(i["hostReportError"])(e)},complete:function(){}}},function(e,t,n){"use strict";n.r(t),n.d(t,"config",(function(){return i}));var r=!1,i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){var t=new Error;t.stack}r=e},get useDeprecatedSynchronousErrorHandling(){return r}}},function(e,t,n){"use strict";function r(e){setTimeout((function(){throw e}),0)}n.r(t),n.d(t,"hostReportError",(function(){return r}))},function(e,t,n){"use strict";n.r(t),n.d(t,"Subscription",(function(){return a}));var r=n(239),i=n(240),o=n(234),s=n(241),a=function(){function e(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}return e.prototype.unsubscribe=function(){var t;if(!this.closed){var n=this,a=n._parentOrParents,u=n._unsubscribe,f=n._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,a instanceof e)a.remove(this);else if(null!==a)for(var d=0;d<a.length;++d){var l=a[d];l.remove(this)}if(Object(o["isFunction"])(u))try{u.call(this)}catch(m){t=m instanceof s["UnsubscriptionError"]?c(m.errors):[m]}if(Object(r["isArray"])(f)){d=-1;var p=f.length;while(++d<p){var h=f[d];if(Object(i["isObject"])(h))try{h.unsubscribe()}catch(m){t=t||[],m instanceof s["UnsubscriptionError"]?t=t.concat(c(m.errors)):t.push(m)}}}if(t)throw new s["UnsubscriptionError"](t)}},e.prototype.add=function(t){var n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!==typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var r=n;n=new e,n._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var i=n._parentOrParents;if(null===i)n._parentOrParents=this;else if(i instanceof e){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[n]:o.push(n),n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},e.EMPTY=function(e){return e.closed=!0,e}(new e),e}();function c(e){return e.reduce((function(e,t){return e.concat(t instanceof s["UnsubscriptionError"]?t.errors:t)}),[])}},function(e,t,n){"use strict";n.r(t),n.d(t,"isArray",(function(){return r}));var r=function(){return Array.isArray||function(e){return e&&"number"===typeof e.length}}()},function(e,t,n){"use strict";function r(e){return null!==e&&"object"===typeof e}n.r(t),n.d(t,"isObject",(function(){return r}))},function(e,t,n){"use strict";n.r(t),n.d(t,"UnsubscriptionError",(function(){return i}));var r=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),i=r},function(e,t,n){"use strict";n.r(t),n.d(t,"rxSubscriber",(function(){return r})),n.d(t,"$$rxSubscriber",(function(){return i}));var r=function(){return"function"===typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),i=r},function(e,t,n){"use strict";n.r(t),n.d(t,"toSubscriber",(function(){return s}));var r=n(232),i=n(242),o=n(235);function s(e,t,n){if(e){if(e instanceof r["Subscriber"])return e;if(e[i["rxSubscriber"]])return e[i["rxSubscriber"]]()}return e||t||n?new r["Subscriber"](e,t,n):new r["Subscriber"](o["empty"])}},function(e,t,n){"use strict";n.r(t),n.d(t,"observable",(function(){return r}));var r=function(){return"function"===typeof Symbol&&Symbol.observable||"@@observable"}()},function(e,t,n){"use strict";n.r(t),n.d(t,"pipe",(function(){return i})),n.d(t,"pipeFromArray",(function(){return o}));var r=n(246);function i(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o(e)}function o(e){return e?1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}:r["noop"]}},function(e,t,n){"use strict";function r(){}n.r(t),n.d(t,"noop",(function(){return r}))},function(e,t,n){"use strict";n.r(t),n.d(t,"ConnectableObservable",(function(){return u})),n.d(t,"connectableObservableDescriptor",(function(){return f}));var r=n(233),i=n(248),o=n(230),s=n(232),a=n(238),c=n(251),u=function(e){function t(t,n){var r=e.call(this)||this;return r.source=t,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return r["__extends"](t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,e=this._connection=new a["Subscription"],e.add(this.source.subscribe(new d(this.getSubject(),this))),e.closed&&(this._connection=null,e=a["Subscription"].EMPTY)),e},t.prototype.refCount=function(){return Object(c["refCount"])()(this)},t}(o["Observable"]),f=function(){var e=u.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:e._subscribe},_isComplete:{value:e._isComplete,writable:!0},getSubject:{value:e.getSubject},connect:{value:e.connect},refCount:{value:e.refCount}}}(),d=function(e){function t(t,n){var r=e.call(this,t)||this;return r.connectable=n,r}return r["__extends"](t,e),t.prototype._error=function(t){this._unsubscribe(),e.prototype._error.call(this,t)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},t}(i["SubjectSubscriber"]);s["Subscriber"]},function(e,t,n){"use strict";n.r(t),n.d(t,"SubjectSubscriber",(function(){return f})),n.d(t,"Subject",(function(){return d})),n.d(t,"AnonymousSubject",(function(){return l}));var r=n(233),i=n(230),o=n(232),s=n(238),a=n(249),c=n(250),u=n(242),f=function(e){function t(t){var n=e.call(this,t)||this;return n.destination=t,n}return r["__extends"](t,e),t}(o["Subscriber"]),d=function(e){function t(){var t=e.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return r["__extends"](t,e),t.prototype[u["rxSubscriber"]]=function(){return new f(this)},t.prototype.lift=function(e){var t=new l(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new a["ObjectUnsubscribedError"];if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].next(e)},t.prototype.error=function(e){if(this.closed)throw new a["ObjectUnsubscribedError"];this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new a["ObjectUnsubscribedError"];this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new a["ObjectUnsubscribedError"];return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new a["ObjectUnsubscribedError"];return this.hasError?(e.error(this.thrownError),s["Subscription"].EMPTY):this.isStopped?(e.complete(),s["Subscription"].EMPTY):(this.observers.push(e),new c["SubjectSubscription"](this,e))},t.prototype.asObservable=function(){var e=new i["Observable"];return e.source=this,e},t.create=function(e,t){return new l(e,t)},t}(i["Observable"]),l=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return r["__extends"](t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){var t=this.source;return t?this.source.subscribe(e):s["Subscription"].EMPTY},t}(d)},function(e,t,n){"use strict";n.r(t),n.d(t,"ObjectUnsubscribedError",(function(){return i}));var r=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}(),i=r},function(e,t,n){"use strict";n.r(t),n.d(t,"SubjectSubscription",(function(){return o}));var r=n(233),i=n(238),o=function(e){function t(t,n){var r=e.call(this)||this;return r.subject=t,r.subscriber=n,r.closed=!1,r}return r["__extends"](t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}},t}(i["Subscription"])},function(e,t,n){"use strict";n.r(t),n.d(t,"refCount",(function(){return o}));var r=n(233),i=n(232);function o(){return function(e){return e.lift(new s(e))}}var s=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,t){var n=this.connectable;n._refCount++;var r=new a(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i},e}(),a=function(e){function t(t,n){var r=e.call(this,t)||this;return r.connectable=n,r}return r["__extends"](t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var n=this.connection,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},t}(i["Subscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"groupBy",(function(){return c})),n.d(t,"GroupedObservable",(function(){return l}));var r=n(233),i=n(232),o=n(238),s=n(230),a=n(248);function c(e,t,n,r){return function(i){return i.lift(new u(e,t,n,r))}}var u=function(){function e(e,t,n,r){this.keySelector=e,this.elementSelector=t,this.durationSelector=n,this.subjectSelector=r}return e.prototype.call=function(e,t){return t.subscribe(new f(e,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))},e}(),f=function(e){function t(t,n,r,i,o){var s=e.call(this,t)||this;return s.keySelector=n,s.elementSelector=r,s.durationSelector=i,s.subjectSelector=o,s.groups=null,s.attemptedToUnsubscribe=!1,s.count=0,s}return r["__extends"](t,e),t.prototype._next=function(e){var t;try{t=this.keySelector(e)}catch(n){return void this.error(n)}this._group(e,t)},t.prototype._group=function(e,t){var n=this.groups;n||(n=this.groups=new Map);var r,i=n.get(t);if(this.elementSelector)try{r=this.elementSelector(e)}catch(c){this.error(c)}else r=e;if(!i){i=this.subjectSelector?this.subjectSelector():new a["Subject"],n.set(t,i);var o=new l(t,i,this);if(this.destination.next(o),this.durationSelector){var s=void 0;try{s=this.durationSelector(new l(t,i))}catch(c){return void this.error(c)}this.add(s.subscribe(new d(t,i,this)))}}i.closed||i.next(r)},t.prototype._error=function(e){var t=this.groups;t&&(t.forEach((function(t,n){t.error(e)})),t.clear()),this.destination.error(e)},t.prototype._complete=function(){var e=this.groups;e&&(e.forEach((function(e,t){e.complete()})),e.clear()),this.destination.complete()},t.prototype.removeGroup=function(e){this.groups.delete(e)},t.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&e.prototype.unsubscribe.call(this))},t}(i["Subscriber"]),d=function(e){function t(t,n,r){var i=e.call(this,n)||this;return i.key=t,i.group=n,i.parent=r,i}return r["__extends"](t,e),t.prototype._next=function(e){this.complete()},t.prototype._unsubscribe=function(){var e=this,t=e.parent,n=e.key;this.key=this.parent=null,t&&t.removeGroup(n)},t}(i["Subscriber"]),l=function(e){function t(t,n,r){var i=e.call(this)||this;return i.key=t,i.groupSubject=n,i.refCountSubscription=r,i}return r["__extends"](t,e),t.prototype._subscribe=function(e){var t=new o["Subscription"],n=this,r=n.refCountSubscription,i=n.groupSubject;return r&&!r.closed&&t.add(new p(r)),t.add(i.subscribe(e)),t},t}(s["Observable"]),p=function(e){function t(t){var n=e.call(this)||this;return n.parent=t,t.count++,n}return r["__extends"](t,e),t.prototype.unsubscribe=function(){var t=this.parent;t.closed||this.closed||(e.prototype.unsubscribe.call(this),t.count-=1,0===t.count&&t.attemptedToUnsubscribe&&t.unsubscribe())},t}(o["Subscription"])},function(e,t,n){"use strict";n.r(t),n.d(t,"BehaviorSubject",(function(){return s}));var r=n(233),i=n(248),o=n(249),s=function(e){function t(t){var n=e.call(this)||this;return n._value=t,n}return r["__extends"](t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return n&&!n.closed&&t.next(this._value),n},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new o["ObjectUnsubscribedError"];return this._value},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(i["Subject"])},function(e,t,n){"use strict";n.r(t),n.d(t,"ReplaySubject",(function(){return f}));var r=n(233),i=n(248),o=n(255),s=n(238),a=n(262),c=n(249),u=n(250),f=function(e){function t(t,n,r){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY);var i=e.call(this)||this;return i.scheduler=r,i._events=[],i._infiniteTimeWindow=!1,i._bufferSize=t<1?1:t,i._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(i._infiniteTimeWindow=!0,i.next=i.nextInfiniteTimeWindow):i.next=i.nextTimeWindow,i}return r["__extends"](t,e),t.prototype.nextInfiniteTimeWindow=function(t){var n=this._events;n.push(t),n.length>this._bufferSize&&n.shift(),e.prototype.next.call(this,t)},t.prototype.nextTimeWindow=function(t){this._events.push(new d(this._getNow(),t)),this._trimBufferThenGetEvents(),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){var t,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,o=r.length;if(this.closed)throw new c["ObjectUnsubscribedError"];if(this.isStopped||this.hasError?t=s["Subscription"].EMPTY:(this.observers.push(e),t=new u["SubjectSubscription"](this,e)),i&&e.add(e=new a["ObserveOnSubscriber"](e,i)),n)for(var f=0;f<o&&!e.closed;f++)e.next(r[f]);else for(f=0;f<o&&!e.closed;f++)e.next(r[f].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t},t.prototype._getNow=function(){return(this.scheduler||o["queue"]).now()},t.prototype._trimBufferThenGetEvents=function(){var e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,o=0;while(o<i){if(e-r[o].time<n)break;o++}return i>t&&(o=Math.max(o,i-t)),o>0&&r.splice(0,o),r},t}(i["Subject"]),d=function(){function e(e,t){this.time=e,this.value=t}return e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"queue",(function(){return o}));var r=n(256),i=n(259),o=new i["QueueScheduler"](r["QueueAction"])},function(e,t,n){"use strict";n.r(t),n.d(t,"QueueAction",(function(){return o}));var r=n(233),i=n(257),o=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return r["__extends"](t,e),t.prototype.schedule=function(t,n){return void 0===n&&(n=0),n>0?e.prototype.schedule.call(this,t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,n){return n>0||this.closed?e.prototype.execute.call(this,t,n):this._execute(t,n)},t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?e.prototype.requestAsyncId.call(this,t,n,r):t.flush(this)},t}(i["AsyncAction"])},function(e,t,n){"use strict";n.r(t),n.d(t,"AsyncAction",(function(){return o}));var r=n(233),i=n(258),o=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return r["__extends"](t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n=!1,r=void 0;try{this.work(e)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},t}(i["Action"])},function(e,t,n){"use strict";n.r(t),n.d(t,"Action",(function(){return o}));var r=n(233),i=n(238),o=function(e){function t(t,n){return e.call(this)||this}return r["__extends"](t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(i["Subscription"])},function(e,t,n){"use strict";n.r(t),n.d(t,"QueueScheduler",(function(){return o}));var r=n(233),i=n(260),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r["__extends"](t,e),t}(i["AsyncScheduler"])},function(e,t,n){"use strict";n.r(t),n.d(t,"AsyncScheduler",(function(){return o}));var r=n(233),i=n(261),o=function(e){function t(n,r){void 0===r&&(r=i["Scheduler"].now);var o=e.call(this,n,(function(){return t.delegate&&t.delegate!==o?t.delegate.now():r()}))||this;return o.actions=[],o.active=!1,o.scheduled=void 0,o}return r["__extends"](t,e),t.prototype.schedule=function(n,r,i){return void 0===r&&(r=0),t.delegate&&t.delegate!==this?t.delegate.schedule(n,r,i):e.prototype.schedule.call(this,n,r,i)},t.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){while(e=t.shift())e.unsubscribe();throw n}}},t}(i["Scheduler"])},function(e,t,n){"use strict";n.r(t),n.d(t,"Scheduler",(function(){return r}));var r=function(){function e(t,n){void 0===n&&(n=e.now),this.SchedulerAction=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(n,t)},e.now=function(){return Date.now()},e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"observeOn",(function(){return s})),n.d(t,"ObserveOnOperator",(function(){return a})),n.d(t,"ObserveOnSubscriber",(function(){return c})),n.d(t,"ObserveOnMessage",(function(){return u}));var r=n(233),i=n(232),o=n(263);function s(e,t){return void 0===t&&(t=0),function(n){return n.lift(new a(e,t))}}var a=function(){function e(e,t){void 0===t&&(t=0),this.scheduler=e,this.delay=t}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.scheduler,this.delay))},e}(),c=function(e){function t(t,n,r){void 0===r&&(r=0);var i=e.call(this,t)||this;return i.scheduler=n,i.delay=r,i}return r["__extends"](t,e),t.dispatch=function(e){var t=e.notification,n=e.destination;t.observe(n),this.unsubscribe()},t.prototype.scheduleMessage=function(e){var n=this.destination;n.add(this.scheduler.schedule(t.dispatch,this.delay,new u(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(o["Notification"].createNext(e))},t.prototype._error=function(e){this.scheduleMessage(o["Notification"].createError(e)),this.unsubscribe()},t.prototype._complete=function(){this.scheduleMessage(o["Notification"].createComplete()),this.unsubscribe()},t}(i["Subscriber"]),u=function(){function e(e,t){this.notification=e,this.destination=t}return e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"NotificationKind",(function(){return r})),n.d(t,"Notification",(function(){return a}));var r,i=n(264),o=n(265),s=n(270);r||(r={});var a=function(){function e(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}return e.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},e.prototype.do=function(e,t,n){var r=this.kind;switch(r){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}},e.prototype.accept=function(e,t,n){return e&&"function"===typeof e.next?this.observe(e):this.do(e,t,n)},e.prototype.toObservable=function(){var e=this.kind;switch(e){case"N":return Object(o["of"])(this.value);case"E":return Object(s["throwError"])(this.error);case"C":return Object(i["empty"])()}throw new Error("unexpected notification kind value")},e.createNext=function(t){return"undefined"!==typeof t?new e("N",t):e.undefinedValueNotification},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"EMPTY",(function(){return i})),n.d(t,"empty",(function(){return o}));var r=n(230),i=new r["Observable"]((function(e){return e.complete()}));function o(e){return e?s(e):i}function s(e){return new r["Observable"]((function(t){return e.schedule((function(){return t.complete()}))}))}},function(e,t,n){"use strict";n.r(t),n.d(t,"of",(function(){return s}));var r=n(266),i=n(267),o=n(269);function s(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[e.length-1];return Object(r["isScheduler"])(n)?(e.pop(),Object(o["scheduleArray"])(e,n)):Object(i["fromArray"])(e)}},function(e,t,n){"use strict";function r(e){return e&&"function"===typeof e.schedule}n.r(t),n.d(t,"isScheduler",(function(){return r}))},function(e,t,n){"use strict";n.r(t),n.d(t,"fromArray",(function(){return s}));var r=n(230),i=n(268),o=n(269);function s(e,t){return t?Object(o["scheduleArray"])(e,t):new r["Observable"](Object(i["subscribeToArray"])(e))}},function(e,t,n){"use strict";n.r(t),n.d(t,"subscribeToArray",(function(){return r}));var r=function(e){return function(t){for(var n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()}}},function(e,t,n){"use strict";n.r(t),n.d(t,"scheduleArray",(function(){return o}));var r=n(230),i=n(238);function o(e,t){return new r["Observable"]((function(n){var r=new i["Subscription"],o=0;return r.add(t.schedule((function(){o!==e.length?(n.next(e[o++]),n.closed||r.add(this.schedule())):n.complete()}))),r}))}},function(e,t,n){"use strict";n.r(t),n.d(t,"throwError",(function(){return i}));var r=n(230);function i(e,t){return t?new r["Observable"]((function(n){return t.schedule(o,0,{error:e,subscriber:n})})):new r["Observable"]((function(t){return t.error(e)}))}function o(e){var t=e.error,n=e.subscriber;n.error(t)}},function(e,t,n){"use strict";n.r(t),n.d(t,"AsyncSubject",(function(){return s}));var r=n(233),i=n(248),o=n(238),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.value=null,t.hasNext=!1,t.hasCompleted=!1,t}return r["__extends"](t,e),t.prototype._subscribe=function(t){return this.hasError?(t.error(this.thrownError),o["Subscription"].EMPTY):this.hasCompleted&&this.hasNext?(t.next(this.value),t.complete(),o["Subscription"].EMPTY):e.prototype._subscribe.call(this,t)},t.prototype.next=function(e){this.hasCompleted||(this.value=e,this.hasNext=!0)},t.prototype.error=function(t){this.hasCompleted||e.prototype.error.call(this,t)},t.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&e.prototype.next.call(this,this.value),e.prototype.complete.call(this)},t}(i["Subject"])},function(e,t,n){"use strict";n.r(t),n.d(t,"asap",(function(){return o}));var r=n(273),i=n(275),o=new i["AsapScheduler"](r["AsapAction"])},function(e,t,n){"use strict";n.r(t),n.d(t,"AsapAction",(function(){return s}));var r=n(233),i=n(274),o=n(257),s=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return r["__extends"](t,e),t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0?e.prototype.requestAsyncId.call(this,t,n,r):(t.actions.push(this),t.scheduled||(t.scheduled=i["Immediate"].setImmediate(t.flush.bind(t,null))))},t.prototype.recycleAsyncId=function(t,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,r);0===t.actions.length&&(i["Immediate"].clearImmediate(n),t.scheduled=void 0)},t}(o["AsyncAction"])},function(e,t,n){"use strict";n.r(t),n.d(t,"Immediate",(function(){return s}));var r=1,i={};function o(e){var t=i[e];t&&t()}var s={setImmediate:function(e){var t=r++;return i[t]=e,Promise.resolve().then((function(){return o(t)})),t},clearImmediate:function(e){delete i[e]}}},function(e,t,n){"use strict";n.r(t),n.d(t,"AsapScheduler",(function(){return o}));var r=n(233),i=n(260),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r["__extends"](t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,n=this.actions,r=-1,i=n.length;e=e||n.shift();do{if(t=e.execute(e.state,e.delay))break}while(++r<i&&(e=n.shift()));if(this.active=!1,t){while(++r<i&&(e=n.shift()))e.unsubscribe();throw t}},t}(i["AsyncScheduler"])},function(e,t,n){"use strict";n.r(t),n.d(t,"async",(function(){return o}));var r=n(257),i=n(260),o=new i["AsyncScheduler"](r["AsyncAction"])},function(e,t,n){"use strict";n.r(t),n.d(t,"animationFrame",(function(){return o}));var r=n(278),i=n(279),o=new i["AnimationFrameScheduler"](r["AnimationFrameAction"])},function(e,t,n){"use strict";n.r(t),n.d(t,"AnimationFrameAction",(function(){return o}));var r=n(233),i=n(257),o=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return r["__extends"](t,e),t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0?e.prototype.requestAsyncId.call(this,t,n,r):(t.actions.push(this),t.scheduled||(t.scheduled=requestAnimationFrame((function(){return t.flush(null)}))))},t.prototype.recycleAsyncId=function(t,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,r);0===t.actions.length&&(cancelAnimationFrame(n),t.scheduled=void 0)},t}(i["AsyncAction"])},function(e,t,n){"use strict";n.r(t),n.d(t,"AnimationFrameScheduler",(function(){return o}));var r=n(233),i=n(260),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r["__extends"](t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,n=this.actions,r=-1,i=n.length;e=e||n.shift();do{if(t=e.execute(e.state,e.delay))break}while(++r<i&&(e=n.shift()));if(this.active=!1,t){while(++r<i&&(e=n.shift()))e.unsubscribe();throw t}},t}(i["AsyncScheduler"])},function(e,t,n){"use strict";n.r(t),n.d(t,"VirtualTimeScheduler",(function(){return s})),n.d(t,"VirtualAction",(function(){return a}));var r=n(233),i=n(257),o=n(260),s=function(e){function t(t,n){void 0===t&&(t=a),void 0===n&&(n=Number.POSITIVE_INFINITY);var r=e.call(this,t,(function(){return r.frame}))||this;return r.maxFrames=n,r.frame=0,r.index=-1,r}return r["__extends"](t,e),t.prototype.flush=function(){var e,t,n=this,r=n.actions,i=n.maxFrames;while((t=r[0])&&t.delay<=i)if(r.shift(),this.frame=t.delay,e=t.execute(t.state,t.delay))break;if(e){while(t=r.shift())t.unsubscribe();throw e}},t.frameTimeFactor=10,t}(o["AsyncScheduler"]),a=function(e){function t(t,n,r){void 0===r&&(r=t.index+=1);var i=e.call(this,t,n)||this;return i.scheduler=t,i.work=n,i.index=r,i.active=!0,i.index=t.index=r,i}return r["__extends"](t,e),t.prototype.schedule=function(n,r){if(void 0===r&&(r=0),!this.id)return e.prototype.schedule.call(this,n,r);this.active=!1;var i=new t(this.scheduler,this.work);return this.add(i),i.schedule(n,r)},t.prototype.requestAsyncId=function(e,n,r){void 0===r&&(r=0),this.delay=e.frame+r;var i=e.actions;return i.push(this),i.sort(t.sortActions),!0},t.prototype.recycleAsyncId=function(e,t,n){void 0===n&&(n=0)},t.prototype._execute=function(t,n){if(!0===this.active)return e.prototype._execute.call(this,t,n)},t.sortActions=function(e,t){return e.delay===t.delay?e.index===t.index?0:e.index>t.index?1:-1:e.delay>t.delay?1:-1},t}(i["AsyncAction"])},function(e,t,n){"use strict";function r(e){return e}n.r(t),n.d(t,"identity",(function(){return r}))},function(e,t,n){"use strict";n.r(t),n.d(t,"isObservable",(function(){return i}));var r=n(230);function i(e){return!!e&&(e instanceof r["Observable"]||"function"===typeof e.lift&&"function"===typeof e.subscribe)}},function(e,t,n){"use strict";n.r(t),n.d(t,"ArgumentOutOfRangeError",(function(){return i}));var r=function(){function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e}(),i=r},function(e,t,n){"use strict";n.r(t),n.d(t,"EmptyError",(function(){return i}));var r=function(){function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e}(),i=r},function(e,t,n){"use strict";n.r(t),n.d(t,"TimeoutError",(function(){return i}));var r=function(){function e(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return e.prototype=Object.create(Error.prototype),e}(),i=r},function(e,t,n){"use strict";n.r(t),n.d(t,"bindCallback",(function(){return u}));var r=n(230),i=n(271),o=n(287),s=n(231),a=n(239),c=n(266);function u(e,t,n){if(t){if(!Object(c["isScheduler"])(t))return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return u(e,n).apply(void 0,r).pipe(Object(o["map"])((function(e){return Object(a["isArray"])(e)?t.apply(void 0,e):t(e)})))};n=t}return function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];var a,c=this,u={context:c,subject:a,callbackFunc:e,scheduler:n};return new r["Observable"]((function(r){if(n){var o={args:t,subscriber:r,params:u};return n.schedule(f,0,o)}if(!a){a=new i["AsyncSubject"];var d=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];a.next(e.length<=1?e[0]:e),a.complete()};try{e.apply(c,t.concat([d]))}catch(l){Object(s["canReportError"])(a)?a.error(l):console.warn(l)}}return a.subscribe(r)}))}}function f(e){var t=this,n=e.args,r=e.subscriber,o=e.params,s=o.callbackFunc,a=o.context,c=o.scheduler,u=o.subject;if(!u){u=o.subject=new i["AsyncSubject"];var f=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.length<=1?e[0]:e;t.add(c.schedule(d,0,{value:r,subject:u}))};try{s.apply(a,n.concat([f]))}catch(l){u.error(l)}}this.add(u.subscribe(r))}function d(e){var t=e.value,n=e.subject;n.next(t),n.complete()}},function(e,t,n){"use strict";n.r(t),n.d(t,"map",(function(){return o})),n.d(t,"MapOperator",(function(){return s}));var r=n(233),i=n(232);function o(e,t){return function(n){if("function"!==typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new s(e,t))}}var s=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.project,this.thisArg))},e}(),a=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.project=n,i.count=0,i.thisArg=r||i,i}return r["__extends"](t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)},t}(i["Subscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"bindNodeCallback",(function(){return u}));var r=n(230),i=n(271),o=n(287),s=n(231),a=n(266),c=n(239);function u(e,t,n){if(t){if(!Object(a["isScheduler"])(t))return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return u(e,n).apply(void 0,r).pipe(Object(o["map"])((function(e){return Object(c["isArray"])(e)?t.apply(void 0,e):t(e)})))};n=t}return function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];var a={subject:void 0,args:t,callbackFunc:e,scheduler:n,context:this};return new r["Observable"]((function(r){var o=a.context,c=a.subject;if(n)return n.schedule(f,0,{params:a,subscriber:r,context:o});if(!c){c=a.subject=new i["AsyncSubject"];var u=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.shift();n?c.error(n):(c.next(e.length<=1?e[0]:e),c.complete())};try{e.apply(o,t.concat([u]))}catch(d){Object(s["canReportError"])(c)?c.error(d):console.warn(d)}}return c.subscribe(r)}))}}function f(e){var t=this,n=e.params,r=e.subscriber,o=e.context,s=n.callbackFunc,a=n.args,c=n.scheduler,u=n.subject;if(!u){u=n.subject=new i["AsyncSubject"];var f=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.shift();if(r)t.add(c.schedule(l,0,{err:r,subject:u}));else{var i=e.length<=1?e[0]:e;t.add(c.schedule(d,0,{value:i,subject:u}))}};try{s.apply(o,a.concat([f]))}catch(p){this.add(c.schedule(l,0,{err:p,subject:u}))}}this.add(u.subscribe(r))}function d(e){var t=e.value,n=e.subject;n.next(t),n.complete()}function l(e){var t=e.err,n=e.subject;n.error(t)}},function(e,t,n){"use strict";n.r(t),n.d(t,"combineLatest",(function(){return f})),n.d(t,"CombineLatestOperator",(function(){return d})),n.d(t,"CombineLatestSubscriber",(function(){return l}));var r=n(233),i=n(266),o=n(239),s=n(290),a=n(291),c=n(267),u={};function f(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=null,r=null;return Object(i["isScheduler"])(e[e.length-1])&&(r=e.pop()),"function"===typeof e[e.length-1]&&(n=e.pop()),1===e.length&&Object(o["isArray"])(e[0])&&(e=e[0]),Object(c["fromArray"])(e,r).lift(new d(n))}var d=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.resultSelector))},e}(),l=function(e){function t(t,n){var r=e.call(this,t)||this;return r.resultSelector=n,r.active=0,r.values=[],r.observables=[],r}return r["__extends"](t,e),t.prototype._next=function(e){this.values.push(u),this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(var n=0;n<t;n++){var r=e[n];this.add(Object(a["subscribeToResult"])(this,r,r,n))}}},t.prototype.notifyComplete=function(e){0===(this.active-=1)&&this.destination.complete()},t.prototype.notifyNext=function(e,t,n,r,i){var o=this.values,s=o[n],a=this.toRespond?s===u?--this.toRespond:this.toRespond:0;o[n]=t,0===a&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))},t.prototype._tryResultSelector=function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)},t}(s["OuterSubscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"OuterSubscriber",(function(){return o}));var r=n(233),i=n(232),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r["__extends"](t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(i["Subscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"subscribeToResult",(function(){return s}));var r=n(292),i=n(293),o=n(230);function s(e,t,n,s,a){if(void 0===a&&(a=new r["InnerSubscriber"](e,n,s)),!a.closed)return t instanceof o["Observable"]?t.subscribe(a):Object(i["subscribeTo"])(t)(a)}},function(e,t,n){"use strict";n.r(t),n.d(t,"InnerSubscriber",(function(){return o}));var r=n(233),i=n(232),o=function(e){function t(t,n,r){var i=e.call(this)||this;return i.parent=t,i.outerValue=n,i.outerIndex=r,i.index=0,i}return r["__extends"](t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(i["Subscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"subscribeTo",(function(){return l}));var r=n(268),i=n(294),o=n(295),s=n(297),a=n(298),c=n(299),u=n(240),f=n(296),d=n(244),l=function(e){if(e&&"function"===typeof e[d["observable"]])return Object(s["subscribeToObservable"])(e);if(Object(a["isArrayLike"])(e))return Object(r["subscribeToArray"])(e);if(Object(c["isPromise"])(e))return Object(i["subscribeToPromise"])(e);if(e&&"function"===typeof e[f["iterator"]])return Object(o["subscribeToIterable"])(e);var t=Object(u["isObject"])(e)?"an invalid object":"'"+e+"'",n="You provided "+t+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";throw new TypeError(n)}},function(e,t,n){"use strict";n.r(t),n.d(t,"subscribeToPromise",(function(){return i}));var r=n(237),i=function(e){return function(t){return e.then((function(e){t.closed||(t.next(e),t.complete())}),(function(e){return t.error(e)})).then(null,r["hostReportError"]),t}}},function(e,t,n){"use strict";n.r(t),n.d(t,"subscribeToIterable",(function(){return i}));var r=n(296),i=function(e){return function(t){var n=e[r["iterator"]]();do{var i=n.next();if(i.done){t.complete();break}if(t.next(i.value),t.closed)break}while(1);return"function"===typeof n.return&&t.add((function(){n.return&&n.return()})),t}}},function(e,t,n){"use strict";function r(){return"function"===typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.r(t),n.d(t,"getSymbolIterator",(function(){return r})),n.d(t,"iterator",(function(){return i})),n.d(t,"$$iterator",(function(){return o}));var i=r(),o=i},function(e,t,n){"use strict";n.r(t),n.d(t,"subscribeToObservable",(function(){return i}));var r=n(244),i=function(e){return function(t){var n=e[r["observable"]]();if("function"!==typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(t)}}},function(e,t,n){"use strict";n.r(t),n.d(t,"isArrayLike",(function(){return r}));var r=function(e){return e&&"number"===typeof e.length&&"function"!==typeof e}},function(e,t,n){"use strict";function r(e){return!!e&&"function"!==typeof e.subscribe&&"function"===typeof e.then}n.r(t),n.d(t,"isPromise",(function(){return r}))},function(e,t,n){"use strict";n.r(t),n.d(t,"concat",(function(){return o}));var r=n(265),i=n(301);function o(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Object(i["concatAll"])()(r["of"].apply(void 0,e))}},function(e,t,n){"use strict";n.r(t),n.d(t,"concatAll",(function(){return i}));var r=n(302);function i(){return Object(r["mergeAll"])(1)}},function(e,t,n){"use strict";n.r(t),n.d(t,"mergeAll",(function(){return o}));var r=n(303),i=n(281);function o(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),Object(r["mergeMap"])(i["identity"],e)}},function(e,t,n){"use strict";n.r(t),n.d(t,"mergeMap",(function(){return u})),n.d(t,"MergeMapOperator",(function(){return f})),n.d(t,"MergeMapSubscriber",(function(){return d}));var r=n(233),i=n(291),o=n(290),s=n(292),a=n(287),c=n(304);function u(e,t,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"===typeof t?function(r){return r.pipe(u((function(n,r){return Object(c["from"])(e(n,r)).pipe(Object(a["map"])((function(e,i){return t(n,e,r,i)})))}),n))}:("number"===typeof t&&(n=t),function(t){return t.lift(new f(e,n))})}var f=function(){function e(e,t){void 0===t&&(t=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=t}return e.prototype.call=function(e,t){return t.subscribe(new d(e,this.project,this.concurrent))},e}(),d=function(e){function t(t,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var i=e.call(this,t)||this;return i.project=n,i.concurrent=r,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return r["__extends"](t,e),t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t,e,n)},t.prototype._innerSub=function(e,t,n){var r=new s["InnerSubscriber"](this,void 0,void 0),o=this.destination;o.add(r),Object(i["subscribeToResult"])(this,e,t,n,r)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(o["OuterSubscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"from",(function(){return s}));var r=n(230),i=n(293),o=n(305);function s(e,t){return t?Object(o["scheduled"])(e,t):e instanceof r["Observable"]?e:new r["Observable"](Object(i["subscribeTo"])(e))}},function(e,t,n){"use strict";n.r(t),n.d(t,"scheduled",(function(){return d}));var r=n(306),i=n(307),o=n(269),s=n(308),a=n(309),c=n(299),u=n(298),f=n(310);function d(e,t){if(null!=e){if(Object(a["isInteropObservable"])(e))return Object(r["scheduleObservable"])(e,t);if(Object(c["isPromise"])(e))return Object(i["schedulePromise"])(e,t);if(Object(u["isArrayLike"])(e))return Object(o["scheduleArray"])(e,t);if(Object(f["isIterable"])(e)||"string"===typeof e)return Object(s["scheduleIterable"])(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}},function(e,t,n){"use strict";n.r(t),n.d(t,"scheduleObservable",(function(){return s}));var r=n(230),i=n(238),o=n(244);function s(e,t){return new r["Observable"]((function(n){var r=new i["Subscription"];return r.add(t.schedule((function(){var i=e[o["observable"]]();r.add(i.subscribe({next:function(e){r.add(t.schedule((function(){return n.next(e)})))},error:function(e){r.add(t.schedule((function(){return n.error(e)})))},complete:function(){r.add(t.schedule((function(){return n.complete()})))}}))}))),r}))}},function(e,t,n){"use strict";n.r(t),n.d(t,"schedulePromise",(function(){return o}));var r=n(230),i=n(238);function o(e,t){return new r["Observable"]((function(n){var r=new i["Subscription"];return r.add(t.schedule((function(){return e.then((function(e){r.add(t.schedule((function(){n.next(e),r.add(t.schedule((function(){return n.complete()})))})))}),(function(e){r.add(t.schedule((function(){return n.error(e)})))}))}))),r}))}},function(e,t,n){"use strict";n.r(t),n.d(t,"scheduleIterable",(function(){return s}));var r=n(230),i=n(238),o=n(296);function s(e,t){if(!e)throw new Error("Iterable cannot be null");return new r["Observable"]((function(n){var r,s=new i["Subscription"];return s.add((function(){r&&"function"===typeof r.return&&r.return()})),s.add(t.schedule((function(){r=e[o["iterator"]](),s.add(t.schedule((function(){if(!n.closed){var e,t;try{var i=r.next();e=i.value,t=i.done}catch(o){return void n.error(o)}t?n.complete():(n.next(e),this.schedule())}})))}))),s}))}},function(e,t,n){"use strict";n.r(t),n.d(t,"isInteropObservable",(function(){return i}));var r=n(244);function i(e){return e&&"function"===typeof e[r["observable"]]}},function(e,t,n){"use strict";n.r(t),n.d(t,"isIterable",(function(){return i}));var r=n(296);function i(e){return e&&"function"===typeof e[r["iterator"]]}},function(e,t,n){"use strict";n.r(t),n.d(t,"defer",(function(){return s}));var r=n(230),i=n(304),o=n(264);function s(e){return new r["Observable"]((function(t){var n;try{n=e()}catch(s){return void t.error(s)}var r=n?Object(i["from"])(n):Object(o["empty"])();return r.subscribe(t)}))}},function(e,t,n){"use strict";n.r(t),n.d(t,"forkJoin",(function(){return c}));var r=n(230),i=n(239),o=n(287),s=n(240),a=n(304);function c(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var n=e[0];if(Object(i["isArray"])(n))return u(n,null);if(Object(s["isObject"])(n)&&Object.getPrototypeOf(n)===Object.prototype){var r=Object.keys(n);return u(r.map((function(e){return n[e]})),r)}}if("function"===typeof e[e.length-1]){var a=e.pop();return e=1===e.length&&Object(i["isArray"])(e[0])?e[0]:e,u(e,null).pipe(Object(o["map"])((function(e){return a.apply(void 0,e)})))}return u(e,null)}function u(e,t){return new r["Observable"]((function(n){var r=e.length;if(0!==r)for(var i=new Array(r),o=0,s=0,c=function(c){var u=Object(a["from"])(e[c]),f=!1;n.add(u.subscribe({next:function(e){f||(f=!0,s++),i[c]=e},error:function(e){return n.error(e)},complete:function(){o++,o!==r&&f||(s===r&&n.next(t?t.reduce((function(e,t,n){return e[t]=i[n],e}),{}):i),n.complete())}}))},u=0;u<r;u++)c(u);else n.complete()}))}},function(e,t,n){"use strict";n.r(t),n.d(t,"fromEvent",(function(){return a}));var r=n(230),i=n(239),o=n(234),s=n(287);function a(e,t,n,u){return Object(o["isFunction"])(n)&&(u=n,n=void 0),u?a(e,t,n).pipe(Object(s["map"])((function(e){return Object(i["isArray"])(e)?u.apply(void 0,e):u(e)}))):new r["Observable"]((function(r){function i(e){arguments.length>1?r.next(Array.prototype.slice.call(arguments)):r.next(e)}c(e,t,i,r,n)}))}function c(e,t,n,r,i){var o;if(d(e)){var s=e;e.addEventListener(t,n,i),o=function(){return s.removeEventListener(t,n,i)}}else if(f(e)){var a=e;e.on(t,n),o=function(){return a.off(t,n)}}else if(u(e)){var l=e;e.addListener(t,n),o=function(){return l.removeListener(t,n)}}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(var p=0,h=e.length;p<h;p++)c(e[p],t,n,r,i)}r.add(o)}function u(e){return e&&"function"===typeof e.addListener&&"function"===typeof e.removeListener}function f(e){return e&&"function"===typeof e.on&&"function"===typeof e.off}function d(e){return e&&"function"===typeof e.addEventListener&&"function"===typeof e.removeEventListener}},function(e,t,n){"use strict";n.r(t),n.d(t,"fromEventPattern",(function(){return a}));var r=n(230),i=n(239),o=n(234),s=n(287);function a(e,t,n){return n?a(e,t).pipe(Object(s["map"])((function(e){return Object(i["isArray"])(e)?n.apply(void 0,e):n(e)}))):new r["Observable"]((function(n){var r,i=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.next(1===e.length?e[0]:e)};try{r=e(i)}catch(s){return void n.error(s)}if(Object(o["isFunction"])(t))return function(){return t(i,r)}}))}},function(e,t,n){"use strict";n.r(t),n.d(t,"generate",(function(){return s}));var r=n(230),i=n(281),o=n(266);function s(e,t,n,s,c){var u,f;if(1==arguments.length){var d=e;f=d.initialState,t=d.condition,n=d.iterate,u=d.resultSelector||i["identity"],c=d.scheduler}else void 0===s||Object(o["isScheduler"])(s)?(f=e,u=i["identity"],c=s):(f=e,u=s);return new r["Observable"]((function(e){var r=f;if(c)return c.schedule(a,0,{subscriber:e,iterate:n,condition:t,resultSelector:u,state:r});do{if(t){var i=void 0;try{i=t(r)}catch(s){return void e.error(s)}if(!i){e.complete();break}}var o=void 0;try{o=u(r)}catch(s){return void e.error(s)}if(e.next(o),e.closed)break;try{r=n(r)}catch(s){return void e.error(s)}}while(1)}))}function a(e){var t=e.subscriber,n=e.condition;if(!t.closed){if(e.needIterate)try{e.state=e.iterate(e.state)}catch(o){return void t.error(o)}else e.needIterate=!0;if(n){var r=void 0;try{r=n(e.state)}catch(o){return void t.error(o)}if(!r)return void t.complete();if(t.closed)return}var i;try{i=e.resultSelector(e.state)}catch(o){return void t.error(o)}if(!t.closed&&(t.next(i),!t.closed))return this.schedule(e)}}},function(e,t,n){"use strict";n.r(t),n.d(t,"iif",(function(){return o}));var r=n(311),i=n(264);function o(e,t,n){return void 0===t&&(t=i["EMPTY"]),void 0===n&&(n=i["EMPTY"]),Object(r["defer"])((function(){return e()?t:n}))}},function(e,t,n){"use strict";n.r(t),n.d(t,"interval",(function(){return s}));var r=n(230),i=n(276),o=n(318);function s(e,t){return void 0===e&&(e=0),void 0===t&&(t=i["async"]),(!Object(o["isNumeric"])(e)||e<0)&&(e=0),t&&"function"===typeof t.schedule||(t=i["async"]),new r["Observable"]((function(n){return n.add(t.schedule(a,e,{subscriber:n,counter:0,period:e})),n}))}function a(e){var t=e.subscriber,n=e.counter,r=e.period;t.next(n),this.schedule({subscriber:t,counter:n+1,period:r},r)}},function(e,t,n){"use strict";n.r(t),n.d(t,"isNumeric",(function(){return i}));var r=n(239);function i(e){return!Object(r["isArray"])(e)&&e-parseFloat(e)+1>=0}},function(e,t,n){"use strict";n.r(t),n.d(t,"merge",(function(){return a}));var r=n(230),i=n(266),o=n(302),s=n(267);function a(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Number.POSITIVE_INFINITY,a=null,c=e[e.length-1];return Object(i["isScheduler"])(c)?(a=e.pop(),e.length>1&&"number"===typeof e[e.length-1]&&(n=e.pop())):"number"===typeof c&&(n=e.pop()),null===a&&1===e.length&&e[0]instanceof r["Observable"]?e[0]:Object(o["mergeAll"])(n)(Object(s["fromArray"])(e,a))}},function(e,t,n){"use strict";n.r(t),n.d(t,"NEVER",(function(){return o})),n.d(t,"never",(function(){return s}));var r=n(230),i=n(246),o=new r["Observable"](i["noop"]);function s(){return o}},function(e,t,n){"use strict";n.r(t),n.d(t,"onErrorResumeNext",(function(){return a}));var r=n(230),i=n(304),o=n(239),s=n(264);function a(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)return s["EMPTY"];var n=e[0],c=e.slice(1);return 1===e.length&&Object(o["isArray"])(n)?a.apply(void 0,n):new r["Observable"]((function(e){var t=function(){return e.add(a.apply(void 0,c).subscribe(e))};return Object(i["from"])(n).subscribe({next:function(t){e.next(t)},error:t,complete:t})}))}},function(e,t,n){"use strict";n.r(t),n.d(t,"pairs",(function(){return o})),n.d(t,"dispatch",(function(){return s}));var r=n(230),i=n(238);function o(e,t){return t?new r["Observable"]((function(n){var r=Object.keys(e),o=new i["Subscription"];return o.add(t.schedule(s,0,{keys:r,index:0,subscriber:n,subscription:o,obj:e})),o})):new r["Observable"]((function(t){for(var n=Object.keys(e),r=0;r<n.length&&!t.closed;r++){var i=n[r];e.hasOwnProperty(i)&&t.next([i,e[i]])}t.complete()}))}function s(e){var t=e.keys,n=e.index,r=e.subscriber,i=e.subscription,o=e.obj;if(!r.closed)if(n<t.length){var s=t[n];r.next([s,o[s]]),i.add(this.schedule({keys:t,index:n+1,subscriber:r,subscription:i,obj:o}))}else r.complete()}},function(e,t,n){"use strict";n.r(t),n.d(t,"partition",(function(){return a}));var r=n(324),i=n(293),o=n(325),s=n(230);function a(e,t,n){return[Object(o["filter"])(t,n)(new s["Observable"](Object(i["subscribeTo"])(e))),Object(o["filter"])(Object(r["not"])(t,n))(new s["Observable"](Object(i["subscribeTo"])(e)))]}},function(e,t,n){"use strict";function r(e,t){function n(){return!n.pred.apply(n.thisArg,arguments)}return n.pred=e,n.thisArg=t,n}n.r(t),n.d(t,"not",(function(){return r}))},function(e,t,n){"use strict";n.r(t),n.d(t,"filter",(function(){return o}));var r=n(233),i=n(232);function o(e,t){return function(n){return n.lift(new s(e,t))}}var s=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.predicate,this.thisArg))},e}(),a=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.predicate=n,i.thisArg=r,i.count=0,i}return r["__extends"](t,e),t.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}t&&this.destination.next(e)},t}(i["Subscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"race",(function(){return c})),n.d(t,"RaceOperator",(function(){return u})),n.d(t,"RaceSubscriber",(function(){return f}));var r=n(233),i=n(239),o=n(267),s=n(290),a=n(291);function c(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){if(!Object(i["isArray"])(e[0]))return e[0];e=e[0]}return Object(o["fromArray"])(e,void 0).lift(new u)}var u=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new f(e))},e}(),f=function(e){function t(t){var n=e.call(this,t)||this;return n.hasFirst=!1,n.observables=[],n.subscriptions=[],n}return r["__extends"](t,e),t.prototype._next=function(e){this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{for(var n=0;n<t&&!this.hasFirst;n++){var r=e[n],i=Object(a["subscribeToResult"])(this,r,r,n);this.subscriptions&&this.subscriptions.push(i),this.add(i)}this.observables=null}},t.prototype.notifyNext=function(e,t,n,r,i){if(!this.hasFirst){this.hasFirst=!0;for(var o=0;o<this.subscriptions.length;o++)if(o!==n){var s=this.subscriptions[o];s.unsubscribe(),this.remove(s)}this.subscriptions=null}this.destination.next(t)},t}(s["OuterSubscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"range",(function(){return i})),n.d(t,"dispatch",(function(){return o}));var r=n(230);function i(e,t,n){return void 0===e&&(e=0),new r["Observable"]((function(r){void 0===t&&(t=e,e=0);var i=0,s=e;if(n)return n.schedule(o,0,{index:i,count:t,start:e,subscriber:r});do{if(i++>=t){r.complete();break}if(r.next(s++),r.closed)break}while(1)}))}function o(e){var t=e.start,n=e.index,r=e.count,i=e.subscriber;n>=r?i.complete():(i.next(t),i.closed||(e.index=n+1,e.start=t+1,this.schedule(e)))}},function(e,t,n){"use strict";n.r(t),n.d(t,"timer",(function(){return a}));var r=n(230),i=n(276),o=n(318),s=n(266);function a(e,t,n){void 0===e&&(e=0);var a=-1;return Object(o["isNumeric"])(t)?a=Number(t)<1?1:Number(t):Object(s["isScheduler"])(t)&&(n=t),Object(s["isScheduler"])(n)||(n=i["async"]),new r["Observable"]((function(t){var r=Object(o["isNumeric"])(e)?e:+e-n.now();return n.schedule(c,r,{index:0,period:a,subscriber:t})}))}function c(e){var t=e.index,n=e.period,r=e.subscriber;if(r.next(t),!r.closed){if(-1===n)return r.complete();e.index=t+1,this.schedule(e,n)}}},function(e,t,n){"use strict";n.r(t),n.d(t,"using",(function(){return s}));var r=n(230),i=n(304),o=n(264);function s(e,t){return new r["Observable"]((function(n){var r,s;try{r=e()}catch(u){return void n.error(u)}try{s=t(r)}catch(u){return void n.error(u)}var a=s?Object(i["from"])(s):o["EMPTY"],c=a.subscribe(n);return function(){c.unsubscribe(),r&&r.unsubscribe()}}))}},function(e,t,n){"use strict";n.r(t),n.d(t,"zip",(function(){return f})),n.d(t,"ZipOperator",(function(){return d})),n.d(t,"ZipSubscriber",(function(){return l}));var r=n(233),i=n(267),o=n(239),s=n(232),a=n(290),c=n(291),u=n(296);function f(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[e.length-1];return"function"===typeof n&&e.pop(),Object(i["fromArray"])(e,void 0).lift(new d(n))}var d=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.resultSelector))},e}(),l=function(e){function t(t,n,r){void 0===r&&(r=Object.create(null));var i=e.call(this,t)||this;return i.iterators=[],i.active=0,i.resultSelector="function"===typeof n?n:null,i.values=r,i}return r["__extends"](t,e),t.prototype._next=function(e){var t=this.iterators;Object(o["isArray"])(e)?t.push(new h(e)):"function"===typeof e[u["iterator"]]?t.push(new p(e[u["iterator"]]())):t.push(new m(this.destination,this,e))},t.prototype._complete=function(){var e=this.iterators,t=e.length;if(this.unsubscribe(),0!==t){this.active=t;for(var n=0;n<t;n++){var r=e[n];if(r.stillUnsubscribed){var i=this.destination;i.add(r.subscribe(r,n))}else this.active--}}else this.destination.complete()},t.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},t.prototype.checkIterators=function(){for(var e=this.iterators,t=e.length,n=this.destination,r=0;r<t;r++){var i=e[r];if("function"===typeof i.hasValue&&!i.hasValue())return}var o=!1,s=[];for(r=0;r<t;r++){i=e[r];var a=i.next();if(i.hasCompleted()&&(o=!0),a.done)return void n.complete();s.push(a.value)}this.resultSelector?this._tryresultSelector(s):n.next(s),o&&n.complete()},t.prototype._tryresultSelector=function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)},t}(s["Subscriber"]),p=function(){function e(e){this.iterator=e,this.nextResult=e.next()}return e.prototype.hasValue=function(){return!0},e.prototype.next=function(){var e=this.nextResult;return this.nextResult=this.iterator.next(),e},e.prototype.hasCompleted=function(){var e=this.nextResult;return e&&e.done},e}(),h=function(){function e(e){this.array=e,this.index=0,this.length=0,this.length=e.length}return e.prototype[u["iterator"]]=function(){return this},e.prototype.next=function(e){var t=this.index++,n=this.array;return t<this.length?{value:n[t],done:!1}:{value:null,done:!0}},e.prototype.hasValue=function(){return this.array.length>this.index},e.prototype.hasCompleted=function(){return this.array.length===this.index},e}(),m=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.parent=n,i.observable=r,i.stillUnsubscribed=!0,i.buffer=[],i.isComplete=!1,i}return r["__extends"](t,e),t.prototype[u["iterator"]]=function(){return this},t.prototype.next=function(){var e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}},t.prototype.hasValue=function(){return this.buffer.length>0},t.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},t.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},t.prototype.notifyNext=function(e,t,n,r,i){this.buffer.push(t),this.parent.checkIterators()},t.prototype.subscribe=function(e,t){return Object(c["subscribeToResult"])(this,this.observable,this,t)},t}(a["OuterSubscriber"])},function(e,t,n){"use strict";n.r(t);var r=n(332);n.d(t,"audit",(function(){return r["audit"]}));var i=n(333);n.d(t,"auditTime",(function(){return i["auditTime"]}));var o=n(334);n.d(t,"buffer",(function(){return o["buffer"]}));var s=n(335);n.d(t,"bufferCount",(function(){return s["bufferCount"]}));var a=n(336);n.d(t,"bufferTime",(function(){return a["bufferTime"]}));var c=n(337);n.d(t,"bufferToggle",(function(){return c["bufferToggle"]}));var u=n(338);n.d(t,"bufferWhen",(function(){return u["bufferWhen"]}));var f=n(339);n.d(t,"catchError",(function(){return f["catchError"]}));var d=n(340);n.d(t,"combineAll",(function(){return d["combineAll"]}));var l=n(341);n.d(t,"combineLatest",(function(){return l["combineLatest"]}));var p=n(342);n.d(t,"concat",(function(){return p["concat"]}));var h=n(301);n.d(t,"concatAll",(function(){return h["concatAll"]}));var m=n(343);n.d(t,"concatMap",(function(){return m["concatMap"]}));var v=n(344);n.d(t,"concatMapTo",(function(){return v["concatMapTo"]}));var g=n(345);n.d(t,"count",(function(){return g["count"]}));var y=n(346);n.d(t,"debounce",(function(){return y["debounce"]}));var b=n(347);n.d(t,"debounceTime",(function(){return b["debounceTime"]}));var _=n(348);n.d(t,"defaultIfEmpty",(function(){return _["defaultIfEmpty"]}));var w=n(349);n.d(t,"delay",(function(){return w["delay"]}));var S=n(351);n.d(t,"delayWhen",(function(){return S["delayWhen"]}));var x=n(352);n.d(t,"dematerialize",(function(){return x["dematerialize"]}));var C=n(353);n.d(t,"distinct",(function(){return C["distinct"]}));var E=n(354);n.d(t,"distinctUntilChanged",(function(){return E["distinctUntilChanged"]}));var I=n(355);n.d(t,"distinctUntilKeyChanged",(function(){return I["distinctUntilKeyChanged"]}));var T=n(356);n.d(t,"elementAt",(function(){return T["elementAt"]}));var O=n(359);n.d(t,"endWith",(function(){return O["endWith"]}));var R=n(360);n.d(t,"every",(function(){return R["every"]}));var k=n(361);n.d(t,"exhaust",(function(){return k["exhaust"]}));var M=n(362);n.d(t,"exhaustMap",(function(){return M["exhaustMap"]}));var A=n(363);n.d(t,"expand",(function(){return A["expand"]}));var P=n(325);n.d(t,"filter",(function(){return P["filter"]}));var j=n(364);n.d(t,"finalize",(function(){return j["finalize"]}));var N=n(365);n.d(t,"find",(function(){return N["find"]}));var L=n(366);n.d(t,"findIndex",(function(){return L["findIndex"]}));var D=n(367);n.d(t,"first",(function(){return D["first"]}));var B=n(252);n.d(t,"groupBy",(function(){return B["groupBy"]}));var U=n(368);n.d(t,"ignoreElements",(function(){return U["ignoreElements"]}));var F=n(369);n.d(t,"isEmpty",(function(){return F["isEmpty"]}));var V=n(370);n.d(t,"last",(function(){return V["last"]}));var W=n(287);n.d(t,"map",(function(){return W["map"]}));var q=n(372);n.d(t,"mapTo",(function(){return q["mapTo"]}));var $=n(373);n.d(t,"materialize",(function(){return $["materialize"]}));var G=n(374);n.d(t,"max",(function(){return G["max"]}));var z=n(377);n.d(t,"merge",(function(){return z["merge"]}));var H=n(302);n.d(t,"mergeAll",(function(){return H["mergeAll"]}));var K=n(303);n.d(t,"mergeMap",(function(){return K["mergeMap"]})),n.d(t,"flatMap",(function(){return K["mergeMap"]}));var J=n(378);n.d(t,"mergeMapTo",(function(){return J["mergeMapTo"]}));var Y=n(379);n.d(t,"mergeScan",(function(){return Y["mergeScan"]}));var X=n(380);n.d(t,"min",(function(){return X["min"]}));var Z=n(381);n.d(t,"multicast",(function(){return Z["multicast"]}));var Q=n(262);n.d(t,"observeOn",(function(){return Q["observeOn"]}));var ee=n(382);n.d(t,"onErrorResumeNext",(function(){return ee["onErrorResumeNext"]}));var te=n(383);n.d(t,"pairwise",(function(){return te["pairwise"]}));var ne=n(384);n.d(t,"partition",(function(){return ne["partition"]}));var re=n(385);n.d(t,"pluck",(function(){return re["pluck"]}));var ie=n(386);n.d(t,"publish",(function(){return ie["publish"]}));var oe=n(387);n.d(t,"publishBehavior",(function(){return oe["publishBehavior"]}));var se=n(388);n.d(t,"publishLast",(function(){return se["publishLast"]}));var ae=n(389);n.d(t,"publishReplay",(function(){return ae["publishReplay"]}));var ce=n(390);n.d(t,"race",(function(){return ce["race"]}));var ue=n(375);n.d(t,"reduce",(function(){return ue["reduce"]}));var fe=n(391);n.d(t,"repeat",(function(){return fe["repeat"]}));var de=n(392);n.d(t,"repeatWhen",(function(){return de["repeatWhen"]}));var le=n(393);n.d(t,"retry",(function(){return le["retry"]}));var pe=n(394);n.d(t,"retryWhen",(function(){return pe["retryWhen"]}));var he=n(251);n.d(t,"refCount",(function(){return he["refCount"]}));var me=n(395);n.d(t,"sample",(function(){return me["sample"]}));var ve=n(396);n.d(t,"sampleTime",(function(){return ve["sampleTime"]}));var ge=n(376);n.d(t,"scan",(function(){return ge["scan"]}));var ye=n(397);n.d(t,"sequenceEqual",(function(){return ye["sequenceEqual"]}));var be=n(398);n.d(t,"share",(function(){return be["share"]}));var _e=n(399);n.d(t,"shareReplay",(function(){return _e["shareReplay"]}));var we=n(400);n.d(t,"single",(function(){return we["single"]}));var Se=n(401);n.d(t,"skip",(function(){return Se["skip"]}));var xe=n(402);n.d(t,"skipLast",(function(){return xe["skipLast"]}));var Ce=n(403);n.d(t,"skipUntil",(function(){return Ce["skipUntil"]}));var Ee=n(404);n.d(t,"skipWhile",(function(){return Ee["skipWhile"]}));var Ie=n(405);n.d(t,"startWith",(function(){return Ie["startWith"]}));var Te=n(406);n.d(t,"subscribeOn",(function(){return Te["subscribeOn"]}));var Oe=n(408);n.d(t,"switchAll",(function(){return Oe["switchAll"]}));var Re=n(409);n.d(t,"switchMap",(function(){return Re["switchMap"]}));var ke=n(410);n.d(t,"switchMapTo",(function(){return ke["switchMapTo"]}));var Me=n(358);n.d(t,"take",(function(){return Me["take"]}));var Ae=n(371);n.d(t,"takeLast",(function(){return Ae["takeLast"]}));var Pe=n(411);n.d(t,"takeUntil",(function(){return Pe["takeUntil"]}));var je=n(412);n.d(t,"takeWhile",(function(){return je["takeWhile"]}));var Ne=n(413);n.d(t,"tap",(function(){return Ne["tap"]}));var Le=n(414);n.d(t,"throttle",(function(){return Le["throttle"]}));var De=n(415);n.d(t,"throttleTime",(function(){return De["throttleTime"]}));var Be=n(357);n.d(t,"throwIfEmpty",(function(){return Be["throwIfEmpty"]}));var Ue=n(416);n.d(t,"timeInterval",(function(){return Ue["timeInterval"]}));var Fe=n(417);n.d(t,"timeout",(function(){return Fe["timeout"]}));var Ve=n(418);n.d(t,"timeoutWith",(function(){return Ve["timeoutWith"]}));var We=n(419);n.d(t,"timestamp",(function(){return We["timestamp"]}));var qe=n(420);n.d(t,"toArray",(function(){return qe["toArray"]}));var $e=n(421);n.d(t,"window",(function(){return $e["window"]}));var Ge=n(422);n.d(t,"windowCount",(function(){return Ge["windowCount"]}));var ze=n(423);n.d(t,"windowTime",(function(){return ze["windowTime"]}));var He=n(424);n.d(t,"windowToggle",(function(){return He["windowToggle"]}));var Ke=n(425);n.d(t,"windowWhen",(function(){return Ke["windowWhen"]}));var Je=n(426);n.d(t,"withLatestFrom",(function(){return Je["withLatestFrom"]}));var Ye=n(427);n.d(t,"zip",(function(){return Ye["zip"]}));var Xe=n(428);n.d(t,"zipAll",(function(){return Xe["zipAll"]}))},function(e,t,n){"use strict";n.r(t),n.d(t,"audit",(function(){return s}));var r=n(233),i=n(290),o=n(291);function s(e){return function(t){return t.lift(new a(e))}}var a=function(){function e(e){this.durationSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.durationSelector))},e}(),c=function(e){function t(t,n){var r=e.call(this,t)||this;return r.durationSelector=n,r.hasValue=!1,r}return r["__extends"](t,e),t.prototype._next=function(e){if(this.value=e,this.hasValue=!0,!this.throttled){var t=void 0;try{var n=this.durationSelector;t=n(e)}catch(i){return this.destination.error(i)}var r=Object(o["subscribeToResult"])(this,t);!r||r.closed?this.clearThrottle():this.add(this.throttled=r)}},t.prototype.clearThrottle=function(){var e=this,t=e.value,n=e.hasValue,r=e.throttled;r&&(this.remove(r),this.throttled=null,r.unsubscribe()),n&&(this.value=null,this.hasValue=!1,this.destination.next(t))},t.prototype.notifyNext=function(e,t,n,r){this.clearThrottle()},t.prototype.notifyComplete=function(){this.clearThrottle()},t}(i["OuterSubscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"auditTime",(function(){return s}));var r=n(276),i=n(332),o=n(328);function s(e,t){return void 0===t&&(t=r["async"]),Object(i["audit"])((function(){return Object(o["timer"])(e,t)}))}},function(e,t,n){"use strict";n.r(t),n.d(t,"buffer",(function(){return s}));var r=n(233),i=n(290),o=n(291);function s(e){return function(t){return t.lift(new a(e))}}var a=function(){function e(e){this.closingNotifier=e}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.closingNotifier))},e}(),c=function(e){function t(t,n){var r=e.call(this,t)||this;return r.buffer=[],r.add(Object(o["subscribeToResult"])(r,n)),r}return r["__extends"](t,e),t.prototype._next=function(e){this.buffer.push(e)},t.prototype.notifyNext=function(e,t,n,r,i){var o=this.buffer;this.buffer=[],this.destination.next(o)},t}(i["OuterSubscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"bufferCount",(function(){return o}));var r=n(233),i=n(232);function o(e,t){return void 0===t&&(t=null),function(n){return n.lift(new s(e,t))}}var s=function(){function e(e,t){this.bufferSize=e,this.startBufferEvery=t,this.subscriberClass=t&&e!==t?c:a}return e.prototype.call=function(e,t){return t.subscribe(new this.subscriberClass(e,this.bufferSize,this.startBufferEvery))},e}(),a=function(e){function t(t,n){var r=e.call(this,t)||this;return r.bufferSize=n,r.buffer=[],r}return r["__extends"](t,e),t.prototype._next=function(e){var t=this.buffer;t.push(e),t.length==this.bufferSize&&(this.destination.next(t),this.buffer=[])},t.prototype._complete=function(){var t=this.buffer;t.length>0&&this.destination.next(t),e.prototype._complete.call(this)},t}(i["Subscriber"]),c=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.bufferSize=n,i.startBufferEvery=r,i.buffers=[],i.count=0,i}return r["__extends"](t,e),t.prototype._next=function(e){var t=this,n=t.bufferSize,r=t.startBufferEvery,i=t.buffers,o=t.count;this.count++,o%r===0&&i.push([]);for(var s=i.length;s--;){var a=i[s];a.push(e),a.length===n&&(i.splice(s,1),this.destination.next(a))}},t.prototype._complete=function(){var t=this,n=t.buffers,r=t.destination;while(n.length>0){var i=n.shift();i.length>0&&r.next(i)}e.prototype._complete.call(this)},t}(i["Subscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"bufferTime",(function(){return a}));var r=n(233),i=n(276),o=n(232),s=n(266);function a(e){var t=arguments.length,n=i["async"];Object(s["isScheduler"])(arguments[arguments.length-1])&&(n=arguments[arguments.length-1],t--);var r=null;t>=2&&(r=arguments[1]);var o=Number.POSITIVE_INFINITY;return t>=3&&(o=arguments[2]),function(t){return t.lift(new c(e,r,o,n))}}var c=function(){function e(e,t,n,r){this.bufferTimeSpan=e,this.bufferCreationInterval=t,this.maxBufferSize=n,this.scheduler=r}return e.prototype.call=function(e,t){return t.subscribe(new f(e,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))},e}(),u=function(){function e(){this.buffer=[]}return e}(),f=function(e){function t(t,n,r,i,o){var s=e.call(this,t)||this;s.bufferTimeSpan=n,s.bufferCreationInterval=r,s.maxBufferSize=i,s.scheduler=o,s.contexts=[];var a=s.openContext();if(s.timespanOnly=null==r||r<0,s.timespanOnly){var c={subscriber:s,context:a,bufferTimeSpan:n};s.add(a.closeAction=o.schedule(d,n,c))}else{var u={subscriber:s,context:a},f={bufferTimeSpan:n,bufferCreationInterval:r,subscriber:s,scheduler:o};s.add(a.closeAction=o.schedule(p,n,u)),s.add(o.schedule(l,r,f))}return s}return r["__extends"](t,e),t.prototype._next=function(e){for(var t,n=this.contexts,r=n.length,i=0;i<r;i++){var o=n[i],s=o.buffer;s.push(e),s.length==this.maxBufferSize&&(t=o)}t&&this.onBufferFull(t)},t.prototype._error=function(t){this.contexts.length=0,e.prototype._error.call(this,t)},t.prototype._complete=function(){var t=this,n=t.contexts,r=t.destination;while(n.length>0){var i=n.shift();r.next(i.buffer)}e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.contexts=null},t.prototype.onBufferFull=function(e){this.closeContext(e);var t=e.closeAction;if(t.unsubscribe(),this.remove(t),!this.closed&&this.timespanOnly){e=this.openContext();var n=this.bufferTimeSpan,r={subscriber:this,context:e,bufferTimeSpan:n};this.add(e.closeAction=this.scheduler.schedule(d,n,r))}},t.prototype.openContext=function(){var e=new u;return this.contexts.push(e),e},t.prototype.closeContext=function(e){this.destination.next(e.buffer);var t=this.contexts,n=t?t.indexOf(e):-1;n>=0&&t.splice(t.indexOf(e),1)},t}(o["Subscriber"]);function d(e){var t=e.subscriber,n=e.context;n&&t.closeContext(n),t.closed||(e.context=t.openContext(),e.context.closeAction=this.schedule(e,e.bufferTimeSpan))}function l(e){var t=e.bufferCreationInterval,n=e.bufferTimeSpan,r=e.subscriber,i=e.scheduler,o=r.openContext(),s=this;r.closed||(r.add(o.closeAction=i.schedule(p,n,{subscriber:r,context:o})),s.schedule(e,t))}function p(e){var t=e.subscriber,n=e.context;t.closeContext(n)}},function(e,t,n){"use strict";n.r(t),n.d(t,"bufferToggle",(function(){return a}));var r=n(233),i=n(238),o=n(291),s=n(290);function a(e,t){return function(n){return n.lift(new c(e,t))}}var c=function(){function e(e,t){this.openings=e,this.closingSelector=t}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.openings,this.closingSelector))},e}(),u=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.openings=n,i.closingSelector=r,i.contexts=[],i.add(Object(o["subscribeToResult"])(i,n)),i}return r["__extends"](t,e),t.prototype._next=function(e){for(var t=this.contexts,n=t.length,r=0;r<n;r++)t[r].buffer.push(e)},t.prototype._error=function(t){var n=this.contexts;while(n.length>0){var r=n.shift();r.subscription.unsubscribe(),r.buffer=null,r.subscription=null}this.contexts=null,e.prototype._error.call(this,t)},t.prototype._complete=function(){var t=this.contexts;while(t.length>0){var n=t.shift();this.destination.next(n.buffer),n.subscription.unsubscribe(),n.buffer=null,n.subscription=null}this.contexts=null,e.prototype._complete.call(this)},t.prototype.notifyNext=function(e,t,n,r,i){e?this.closeBuffer(e):this.openBuffer(t)},t.prototype.notifyComplete=function(e){this.closeBuffer(e.context)},t.prototype.openBuffer=function(e){try{var t=this.closingSelector,n=t.call(this,e);n&&this.trySubscribe(n)}catch(r){this._error(r)}},t.prototype.closeBuffer=function(e){var t=this.contexts;if(t&&e){var n=e.buffer,r=e.subscription;this.destination.next(n),t.splice(t.indexOf(e),1),this.remove(r),r.unsubscribe()}},t.prototype.trySubscribe=function(e){var t=this.contexts,n=[],r=new i["Subscription"],s={buffer:n,subscription:r};t.push(s);var a=Object(o["subscribeToResult"])(this,e,s);!a||a.closed?this.closeBuffer(s):(a.context=s,this.add(a),r.add(a))},t}(s["OuterSubscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"bufferWhen",(function(){return a}));var r=n(233),i=n(238),o=n(290),s=n(291);function a(e){return function(t){return t.lift(new c(e))}}var c=function(){function e(e){this.closingSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.closingSelector))},e}(),u=function(e){function t(t,n){var r=e.call(this,t)||this;return r.closingSelector=n,r.subscribing=!1,r.openBuffer(),r}return r["__extends"](t,e),t.prototype._next=function(e){this.buffer.push(e)},t.prototype._complete=function(){var t=this.buffer;t&&this.destination.next(t),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.buffer=null,this.subscribing=!1},t.prototype.notifyNext=function(e,t,n,r,i){this.openBuffer()},t.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()},t.prototype.openBuffer=function(){var e=this.closingSubscription;e&&(this.remove(e),e.unsubscribe());var t,n=this.buffer;this.buffer&&this.destination.next(n),this.buffer=[];try{var r=this.closingSelector;t=r()}catch(o){return this.error(o)}e=new i["Subscription"],this.closingSubscription=e,this.add(e),this.subscribing=!0,e.add(Object(s["subscribeToResult"])(this,t)),this.subscribing=!1},t}(o["OuterSubscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"catchError",(function(){return a}));var r=n(233),i=n(290),o=n(292),s=n(291);function a(e){return function(t){var n=new c(e),r=t.lift(n);return n.caught=r}}var c=function(){function e(e){this.selector=e}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.selector,this.caught))},e}(),u=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.selector=n,i.caught=r,i}return r["__extends"](t,e),t.prototype.error=function(t){if(!this.isStopped){var n=void 0;try{n=this.selector(t,this.caught)}catch(i){return void e.prototype.error.call(this,i)}this._unsubscribeAndRecycle();var r=new o["InnerSubscriber"](this,void 0,void 0);this.add(r),Object(s["subscribeToResult"])(this,n,void 0,void 0,r)}},t}(i["OuterSubscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"combineAll",(function(){return i}));var r=n(289);function i(e){return function(t){return t.lift(new r["CombineLatestOperator"](e))}}},function(e,t,n){"use strict";n.r(t),n.d(t,"combineLatest",(function(){return s}));var r=n(239),i=n(289),o=n(304);function s(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=null;return"function"===typeof e[e.length-1]&&(n=e.pop()),1===e.length&&Object(r["isArray"])(e[0])&&(e=e[0].slice()),function(t){return t.lift.call(Object(o["from"])([t].concat(e)),new i["CombineLatestOperator"](n))}}},function(e,t,n){"use strict";n.r(t),n.d(t,"concat",(function(){return i}));var r=n(300);function i(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return t.lift.call(r["concat"].apply(void 0,[t].concat(e)))}}},function(e,t,n){"use strict";n.r(t),n.d(t,"concatMap",(function(){return i}));var r=n(303);function i(e,t){return Object(r["mergeMap"])(e,t,1)}},function(e,t,n){"use strict";n.r(t),n.d(t,"concatMapTo",(function(){return i}));var r=n(343);function i(e,t){return Object(r["concatMap"])((function(){return e}),t)}},function(e,t,n){"use strict";n.r(t),n.d(t,"count",(function(){return o}));var r=n(233),i=n(232);function o(e){return function(t){return t.lift(new s(e,t))}}var s=function(){function e(e,t){this.predicate=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.predicate,this.source))},e}(),a=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.predicate=n,i.source=r,i.count=0,i.index=0,i}return r["__extends"](t,e),t.prototype._next=function(e){this.predicate?this._tryPredicate(e):this.count++},t.prototype._tryPredicate=function(e){var t;try{t=this.predicate(e,this.index++,this.source)}catch(n){return void this.destination.error(n)}t&&this.count++},t.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},t}(i["Subscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"debounce",(function(){return s}));var r=n(233),i=n(290),o=n(291);function s(e){return function(t){return t.lift(new a(e))}}var a=function(){function e(e){this.durationSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.durationSelector))},e}(),c=function(e){function t(t,n){var r=e.call(this,t)||this;return r.durationSelector=n,r.hasValue=!1,r.durationSubscription=null,r}return r["__extends"](t,e),t.prototype._next=function(e){try{var t=this.durationSelector.call(this,e);t&&this._tryNext(e,t)}catch(n){this.destination.error(n)}},t.prototype._complete=function(){this.emitValue(),this.destination.complete()},t.prototype._tryNext=function(e,t){var n=this.durationSubscription;this.value=e,this.hasValue=!0,n&&(n.unsubscribe(),this.remove(n)),n=Object(o["subscribeToResult"])(this,t),n&&!n.closed&&this.add(this.durationSubscription=n)},t.prototype.notifyNext=function(e,t,n,r,i){this.emitValue()},t.prototype.notifyComplete=function(){this.emitValue()},t.prototype.emitValue=function(){if(this.hasValue){var t=this.value,n=this.durationSubscription;n&&(this.durationSubscription=null,n.unsubscribe(),this.remove(n)),this.value=null,this.hasValue=!1,e.prototype._next.call(this,t)}},t}(i["OuterSubscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"debounceTime",(function(){return s}));var r=n(233),i=n(232),o=n(276);function s(e,t){return void 0===t&&(t=o["async"]),function(n){return n.lift(new a(e,t))}}var a=function(){function e(e,t){this.dueTime=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.dueTime,this.scheduler))},e}(),c=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.dueTime=n,i.scheduler=r,i.debouncedSubscription=null,i.lastValue=null,i.hasValue=!1,i}return r["__extends"](t,e),t.prototype._next=function(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(u,this.dueTime,this))},t.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},t.prototype.debouncedNext=function(){if(this.clearDebounce(),this.hasValue){var e=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}},t.prototype.clearDebounce=function(){var e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)},t}(i["Subscriber"]);function u(e){e.debouncedNext()}},function(e,t,n){"use strict";n.r(t),n.d(t,"defaultIfEmpty",(function(){return o}));var r=n(233),i=n(232);function o(e){return void 0===e&&(e=null),function(t){return t.lift(new s(e))}}var s=function(){function e(e){this.defaultValue=e}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.defaultValue))},e}(),a=function(e){function t(t,n){var r=e.call(this,t)||this;return r.defaultValue=n,r.isEmpty=!0,r}return r["__extends"](t,e),t.prototype._next=function(e){this.isEmpty=!1,this.destination.next(e)},t.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},t}(i["Subscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"delay",(function(){return c}));var r=n(233),i=n(276),o=n(350),s=n(232),a=n(263);function c(e,t){void 0===t&&(t=i["async"]);var n=Object(o["isDate"])(e),r=n?+e-t.now():Math.abs(e);return function(e){return e.lift(new u(r,t))}}var u=function(){function e(e,t){this.delay=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new f(e,this.delay,this.scheduler))},e}(),f=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.delay=n,i.scheduler=r,i.queue=[],i.active=!1,i.errored=!1,i}return r["__extends"](t,e),t.dispatch=function(e){var t=e.source,n=t.queue,r=e.scheduler,i=e.destination;while(n.length>0&&n[0].time-r.now()<=0)n.shift().notification.observe(i);if(n.length>0){var o=Math.max(0,n[0].time-r.now());this.schedule(e,o)}else this.unsubscribe(),t.active=!1},t.prototype._schedule=function(e){this.active=!0;var n=this.destination;n.add(e.schedule(t.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))},t.prototype.scheduleNotification=function(e){if(!0!==this.errored){var t=this.scheduler,n=new d(t.now()+this.delay,e);this.queue.push(n),!1===this.active&&this._schedule(t)}},t.prototype._next=function(e){this.scheduleNotification(a["Notification"].createNext(e))},t.prototype._error=function(e){this.errored=!0,this.queue=[],this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.scheduleNotification(a["Notification"].createComplete()),this.unsubscribe()},t}(s["Subscriber"]),d=function(){function e(e,t){this.time=e,this.notification=t}return e}()},function(e,t,n){"use strict";function r(e){return e instanceof Date&&!isNaN(+e)}n.r(t),n.d(t,"isDate",(function(){return r}))},function(e,t,n){"use strict";n.r(t),n.d(t,"delayWhen",(function(){return c}));var r=n(233),i=n(232),o=n(230),s=n(290),a=n(291);function c(e,t){return t?function(n){return new d(n,t).lift(new u(e))}:function(t){return t.lift(new u(e))}}var u=function(){function e(e){this.delayDurationSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new f(e,this.delayDurationSelector))},e}(),f=function(e){function t(t,n){var r=e.call(this,t)||this;return r.delayDurationSelector=n,r.completed=!1,r.delayNotifierSubscriptions=[],r.index=0,r}return r["__extends"](t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(e),this.removeSubscription(i),this.tryComplete()},t.prototype.notifyError=function(e,t){this._error(e)},t.prototype.notifyComplete=function(e){var t=this.removeSubscription(e);t&&this.destination.next(t),this.tryComplete()},t.prototype._next=function(e){var t=this.index++;try{var n=this.delayDurationSelector(e,t);n&&this.tryDelay(n,e)}catch(r){this.destination.error(r)}},t.prototype._complete=function(){this.completed=!0,this.tryComplete(),this.unsubscribe()},t.prototype.removeSubscription=function(e){e.unsubscribe();var t=this.delayNotifierSubscriptions.indexOf(e);return-1!==t&&this.delayNotifierSubscriptions.splice(t,1),e.outerValue},t.prototype.tryDelay=function(e,t){var n=Object(a["subscribeToResult"])(this,e,t);if(n&&!n.closed){var r=this.destination;r.add(n),this.delayNotifierSubscriptions.push(n)}},t.prototype.tryComplete=function(){this.completed&&0===this.delayNotifierSubscriptions.length&&this.destination.complete()},t}(s["OuterSubscriber"]),d=function(e){function t(t,n){var r=e.call(this)||this;return r.source=t,r.subscriptionDelay=n,r}return r["__extends"](t,e),t.prototype._subscribe=function(e){this.subscriptionDelay.subscribe(new l(e,this.source))},t}(o["Observable"]),l=function(e){function t(t,n){var r=e.call(this)||this;return r.parent=t,r.source=n,r.sourceSubscribed=!1,r}return r["__extends"](t,e),t.prototype._next=function(e){this.subscribeToSource()},t.prototype._error=function(e){this.unsubscribe(),this.parent.error(e)},t.prototype._complete=function(){this.unsubscribe(),this.subscribeToSource()},t.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},t}(i["Subscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"dematerialize",(function(){return o}));var r=n(233),i=n(232);function o(){return function(e){return e.lift(new s)}}var s=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new a(e))},e}(),a=function(e){function t(t){return e.call(this,t)||this}return r["__extends"](t,e),t.prototype._next=function(e){e.observe(this.destination)},t}(i["Subscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"distinct",(function(){return s})),n.d(t,"DistinctSubscriber",(function(){return c}));var r=n(233),i=n(290),o=n(291);function s(e,t){return function(n){return n.lift(new a(e,t))}}var a=function(){function e(e,t){this.keySelector=e,this.flushes=t}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.keySelector,this.flushes))},e}(),c=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.keySelector=n,i.values=new Set,r&&i.add(Object(o["subscribeToResult"])(i,r)),i}return r["__extends"](t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.values.clear()},t.prototype.notifyError=function(e,t){this._error(e)},t.prototype._next=function(e){this.keySelector?this._useKeySelector(e):this._finalizeNext(e,e)},t.prototype._useKeySelector=function(e){var t,n=this.destination;try{t=this.keySelector(e)}catch(r){return void n.error(r)}this._finalizeNext(t,e)},t.prototype._finalizeNext=function(e,t){var n=this.values;n.has(e)||(n.add(e),this.destination.next(t))},t}(i["OuterSubscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"distinctUntilChanged",(function(){return o}));var r=n(233),i=n(232);function o(e,t){return function(n){return n.lift(new s(e,t))}}var s=function(){function e(e,t){this.compare=e,this.keySelector=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.compare,this.keySelector))},e}(),a=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.keySelector=r,i.hasKey=!1,"function"===typeof n&&(i.compare=n),i}return r["__extends"](t,e),t.prototype.compare=function(e,t){return e===t},t.prototype._next=function(e){var t;try{var n=this.keySelector;t=n?n(e):e}catch(o){return this.destination.error(o)}var r=!1;if(this.hasKey)try{var i=this.compare;r=i(this.key,t)}catch(o){return this.destination.error(o)}else this.hasKey=!0;r||(this.key=t,this.destination.next(e))},t}(i["Subscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"distinctUntilKeyChanged",(function(){return i}));var r=n(354);function i(e,t){return Object(r["distinctUntilChanged"])((function(n,r){return t?t(n[e],r[e]):n[e]===r[e]}))}},function(e,t,n){"use strict";n.r(t),n.d(t,"elementAt",(function(){return c}));var r=n(283),i=n(325),o=n(357),s=n(348),a=n(358);function c(e,t){if(e<0)throw new r["ArgumentOutOfRangeError"];var n=arguments.length>=2;return function(c){return c.pipe(Object(i["filter"])((function(t,n){return n===e})),Object(a["take"])(1),n?Object(s["defaultIfEmpty"])(t):Object(o["throwIfEmpty"])((function(){return new r["ArgumentOutOfRangeError"]})))}}},function(e,t,n){"use strict";n.r(t),n.d(t,"throwIfEmpty",(function(){return s}));var r=n(233),i=n(284),o=n(232);function s(e){return void 0===e&&(e=u),function(t){return t.lift(new a(e))}}var a=function(){function e(e){this.errorFactory=e}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.errorFactory))},e}(),c=function(e){function t(t,n){var r=e.call(this,t)||this;return r.errorFactory=n,r.hasValue=!1,r}return r["__extends"](t,e),t.prototype._next=function(e){this.hasValue=!0,this.destination.next(e)},t.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var e=void 0;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)},t}(o["Subscriber"]);function u(){return new i["EmptyError"]}},function(e,t,n){"use strict";n.r(t),n.d(t,"take",(function(){return a}));var r=n(233),i=n(232),o=n(283),s=n(264);function a(e){return function(t){return 0===e?Object(s["empty"])():t.lift(new c(e))}}var c=function(){function e(e){if(this.total=e,this.total<0)throw new o["ArgumentOutOfRangeError"]}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.total))},e}(),u=function(e){function t(t,n){var r=e.call(this,t)||this;return r.total=n,r.count=0,r}return r["__extends"](t,e),t.prototype._next=function(e){var t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))},t}(i["Subscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"endWith",(function(){return o}));var r=n(300),i=n(265);function o(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return Object(r["concat"])(t,i["of"].apply(void 0,e))}}},function(e,t,n){"use strict";n.r(t),n.d(t,"every",(function(){return o}));var r=n(233),i=n(232);function o(e,t){return function(n){return n.lift(new s(e,t,n))}}var s=function(){function e(e,t,n){this.predicate=e,this.thisArg=t,this.source=n}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.predicate,this.thisArg,this.source))},e}(),a=function(e){function t(t,n,r,i){var o=e.call(this,t)||this;return o.predicate=n,o.thisArg=r,o.source=i,o.index=0,o.thisArg=r||o,o}return r["__extends"](t,e),t.prototype.notifyComplete=function(e){this.destination.next(e),this.destination.complete()},t.prototype._next=function(e){var t=!1;try{t=this.predicate.call(this.thisArg,e,this.index++,this.source)}catch(n){return void this.destination.error(n)}t||this.notifyComplete(!1)},t.prototype._complete=function(){this.notifyComplete(!0)},t}(i["Subscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"exhaust",(function(){return s}));var r=n(233),i=n(290),o=n(291);function s(){return function(e){return e.lift(new a)}}var a=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new c(e))},e}(),c=function(e){function t(t){var n=e.call(this,t)||this;return n.hasCompleted=!1,n.hasSubscription=!1,n}return r["__extends"](t,e),t.prototype._next=function(e){this.hasSubscription||(this.hasSubscription=!0,this.add(Object(o["subscribeToResult"])(this,e)))},t.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},t.prototype.notifyComplete=function(e){this.remove(e),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},t}(i["OuterSubscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"exhaustMap",(function(){return u}));var r=n(233),i=n(290),o=n(292),s=n(291),a=n(287),c=n(304);function u(e,t){return t?function(n){return n.pipe(u((function(n,r){return Object(c["from"])(e(n,r)).pipe(Object(a["map"])((function(e,i){return t(n,e,r,i)})))})))}:function(t){return t.lift(new f(e))}}var f=function(){function e(e){this.project=e}return e.prototype.call=function(e,t){return t.subscribe(new d(e,this.project))},e}(),d=function(e){function t(t,n){var r=e.call(this,t)||this;return r.project=n,r.hasSubscription=!1,r.hasCompleted=!1,r.index=0,r}return r["__extends"](t,e),t.prototype._next=function(e){this.hasSubscription||this.tryNext(e)},t.prototype.tryNext=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this.hasSubscription=!0,this._innerSub(t,e,n)},t.prototype._innerSub=function(e,t,n){var r=new o["InnerSubscriber"](this,void 0,void 0),i=this.destination;i.add(r),Object(s["subscribeToResult"])(this,e,t,n,r)},t.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(e){var t=this.destination;t.remove(e),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},t}(i["OuterSubscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"expand",(function(){return s})),n.d(t,"ExpandOperator",(function(){return a})),n.d(t,"ExpandSubscriber",(function(){return c}));var r=n(233),i=n(290),o=n(291);function s(e,t,n){return void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===n&&(n=void 0),t=(t||0)<1?Number.POSITIVE_INFINITY:t,function(r){return r.lift(new a(e,t,n))}}var a=function(){function e(e,t,n){this.project=e,this.concurrent=t,this.scheduler=n}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.project,this.concurrent,this.scheduler))},e}(),c=function(e){function t(t,n,r,i){var o=e.call(this,t)||this;return o.project=n,o.concurrent=r,o.scheduler=i,o.index=0,o.active=0,o.hasCompleted=!1,r<Number.POSITIVE_INFINITY&&(o.buffer=[]),o}return r["__extends"](t,e),t.dispatch=function(e){var t=e.subscriber,n=e.result,r=e.value,i=e.index;t.subscribeToProjection(n,r,i)},t.prototype._next=function(e){var n=this.destination;if(n.closed)this._complete();else{var r=this.index++;if(this.active<this.concurrent){n.next(e);try{var i=this.project,o=i(e,r);if(this.scheduler){var s={subscriber:this,result:o,value:e,index:r},a=this.destination;a.add(this.scheduler.schedule(t.dispatch,0,s))}else this.subscribeToProjection(o,e,r)}catch(c){n.error(c)}}else this.buffer.push(e)}},t.prototype.subscribeToProjection=function(e,t,n){this.active++;var r=this.destination;r.add(Object(o["subscribeToResult"])(this,e,t,n))},t.prototype._complete=function(){this.hasCompleted=!0,this.hasCompleted&&0===this.active&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e,t,n,r,i){this._next(t)},t.prototype.notifyComplete=function(e){var t=this.buffer,n=this.destination;n.remove(e),this.active--,t&&t.length>0&&this._next(t.shift()),this.hasCompleted&&0===this.active&&this.destination.complete()},t}(i["OuterSubscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"finalize",(function(){return s}));var r=n(233),i=n(232),o=n(238);function s(e){return function(t){return t.lift(new a(e))}}var a=function(){function e(e){this.callback=e}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.callback))},e}(),c=function(e){function t(t,n){var r=e.call(this,t)||this;return r.add(new o["Subscription"](n)),r}return r["__extends"](t,e),t}(i["Subscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"find",(function(){return o})),n.d(t,"FindValueOperator",(function(){return s})),n.d(t,"FindValueSubscriber",(function(){return a}));var r=n(233),i=n(232);function o(e,t){if("function"!==typeof e)throw new TypeError("predicate is not a function");return function(n){return n.lift(new s(e,n,!1,t))}}var s=function(){function e(e,t,n,r){this.predicate=e,this.source=t,this.yieldIndex=n,this.thisArg=r}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.predicate,this.source,this.yieldIndex,this.thisArg))},e}(),a=function(e){function t(t,n,r,i,o){var s=e.call(this,t)||this;return s.predicate=n,s.source=r,s.yieldIndex=i,s.thisArg=o,s.index=0,s}return r["__extends"](t,e),t.prototype.notifyComplete=function(e){var t=this.destination;t.next(e),t.complete(),this.unsubscribe()},t.prototype._next=function(e){var t=this,n=t.predicate,r=t.thisArg,i=this.index++;try{var o=n.call(r||this,e,i,this.source);o&&this.notifyComplete(this.yieldIndex?i:e)}catch(s){this.destination.error(s)}},t.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)},t}(i["Subscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"findIndex",(function(){return i}));var r=n(365);function i(e,t){return function(n){return n.lift(new r["FindValueOperator"](e,n,!0,t))}}},function(e,t,n){"use strict";n.r(t),n.d(t,"first",(function(){return u}));var r=n(284),i=n(325),o=n(358),s=n(348),a=n(357),c=n(281);function u(e,t){var n=arguments.length>=2;return function(u){return u.pipe(e?Object(i["filter"])((function(t,n){return e(t,n,u)})):c["identity"],Object(o["take"])(1),n?Object(s["defaultIfEmpty"])(t):Object(a["throwIfEmpty"])((function(){return new r["EmptyError"]})))}}},function(e,t,n){"use strict";n.r(t),n.d(t,"ignoreElements",(function(){return o}));var r=n(233),i=n(232);function o(){return function(e){return e.lift(new s)}}var s=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new a(e))},e}(),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r["__extends"](t,e),t.prototype._next=function(e){},t}(i["Subscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"isEmpty",(function(){return o}));var r=n(233),i=n(232);function o(){return function(e){return e.lift(new s)}}var s=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new a(e))},e}(),a=function(e){function t(t){return e.call(this,t)||this}return r["__extends"](t,e),t.prototype.notifyComplete=function(e){var t=this.destination;t.next(e),t.complete()},t.prototype._next=function(e){this.notifyComplete(!1)},t.prototype._complete=function(){this.notifyComplete(!0)},t}(i["Subscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"last",(function(){return u}));var r=n(284),i=n(325),o=n(371),s=n(357),a=n(348),c=n(281);function u(e,t){var n=arguments.length>=2;return function(u){return u.pipe(e?Object(i["filter"])((function(t,n){return e(t,n,u)})):c["identity"],Object(o["takeLast"])(1),n?Object(a["defaultIfEmpty"])(t):Object(s["throwIfEmpty"])((function(){return new r["EmptyError"]})))}}},function(e,t,n){"use strict";n.r(t),n.d(t,"takeLast",(function(){return a}));var r=n(233),i=n(232),o=n(283),s=n(264);function a(e){return function(t){return 0===e?Object(s["empty"])():t.lift(new c(e))}}var c=function(){function e(e){if(this.total=e,this.total<0)throw new o["ArgumentOutOfRangeError"]}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.total))},e}(),u=function(e){function t(t,n){var r=e.call(this,t)||this;return r.total=n,r.ring=new Array,r.count=0,r}return r["__extends"](t,e),t.prototype._next=function(e){var t=this.ring,n=this.total,r=this.count++;if(t.length<n)t.push(e);else{var i=r%n;t[i]=e}},t.prototype._complete=function(){var e=this.destination,t=this.count;if(t>0)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,i=0;i<n;i++){var o=t++%n;e.next(r[o])}e.complete()},t}(i["Subscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"mapTo",(function(){return o}));var r=n(233),i=n(232);function o(e){return function(t){return t.lift(new s(e))}}var s=function(){function e(e){this.value=e}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.value))},e}(),a=function(e){function t(t,n){var r=e.call(this,t)||this;return r.value=n,r}return r["__extends"](t,e),t.prototype._next=function(e){this.destination.next(this.value)},t}(i["Subscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"materialize",(function(){return s}));var r=n(233),i=n(232),o=n(263);function s(){return function(e){return e.lift(new a)}}var a=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new c(e))},e}(),c=function(e){function t(t){return e.call(this,t)||this}return r["__extends"](t,e),t.prototype._next=function(e){this.destination.next(o["Notification"].createNext(e))},t.prototype._error=function(e){var t=this.destination;t.next(o["Notification"].createError(e)),t.complete()},t.prototype._complete=function(){var e=this.destination;e.next(o["Notification"].createComplete()),e.complete()},t}(i["Subscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"max",(function(){return i}));var r=n(375);function i(e){var t="function"===typeof e?function(t,n){return e(t,n)>0?t:n}:function(e,t){return e>t?e:t};return Object(r["reduce"])(t)}},function(e,t,n){"use strict";n.r(t),n.d(t,"reduce",(function(){return a}));var r=n(376),i=n(371),o=n(348),s=n(245);function a(e,t){return arguments.length>=2?function(n){return Object(s["pipe"])(Object(r["scan"])(e,t),Object(i["takeLast"])(1),Object(o["defaultIfEmpty"])(t))(n)}:function(t){return Object(s["pipe"])(Object(r["scan"])((function(t,n,r){return e(t,n,r+1)})),Object(i["takeLast"])(1))(t)}}},function(e,t,n){"use strict";n.r(t),n.d(t,"scan",(function(){return o}));var r=n(233),i=n(232);function o(e,t){var n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new s(e,t,n))}}var s=function(){function e(e,t,n){void 0===n&&(n=!1),this.accumulator=e,this.seed=t,this.hasSeed=n}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.accumulator,this.seed,this.hasSeed))},e}(),a=function(e){function t(t,n,r,i){var o=e.call(this,t)||this;return o.accumulator=n,o._seed=r,o.hasSeed=i,o.index=0,o}return r["__extends"](t,e),Object.defineProperty(t.prototype,"seed",{get:function(){return this._seed},set:function(e){this.hasSeed=!0,this._seed=e},enumerable:!0,configurable:!0}),t.prototype._next=function(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)},t.prototype._tryNext=function(e){var t,n=this.index++;try{t=this.accumulator(this.seed,e,n)}catch(r){this.destination.error(r)}this.seed=t,this.destination.next(t)},t}(i["Subscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"merge",(function(){return i}));var r=n(319);function i(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return t.lift.call(r["merge"].apply(void 0,[t].concat(e)))}}},function(e,t,n){"use strict";n.r(t),n.d(t,"mergeMapTo",(function(){return i}));var r=n(303);function i(e,t,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"===typeof t?Object(r["mergeMap"])((function(){return e}),t,n):("number"===typeof t&&(n=t),Object(r["mergeMap"])((function(){return e}),n))}},function(e,t,n){"use strict";n.r(t),n.d(t,"mergeScan",(function(){return a})),n.d(t,"MergeScanOperator",(function(){return c})),n.d(t,"MergeScanSubscriber",(function(){return u}));var r=n(233),i=n(291),o=n(290),s=n(292);function a(e,t,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),function(r){return r.lift(new c(e,t,n))}}var c=function(){function e(e,t,n){this.accumulator=e,this.seed=t,this.concurrent=n}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.accumulator,this.seed,this.concurrent))},e}(),u=function(e){function t(t,n,r,i){var o=e.call(this,t)||this;return o.accumulator=n,o.acc=r,o.concurrent=i,o.hasValue=!1,o.hasCompleted=!1,o.buffer=[],o.active=0,o.index=0,o}return r["__extends"](t,e),t.prototype._next=function(e){if(this.active<this.concurrent){var t=this.index++,n=this.destination,r=void 0;try{var i=this.accumulator;r=i(this.acc,e,t)}catch(o){return n.error(o)}this.active++,this._innerSub(r,e,t)}else this.buffer.push(e)},t.prototype._innerSub=function(e,t,n){var r=new s["InnerSubscriber"](this,void 0,void 0),o=this.destination;o.add(r),Object(i["subscribeToResult"])(this,e,t,n,r)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete()),this.unsubscribe()},t.prototype.notifyNext=function(e,t,n,r,i){var o=this.destination;this.acc=t,this.hasValue=!0,o.next(t)},t.prototype.notifyComplete=function(e){var t=this.buffer,n=this.destination;n.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())},t}(o["OuterSubscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"min",(function(){return i}));var r=n(375);function i(e){var t="function"===typeof e?function(t,n){return e(t,n)<0?t:n}:function(e,t){return e<t?e:t};return Object(r["reduce"])(t)}},function(e,t,n){"use strict";n.r(t),n.d(t,"multicast",(function(){return i})),n.d(t,"MulticastOperator",(function(){return o}));var r=n(247);function i(e,t){return function(n){var i;if(i="function"===typeof e?e:function(){return e},"function"===typeof t)return n.lift(new o(i,t));var s=Object.create(n,r["connectableObservableDescriptor"]);return s.source=n,s.subjectFactory=i,s}}var o=function(){function e(e,t){this.subjectFactory=e,this.selector=t}return e.prototype.call=function(e,t){var n=this.selector,r=this.subjectFactory(),i=n(r).subscribe(e);return i.add(t.subscribe(r)),i},e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"onErrorResumeNext",(function(){return u})),n.d(t,"onErrorResumeNextStatic",(function(){return f}));var r=n(233),i=n(304),o=n(239),s=n(290),a=n(292),c=n(291);function u(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 1===e.length&&Object(o["isArray"])(e[0])&&(e=e[0]),function(t){return t.lift(new d(e))}}function f(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=null;return 1===e.length&&Object(o["isArray"])(e[0])&&(e=e[0]),n=e.shift(),Object(i["from"])(n,null).lift(new d(e))}var d=function(){function e(e){this.nextSources=e}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.nextSources))},e}(),l=function(e){function t(t,n){var r=e.call(this,t)||this;return r.destination=t,r.nextSources=n,r}return r["__extends"](t,e),t.prototype.notifyError=function(e,t){this.subscribeToNextSource()},t.prototype.notifyComplete=function(e){this.subscribeToNextSource()},t.prototype._error=function(e){this.subscribeToNextSource(),this.unsubscribe()},t.prototype._complete=function(){this.subscribeToNextSource(),this.unsubscribe()},t.prototype.subscribeToNextSource=function(){var e=this.nextSources.shift();if(e){var t=new a["InnerSubscriber"](this,void 0,void 0),n=this.destination;n.add(t),Object(c["subscribeToResult"])(this,e,void 0,void 0,t)}else this.destination.complete()},t}(s["OuterSubscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"pairwise",(function(){return o}));var r=n(233),i=n(232);function o(){return function(e){return e.lift(new s)}}var s=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new a(e))},e}(),a=function(e){function t(t){var n=e.call(this,t)||this;return n.hasPrev=!1,n}return r["__extends"](t,e),t.prototype._next=function(e){var t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)},t}(i["Subscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"partition",(function(){return o}));var r=n(324),i=n(325);function o(e,t){return function(n){return[Object(i["filter"])(e,t)(n),Object(i["filter"])(Object(r["not"])(e,t))(n)]}}},function(e,t,n){"use strict";n.r(t),n.d(t,"pluck",(function(){return i}));var r=n(287);function i(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.length;if(0===n)throw new Error("list of properties cannot be empty.");return function(t){return Object(r["map"])(o(e,n))(t)}}function o(e,t){var n=function(n){for(var r=n,i=0;i<t;i++){var o=r[e[i]];if("undefined"===typeof o)return;r=o}return r};return n}},function(e,t,n){"use strict";n.r(t),n.d(t,"publish",(function(){return o}));var r=n(248),i=n(381);function o(e){return e?Object(i["multicast"])((function(){return new r["Subject"]}),e):Object(i["multicast"])(new r["Subject"])}},function(e,t,n){"use strict";n.r(t),n.d(t,"publishBehavior",(function(){return o}));var r=n(253),i=n(381);function o(e){return function(t){return Object(i["multicast"])(new r["BehaviorSubject"](e))(t)}}},function(e,t,n){"use strict";n.r(t),n.d(t,"publishLast",(function(){return o}));var r=n(271),i=n(381);function o(){return function(e){return Object(i["multicast"])(new r["AsyncSubject"])(e)}}},function(e,t,n){"use strict";n.r(t),n.d(t,"publishReplay",(function(){return o}));var r=n(254),i=n(381);function o(e,t,n,o){n&&"function"!==typeof n&&(o=n);var s="function"===typeof n?n:void 0,a=new r["ReplaySubject"](e,t,o);return function(e){return Object(i["multicast"])((function(){return a}),s)(e)}}},function(e,t,n){"use strict";n.r(t),n.d(t,"race",(function(){return o}));var r=n(239),i=n(326);function o(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return 1===e.length&&Object(r["isArray"])(e[0])&&(e=e[0]),t.lift.call(i["race"].apply(void 0,[t].concat(e)))}}},function(e,t,n){"use strict";n.r(t),n.d(t,"repeat",(function(){return s}));var r=n(233),i=n(232),o=n(264);function s(e){return void 0===e&&(e=-1),function(t){return 0===e?Object(o["empty"])():e<0?t.lift(new a(-1,t)):t.lift(new a(e-1,t))}}var a=function(){function e(e,t){this.count=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.count,this.source))},e}(),c=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.count=n,i.source=r,i}return r["__extends"](t,e),t.prototype.complete=function(){if(!this.isStopped){var t=this,n=t.source,r=t.count;if(0===r)return e.prototype.complete.call(this);r>-1&&(this.count=r-1),n.subscribe(this._unsubscribeAndRecycle())}},t}(i["Subscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"repeatWhen",(function(){return a}));var r=n(233),i=n(248),o=n(290),s=n(291);function a(e){return function(t){return t.lift(new c(e))}}var c=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.notifier,t))},e}(),u=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.notifier=n,i.source=r,i.sourceIsBeingSubscribedTo=!0,i}return r["__extends"](t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)},t.prototype.notifyComplete=function(t){if(!1===this.sourceIsBeingSubscribedTo)return e.prototype.complete.call(this)},t.prototype.complete=function(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries||this.subscribeToRetries(),!this.retriesSubscription||this.retriesSubscription.closed)return e.prototype.complete.call(this);this._unsubscribeAndRecycle(),this.notifications.next()}},t.prototype._unsubscribe=function(){var e=this,t=e.notifications,n=e.retriesSubscription;t&&(t.unsubscribe(),this.notifications=null),n&&(n.unsubscribe(),this.retriesSubscription=null),this.retries=null},t.prototype._unsubscribeAndRecycle=function(){var t=this._unsubscribe;return this._unsubscribe=null,e.prototype._unsubscribeAndRecycle.call(this),this._unsubscribe=t,this},t.prototype.subscribeToRetries=function(){var t;this.notifications=new i["Subject"];try{var n=this.notifier;t=n(this.notifications)}catch(r){return e.prototype.complete.call(this)}this.retries=t,this.retriesSubscription=Object(s["subscribeToResult"])(this,t)},t}(o["OuterSubscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"retry",(function(){return o}));var r=n(233),i=n(232);function o(e){return void 0===e&&(e=-1),function(t){return t.lift(new s(e,t))}}var s=function(){function e(e,t){this.count=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.count,this.source))},e}(),a=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.count=n,i.source=r,i}return r["__extends"](t,e),t.prototype.error=function(t){if(!this.isStopped){var n=this,r=n.source,i=n.count;if(0===i)return e.prototype.error.call(this,t);i>-1&&(this.count=i-1),r.subscribe(this._unsubscribeAndRecycle())}},t}(i["Subscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"retryWhen",(function(){return a}));var r=n(233),i=n(248),o=n(290),s=n(291);function a(e){return function(t){return t.lift(new c(e,t))}}var c=function(){function e(e,t){this.notifier=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.notifier,this.source))},e}(),u=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.notifier=n,i.source=r,i}return r["__extends"](t,e),t.prototype.error=function(t){if(!this.isStopped){var n=this.errors,r=this.retries,o=this.retriesSubscription;if(r)this.errors=null,this.retriesSubscription=null;else{n=new i["Subject"];try{var a=this.notifier;r=a(n)}catch(c){return e.prototype.error.call(this,c)}o=Object(s["subscribeToResult"])(this,r)}this._unsubscribeAndRecycle(),this.errors=n,this.retries=r,this.retriesSubscription=o,n.next(t)}},t.prototype._unsubscribe=function(){var e=this,t=e.errors,n=e.retriesSubscription;t&&(t.unsubscribe(),this.errors=null),n&&(n.unsubscribe(),this.retriesSubscription=null),this.retries=null},t.prototype.notifyNext=function(e,t,n,r,i){var o=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=o,this.source.subscribe(this)},t}(o["OuterSubscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"sample",(function(){return s}));var r=n(233),i=n(290),o=n(291);function s(e){return function(t){return t.lift(new a(e))}}var a=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){var n=new c(e),r=t.subscribe(n);return r.add(Object(o["subscribeToResult"])(n,this.notifier)),r},e}(),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hasValue=!1,t}return r["__extends"](t,e),t.prototype._next=function(e){this.value=e,this.hasValue=!0},t.prototype.notifyNext=function(e,t,n,r,i){this.emitValue()},t.prototype.notifyComplete=function(){this.emitValue()},t.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))},t}(i["OuterSubscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"sampleTime",(function(){return s}));var r=n(233),i=n(232),o=n(276);function s(e,t){return void 0===t&&(t=o["async"]),function(n){return n.lift(new a(e,t))}}var a=function(){function e(e,t){this.period=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.period,this.scheduler))},e}(),c=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.period=n,i.scheduler=r,i.hasValue=!1,i.add(r.schedule(u,n,{subscriber:i,period:n})),i}return r["__extends"](t,e),t.prototype._next=function(e){this.lastValue=e,this.hasValue=!0},t.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))},t}(i["Subscriber"]);function u(e){var t=e.subscriber,n=e.period;t.notifyNext(),this.schedule(e,n)}},function(e,t,n){"use strict";n.r(t),n.d(t,"sequenceEqual",(function(){return o})),n.d(t,"SequenceEqualOperator",(function(){return s})),n.d(t,"SequenceEqualSubscriber",(function(){return a}));var r=n(233),i=n(232);function o(e,t){return function(n){return n.lift(new s(e,t))}}var s=function(){function e(e,t){this.compareTo=e,this.comparator=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.compareTo,this.comparator))},e}(),a=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.compareTo=n,i.comparator=r,i._a=[],i._b=[],i._oneComplete=!1,i.destination.add(n.subscribe(new c(t,i))),i}return r["__extends"](t,e),t.prototype._next=function(e){this._oneComplete&&0===this._b.length?this.emit(!1):(this._a.push(e),this.checkValues())},t.prototype._complete=function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0,this.unsubscribe()},t.prototype.checkValues=function(){var e=this,t=e._a,n=e._b,r=e.comparator;while(t.length>0&&n.length>0){var i=t.shift(),o=n.shift(),s=!1;try{s=r?r(i,o):i===o}catch(a){this.destination.error(a)}s||this.emit(!1)}},t.prototype.emit=function(e){var t=this.destination;t.next(e),t.complete()},t.prototype.nextB=function(e){this._oneComplete&&0===this._a.length?this.emit(!1):(this._b.push(e),this.checkValues())},t.prototype.completeB=function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0},t}(i["Subscriber"]),c=function(e){function t(t,n){var r=e.call(this,t)||this;return r.parent=n,r}return r["__extends"](t,e),t.prototype._next=function(e){this.parent.nextB(e)},t.prototype._error=function(e){this.parent.error(e),this.unsubscribe()},t.prototype._complete=function(){this.parent.completeB(),this.unsubscribe()},t}(i["Subscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"share",(function(){return a}));var r=n(381),i=n(251),o=n(248);function s(){return new o["Subject"]}function a(){return function(e){return Object(i["refCount"])()(Object(r["multicast"])(s)(e))}}},function(e,t,n){"use strict";n.r(t),n.d(t,"shareReplay",(function(){return i}));var r=n(254);function i(e,t,n){var r;return r=e&&"object"===typeof e?e:{bufferSize:e,windowTime:t,refCount:!1,scheduler:n},function(e){return e.lift(o(r))}}function o(e){var t,n,i=e.bufferSize,o=void 0===i?Number.POSITIVE_INFINITY:i,s=e.windowTime,a=void 0===s?Number.POSITIVE_INFINITY:s,c=e.refCount,u=e.scheduler,f=0,d=!1,l=!1;return function(e){f++,t&&!d||(d=!1,t=new r["ReplaySubject"](o,a,u),n=e.subscribe({next:function(e){t.next(e)},error:function(e){d=!0,t.error(e)},complete:function(){l=!0,t.complete()}}));var i=t.subscribe(this);this.add((function(){f--,i.unsubscribe(),n&&!l&&c&&0===f&&(n.unsubscribe(),n=void 0,t=void 0)}))}}},function(e,t,n){"use strict";n.r(t),n.d(t,"single",(function(){return s}));var r=n(233),i=n(232),o=n(284);function s(e){return function(t){return t.lift(new a(e,t))}}var a=function(){function e(e,t){this.predicate=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.predicate,this.source))},e}(),c=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.predicate=n,i.source=r,i.seenValue=!1,i.index=0,i}return r["__extends"](t,e),t.prototype.applySingleValue=function(e){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=e)},t.prototype._next=function(e){var t=this.index++;this.predicate?this.tryNext(e,t):this.applySingleValue(e)},t.prototype.tryNext=function(e,t){try{this.predicate(e,t,this.source)&&this.applySingleValue(e)}catch(n){this.destination.error(n)}},t.prototype._complete=function(){var e=this.destination;this.index>0?(e.next(this.seenValue?this.singleValue:void 0),e.complete()):e.error(new o["EmptyError"])},t}(i["Subscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"skip",(function(){return o}));var r=n(233),i=n(232);function o(e){return function(t){return t.lift(new s(e))}}var s=function(){function e(e){this.total=e}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.total))},e}(),a=function(e){function t(t,n){var r=e.call(this,t)||this;return r.total=n,r.count=0,r}return r["__extends"](t,e),t.prototype._next=function(e){++this.count>this.total&&this.destination.next(e)},t}(i["Subscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"skipLast",(function(){return s}));var r=n(233),i=n(232),o=n(283);function s(e){return function(t){return t.lift(new a(e))}}var a=function(){function e(e){if(this._skipCount=e,this._skipCount<0)throw new o["ArgumentOutOfRangeError"]}return e.prototype.call=function(e,t){return 0===this._skipCount?t.subscribe(new i["Subscriber"](e)):t.subscribe(new c(e,this._skipCount))},e}(),c=function(e){function t(t,n){var r=e.call(this,t)||this;return r._skipCount=n,r._count=0,r._ring=new Array(n),r}return r["__extends"](t,e),t.prototype._next=function(e){var t=this._skipCount,n=this._count++;if(n<t)this._ring[n]=e;else{var r=n%t,i=this._ring,o=i[r];i[r]=e,this.destination.next(o)}},t}(i["Subscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"skipUntil",(function(){return a}));var r=n(233),i=n(290),o=n(292),s=n(291);function a(e){return function(t){return t.lift(new c(e))}}var c=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.notifier))},e}(),u=function(e){function t(t,n){var r=e.call(this,t)||this;r.hasValue=!1;var i=new o["InnerSubscriber"](r,void 0,void 0);return r.add(i),r.innerSubscription=i,Object(s["subscribeToResult"])(r,n,void 0,void 0,i),r}return r["__extends"](t,e),t.prototype._next=function(t){this.hasValue&&e.prototype._next.call(this,t)},t.prototype.notifyNext=function(e,t,n,r,i){this.hasValue=!0,this.innerSubscription&&this.innerSubscription.unsubscribe()},t.prototype.notifyComplete=function(){},t}(i["OuterSubscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"skipWhile",(function(){return o}));var r=n(233),i=n(232);function o(e){return function(t){return t.lift(new s(e))}}var s=function(){function e(e){this.predicate=e}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.predicate))},e}(),a=function(e){function t(t,n){var r=e.call(this,t)||this;return r.predicate=n,r.skipping=!0,r.index=0,r}return r["__extends"](t,e),t.prototype._next=function(e){var t=this.destination;this.skipping&&this.tryCallPredicate(e),this.skipping||t.next(e)},t.prototype.tryCallPredicate=function(e){try{var t=this.predicate(e,this.index++);this.skipping=Boolean(t)}catch(n){this.destination.error(n)}},t}(i["Subscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"startWith",(function(){return o}));var r=n(300),i=n(266);function o(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[e.length-1];return Object(i["isScheduler"])(n)?(e.pop(),function(t){return Object(r["concat"])(e,t,n)}):function(t){return Object(r["concat"])(e,t)}}},function(e,t,n){"use strict";n.r(t),n.d(t,"subscribeOn",(function(){return i}));var r=n(407);function i(e,t){return void 0===t&&(t=0),function(n){return n.lift(new o(e,t))}}var o=function(){function e(e,t){this.scheduler=e,this.delay=t}return e.prototype.call=function(e,t){return new r["SubscribeOnObservable"](t,this.delay,this.scheduler).subscribe(e)},e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"SubscribeOnObservable",(function(){return a}));var r=n(233),i=n(230),o=n(272),s=n(318),a=function(e){function t(t,n,r){void 0===n&&(n=0),void 0===r&&(r=o["asap"]);var i=e.call(this)||this;return i.source=t,i.delayTime=n,i.scheduler=r,(!Object(s["isNumeric"])(n)||n<0)&&(i.delayTime=0),r&&"function"===typeof r.schedule||(i.scheduler=o["asap"]),i}return r["__extends"](t,e),t.create=function(e,n,r){return void 0===n&&(n=0),void 0===r&&(r=o["asap"]),new t(e,n,r)},t.dispatch=function(e){var t=e.source,n=e.subscriber;return this.add(t.subscribe(n))},t.prototype._subscribe=function(e){var n=this.delayTime,r=this.source,i=this.scheduler;return i.schedule(t.dispatch,n,{source:r,subscriber:e})},t}(i["Observable"])},function(e,t,n){"use strict";n.r(t),n.d(t,"switchAll",(function(){return o}));var r=n(409),i=n(281);function o(){return Object(r["switchMap"])(i["identity"])}},function(e,t,n){"use strict";n.r(t),n.d(t,"switchMap",(function(){return u}));var r=n(233),i=n(290),o=n(292),s=n(291),a=n(287),c=n(304);function u(e,t){return"function"===typeof t?function(n){return n.pipe(u((function(n,r){return Object(c["from"])(e(n,r)).pipe(Object(a["map"])((function(e,i){return t(n,e,r,i)})))})))}:function(t){return t.lift(new f(e))}}var f=function(){function e(e){this.project=e}return e.prototype.call=function(e,t){return t.subscribe(new d(e,this.project))},e}(),d=function(e){function t(t,n){var r=e.call(this,t)||this;return r.project=n,r.index=0,r}return r["__extends"](t,e),t.prototype._next=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this._innerSub(t,e,n)},t.prototype._innerSub=function(e,t,n){var r=this.innerSubscription;r&&r.unsubscribe();var i=new o["InnerSubscriber"](this,void 0,void 0),a=this.destination;a.add(i),this.innerSubscription=Object(s["subscribeToResult"])(this,e,t,n,i)},t.prototype._complete=function(){var t=this.innerSubscription;t&&!t.closed||e.prototype._complete.call(this),this.unsubscribe()},t.prototype._unsubscribe=function(){this.innerSubscription=null},t.prototype.notifyComplete=function(t){var n=this.destination;n.remove(t),this.innerSubscription=null,this.isStopped&&e.prototype._complete.call(this)},t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},t}(i["OuterSubscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"switchMapTo",(function(){return i}));var r=n(409);function i(e,t){return t?Object(r["switchMap"])((function(){return e}),t):Object(r["switchMap"])((function(){return e}))}},function(e,t,n){"use strict";n.r(t),n.d(t,"takeUntil",(function(){return s}));var r=n(233),i=n(290),o=n(291);function s(e){return function(t){return t.lift(new a(e))}}var a=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){var n=new c(e),r=Object(o["subscribeToResult"])(n,this.notifier);return r&&!n.seenValue?(n.add(r),t.subscribe(n)):n},e}(),c=function(e){function t(t){var n=e.call(this,t)||this;return n.seenValue=!1,n}return r["__extends"](t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.seenValue=!0,this.complete()},t.prototype.notifyComplete=function(){},t}(i["OuterSubscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"takeWhile",(function(){return o}));var r=n(233),i=n(232);function o(e,t){return void 0===t&&(t=!1),function(n){return n.lift(new s(e,t))}}var s=function(){function e(e,t){this.predicate=e,this.inclusive=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.predicate,this.inclusive))},e}(),a=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.predicate=n,i.inclusive=r,i.index=0,i}return r["__extends"](t,e),t.prototype._next=function(e){var t,n=this.destination;try{t=this.predicate(e,this.index++)}catch(r){return void n.error(r)}this.nextOrComplete(e,t)},t.prototype.nextOrComplete=function(e,t){var n=this.destination;Boolean(t)?n.next(e):(this.inclusive&&n.next(e),n.complete())},t}(i["Subscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"tap",(function(){return a}));var r=n(233),i=n(232),o=n(246),s=n(234);function a(e,t,n){return function(r){return r.lift(new c(e,t,n))}}var c=function(){function e(e,t,n){this.nextOrObserver=e,this.error=t,this.complete=n}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.nextOrObserver,this.error,this.complete))},e}(),u=function(e){function t(t,n,r,i){var a=e.call(this,t)||this;return a._tapNext=o["noop"],a._tapError=o["noop"],a._tapComplete=o["noop"],a._tapError=r||o["noop"],a._tapComplete=i||o["noop"],Object(s["isFunction"])(n)?(a._context=a,a._tapNext=n):n&&(a._context=n,a._tapNext=n.next||o["noop"],a._tapError=n.error||o["noop"],a._tapComplete=n.complete||o["noop"]),a}return r["__extends"](t,e),t.prototype._next=function(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)},t.prototype._error=function(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)},t.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()},t}(i["Subscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"defaultThrottleConfig",(function(){return s})),n.d(t,"throttle",(function(){return a}));var r=n(233),i=n(290),o=n(291),s={leading:!0,trailing:!1};function a(e,t){return void 0===t&&(t=s),function(n){return n.lift(new c(e,t.leading,t.trailing))}}var c=function(){function e(e,t,n){this.durationSelector=e,this.leading=t,this.trailing=n}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.durationSelector,this.leading,this.trailing))},e}(),u=function(e){function t(t,n,r,i){var o=e.call(this,t)||this;return o.destination=t,o.durationSelector=n,o._leading=r,o._trailing=i,o._hasValue=!1,o}return r["__extends"](t,e),t.prototype._next=function(e){this._hasValue=!0,this._sendValue=e,this._throttled||(this._leading?this.send():this.throttle(e))},t.prototype.send=function(){var e=this,t=e._hasValue,n=e._sendValue;t&&(this.destination.next(n),this.throttle(n)),this._hasValue=!1,this._sendValue=null},t.prototype.throttle=function(e){var t=this.tryDurationSelector(e);t&&this.add(this._throttled=Object(o["subscribeToResult"])(this,t))},t.prototype.tryDurationSelector=function(e){try{return this.durationSelector(e)}catch(t){return this.destination.error(t),null}},t.prototype.throttlingDone=function(){var e=this,t=e._throttled,n=e._trailing;t&&t.unsubscribe(),this._throttled=null,n&&this.send()},t.prototype.notifyNext=function(e,t,n,r,i){this.throttlingDone()},t.prototype.notifyComplete=function(){this.throttlingDone()},t}(i["OuterSubscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"throttleTime",(function(){return a}));var r=n(233),i=n(232),o=n(276),s=n(414);function a(e,t,n){return void 0===t&&(t=o["async"]),void 0===n&&(n=s["defaultThrottleConfig"]),function(r){return r.lift(new c(e,t,n.leading,n.trailing))}}var c=function(){function e(e,t,n,r){this.duration=e,this.scheduler=t,this.leading=n,this.trailing=r}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.duration,this.scheduler,this.leading,this.trailing))},e}(),u=function(e){function t(t,n,r,i,o){var s=e.call(this,t)||this;return s.duration=n,s.scheduler=r,s.leading=i,s.trailing=o,s._hasTrailingValue=!1,s._trailingValue=null,s}return r["__extends"](t,e),t.prototype._next=function(e){this.throttled?this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(f,this.duration,{subscriber:this})),this.leading?this.destination.next(e):this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0))},t.prototype._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},t.prototype.clearThrottle=function(){var e=this.throttled;e&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),e.unsubscribe(),this.remove(e),this.throttled=null)},t}(i["Subscriber"]);function f(e){var t=e.subscriber;t.clearThrottle()}},function(e,t,n){"use strict";n.r(t),n.d(t,"timeInterval",(function(){return a})),n.d(t,"TimeInterval",(function(){return c}));var r=n(276),i=n(376),o=n(311),s=n(287);function a(e){return void 0===e&&(e=r["async"]),function(t){return Object(o["defer"])((function(){return t.pipe(Object(i["scan"])((function(t,n){var r=t.current;return{value:n,current:e.now(),last:r}}),{current:e.now(),value:void 0,last:void 0}),Object(s["map"])((function(e){var t=e.current,n=e.last,r=e.value;return new c(r,t-n)})))}))}}var c=function(){function e(e,t){this.value=e,this.interval=t}return e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"timeout",(function(){return a}));var r=n(276),i=n(285),o=n(418),s=n(270);function a(e,t){return void 0===t&&(t=r["async"]),Object(o["timeoutWith"])(e,Object(s["throwError"])(new i["TimeoutError"]),t)}},function(e,t,n){"use strict";n.r(t),n.d(t,"timeoutWith",(function(){return c}));var r=n(233),i=n(276),o=n(350),s=n(290),a=n(291);function c(e,t,n){return void 0===n&&(n=i["async"]),function(r){var i=Object(o["isDate"])(e),s=i?+e-n.now():Math.abs(e);return r.lift(new u(s,i,t,n))}}var u=function(){function e(e,t,n,r){this.waitFor=e,this.absoluteTimeout=t,this.withObservable=n,this.scheduler=r}return e.prototype.call=function(e,t){return t.subscribe(new f(e,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},e}(),f=function(e){function t(t,n,r,i,o){var s=e.call(this,t)||this;return s.absoluteTimeout=n,s.waitFor=r,s.withObservable=i,s.scheduler=o,s.action=null,s.scheduleTimeout(),s}return r["__extends"](t,e),t.dispatchTimeout=function(e){var t=e.withObservable;e._unsubscribeAndRecycle(),e.add(Object(a["subscribeToResult"])(e,t))},t.prototype.scheduleTimeout=function(){var e=this.action;e?this.action=e.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(t.dispatchTimeout,this.waitFor,this))},t.prototype._next=function(t){this.absoluteTimeout||this.scheduleTimeout(),e.prototype._next.call(this,t)},t.prototype._unsubscribe=function(){this.action=null,this.scheduler=null,this.withObservable=null},t}(s["OuterSubscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"timestamp",(function(){return o})),n.d(t,"Timestamp",(function(){return s}));var r=n(276),i=n(287);function o(e){return void 0===e&&(e=r["async"]),Object(i["map"])((function(t){return new s(t,e.now())}))}var s=function(){function e(e,t){this.value=e,this.timestamp=t}return e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"toArray",(function(){return o}));var r=n(375);function i(e,t,n){return 0===n?[t]:(e.push(t),e)}function o(){return Object(r["reduce"])(i,[])}},function(e,t,n){"use strict";n.r(t),n.d(t,"window",(function(){return a}));var r=n(233),i=n(248),o=n(290),s=n(291);function a(e){return function(t){return t.lift(new c(e))}}var c=function(){function e(e){this.windowBoundaries=e}return e.prototype.call=function(e,t){var n=new u(e),r=t.subscribe(n);return r.closed||n.add(Object(s["subscribeToResult"])(n,this.windowBoundaries)),r},e}(),u=function(e){function t(t){var n=e.call(this,t)||this;return n.window=new i["Subject"],t.next(n.window),n}return r["__extends"](t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.openWindow()},t.prototype.notifyError=function(e,t){this._error(e)},t.prototype.notifyComplete=function(e){this._complete()},t.prototype._next=function(e){this.window.next(e)},t.prototype._error=function(e){this.window.error(e),this.destination.error(e)},t.prototype._complete=function(){this.window.complete(),this.destination.complete()},t.prototype._unsubscribe=function(){this.window=null},t.prototype.openWindow=function(){var e=this.window;e&&e.complete();var t=this.destination,n=this.window=new i["Subject"];t.next(n)},t}(o["OuterSubscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"windowCount",(function(){return s}));var r=n(233),i=n(232),o=n(248);function s(e,t){return void 0===t&&(t=0),function(n){return n.lift(new a(e,t))}}var a=function(){function e(e,t){this.windowSize=e,this.startWindowEvery=t}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.windowSize,this.startWindowEvery))},e}(),c=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.destination=t,i.windowSize=n,i.startWindowEvery=r,i.windows=[new o["Subject"]],i.count=0,t.next(i.windows[0]),i}return r["__extends"](t,e),t.prototype._next=function(e){for(var t=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,n=this.destination,r=this.windowSize,i=this.windows,s=i.length,a=0;a<s&&!this.closed;a++)i[a].next(e);var c=this.count-r+1;if(c>=0&&c%t===0&&!this.closed&&i.shift().complete(),++this.count%t===0&&!this.closed){var u=new o["Subject"];i.push(u),n.next(u)}},t.prototype._error=function(e){var t=this.windows;if(t)while(t.length>0&&!this.closed)t.shift().error(e);this.destination.error(e)},t.prototype._complete=function(){var e=this.windows;if(e)while(e.length>0&&!this.closed)e.shift().complete();this.destination.complete()},t.prototype._unsubscribe=function(){this.count=0,this.windows=null},t}(i["Subscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"windowTime",(function(){return u}));var r=n(233),i=n(248),o=n(276),s=n(232),a=n(318),c=n(266);function u(e){var t=o["async"],n=null,r=Number.POSITIVE_INFINITY;return Object(c["isScheduler"])(arguments[3])&&(t=arguments[3]),Object(c["isScheduler"])(arguments[2])?t=arguments[2]:Object(a["isNumeric"])(arguments[2])&&(r=arguments[2]),Object(c["isScheduler"])(arguments[1])?t=arguments[1]:Object(a["isNumeric"])(arguments[1])&&(n=arguments[1]),function(i){return i.lift(new f(e,n,r,t))}}var f=function(){function e(e,t,n,r){this.windowTimeSpan=e,this.windowCreationInterval=t,this.maxWindowSize=n,this.scheduler=r}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))},e}(),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._numberOfNextedValues=0,t}return r["__extends"](t,e),t.prototype.next=function(t){this._numberOfNextedValues++,e.prototype.next.call(this,t)},Object.defineProperty(t.prototype,"numberOfNextedValues",{get:function(){return this._numberOfNextedValues},enumerable:!0,configurable:!0}),t}(i["Subject"]),l=function(e){function t(t,n,r,i,o){var s=e.call(this,t)||this;s.destination=t,s.windowTimeSpan=n,s.windowCreationInterval=r,s.maxWindowSize=i,s.scheduler=o,s.windows=[];var a=s.openWindow();if(null!==r&&r>=0){var c={subscriber:s,window:a,context:null},u={windowTimeSpan:n,windowCreationInterval:r,subscriber:s,scheduler:o};s.add(o.schedule(m,n,c)),s.add(o.schedule(h,r,u))}else{var f={subscriber:s,window:a,windowTimeSpan:n};s.add(o.schedule(p,n,f))}return s}return r["__extends"](t,e),t.prototype._next=function(e){for(var t=this.windows,n=t.length,r=0;r<n;r++){var i=t[r];i.closed||(i.next(e),i.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(i))}},t.prototype._error=function(e){var t=this.windows;while(t.length>0)t.shift().error(e);this.destination.error(e)},t.prototype._complete=function(){var e=this.windows;while(e.length>0){var t=e.shift();t.closed||t.complete()}this.destination.complete()},t.prototype.openWindow=function(){var e=new d;this.windows.push(e);var t=this.destination;return t.next(e),e},t.prototype.closeWindow=function(e){e.complete();var t=this.windows;t.splice(t.indexOf(e),1)},t}(s["Subscriber"]);function p(e){var t=e.subscriber,n=e.windowTimeSpan,r=e.window;r&&t.closeWindow(r),e.window=t.openWindow(),this.schedule(e,n)}function h(e){var t=e.windowTimeSpan,n=e.subscriber,r=e.scheduler,i=e.windowCreationInterval,o=n.openWindow(),s=this,a={action:s,subscription:null},c={subscriber:n,window:o,context:a};a.subscription=r.schedule(m,t,c),s.add(a.subscription),s.schedule(e,i)}function m(e){var t=e.subscriber,n=e.window,r=e.context;r&&r.action&&r.subscription&&r.action.remove(r.subscription),t.closeWindow(n)}},function(e,t,n){"use strict";n.r(t),n.d(t,"windowToggle",(function(){return c}));var r=n(233),i=n(248),o=n(238),s=n(290),a=n(291);function c(e,t){return function(n){return n.lift(new u(e,t))}}var u=function(){function e(e,t){this.openings=e,this.closingSelector=t}return e.prototype.call=function(e,t){return t.subscribe(new f(e,this.openings,this.closingSelector))},e}(),f=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.openings=n,i.closingSelector=r,i.contexts=[],i.add(i.openSubscription=Object(a["subscribeToResult"])(i,n,n)),i}return r["__extends"](t,e),t.prototype._next=function(e){var t=this.contexts;if(t)for(var n=t.length,r=0;r<n;r++)t[r].window.next(e)},t.prototype._error=function(t){var n=this.contexts;if(this.contexts=null,n){var r=n.length,i=-1;while(++i<r){var o=n[i];o.window.error(t),o.subscription.unsubscribe()}}e.prototype._error.call(this,t)},t.prototype._complete=function(){var t=this.contexts;if(this.contexts=null,t){var n=t.length,r=-1;while(++r<n){var i=t[r];i.window.complete(),i.subscription.unsubscribe()}}e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.contexts;if(this.contexts=null,e){var t=e.length,n=-1;while(++n<t){var r=e[n];r.window.unsubscribe(),r.subscription.unsubscribe()}}},t.prototype.notifyNext=function(e,t,n,r,s){if(e===this.openings){var c=void 0;try{var u=this.closingSelector;c=u(t)}catch(h){return this.error(h)}var f=new i["Subject"],d=new o["Subscription"],l={window:f,subscription:d};this.contexts.push(l);var p=Object(a["subscribeToResult"])(this,c,l);p.closed?this.closeWindow(this.contexts.length-1):(p.context=l,d.add(p)),this.destination.next(f)}else this.closeWindow(this.contexts.indexOf(e))},t.prototype.notifyError=function(e){this.error(e)},t.prototype.notifyComplete=function(e){e!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(e.context))},t.prototype.closeWindow=function(e){if(-1!==e){var t=this.contexts,n=t[e],r=n.window,i=n.subscription;t.splice(e,1),r.complete(),i.unsubscribe()}},t}(s["OuterSubscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"windowWhen",(function(){return a}));var r=n(233),i=n(248),o=n(290),s=n(291);function a(e){return function(t){return t.lift(new c(e))}}var c=function(){function e(e){this.closingSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.closingSelector))},e}(),u=function(e){function t(t,n){var r=e.call(this,t)||this;return r.destination=t,r.closingSelector=n,r.openWindow(),r}return r["__extends"](t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.openWindow(i)},t.prototype.notifyError=function(e,t){this._error(e)},t.prototype.notifyComplete=function(e){this.openWindow(e)},t.prototype._next=function(e){this.window.next(e)},t.prototype._error=function(e){this.window.error(e),this.destination.error(e),this.unsubscribeClosingNotification()},t.prototype._complete=function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()},t.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()},t.prototype.openWindow=function(e){void 0===e&&(e=null),e&&(this.remove(e),e.unsubscribe());var t=this.window;t&&t.complete();var n,r=this.window=new i["Subject"];this.destination.next(r);try{var o=this.closingSelector;n=o()}catch(a){return this.destination.error(a),void this.window.error(a)}this.add(this.closingNotification=Object(s["subscribeToResult"])(this,n))},t}(o["OuterSubscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"withLatestFrom",(function(){return s}));var r=n(233),i=n(290),o=n(291);function s(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){var n;"function"===typeof e[e.length-1]&&(n=e.pop());var r=e;return t.lift(new a(r,n))}}var a=function(){function e(e,t){this.observables=e,this.project=t}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.observables,this.project))},e}(),c=function(e){function t(t,n,r){var i=e.call(this,t)||this;i.observables=n,i.project=r,i.toRespond=[];var s=n.length;i.values=new Array(s);for(var a=0;a<s;a++)i.toRespond.push(a);for(a=0;a<s;a++){var c=n[a];i.add(Object(o["subscribeToResult"])(i,c,c,a))}return i}return r["__extends"](t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.values[n]=t;var o=this.toRespond;if(o.length>0){var s=o.indexOf(n);-1!==s&&o.splice(s,1)}},t.prototype.notifyComplete=function(){},t.prototype._next=function(e){if(0===this.toRespond.length){var t=[e].concat(this.values);this.project?this._tryProject(t):this.destination.next(t)}},t.prototype._tryProject=function(e){var t;try{t=this.project.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)},t}(i["OuterSubscriber"])},function(e,t,n){"use strict";n.r(t),n.d(t,"zip",(function(){return i}));var r=n(330);function i(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return t.lift.call(r["zip"].apply(void 0,[t].concat(e)))}}},function(e,t,n){"use strict";n.r(t),n.d(t,"zipAll",(function(){return i}));var r=n(330);function i(e){return function(t){return t.lift(new r["ZipOperator"](e))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(72),i=c(r),o=n(229),s=n(146),a=c(s);function c(e){return e&&e.__esModule?e:{default:e}}function u(e,t,n){this.mgr=e,this.confrId=t,f.apply(this),this.subject=new o.Subject,this.onRemoteStream=n}function f(){i.default.extend(this,{subscribe:function(e,t,n){return this.subject.subscribe(e,t,n)}},{onMeExit:function(e,t){this.mgr._onExit(this.confrId,e,t),this.mgr.upload_stats&&this.mgr.upload_stats.upload_event({event:1,reason:e,sessionId:this._session._sessionId})},onAddMember:function(e){if(this.mgr.onMemberJoin(e,this.confrId),this.mgr.upload_stats){var t=e.role,n=e.memName,r=e.id;this.mgr.upload_stats.upload_event({event:10,role:t,addMemName:n,addMemId:r})}},onRemoveMember:function(e,t){if(this.mgr.onMemberLeave(e,t,this.confrId),this.mgr.upload_stats){var n=e.role,r=e.memName,i=e.id;this.mgr.upload_stats.upload_event({event:11,role:n,removeMemName:r,removeMemId:i})}},onAddStream:function(e){if(0!=e.id&&(e.located()||this.onRemoteStream&&this.onRemoteStream(e),this.mgr.streamBindVideo(e,void 0,this.confrId),this.mgr._onAddMemberStream(e,this.confrId),!e.located()&&this.mgr.upload_stats)){var t=e.id,n=e.voff,r=e.aoff,i=e.type,o=e.memId,s=e.memName;this.mgr.upload_stats.upload_event({event:12,sId:t,voff:n,aoff:r,streamType:i,addMemId:o,addMemName:s})}},onRemoveStream:function(e){if(0!=e.id){var t=this.mgr._confr(this.confrId);t&&e&&e.located()&&(t.av&&t.av.id===e.id&&(t.av=void 0),t.desktop&&t.desktop.id===e.id&&(t.desktop=void 0));var n=i.default.removeAttribute(this.mgr._videos,e.id);if(this.mgr._onRemoveMemberStream(e,this.confrId),n&&this.mgr.unloadVideo(e.owner,e,n),!e.located()&&this.mgr.upload_stats){var r=e.id,o=e.type,s=e.memId,a=e.memName;this.mgr.upload_stats.upload_event({event:13,sId:r,streamType:o,removeMemId:s,removeMemName:a})}}},onUpdateStream:function(e,t){if(0!=e.id){var n=this,r=this.mgr._videos[e.id];r&&(t&&t.ifMediaStream((function(e){r&&attachMediaStream(r,e),r&&r.hasAttribute("flow")&&n.mgr.onMediaTransmission(r,(function(e,t,n,i){(0,a.default)(r).trigger("onMediaTransmission",[e,t,n,i])}))})),e.aoff?r.setAttribute("aoff","aoff"):r.removeAttribute("aoff"),e.voff?r.setAttribute("voff","voff"):r.removeAttribute("voff"));var i={video:!e.voff,audio:!e.aoff};t&&t.ifVoff((function(t){i||(i={}),i.video=!t,e.located()||(i.video=e.subArgs?e.subArgs.subSVideo:!e.voff)})),t&&t.ifAoff((function(t){i||(i={}),i.audio=!t,e.located()||(i.audio=e.subArgs?e.subArgs.subSAudio:!e.aoff,2===e.type&&(i.audio=!0))})),i&&this.mgr._onMemberMediaChanaged(e.owner,e,i,this.confrId),i&&this.mgr._onUpdateMemberStream(e,i,this.confrId)}},onNetworkWeak:function(){},onNotSupportPublishVideoCodecs:function(e){this.mgr._onNotSupportMemberPublishVideoCodecs(e,this.confrId)},onRecvRemoteMessage:function(e,t){this.mgr._onRecvRemoteMessage(e,t,this.confrId)},onSoundChanage:function(e,t,n){this.mgr._onMemberSoundChanaged(e,t,n,this.confrId)},onTalking:function(e,t,n){this.mgr._onTalking(e,t,n,this.confrId)},onRoleUpdate:function(e,t){var n=this.mgr._confrs[this.confrId];t&&(n.roleToken=t),n.role=e,e==this.mgr.Role.AUDIENCE&&(n.av&&this.mgr.hungup(n.av),n.desktop&&this.mgr.hungup(n.desktop)),this.mgr._onRoleUpdated(e,this.confrId),this.mgr.upload_stats&&this.mgr.upload_stats.upload_event({event:21,role:e,sessionId:this._session._sessionId})},onNotifyEvent:function(e){var t=this;try{if(e instanceof emedia.event.ICEChanage){var n=e.webrtc,r=e.state;i.default.forEach(t._cacheStreams,(function(e,o){if(o.rtcId==n.getRtcId()){var s=i.default.extend({},o),a=i.default.extend({},o.owner);t.mgr._onStreamIceStateChanged(a,s,r,t.confrId)}}))}}finally{t.subject.next(e)}}})}t.default=u},function(e,t,n){"use strict";var r=n(144),i=o(r);function o(e){return e&&e.__esModule?e:{default:e}}var s=n(72),a=s.tagLogger("PannelVideo"),c=n(431),u=n(432),f=(n(221),n(222)),d=n(433);function l(e){l._overrideCount++,l.overrideObj!==e&&(l.overrideObj=e,p.override=e.listeners.onRemoveMember,p.overrideService=e,e.listeners.onRemoveMember=p)}function p(e,t){try{var n=e&&e.id&&I(p.overrideService,e.id);n&&n.length&&s.forEach(n,(function(t,n){a.warn("Remove member. free remote controller. it is ",n.id,n._ctrlStream.id,n._controller.memName,e.id),n._free(),n._callbacks&&n._callbacks.onRemoteFreeControl&&n._callbacks.onRemoteFreeControl(n._ctrlStream,n._controller,n._cId)}))}finally{p.override&&p.override.apply(this,arguments)}}function h(e){h._overrideCount++,h.overrideObj!==e&&(h.overrideObj=e,v.override=e.listeners.onRemoveStream,v.overrideService=e,e.listeners.onRemoveStream=v)}function m(e){}function v(e){g(v.overrideService,e),v.override&&v.override.apply(this,arguments)}function g(e,t){N(e,t.id);var n=T(e,t);n&&s.forEach(n,(function(e,t){t._free&&t._free()})),s.removeAttribute(e.current.__remoteControls,t.id)}function y(e){if(y._overrideCount++,y.overrideObj!==e){y.overrideObj=e;var t=e.onHungup;e.onHungup=function(n){g(e,n),t&&t.apply(this,arguments)}.bind(e)}}function b(e,t){if(b._overrideCount++,b.overrideObj!==e){b.overrideObj=e;var n=e._onRemotePannelControl;e._onRemotePannelControl=function(e){O(this,e,!1,t),n&&n.apply(this,arguments)}.bind(e)}}function _(e,t,n){var r=[];n&&s.forEach(n.actions,(function(e,t){t.xy&&r.push({x:Math.round(1e4*t.xy.x),y:Math.round(1e4*t.xy.y),oper:t.oper,btn:t.btn,sn:t.sn,_time:t._time}),t.xy||r.push({oper:t.oper,btn:t.btn,sn:t.sn,_time:t._time})}));var o={op2:30,evt:0,streamId:t.id,actions:r,cId:n.cId};return e.current.newMessage({op:1002,memId:t.owner.id,arg:(0,i.default)(o),_reqOps:[100230]})}function w(e){"string"===typeof e.arg&&(e.arg=JSON.parse(e.arg));var t=e.arg,n=[],r=[];t&&t.actions&&s.forEach(t.actions,(function(e,t){void 0!==t.x&&void 0!==t.y&&n.push({xy:{x:t.x/1e4,y:t.y/1e4},oper:t.oper,btn:t.btn,sn:t.sn,_time:t._time}),(void 0===t.x||void 0===t.y)&&r.push({oper:t.oper,btn:t.btn,sn:t.sn,_time:t._time})})),t.mouse=n,t.keyboard=r}l._overrideCount=0,h._overrideCount=0,y._overrideCount=0,b._overrideCount=0;var S=0,x=s.prototypeExtend({__init__:function(){this.id=S++},accept:function(e,t){var n=this;if(n.hasOtherControl())throw n.busy(),a.error("Other has been controled."),"Other has been controled.";var r=!1,i=T(this._service,this._ctrlStream,this._controller);if(i&&s.forEach(i,(function(e,t){t.id<n.id?t._free():r=!0})),r)n._free();else{var o=this._service.current.__remoteControls||(this._service.current.__remoteControls={});o[n.id]=n,V(this,e,t),C(this._service,this._reqevt,0)}},controlling:function(){var e=this,t=[],n=T(this._service,this._ctrlStream);return n&&s.forEach(n,(function(n,r){r._controller.memName===e._controller.memName&&t.push(r)})),t&&t.length?t:void 0},hasOtherControl:function(){var e=this,t=!1,n=T(this._service,this._ctrlStream);return n&&s.forEach(n,(function(n,r){r._controller.memName!=e._controller.memName&&(t=!0)})),t},busy:function(){C(this._service,this._reqevt,-403)},reject:function(){C(this._service,this._reqevt,-402)},_free:function(){s.removeAttribute(this._service.current.__remoteControls,this.id)},forceDisconnect:function(){var e=T(this._service,this._ctrlStream);e&&s.forEach(e,(function(e,t){t._free&&t._free()})),a.info("remote control force disconnect")}});function C(e,t,n){e.current.message({op:1001,tsxId:t.tsxId,memId:t.memId,arg:(0,i.default)({cId:t.arg.cId}),result:n}).post()}function E(e,t){C(e,t,-405)}function I(e,t,n){var r=[];return e.current.__remoteControls&&s.forEach(e.current.__remoteControls,(function(e,i){n&&i._ctrlStream.id!==n.id||t&&i._controller.id!==t||r.push(i)})),r}function T(e,t,n,r){var i=[];return e.current.__remoteControls&&s.forEach(e.current.__remoteControls,(function(e,o){t&&o._ctrlStream.id!==t.id||n&&o._controller.memName!==n.memName||r&&o._cId!==r||i.push(o)})),i}function O(e,t,n,r){w(t);var o=t.arg,c=o.cId,u=o.streamId,d=e.getMemberById(t.memId),l=e.getStreamById(u);function p(){if(!d||!l)return E(e,t),!0;if(1===o.evt){var n,i=new x({_service:e,_controller:d,_ctrlStream:l,_cId:c,_reqevt:t,_callbacks:r});return i.hasOtherControl()?(i.busy(),!0):(n=i.controlling())?(s.forEach(n,(function(e,t){t._cId=c})),C(e,t,0),!0):(r&&r.onHasRemoteControl&&r.onHasRemoteControl(l,d,i),!0)}if(2===o.evt){var a=T(e,l,d,c);return a&&s.forEach(a,(function(n,r){r._free&&r._free(),C(e,t,0)})),r&&r.onRemoteFreeControl&&r.onRemoteFreeControl(l,d,c),!0}}if(n||!p()){var h=T(e,l,d,c);if(n||h&&0!==h.length||E(e,t),h&&s.forEach(h,(function(e,t){t._lastRecvTimestamp=(new Date).getTime()})),n){var m=e.current.__remoteControls[l.id];h=h||[],m&&h.push(m)}s.forEach(h,(function(r,c){var u=0,d=o.mouse;if(d&&d.length>0)try{s.forEach(d,(function(e,t){t.sn>u&&(u=t.sn),t.oper===f.BTN.MOVE?c.mouseTrack&&c.mouseTrack.track(t.xy):c.mouseTrack&&c.mouseTrack.trigger(new f(t))}))}catch(p){a.warn(p)}d=o.keyboard;if(d&&d.length>0)try{s.forEach(d,(function(e,t){t.sn>u&&(u=t.sn),c.keyboard&&(t.oper===f.BTN.KEYBOARD_DOWN?c.keyboard.onKeyDown(t.btn):t.oper===f.BTN.KEYBOARD_UP&&c.keyboard.onKeyUp(t.btn))}))}catch(p){a.warn(p)}if(!0!==n)try{l()}catch(p){a.warn(p)}function l(){e.current.message({op:1001,tsxId:t.tsxId,memId:t.memId,arg:(0,i.default)({sn:u}),result:0}).post((function(e){a.debug("Send remote control response. the result = ",e.result,e.msg||"")}))}}))}}function R(e,t,n,r,i){r&&r()}function k(e,t,n,r,i){r&&r()}function M(e,t,n,r,i,o,s){var a=e.eventXYAtMedia(r,n);a&&(a={x:a.x/a.width,y:a.y/a.height},j(e,{xy:a,oper:f.BTN.MOVE,sid:t},s),o&&o(a,i))}function A(e,t,n,r,i,o,a){r.xy=e.eventXYAtMedia(r.xy,n),r.xy&&(r.xy={x:r.xy.x/r.xy.width,y:r.xy.y/r.xy.height},s.extend(r,{sid:t}),j(e,r,a),o&&o(r,i))}function P(e,t,n,r,i,o){j(e,{oper:n,btn:r,sid:t},o),i&&i(n,r)}function j(e,t,n){var r=t.sid,i=e.getStreamById(r);e.current.__remoteControls&&e.current.__remoteControls[r]&&O(e,_(e,i,{actions:[t]}),!0);var o=e.current.__pannelBuffers[r],c=o.getUnclearSize();if(o.put(t),c<emedia.config.allowSendWhenLessThan){var u=function t(){for(var c=o.getUnread(),u=0,f=0;c&&f<c.length;f++){var d=c[f];s.removeAttribute(d,"sid"),u<d.sn&&(u=d.sn)}c&&0!==c.length&&(a.debug(r,"buffer remain:",o.getUnclearSize(),", send evt:",c.length),e.current.postMessage(_(e,i,{actions:c,cId:o._cId}),(function(e){if(-402!==e.result)if(-403!==e.result)if(-408!==e.result){if(-507===e.result||-405===e.result)return o.clearRead(u),void(n&&n.onNotAllowRemoteControl&&n.onNotAllowRemoteControl(i));0===e.result&&(o._lastRspTimestamp=(new Date).getTime());var c=e.arg;c&&(c=JSON.parse(c))&&!s.isInt(c.sn)?a.warn("rsp.sn not a Number.",c.sn,"for streamId",r):c&&void 0!==c.sn&&o.clearRead(c.sn),t()}else n&&n.onRemoteControlTimeout&&n.onRemoteControlTimeout(i);else n&&n.onBusy&&n.onBusy(i);else n&&n.onReject&&n.onReject(i)})))};u()}}function N(e,t){var n,r=e.current.__pannelMouses&&s.removeAttribute(e.current.__pannelMouses,t),o=e.current.__pannelKeyboards&&s.removeAttribute(e.current.__pannelKeyboards,t);if(e.current.__pannelBuffers&&(n=s.removeAttribute(e.current.__pannelBuffers,t)),r&&r.ungrab(),o&&o.ungrab(),m(e),n){var c=e.getStreamById(t);if(n._callbacks&&n._callbacks.onDisControlled&&n._callbacks.onDisControlled(c),c){var u=e.current.newMessage({op:1002,memId:c.owner.id,arg:(0,i.default)({op2:30,streamId:c.id,evt:2,cId:n._cId}),_reqOps:[100230]});e.current.postMessage(u,(function(e){0!==e.result&&a.warn("Unkown result：",e.result)}))}}}function L(e,t,n,r){var i={};s.forEach(arguments,(function(e,t){"function"===typeof t&&(i[t.name]=t)})),B(e,t,n,!0,r,i)}function D(e,t,n,r){var i={};s.forEach(arguments,(function(e,t){"function"===typeof t&&(i[t.name]=t)})),B(e,t,n,!1,r,i)}function B(e,t,n,r,o,s){var c=Math.uuidFast();c=c.substr(c.length-6,6);var u=e.getStreamById(t);if(!u._webrtc)throw s&&s.onNotAllowRemoteControl&&s.onNotAllowRemoteControl(u),a.error("Not allow control. cause by the stream not sub"),"Not allow control. cause by the stream not sub";var f={op2:30,streamId:u.id,evt:1,cId:c},d=e.current.newMessage({op:1002,memId:u.owner.id,arg:(0,i.default)(f),_reqOps:[100230]});e.current.postMessage(d,(function(i){if(-402!==i.result)if(-403!==i.result)if(-408!==i.result)if(-507!==i.result&&-405!==i.result){if(0===i.result)return U(e,t,n,r,o,s,c,!0),void(s&&s.onAccept&&s.onAccept(u));a.warn("Unkown result：",i.result),s&&s.onNotAllowRemoteControl&&s.onNotAllowRemoteControl(u)}else s&&s.onNotAllowRemoteControl&&s.onNotAllowRemoteControl(u);else s&&s.onRemoteControlTimeout&&s.onRemoteControlTimeout(u);else s&&s.onBusy&&s.onBusy(u);else s&&s.onReject&&s.onReject(u)}))}function U(e,t,n,r,i,o,s,l){void 0===i&&(i=n);var p=e.getStreamById(t),h=(e.current.__pannelMouses||(e.current.__pannelMouses={}))[t];if(h&&N(e,t),!p.located()&&!p.owner.acptOps[1003])throw a.error("which do not recv remote message, it is ",p.owner.memName),p.owner.memName+" do not recv remote message";h=new c({_target:i,_focused:!0,onMouseEnter:function(){R.call(h,e,t,n,o&&o.onMouseEnter,o),m&&m.grab()},onMouseExit:function(){k.call(h,e,t,n,o&&o.onMouseExit,o),m&&m.ungrab()},onMouseButton:function(i,s){!0===r&&(i.xy.x=-i.xy.x),A.call(h,e,t,n,i,s,o&&o.onMouseButton,o)},onMouseMove:function(i,s){emedia.config.disableTrack||(!0===r&&(i.x=-i.x),M.call(h,e,t,n,i,s,o&&o.onMouseMove,o))}});var m,v=e.current.__pannelBuffers||(e.current.__pannelBuffers={});v[t]=new d({_cId:s,_callbacks:o,trackBufferSize:emedia.config.trackBufferSize||1e3});(e.current.__pannelMouses||(e.current.__pannelMouses={}))[t]=h,h.grab(),l&&(m=new u({_target:document,_focused:!0,onKeyPress:function(n,r){var i=r?f.BTN.KEYBOARD_DOWN:f.BTN.KEYBOARD_UP,s=n;P.call(m,e,t,i,s,o&&o.onKeyboard,o)}}),(e.current.__pannelKeyboards||(e.current.__pannelKeyboards={}))[t]=m)}function F(e,t,n,r){var i=new c({_target:e,_focused:!0,onMouseEnter:function(){},onMouseExit:function(){t.releaseTrigger()},onMouseButton:function(e,i){e.xy={x:e.xy.x/e.xy.width,y:e.xy.y/e.xy.height},!0===r&&(e.xy.x=-e.xy.x),n&&(e.xy=emedia.Service.prototype.eventXYAtMedia.call(null,e.xy,n)),e.xy&&t.trigger(e)},onMouseMove:function(e,i){e={x:e.x/e.width,y:e.y/e.height},!0===r&&(e.x=-e.x),n&&(e=emedia.Service.prototype.eventXYAtMedia.call(null,e,n)),e&&t.track(e)}});return i.grab(),i}function V(e,t,n){var r=t;r&&(e.mouseTrack=r),e.keyboard=n}function W(e){var t={};s.forEach(arguments,(function(e,n){0!=e&&"function"===typeof n&&(t[n.name]=n)})),y(e),h(e),l(e),b(e,t),z(e)}function q(e,t){var n=e.getStreamById(t),r=T(e,n);if(r&&0!==r.length)return r[0]._controller.memName}function $(e,t,n,r){var i=e.getStreamById(t),o={_ctrlStream:i,_controller:i.owner,_service:e};V(o,n,r),(e.current.__remoteControls||(e.current.__remoteControls={}))[t]=o}function G(e,t){s.removeAttribute(e.current.__remoteControls,t)}var z=function e(t){var n,r;(e.timeoutId&&clearTimeout(e.timeoutId),e.timeoutId=setTimeout((function(){e(t)}),emedia.config.ctrlCheckIntervalMillis),t.current)&&((n=t.current.__remoteControls)&&s.forEach(n,(function(e,t){if(void 0!==t.id&&e==t.id){var n=(new Date).getTime();t._lastRecvTimestamp&&n-t._lastRecvTimestamp>emedia.config.ctrlTimeoutMillis&&(a.warn("Timeout for remote controller. it is ",t.id,t._ctrlStream.id,t._controller.memName),t._free(),t._callbacks&&t._callbacks.onRemoteFreeControl&&t._callbacks.onRemoteFreeControl(t._ctrlStream,t._controller,t._cId))}})),(r=t.current.__pannelBuffers)&&s.forEach(r,(function(e,n){var r=t.getStreamById(e);r&&!r.located()&&t.current.message({op:1002,memId:r.owner.id,arg:(0,i.default)({op2:30,streamId:r.id,evt:3,cId:n._cId}),_reqOps:[100230]}).post((function(e){}))})))};e.exports={mirrorControlled:L,controlled:D,disControlled:N,controlling:V,graffiti:F,echoControl:$,disEchoControl:G,support:W,getController:q}},function(e,t,n){"use strict";var r=n(72),i=(r.tagLogger("Mouse"),n(222));e.exports=r.prototypeExtend({__init__:function(){this._handlers=r.extend({mousedown:this._handleMouseDown.bind(this),mouseup:this._handleMouseUp.bind(this),mousemove:this._handleMouseMove.bind(this),mousewheel:this._handleMouseWheel.bind(this),mousedisable:this._handleMouseDisable.bind(this),mouseover:this._handleMouseOver.bind(this),mouseout:this._handleMouseOut.bind(this)},this._handlers||{})},onMouseButton:function(e,t){},onMouseMove:function(e,t){},onMouseEnter:function(){},onMouseExit:function(){},_onMouseButton:function(e,t,n){var r=(new Date).getTime(),o=new i({xy:e,oper:t,btn:n,_time:r});this.onMouseButton&&this.onMouseButton(o,this._lastTrigger),this._lastTrigger=o},_onMouseMove:function(e){this.onMouseMove&&this.onMouseMove(e,this._lastTrigger)},_captureMouse:function(){this._target.setCapture&&this._target.setCapture(),this._mouseCaptured=!0},_releaseMouse:function(){this._target.releaseCapture&&this._target.releaseCapture(),this._mouseCaptured=!1},_resetDoubleClickTimer:function(){this._doubleClickTimer=null},_handleMouseOver:function(e){!1!==this._mouseExit&&(this._mouseExit=!1,this.onMouseEnter&&this.onMouseEnter())},_handleMouseOut:function(e){!0!==this._mouseExit&&(this._mouseExit=!0,this.onMouseExit&&this.onMouseExit()),this._lastTrigger=void 0},_handleMouseDown:function(e){this._captureMouse(),this._handleMouseButton(e,i.BTN.KEY_DOWN)},_handleMouseUp:function(e){this._mouseCaptured&&(this._handleMouseButton(e,i.BTN.KEY_UP),this._releaseMouse())},_handleMouseWheel:function(e){if(this._focused){e=e||window.event;var t=r.getEventElementXY(e,this._target,this._scale),n=(e.detail?-1*e.detail:e.wheelDelta/40)>0?i.BTN.WHEEL_ROLL_UP:i.BTN.WHEEL_ROLL_DOWN;this._onMouseButton(t,i.BTN.KEY_DOWN,n),r.stopEvent(e)}},_handleMouseMove:function(e){if(this._focused){e=e||window.event;var t=r.getEventElementXY(e,this._target,this._scale);this._onMouseMove(t),r.stopEvent(e)}},_handleMouseDisable:function(e){if(this._focused){e=e||window.event;var t=r.getEventElementXY(e,this._target,this._scale);try{return!(t.realX>=0&&t.realY>=0&&t.realX<this._target.offsetWidth&&t.realY<this._target.offsetHeight)}finally{r.stopEvent(e)}}},_handleMouseButton:function(e,t){if(this._focused){e=e||window.event;var n,o=r.getEventElementXY(e,this._target,this._scale);if(e.touches||e.changedTouches){if(t==i.BTN.KEY_DOWN){if(null===this._doubleClickTimer)this._lastTouchPos=o;else{clearTimeout(this._doubleClickTimer);var s=this._lastTouchPos.x-o.x,a=this._lastTouchPos.y-o.y;Math.sqrt(s*s+a*a)<20*window.devicePixelRatio&&(o=this._lastTouchPos)}this._doubleClickTimer=setTimeout(this._resetDoubleClickTimer.bind(this),500)}n=i.BTN.LEFT}else n=e.which?1<<e.button:(1&e.button)+2*(2&e.button)+(4&e.button)/2;this._onMouseButton(o,t,n),r.stopEvent(e)}},grab:function(){var e=this._target;r.addEvent(e,"mouseover",this._handlers.mouseover),r.addEvent(e,"mouseout",this._handlers.mouseout),r.addEvent(e,"touchstart",this._handlers.mousedown),r.addEvent(e,"touchend",this._handlers.mouseup),r.addEvent(e,"touchmove",this._handlers.mousemove),r.addEvent(e,"mousedown",this._handlers.mousedown),r.addEvent(e,"mouseup",this._handlers.mouseup),r.addEvent(e,"mousemove",this._handlers.mousemove),r.addEvent(e,r.layoutEngine.gecko?"DOMMouseScroll":"mousewheel",this._handlers.mousewheel),r.addEvent(e,"contextmenu",this._handlers.mousedisable)},ungrab:function(){var e=this._target;r.removeEvent(e,"mouseover",this._handlers.mouseover),r.removeEvent(e,"mouseout",this._handlers.mouseout),r.removeEvent(e,"touchstart",this._handlers.mousedown),r.removeEvent(e,"touchend",this._handlers.mouseup),r.removeEvent(e,"touchmove",this._handlers.mousemove),r.removeEvent(e,"mousedown",this._handlers.mousedown),r.removeEvent(e,"mouseup",this._handlers.mouseup),r.removeEvent(e,"mousemove",this._handlers.mousemove),r.removeEvent(e,r.layoutEngine.gecko?"DOMMouseScroll":"mousewheel",this._handlers.mousewheel),r.removeEvent(e,"contextmenu",this._handlers.mousedisable)}})},function(e,t,n){"use strict";var r=n(72),i=r.tagLogger("Keyboard");e.exports=r.prototypeExtend({__init__:function(){this._eventHandlers={keyup:this._handleKeyUp.bind(this),keydown:this._handleKeyDown.bind(this),keypress:this._handleKeyPress.bind(this),blur:this._allKeysUp.bind(this)}},getKey:function(e){return"keyCode"in e&&"key"in e?e.key+":"+e.keyCode:"keyCode"in e?e.keyCode:e.key},onKeyPress:function(e,t){},_onKeyPress:function(e,t){this.onKeyPress&&this.onKeyPress(e,t)},_handleRfbEvent:function(e,t){e.shiftKey,e.ctrlKey,e.altKey;var n=e.keyCode||e.which;this._onKeyPress(n,"keydown"==t)},_handleKeyDown:function(e){return!this._focused||!this._handleRfbEvent(e,"keydown")||(r.stopEvent(e),!1)},_handleKeyPress:function(e){return!this._focused||(r.stopEvent(e),!1)},_handleKeyUp:function(e){return!this._focused||!this._handleRfbEvent(e,"keyup")||(r.stopEvent(e),!1)},_allKeysUp:function(){},sync:function(e){},grab:function(){var e=this._target;r.addEvent(e,"keydown",this._eventHandlers.keydown),r.addEvent(e,"keyup",this._eventHandlers.keyup),r.addEvent(e,"keypress",this._eventHandlers.keypress),r.addEvent(e,"blur",this._eventHandlers.blur),i.info("keyboard grab at element")},ungrab:function(){var e=this._target;r.removeEvent(e,"keydown",this._eventHandlers.keydown),r.removeEvent(e,"keyup",this._eventHandlers.keyup),r.removeEvent(e,"keypress",this._eventHandlers.keypress),r.removeEvent(e,"blur",this._eventHandlers.blur),this._allKeysUp(),i.info("keyboard upgrab at element")}})},function(e,t,n){"use strict";var r=n(72),i=(r.tagLogger("TotalBuffer"),n(434)),o=n(435),s=n(222);e.exports=r.prototypeExtend({trackBufferSize:100,_trackBufferCompRadio:.25,_sn:1,__init__:function(){this._eventBuffer=new i({_nextsn:this._nextsn.bind(this)}),this._trackBuffer=new o({_nextsn:this._nextsn.bind(this),_compRadio:this._trackBufferCompRadio,mouseTrackBufferSize:this.trackBufferSize})},_nextsn:function(){return this._sn++},put:function(e){e&&void 0!==e.oper&&(e.oper===s.BTN.MOVE?this._trackBuffer.put(e):this._eventBuffer.put(e))},getUnread1:function(e){function t(e,t){return e._time-t.time}var n;if(!e){var r=this._eventBuffer.getUnread(),i=this._trackBuffer.getUnread();return Array.prototype.push.apply(r,i),n=r,n.sort(t),n}n=[];r=this._eventBuffer._getUnread(e),i=this._trackBuffer._getUnread(e);Array.prototype.push.apply(n,r),Array.prototype.push.apply(n,i),n.sort(t),n=n.slice(0,e>n.length?n.length:e);for(var o=0;o<n.length;o++)n[o].oper===s.BTN.MOVE?this._trackBuffer.getUnread(1):this._eventBuffer.getUnread(1);return n},getUnread:function(e){e||(e=this._eventBuffer.getUnreadSize()+this._trackBuffer.getUnreadSize());var t=[];while(t.length!==e){var n=this._eventBuffer._getUnread(1),r=this._trackBuffer._getUnread(1);if(void 0===n&&r)t.push(this._trackBuffer.getUnread(1));else if(void 0===r&&n)t.push(this._eventBuffer.getUnread(1));else{if(void 0===r&&void 0===n)return t;n.sn<r.sn?t.push(this._eventBuffer.getUnread(1)):t.push(this._trackBuffer.getUnread(1))}}return t},getUnreadSize:function(){return this._trackBuffer.getUnreadSize()+this._eventBuffer.getUnreadSize()},getUnclearSize:function(){return this._trackBuffer.getUnclearSize()+this._eventBuffer.getUnclearSize()},clearRead:function(e){return this._eventBuffer.clearRead(e)+this._trackBuffer.clearRead(e)}})},function(e,t,n){"use strict";var r=n(72);r.tagLogger("EventBuffer");e.exports=r.prototypeExtend({_buffer:[],_sn:1,_beginIndex:0,_readIndex:0,_endIndex:0,_nextsn:function(){return this._sn++},put:function(e){e&&(e.sn=this._nextsn(),this._buffer.push(e),this._endIndex++)},_getUnread:function(e){return this._readIndex===this._endIndex?1===e?void 0:[]:this._buffer[this._readIndex]},getUnread:function(e){var t;try{return t=this._getUnread(e),t}finally{t&&(this._readIndex+=1===e?1:t.length)}},getUnreadSize:function(){return this._endIndex-this._readIndex},getUnclearSize:function(){return this._readIndex-this._beginIndex},clearRead:function(e){if(this._readIndex!==this._beginIndex){for(var t=0,n=this._beginIndex;n<this._readIndex;n++){if(!(this._buffer[n].sn<=e))break;t++}if(0===t)return 0;for(n=0;n<t;n++)this._buffer.shift();return this._beginIndex=0,this._readIndex-=t,this._endIndex-=t,t}}})},function(e,t,n){"use strict";var r=n(72);r.tagLogger("TrackBuffer");e.exports=r.prototypeExtend({mouseTrackBufferSize:1e3,_sn:1,_compRadio:.25,_beginIndex:0,_readIndex:0,_endIndex:0,__init__:function(){this._mouseTrackBuffer=new Array(this.mouseTrackBufferSize)},_nextsn:function(){return this._sn++},_index:function(e){return e%this.mouseTrackBufferSize},comp1:function(e){if(!(e>=1)){var t=Math.floor(1/e),n=this._beginIndex,r=n+1;while(n<this._endIndex){for(var i=2;i<t&&n+i<this._endIndex;i++)this._mouseTrackBuffer[this._index(r++)]=this._mouseTrackBuffer[this._index(n+i)];n+=t}this._endIndex=r}},put1:function(e){if(e){e.sn=this._nextsn(),this._endIndex-this._readIndex===this.mouseTrackBufferSize&&(this.comp1(this._compRadio),this._readIndex=this._beginIndex);var t=this._index(this._beginIndex),n=(this._index(this._readIndex),this._index(this._endIndex)),r=n;r<=t&&r>=0&&this._endIndex>this._beginIndex&&this._beginIndex++,this._mouseTrackBuffer[r]=e,this._endIndex++}},compHalfOfUnread:function(){var e=this._readIndex+2,t=this._readIndex+1;while(e<this._endIndex)this._mouseTrackBuffer[this._index(t++)]=this._mouseTrackBuffer[this._index(e)],e+=2;this._endIndex=t},put:function(e){if(e){e.sn=this._nextsn(),this._endIndex-this._beginIndex===this.mouseTrackBufferSize&&this.compHalfOfUnread();var t=this._index(this._endIndex);this._mouseTrackBuffer[t]=e,this._endIndex++}},_interval:function(e,t){var n=this._index(e),r=this._index(t);if(n<r)return this._mouseTrackBuffer.slice(n,r);var i=this._mouseTrackBuffer.slice(n);return Array.prototype.push.apply(i,this._mouseTrackBuffer.slice(0,r)),i},_getUnread:function(e){return this._readIndex===this._endIndex?1===e?void 0:[]:this._mouseTrackBuffer[this._index(this._readIndex)]},getUnread:function(e){var t;try{return t=this._getUnread(e),t}finally{t&&(this._readIndex+=1===e?1:t.length)}},getUnreadSize:function(){return this._endIndex-this._readIndex},getUnclearSize:function(){return this._readIndex-this._beginIndex},clearRead:function(e){if(this._readIndex!==this._beginIndex){for(var t=0,n=this._beginIndex;n<this._readIndex;n++){var r=this._index(n);if(!(this._mouseTrackBuffer[r].sn<=e))break;this._beginIndex++,t++}return t}}})},function(e,t,n){"use strict";var r=n(72),i=r.tagLogger("CompositeCanvas");function o(){}for(var s in CanvasRenderingContext2D.prototype)(function(e){o.prototype[e]=function(){if("function"===typeof this._canvasContext[e])this._canvasContext[e].apply(this._canvasContext,arguments);else{var t=arguments.length>=1?arguments[0]:void 0;if(!t)return this._canvasContext[e];this._canvasContext[e]=t}}})(s);var a=r.prototypeExtend(o,{__init__:function(){var e=this;e.compositeCanvasTag||(e.compositeCanvasTag=document.createElement("canvas")),e._canvasContext=e.compositeCanvasTag.getContext("2d"),e._canvasContext.globalAlpha=void 0!==this._globalAlpha?this._globalAlpha:1,e._compositeOperation=e._compositeOperation||c.source_over,e.globalCompositeOperation(e._compositeOperation)},setCanvas:function(){for(var e,t=this,n=0;n<arguments.length;n++)e=arguments[n],"function"===typeof e&&e(this.compositeCanvasTag,this._canvasContext),"function"!==typeof e&&r.isPlainObject(e)&&r.forEach(e,(function(e,n){i.debug("Canvas set ",e," = ",n),t.compositeCanvasTag.setAttribute(e,n)}));return t},getCanvasImageData:function(e,t){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var i=e.getContext("2d");return i.globalAlpha=t||0,i.getImageData.apply(i,n)},_composite:function(e){var t=this;return new a(t,{_compositeOperation:e})},composite:function(e){var t=this;return t.globalCompositeOperation(e),t},requestAnimationFrame:function(e){var t=this;return t.requestFrame(),t._requestAnimationFrameStart=window.requestAnimationFrame((function(e){t.requestAnimationFrame(e)})),t},cancelAnimationFrame:function(){var e=this;return e._requestAnimationFrameStart&&window.cancelAnimationFrame(e._requestAnimationFrameStart),e},requestFrame:function(e){var t,n=this;if("function"!==typeof this.requestOneFrame)throw i.error("Pleas implement requestOneFrame()"),"Pleas implement requestOneFrame()";try{this.requestOneFrame()}catch(o){i.error(o)}if(e&&(t=Math.floor(1e3/e)),!t)return n;var r=this.requestFrame.bind(this);return this.intervalId=setInterval((function(){r(e)}),t),n},stopRequestFrame:function(){return this.intervalId&&clearInterval(this.intervalId),this}});a.CompositeOperation=["source-atop","source-in","source-out","source-over","destination-atop","destination-in","destination-out","destination-over","lighter","darker","xor","copy"];var c=a.operation={source_atop:"source-atop",source_in:"source-in",source_out:"source-out",source_over:"source-over",destination_atop:"destination-atop",destination_in:"destination-in",destination_out:"destination-out",destination_over:"destination-over",lighter:"lighter",darker:"darker",xor:"xor",copy:"copy"};a.compositeVideoOverCanvas=function(e,t,n){var r;return(r=e.compositeCanvas)||(r=new a({compositeCanvasTag:e,requestOneFrame:function(){t&&r.drawImage(t,0,0,e.width,e.height),n&&r.drawImage(n,0,0,e.width,e.height)}}),e.compositeCanvas=r),r},e.exports=a},function(e,t,n){"use strict";var r=n(72);r.tagLogger("Keyboard");e.exports=r.prototypeExtend({onKeyDown:function(e){},onKeyUp:function(e){}})},function(e,t,n){"use strict";window.emedia=window.emedia||{};var r=n(72),i=r.tagLogger("electron");emedia.electron=window.require("electron"),emedia.chooseElectronDesktopMedia=function(e,t,n){i.info("Choose desktop. ",e[0]),t(e[0])}},function(e,t,n){"use strict";var r=n(70).default,i=n(440),o=n(443),s=n(444).default,a=n(445),c=n(446),u=o.RouteTo,f=o.Api,d=r.logger,l={api:null,caller:"",connection:null,pattern:null,watchStats:!0,listener:{onAcceptCall:function(e,t){},onRinging:function(e){},onTermCall:function(){},onIceConnectionStateChange:function(e){},onGotLocalStream:function(){},onGotRemoteStream:function(){},onOtherUserOpenVoice:function(){},onOtherUserOpenVideo:function(){}},mediaStreamConstaints:{audio:!0,video:!0},init:function(){var e=this;if("undefined"===typeof e.connection)throw"Caller need a instance of Easemob.im.Connection";e.api=e.api||new f({imConnection:e.connection,rtcHandler:new i({imConnection:e.connection})}),e.api.onInitC=function(){e._onInitC.apply(e,arguments)},e.api.onInvite=function(){e.listener.onInvite.apply(e,arguments)},e.api.onIceConnectionStateChange=function(t){e.listener.onIceConnectionStateChange.apply(e,arguments)}},createConference:function(e,t){var n=new u({rtKey:""});this.api.reqTkt(n,!0,void 0,e,(function(e,n){n.ticket;n.conferenceId=n.confrId,t&&t(e,n)}))},inviteConference:function(e,t,n,r,i){var o=new u({to:n,rtKey:"",rtflag:0});this.api.invite(o,e,t,r,(function(e,t){i&&i(e,t)}))},getConferenceTkt:function(e,t,n){var r=new u({rtKey:""});this.api.reqTkt(r,!1,e,t,(function(e,t){n&&n(e,t)}))},makeVideoCall:function(e,t,n,i,o){var s=this,a={};r.extend(a,s.mediaStreamConstaints),this.call(e,a,t,n,i,o)},makeVoiceCall:function(e,t,n,i,o){var s=this,a={};r.extend(a,s.mediaStreamConstaints),a.video=!1,s.call(e,a,t,n,i,o)},acceptCall:function(){var e=this;e.pattern.accept()},endCall:function(e){var t=this;t.caller="",t.pattern.termCall(),t.timer&&clearInterval(t.timer)},call:function(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{push:!1},s=this;if(s.timer&&clearInterval(s.timer),o.push)var a=!0,c=!1,f=o&&"number"===typeof o.timeoutTime&&o.timeoutTime||6e4,l=Number((f/2e3).toFixed()),p=0;this.callee=this.api.jid(e);var h=new u({rtKey:"",sid:n,to:e,success:function(e){d.debug("iq to server success",e)},fail:function(e){d.debug("iq to server error",e),s.onError(e)}});function m(){return s.api.reqP2P(h,t.video?1:0,t.audio?1:0,s.api.jid(e),r,i,(function(u,f){if("0"==f.online){if(console.warn("callee is not online!"),!o.push)return s.listener.onError({message:"callee is not online!"});a&&(s.listener.onError({message:"callee is not online!"}),o.push&&s.api.senPushMsg(e,o.txtMsg,o.pushMsg)),a=!1,c=!1,s.timer=!c&&p<=l&&setTimeout((function(){p++,m()}),2e3),p>l&&s.listener.onError({message:"call timeout"})}else f.streamType=t.audio&&t.video?"VIDEO":"VOICE",s._onGotServerP2PConfig(u,f),s.pattern.initC(t,n,r,i),c=!0})),c}m()},controlStream:function(e,t){var n=new u({to:t,rtKey:"",rtflag:0});this.api.streamControl(n,null,this.rtcId,e,this.localStream)},getServerRecordId:function(){var e=this.api,t=e.rtcHandler,n=t.confrId;return n||null},_onInitC:function(e,t,n,r,i){var o=this;o.callee=e,o._rtcCfg=t.rtcCfg,o._WebRTCCfg=t.WebRTC,o.sessId=t.sessId,o.rtcId=t.rtcId,o.switchPattern("VIDEO"==t.streamType?"VIDEO":"VOICE"),t.globalMediaConstaints=o.mediaStreamConstaints,o.pattern._onInitC(e,t,n,r,i)},_onInvite:function(){},_onGotServerP2PConfig:function(e,t){var n=this;0==t.result&&(n._p2pConfig=t,n._rtcCfg=t.rtcCfg,n._rtcCfg2=t.rtcCfg2,n.sessId=t.sessId,n.rtcId="RTCID"+t.sessId,n._rtKey=n._rtkey=t.rtKey||t.rtkey,n._rtFlag=n._rtflag=t.rtFlag||t.rtflag,n._WebRTCCfg=t.WebRTC,n.admtok=t.admtok,n.tkt=t.tkt,n.switchPattern(t.streamType))},switchPattern:function(e){var t=this;!t._WebRTCCfg&&(t.pattern=new a({callee:t.callee,_p2pConfig:t._p2pConfig,_rtcCfg:t._rtcCfg,_rtcCfg2:t._rtcCfg2,_rtKey:t._rtKey||t._rtkey,_rtFlag:t._rtFlag||t._rtflag,_sessId:t.sessId,_rtcId:t.rtcId,webRtc:new s({streamType:e,subArgs:{subSVideo:"VIDEO"===e,subSAudio:!0},onGotLocalStream:function(n,r){t.listener.onGotLocalStream(n,e),t.localStream=n},onGotRemoteStream:function(n,r){if(t.listener.onGotRemoteStream(n,e),t.remoteStream=n,t.watchStats){var i=t.pattern.webRtc._rtcPeerConnection;t.get_stats=new c(i,t),t.get_stats.start()}},onError:t.listener.onError}),api:t.api,onAcceptCall:t.listener&&t.listener.onAcceptCall||function(){},onRinging:t.listener&&t.listener.onRinging||function(){},onTermCall:function(){t.get_stats&&t.get_stats.stop(),t.listener&&t.listener.onTermCall()},onOtherUserOpenVoice:t.listener&&t.listener.onOtherUserOpenVoice||function(){},onOtherUserOpenVideo:t.listener&&t.listener.onOtherUserOpenVideo||function(){}}))}};e.exports=function(e){r.extend(!0,this,l,e||{}),this.init()}},function(e,t,n){"use strict";var r=n(441),i=o(r);function o(e){return e&&e.__esModule?e:{default:e}}var s=n(70).default,a=s.logger,c=n(443),u=c.RouteTo,f={_apiCallbacks:{},imConnection:null,_connectedSid:"",init:function(){var e=this,t=e.imConnection;t.registerConfrIQHandler=function(t,n,r){try{e.handleRtcMessage(t)}catch(i){a.error(i)}}},handleRtcMessage:function(e,t,n){var r=this;if(e){var i=WebIM.conn.context.root.lookup("easemob.pb.ConferenceBody"),o=i.decode(e.payload),c=(e.id,e.from.name||"");c.lastIndexOf("/")>=0&&(c=c.substring(0,c.lastIndexOf("/")));var f=o.routeKey,d=o.sessionId;(r._fromSessionID||(r._fromSessionID={}))[c]=d;var l=s.parseJSON(o.content);l.confrId&&(this.confrId=l.confrId);var p=l,h=1==o.type?"VIDEO":"VOICE";""==h&&(h="VOICE"),p.streamType=h,102==p.op&&(r.singalStreamType=h);var m=l.tsxId;if(r.ctx=l.ctx,a.debug("Recv [op = "+p.op+"] [tsxId="+m+"]\r\n json :",e),""!=r._connectedSid||0!=p.result&&102!=p.op&&202!=p.op){if(r._connectedSid!=d){if(a.debug("Error recv [op = "+p.op+"] [tsxId="+m+"]. caused by _connectedSid != fromSessionId :",r._connectedSid,d),102==p.op&&d&&r._connectedSid){var v=new u({to:c,rtKey:f,sid:d,success:function(e){a.debug("iq to server success",e)},fail:function(e){a.debug("iq to server error",e),r.onError(e)}}),g={data:{op:107,sessId:p.sessId,rtcId:p.rtcId,reason:"busy"},reason:"busy"};r.sendRtcMessage(v,g)}return}}else r._connectedSid=d;if(0==p.online&&(r._connectedSid=""),107==p.op){r._connectedSid="",r._fromSessionID={};var y={0:"hangup",1:"noresponse",2:"reject",3:"busy",4:"fail",5:"unsupported",6:"offline"},b=o.endReason;p.reason=void 0!=b&&y[b]}if(p.sdp&&("string"===typeof p.sdp&&(p.sdp=s.parseJSON(p.sdp)),p.sdp.type&&(p.sdp.type=p.sdp.type.toLowerCase())),p.cands){"string"===typeof p.cands&&(p.cands=s.parseJSON(p.cands));for(var _=0;_<p.cands.length;_++){if("string"===typeof p.cands[_])try{p.cands[_]=s.parseJSON(p.cands[_])}catch(w){p.cands[_]={candidate:p.cands[_]}}p.cands[_].sdpMLineIndex=void 0!==p.cands[_].sdpMLineIndex?p.cands[_].sdpMLineIndex:p.cands[_].mlineindex,p.cands[_].sdpMid=void 0!==p.cands[_].sdpMid?p.cands[_].sdpMid:p.cands[_].mid,delete p.cands[_].mlineindex,delete p.cands[_].mid}}if(p.rtcCfg&&"string"===typeof p.rtcCfg&&(p.rtcCfg=s.parseJSON(p.rtcCfg)),p.rtcCfg2&&"string"===typeof p.rtcCfg2&&(p.rtcCfg2=s.parseJSON(p.rtcCfg2)),p.WebRTC&&"string"===typeof p.WebRTC&&(p.WebRTC=s.parseJSON(p.WebRTC)),p.confrId&&(p.conferenceId=p.confrId),m&&r._apiCallbacks[m])try{r._apiCallbacks[m].callback&&r._apiCallbacks[m].callback(c,p)}catch(S){throw S}finally{delete r._apiCallbacks[m]}else r.onRecvRtcMessage(c,p,f,m,d);return!0}},onRecvRtcMessage:function(e,t,n,r,i){a.debug(" form : "+e+" \r\n json :"+s.stringifyJSON(rtcJSON))},convertRtcOptions:function(e){var t=e.data.sdp;if(t){var n={type:t.type,sdp:t.sdp};t=n,t.type=t.type.toUpperCase(),t=s.stringifyJSON(t),e.data.sdp=t}var r=e.data.cands;if(r){if(s.isArray(r));else{var i=[];i.push(r),r=i}for(var o in r){var a=r[o];if(void 0!==a.candidate&&void 0!==a.sdpMLineIndex&&void 0!==a.sdpMid){var c={type:"candidate",candidate:a.candidate,mlineindex:a.sdpMLineIndex,mid:a.sdpMid};r[o]=s.stringifyJSON(c)}}e.data.cands=r}var u=e.data.rtcCfg;u&&"string"!==typeof u&&(e.data.rtcCfg=s.stringifyJSON(u));var f=e.data.WebRTC;f&&"string"!==typeof f&&(e.data.WebRTC=s.stringifyJSON(f))},getShortId:function(e){var t,n;return(t=e.indexOf("_")+1)<1&&(t=0),(n=e.indexOf("@",-1))<0&&(n=e.length),e.substring(t,n)},sendRtcMessage:function(e,t,n){var r=this,i=r.imConnection,o=i.getUniqueId(),a=e.to&&e.to||i.domain;if(a.indexOf("@")>=0){var c=a.split("_");c.splice(0,1),a=c.join("_").split("@")[0],""==r._connectedSid&&102==t.data.op&&(r._connectedSid=u)}var u=e.sid||r._fromSessionID&&r._fromSessionID[a];u=u||((r._fromSessionID||(r._fromSessionID={}))[a]=i.getUniqueId("CONFR_")),(r._fromSessionID||(r._fromSessionID={}))[a]=u;var f=e.rtKey||e.rtkey;f||(f="");var d=e.rtflag;!isNaN(d)||(d=1),t.data||(t.data={}),t.data.tsxId=o,r.ctx&&(t.data.ctx=r.ctx),r.convertRtcOptions(t);var l=t.streamType||r.singalStreamType||"VIDEO";102==t.data.op&&(r.singalStreamType=l);var p=e.id||i.getUniqueId("CONFR_");n&&(r._apiCallbacks[o]={callback:n});var h={id:p,to:a,from:i.context.jid,type:"VIDEO"==l?1:0,rtflag:d,stream_type:l,sid:u,content:t.data,reason:t.reason,rtKey:f};if(0==t.data.op&&(h.rec=t.data.rec,h.recMerge=t.data.recMerge,this.rec=t.data.rec,this.recMerge=t.data.recMerge),202!=t.data.op&&this._sendMessage(h,WebIM.conn),107==t.data.op&&r._connectedSid&&(e.sid&&r._connectedSid!=e.sid||(r._connectedSid="",r._fromSessionID={})),202==t.data.op){var m=s.list("Invite",r.getShortId(a),"join conference:",t.data.confrId).join(" "),v=(p=i.getUniqueId("CONFR_INVITE"),{msg:m,id:p,to:a,from:i.context.jid,contents:[{contenttype:"TEXT",text:m}],gid:t.data.gid,password:t.data.password,exts:{key:"conferenceId",type:7,value:t.data.confrId}});return this._sendGroupInviteMsg(v,WebIM.conn)}},_sendGroupInviteMsg:function(e,t){var n=[],r=t.context.root.lookup("easemob.pb.MessageBody.Content"),o=r.decode(n);o.type=0,o.text=e.msg;var s=t.context.root.lookup("easemob.pb.MessageBody"),a=s.decode(n);a.from={name:e.from.name},a.to={name:e.to},a.contents=[o];var c=t.context.root.lookup("easemob.pb.KeyValue"),u=c.decode(n),f=c.decode(n),d=c.decode(n);u.key="conferenceId",u.type=7,u.stringValue=e.exts.value,f.key="msg_extension",f.type=7,f.stringValue=(0,i.default)({inviter:e.from.name,group_id:e.gid}),d.key="password",d.type=7,d.stringValue=e.password,a.ext=[u,f,d],a.type=1,a=s.encode(a).finish();var l=t.context.root.lookup("easemob.pb.Meta"),p=l.decode(n);p.id=e.id,p.from=e.from,p.to={appKey:t.appKey,name:e.to,domain:"easemob.com"},p.ns=1,p.type=1,p.payload=a;var h=t.context.root.lookup("easemob.pb.CommSyncUL"),m=h.decode(n);m.meta=p,m=h.encode(m).finish();var v=t.context.root.lookup("easemob.pb.MSync"),g=v.decode(n);g.version=t.version,g.encryptType=t.encryptType,g.command=0,g.guid=t.context.jid,g.payload=m,g=v.encode(g).finish(),t.sendMSync(g)},_sendMessage:function(e,t){var n,r=[],o=t.context.root.lookup("easemob.pb.ConferenceBody"),s=o.decode(r);e.content.video;0==e.content.op?(n={op:e.content.op,callVersion:"2.0.0",audio:e.content.audio,video:e.content.video,tsxId:String(e.content.tsxId),peer:e.content.peer+"/",push:0},e.rec&&(n.rec=1),e.recMerge&&(n.recMerge=1)):102==e.content.op?(n=e.content,n.tsxId=String(e.content.tsxId),this.rec&&(n.rec=1)):400==e.content.op?n=e.content:(n=e.content,n.tsxId=String(e.content.tsxId));var a=e.content.op;if(s.content=(0,i.default)(n),s.routeFlag=e.rtflag,s.operation=7,s.sessionId=String(e.sid),s.type=e.type,s.routeKey=e.rtKey,s.routeFlag=e.rtflag,s.peerName=e.from.name,107==a){var c={success:0,ok:0,timeout:1,decline:2,busy:3,"failed-transport":4,unsupported:5,offline:6};s.endReason=c[e.reason]}s=o.encode(s).finish();var u=t.context.root.lookup("easemob.pb.Meta"),f=u.decode(r);f.id=String(e.id),f.ns=4,f.to={appKey:e.from.appKey,domain:e.from.domain,name:e.to},102==e.content.op&&(f.from=e.from),f.payload=s;var d=t.context.root.lookup("easemob.pb.CommSyncUL"),l=d.decode(r);l.meta=f,l=d.encode(l).finish();var p=t.context.root.lookup("easemob.pb.MSync"),h=p.decode(r);h.version=t.version,h.encryptType=t.encryptType,h.command=0,h.guid=t.context.jid,h.payload=l,h=p.encode(h).finish(),t.sendMSync(h)},_sendPushMsg:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:WebIM.conn.user+"正在呼叫你...",r=new WebIM.message("txt",WebIM.conn.getUniqueId());r.set({msg:t,to:e,roomType:!1,chatType:"singleChat",success:function(){},fail:function(){console.warn("Send push error，Please make sure that you are not blocked")},ext:{em_apns_ext:{em_push_title:n}}}),WebIM.conn.send(r.body)}},d=function(e){s.extend(!0,this,f,e||{}),this.init()};e.exports=d},function(e,t,n){e.exports={default:n(442),__esModule:!0}},function(e,t,n){var r=n(14),i=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}},function(e,t,n){"use strict";var r=n(3),i=o(r);function o(e){return e&&e.__esModule?e:{default:e}}var s=n(70).default,a=s.logger,c={rtFlag:1,success:function(e){},fail:function(e){}},u=function e(t){if(!(this instanceof e)){var n=function(e){var t=this;s.extend(!0,t,e||{})};return s.extend(!0,n.prototype,c,t||{}),n}var r=this;s.extend(!0,r,c,t||{})};t.RouteTo=u;var f={imConnection:null,rtcHandler:null,events:{0:"onReqP2P",1:"onNewCfr",2:"onDelCfr",3:"onReqTkt",100:"onPing",101:"onPong",102:"onInitC",103:"onReqC",104:"onAcptC",105:"onTcklC",106:"onAnsC",107:"onTermC",202:"onInvite",300:"onEvEnter",301:"onEvExit",302:"onEvPub",303:"onEvUnpub",304:"onEvMems",204:"onEvClose",400:"onStreamControl",401:"onEvJoin",onServerError:"onServerError"},register:function(e){if("object"===("undefined"===typeof e?"undefined":(0,i.default)(e)))for(var t in e)this.bind(t,e[t])},bind:function(e,t){var n,r=this;(n=r.events[e])||(n=r.events[e]="on_"+e),r[n]=t},jid:function(e){return/^.+#.+_.+@.+$/g.test(e)?e:this.imConnection.context.appKey+"_"+e+"@"+this.imConnection.domain},reqP2P:function(e,t,n,r,i,o,s){a.debug("req p2p ...");var c={data:{op:0,video:t,audio:n,peer:r,rec:i,recMerge:o}};c.streamType=t&&n?"VIDEO":"VOICE",this.rtcHandler.sendRtcMessage(e,c,s)},senPushMsg:function(e,t,n){return this.rtcHandler._sendPushMsg(e,t,n)},newCfr:function(e,t,n,r){a.debug("newCfr ...");var i=this,o={data:{op:1}};t&&(o.data.reqTkt=t),n&&(o.data.password=n),i.rtcHandler.sendRtcMessage(e,o,r)},enter:function(e,t,n,r,i,o,s){a.debug("enter ...");var c=this,u={data:{op:200}};t&&(u.data.WebRTCId=t),n&&(u.data.reqMembers=n),r&&(u.data.tkt=r),i&&(u.data.nonce=i),o&&(u.data.digest=o),c.rtcHandler.sendRtcMessage(e,u,s)},ping:function(e,t,n){a.debug("ping ...");var r=this,i={data:{op:100}};t&&(i.data.sessId=t),r.rtcHandler.sendRtcMessage(e,i,n)},streamControl:function(e,t,n,r,i,o){a.debug("streamControl ...");var s=this,c={data:{op:400}},u=0==r||3==r;0==r||1==r?emedia.enableAudioTracks(i,u):emedia.enableVideoTracks(i,u),t&&(c.data.sessId=t),n&&(c.data.rtcId=n),"undefined"!==typeof r&&null!=r&&(c.data.controlType=r),s.rtcHandler.sendRtcMessage(e,c,o)},reqTkt:function(e,t,n,r,i){a.debug("reqTkt ...");var o=this,s={data:{op:3}};t&&(s.data.isCreate=t),n&&(s.data.confrId=n),"string"===typeof r&&(s.data.password=r),o.rtcHandler.sendRtcMessage(e,s,i)},invite:function(e,t,n,r,i){a.debug("reqTkt ...");var o=this,s={data:{op:202}};t&&(s.data.confrId=t),"string"===typeof n&&(s.data.password=n),r&&(s.data.gid=r),o.rtcHandler.sendRtcMessage(e,s,i)},initC:function(e,t,n,r,i,o,s,c,u,f,d,l,p){a.debug("initC ...");var h=e.to.split("_");h.splice(0,1),e.to=h.join("_").split("@")[0];var m={data:{op:102}};m.streamType=t||"VIDEO",n&&(m.data.WebRTCId=n),r&&(m.data.tkt=r),i&&(m.data.sessId=i),o&&(m.data.rtcId=o),s&&(m.data.pubS=s),c&&(m.data.subS=c),u&&(m.data.sdp=u),f&&(m.data.cands=f),d&&(m.data.rtcCfg=d),l&&(m.data.WebRTC=l),m.data.expr=emedia.supportPRAnswer?1:0,this.rtcHandler.sendRtcMessage(e,m,p)},tcklC:function(e,t,n,r,i,o){a.debug("tcklC ...");var s=this,c={data:{op:105}};t&&(c.data.sessId=t),n&&(c.data.rtcId=n),r&&(c.data.sdp=r),i&&(c.data.cands=i),s.rtcHandler.sendRtcMessage(e,c,o)},ansC:function(e,t,n,r,i,o,s,c){a.debug("ansC ...");var u=this,f={data:{op:106}};t&&(f.data.sessId=t),n&&(f.data.rtcId=n),r&&(f.data.sdp=r),i&&(f.data.cands=i),!1===s&&(f.data.enableVoice=s),!1===c&&(f.data.enableVideo=c),u.rtcHandler.sendRtcMessage(e,f,o)},acptC:function(e,t,n,r,i,o,s,c,u){a.debug("acptC ...");var f=this,d={data:{op:104}};t&&(d.data.sessId=t),n&&(d.data.rtcId=n),r&&(d.data.sdp=r),i&&(d.data.cands=i),o&&(d.data.ans=o),!1===c&&(d.data.enableVoice=c),!1===u&&(d.data.enableVideo=u),f.rtcHandler.sendRtcMessage(e,d,s)},getMems:function(e,t,n,r){a.debug("getMems ...");var i=this,o={data:{op:203}};t&&(o.data.WebRTCId=t),n&&(o.data.sessId=n),i.rtcHandler.sendRtcMessage(e,o,r)},subC:function(e,t,n,r,i){a.debug("subC ...");var o=this,s={data:{op:205}};t&&(s.data.sessId=t),n&&(s.data.rtcId=n),r&&(s.data.subS=r),o.rtcHandler.sendRtcMessage(e,s,i)},usubC:function(e,t,n,r){a.debug("usubC ...");var i=this,o={data:{op:206}};t&&(o.data.sessId=t),n&&(o.data.rtcId=n),i.rtcHandler.sendRtcMessage(e,o,r)},termC:function(e,t,n,r,i){a.debug("termC ...");var o=this,s={data:{op:107,reason:r}};t&&(s.data.sessId=t),n&&(s.data.rtcId=n),r&&(s.reason=r),o.rtcHandler.sendRtcMessage(e,s,i)},exit:function(e,t,n,r){a.debug("exit ...");var i=this,o={data:{op:201}};t&&(o.data.WebRTCId=t),n&&(o.data.sessId=n),i.rtcHandler.sendRtcMessage(e,o,r)},delCfr:function(e,t,n,r){a.debug("delCfr ...");var i=this,o={data:{op:2}};t&&(o.data.WebRTCId=t),n&&(o.data.admtok=n),i.rtcHandler.sendRtcMessage(e,o,r)}};t.Api=function(e){var t=this;function n(e,n,r,i,o){var s;0!=n.result&&t["onServerError"]?t["onServerError"].call(t,e,n,r,i,o):t.events[n.op]&&(s=t[t.events[n.op]])?s.call(t,e,n,r,i,o):a.info("can not handle(recvRtcMessage) the op: "+n.op,n)}s.extend(!0,this,f,e||{}),this.rtcHandler.onRecvRtcMessage=n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(71);i.Webrtc.prototype.AVPubstream=i.Service.prototype.AVPubstream,i.Webrtc.prototype._openCamera=function(){i.Service.prototype._openCamera.apply(this,arguments)},i.Webrtc.prototype.__getUserMedia=function(){i.Service.prototype.__getUserMedia.apply(this,arguments)},i.Webrtc.prototype.__controlStream=function(){i.Service.prototype.__controlStream.apply(this,arguments)},i.Webrtc.prototype.__sysGetUserMedia=function(){i.Service.prototype.__sysGetUserMedia.apply(this,arguments)},i.Webrtc.prototype._onStreamInactive=function(e,t){i.util.logger.warn("media stream inactive. it =",e.id)},i.Webrtc.prototype._onStreamActive=function(e,t){i.util.logger.warn("media stream active. it =",e.id)},i.Webrtc.prototype.createMedia=function(e,t){var n=this,r=new n.AVPubstream({constaints:e,aoff:0,voff:0}),o=i.Service.prototype.openUserMedia.bind(this);o(r).then((function(e,r){WebIM.__alreadyOpenMedias.push(r),t&&t(n,r)}),(function(e){i.util.logger.debug("[WebRTC-API] getUserMedia() error: ",e),n.onError(e)}))},i.Webrtc.prototype.createMedia=r=function(e,t){var n=this,o=new MediaStream;function s(){0===--s.count&&(WebIM.__alreadyOpenMedias.push(o),t&&t(n,o))}function a(e){e&&e.getTracks().forEach((function(e){o.addTrack(e)}))}var c=!e||e.audio,u=!e||e.video;if(!c&&!u)return s.count=0,s();if(c&&u)return s.count=2,r.call(this,{video:e.video,audio:!1},(function(e,t){a(t),s()})),void r.call(this,{video:!1,audio:e.audio},(function(e,t){a(t),s()}));s.count=1;var f=new n.AVPubstream({constaints:e}),d=i.Service.prototype.openUserMedia.bind(this);d(f).then((function(e,t){a(t),s()}),(function(e){s(),i.util.logger.debug("[WebRTC-API] getUserMedia() error: ",e),"function"===typeof e.message?e.message=e.message():"string"===typeof e.message&&""!==e.message?e.message=e.message:e.message="open media error. "+e.name,e.message=e.message+" when get "+(u?"carma":"microphone"),n.onError(e)}))},i.Webrtc.prototype.setLocalVideoSrcObject=function(e){var t=this;t._localStream=e,t.onGotLocalStream(e,this.streamType),t.setLocalStream(e),i.util.logger.debug("[WebRTC-API] you can see yourself !")};var o=i.Webrtc.prototype.setRemoteDescription;i.Webrtc.prototype.setRemoteDescription=function(e){var t=this;if("VOICE"===t.streamType){var n=function(t,n){var r=e.sdp.indexOf("m=video"),i=e.sdp.indexOf("m=audio"),o=i>r?i:e.sdp.length;e.sdp=e.sdp.replace(t,(function(e,t,i){return t>=r&&t<o?n:e}))};n(/a=sendrecv|a=sendonly/g,"a=inactive")}return o.call(t,e)},t.default=i.Webrtc},function(e,t,n){"use strict";var r=n(70).default,i=n(443).RouteTo,o=r.logger,s=i({success:function(e){o.debug("iq to server success",e)},fail:function(e){o.debug("iq to server error",e)}}),a={_pingIntervalId:null,_p2pConfig:null,_rtcCfg:null,_rtcCfg2:null,_rtKey:null,_rtFlag:null,webRtc:null,api:null,callee:null,isCaller:!1,accepted:!1,setLocalSDP:!1,setRemoteSDP:!1,hangup:!1,init:function(){var e=this;e.api.onPing=function(){e._onPing.apply(e,arguments)},e.api.onTcklC=function(){e._onTcklC.apply(e,arguments)},e.api.onAcptC=function(){e._onAcptC.apply(e,arguments)},e.api.onAnsC=function(){e._onAnsC.apply(e,arguments)},e.api.onTermC=function(){e._onTermC.apply(e,arguments)},e.api.onEvJoin=function(){e._onEvJoin.apply(e,arguments)},e.api.onStreamControl=function(){e._onStreamControl.apply(e,arguments)},e.webRtc.onIceCandidate=function(){e._onIceCandidate.apply(e,arguments)},e.webRtc.onIceStateChange=function(){e._onIceStateChange.apply(e,arguments)}},_ping:function(){var e=this;function t(){var t=new s({to:e.callee,rtKey:e._rtKey});e.api.ping(t,e._sessId,(function(e,t){o.debug("ping result",t)}))}e._pingIntervalId=window.setInterval(t,5e4)},_onPing:function(e,t,n,r,i){o.debug("_onPing from",i)},initC:function(e,t){var n=this;n.sid=t,n.isCaller=!0,n.accepted=!1,n.setLocalSDP=!1,n.setRemoteSDP=!1,n.hangup=!1,n.streamType=e.audio&&e.video?"VIDEO":"VOICE",n.createLocalMedia(e)},createLocalMedia:function(e){var t=this;this.webRtc.createMedia(e,(function(e,n){t.webRtc.createRtcPeerConnection(t._rtcCfg),e.setLocalVideoSrcObject(n),e.localStream=n,t.webRtc.createOffer((function(e){t._onGotWebRtcOffer(e)}))}))},_onGotWebRtcOffer:function(e){var t=this,n=new s({to:t.callee,rtKey:t._rtKey});t.api.initC(n,t.streamType,null,null,t._sessId,t._rtcId,null,null,e,null,t._rtcCfg2,null,(function(e,t){o.debug("initc result",t)})),t.setLocalSDP=!0,t._ping()},_onAcptC:function(e,t){var n=this;t.ans&&1==t.ans?(o.info("[WebRTC-API] _onAcptC : 104, ans = 1, it is a answer. will onAcceptCall"),n.onAcceptCall(e,t,!1!==t.enableVoice,!1!==t.enableVideo),n._onAnsC(e,t)):WebIM.WebRTC.supportPRAnswer?(o.info("[WebRTC-API] _onAcptC : recv pranswer. "),(t.sdp||t.cands)&&(t.sdp&&n.webRtc.setRemoteDescription(t.sdp),n.setRemoteSDP=!0,n._handRecvCandsOrSend(e,t),n.onAcceptCall(e,t,!1!==t.enableVoice,!1!==t.enableVideo))):(o.info("[WebRTC-API] _onAcptC : not supported pranswer. drop it. will onAcceptCall"),n.setRemoteSDP=!1,n._handRecvCandsOrSend(e,t),n.onAcceptCall(e,t,!1!==t.enableVoice,!1!==t.enableVideo))},_onEvJoin:function(e,t,n,r,i){var s=this;o.debug("_onEvJoin from",i,e),s.onAcceptCall(e,t,!1!==t.enableVoice,!1!==t.enableVideo)},onAcceptCall:function(e,t,n,r){},__onVoiceOrVideo:function(e,t,n){var r=this;!1===t.enableVoice?r.onOtherUserOpenVoice(e,!1):r.onOtherUserOpenVoice(e,!0),!1===t.enableVideo?r.onOtherUserOpenVideo(e,!1):r.onOtherUserOpenVideo(e,!0)},_onStreamControl:function(e,t,n,r,i){var o=this,s=t.controlType;0===s&&o.onOtherUserOpenVoice(e,!1),1===s&&o.onOtherUserOpenVoice(e,!0),2===s&&o.onOtherUserOpenVideo(e,!1),3===s&&o.onOtherUserOpenVideo(e,!0),o.onStreamControl(e,t,n,r,i)},onStreamControl:function(e,t,n,r,i){},onOtherUserOpenVoice:function(e,t){o.debug("from open:",t," voice .",e)},onOtherUserOpenVideo:function(e,t){o.debug("from open:",t," voideo .",e)},_onAnsC:function(e,t){var n=this;o.info("[WebRTC-API] _onAnsC : recv answer. "),n.accepted=!0,t.sdp&&n.webRtc.setRemoteDescription(t.sdp),n.setRemoteSDP=!0,n._handRecvCandsOrSend(e,t),n.__onVoiceOrVideo(e,t)},_onInitC:function(e,t,n,r,i){var s=this;s.isCaller=!1,s.accepted=!1,s.setLocalSDP=!1,s.setRemoteSDP=!1,s.hangup=!1,s.callee=e,s._rtcCfg2=t.rtcCfg,s._rtKey=n,s._tsxId=r,s._fromSid=i,s._rtcId=t.rtcId,s._sessId=t.sessId,s.streamType=t.streamType,s.globalMediaConstaints=t.globalMediaConstaints,s.webRtc.createRtcPeerConnection(s._rtcCfg2),s.callerNotPranswer=0===t.expr,o.warn("caller not pranswer ",s.callerNotPranswer),t.sdp&&o.debug(t.sdp.sdp),t.sdp&&s.webRtc.setRemoteDescription(t.sdp).then((function(){s.setRemoteSDP=!0,s._handRecvCandsOrSend(e,t),WebIM.WebRTC.supportPRAnswer?s.webRtc.createPRAnswer((function(e){s._onGotWebRtcPRAnswer(e),setTimeout((function(){o.info("[WebRTC-API] onRinging : after send pranswer. ",s.callee),s.onRinging(s.callee,s.streamType)}),500)})):(setTimeout((function(){o.info("[WebRTC-API] onRinging : After iniC, cause by: not supported pranswer. ",s.callee),s.onRinging(s.callee,s.streamType)}),500),s._ping())}))},_onGotWebRtcPRAnswer:function(e){var t=this,n=new s({to:t.callee,rtKey:t._rtKey});t.api.acptC(n,t._sessId,t._rtcId,e),t.setLocalSDP=!0,t._handRecvCandsOrSend(),t._ping()},onRinging:function(e,t){},accept:function(){var e=this;function t(){o.info("createAndSendAnswer : ...... "),e.webRtc.createAnswer((function(t){var n=new s({to:e.callee,rtKey:e._rtKey});WebIM.WebRTC.supportPRAnswer?e.webRtc.isConnected()||e.callerNotPranswer?(o.info("[WebRTC-API] ice connected or caller not pranswer, may send answer"),e.api.ansC(n,e._sessId,e._rtcId,t)):(o.info("[WebRTC-API] ice state not connected, send answer waiting."),e.webRtc._hookWhenICEReady=function(){o.info("[WebRTC-API] ice connected, send answer"),e.api.ansC(n,e._sessId,e._rtcId,t)}):e.api.acptC(n,e._sessId,e._rtcId,t,null,1),WebIM.WebRTC.supportPRAnswer||(e.setLocalSDP=!0),e._handRecvCandsOrSend(),e.accepted=!0}))}var n={audio:e.globalMediaConstaints&&e.globalMediaConstaints.audio||!0};"VIDEO"==e.streamType&&(n.video=e.globalMediaConstaints&&e.globalMediaConstaints.video||!0),e.webRtc.createMedia(n,(function(e,n){e.setLocalVideoSrcObject(n),t()}))},_handRecvCandsOrSend:function(e,t){var n=this;setTimeout((function(){n._onTcklC(e,t)}),50),setTimeout((function(){n._onIceCandidate()}),50)},_onTcklC:function(e,t){var n=this;if(n.setRemoteSDP)o.info("[WebRTC-API] recv and add cands."),n._recvCands&&n._recvCands.length>0&&n.webRtc.addIceCandidate(n._recvCands),n._recvCands&&n._recvCands.length>0&&(n._recvCands=[]),t&&t.cands&&n.webRtc.addIceCandidate(t.cands);else if(t&&t.cands&&t.cands.length>0){for(var r=0;r<t.cands.length;r++)(n._recvCands||(n._recvCands=[])).push(t.cands[r]);o.debug("[_onTcklC] temporary memory[recv] ice candidate. util setRemoteSDP = true")}},_onIceStateChange:function(e){var t=this;o.debug("[WebRTC-API] ice state is "+e),t.webRtc.isConnected()&&(t.webRtc._hookWhenICEReady&&t.webRtc._hookWhenICEReady(),t.webRtc._hookWhenICEReady=void 0),"closed"===e&&(t.setLocalSDP=!1,t.setRemoteSDP=!1),t.api.onIceConnectionStateChange(e)},_onIceCandidate:function(e){var t=this;if(t.setLocalSDP){var n=function(e){o.debug("send ice candidate...");var n=new s({to:t.callee,rtKey:t._rtKey});e&&t.api.tcklC(n,t._sessId,t._rtcId,null,e)};t._cands&&t._cands.length>0&&(n(t._cands),t._cands=[]),e&&n(e)}else e&&(t._cands||(t._cands=[])).push(e),o.debug("[_onIceCandidate] temporary memory[send] ice candidate. util setLocalSDP = true")},__termCall1:function(e){var t=this;t._pingIntervalId&&window.clearInterval(t._pingIntervalId);var n,r=new s({to:t.callee,rtKey:t._rtKey});e||!t.isCaller&&!t.accepted&&(n="decline")||(n="success"),t.hangup||t.api.termC(r,t._sessId,t._rtcId,n),t.webRtc.close(),t.hangup=!0,t.setLocalSDP=!1,t.setRemoteSDP=!1,t.onTermCall(e)},termCall:function(e){var t=this;try{t.__termCall1(e)}finally{if(WebIM.__alreadyOpenMedias&&WebIM.__alreadyOpenMedias.length>0){for(var n in WebIM.__alreadyOpenMedias){var r=WebIM.__alreadyOpenMedias[n];try{emedia.stopTracks(r)}catch(i){}}WebIM.__alreadyOpenMedias=[]}}},_onTermC:function(e,t){o.debug("[_onTermC] options.reason = "+t.reason);var n=this;n.hangup=!0,n.setLocalSDP=!1,n.setRemoteSDP=!1,n.termCall(t.reason)},onTermCall:function(){}};e.exports=function(e){var t=this;r.extend(!0,this,a,e||{}),t.init()}},function(e,t,n){"use strict";var r=n(447),i=d(r),o=n(450),s=d(o),a=n(473),c=d(a),u=n(474),f=d(u);function d(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(t,n,r){(0,c.default)(this,e),this.peerconnection=t,this.interval=r,this.call=n,this.temp_storage_obj={KBps:{},network_disconnect:{threshold:3e3,no_data_time:{local:0,remote:0}}},this.local_nw_dis_Tiped=!1,this.remote_nw_dis_Tiped=!1}return(0,f.default)(e,[{key:"start",value:function(){var e=this;this.timer=setInterval((function(){e._get()}),e.interval||2e3)}},{key:"_get",value:function(){var e=(0,s.default)(i.default.mark((function e(){var t,n,r;return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.peerconnection.getStats(null);case 2:t=e.sent,n=this.format_stats(t),r=this,["local","remote"].map((function(e){var t=r._network_disconnect(e,n);if(t&&!r[e+"_nw_dis_Tiped"]){var i=r.call.listener.onNetWorkDisconnect;r[e+"_nw_dis_Tiped"]=!0,i&&"function"==typeof i&&i(e)}}));case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"stop",value:function(){this.timer&&(clearInterval(this.timer),this.timer=null),this.peerconnection=null,this.interval=null,this.temp_storage_obj={KBps:{},network_disconnect:{threshold:5e3,no_data_time:{local:0,remote:0}}}}},{key:"format_stats",value:function(e){if(!e)return e;var t=this,n={};return e.forEach((function(e){var r=void 0,i=void 0,o=void 0,s=void 0;"outbound-rtp"==e.type&&(r=e.kind,i="local",o=e.bytesSent,s=Math.round(e.timestamp)),"inbound-rtp"==e.type&&(r=e.kind,i="remote",o=e.bytesReceived,s=Math.round(e.timestamp)),r&&i&&void 0!=o&&s&&(n[i+"_"+r+"KBps"]=t._get_KBps(i,r,o,s),t.temp_storage_obj["KBps"][r]||(t.temp_storage_obj["KBps"][r]={}),t.temp_storage_obj["KBps"][r][i]={bytes:o,time:s})})),n.time=(new Date).getTime(),n}},{key:"_get_KBps",value:function(e,t,n,r){if(!e||!t||!n)return 0;var i=this.temp_storage_obj["KBps"][t];if(!i||!i[e])return 0;var o=i[e],s=o.time,a=o.bytes,c=parseInt(r-s),u=n-a;u<0&&(u=0);var f=u/(c/1e3).toFixed(2);return f/1e3}},{key:"_network_disconnect",value:function(e,t){if(!e)return!1;var n=this.temp_storage_obj["network_disconnect"].threshold,r=this.temp_storage_obj["network_disconnect"]["no_data_time"],i=r[e],o=t[e+"_audioKBps"],s=t[e+"_videoKBps"],a=t.time;return o||s?(r[e]=0,!1):0==i?(r[e]=a,!1):a-i>=n&&(r[e]=0,!0)}}]),e}();e.exports=l},function(e,t,n){e.exports=n(448)},function(e,t,n){var r=function(){return this}()||Function("return this")(),i=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,o=i&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,e.exports=n(449),i)r.regeneratorRuntime=o;else try{delete r.regeneratorRuntime}catch(s){r.regeneratorRuntime=void 0}},function(e,t){!function(t){"use strict";var n,r=Object.prototype,i=r.hasOwnProperty,o="function"===typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag",u="object"===typeof e,f=t.regeneratorRuntime;if(f)u&&(e.exports=f);else{f=t.regeneratorRuntime=u?e.exports:{},f.wrap=_;var d="suspendedStart",l="suspendedYield",p="executing",h="completed",m={},v={};v[s]=function(){return this};var g=Object.getPrototypeOf,y=g&&g(g(A([])));y&&y!==r&&i.call(y,s)&&(v=y);var b=C.prototype=S.prototype=Object.create(v);x.prototype=b.constructor=C,C.constructor=x,C[c]=x.displayName="GeneratorFunction",f.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===x||"GeneratorFunction"===(t.displayName||t.name))},f.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,C):(e.__proto__=C,c in e||(e[c]="GeneratorFunction")),e.prototype=Object.create(b),e},f.awrap=function(e){return{__await:e}},E(I.prototype),I.prototype[a]=function(){return this},f.AsyncIterator=I,f.async=function(e,t,n,r){var i=new I(_(e,t,n,r));return f.isGeneratorFunction(t)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(b),b[c]="Generator",b[s]=function(){return this},b.toString=function(){return"[object Generator]"},f.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){while(t.length){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},f.values=A,M.prototype={constructor:M,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,i){return a.type="throw",a.arg=e,t.next=r,i&&(t.method="next",t.arg=n),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var c=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:A(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=n),m}}}function _(e,t,n,r){var i=t&&t.prototype instanceof S?t:S,o=Object.create(i.prototype),s=new M(r||[]);return o._invoke=T(e,n,s),o}function w(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(r){return{type:"throw",arg:r}}}function S(){}function x(){}function C(){}function E(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function I(e){function t(n,r,o,s){var a=w(e[n],e,r);if("throw"!==a.type){var c=a.arg,u=c.value;return u&&"object"===typeof u&&i.call(u,"__await")?Promise.resolve(u.__await).then((function(e){t("next",e,o,s)}),(function(e){t("throw",e,o,s)})):Promise.resolve(u).then((function(e){c.value=e,o(c)}),s)}s(a.arg)}var n;function r(e,r){function i(){return new Promise((function(n,i){t(e,r,n,i)}))}return n=n?n.then(i,i):i()}this._invoke=r}function T(e,t,n){var r=d;return function(i,o){if(r===p)throw new Error("Generator is already running");if(r===h){if("throw"===i)throw o;return P()}n.method=i,n.arg=o;while(1){var s=n.delegate;if(s){var a=O(s,n);if(a){if(a===m)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var c=w(e,t,n);if("normal"===c.type){if(r=n.done?h:l,c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=h,n.method="throw",n.arg=c.arg)}}}function O(e,t){var r=e.iterator[t.method];if(r===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=n,O(e,t),"throw"===t.method))return m;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var i=w(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,m;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=n),t.delegate=null,m):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function R(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function M(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(R,this),this.reset(!0)}function A(e){if(e){var t=e[s];if(t)return t.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){while(++r<e.length)if(i.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=n,t.done=!0,t};return o.next=o}}return{next:P}}function P(){return{value:n,done:!0}}}(function(){return this}()||Function("return this")())},function(e,t,n){"use strict";t.__esModule=!0;var r=n(451),i=o(r);function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){return function(){var t=e.apply(this,arguments);return new i.default((function(e,n){function r(o,s){try{var a=t[o](s),c=a.value}catch(u){return void n(u)}if(!a.done)return i.default.resolve(c).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(c)}return r("next")}))}}},function(e,t,n){e.exports={default:n(452),__esModule:!0}},function(e,t,n){n(67),n(6),n(50),n(453),n(471),n(472),e.exports=n(14).Promise},function(e,t,n){"use strict";var r,i,o,s,a=n(11),c=n(13),u=n(15),f=n(454),d=n(12),l=n(20),p=n(16),h=n(455),m=n(456),v=n(460),g=n(461).set,y=n(463)(),b=n(464),_=n(465),w=n(466),S=n(467),x="Promise",C=c.TypeError,E=c.process,I=E&&E.versions,T=I&&I.v8||"",O=c[x],R="process"==f(E),k=function(){},M=i=b.f,A=!!function(){try{var e=O.resolve(1),t=(e.constructor={})[n(47)("species")]=function(e){e(k,k)};return(R||"function"==typeof PromiseRejectionEvent)&&e.then(k)instanceof t&&0!==T.indexOf("6.6")&&-1===w.indexOf("Chrome/66")}catch(r){}}(),P=function(e){var t;return!(!l(e)||"function"!=typeof(t=e.then))&&t},j=function(e,t){if(!e._n){e._n=!0;var n=e._c;y((function(){var r=e._v,i=1==e._s,o=0,s=function(t){var n,o,s,a=i?t.ok:t.fail,c=t.resolve,u=t.reject,f=t.domain;try{a?(i||(2==e._h&&D(e),e._h=1),!0===a?n=r:(f&&f.enter(),n=a(r),f&&(f.exit(),s=!0)),n===t.promise?u(C("Promise-chain cycle")):(o=P(n))?o.call(n,c,u):c(n)):u(r)}catch(d){f&&!s&&f.exit(),u(d)}};while(n.length>o)s(n[o++]);e._c=[],e._n=!1,t&&!e._h&&N(e)}))}},N=function(e){g.call(c,(function(){var t,n,r,i=e._v,o=L(e);if(o&&(t=_((function(){R?E.emit("unhandledRejection",i,e):(n=c.onunhandledrejection)?n({promise:e,reason:i}):(r=c.console)&&r.error&&r.error("Unhandled promise rejection",i)})),e._h=R||L(e)?2:1),e._a=void 0,o&&t.e)throw t.v}))},L=function(e){return 1!==e._h&&0===(e._a||e._c).length},D=function(e){g.call(c,(function(){var t;R?E.emit("rejectionHandled",e):(t=c.onrejectionhandled)&&t({promise:e,reason:e._v})}))},B=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),j(t,!0))},U=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw C("Promise can't be resolved itself");(t=P(e))?y((function(){var r={_w:n,_d:!1};try{t.call(e,u(U,r,1),u(B,r,1))}catch(i){B.call(r,i)}})):(n._v=e,n._s=1,j(n,!1))}catch(r){B.call({_w:n,_d:!1},r)}}};A||(O=function(e){h(this,O,x,"_h"),p(e),r.call(this);try{e(u(U,this,1),u(B,this,1))}catch(t){B.call(this,t)}},r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=n(468)(O.prototype,{then:function(e,t){var n=M(v(this,O));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=R?E.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&j(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new r;this.promise=e,this.resolve=u(U,e,1),this.reject=u(B,e,1)},b.f=M=function(e){return e===O||e===s?new o(e):i(e)}),d(d.G+d.W+d.F*!A,{Promise:O}),n(46)(O,x),n(469)(x),s=n(14)[x],d(d.S+d.F*!A,x,{reject:function(e){var t=M(this),n=t.reject;return n(e),t.promise}}),d(d.S+d.F*(a||!A),x,{resolve:function(e){return S(a&&this===s?O:this,e)}}),d(d.S+d.F*!(A&&n(470)((function(e){O.all(e)["catch"](k)}))),x,{all:function(e){var t=this,n=M(t),r=n.resolve,i=n.reject,o=_((function(){var n=[],o=0,s=1;m(e,!1,(function(e){var a=o++,c=!1;n.push(void 0),s++,t.resolve(e).then((function(e){c||(c=!0,n[a]=e,--s||r(n))}),i)})),--s||r(n)}));return o.e&&i(o.v),n.promise},race:function(e){var t=this,n=M(t),r=n.reject,i=_((function(){m(e,!1,(function(e){t.resolve(e).then(n.resolve,r)}))}));return i.e&&r(i.v),n.promise}})},function(e,t,n){var r=n(37),i=n(47)("toStringTag"),o="Arguments"==r(function(){return arguments}()),s=function(e,t){try{return e[t]}catch(n){}};e.exports=function(e){var t,n,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=s(t=Object(e),i))?n:o?r(t):"Object"==(a=r(t))&&"function"==typeof t.callee?"Arguments":a}},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var r=n(15),i=n(457),o=n(458),s=n(19),a=n(39),c=n(459),u={},f={};t=e.exports=function(e,t,n,d,l){var p,h,m,v,g=l?function(){return e}:c(e),y=r(n,d,t?2:1),b=0;if("function"!=typeof g)throw TypeError(e+" is not iterable!");if(o(g)){for(p=a(e.length);p>b;b++)if(v=t?y(s(h=e[b])[0],h[1]):y(e[b]),v===u||v===f)return v}else for(m=g.call(e);!(h=m.next()).done;)if(v=i(m,y,h.value,t),v===u||v===f)return v};t.BREAK=u,t.RETURN=f},function(e,t,n){var r=n(19);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(s){var o=e["return"];throw void 0!==o&&r(o.call(e)),s}}},function(e,t,n){var r=n(29),i=n(47)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[i]===e)}},function(e,t,n){var r=n(454),i=n(47)("iterator"),o=n(29);e.exports=n(14).getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||o[r(e)]}},function(e,t,n){var r=n(19),i=n(16),o=n(47)("species");e.exports=function(e,t){var n,s=r(e).constructor;return void 0===s||void 0==(n=r(s)[o])?t:i(n)}},function(e,t,n){var r,i,o,s=n(15),a=n(462),c=n(45),u=n(24),f=n(13),d=f.process,l=f.setImmediate,p=f.clearImmediate,h=f.MessageChannel,m=f.Dispatch,v=0,g={},y="onreadystatechange",b=function(){var e=+this;if(g.hasOwnProperty(e)){var t=g[e];delete g[e],t()}},_=function(e){b.call(e.data)};l&&p||(l=function(e){var t=[],n=1;while(arguments.length>n)t.push(arguments[n++]);return g[++v]=function(){a("function"==typeof e?e:Function(e),t)},r(v),v},p=function(e){delete g[e]},"process"==n(37)(d)?r=function(e){d.nextTick(s(b,e,1))}:m&&m.now?r=function(e){m.now(s(b,e,1))}:h?(i=new h,o=i.port2,i.port1.onmessage=_,r=s(o.postMessage,o,1)):f.addEventListener&&"function"==typeof postMessage&&!f.importScripts?(r=function(e){f.postMessage(e+"","*")},f.addEventListener("message",_,!1)):r=y in u("script")?function(e){c.appendChild(u("script"))[y]=function(){c.removeChild(this),b.call(e)}}:function(e){setTimeout(s(b,e,1),0)}),e.exports={set:l,clear:p}},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var r=n(13),i=n(461).set,o=r.MutationObserver||r.WebKitMutationObserver,s=r.process,a=r.Promise,c="process"==n(37)(s);e.exports=function(){var e,t,n,u=function(){var r,i;c&&(r=s.domain)&&r.exit();while(e){i=e.fn,e=e.next;try{i()}catch(o){throw e?n():t=void 0,o}}t=void 0,r&&r.enter()};if(c)n=function(){s.nextTick(u)};else if(!o||r.navigator&&r.navigator.standalone)if(a&&a.resolve){var f=a.resolve(void 0);n=function(){f.then(u)}}else n=function(){i.call(r,u)};else{var d=!0,l=document.createTextNode("");new o(u).observe(l,{characterData:!0}),n=function(){l.data=d=!d}}return function(r){var i={fn:r,next:void 0};t&&(t.next=i),e||(e=i,n()),t=i}}},function(e,t,n){"use strict";var r=n(16);function i(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)}e.exports.f=function(e){return new i(e)}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(t){return{e:!0,v:t}}}},function(e,t,n){var r=n(13),i=r.navigator;e.exports=i&&i.userAgent||""},function(e,t,n){var r=n(19),i=n(20),o=n(464);e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=o.f(e),s=n.resolve;return s(t),n.promise}},function(e,t,n){var r=n(17);e.exports=function(e,t,n){for(var i in t)n&&e[i]?e[i]=t[i]:r(e,i,t[i]);return e}},function(e,t,n){"use strict";var r=n(13),i=n(14),o=n(18),s=n(22),a=n(47)("species");e.exports=function(e){var t="function"==typeof i[e]?i[e]:r[e];s&&t&&!t[a]&&o.f(t,a,{configurable:!0,get:function(){return this}})}},function(e,t,n){var r=n(47)("iterator"),i=!1;try{var o=[7][r]();o["return"]=function(){i=!0},Array.from(o,(function(){throw 2}))}catch(s){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},e(o)}catch(s){}return n}},function(e,t,n){"use strict";var r=n(12),i=n(14),o=n(13),s=n(460),a=n(467);r(r.P+r.R,"Promise",{finally:function(e){var t=s(this,i.Promise||o.Promise),n="function"==typeof e;return this.then(n?function(n){return a(t,e()).then((function(){return n}))}:e,n?function(n){return a(t,e()).then((function(){throw n}))}:e)}})},function(e,t,n){"use strict";var r=n(12),i=n(464),o=n(465);r(r.S,"Promise",{try:function(e){var t=i.f(this),n=o(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}})},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){"use strict";t.__esModule=!0;var r=n(475),i=o(r);function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,i.default)(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},function(e,t,n){e.exports={default:n(476),__esModule:!0}},function(e,t,n){n(477);var r=n(14).Object;e.exports=function(e,t,n){return r.defineProperty(e,t,n)}},function(e,t,n){var r=n(12);r(r.S+r.F*!n(22),"Object",{defineProperty:n(18).f})}])}))},2877:function(e,t,n){"use strict";function r(e,t,n,r,i,o,s,a){var c,u="function"===typeof e?e.options:e;if(t&&(u.render=t,u.staticRenderFns=n,u._compiled=!0),r&&(u.functional=!0),o&&(u._scopeId="data-v-"+o),s?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},u._ssrRegister=c):i&&(c=a?function(){i.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:i),c)if(u.functional){u._injectStyles=c;var f=u.render;u.render=function(e,t){return c.call(t),f(e,t)}}else{var d=u.beforeCreate;u.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:u}}n.d(t,"a",(function(){return r}))},2954:function(e,t,n){"use strict";var r=n("ebb5"),i=n("4840"),o=n("d039"),s=r.aTypedArray,a=r.aTypedArrayConstructor,c=r.exportTypedArrayMethod,u=[].slice,f=o((function(){new Int8Array(1).slice()}));c("slice",(function(e,t){var n=u.call(s(this),e,t),r=i(this,this.constructor),o=0,c=n.length,f=new(a(r))(c);while(c>o)f[o]=n[o++];return f}),f)},"2cf4":function(e,t,n){var r,i,o,s=n("da84"),a=n("d039"),c=n("c6b6"),u=n("0366"),f=n("1be4"),d=n("cc12"),l=n("1cdc"),p=s.location,h=s.setImmediate,m=s.clearImmediate,v=s.process,g=s.MessageChannel,y=s.Dispatch,b=0,_={},w="onreadystatechange",S=function(e){if(_.hasOwnProperty(e)){var t=_[e];delete _[e],t()}},x=function(e){return function(){S(e)}},C=function(e){S(e.data)},E=function(e){s.postMessage(e+"",p.protocol+"//"+p.host)};h&&m||(h=function(e){var t=[],n=1;while(arguments.length>n)t.push(arguments[n++]);return _[++b]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},r(b),b},m=function(e){delete _[e]},"process"==c(v)?r=function(e){v.nextTick(x(e))}:y&&y.now?r=function(e){y.now(x(e))}:g&&!l?(i=new g,o=i.port2,i.port1.onmessage=C,r=u(o.postMessage,o,1)):!s.addEventListener||"function"!=typeof postMessage||s.importScripts||a(E)||"file:"===p.protocol?r=w in d("script")?function(e){f.appendChild(d("script"))[w]=function(){f.removeChild(this),S(e)}}:function(e){setTimeout(x(e),0)}:(r=E,s.addEventListener("message",C,!1))),e.exports={set:h,clear:m}},"2d00":function(e,t,n){var r,i,o=n("da84"),s=n("342f"),a=o.process,c=a&&a.versions,u=c&&c.v8;u?(r=u.split("."),i=r[0]+r[1]):s&&(r=s.match(/Edge\/(\d+)/),(!r||r[1]>=74)&&(r=s.match(/Chrome\/(\d+)/),r&&(i=r[1]))),e.exports=i&&+i},"2d83":function(e,t,n){"use strict";var r=n("387f");e.exports=function(e,t,n,i,o){var s=new Error(e);return r(s,t,n,i,o)}},"2e67":function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},"2f62":function(e,t,n){"use strict";
/**
 * vuex v3.1.0
 * (c) 2019 Evan You
 * @license MIT
 */
function r(e){var t=Number(e.version.split(".")[0]);if(t>=2)e.mixin({beforeCreate:r});else{var n=e.prototype._init;e.prototype._init=function(e){void 0===e&&(e={}),e.init=e.init?[r].concat(e.init):r,n.call(this,e)}}function r(){var e=this.$options;e.store?this.$store="function"===typeof e.store?e.store():e.store:e.parent&&e.parent.$store&&(this.$store=e.parent.$store)}}n.d(t,"c",(function(){return M})),n.d(t,"b",(function(){return A}));var i="undefined"!==typeof window&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function o(e){i&&(e._devtoolHook=i,i.emit("vuex:init",e),i.on("vuex:travel-to-state",(function(t){e.replaceState(t)})),e.subscribe((function(e,t){i.emit("vuex:mutation",e,t)})))}function s(e,t){Object.keys(e).forEach((function(n){return t(e[n],n)}))}function a(e){return null!==e&&"object"===typeof e}function c(e){return e&&"function"===typeof e.then}var u=function(e,t){this.runtime=t,this._children=Object.create(null),this._rawModule=e;var n=e.state;this.state=("function"===typeof n?n():n)||{}},f={namespaced:{configurable:!0}};f.namespaced.get=function(){return!!this._rawModule.namespaced},u.prototype.addChild=function(e,t){this._children[e]=t},u.prototype.removeChild=function(e){delete this._children[e]},u.prototype.getChild=function(e){return this._children[e]},u.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)},u.prototype.forEachChild=function(e){s(this._children,e)},u.prototype.forEachGetter=function(e){this._rawModule.getters&&s(this._rawModule.getters,e)},u.prototype.forEachAction=function(e){this._rawModule.actions&&s(this._rawModule.actions,e)},u.prototype.forEachMutation=function(e){this._rawModule.mutations&&s(this._rawModule.mutations,e)},Object.defineProperties(u.prototype,f);var d=function(e){this.register([],e,!1)};function l(e,t,n){if(t.update(n),n.modules)for(var r in n.modules){if(!t.getChild(r))return void 0;l(e.concat(r),t.getChild(r),n.modules[r])}}d.prototype.get=function(e){return e.reduce((function(e,t){return e.getChild(t)}),this.root)},d.prototype.getNamespace=function(e){var t=this.root;return e.reduce((function(e,n){return t=t.getChild(n),e+(t.namespaced?n+"/":"")}),"")},d.prototype.update=function(e){l([],this.root,e)},d.prototype.register=function(e,t,n){var r=this;void 0===n&&(n=!0);var i=new u(t,n);if(0===e.length)this.root=i;else{var o=this.get(e.slice(0,-1));o.addChild(e[e.length-1],i)}t.modules&&s(t.modules,(function(t,i){r.register(e.concat(i),t,n)}))},d.prototype.unregister=function(e){var t=this.get(e.slice(0,-1)),n=e[e.length-1];t.getChild(n).runtime&&t.removeChild(n)};var p;var h=function(e){var t=this;void 0===e&&(e={}),!p&&"undefined"!==typeof window&&window.Vue&&O(window.Vue);var n=e.plugins;void 0===n&&(n=[]);var r=e.strict;void 0===r&&(r=!1),this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new d(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._watcherVM=new p;var i=this,s=this,a=s.dispatch,c=s.commit;this.dispatch=function(e,t){return a.call(i,e,t)},this.commit=function(e,t,n){return c.call(i,e,t,n)},this.strict=r;var u=this._modules.root.state;b(this,u,[],this._modules.root),y(this,u),n.forEach((function(e){return e(t)}));var f=void 0!==e.devtools?e.devtools:p.config.devtools;f&&o(this)},m={state:{configurable:!0}};function v(e,t){return t.indexOf(e)<0&&t.push(e),function(){var n=t.indexOf(e);n>-1&&t.splice(n,1)}}function g(e,t){e._actions=Object.create(null),e._mutations=Object.create(null),e._wrappedGetters=Object.create(null),e._modulesNamespaceMap=Object.create(null);var n=e.state;b(e,n,[],e._modules.root,!0),y(e,n,t)}function y(e,t,n){var r=e._vm;e.getters={};var i=e._wrappedGetters,o={};s(i,(function(t,n){o[n]=function(){return t(e)},Object.defineProperty(e.getters,n,{get:function(){return e._vm[n]},enumerable:!0})}));var a=p.config.silent;p.config.silent=!0,e._vm=new p({data:{$$state:t},computed:o}),p.config.silent=a,e.strict&&E(e),r&&(n&&e._withCommit((function(){r._data.$$state=null})),p.nextTick((function(){return r.$destroy()})))}function b(e,t,n,r,i){var o=!n.length,s=e._modules.getNamespace(n);if(r.namespaced&&(e._modulesNamespaceMap[s]=r),!o&&!i){var a=I(t,n.slice(0,-1)),c=n[n.length-1];e._withCommit((function(){p.set(a,c,r.state)}))}var u=r.context=_(e,s,n);r.forEachMutation((function(t,n){var r=s+n;S(e,r,t,u)})),r.forEachAction((function(t,n){var r=t.root?n:s+n,i=t.handler||t;x(e,r,i,u)})),r.forEachGetter((function(t,n){var r=s+n;C(e,r,t,u)})),r.forEachChild((function(r,o){b(e,t,n.concat(o),r,i)}))}function _(e,t,n){var r=""===t,i={dispatch:r?e.dispatch:function(n,r,i){var o=T(n,r,i),s=o.payload,a=o.options,c=o.type;return a&&a.root||(c=t+c),e.dispatch(c,s)},commit:r?e.commit:function(n,r,i){var o=T(n,r,i),s=o.payload,a=o.options,c=o.type;a&&a.root||(c=t+c),e.commit(c,s,a)}};return Object.defineProperties(i,{getters:{get:r?function(){return e.getters}:function(){return w(e,t)}},state:{get:function(){return I(e.state,n)}}}),i}function w(e,t){var n={},r=t.length;return Object.keys(e.getters).forEach((function(i){if(i.slice(0,r)===t){var o=i.slice(r);Object.defineProperty(n,o,{get:function(){return e.getters[i]},enumerable:!0})}})),n}function S(e,t,n,r){var i=e._mutations[t]||(e._mutations[t]=[]);i.push((function(t){n.call(e,r.state,t)}))}function x(e,t,n,r){var i=e._actions[t]||(e._actions[t]=[]);i.push((function(t,i){var o=n.call(e,{dispatch:r.dispatch,commit:r.commit,getters:r.getters,state:r.state,rootGetters:e.getters,rootState:e.state},t,i);return c(o)||(o=Promise.resolve(o)),e._devtoolHook?o.catch((function(t){throw e._devtoolHook.emit("vuex:error",t),t})):o}))}function C(e,t,n,r){e._wrappedGetters[t]||(e._wrappedGetters[t]=function(e){return n(r.state,r.getters,e.state,e.getters)})}function E(e){e._vm.$watch((function(){return this._data.$$state}),(function(){0}),{deep:!0,sync:!0})}function I(e,t){return t.length?t.reduce((function(e,t){return e[t]}),e):e}function T(e,t,n){return a(e)&&e.type&&(n=t,t=e,e=e.type),{type:e,payload:t,options:n}}function O(e){p&&e===p||(p=e,r(p))}m.state.get=function(){return this._vm._data.$$state},m.state.set=function(e){0},h.prototype.commit=function(e,t,n){var r=this,i=T(e,t,n),o=i.type,s=i.payload,a=(i.options,{type:o,payload:s}),c=this._mutations[o];c&&(this._withCommit((function(){c.forEach((function(e){e(s)}))})),this._subscribers.forEach((function(e){return e(a,r.state)})))},h.prototype.dispatch=function(e,t){var n=this,r=T(e,t),i=r.type,o=r.payload,s={type:i,payload:o},a=this._actions[i];if(a){try{this._actionSubscribers.filter((function(e){return e.before})).forEach((function(e){return e.before(s,n.state)}))}catch(u){0}var c=a.length>1?Promise.all(a.map((function(e){return e(o)}))):a[0](o);return c.then((function(e){try{n._actionSubscribers.filter((function(e){return e.after})).forEach((function(e){return e.after(s,n.state)}))}catch(u){0}return e}))}},h.prototype.subscribe=function(e){return v(e,this._subscribers)},h.prototype.subscribeAction=function(e){var t="function"===typeof e?{before:e}:e;return v(t,this._actionSubscribers)},h.prototype.watch=function(e,t,n){var r=this;return this._watcherVM.$watch((function(){return e(r.state,r.getters)}),t,n)},h.prototype.replaceState=function(e){var t=this;this._withCommit((function(){t._vm._data.$$state=e}))},h.prototype.registerModule=function(e,t,n){void 0===n&&(n={}),"string"===typeof e&&(e=[e]),this._modules.register(e,t),b(this,this.state,e,this._modules.get(e),n.preserveState),y(this,this.state)},h.prototype.unregisterModule=function(e){var t=this;"string"===typeof e&&(e=[e]),this._modules.unregister(e),this._withCommit((function(){var n=I(t.state,e.slice(0,-1));p.delete(n,e[e.length-1])})),g(this)},h.prototype.hotUpdate=function(e){this._modules.update(e),g(this,!0)},h.prototype._withCommit=function(e){var t=this._committing;this._committing=!0,e(),this._committing=t},Object.defineProperties(h.prototype,m);var R=N((function(e,t){var n={};return j(t).forEach((function(t){var r=t.key,i=t.val;n[r]=function(){var t=this.$store.state,n=this.$store.getters;if(e){var r=L(this.$store,"mapState",e);if(!r)return;t=r.context.state,n=r.context.getters}return"function"===typeof i?i.call(this,t,n):t[i]},n[r].vuex=!0})),n})),k=N((function(e,t){var n={};return j(t).forEach((function(t){var r=t.key,i=t.val;n[r]=function(){var t=[],n=arguments.length;while(n--)t[n]=arguments[n];var r=this.$store.commit;if(e){var o=L(this.$store,"mapMutations",e);if(!o)return;r=o.context.commit}return"function"===typeof i?i.apply(this,[r].concat(t)):r.apply(this.$store,[i].concat(t))}})),n})),M=N((function(e,t){var n={};return j(t).forEach((function(t){var r=t.key,i=t.val;i=e+i,n[r]=function(){if(!e||L(this.$store,"mapGetters",e))return this.$store.getters[i]},n[r].vuex=!0})),n})),A=N((function(e,t){var n={};return j(t).forEach((function(t){var r=t.key,i=t.val;n[r]=function(){var t=[],n=arguments.length;while(n--)t[n]=arguments[n];var r=this.$store.dispatch;if(e){var o=L(this.$store,"mapActions",e);if(!o)return;r=o.context.dispatch}return"function"===typeof i?i.apply(this,[r].concat(t)):r.apply(this.$store,[i].concat(t))}})),n})),P=function(e){return{mapState:R.bind(null,e),mapGetters:M.bind(null,e),mapMutations:k.bind(null,e),mapActions:A.bind(null,e)}};function j(e){return Array.isArray(e)?e.map((function(e){return{key:e,val:e}})):Object.keys(e).map((function(t){return{key:t,val:e[t]}}))}function N(e){return function(t,n){return"string"!==typeof t?(n=t,t=""):"/"!==t.charAt(t.length-1)&&(t+="/"),e(t,n)}}function L(e,t,n){var r=e._modulesNamespaceMap[n];return r}var D={Store:h,install:O,version:"3.1.0",mapState:R,mapMutations:k,mapGetters:M,mapActions:A,createNamespacedHelpers:P};t["a"]=D},"2f9a":function(e,t){e.exports=function(){}},"301c":function(e,t,n){n("e198")("asyncIterator")},"30b5":function(e,t,n){"use strict";var r=n("c532");function i(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(r.isURLSearchParams(t))o=t.toString();else{var s=[];r.forEach(t,(function(e,t){null!==e&&"undefined"!==typeof e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),s.push(i(t)+"="+i(e))})))})),o=s.join("&")}return o&&(e+=(-1===e.indexOf("?")?"?":"&")+o),e}},"323e":function(e,t,n){var r,i;
/* NProgress, (c) 2013, 2014 Rico Sta. Cruz - http://ricostacruz.com/nprogress
 * @license MIT */(function(o,s){r=s,i="function"===typeof r?r.call(t,n,t,e):r,void 0===i||(e.exports=i)})(0,(function(){var e={version:"0.2.0"},t=e.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};function n(e,t,n){return e<t?t:e>n?n:e}function r(e){return 100*(-1+e)}function i(e,n,i){var o;return o="translate3d"===t.positionUsing?{transform:"translate3d("+r(e)+"%,0,0)"}:"translate"===t.positionUsing?{transform:"translate("+r(e)+"%,0)"}:{"margin-left":r(e)+"%"},o.transition="all "+n+"ms "+i,o}e.configure=function(e){var n,r;for(n in e)r=e[n],void 0!==r&&e.hasOwnProperty(n)&&(t[n]=r);return this},e.status=null,e.set=function(r){var a=e.isStarted();r=n(r,t.minimum,1),e.status=1===r?null:r;var c=e.render(!a),u=c.querySelector(t.barSelector),f=t.speed,d=t.easing;return c.offsetWidth,o((function(n){""===t.positionUsing&&(t.positionUsing=e.getPositioningCSS()),s(u,i(r,f,d)),1===r?(s(c,{transition:"none",opacity:1}),c.offsetWidth,setTimeout((function(){s(c,{transition:"all "+f+"ms linear",opacity:0}),setTimeout((function(){e.remove(),n()}),f)}),f)):setTimeout(n,f)})),this},e.isStarted=function(){return"number"===typeof e.status},e.start=function(){e.status||e.set(0);var n=function(){setTimeout((function(){e.status&&(e.trickle(),n())}),t.trickleSpeed)};return t.trickle&&n(),this},e.done=function(t){return t||e.status?e.inc(.3+.5*Math.random()).set(1):this},e.inc=function(t){var r=e.status;return r?("number"!==typeof t&&(t=(1-r)*n(Math.random()*r,.1,.95)),r=n(r+t,0,.994),e.set(r)):e.start()},e.trickle=function(){return e.inc(Math.random()*t.trickleRate)},function(){var t=0,n=0;e.promise=function(r){return r&&"resolved"!==r.state()?(0===n&&e.start(),t++,n++,r.always((function(){n--,0===n?(t=0,e.done()):e.set((t-n)/t)})),this):this}}(),e.render=function(n){if(e.isRendered())return document.getElementById("nprogress");c(document.documentElement,"nprogress-busy");var i=document.createElement("div");i.id="nprogress",i.innerHTML=t.template;var o,a=i.querySelector(t.barSelector),u=n?"-100":r(e.status||0),f=document.querySelector(t.parent);return s(a,{transition:"all 0 linear",transform:"translate3d("+u+"%,0,0)"}),t.showSpinner||(o=i.querySelector(t.spinnerSelector),o&&d(o)),f!=document.body&&c(f,"nprogress-custom-parent"),f.appendChild(i),i},e.remove=function(){u(document.documentElement,"nprogress-busy"),u(document.querySelector(t.parent),"nprogress-custom-parent");var e=document.getElementById("nprogress");e&&d(e)},e.isRendered=function(){return!!document.getElementById("nprogress")},e.getPositioningCSS=function(){var e=document.body.style,t="WebkitTransform"in e?"Webkit":"MozTransform"in e?"Moz":"msTransform"in e?"ms":"OTransform"in e?"O":"";return t+"Perspective"in e?"translate3d":t+"Transform"in e?"translate":"margin"};var o=function(){var e=[];function t(){var n=e.shift();n&&n(t)}return function(n){e.push(n),1==e.length&&t()}}(),s=function(){var e=["Webkit","O","Moz","ms"],t={};function n(e){return e.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,(function(e,t){return t.toUpperCase()}))}function r(t){var n=document.body.style;if(t in n)return t;var r,i=e.length,o=t.charAt(0).toUpperCase()+t.slice(1);while(i--)if(r=e[i]+o,r in n)return r;return t}function i(e){return e=n(e),t[e]||(t[e]=r(e))}function o(e,t,n){t=i(t),e.style[t]=n}return function(e,t){var n,r,i=arguments;if(2==i.length)for(n in t)r=t[n],void 0!==r&&t.hasOwnProperty(n)&&o(e,n,r);else o(e,i[1],i[2])}}();function a(e,t){var n="string"==typeof e?e:f(e);return n.indexOf(" "+t+" ")>=0}function c(e,t){var n=f(e),r=n+t;a(n,t)||(e.className=r.substring(1))}function u(e,t){var n,r=f(e);a(e,t)&&(n=r.replace(" "+t+" "," "),e.className=n.substring(1,n.length-1))}function f(e){return(" "+(e.className||"")+" ").replace(/\s+/gi," ")}function d(e){e&&e.parentNode&&e.parentNode.removeChild(e)}return e}))},3280:function(e,t,n){"use strict";var r=n("ebb5"),i=n("e58c"),o=r.aTypedArray,s=r.exportTypedArrayMethod;s("lastIndexOf",(function(e){return i.apply(o(this),arguments)}))},3397:function(e,t,n){var r=n("7a41");e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},"342f":function(e,t,n){var r=n("d066");e.exports=r("navigator","userAgent")||""},"35a1":function(e,t,n){var r=n("f5df"),i=n("3f8c"),o=n("b622"),s=o("iterator");e.exports=function(e){if(void 0!=e)return e[s]||e["@@iterator"]||i[r(e)]}},"37e8":function(e,t,n){var r=n("83ab"),i=n("9bf2"),o=n("825a"),s=n("df75");e.exports=r?Object.defineProperties:function(e,t){o(e);var n,r=s(t),a=r.length,c=0;while(a>c)i.f(e,n=r[c++],t[n]);return e}},"387f":function(e,t,n){"use strict";e.exports=function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e}},3934:function(e,t,n){"use strict";var r=n("c532");e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=i(window.location.href),function(t){var n=r.isString(t)?i(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return function(){return!0}}()},"393a":function(e,t,n){"use strict";var r=n("e444"),i=n("512c"),o=n("ba01"),s=n("051b"),a=n("8a0d"),c=n("26dd"),u=n("92f0"),f=n("ce7a"),d=n("cc15")("iterator"),l=!([].keys&&"next"in[].keys()),p="@@iterator",h="keys",m="values",v=function(){return this};e.exports=function(e,t,n,g,y,b,_){c(n,t,g);var w,S,x,C=function(e){if(!l&&e in O)return O[e];switch(e){case h:return function(){return new n(this,e)};case m:return function(){return new n(this,e)}}return function(){return new n(this,e)}},E=t+" Iterator",I=y==m,T=!1,O=e.prototype,R=O[d]||O[p]||y&&O[y],k=R||C(y),M=y?I?C("entries"):k:void 0,A="Array"==t&&O.entries||R;if(A&&(x=f(A.call(new e)),x!==Object.prototype&&x.next&&(u(x,E,!0),r||"function"==typeof x[d]||s(x,d,v))),I&&R&&R.name!==m&&(T=!0,k=function(){return R.call(this)}),r&&!_||!l&&!T&&O[d]||s(O,d,k),a[t]=k,a[E]=v,y)if(w={values:I?k:C(m),keys:b?k:C(h),entries:M},_)for(S in w)S in O||o(O,S,w[S]);else i(i.P+i.F*(l||T),t,w);return w}},"39ad":function(e,t,n){var r=n("6ca1"),i=n("d16a"),o=n("9d11");e.exports=function(e){return function(t,n,s){var a,c=r(t),u=i(c.length),f=o(s,u);if(e&&n!=n){while(u>f)if(a=c[f++],a!=a)return!0}else for(;u>f;f++)if((e||f in c)&&c[f]===n)return e||f||0;return!e&&-1}}},"3a7b":function(e,t,n){"use strict";var r=n("ebb5"),i=n("b727").findIndex,o=r.aTypedArray,s=r.exportTypedArrayMethod;s("findIndex",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},"3bbe":function(e,t,n){var r=n("861d");e.exports=function(e){if(!r(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},"3c4e":function(e,t,n){"use strict";var r=function(e){return i(e)&&!o(e)};function i(e){return!!e&&"object"===typeof e}function o(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||c(e)}var s="function"===typeof Symbol&&Symbol.for,a=s?Symbol.for("react.element"):60103;function c(e){return e.$$typeof===a}function u(e){return Array.isArray(e)?[]:{}}function f(e,t){var n=t&&!0===t.clone;return n&&r(e)?p(u(e),e,t):e}function d(e,t,n){var i=e.slice();return t.forEach((function(t,o){"undefined"===typeof i[o]?i[o]=f(t,n):r(t)?i[o]=p(e[o],t,n):-1===e.indexOf(t)&&i.push(f(t,n))})),i}function l(e,t,n){var i={};return r(e)&&Object.keys(e).forEach((function(t){i[t]=f(e[t],n)})),Object.keys(t).forEach((function(o){r(t[o])&&e[o]?i[o]=p(e[o],t[o],n):i[o]=f(t[o],n)})),i}function p(e,t,n){var r=Array.isArray(t),i=Array.isArray(e),o=n||{arrayMerge:d},s=r===i;if(s){if(r){var a=o.arrayMerge||d;return a(e,t,n)}return l(e,t,n)}return f(t,n)}p.all=function(e,t){if(!Array.isArray(e)||e.length<2)throw new Error("first argument should be an array with at least two elements");return e.reduce((function(e,n){return p(e,n,t)}))};var h=p;e.exports=h},"3c5d":function(e,t,n){"use strict";var r=n("ebb5"),i=n("50c4"),o=n("182d"),s=n("7b0b"),a=n("d039"),c=r.aTypedArray,u=r.exportTypedArrayMethod,f=a((function(){new Int8Array(1).set({})}));u("set",(function(e){c(this);var t=o(arguments.length>1?arguments[1]:void 0,1),n=this.length,r=s(e),a=i(r.length),u=0;if(a+t>n)throw RangeError("Wrong length");while(u<a)this[t+u]=r[u++]}),f)},"3ca3":function(e,t,n){"use strict";var r=n("6547").charAt,i=n("69f3"),o=n("7dd0"),s="String Iterator",a=i.set,c=i.getterFor(s);o(String,"String",(function(e){a(this,{type:s,string:String(e),index:0})}),(function(){var e,t=c(this),n=t.string,i=t.index;return i>=n.length?{value:void 0,done:!0}:(e=r(n,i),t.index+=e.length,{value:e,done:!1})}))},"3e8f":function(e,t){},"3f6b":function(e,t,n){e.exports={default:n("b9c7"),__esModule:!0}},"3f8c":function(e,t){e.exports={}},"3fcc":function(e,t,n){"use strict";var r=n("ebb5"),i=n("b727").map,o=n("4840"),s=r.aTypedArray,a=r.aTypedArrayConstructor,c=r.exportTypedArrayMethod;c("map",(function(e){return i(s(this),e,arguments.length>1?arguments[1]:void 0,(function(e,t){return new(a(o(e,e.constructor)))(t)}))}))},4160:function(e,t,n){"use strict";var r=n("23e7"),i=n("17c2");r({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},"41b2":function(e,t,n){"use strict";t.__esModule=!0;var r=n("3f6b"),i=o(r);function o(e){return e&&e.__esModule?e:{default:e}}t.default=i.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}},"428f":function(e,t,n){var r=n("da84");e.exports=r},4362:function(e,t,n){t.nextTick=function(e){var t=Array.prototype.slice.call(arguments);t.shift(),setTimeout((function(){e.apply(null,t)}),0)},t.platform=t.arch=t.execPath=t.title="browser",t.pid=1,t.browser=!0,t.env={},t.argv=[],t.binding=function(e){throw new Error("No such module. (Possibly not yet loaded)")},function(){var e,r="/";t.cwd=function(){return r},t.chdir=function(t){e||(e=n("df7c")),r=e.resolve(t,r)}}(),t.exit=t.kill=t.umask=t.dlopen=t.uptime=t.memoryUsage=t.uvCounters=function(){},t.features={}},"44ad":function(e,t,n){var r=n("d039"),i=n("c6b6"),o="".split;e.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==i(e)?o.call(e,""):Object(e)}:Object},"44d2":function(e,t,n){var r=n("b622"),i=n("7c73"),o=n("9bf2"),s=r("unscopables"),a=Array.prototype;void 0==a[s]&&o.f(a,s,{configurable:!0,value:i(null)}),e.exports=function(e){a[s][e]=!0}},"44de":function(e,t,n){var r=n("da84");e.exports=function(e,t){var n=r.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}},"44e7":function(e,t,n){var r=n("861d"),i=n("c6b6"),o=n("b622"),s=o("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[s])?!!t:"RegExp"==i(e))}},"466d":function(e,t,n){"use strict";var r=n("d784"),i=n("825a"),o=n("50c4"),s=n("1d80"),a=n("8aa5"),c=n("14c3");r("match",1,(function(e,t,n){return[function(t){var n=s(this),r=void 0==t?void 0:t[e];return void 0!==r?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;var s=i(e),u=String(this);if(!s.global)return c(s,u);var f=s.unicode;s.lastIndex=0;var d,l=[],p=0;while(null!==(d=c(s,u))){var h=String(d[0]);l[p]=h,""===h&&(s.lastIndex=a(u,o(s.lastIndex),f)),p++}return 0===p?null:l}]}))},"467f":function(e,t,n){"use strict";var r=n("2d83");e.exports=function(e,t,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},"46d2":function(e){e.exports=JSON.parse('{"_from":"vue-img-cutter@^2.1.10","_id":"vue-img-cutter@2.1.10","_inBundle":false,"_integrity":"sha512-fNLzAkF2fsQ7ew/3LMzm6ZpAs+AKIyHIf2XtXAKjHq6ryz91nWXq9XNoqJQlBb+7hwa49rrYYHD2Tnac1GtU3w==","_location":"/vue-img-cutter","_phantomChildren":{},"_requested":{"type":"range","registry":true,"raw":"vue-img-cutter@^2.1.10","name":"vue-img-cutter","escapedName":"vue-img-cutter","rawSpec":"^2.1.10","saveSpec":null,"fetchSpec":"^2.1.10"},"_requiredBy":["#DEV:/","#USER"],"_resolved":"https://registry.npmjs.org/vue-img-cutter/-/vue-img-cutter-2.1.10.tgz","_shasum":"2c92488cd4f57982f2d142967f51949d58634e9f","_spec":"vue-img-cutter@^2.1.10","_where":"E:\\\\zxyWork\\\\总后台\\\\ydzjbackend","author":{"name":"acccccccb","email":"tabzhang@foxmail.com"},"browserslist":["> 1%","last 2 versions","not ie <= 8"],"bugs":{"url":"https://github.com/acccccccb/vue-img-cutter/issues"},"bundleDependencies":false,"dependencies":{"vue":"^2.5.2"},"deprecated":false,"description":"A image crop plug-in for Vue,you can use it to rotate、zoom images and cut any size","devDependencies":{"autoprefixer":"^7.1.2","babel-core":"^6.22.1","babel-helper-vue-jsx-merge-props":"^2.0.3","babel-loader":"^7.1.1","babel-plugin-syntax-jsx":"^6.18.0","babel-plugin-transform-runtime":"^6.22.0","babel-plugin-transform-vue-jsx":"^3.5.0","babel-preset-env":"^1.3.2","babel-preset-stage-2":"^6.22.0","chalk":"^2.0.1","copy-webpack-plugin":"^4.0.1","css-loader":"^0.28.0","extract-text-webpack-plugin":"^3.0.0","file-loader":"^1.1.4","friendly-errors-webpack-plugin":"^1.6.1","html-webpack-plugin":"^2.30.1","js-yaml":"^3.13.1","lodash":"^4.17.15","mem":"^6.0.0","mixin-deep":"^2.0.1","node-notifier":"^5.1.2","optimize-css-assets-webpack-plugin":"^3.2.0","ora":"^1.2.0","portfinder":"^1.0.13","postcss-import":"^11.0.0","postcss-loader":"^2.0.8","postcss-url":"^7.2.1","rimraf":"^2.6.0","semver":"^5.3.0","set-value":"^3.0.1","shelljs":"^0.7.6","uglifyjs-webpack-plugin":"^1.1.1","url-loader":"^0.5.8","vue-loader":"^13.3.0","vue-style-loader":"^3.0.1","vue-template-compiler":"^2.5.2","webpack":"^3.6.0","webpack-bundle-analyzer":"^2.13.1","webpack-dev-server":"^2.11.5","webpack-merge":"^4.1.0"},"engines":{"node":">= 6.0.0","npm":">= 3.0.0"},"homepage":"https://ihtmlcss.com/demo/dist/#/croptool","keywords":["image","crop","cutter","vue","裁剪"],"license":"Apache2.0","main":"./src/index.js","name":"vue-img-cutter","private":false,"repository":{"type":"git","url":"git+https://github.com/acccccccb/vue-img-cutter.git"},"scripts":{"build":"node build/build.js","dev":"webpack-dev-server --inline --progress --config build/webpack.dev.conf.js","start":"npm run dev"},"version":"2.1.10"}')},4840:function(e,t,n){var r=n("825a"),i=n("1c0b"),o=n("b622"),s=o("species");e.exports=function(e,t){var n,o=r(e).constructor;return void 0===o||void 0==(n=r(o)[s])?t:i(n)}},4930:function(e,t,n){var r=n("d039");e.exports=!!Object.getOwnPropertySymbols&&!r((function(){return!String(Symbol())}))},"498a":function(e,t,n){"use strict";var r=n("23e7"),i=n("58a8").trim,o=n("c8d2");r({target:"String",proto:!0,forced:o("trim")},{trim:function(){return i(this)}})},"4b8b":function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},"4d20":function(e,t,n){var r=n("1917"),i=n("10db"),o=n("6ca1"),s=n("3397"),a=n("9c0e"),c=n("faf5"),u=Object.getOwnPropertyDescriptor;t.f=n("0bad")?u:function(e,t){if(e=o(e),t=s(t,!0),c)try{return u(e,t)}catch(n){}if(a(e,t))return i(!r.f.call(e,t),e[t])}},"4d64":function(e,t,n){var r=n("fc6a"),i=n("50c4"),o=n("23cb"),s=function(e){return function(t,n,s){var a,c=r(t),u=i(c.length),f=o(s,u);if(e&&n!=n){while(u>f)if(a=c[f++],a!=a)return!0}else for(;u>f;f++)if((e||f in c)&&c[f]===n)return e||f||0;return!e&&-1}};e.exports={includes:s(!0),indexOf:s(!1)}},"4d88":function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},"4de4":function(e,t,n){"use strict";var r=n("23e7"),i=n("b727").filter,o=n("1dde"),s=n("ae40"),a=o("filter"),c=s("filter");r({target:"Array",proto:!0,forced:!a||!c},{filter:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},"4e71":function(e,t,n){n("e198")("observable")},"4ebc":function(e,t,n){var r=n("4d88");e.exports=Array.isArray||function(e){return"Array"==r(e)}},"50c4":function(e,t,n){var r=n("a691"),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},"511f":function(e,t,n){n("0b99"),n("658f"),e.exports=n("fcd4").f("iterator")},"512c":function(e,t,n){var r=n("ef08"),i=n("5524"),o=n("9c0c"),s=n("051b"),a=n("9c0e"),c="prototype",u=function(e,t,n){var f,d,l,p=e&u.F,h=e&u.G,m=e&u.S,v=e&u.P,g=e&u.B,y=e&u.W,b=h?i:i[t]||(i[t]={}),_=b[c],w=h?r:m?r[t]:(r[t]||{})[c];for(f in h&&(n=t),n)d=!p&&w&&void 0!==w[f],d&&a(b,f)||(l=d?w[f]:n[f],b[f]=h&&"function"!=typeof w[f]?n[f]:g&&d?o(l,r):y&&w[f]==l?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t[c]=e[c],t}(l):v&&"function"==typeof l?o(Function.call,l):l,v&&((b.virtual||(b.virtual={}))[f]=l,e&u.R&&_&&!_[f]&&s(_,f,l)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},5135:function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},5270:function(e,t,n){"use strict";var r=n("c532"),i=n("c401"),o=n("2e67"),s=n("2444"),a=n("d925"),c=n("e683");function u(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){u(e),e.baseURL&&!a(e.url)&&(e.url=c(e.baseURL,e.url)),e.headers=e.headers||{},e.data=i(e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]}));var t=e.adapter||s.adapter;return t(e).then((function(t){return u(e),t.data=i(t.data,t.headers,e.transformResponse),t}),(function(t){return o(t)||(u(e),t&&t.response&&(t.response.data=i(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},5319:function(e,t,n){"use strict";var r=n("d784"),i=n("825a"),o=n("7b0b"),s=n("50c4"),a=n("a691"),c=n("1d80"),u=n("8aa5"),f=n("14c3"),d=Math.max,l=Math.min,p=Math.floor,h=/\$([$&'`]|\d\d?|<[^>]*>)/g,m=/\$([$&'`]|\d\d?)/g,v=function(e){return void 0===e?e:String(e)};r("replace",2,(function(e,t,n,r){var g=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,y=r.REPLACE_KEEPS_$0,b=g?"$":"$0";return[function(n,r){var i=c(this),o=void 0==n?void 0:n[e];return void 0!==o?o.call(n,i,r):t.call(String(i),n,r)},function(e,r){if(!g&&y||"string"===typeof r&&-1===r.indexOf(b)){var o=n(t,e,this,r);if(o.done)return o.value}var c=i(e),p=String(this),h="function"===typeof r;h||(r=String(r));var m=c.global;if(m){var w=c.unicode;c.lastIndex=0}var S=[];while(1){var x=f(c,p);if(null===x)break;if(S.push(x),!m)break;var C=String(x[0]);""===C&&(c.lastIndex=u(p,s(c.lastIndex),w))}for(var E="",I=0,T=0;T<S.length;T++){x=S[T];for(var O=String(x[0]),R=d(l(a(x.index),p.length),0),k=[],M=1;M<x.length;M++)k.push(v(x[M]));var A=x.groups;if(h){var P=[O].concat(k,R,p);void 0!==A&&P.push(A);var j=String(r.apply(void 0,P))}else j=_(O,p,R,k,A,r);R>=I&&(E+=p.slice(I,R)+j,I=R+O.length)}return E+p.slice(I)}];function _(e,n,r,i,s,a){var c=r+e.length,u=i.length,f=m;return void 0!==s&&(s=o(s),f=h),t.call(a,f,(function(t,o){var a;switch(o.charAt(0)){case"$":return"$";case"&":return e;case"`":return n.slice(0,r);case"'":return n.slice(c);case"<":a=s[o.slice(1,-1)];break;default:var f=+o;if(0===f)return t;if(f>u){var d=p(f/10);return 0===d?t:d<=u?void 0===i[d-1]?o.charAt(1):i[d-1]+o.charAt(1):t}a=i[f-1]}return void 0===a?"":a}))}}))},"53ca":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n("a4d3"),n("e01a"),n("d28b"),n("d3b7"),n("3ca3"),n("ddb0");function r(e){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}},5524:function(e,t){var n=e.exports={version:"2.6.11"};"number"==typeof __e&&(__e=n)},5530:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n("a4d3"),n("4de4"),n("4160"),n("e439"),n("dbb4"),n("b64b"),n("159b");var r=n("ade3");function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){Object(r["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},5692:function(e,t,n){var r=n("c430"),i=n("c6cd");(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.6.5",mode:r?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},"56ef":function(e,t,n){var r=n("d066"),i=n("241c"),o=n("7418"),s=n("825a");e.exports=r("Reflect","ownKeys")||function(e){var t=i.f(s(e)),n=o.f;return n?t.concat(n(e)):t}},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,n){var r=n("1d80"),i=n("5899"),o="["+i+"]",s=RegExp("^"+o+o+"*"),a=RegExp(o+o+"*$"),c=function(e){return function(t){var n=String(r(t));return 1&e&&(n=n.replace(s,"")),2&e&&(n=n.replace(a,"")),n}};e.exports={start:c(1),end:c(2),trim:c(3)}},"597f":function(e,t){e.exports=function(e,t,n,r){var i,o=0;function s(){var s=this,a=Number(new Date)-o,c=arguments;function u(){o=Number(new Date),n.apply(s,c)}function f(){i=void 0}r&&!i&&u(),i&&clearTimeout(i),void 0===r&&a>e?u():!0!==t&&(i=setTimeout(r?f:u,void 0===r?e-a:e))}return"boolean"!==typeof t&&(r=n,n=t,t=void 0),s}},"5a94":function(e,t,n){var r=n("b367")("keys"),i=n("8b1a");e.exports=function(e){return r[e]||(r[e]=i(e))}},"5c6c":function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},"5cc6":function(e,t,n){var r=n("74e8");r("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},"5f96":function(e,t,n){"use strict";var r=n("ebb5"),i=r.aTypedArray,o=r.exportTypedArrayMethod,s=[].join;o("join",(function(e){return s.apply(i(this),arguments)}))},"60bd":function(e,t,n){"use strict";var r=n("da84"),i=n("ebb5"),o=n("e260"),s=n("b622"),a=s("iterator"),c=r.Uint8Array,u=o.values,f=o.keys,d=o.entries,l=i.aTypedArray,p=i.exportTypedArrayMethod,h=c&&c.prototype[a],m=!!h&&("values"==h.name||void 0==h.name),v=function(){return u.call(l(this))};p("entries",(function(){return d.call(l(this))})),p("keys",(function(){return f.call(l(this))})),p("values",v,!m),p(a,v,!m)},"60da":function(e,t,n){"use strict";var r=n("83ab"),i=n("d039"),o=n("df75"),s=n("7418"),a=n("d1e7"),c=n("7b0b"),u=n("44ad"),f=Object.assign,d=Object.defineProperty;e.exports=!f||i((function(){if(r&&1!==f({b:1},f(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach((function(e){t[e]=e})),7!=f({},e)[n]||o(f({},t)).join("")!=i}))?function(e,t){var n=c(e),i=arguments.length,f=1,d=s.f,l=a.f;while(i>f){var p,h=u(arguments[f++]),m=d?o(h).concat(d(h)):o(h),v=m.length,g=0;while(v>g)p=m[g++],r&&!l.call(h,p)||(n[p]=h[p])}return n}:f},"621a":function(e,t,n){"use strict";var r=n("da84"),i=n("83ab"),o=n("a981"),s=n("9112"),a=n("e2cc"),c=n("d039"),u=n("19aa"),f=n("a691"),d=n("50c4"),l=n("0b25"),p=n("77a7"),h=n("e163"),m=n("d2bb"),v=n("241c").f,g=n("9bf2").f,y=n("81d5"),b=n("d44e"),_=n("69f3"),w=_.get,S=_.set,x="ArrayBuffer",C="DataView",E="prototype",I="Wrong length",T="Wrong index",O=r[x],R=O,k=r[C],M=k&&k[E],A=Object.prototype,P=r.RangeError,j=p.pack,N=p.unpack,L=function(e){return[255&e]},D=function(e){return[255&e,e>>8&255]},B=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},U=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},F=function(e){return j(e,23,4)},V=function(e){return j(e,52,8)},W=function(e,t){g(e[E],t,{get:function(){return w(this)[t]}})},q=function(e,t,n,r){var i=l(n),o=w(e);if(i+t>o.byteLength)throw P(T);var s=w(o.buffer).bytes,a=i+o.byteOffset,c=s.slice(a,a+t);return r?c:c.reverse()},$=function(e,t,n,r,i,o){var s=l(n),a=w(e);if(s+t>a.byteLength)throw P(T);for(var c=w(a.buffer).bytes,u=s+a.byteOffset,f=r(+i),d=0;d<t;d++)c[u+d]=f[o?d:t-d-1]};if(o){if(!c((function(){O(1)}))||!c((function(){new O(-1)}))||c((function(){return new O,new O(1.5),new O(NaN),O.name!=x}))){R=function(e){return u(this,R),new O(l(e))};for(var G,z=R[E]=O[E],H=v(O),K=0;H.length>K;)(G=H[K++])in R||s(R,G,O[G]);z.constructor=R}m&&h(M)!==A&&m(M,A);var J=new k(new R(2)),Y=M.setInt8;J.setInt8(0,2147483648),J.setInt8(1,2147483649),!J.getInt8(0)&&J.getInt8(1)||a(M,{setInt8:function(e,t){Y.call(this,e,t<<24>>24)},setUint8:function(e,t){Y.call(this,e,t<<24>>24)}},{unsafe:!0})}else R=function(e){u(this,R,x);var t=l(e);S(this,{bytes:y.call(new Array(t),0),byteLength:t}),i||(this.byteLength=t)},k=function(e,t,n){u(this,k,C),u(e,R,C);var r=w(e).byteLength,o=f(t);if(o<0||o>r)throw P("Wrong offset");if(n=void 0===n?r-o:d(n),o+n>r)throw P(I);S(this,{buffer:e,byteLength:n,byteOffset:o}),i||(this.buffer=e,this.byteLength=n,this.byteOffset=o)},i&&(W(R,"byteLength"),W(k,"buffer"),W(k,"byteLength"),W(k,"byteOffset")),a(k[E],{getInt8:function(e){return q(this,1,e)[0]<<24>>24},getUint8:function(e){return q(this,1,e)[0]},getInt16:function(e){var t=q(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=q(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return U(q(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return U(q(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return N(q(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return N(q(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){$(this,1,e,L,t)},setUint8:function(e,t){$(this,1,e,L,t)},setInt16:function(e,t){$(this,2,e,D,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){$(this,2,e,D,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){$(this,4,e,B,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){$(this,4,e,B,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){$(this,4,e,F,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){$(this,8,e,V,t,arguments.length>2?arguments[2]:void 0)}});b(R,x),b(k,C),e.exports={ArrayBuffer:R,DataView:k}},6438:function(e,t,n){var r=n("03d6"),i=n("9742").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},"649e":function(e,t,n){"use strict";var r=n("ebb5"),i=n("b727").some,o=r.aTypedArray,s=r.exportTypedArrayMethod;s("some",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},6547:function(e,t,n){var r=n("a691"),i=n("1d80"),o=function(e){return function(t,n){var o,s,a=String(i(t)),c=r(n),u=a.length;return c<0||c>=u?e?"":void 0:(o=a.charCodeAt(c),o<55296||o>56319||c+1===u||(s=a.charCodeAt(c+1))<56320||s>57343?e?a.charAt(c):o:e?a.slice(c,c+2):s-56320+(o-55296<<10)+65536)}};e.exports={codeAt:o(!1),charAt:o(!0)}},"658f":function(e,t,n){n("6858");for(var r=n("ef08"),i=n("051b"),o=n("8a0d"),s=n("cc15")("toStringTag"),a="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),c=0;c<a.length;c++){var u=a[c],f=r[u],d=f&&f.prototype;d&&!d[s]&&i(d,s,u),o[u]=o.Array}},"65f0":function(e,t,n){var r=n("861d"),i=n("e8b5"),o=n("b622"),s=o("species");e.exports=function(e,t){var n;return i(e)&&(n=e.constructor,"function"!=typeof n||n!==Array&&!i(n.prototype)?r(n)&&(n=n[s],null===n&&(n=void 0)):n=void 0),new(void 0===n?Array:n)(0===t?0:t)}},6858:function(e,t,n){"use strict";var r=n("2f9a"),i=n("ea34"),o=n("8a0d"),s=n("6ca1");e.exports=n("393a")(Array,"Array",(function(e,t){this._t=s(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},"693d":function(e,t,n){"use strict";var r=n("ef08"),i=n("9c0e"),o=n("0bad"),s=n("512c"),a=n("ba01"),c=n("e34a").KEY,u=n("4b8b"),f=n("b367"),d=n("92f0"),l=n("8b1a"),p=n("cc15"),h=n("fcd4"),m=n("e198"),v=n("0ae2"),g=n("4ebc"),y=n("77e9"),b=n("7a41"),_=n("0983"),w=n("6ca1"),S=n("3397"),x=n("10db"),C=n("6f4f"),E=n("1836"),I=n("4d20"),T=n("fed5"),O=n("1a14"),R=n("9876"),k=I.f,M=O.f,A=E.f,P=r.Symbol,j=r.JSON,N=j&&j.stringify,L="prototype",D=p("_hidden"),B=p("toPrimitive"),U={}.propertyIsEnumerable,F=f("symbol-registry"),V=f("symbols"),W=f("op-symbols"),q=Object[L],$="function"==typeof P&&!!T.f,G=r.QObject,z=!G||!G[L]||!G[L].findChild,H=o&&u((function(){return 7!=C(M({},"a",{get:function(){return M(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=k(q,t);r&&delete q[t],M(e,t,n),r&&e!==q&&M(q,t,r)}:M,K=function(e){var t=V[e]=C(P[L]);return t._k=e,t},J=$&&"symbol"==typeof P.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof P},Y=function(e,t,n){return e===q&&Y(W,t,n),y(e),t=S(t,!0),y(n),i(V,t)?(n.enumerable?(i(e,D)&&e[D][t]&&(e[D][t]=!1),n=C(n,{enumerable:x(0,!1)})):(i(e,D)||M(e,D,x(1,{})),e[D][t]=!0),H(e,t,n)):M(e,t,n)},X=function(e,t){y(e);var n,r=v(t=w(t)),i=0,o=r.length;while(o>i)Y(e,n=r[i++],t[n]);return e},Z=function(e,t){return void 0===t?C(e):X(C(e),t)},Q=function(e){var t=U.call(this,e=S(e,!0));return!(this===q&&i(V,e)&&!i(W,e))&&(!(t||!i(this,e)||!i(V,e)||i(this,D)&&this[D][e])||t)},ee=function(e,t){if(e=w(e),t=S(t,!0),e!==q||!i(V,t)||i(W,t)){var n=k(e,t);return!n||!i(V,t)||i(e,D)&&e[D][t]||(n.enumerable=!0),n}},te=function(e){var t,n=A(w(e)),r=[],o=0;while(n.length>o)i(V,t=n[o++])||t==D||t==c||r.push(t);return r},ne=function(e){var t,n=e===q,r=A(n?W:w(e)),o=[],s=0;while(r.length>s)!i(V,t=r[s++])||n&&!i(q,t)||o.push(V[t]);return o};$||(P=function(){if(this instanceof P)throw TypeError("Symbol is not a constructor!");var e=l(arguments.length>0?arguments[0]:void 0),t=function(n){this===q&&t.call(W,n),i(this,D)&&i(this[D],e)&&(this[D][e]=!1),H(this,e,x(1,n))};return o&&z&&H(q,e,{configurable:!0,set:t}),K(e)},a(P[L],"toString",(function(){return this._k})),I.f=ee,O.f=Y,n("6438").f=E.f=te,n("1917").f=Q,T.f=ne,o&&!n("e444")&&a(q,"propertyIsEnumerable",Q,!0),h.f=function(e){return K(p(e))}),s(s.G+s.W+s.F*!$,{Symbol:P});for(var re="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ie=0;re.length>ie;)p(re[ie++]);for(var oe=R(p.store),se=0;oe.length>se;)m(oe[se++]);s(s.S+s.F*!$,"Symbol",{for:function(e){return i(F,e+="")?F[e]:F[e]=P(e)},keyFor:function(e){if(!J(e))throw TypeError(e+" is not a symbol!");for(var t in F)if(F[t]===e)return t},useSetter:function(){z=!0},useSimple:function(){z=!1}}),s(s.S+s.F*!$,"Object",{create:Z,defineProperty:Y,defineProperties:X,getOwnPropertyDescriptor:ee,getOwnPropertyNames:te,getOwnPropertySymbols:ne});var ae=u((function(){T.f(1)}));s(s.S+s.F*ae,"Object",{getOwnPropertySymbols:function(e){return T.f(_(e))}}),j&&s(s.S+s.F*(!$||u((function(){var e=P();return"[null]"!=N([e])||"{}"!=N({a:e})||"{}"!=N(Object(e))}))),"JSON",{stringify:function(e){var t,n,r=[e],i=1;while(arguments.length>i)r.push(arguments[i++]);if(n=t=r[1],(b(t)||void 0!==e)&&!J(e))return g(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!J(t))return t}),r[1]=t,N.apply(j,r)}}),P[L][B]||n("051b")(P[L],B,P[L].valueOf),d(P,"Symbol"),d(Math,"Math",!0),d(r.JSON,"JSON",!0)},"69f3":function(e,t,n){var r,i,o,s=n("7f9a"),a=n("da84"),c=n("861d"),u=n("9112"),f=n("5135"),d=n("f772"),l=n("d012"),p=a.WeakMap,h=function(e){return o(e)?i(e):r(e,{})},m=function(e){return function(t){var n;if(!c(t)||(n=i(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}};if(s){var v=new p,g=v.get,y=v.has,b=v.set;r=function(e,t){return b.call(v,e,t),t},i=function(e){return g.call(v,e)||{}},o=function(e){return y.call(v,e)}}else{var _=d("state");l[_]=!0,r=function(e,t){return u(e,_,t),t},i=function(e){return f(e,_)?e[_]:{}},o=function(e){return f(e,_)}}e.exports={set:r,get:i,has:o,enforce:h,getterFor:m}},"6ca1":function(e,t,n){var r=n("9fbb"),i=n("c901");e.exports=function(e){return r(i(e))}},"6dd8":function(e,t,n){"use strict";n.r(t),function(e){var n=function(){if("undefined"!==typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,r){return e[0]===t&&(n=r,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var i=r[n];e.call(t,i[1],i[0])}},t}()}(),r="undefined"!==typeof window&&"undefined"!==typeof document&&window.document===document,i=function(){return"undefined"!==typeof e&&e.Math===Math?e:"undefined"!==typeof self&&self.Math===Math?self:"undefined"!==typeof window&&window.Math===Math?window:Function("return this")()}(),o=function(){return"function"===typeof requestAnimationFrame?requestAnimationFrame.bind(i):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)}}(),s=2;function a(e,t){var n=!1,r=!1,i=0;function a(){n&&(n=!1,e()),r&&u()}function c(){o(a)}function u(){var e=Date.now();if(n){if(e-i<s)return;r=!0}else n=!0,r=!1,setTimeout(c,t);i=e}return u}var c=20,u=["top","right","bottom","left","width","height","size","weight"],f="undefined"!==typeof MutationObserver,d=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=a(this.refresh.bind(this),c)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){r&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),f?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){r&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t,r=u.some((function(e){return!!~n.indexOf(e)}));r&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),l=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];Object.defineProperty(e,i,{value:t[i],enumerable:!1,writable:!1,configurable:!0})}return e},p=function(e){var t=e&&e.ownerDocument&&e.ownerDocument.defaultView;return t||i},h=C(0,0,0,0);function m(e){return parseFloat(e)||0}function v(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){var r=e["border-"+n+"-width"];return t+m(r)}),0)}function g(e){for(var t=["top","right","bottom","left"],n={},r=0,i=t;r<i.length;r++){var o=i[r],s=e["padding-"+o];n[o]=m(s)}return n}function y(e){var t=e.getBBox();return C(0,0,t.width,t.height)}function b(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return h;var r=p(e).getComputedStyle(e),i=g(r),o=i.left+i.right,s=i.top+i.bottom,a=m(r.width),c=m(r.height);if("border-box"===r.boxSizing&&(Math.round(a+o)!==t&&(a-=v(r,"left","right")+o),Math.round(c+s)!==n&&(c-=v(r,"top","bottom")+s)),!w(e)){var u=Math.round(a+o)-t,f=Math.round(c+s)-n;1!==Math.abs(u)&&(a-=u),1!==Math.abs(f)&&(c-=f)}return C(i.left,i.top,a,c)}var _=function(){return"undefined"!==typeof SVGGraphicsElement?function(e){return e instanceof p(e).SVGGraphicsElement}:function(e){return e instanceof p(e).SVGElement&&"function"===typeof e.getBBox}}();function w(e){return e===p(e).document.documentElement}function S(e){return r?_(e)?y(e):b(e):h}function x(e){var t=e.x,n=e.y,r=e.width,i=e.height,o="undefined"!==typeof DOMRectReadOnly?DOMRectReadOnly:Object,s=Object.create(o.prototype);return l(s,{x:t,y:n,width:r,height:i,top:n,right:t+r,bottom:i+n,left:t}),s}function C(e,t,n,r){return{x:e,y:t,width:n,height:r}}var E=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=C(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=S(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),I=function(){function e(e,t){var n=x(t);l(this,{target:e,contentRect:n})}return e}(),T=function(){function e(e,t,r){if(this.activeObservations_=[],this.observations_=new n,"function"!==typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=r}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(e instanceof p(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new E(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(e instanceof p(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new I(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),O="undefined"!==typeof WeakMap?new WeakMap:new n,R=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=d.getInstance(),r=new T(t,n,this);O.set(this,r)}return e}();["observe","unobserve","disconnect"].forEach((function(e){R.prototype[e]=function(){var t;return(t=O.get(this))[e].apply(t,arguments)}}));var k=function(){return"undefined"!==typeof i.ResizeObserver?i.ResizeObserver:R}();t["default"]=k}.call(this,n("c8ba"))},"6eeb":function(e,t,n){var r=n("da84"),i=n("9112"),o=n("5135"),s=n("ce4e"),a=n("8925"),c=n("69f3"),u=c.get,f=c.enforce,d=String(String).split("String");(e.exports=function(e,t,n,a){var c=!!a&&!!a.unsafe,u=!!a&&!!a.enumerable,l=!!a&&!!a.noTargetGet;"function"==typeof n&&("string"!=typeof t||o(n,"name")||i(n,"name",t),f(n).source=d.join("string"==typeof t?t:"")),e!==r?(c?!l&&e[t]&&(u=!0):delete e[t],u?e[t]=n:i(e,t,n)):u?e[t]=n:s(t,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&u(this).source||a(this)}))},"6f4f":function(e,t,n){var r=n("77e9"),i=n("85e7"),o=n("9742"),s=n("5a94")("IE_PROTO"),a=function(){},c="prototype",u=function(){var e,t=n("05f5")("iframe"),r=o.length,i="<",s=">";t.style.display="none",n("9141").appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write(i+"script"+s+"document.F=Object"+i+"/script"+s),e.close(),u=e.F;while(r--)delete u[c][o[r]];return u()};e.exports=Object.create||function(e,t){var n;return null!==e?(a[c]=r(e),n=new a,a[c]=null,n[s]=e):n=u(),void 0===t?n:i(n,t)}},7156:function(e,t,n){var r=n("861d"),i=n("d2bb");e.exports=function(e,t,n){var o,s;return i&&"function"==typeof(o=t.constructor)&&o!==n&&r(s=o.prototype)&&s!==n.prototype&&i(e,s),e}},"72f7":function(e,t,n){"use strict";var r=n("ebb5").exportTypedArrayMethod,i=n("d039"),o=n("da84"),s=o.Uint8Array,a=s&&s.prototype||{},c=[].toString,u=[].join;i((function(){c.call({})}))&&(c=function(){return u.call(this)});var f=a.toString!=c;r("toString",c,f)},"735e":function(e,t,n){"use strict";var r=n("ebb5"),i=n("81d5"),o=r.aTypedArray,s=r.exportTypedArrayMethod;s("fill",(function(e){return i.apply(o(this),arguments)}))},7418:function(e,t){t.f=Object.getOwnPropertySymbols},"746f":function(e,t,n){var r=n("428f"),i=n("5135"),o=n("e538"),s=n("9bf2").f;e.exports=function(e){var t=r.Symbol||(r.Symbol={});i(t,e)||s(t,e,{value:o.f(e)})}},"74e8":function(e,t,n){"use strict";var r=n("23e7"),i=n("da84"),o=n("83ab"),s=n("8aa7"),a=n("ebb5"),c=n("621a"),u=n("19aa"),f=n("5c6c"),d=n("9112"),l=n("50c4"),p=n("0b25"),h=n("182d"),m=n("c04e"),v=n("5135"),g=n("f5df"),y=n("861d"),b=n("7c73"),_=n("d2bb"),w=n("241c").f,S=n("a078"),x=n("b727").forEach,C=n("2626"),E=n("9bf2"),I=n("06cf"),T=n("69f3"),O=n("7156"),R=T.get,k=T.set,M=E.f,A=I.f,P=Math.round,j=i.RangeError,N=c.ArrayBuffer,L=c.DataView,D=a.NATIVE_ARRAY_BUFFER_VIEWS,B=a.TYPED_ARRAY_TAG,U=a.TypedArray,F=a.TypedArrayPrototype,V=a.aTypedArrayConstructor,W=a.isTypedArray,q="BYTES_PER_ELEMENT",$="Wrong length",G=function(e,t){var n=0,r=t.length,i=new(V(e))(r);while(r>n)i[n]=t[n++];return i},z=function(e,t){M(e,t,{get:function(){return R(this)[t]}})},H=function(e){var t;return e instanceof N||"ArrayBuffer"==(t=g(e))||"SharedArrayBuffer"==t},K=function(e,t){return W(e)&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},J=function(e,t){return K(e,t=m(t,!0))?f(2,e[t]):A(e,t)},Y=function(e,t,n){return!(K(e,t=m(t,!0))&&y(n)&&v(n,"value"))||v(n,"get")||v(n,"set")||n.configurable||v(n,"writable")&&!n.writable||v(n,"enumerable")&&!n.enumerable?M(e,t,n):(e[t]=n.value,e)};o?(D||(I.f=J,E.f=Y,z(F,"buffer"),z(F,"byteOffset"),z(F,"byteLength"),z(F,"length")),r({target:"Object",stat:!0,forced:!D},{getOwnPropertyDescriptor:J,defineProperty:Y}),e.exports=function(e,t,n){var o=e.match(/\d+$/)[0]/8,a=e+(n?"Clamped":"")+"Array",c="get"+e,f="set"+e,m=i[a],v=m,g=v&&v.prototype,E={},I=function(e,t){var n=R(e);return n.view[c](t*o+n.byteOffset,!0)},T=function(e,t,r){var i=R(e);n&&(r=(r=P(r))<0?0:r>255?255:255&r),i.view[f](t*o+i.byteOffset,r,!0)},A=function(e,t){M(e,t,{get:function(){return I(this,t)},set:function(e){return T(this,t,e)},enumerable:!0})};D?s&&(v=t((function(e,t,n,r){return u(e,v,a),O(function(){return y(t)?H(t)?void 0!==r?new m(t,h(n,o),r):void 0!==n?new m(t,h(n,o)):new m(t):W(t)?G(v,t):S.call(v,t):new m(p(t))}(),e,v)})),_&&_(v,U),x(w(m),(function(e){e in v||d(v,e,m[e])})),v.prototype=g):(v=t((function(e,t,n,r){u(e,v,a);var i,s,c,f=0,d=0;if(y(t)){if(!H(t))return W(t)?G(v,t):S.call(v,t);i=t,d=h(n,o);var m=t.byteLength;if(void 0===r){if(m%o)throw j($);if(s=m-d,s<0)throw j($)}else if(s=l(r)*o,s+d>m)throw j($);c=s/o}else c=p(t),s=c*o,i=new N(s);k(e,{buffer:i,byteOffset:d,byteLength:s,length:c,view:new L(i)});while(f<c)A(e,f++)})),_&&_(v,U),g=v.prototype=b(F)),g.constructor!==v&&d(g,"constructor",v),B&&d(g,B,a),E[a]=v,r({global:!0,forced:v!=m,sham:!D},E),q in v||d(v,q,o),q in g||d(g,q,o),C(a)}):e.exports=function(){}},"77a7":function(e,t){var n=1/0,r=Math.abs,i=Math.pow,o=Math.floor,s=Math.log,a=Math.LN2,c=function(e,t,c){var u,f,d,l=new Array(c),p=8*c-t-1,h=(1<<p)-1,m=h>>1,v=23===t?i(2,-24)-i(2,-77):0,g=e<0||0===e&&1/e<0?1:0,y=0;for(e=r(e),e!=e||e===n?(f=e!=e?1:0,u=h):(u=o(s(e)/a),e*(d=i(2,-u))<1&&(u--,d*=2),e+=u+m>=1?v/d:v*i(2,1-m),e*d>=2&&(u++,d/=2),u+m>=h?(f=0,u=h):u+m>=1?(f=(e*d-1)*i(2,t),u+=m):(f=e*i(2,m-1)*i(2,t),u=0));t>=8;l[y++]=255&f,f/=256,t-=8);for(u=u<<t|f,p+=t;p>0;l[y++]=255&u,u/=256,p-=8);return l[--y]|=128*g,l},u=function(e,t){var r,o=e.length,s=8*o-t-1,a=(1<<s)-1,c=a>>1,u=s-7,f=o-1,d=e[f--],l=127&d;for(d>>=7;u>0;l=256*l+e[f],f--,u-=8);for(r=l&(1<<-u)-1,l>>=-u,u+=t;u>0;r=256*r+e[f],f--,u-=8);if(0===l)l=1-c;else{if(l===a)return r?NaN:d?-n:n;r+=i(2,t),l-=c}return(d?-1:1)*r*i(2,l-t)};e.exports={pack:c,unpack:u}},"77e9":function(e,t,n){var r=n("7a41");e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},7839:function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7a10":function(e,t,n){"use strict";var r=n("0132"),i=n.n(r);i.a},"7a41":function(e,t){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},"7a77":function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},"7aac":function(e,t,n){"use strict";var r=n("c532");e.exports=r.isStandardBrowserEnv()?function(){return{write:function(e,t,n,i,o,s){var a=[];a.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),r.isString(i)&&a.push("path="+i),r.isString(o)&&a.push("domain="+o),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},"7b0b":function(e,t,n){var r=n("1d80");e.exports=function(e){return Object(r(e))}},"7b3e":function(e,t,n){"use strict";var r,i=n("a3de");
/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */
function o(e,t){if(!i.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,o=n in document;if(!o){var s=document.createElement("div");s.setAttribute(n,"return;"),o="function"===typeof s[n]}return!o&&r&&"wheel"===e&&(o=document.implementation.hasFeature("Events.wheel","3.0")),o}i.canUseDOM&&(r=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("","")),e.exports=o},"7c73":function(e,t,n){var r,i=n("825a"),o=n("37e8"),s=n("7839"),a=n("d012"),c=n("1be4"),u=n("cc12"),f=n("f772"),d=">",l="<",p="prototype",h="script",m=f("IE_PROTO"),v=function(){},g=function(e){return l+h+d+e+l+"/"+h+d},y=function(e){e.write(g("")),e.close();var t=e.parentWindow.Object;return e=null,t},b=function(){var e,t=u("iframe"),n="java"+h+":";return t.style.display="none",c.appendChild(t),t.src=String(n),e=t.contentWindow.document,e.open(),e.write(g("document.F=Object")),e.close(),e.F},_=function(){try{r=document.domain&&new ActiveXObject("htmlfile")}catch(t){}_=r?y(r):b();var e=s.length;while(e--)delete _[p][s[e]];return _()};a[m]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(v[p]=i(e),n=new v,v[p]=null,n[m]=e):n=_(),void 0===t?n:o(n,t)}},"7dd0":function(e,t,n){"use strict";var r=n("23e7"),i=n("9ed3"),o=n("e163"),s=n("d2bb"),a=n("d44e"),c=n("9112"),u=n("6eeb"),f=n("b622"),d=n("c430"),l=n("3f8c"),p=n("ae93"),h=p.IteratorPrototype,m=p.BUGGY_SAFARI_ITERATORS,v=f("iterator"),g="keys",y="values",b="entries",_=function(){return this};e.exports=function(e,t,n,f,p,w,S){i(n,t,f);var x,C,E,I=function(e){if(e===p&&M)return M;if(!m&&e in R)return R[e];switch(e){case g:return function(){return new n(this,e)};case y:return function(){return new n(this,e)};case b:return function(){return new n(this,e)}}return function(){return new n(this)}},T=t+" Iterator",O=!1,R=e.prototype,k=R[v]||R["@@iterator"]||p&&R[p],M=!m&&k||I(p),A="Array"==t&&R.entries||k;if(A&&(x=o(A.call(new e)),h!==Object.prototype&&x.next&&(d||o(x)===h||(s?s(x,h):"function"!=typeof x[v]&&c(x,v,_)),a(x,T,!0,!0),d&&(l[T]=_))),p==y&&k&&k.name!==y&&(O=!0,M=function(){return k.call(this)}),d&&!S||R[v]===M||c(R,v,M),l[t]=M,p)if(C={values:I(y),keys:w?M:I(g),entries:I(b)},S)for(E in C)(m||O||!(E in R))&&u(R,E,C[E]);else r({target:t,proto:!0,forced:m||O},C);return C}},"7f9a":function(e,t,n){var r=n("da84"),i=n("8925"),o=r.WeakMap;e.exports="function"===typeof o&&/native code/.test(i(o))},8119:function(e,t,n){n("693d"),n("dfe5"),n("301c"),n("4e71"),e.exports=n("5524").Symbol},"81d5":function(e,t,n){"use strict";var r=n("7b0b"),i=n("23cb"),o=n("50c4");e.exports=function(e){var t=r(this),n=o(t.length),s=arguments.length,a=i(s>1?arguments[1]:void 0,n),c=s>2?arguments[2]:void 0,u=void 0===c?n:i(c,n);while(u>a)t[a++]=e;return t}},"825a":function(e,t,n){var r=n("861d");e.exports=function(e){if(!r(e))throw TypeError(String(e)+" is not an object");return e}},"82f8":function(e,t,n){"use strict";var r=n("ebb5"),i=n("4d64").includes,o=r.aTypedArray,s=r.exportTypedArrayMethod;s("includes",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},"83ab":function(e,t,n){var r=n("d039");e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},8418:function(e,t,n){"use strict";var r=n("c04e"),i=n("9bf2"),o=n("5c6c");e.exports=function(e,t,n){var s=r(t);s in e?i.f(e,s,o(0,n)):e[s]=n}},"841c":function(e,t,n){"use strict";var r=n("d784"),i=n("825a"),o=n("1d80"),s=n("129f"),a=n("14c3");r("search",1,(function(e,t,n){return[function(t){var n=o(this),r=void 0==t?void 0:t[e];return void 0!==r?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;var o=i(e),c=String(this),u=o.lastIndex;s(u,0)||(o.lastIndex=0);var f=a(o,c);return s(o.lastIndex,u)||(o.lastIndex=u),null===f?-1:f.index}]}))},"85e7":function(e,t,n){var r=n("1a14"),i=n("77e9"),o=n("9876");e.exports=n("0bad")?Object.defineProperties:function(e,t){i(e);var n,s=o(t),a=s.length,c=0;while(a>c)r.f(e,n=s[c++],t[n]);return e}},"861d":function(e,t){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},8925:function(e,t,n){var r=n("c6cd"),i=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(e){return i.call(e)}),e.exports=r.inspectSource},"8a0d":function(e,t){e.exports={}},"8aa5":function(e,t,n){"use strict";var r=n("6547").charAt;e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},"8aa7":function(e,t,n){var r=n("da84"),i=n("d039"),o=n("1c7e"),s=n("ebb5").NATIVE_ARRAY_BUFFER_VIEWS,a=r.ArrayBuffer,c=r.Int8Array;e.exports=!s||!i((function(){c(1)}))||!i((function(){new c(-1)}))||!o((function(e){new c,new c(null),new c(1.5),new c(e)}),!0)||i((function(){return 1!==new c(new a(2),1,void 0).length}))},"8b1a":function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},"8c4f":function(e,t,n){"use strict";
/*!
  * vue-router v3.0.6
  * (c) 2019 Evan You
  * @license MIT
  */function r(e,t){0}function i(e){return Object.prototype.toString.call(e).indexOf("Error")>-1}function o(e,t){for(var n in t)e[n]=t[n];return e}var s={name:"RouterView",functional:!0,props:{name:{type:String,default:"default"}},render:function(e,t){var n=t.props,r=t.children,i=t.parent,s=t.data;s.routerView=!0;var c=i.$createElement,u=n.name,f=i.$route,d=i._routerViewCache||(i._routerViewCache={}),l=0,p=!1;while(i&&i._routerRoot!==i){var h=i.$vnode&&i.$vnode.data;h&&(h.routerView&&l++,h.keepAlive&&i._inactive&&(p=!0)),i=i.$parent}if(s.routerViewDepth=l,p)return c(d[u],s,r);var m=f.matched[l];if(!m)return d[u]=null,c();var v=d[u]=m.components[u];s.registerRouteInstance=function(e,t){var n=m.instances[u];(t&&n!==e||!t&&n===e)&&(m.instances[u]=t)},(s.hook||(s.hook={})).prepatch=function(e,t){m.instances[u]=t.componentInstance},s.hook.init=function(e){e.data.keepAlive&&e.componentInstance&&e.componentInstance!==m.instances[u]&&(m.instances[u]=e.componentInstance)};var g=s.props=a(f,m.props&&m.props[u]);if(g){g=s.props=o({},g);var y=s.attrs=s.attrs||{};for(var b in g)v.props&&b in v.props||(y[b]=g[b],delete g[b])}return c(v,s,r)}};function a(e,t){switch(typeof t){case"undefined":return;case"object":return t;case"function":return t(e);case"boolean":return t?e.params:void 0;default:0}}var c=/[!'()*]/g,u=function(e){return"%"+e.charCodeAt(0).toString(16)},f=/%2C/g,d=function(e){return encodeURIComponent(e).replace(c,u).replace(f,",")},l=decodeURIComponent;function p(e,t,n){void 0===t&&(t={});var r,i=n||h;try{r=i(e||"")}catch(s){r={}}for(var o in t)r[o]=t[o];return r}function h(e){var t={};return e=e.trim().replace(/^(\?|#|&)/,""),e?(e.split("&").forEach((function(e){var n=e.replace(/\+/g," ").split("="),r=l(n.shift()),i=n.length>0?l(n.join("=")):null;void 0===t[r]?t[r]=i:Array.isArray(t[r])?t[r].push(i):t[r]=[t[r],i]})),t):t}function m(e){var t=e?Object.keys(e).map((function(t){var n=e[t];if(void 0===n)return"";if(null===n)return d(t);if(Array.isArray(n)){var r=[];return n.forEach((function(e){void 0!==e&&(null===e?r.push(d(t)):r.push(d(t)+"="+d(e)))})),r.join("&")}return d(t)+"="+d(n)})).filter((function(e){return e.length>0})).join("&"):null;return t?"?"+t:""}var v=/\/?$/;function g(e,t,n,r){var i=r&&r.options.stringifyQuery,o=t.query||{};try{o=y(o)}catch(a){}var s={name:t.name||e&&e.name,meta:e&&e.meta||{},path:t.path||"/",hash:t.hash||"",query:o,params:t.params||{},fullPath:w(t,i),matched:e?_(e):[]};return n&&(s.redirectedFrom=w(n,i)),Object.freeze(s)}function y(e){if(Array.isArray(e))return e.map(y);if(e&&"object"===typeof e){var t={};for(var n in e)t[n]=y(e[n]);return t}return e}var b=g(null,{path:"/"});function _(e){var t=[];while(e)t.unshift(e),e=e.parent;return t}function w(e,t){var n=e.path,r=e.query;void 0===r&&(r={});var i=e.hash;void 0===i&&(i="");var o=t||m;return(n||"/")+o(r)+i}function S(e,t){return t===b?e===t:!!t&&(e.path&&t.path?e.path.replace(v,"")===t.path.replace(v,"")&&e.hash===t.hash&&x(e.query,t.query):!(!e.name||!t.name)&&(e.name===t.name&&e.hash===t.hash&&x(e.query,t.query)&&x(e.params,t.params)))}function x(e,t){if(void 0===e&&(e={}),void 0===t&&(t={}),!e||!t)return e===t;var n=Object.keys(e),r=Object.keys(t);return n.length===r.length&&n.every((function(n){var r=e[n],i=t[n];return"object"===typeof r&&"object"===typeof i?x(r,i):String(r)===String(i)}))}function C(e,t){return 0===e.path.replace(v,"/").indexOf(t.path.replace(v,"/"))&&(!t.hash||e.hash===t.hash)&&E(e.query,t.query)}function E(e,t){for(var n in t)if(!(n in e))return!1;return!0}var I,T=[String,Object],O=[String,Array],R={name:"RouterLink",props:{to:{type:T,required:!0},tag:{type:String,default:"a"},exact:Boolean,append:Boolean,replace:Boolean,activeClass:String,exactActiveClass:String,event:{type:O,default:"click"}},render:function(e){var t=this,n=this.$router,r=this.$route,i=n.resolve(this.to,r,this.append),s=i.location,a=i.route,c=i.href,u={},f=n.options.linkActiveClass,d=n.options.linkExactActiveClass,l=null==f?"router-link-active":f,p=null==d?"router-link-exact-active":d,h=null==this.activeClass?l:this.activeClass,m=null==this.exactActiveClass?p:this.exactActiveClass,v=s.path?g(null,s,null,n):a;u[m]=S(r,v),u[h]=this.exact?u[m]:C(r,v);var y=function(e){k(e)&&(t.replace?n.replace(s):n.push(s))},b={click:k};Array.isArray(this.event)?this.event.forEach((function(e){b[e]=y})):b[this.event]=y;var _={class:u};if("a"===this.tag)_.on=b,_.attrs={href:c};else{var w=M(this.$slots.default);if(w){w.isStatic=!1;var x=w.data=o({},w.data);x.on=b;var E=w.data.attrs=o({},w.data.attrs);E.href=c}else _.on=b}return e(this.tag,_,this.$slots.default)}};function k(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&(void 0===e.button||0===e.button)){if(e.currentTarget&&e.currentTarget.getAttribute){var t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function M(e){if(e)for(var t,n=0;n<e.length;n++){if(t=e[n],"a"===t.tag)return t;if(t.children&&(t=M(t.children)))return t}}function A(e){if(!A.installed||I!==e){A.installed=!0,I=e;var t=function(e){return void 0!==e},n=function(e,n){var r=e.$options._parentVnode;t(r)&&t(r=r.data)&&t(r=r.registerRouteInstance)&&r(e,n)};e.mixin({beforeCreate:function(){t(this.$options.router)?(this._routerRoot=this,this._router=this.$options.router,this._router.init(this),e.util.defineReactive(this,"_route",this._router.history.current)):this._routerRoot=this.$parent&&this.$parent._routerRoot||this,n(this,this)},destroyed:function(){n(this)}}),Object.defineProperty(e.prototype,"$router",{get:function(){return this._routerRoot._router}}),Object.defineProperty(e.prototype,"$route",{get:function(){return this._routerRoot._route}}),e.component("RouterView",s),e.component("RouterLink",R);var r=e.config.optionMergeStrategies;r.beforeRouteEnter=r.beforeRouteLeave=r.beforeRouteUpdate=r.created}}var P="undefined"!==typeof window;function j(e,t,n){var r=e.charAt(0);if("/"===r)return e;if("?"===r||"#"===r)return t+e;var i=t.split("/");n&&i[i.length-1]||i.pop();for(var o=e.replace(/^\//,"").split("/"),s=0;s<o.length;s++){var a=o[s];".."===a?i.pop():"."!==a&&i.push(a)}return""!==i[0]&&i.unshift(""),i.join("/")}function N(e){var t="",n="",r=e.indexOf("#");r>=0&&(t=e.slice(r),e=e.slice(0,r));var i=e.indexOf("?");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{path:e,query:n,hash:t}}function L(e){return e.replace(/\/\//g,"/")}var D=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)},B=re,U=$,F=G,V=K,W=ne,q=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function $(e,t){var n,r=[],i=0,o=0,s="",a=t&&t.delimiter||"/";while(null!=(n=q.exec(e))){var c=n[0],u=n[1],f=n.index;if(s+=e.slice(o,f),o=f+c.length,u)s+=u[1];else{var d=e[o],l=n[2],p=n[3],h=n[4],m=n[5],v=n[6],g=n[7];s&&(r.push(s),s="");var y=null!=l&&null!=d&&d!==l,b="+"===v||"*"===v,_="?"===v||"*"===v,w=n[2]||a,S=h||m;r.push({name:p||i++,prefix:l||"",delimiter:w,optional:_,repeat:b,partial:y,asterisk:!!g,pattern:S?Y(S):g?".*":"[^"+J(w)+"]+?"})}}return o<e.length&&(s+=e.substr(o)),s&&r.push(s),r}function G(e,t){return K($(e,t))}function z(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function H(e){return encodeURI(e).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function K(e){for(var t=new Array(e.length),n=0;n<e.length;n++)"object"===typeof e[n]&&(t[n]=new RegExp("^(?:"+e[n].pattern+")$"));return function(n,r){for(var i="",o=n||{},s=r||{},a=s.pretty?z:encodeURIComponent,c=0;c<e.length;c++){var u=e[c];if("string"!==typeof u){var f,d=o[u.name];if(null==d){if(u.optional){u.partial&&(i+=u.prefix);continue}throw new TypeError('Expected "'+u.name+'" to be defined')}if(D(d)){if(!u.repeat)throw new TypeError('Expected "'+u.name+'" to not repeat, but received `'+JSON.stringify(d)+"`");if(0===d.length){if(u.optional)continue;throw new TypeError('Expected "'+u.name+'" to not be empty')}for(var l=0;l<d.length;l++){if(f=a(d[l]),!t[c].test(f))throw new TypeError('Expected all "'+u.name+'" to match "'+u.pattern+'", but received `'+JSON.stringify(f)+"`");i+=(0===l?u.prefix:u.delimiter)+f}}else{if(f=u.asterisk?H(d):a(d),!t[c].test(f))throw new TypeError('Expected "'+u.name+'" to match "'+u.pattern+'", but received "'+f+'"');i+=u.prefix+f}}else i+=u}return i}}function J(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function Y(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function X(e,t){return e.keys=t,e}function Z(e){return e.sensitive?"":"i"}function Q(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return X(e,t)}function ee(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(re(e[i],t,n).source);var o=new RegExp("(?:"+r.join("|")+")",Z(n));return X(o,t)}function te(e,t,n){return ne($(e,n),t,n)}function ne(e,t,n){D(t)||(n=t||n,t=[]),n=n||{};for(var r=n.strict,i=!1!==n.end,o="",s=0;s<e.length;s++){var a=e[s];if("string"===typeof a)o+=J(a);else{var c=J(a.prefix),u="(?:"+a.pattern+")";t.push(a),a.repeat&&(u+="(?:"+c+u+")*"),u=a.optional?a.partial?c+"("+u+")?":"(?:"+c+"("+u+"))?":c+"("+u+")",o+=u}}var f=J(n.delimiter||"/"),d=o.slice(-f.length)===f;return r||(o=(d?o.slice(0,-f.length):o)+"(?:"+f+"(?=$))?"),o+=i?"$":r&&d?"":"(?="+f+"|$)",X(new RegExp("^"+o,Z(n)),t)}function re(e,t,n){return D(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?Q(e,t):D(e)?ee(e,t,n):te(e,t,n)}B.parse=U,B.compile=F,B.tokensToFunction=V,B.tokensToRegExp=W;var ie=Object.create(null);function oe(e,t,n){t=t||{};try{var r=ie[e]||(ie[e]=B.compile(e));return t.pathMatch&&(t[0]=t.pathMatch),r(t,{pretty:!0})}catch(i){return""}finally{delete t[0]}}function se(e,t,n,r){var i=t||[],o=n||Object.create(null),s=r||Object.create(null);e.forEach((function(e){ae(i,o,s,e)}));for(var a=0,c=i.length;a<c;a++)"*"===i[a]&&(i.push(i.splice(a,1)[0]),c--,a--);return{pathList:i,pathMap:o,nameMap:s}}function ae(e,t,n,r,i,o){var s=r.path,a=r.name;var c=r.pathToRegexpOptions||{},u=ue(s,i,c.strict);"boolean"===typeof r.caseSensitive&&(c.sensitive=r.caseSensitive);var f={path:u,regex:ce(u,c),components:r.components||{default:r.component},instances:{},name:a,parent:i,matchAs:o,redirect:r.redirect,beforeEnter:r.beforeEnter,meta:r.meta||{},props:null==r.props?{}:r.components?r.props:{default:r.props}};if(r.children&&r.children.forEach((function(r){var i=o?L(o+"/"+r.path):void 0;ae(e,t,n,r,f,i)})),void 0!==r.alias){var d=Array.isArray(r.alias)?r.alias:[r.alias];d.forEach((function(o){var s={path:o,children:r.children};ae(e,t,n,s,i,f.path||"/")}))}t[f.path]||(e.push(f.path),t[f.path]=f),a&&(n[a]||(n[a]=f))}function ce(e,t){var n=B(e,[],t);return n}function ue(e,t,n){return n||(e=e.replace(/\/$/,"")),"/"===e[0]||null==t?e:L(t.path+"/"+e)}function fe(e,t,n,r){var i="string"===typeof e?{path:e}:e;if(i._normalized)return i;if(i.name)return o({},e);if(!i.path&&i.params&&t){i=o({},i),i._normalized=!0;var s=o(o({},t.params),i.params);if(t.name)i.name=t.name,i.params=s;else if(t.matched.length){var a=t.matched[t.matched.length-1].path;i.path=oe(a,s,"path "+t.path)}else 0;return i}var c=N(i.path||""),u=t&&t.path||"/",f=c.path?j(c.path,u,n||i.append):u,d=p(c.query,i.query,r&&r.options.parseQuery),l=i.hash||c.hash;return l&&"#"!==l.charAt(0)&&(l="#"+l),{_normalized:!0,path:f,query:d,hash:l}}function de(e,t){var n=se(e),r=n.pathList,i=n.pathMap,o=n.nameMap;function s(e){se(e,r,i,o)}function a(e,n,s){var a=fe(e,n,!1,t),c=a.name;if(c){var u=o[c];if(!u)return f(null,a);var d=u.regex.keys.filter((function(e){return!e.optional})).map((function(e){return e.name}));if("object"!==typeof a.params&&(a.params={}),n&&"object"===typeof n.params)for(var l in n.params)!(l in a.params)&&d.indexOf(l)>-1&&(a.params[l]=n.params[l]);if(u)return a.path=oe(u.path,a.params,'named route "'+c+'"'),f(u,a,s)}else if(a.path){a.params={};for(var p=0;p<r.length;p++){var h=r[p],m=i[h];if(le(m.regex,a.path,a.params))return f(m,a,s)}}return f(null,a)}function c(e,n){var r=e.redirect,i="function"===typeof r?r(g(e,n,null,t)):r;if("string"===typeof i&&(i={path:i}),!i||"object"!==typeof i)return f(null,n);var s=i,c=s.name,u=s.path,d=n.query,l=n.hash,p=n.params;if(d=s.hasOwnProperty("query")?s.query:d,l=s.hasOwnProperty("hash")?s.hash:l,p=s.hasOwnProperty("params")?s.params:p,c){o[c];return a({_normalized:!0,name:c,query:d,hash:l,params:p},void 0,n)}if(u){var h=pe(u,e),m=oe(h,p,'redirect route with path "'+h+'"');return a({_normalized:!0,path:m,query:d,hash:l},void 0,n)}return f(null,n)}function u(e,t,n){var r=oe(n,t.params,'aliased route with path "'+n+'"'),i=a({_normalized:!0,path:r});if(i){var o=i.matched,s=o[o.length-1];return t.params=i.params,f(s,t)}return f(null,t)}function f(e,n,r){return e&&e.redirect?c(e,r||n):e&&e.matchAs?u(e,n,e.matchAs):g(e,n,r,t)}return{match:a,addRoutes:s}}function le(e,t,n){var r=t.match(e);if(!r)return!1;if(!n)return!0;for(var i=1,o=r.length;i<o;++i){var s=e.keys[i-1],a="string"===typeof r[i]?decodeURIComponent(r[i]):r[i];s&&(n[s.name||"pathMatch"]=a)}return!0}function pe(e,t){return j(e,t.parent?t.parent.path:"/",!0)}var he=Object.create(null);function me(){window.history.replaceState({key:Re()},"",window.location.href.replace(window.location.origin,"")),window.addEventListener("popstate",(function(e){ge(),e.state&&e.state.key&&ke(e.state.key)}))}function ve(e,t,n,r){if(e.app){var i=e.options.scrollBehavior;i&&e.app.$nextTick((function(){var o=ye(),s=i.call(e,t,n,r?o:null);s&&("function"===typeof s.then?s.then((function(e){Ce(e,o)})).catch((function(e){0})):Ce(s,o))}))}}function ge(){var e=Re();e&&(he[e]={x:window.pageXOffset,y:window.pageYOffset})}function ye(){var e=Re();if(e)return he[e]}function be(e,t){var n=document.documentElement,r=n.getBoundingClientRect(),i=e.getBoundingClientRect();return{x:i.left-r.left-t.x,y:i.top-r.top-t.y}}function _e(e){return xe(e.x)||xe(e.y)}function we(e){return{x:xe(e.x)?e.x:window.pageXOffset,y:xe(e.y)?e.y:window.pageYOffset}}function Se(e){return{x:xe(e.x)?e.x:0,y:xe(e.y)?e.y:0}}function xe(e){return"number"===typeof e}function Ce(e,t){var n="object"===typeof e;if(n&&"string"===typeof e.selector){var r=document.querySelector(e.selector);if(r){var i=e.offset&&"object"===typeof e.offset?e.offset:{};i=Se(i),t=be(r,i)}else _e(e)&&(t=we(e))}else n&&_e(e)&&(t=we(e));t&&window.scrollTo(t.x,t.y)}var Ee=P&&function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&(window.history&&"pushState"in window.history)}(),Ie=P&&window.performance&&window.performance.now?window.performance:Date,Te=Oe();function Oe(){return Ie.now().toFixed(3)}function Re(){return Te}function ke(e){Te=e}function Me(e,t){ge();var n=window.history;try{t?n.replaceState({key:Te},"",e):(Te=Oe(),n.pushState({key:Te},"",e))}catch(r){window.location[t?"replace":"assign"](e)}}function Ae(e){Me(e,!0)}function Pe(e,t,n){var r=function(i){i>=e.length?n():e[i]?t(e[i],(function(){r(i+1)})):r(i+1)};r(0)}function je(e){return function(t,n,r){var o=!1,s=0,a=null;Ne(e,(function(e,t,n,c){if("function"===typeof e&&void 0===e.cid){o=!0,s++;var u,f=Ue((function(t){Be(t)&&(t=t.default),e.resolved="function"===typeof t?t:I.extend(t),n.components[c]=t,s--,s<=0&&r()})),d=Ue((function(e){var t="Failed to resolve async component "+c+": "+e;a||(a=i(e)?e:new Error(t),r(a))}));try{u=e(f,d)}catch(p){d(p)}if(u)if("function"===typeof u.then)u.then(f,d);else{var l=u.component;l&&"function"===typeof l.then&&l.then(f,d)}}})),o||r()}}function Ne(e,t){return Le(e.map((function(e){return Object.keys(e.components).map((function(n){return t(e.components[n],e.instances[n],e,n)}))})))}function Le(e){return Array.prototype.concat.apply([],e)}var De="function"===typeof Symbol&&"symbol"===typeof Symbol.toStringTag;function Be(e){return e.__esModule||De&&"Module"===e[Symbol.toStringTag]}function Ue(e){var t=!1;return function(){var n=[],r=arguments.length;while(r--)n[r]=arguments[r];if(!t)return t=!0,e.apply(this,n)}}var Fe=function(e,t){this.router=e,this.base=Ve(t),this.current=b,this.pending=null,this.ready=!1,this.readyCbs=[],this.readyErrorCbs=[],this.errorCbs=[]};function Ve(e){if(!e)if(P){var t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^https?:\/\/[^\/]+/,"")}else e="/";return"/"!==e.charAt(0)&&(e="/"+e),e.replace(/\/$/,"")}function We(e,t){var n,r=Math.max(e.length,t.length);for(n=0;n<r;n++)if(e[n]!==t[n])break;return{updated:t.slice(0,n),activated:t.slice(n),deactivated:e.slice(n)}}function qe(e,t,n,r){var i=Ne(e,(function(e,r,i,o){var s=$e(e,t);if(s)return Array.isArray(s)?s.map((function(e){return n(e,r,i,o)})):n(s,r,i,o)}));return Le(r?i.reverse():i)}function $e(e,t){return"function"!==typeof e&&(e=I.extend(e)),e.options[t]}function Ge(e){return qe(e,"beforeRouteLeave",He,!0)}function ze(e){return qe(e,"beforeRouteUpdate",He)}function He(e,t){if(t)return function(){return e.apply(t,arguments)}}function Ke(e,t,n){return qe(e,"beforeRouteEnter",(function(e,r,i,o){return Je(e,i,o,t,n)}))}function Je(e,t,n,r,i){return function(o,s,a){return e(o,s,(function(e){a(e),"function"===typeof e&&r.push((function(){Ye(e,t.instances,n,i)}))}))}}function Ye(e,t,n,r){t[n]&&!t[n]._isBeingDestroyed?e(t[n]):r()&&setTimeout((function(){Ye(e,t,n,r)}),16)}Fe.prototype.listen=function(e){this.cb=e},Fe.prototype.onReady=function(e,t){this.ready?e():(this.readyCbs.push(e),t&&this.readyErrorCbs.push(t))},Fe.prototype.onError=function(e){this.errorCbs.push(e)},Fe.prototype.transitionTo=function(e,t,n){var r=this,i=this.router.match(e,this.current);this.confirmTransition(i,(function(){r.updateRoute(i),t&&t(i),r.ensureURL(),r.ready||(r.ready=!0,r.readyCbs.forEach((function(e){e(i)})))}),(function(e){n&&n(e),e&&!r.ready&&(r.ready=!0,r.readyErrorCbs.forEach((function(t){t(e)})))}))},Fe.prototype.confirmTransition=function(e,t,n){var o=this,s=this.current,a=function(e){i(e)&&(o.errorCbs.length?o.errorCbs.forEach((function(t){t(e)})):(r(!1,"uncaught error during route navigation:"),console.error(e))),n&&n(e)};if(S(e,s)&&e.matched.length===s.matched.length)return this.ensureURL(),a();var c=We(this.current.matched,e.matched),u=c.updated,f=c.deactivated,d=c.activated,l=[].concat(Ge(f),this.router.beforeHooks,ze(u),d.map((function(e){return e.beforeEnter})),je(d));this.pending=e;var p=function(t,n){if(o.pending!==e)return a();try{t(e,s,(function(e){!1===e||i(e)?(o.ensureURL(!0),a(e)):"string"===typeof e||"object"===typeof e&&("string"===typeof e.path||"string"===typeof e.name)?(a(),"object"===typeof e&&e.replace?o.replace(e):o.push(e)):n(e)}))}catch(r){a(r)}};Pe(l,p,(function(){var n=[],r=function(){return o.current===e},i=Ke(d,n,r),s=i.concat(o.router.resolveHooks);Pe(s,p,(function(){if(o.pending!==e)return a();o.pending=null,t(e),o.router.app&&o.router.app.$nextTick((function(){n.forEach((function(e){e()}))}))}))}))},Fe.prototype.updateRoute=function(e){var t=this.current;this.current=e,this.cb&&this.cb(e),this.router.afterHooks.forEach((function(n){n&&n(e,t)}))};var Xe=function(e){function t(t,n){var r=this;e.call(this,t,n);var i=t.options.scrollBehavior,o=Ee&&i;o&&me();var s=Ze(this.base);window.addEventListener("popstate",(function(e){var n=r.current,i=Ze(r.base);r.current===b&&i===s||r.transitionTo(i,(function(e){o&&ve(t,e,n,!0)}))}))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.go=function(e){window.history.go(e)},t.prototype.push=function(e,t,n){var r=this,i=this,o=i.current;this.transitionTo(e,(function(e){Me(L(r.base+e.fullPath)),ve(r.router,e,o,!1),t&&t(e)}),n)},t.prototype.replace=function(e,t,n){var r=this,i=this,o=i.current;this.transitionTo(e,(function(e){Ae(L(r.base+e.fullPath)),ve(r.router,e,o,!1),t&&t(e)}),n)},t.prototype.ensureURL=function(e){if(Ze(this.base)!==this.current.fullPath){var t=L(this.base+this.current.fullPath);e?Me(t):Ae(t)}},t.prototype.getCurrentLocation=function(){return Ze(this.base)},t}(Fe);function Ze(e){var t=decodeURI(window.location.pathname);return e&&0===t.indexOf(e)&&(t=t.slice(e.length)),(t||"/")+window.location.search+window.location.hash}var Qe=function(e){function t(t,n,r){e.call(this,t,n),r&&et(this.base)||tt()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.setupListeners=function(){var e=this,t=this.router,n=t.options.scrollBehavior,r=Ee&&n;r&&me(),window.addEventListener(Ee?"popstate":"hashchange",(function(){var t=e.current;tt()&&e.transitionTo(nt(),(function(n){r&&ve(e.router,n,t,!0),Ee||ot(n.fullPath)}))}))},t.prototype.push=function(e,t,n){var r=this,i=this,o=i.current;this.transitionTo(e,(function(e){it(e.fullPath),ve(r.router,e,o,!1),t&&t(e)}),n)},t.prototype.replace=function(e,t,n){var r=this,i=this,o=i.current;this.transitionTo(e,(function(e){ot(e.fullPath),ve(r.router,e,o,!1),t&&t(e)}),n)},t.prototype.go=function(e){window.history.go(e)},t.prototype.ensureURL=function(e){var t=this.current.fullPath;nt()!==t&&(e?it(t):ot(t))},t.prototype.getCurrentLocation=function(){return nt()},t}(Fe);function et(e){var t=Ze(e);if(!/^\/#/.test(t))return window.location.replace(L(e+"/#"+t)),!0}function tt(){var e=nt();return"/"===e.charAt(0)||(ot("/"+e),!1)}function nt(){var e=window.location.href,t=e.indexOf("#");if(t<0)return"";e=e.slice(t+1);var n=e.indexOf("?");if(n<0){var r=e.indexOf("#");e=r>-1?decodeURI(e.slice(0,r))+e.slice(r):decodeURI(e)}else n>-1&&(e=decodeURI(e.slice(0,n))+e.slice(n));return e}function rt(e){var t=window.location.href,n=t.indexOf("#"),r=n>=0?t.slice(0,n):t;return r+"#"+e}function it(e){Ee?Me(rt(e)):window.location.hash=e}function ot(e){Ee?Ae(rt(e)):window.location.replace(rt(e))}var st=function(e){function t(t,n){e.call(this,t,n),this.stack=[],this.index=-1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.push=function(e,t,n){var r=this;this.transitionTo(e,(function(e){r.stack=r.stack.slice(0,r.index+1).concat(e),r.index++,t&&t(e)}),n)},t.prototype.replace=function(e,t,n){var r=this;this.transitionTo(e,(function(e){r.stack=r.stack.slice(0,r.index).concat(e),t&&t(e)}),n)},t.prototype.go=function(e){var t=this,n=this.index+e;if(!(n<0||n>=this.stack.length)){var r=this.stack[n];this.confirmTransition(r,(function(){t.index=n,t.updateRoute(r)}))}},t.prototype.getCurrentLocation=function(){var e=this.stack[this.stack.length-1];return e?e.fullPath:"/"},t.prototype.ensureURL=function(){},t}(Fe),at=function(e){void 0===e&&(e={}),this.app=null,this.apps=[],this.options=e,this.beforeHooks=[],this.resolveHooks=[],this.afterHooks=[],this.matcher=de(e.routes||[],this);var t=e.mode||"hash";switch(this.fallback="history"===t&&!Ee&&!1!==e.fallback,this.fallback&&(t="hash"),P||(t="abstract"),this.mode=t,t){case"history":this.history=new Xe(this,e.base);break;case"hash":this.history=new Qe(this,e.base,this.fallback);break;case"abstract":this.history=new st(this,e.base);break;default:0}},ct={currentRoute:{configurable:!0}};function ut(e,t){return e.push(t),function(){var n=e.indexOf(t);n>-1&&e.splice(n,1)}}function ft(e,t,n){var r="hash"===n?"#"+t:t;return e?L(e+"/"+r):r}at.prototype.match=function(e,t,n){return this.matcher.match(e,t,n)},ct.currentRoute.get=function(){return this.history&&this.history.current},at.prototype.init=function(e){var t=this;if(this.apps.push(e),e.$once("hook:destroyed",(function(){var n=t.apps.indexOf(e);n>-1&&t.apps.splice(n,1),t.app===e&&(t.app=t.apps[0]||null)})),!this.app){this.app=e;var n=this.history;if(n instanceof Xe)n.transitionTo(n.getCurrentLocation());else if(n instanceof Qe){var r=function(){n.setupListeners()};n.transitionTo(n.getCurrentLocation(),r,r)}n.listen((function(e){t.apps.forEach((function(t){t._route=e}))}))}},at.prototype.beforeEach=function(e){return ut(this.beforeHooks,e)},at.prototype.beforeResolve=function(e){return ut(this.resolveHooks,e)},at.prototype.afterEach=function(e){return ut(this.afterHooks,e)},at.prototype.onReady=function(e,t){this.history.onReady(e,t)},at.prototype.onError=function(e){this.history.onError(e)},at.prototype.push=function(e,t,n){this.history.push(e,t,n)},at.prototype.replace=function(e,t,n){this.history.replace(e,t,n)},at.prototype.go=function(e){this.history.go(e)},at.prototype.back=function(){this.go(-1)},at.prototype.forward=function(){this.go(1)},at.prototype.getMatchedComponents=function(e){var t=e?e.matched?e:this.resolve(e).route:this.currentRoute;return t?[].concat.apply([],t.matched.map((function(e){return Object.keys(e.components).map((function(t){return e.components[t]}))}))):[]},at.prototype.resolve=function(e,t,n){t=t||this.history.current;var r=fe(e,t,n,this),i=this.match(r,t),o=i.redirectedFrom||i.fullPath,s=this.history.base,a=ft(s,o,this.mode);return{location:r,route:i,href:a,normalizedTo:r,resolved:i}},at.prototype.addRoutes=function(e){this.matcher.addRoutes(e),this.history.current!==b&&this.history.transitionTo(this.history.getCurrentLocation())},Object.defineProperties(at.prototype,ct),at.install=A,at.version="3.0.6",P&&window.Vue&&window.Vue.use(at),t["a"]=at},"8df4":function(e,t,n){"use strict";var r=n("7a77");function i(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var e,t=new i((function(t){e=t}));return{token:t,cancel:e}},e.exports=i},"8eb7":function(e,t){var n,r,i,o,s,a,c,u,f,d,l,p,h,m,v,g=!1;function y(){if(!g){g=!0;var e=navigator.userAgent,t=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(e),y=/(Mac OS X)|(Windows)|(Linux)/.exec(e);if(p=/\b(iPhone|iP[ao]d)/.exec(e),h=/\b(iP[ao]d)/.exec(e),d=/Android/i.exec(e),m=/FBAN\/\w+;/i.exec(e),v=/Mobile/i.exec(e),l=!!/Win64/.exec(e),t){n=t[1]?parseFloat(t[1]):t[5]?parseFloat(t[5]):NaN,n&&document&&document.documentMode&&(n=document.documentMode);var b=/(?:Trident\/(\d+.\d+))/.exec(e);a=b?parseFloat(b[1])+4:n,r=t[2]?parseFloat(t[2]):NaN,i=t[3]?parseFloat(t[3]):NaN,o=t[4]?parseFloat(t[4]):NaN,o?(t=/(?:Chrome\/(\d+\.\d+))/.exec(e),s=t&&t[1]?parseFloat(t[1]):NaN):s=NaN}else n=r=i=s=o=NaN;if(y){if(y[1]){var _=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(e);c=!_||parseFloat(_[1].replace("_","."))}else c=!1;u=!!y[2],f=!!y[3]}else c=u=f=!1}}var b={ie:function(){return y()||n},ieCompatibilityMode:function(){return y()||a>n},ie64:function(){return b.ie()&&l},firefox:function(){return y()||r},opera:function(){return y()||i},webkit:function(){return y()||o},safari:function(){return b.webkit()},chrome:function(){return y()||s},windows:function(){return y()||u},osx:function(){return y()||c},linux:function(){return y()||f},iphone:function(){return y()||p},mobile:function(){return y()||p||h||d||v},nativeApp:function(){return y()||m},android:function(){return y()||d},ipad:function(){return y()||h}};e.exports=b},"8f9b":function(e,t,n){!function(t,r){e.exports=r(n("a026"))}("undefined"!=typeof self&&self,(function(e){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="./",t(t.s=64)}([function(e,t,n){"use strict";var r=n(45),i=n.n(r),o=n(6),s=n(50),a=n(13),c=n(49),u=n(27);t.a={data:function(){return{unwatchFns:[]}},mounted:function(){var e=this;a.b&&a.b.load().then((function(){e.__contextReady&&e.__contextReady.call(e,e.convertProps())})),this.$amap=this.$amap||this.$parent.$amap,this.$amap?this.register():this.$on(c.a.AMAP_READY_EVENT,(function(t){e.$amap=t,e.register()}))},destroyed:function(){this.unregisterEvents(),this.$amapComponent&&(this.$amapComponent.setMap&&this.$amapComponent.setMap(null),this.$amapComponent.close&&this.$amapComponent.close(),this.$amapComponent.editor&&this.$amapComponent.editor.close(),this.unwatchFns.forEach((function(e){return e()})),this.unwatchFns=[])},methods:{getHandlerFun:function(e){return this.handlers&&this.handlers[e]?this.handlers[e]:this.$amapComponent["set"+i()(e)]||this.$amapComponent.setOptions},convertProps:function(){var e=this,t={};this.$amap&&(t.map=this.$amap);var n=this.$options.propsData,r=void 0===n?{}:n,i=this.propsRedirect;return Object.keys(r).reduce((function(n,o){var s=o,a=e.convertSignalProp(s,r[s]);return void 0===a||(i&&i[o]&&(s=i[s]),t[s]=a),n}),t)},convertSignalProp:function(e,t){var n="",r="";if(this.amapTagName)try{var s=i()(this.amapTagName).replace(/^El/,"");r=(u.default[s]||"").props[e].$type,n=o.a[r]}catch(e){}if(r&&n)return n(t);if(this.converters&&this.converters[e])return this.converters[e].call(this,t);var a=o.a[e];return a?a(t):t},registerEvents:function(){if(this.setEditorEvents&&this.setEditorEvents(),this.$options.propsData){if(this.$options.propsData.events)for(var e in this.events)s.a.addListener(this.$amapComponent,e,this.events[e]);if(this.$options.propsData.onceEvents)for(var t in this.onceEvents)s.a.addListenerOnce(this.$amapComponent,t,this.onceEvents[t])}},unregisterEvents:function(){s.a.clearListeners(this.$amapComponent)},setPropWatchers:function(){var e=this,t=this.propsRedirect,n=this.$options.propsData,r=void 0===n?{}:n;Object.keys(r).forEach((function(n){var r=n;t&&t[n]&&(r=t[n]);var i=e.getHandlerFun(r);if(i||"events"===n){var o=e.$watch(n,(function(t){return"events"===n?(e.unregisterEvents(),void e.registerEvents()):i&&i===e.$amapComponent.setOptions?i.call(e.$amapComponent,(o={},o[r]=e.convertSignalProp(n,t),o)):void i.call(e.$amapComponent,e.convertSignalProp(n,t));var o}));e.unwatchFns.push(o)}}))},registerToManager:function(){var e=this.amapManager||this.$parent.amapManager;e&&void 0!==this.vid&&e.setComponent(this.vid,this.$amapComponent)},initProps:function(){var e=this;["editable","visible"].forEach((function(t){if(void 0!==e[t]){var n=e.getHandlerFun(t);n&&n.call(e.$amapComponent,e.convertSignalProp(t,e[t]))}}))},printReactiveProp:function(){var e=this;Object.keys(this._props).forEach((function(t){e.$amapComponent["set"+i()(t)]&&console.log(t)}))},register:function(){var e=this,t=this.__initComponent&&this.__initComponent(this.convertProps());t&&t.then?t.then((function(t){return e.registerRest(t)})):this.registerRest(t)},registerRest:function(e){!this.$amapComponent&&e&&(this.$amapComponent=e),this.registerEvents(),this.initProps(),this.setPropWatchers(),this.registerToManager(),this.events&&this.events.init&&this.events.init(this.$amapComponent,this.$amap,this.amapManager||this.$parent.amapManager)},$$getInstance:function(){return this.$amapComponent}}}},function(e,t,n){"use strict";function r(e,t,n,r,i,o,s,a){e=e||{};var c=typeof e.default;"object"!==c&&"function"!==c||(e=e.default);var u,f="function"==typeof e?e.options:e;if(t&&(f.render=t,f.staticRenderFns=n,f._compiled=!0),r&&(f.functional=!0),o&&(f._scopeId=o),s?(u=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},f._ssrRegister=u):i&&(u=a?function(){i.call(this,this.$root.$options.shadowRoot)}:i),u)if(f.functional){f._injectStyles=u;var d=f.render;f.render=function(e,t){return u.call(t),d(e,t)}}else{var l=f.beforeCreate;f.beforeCreate=l?[].concat(l,u):[u]}return{exports:e,options:f}}t.a=r},function(e,t,n){var r=n(30)("wks"),i=n(14),o=n(3).Symbol,s="function"==typeof o;(e.exports=function(e){return r[e]||(r[e]=s&&o[e]||(s?o:i)("Symbol."+e))}).store=r},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){e.exports=!n(15)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t,n){"use strict";function r(e){return new AMap.Pixel(e[0],e[1])}function i(e){return new AMap.Size(e[0],e[1])}function o(e){return Array.isArray(e)?e:[e.getX(),e.getY()]}function s(e){return new AMap.LngLat(e[0],e[1])}function a(e){if(e)return Array.isArray(e)?e.slice():[e.getLng(),e.getLat()]}function c(e){return new AMap.Bounds(s(e[0]),s(e[1]))}t.e=r,t.c=o,t.d=s,t.b=a,n.d(t,"a",(function(){return u}));var u={position:s,offset:r,bounds:c,LngLat:s,Pixel:r,Size:i,Bounds:c}},function(e,t,n){var r=n(3),i=n(8),o=n(11),s=n(14)("src"),a=Function.toString,c=(""+a).split("toString");n(16).inspectSource=function(e){return a.call(e)},(e.exports=function(e,t,n,a){var u="function"==typeof n;u&&(o(n,"name")||i(n,"name",t)),e[t]!==n&&(u&&(o(n,s)||i(n,s,e[t]?""+e[t]:c.join(String(t)))),e===r?e[t]=n:a?e[t]?e[t]=n:i(e,t,n):(delete e[t],i(e,t,n)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[s]||a.call(this)}))},function(e,t,n){var r=n(9),i=n(20);e.exports=n(5)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(10),i=n(31),o=n(33),s=Object.defineProperty;t.f=n(5)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return s(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(4);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t){e.exports={}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return s}));var r=n(97),i=n(19),o=n.n(i),s=null,a=function(e){o.a.prototype.$isServer||s||(s||(s=new r.a(e)),s.load())}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){var n=e.exports={version:"2.5.5"};"number"==typeof __e&&(__e=n)},function(e,t,n){var r=n(71);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){var r=n(75),i=n(22);e.exports=function(e){return r(i(e))}},function(t,n){t.exports=e},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){"use strict";var r=n(70),i=n(34),o=n(7),s=n(8),a=n(12),c=n(72),u=n(25),f=n(79),d=n(2)("iterator"),l=!([].keys&&"next"in[].keys()),p=function(){return this};e.exports=function(e,t,n,h,m,v,g){c(n,t,h);var y,b,_,w=function(e){if(!l&&e in E)return E[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},S=t+" Iterator",x="values"==m,C=!1,E=e.prototype,I=E[d]||E["@@iterator"]||m&&E[m],T=I||w(m),O=m?x?w("entries"):T:void 0,R="Array"==t&&E.entries||I;if(R&&(_=f(R.call(new e)))!==Object.prototype&&_.next&&(u(_,S,!0),r||"function"==typeof _[d]||s(_,d,p)),x&&I&&"values"!==I.name&&(C=!0,T=function(){return I.call(this)}),r&&!g||!l&&!C&&E[d]||s(E,d,T),a[t]=T,a[S]=p,m)if(y={values:x?T:w("values"),keys:v?T:w("keys"),entries:O},g)for(b in y)b in E||o(E,b,y[b]);else i(i.P+i.F*(l||C),t,y);return y}},function(e,t,n){var r=n(30)("keys"),i=n(14);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t,n){var r=n(9).f,i=n(11),o=n(2)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t,n){"use strict";var r=n(50);t.a={methods:{setEditorEvents:function(){var e=this;if(this.$amapComponent.editor&&this.events){var t=["addnode","adjust","removenode","end","move"],n={};Object.keys(this.events).forEach((function(r){-1!==t.indexOf(r)&&(n[r]=e.events[r])})),Object.keys(n).forEach((function(t){r.a.addListener(e.$amapComponent.editor,t,n[t])}))}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(n(65),n(45)),i=n.n(r),o=n(13),s=n(100),a=n(106),c=n(107),u=n(111),f=n(113),d=n(115),l=n(116),p=n(118),h=n(120),m=n(122),v=n(124),g=n(126),y=n(128),b=n(130),_=n(131);n.d(t,"AMapManager",(function(){return b.a})),n.d(t,"initAMapApiLoader",(function(){return o.a})),n.d(t,"createCustomComponent",(function(){return _.a})),n.d(t,"lazyAMapApiLoaderInstance",(function(){return o.b}));var w=[s.a,a.a,c.a,u.a,f.a,d.a,p.a,l.a,h.a,m.a,v.a,g.a,y.a],S={initAMapApiLoader:o.a,AMapManager:b.a,install:function(e){S.installed||(e.config.optionMergeStrategies.deferredReady=e.config.optionMergeStrategies.created,w.map((function(t){e.component(t.name,t),S[i()(t.name).replace(/^El/,"")]=t})))}};"undefined"!=typeof window&&window.Vue&&function e(t){e.installed||S.install(t)}(window.Vue),t.default=S},function(e,t,n){var r=n(29),i=n(2)("toStringTag"),o="Arguments"==r(function(){return arguments}()),s=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,n,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=s(t=Object(e),i))?n:o?r(t):"Object"==(a=r(t))&&"function"==typeof t.callee?"Arguments":a}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r=n(3),i=r["__core-js_shared__"]||(r["__core-js_shared__"]={});e.exports=function(e){return i[e]||(i[e]={})}},function(e,t,n){e.exports=!n(5)&&!n(15)((function(){return 7!=Object.defineProperty(n(32)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(4),i=n(3).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,n){var r=n(4);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var r=n(3),i=n(16),o=n(8),s=n(7),a=n(17),c=function(e,t,n){var u,f,d,l,p=e&c.F,h=e&c.G,m=e&c.S,v=e&c.P,g=e&c.B,y=h?r:m?r[t]||(r[t]={}):(r[t]||{}).prototype,b=h?i:i[t]||(i[t]={}),_=b.prototype||(b.prototype={});for(u in h&&(n=t),n)f=!p&&y&&void 0!==y[u],d=(f?y:n)[u],l=g&&f?a(d,r):v&&"function"==typeof d?a(Function.call,d):d,y&&s(y,u,d,e&c.U),b[u]!=d&&o(b,u,l),v&&_[u]!=d&&(_[u]=d)};r.core=i,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},function(e,t,n){var r=n(10),i=n(73),o=n(38),s=n(24)("IE_PROTO"),a=function(){},c=function(){var e,t=n(32)("iframe"),r=o.length;for(t.style.display="none",n(78).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object<\/script>"),e.close(),c=e.F;r--;)delete c.prototype[o[r]];return c()};e.exports=Object.create||function(e,t){var n;return null!==e?(a.prototype=r(e),n=new a,a.prototype=null,n[s]=e):n=c(),void 0===t?n:i(n,t)}},function(e,t,n){var r=n(74),i=n(38);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t,n){var r=n(21),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){var r=n(7);e.exports=function(e,t,n){for(var i in t)r(e,i,t[i],n);return e}},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var r=n(17),i=n(86),o=n(87),s=n(10),a=n(37),c=n(88),u={},f={};t=e.exports=function(e,t,n,d,l){var p,h,m,v,g=l?function(){return e}:c(e),y=r(n,d,t?2:1),b=0;if("function"!=typeof g)throw TypeError(e+" is not iterable!");if(o(g)){for(p=a(e.length);p>b;b++)if((v=t?y(s(h=e[b])[0],h[1]):y(e[b]))===u||v===f)return v}else for(m=g.call(e);!(h=m.next()).done;)if((v=i(m,y,h.value,t))===u||v===f)return v};t.BREAK=u,t.RETURN=f},function(e,t,n){var r=n(14)("meta"),i=n(4),o=n(11),s=n(9).f,a=0,c=Object.isExtensible||function(){return!0},u=!n(15)((function(){return c(Object.preventExtensions({}))})),f=function(e){s(e,r,{value:{i:"O"+ ++a,w:{}}})},d=function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,r)){if(!c(e))return"F";if(!t)return"E";f(e)}return e[r].i},l=function(e,t){if(!o(e,r)){if(!c(e))return!0;if(!t)return!1;f(e)}return e[r].w},p=function(e){return u&&h.NEED&&c(e)&&!o(e,r)&&f(e),e},h=e.exports={KEY:r,NEED:!1,fastKey:d,getWeak:l,onFreeze:p}},function(e,t,n){var r=n(4);e.exports=function(e,t){if(!r(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,n){"use strict";var r=n(96);e.exports=function(){var e=r.apply(r,arguments);return e.charAt(0).toUpperCase()+e.slice(1)}},function(e,t){function n(e,t){var n=e[1]||"",i=e[3];if(!i)return n;if(t&&"function"==typeof btoa){var o=r(i);return[n].concat(i.sources.map((function(e){return"/*# sourceURL="+i.sourceRoot+e+" */"}))).concat([o]).join("\n")}return[n].join("\n")}function r(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r=n(t,e);return t[2]?"@media "+t[2]+"{"+r+"}":r})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<e.length;i++){var s=e[i];"number"==typeof s[0]&&r[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),t.push(s))}},t}},function(e,t,n){function r(e){for(var t=0;t<e.length;t++){var n=e[t],r=f[n.id];if(r){r.refs++;for(var i=0;i<r.parts.length;i++)r.parts[i](n.parts[i]);for(;i<n.parts.length;i++)r.parts.push(o(n.parts[i]));r.parts.length>n.parts.length&&(r.parts.length=n.parts.length)}else{var s=[];for(i=0;i<n.parts.length;i++)s.push(o(n.parts[i]));f[n.id]={id:n.id,refs:1,parts:s}}}}function i(){var e=document.createElement("style");return e.type="text/css",d.appendChild(e),e}function o(e){var t,n,r=document.querySelector('style[data-vue-ssr-id~="'+e.id+'"]');if(r){if(h)return m;r.parentNode.removeChild(r)}if(v){var o=p++;r=l||(l=i()),t=s.bind(null,r,o,!1),n=s.bind(null,r,o,!0)}else r=i(),t=a.bind(null,r),n=function(){r.parentNode.removeChild(r)};return t(e),function(r){if(r){if(r.css===e.css&&r.media===e.media&&r.sourceMap===e.sourceMap)return;t(e=r)}else n()}}function s(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=g(t,i);else{var o=document.createTextNode(i),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(o,s[t]):e.appendChild(o)}}function a(e,t){var n=t.css,r=t.media,i=t.sourceMap;if(r&&e.setAttribute("media",r),i&&(n+="\n/*# sourceURL="+i.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var c="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!c)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var u=n(103),f={},d=c&&(document.head||document.getElementsByTagName("head")[0]),l=null,p=0,h=!1,m=function(){},v="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());e.exports=function(e,t,n){h=n;var i=u(e,t);return r(i),function(t){for(var n=[],o=0;o<i.length;o++){var s=i[o],a=f[s.id];a.refs--,n.push(a)}t?(i=u(e,t),r(i)):i=[];for(o=0;o<n.length;o++){a=n[o];if(0===a.refs){for(var c=0;c<a.parts.length;c++)a.parts[c]();delete f[a.id]}}}};var g=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t,n){"use strict";var r=n(104),i=n(49),o=n(6),s=n(0),a=n(13),c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.a={name:"el-amap",mixins:[s.a],props:["viewMode","skyColor","rotateEnable","pitch","buildingAnimation","pitchEnable","vid","events","center","zoom","draggEnable","level","zooms","lang","defaultCursor","crs","animateEnable","isHotspot","defaultLayer","rotateEnable","resizeEnable","showIndoorMap","indoorMap","expandZoomRange","dragEnable","zoomEnable","doubleClickZoom","keyboardEnable","jogEnable","scrollWheel","touchZoom","mapStyle","plugin","features","amapManager"],beforeCreate:function(){this._loadPromise=a.b.load()},destroyed:function(){this.$amap&&this.$amap.destroy()},computed:{plugins:function(){var e=[],t=/^AMap./,n=function(e){return t.test(e)?e:"AMap."+e},r=function(e){return e.replace(t,"")};return"string"==typeof this.plugin?e.push({pName:n(this.plugin),sName:r(this.plugin)}):this.plugin instanceof Array&&(e=this.plugin.map((function(e){var t={};return"string"==typeof e?t={pName:n(e),sName:r(e)}:(e.pName=n(e.pName),e.sName=r(e.pName),t=e),t}))),e}},data:function(){return{converters:{center:function(e){return Object(o.d)(e)}},handlers:{zoomEnable:function(e){this.setStatus({zoomEnable:e})},dragEnable:function(e){this.setStatus({dragEnable:e})},rotateEnable:function(e){this.setStatus({rotateEnable:e})}}}},mounted:function(){this.createMap()},addEvents:function(){var e=this;this.$amapComponent.on("moveend",(function(){var t=e.$amapComponent.getCenter();e.center=[t.getLng(),t.getLat()]}))},methods:{addPlugins:function(){var e=this.plugins.filter((function(e){return!AMap[e.sName]}));return e&&e.length?this.$amapComponent.plugin(e,this.addMapControls):this.addMapControls()},addMapControls:function(){var e=this;this.plugins&&this.plugins.length&&(this.$plugins=this.$plugins||{},this.plugins.forEach((function(t){var n=e.convertAMapPluginProps(t),r=e.$plugins[n.pName]=new AMap[n.sName](n);if(e.$amapComponent.addControl(r),t.events)for(var i in t.events){var o=t.events[i];"init"===i?o(r):AMap.event.addListener(r,i,o)}})))},convertAMapPluginProps:function(e){if("object"===(void 0===e?"undefined":c(e))&&e.pName){switch(e.pName){case"AMap.ToolBar":case"AMap.Scale":e.offset&&e.offset instanceof Array&&(e.offset=Object(o.e)(e.offset))}return e}return""},setStatus:function(e){this.$amap.setStatus(e)},createMap:function(){var e=this;this._loadPromise.then((function(){var t=e.$el.querySelector(".el-vue-amap"),n=e.vid||Object(r.a)();t.id=n,e.$amap=e.$amapComponent=new AMap.Map(n,e.convertProps()),e.amapManager&&e.amapManager.setMap(e.$amap),e.$emit(i.a.AMAP_READY_EVENT,e.$amap),e.$children.forEach((function(t){t.$emit(i.a.AMAP_READY_EVENT,e.$amap)})),e.plugins&&e.plugins.length&&e.addPlugins()}))},$$getCenter:function(){return this.$amap?Object(o.b)(this.$amap.getCenter()):Object(o.b)(this.center)}}}},function(e,t,n){"use strict";t.a={AMAP_READY_EVENT:"AMAP_READY_EVENT"}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=void 0,o=function(){function e(){r(this,e),this._listener=new Map}return e.prototype.addListener=function(e,t,n,r){if(!AMap.event)throw new Error("please wait for Map API load");var i=AMap.event.addListener(e,t,n,r);this._listener.get(e)||this._listener.set(e,{});var o=this._listener.get(e);o[t]||(o[t]=[]),o[t].push(i)},e.prototype.removeListener=function(e,t,n){if(!AMap.event)throw new Error("please wait for Map API load");if(this._listener.get(e)&&this._listener.get(e)[t]){var r=this._listener.get(e)[t];if(n){var i=r.indexOf(n);AMap.event.removeListener(r[i]),r.splice(i,1)}else r.forEach((function(e){AMap.event.removeListener(e)})),this._listener.get(e)[t]=[]}},e.prototype.addListenerOnce=function(e,t,n,r){return AMap.event.addListenerOnce(e,t,n,r)},e.prototype.trigger=function(e,t,n){return AMap.event.trigger(e,t,n)},e.prototype.clearListeners=function(e){var t=this,n=this._listener.get(e);n&&Object.keys(n).map((function(n){t.removeListener(e,n)}))},e}();i=i||new o,t.a=i},function(e,t,n){"use strict";var r=n(0),i=n(6),o=n(52),s=n(19),a=n.n(s),c="el-amap-marker";t.a={name:c,mixins:[r.a],props:["vid","position","offset","icon","content","topWhenClick","bubble","draggable","raiseOnDrag","cursor","visible","zIndex","angle","autoRotation","animation","shadow","title","clickable","shape","extData","label","events","onceEvents","template","vnode","contentRender"],data:function(){var e=this;return{$tagName:c,withSlots:!1,tmpVM:null,propsRedirect:{template:"content",vnode:"content",contentRender:"content"},converters:{shape:function(e){return new AMap.MarkerShape(e)},shadow:function(e){return new AMap.Icon(e)},template:function(t){var n=Object(o.a)(t,e);return this.$customContent=n,n.$el},vnode:function(t){var n="function"==typeof t?t(e):t,r=Object(o.c)(n);return this.$customContent=r,r.$el},contentRender:function(t){var n=Object(o.b)(t,e);return this.$customContent=n,n.$el},label:function(e){var t=e.content,n=void 0===t?"":t,r=e.offset,o=void 0===r?[0,0]:r;return{content:n,offset:Object(i.e)(o)}}},handlers:{zIndex:function(e){this.setzIndex(e)},visible:function(e){!1===e?this.hide():this.show()}}}},created:function(){this.tmpVM=new a.a({data:function(){return{node:""}},render:function(e){var t=this.node;return e("div",{ref:"node"},Array.isArray(t)?t:[t])}}).$mount()},methods:{__initComponent:function(e){this.$slots.default&&this.$slots.default.length&&(e.content=this.tmpVM.$refs.node),this.$amapComponent=new AMap.Marker(e)},$$getExtData:function(){return this.$amapComponent.getExtData()},$$getPosition:function(){return Object(i.b)(this.$amapComponent.getPosition())},$$getOffset:function(){return Object(i.c)(this.$amapComponent.getOffset())}},render:function(e){var t=this.$slots.default||[];return t.length&&(this.tmpVM.node=t),null},destroyed:function(){this.tmpVM.$destroy(),this.$customContent&&this.$customContent.$destroy&&this.$customContent.$destroy()}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return c}));var r=n(19),i=n.n(r),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(e,t){var n=["methods","computed","data","filters"],r={},s=i.a.compile(e);n.forEach((function(e){r[e]=t.$parent.$parent.$options[e],"data"===e&&"function"==typeof r[e]&&(r[e]=r[e]())}));var a=new i.a(o({},r,s));return a.$mount(),a},a=function(e){var t=new i.a({render:function(t){return t("div",e)}});return t.$mount(),t},c=function(e,t){var n=new i.a({render:function(n){return e(n,t)}});return n.$mount(),n}},function(e,t,n){"use strict";var r=n(0),i=n(13);t.a={name:"el-amap-search-box",mixins:[r.a],props:["searchOption","onSearchResult","events","default"],data:function(){return{keyword:this.default||"",tips:[],selectedTip:-1,loaded:!1,adcode:null}},mounted:function(){var e=this;i.b.load().then((function(){e.loaded=!0,e._onSearchResult=e.onSearchResult,e.events&&e.events.init&&e.events.init({autoComplete:e._autoComplete,placeSearch:e._placeSearch})}))},computed:{_autoComplete:function(){if(this.loaded)return new AMap.Autocomplete(this.searchOption||{})},_placeSearch:function(){if(this.loaded)return new AMap.PlaceSearch(this.searchOption||{})}},methods:{autoComplete:function(){var e=this;this.keyword&&this._autoComplete&&this._autoComplete.search(this.keyword,(function(t,n){"complete"===t&&(e.tips=n.tips)}))},search:function(){var e=this;if(this.tips=[],this._placeSearch){var t=null;t=this.searchOption.citylimit&&this.searchOption.city?this.searchOption.city:this.adcode,this._placeSearch.setCity(t||this.searchOption.city),this._placeSearch.search(this.keyword,(function(t,n){if(n&&n.poiList&&n.poiList.count){var r=n.poiList.pois,i=r.map((function(e){return e.lat=e.location.lat,e.lng=e.location.lng,e}));e._onSearchResult(i)}else if(void 0===n.poiList)throw new Error(n)}))}},changeTip:function(e){this.adcode=e.adcode,this.keyword=e.name,this.search()},selectTip:function(e){"up"===e&&this.selectedTip>0?(this.selectedTip-=1,this.keyword=this.tips[this.selectedTip].name,this.adcode=this.tips[this.selectedTip].adcode):"down"===e&&this.selectedTip+1<this.tips.length&&(this.selectedTip+=1,this.keyword=this.tips[this.selectedTip].name,this.adcode=this.tips[this.selectedTip].adcode)}}}},function(e,t,n){"use strict";var r=n(0),i=n(6),o=n(26);t.a={name:"el-amap-circle",mixins:[r.a,o.a],props:["vid","zIndex","center","bubble","radius","strokeColor","strokeOpacity","strokeWeight","editable","fillColor","fillOpacity","strokeStyle","extData","strokeDasharray","events","visible","extData","onceEvents"],data:function(){return{converters:{center:function(e){return Object(i.d)(e)}},handlers:{zIndex:function(e){this.setzIndex(e)},visible:function(e){!1===e?this.hide():this.show()},editable:function(e){!0===e?this.editor.open():this.editor.close()}}}},methods:{__initComponent:function(e){this.$amapComponent=new AMap.Circle(e),this.$amapComponent.editor=new AMap.CircleEditor(this.$amap,this.$amapComponent)},$$getCenter:function(){return Object(i.b)(this.$amapComponent.getCenter())}}}},function(e,t,n){"use strict";var r=n(0);t.a={name:"el-amap-ground-image",mixins:[r.a],props:["vid","clickable","opacity","url","bounds","visible","events","onceEvents"],destroyed:function(){this.$amapComponent.setMap(null)},data:function(){return{converters:{},handlers:{visible:function(e){!1===e?this.setMap(null):this.setMap(this.$amap)}}}},methods:{__initComponent:function(e){this.$amapComponent=new AMap.ImageLayer(e)}}}},function(e,t,n){"use strict";var r=n(6),i=n(0),o=n(52),s=n(19),a=n.n(s);t.a={name:"el-amap-info-window",mixins:[i.a],props:["vid","isCustom","autoMove","closeWhenClickMap","content","size","offset","position","showShadow","visible","events","template","vnode","contentRender"],data:function(){var e=this;return{withSlots:!1,tmpVM:null,propsRedirect:{template:"content",vnode:"content",contentRender:"content"},converters:{template:function(t){var n=Object(o.a)(t,e);return this.$customContent=n,n.$el},vnode:function(t){var n="function"==typeof t?t(e):t,r=Object(o.c)(n);return this.$customContent=r,r.$el},contentRender:function(t){var n=Object(o.b)(t,e);return this.$customContent=n,n.$el}},handlers:{visible:function(t){var n=this.getPosition();n&&(!1===t?this.close():this.open(e.$amap,[n.lng,n.lat]))},template:function(e){this.setContent(e)}}}},created:function(){this.tmpVM=new a.a({data:function(){return{node:""}},render:function(e){var t=this.node;return e("div",{ref:"node"},Array.isArray(t)?t:[t])}}).$mount()},destroyed:function(){this.$amapComponent.close(),this.tmpVM.$destroy(),this.$customContent&&this.$customContent.$destroy&&this.$customContent.$destroy()},methods:{__initComponent:function(e){this.$slots.default&&this.$slots.default.length&&(e.content=this.tmpVM.$refs.node),delete e.map,this.$amapComponent=new AMap.InfoWindow(e),!1!==this.visible&&this.$amapComponent.open(this.$amap,Object(r.d)(this.position))}},render:function(e){var t=this.$slots.default||[];return t.length&&(this.tmpVM.node=t),null}}},function(e,t,n){"use strict";var r=n(0),i=n(26),o=n(6);t.a={name:"el-amap-polyline",mixins:[r.a,i.a],props:["vid","zIndex","visible","editable","bubble","geodesic","isOutline","outlineColor","path","strokeColor","strokeOpacity","strokeWeight","strokeStyle","strokeDasharray","events","extData","onceEvents","lineJoin"],data:function(){return{converters:{},handlers:{visible:function(e){!1===e?this.hide():this.show()},editable:function(e){!0===e?this.editor.open():this.editor.close()}}}},methods:{__initComponent:function(e){this.$amapComponent=new AMap.Polyline(e),this.$amapComponent.editor=new AMap.PolyEditor(this.$amap,this.$amapComponent)},$$getPath:function(){return this.$amapComponent.getPath().map(o.b)},$$getBounds:function(){return this.$amapComponent.getBounds()},$$getExtData:function(){return this.$amapComponent.getExtData()}}}},function(e,t,n){"use strict";var r=n(0),i=n(26),o=n(6);t.a={name:"el-amap-polygon",mixins:[r.a,i.a],props:["vid","zIndex","path","bubble","strokeColor","strokeOpacity","strokeWeight","fillColor","editable","fillOpacity","extData","strokeStyle","visible","strokeDasharray","events","onceEvents","draggable"],data:function(){return{converters:{},handlers:{visible:function(e){!1===e?this.hide():this.show()},zIndex:function(e){this.setOptions({zIndex:e})},editable:function(e){!0===e?this.editor.open():this.editor.close()}}}},methods:{__initComponent:function(){var e=this.convertProps();this.$amapComponent=new AMap.Polygon(e),this.$amapComponent.editor=new AMap.PolyEditor(this.$amap,this.$amapComponent)},$$getPath:function(){return this.$amapComponent.getPath().map(o.b)},$$getExtData:function(){return this.$amapComponent.getExtData()},$$contains:function(e){return Array.isArray(e)&&(e=new AMap.LngLat(e[0],e[1])),this.$amapComponent.getBounds().contains(e)}}}},function(e,t,n){"use strict";var r=n(0),i="el-amap-text";t.a={name:i,mixins:[r.a],props:{vid:{type:String,default:""},text:{type:String,default:""},textAlign:{type:String,default:""},verticalAlign:{type:String,default:""},position:{type:Array,default:function(){return[0,0]},$type:"LngLat"},offset:{type:Array,default:function(){return[0,0]},$type:"Pixel"},topWhenClick:{type:Boolean,default:function(){return!1}},bubble:{type:Boolean,default:function(){return!1}},draggable:{type:Boolean,default:function(){return!1}},raiseOnDrag:{type:Boolean,default:function(){return!1}},cursor:{type:String,default:function(){return""}},visible:{type:Boolean,default:function(){return!0}},zIndex:{type:Number,default:function(){return 100}},angle:{type:Number,default:function(){return 0}},autoRotation:{type:Boolean,default:function(){return!1}},animation:{type:String,default:function(){return"“AMAP_ANIMATION_NONE”"}},shadow:{type:Object,default:function(){return{}},$type:"Icon"},title:{type:String,default:function(){return""}},clickable:{type:Boolean,default:!0},events:{type:Object,default:function(){return{}}}},data:function(){return{converters:{},handlers:{zIndex:function(e){this.setzIndex(e)},visible:function(e){!1===e?this.hide():this.show()}},amapTagName:i}},methods:{__initComponent:function(e){this.$amapComponent=new AMap.Text(e)}}}},function(e,t,n){"use strict";var r=n(0),i="el-amap-bezier-curve";t.a={name:i,mixins:[r.a],props:{vid:{type:String},path:{type:Array},strokeColor:{type:String},strokeOpacity:{type:Number},strokeWeight:{type:Number,default:function(){return 1}},strokeStyle:{type:String},strokeDasharray:{type:Array},zIndex:{type:Number},showDir:{type:Boolean},bubble:{type:Boolean},cursor:{type:String},outlineColor:{type:Boolean},isOutline:{type:Boolean},visible:{type:Boolean,default:!0},events:{type:Object,default:function(){return{}}}},data:function(){return{converters:{},handlers:{zIndex:function(e){this.setzIndex(e)},visible:function(e){!1===e?this.hide():this.show()}},amapTagName:i}},methods:{__initComponent:function(e){this.$amapComponent=new AMap.BezierCurve(e)}}}},function(e,t,n){"use strict";var r=n(0),i="el-amap-circle-marker";t.a={name:i,mixins:[r.a],props:{vid:{type:String},zIndex:{type:Number},visible:{type:Boolean,default:!0},center:{type:Array,$type:"LngLat"},bubble:{type:Boolean},radius:{type:Number},strokeColor:{type:String},strokeOpacity:{type:Number},strokeWeight:{type:Number},fillColor:{type:String},fillOpacity:{type:Number},extData:{type:Object},events:{type:Object,default:function(){return{}}}},data:function(){return{converters:{},handlers:{zIndex:function(e){this.setzIndex(e)},visible:function(e){!1===e?this.hide():this.show()}},amapTagName:i}},methods:{__initComponent:function(e){this.$amapComponent=new AMap.CircleMarker(e)}}}},function(e,t,n){"use strict";var r=n(0),i="el-amap-ellipse";t.a={name:i,mixins:[r.a],props:{vid:{type:String},zIndex:{type:Number},center:{type:Array,$type:"LngLat"},radius:{type:Array,default:function(){return[1e3,1e3]}},bubble:{type:Boolean},cursor:{type:String},strokeColor:{type:String},strokeOpacity:{type:Number},strokeWeight:{type:Number},fillColor:{type:String},fillOpacity:{type:Number},strokeStyle:{type:String},extData:{type:Object,default:function(){return{}}},visible:{type:Boolean,default:!0},events:{type:Object,default:function(){return{}}}},data:function(){return{converters:{},handlers:{zIndex:function(e){this.setzIndex(e)},visible:function(e){!1===e?this.hide():this.show()}},amapTagName:i}},methods:{__initComponent:function(e){this.$amapComponent=new AMap.Ellipse(e)}}}},function(e,t,n){"use strict";var r=n(0),i="el-amap-rectangle";t.a={name:i,mixins:[r.a],props:{vid:{type:String},zIndex:{type:Number},center:{type:Array,$type:"LngLat"},bounds:{type:Array,$type:"Bounds"},bubble:{type:Boolean},cursor:{type:String},strokeColor:{type:String},strokeOpacity:{type:Number},strokeWeight:{type:Number},fillColor:{type:String},fillOpacity:{type:Number},strokeStyle:{type:String},extData:{type:Object,default:function(){return{}}},visible:{type:Boolean,default:!0},events:{type:Object,default:function(){return{}}}},data:function(){return{converters:{},handlers:{zIndex:function(e){this.setzIndex(e)},visible:function(e){!1===e?this.hide():this.show()}},amapTagName:i}},methods:{__initComponent:function(e){this.$amapComponent=new AMap.Rectangle(e)}}}},function(e,t,n){e.exports=n(27)},function(e,t,n){"use strict";var r=n(66);n.n(r)},function(e,t,n){n(67),n(68),n(81),n(84),e.exports=n(16).Map},function(e,t,n){"use strict";var r=n(28),i={};i[n(2)("toStringTag")]="z",i+""!="[object z]"&&n(7)(Object.prototype,"toString",(function(){return"[object "+r(this)+"]"}),!0)},function(e,t,n){"use strict";var r=n(69)(!0);n(23)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})}))},function(e,t,n){var r=n(21),i=n(22);e.exports=function(e){return function(t,n){var o,s,a=String(i(t)),c=r(n),u=a.length;return c<0||c>=u?e?"":void 0:(o=a.charCodeAt(c),o<55296||o>56319||c+1===u||(s=a.charCodeAt(c+1))<56320||s>57343?e?a.charAt(c):o:e?a.slice(c,c+2):s-56320+(o-55296<<10)+65536)}}},function(e,t){e.exports=!1},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){"use strict";var r=n(35),i=n(20),o=n(25),s={};n(8)(s,n(2)("iterator"),(function(){return this})),e.exports=function(e,t,n){e.prototype=r(s,{next:i(1,n)}),o(e,t+" Iterator")}},function(e,t,n){var r=n(9),i=n(10),o=n(36);e.exports=n(5)?Object.defineProperties:function(e,t){i(e);for(var n,s=o(t),a=s.length,c=0;a>c;)r.f(e,n=s[c++],t[n]);return e}},function(e,t,n){var r=n(11),i=n(18),o=n(76)(!1),s=n(24)("IE_PROTO");e.exports=function(e,t){var n,a=i(e),c=0,u=[];for(n in a)n!=s&&r(a,n)&&u.push(n);for(;t.length>c;)r(a,n=t[c++])&&(~o(u,n)||u.push(n));return u}},function(e,t,n){var r=n(29);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t,n){var r=n(18),i=n(37),o=n(77);e.exports=function(e){return function(t,n,s){var a,c=r(t),u=i(c.length),f=o(s,u);if(e&&n!=n){for(;u>f;)if((a=c[f++])!=a)return!0}else for(;u>f;f++)if((e||f in c)&&c[f]===n)return e||f||0;return!e&&-1}}},function(e,t,n){var r=n(21),i=Math.max,o=Math.min;e.exports=function(e,t){return e=r(e),e<0?i(e+t,0):o(e,t)}},function(e,t,n){var r=n(3).document;e.exports=r&&r.documentElement},function(e,t,n){var r=n(11),i=n(80),o=n(24)("IE_PROTO"),s=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?s:null}},function(e,t,n){var r=n(22);e.exports=function(e){return Object(r(e))}},function(e,t,n){for(var r=n(82),i=n(36),o=n(7),s=n(3),a=n(8),c=n(12),u=n(2),f=u("iterator"),d=u("toStringTag"),l=c.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},h=i(p),m=0;m<h.length;m++){var v,g=h[m],y=p[g],b=s[g],_=b&&b.prototype;if(_&&(_[f]||a(_,f,l),_[d]||a(_,d,g),c[g]=l,y))for(v in r)_[v]||o(_,v,r[v],!0)}},function(e,t,n){"use strict";var r=n(83),i=n(39),o=n(12),s=n(18);e.exports=n(23)(Array,"Array",(function(e,t){this._t=s(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(e,t,n){var r=n(2)("unscopables"),i=Array.prototype;void 0==i[r]&&n(8)(i,r,{}),e.exports=function(e){i[r][e]=!0}},function(e,t,n){"use strict";var r=n(85),i=n(44);e.exports=n(90)("Map",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(e){var t=r.getEntry(i(this,"Map"),e);return t&&t.v},set:function(e,t){return r.def(i(this,"Map"),0===e?0:e,t)}},r,!0)},function(e,t,n){"use strict";var r=n(9).f,i=n(35),o=n(40),s=n(17),a=n(41),c=n(42),u=n(23),f=n(39),d=n(89),l=n(5),p=n(43).fastKey,h=n(44),m=l?"_s":"size",v=function(e,t){var n,r=p(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,u){var f=e((function(e,r){a(e,f,t,"_i"),e._t=t,e._i=i(null),e._f=void 0,e._l=void 0,e[m]=0,void 0!=r&&c(r,n,e[u],e)}));return o(f.prototype,{clear:function(){for(var e=h(this,t),n=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];e._f=e._l=void 0,e[m]=0},delete:function(e){var n=h(this,t),r=v(n,e);if(r){var i=r.n,o=r.p;delete n._i[r.i],r.r=!0,o&&(o.n=i),i&&(i.p=o),n._f==r&&(n._f=i),n._l==r&&(n._l=o),n[m]--}return!!r},forEach:function(e){h(this,t);for(var n,r=s(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!v(h(this,t),e)}}),l&&r(f.prototype,"size",{get:function(){return h(this,t)[m]}}),f},def:function(e,t,n){var r,i,o=v(e,t);return o?o.v=n:(e._l=o={i:i=p(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=o),r&&(r.n=o),e[m]++,"F"!==i&&(e._i[i]=o)),e},getEntry:v,setStrong:function(e,t,n){u(e,t,(function(e,n){this._t=h(e,t),this._k=n,this._l=void 0}),(function(){for(var e=this,t=e._k,n=e._l;n&&n.r;)n=n.p;return e._t&&(e._l=n=n?n.n:e._t._f)?f(0,"keys"==t?n.k:"values"==t?n.v:[n.k,n.v]):(e._t=void 0,f(1))}),n?"entries":"values",!n,!0),d(t)}}},function(e,t,n){var r=n(10);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&r(o.call(e)),t}}},function(e,t,n){var r=n(12),i=n(2)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[i]===e)}},function(e,t,n){var r=n(28),i=n(2)("iterator"),o=n(12);e.exports=n(16).getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||o[r(e)]}},function(e,t,n){"use strict";var r=n(3),i=n(9),o=n(5),s=n(2)("species");e.exports=function(e){var t=r[e];o&&t&&!t[s]&&i.f(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,n){"use strict";var r=n(3),i=n(34),o=n(7),s=n(40),a=n(43),c=n(42),u=n(41),f=n(4),d=n(15),l=n(91),p=n(25),h=n(92);e.exports=function(e,t,n,m,v,g){var y=r[e],b=y,_=v?"set":"add",w=b&&b.prototype,S={},x=function(e){var t=w[e];o(w,e,"delete"==e||"has"==e?function(e){return!(g&&!f(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return g&&!f(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,n){return t.call(this,0===e?0:e,n),this})};if("function"==typeof b&&(g||w.forEach&&!d((function(){(new b).entries().next()})))){var C=new b,E=C[_](g?{}:-0,1)!=C,I=d((function(){C.has(1)})),T=l((function(e){new b(e)})),O=!g&&d((function(){for(var e=new b,t=5;t--;)e[_](t,t);return!e.has(-0)}));T||(b=t((function(t,n){u(t,b,e);var r=h(new y,t,b);return void 0!=n&&c(n,v,r[_],r),r})),b.prototype=w,w.constructor=b),(I||O)&&(x("delete"),x("has"),v&&x("get")),(O||E)&&x(_),g&&w.clear&&delete w.clear}else b=m.getConstructor(t,e,v,_),s(b.prototype,n),a.NEED=!0;return p(b,e),S[e]=b,i(i.G+i.W+i.F*(b!=y),S),g||m.setStrong(b,e,v),b}},function(e,t,n){var r=n(2)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o=[7],s=o[r]();s.next=function(){return{done:n=!0}},o[r]=function(){return s},e(o)}catch(e){}return n}},function(e,t,n){var r=n(4),i=n(93).set;e.exports=function(e,t,n){var o,s=t.constructor;return s!==n&&"function"==typeof s&&(o=s.prototype)!==n.prototype&&r(o)&&i&&i(e,o),e}},function(e,t,n){var r=n(4),i=n(10),o=function(e,t){if(i(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{r=n(17)(Function.call,n(94).f(Object.prototype,"__proto__").set,2),r(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return o(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:o}},function(e,t,n){var r=n(95),i=n(20),o=n(18),s=n(33),a=n(11),c=n(31),u=Object.getOwnPropertyDescriptor;t.f=n(5)?u:function(e,t){if(e=o(e),t=s(t,!0),c)try{return u(e,t)}catch(e){}if(a(e,t))return i(!r.f.call(e,t),e[t])}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){"use strict";e.exports=function(){var e=[].map.call(arguments,(function(e){return e.trim()})).filter((function(e){return e.length})).join("-");return e.length?1!==e.length&&/[_.\- ]+/.test(e)?e.replace(/^[_.\- ]+/,"").toLowerCase().replace(/[_.\- ]+(\w|$)/g,(function(e,t){return t.toUpperCase()})):e[0]===e[0].toLowerCase()&&e.slice(1)!==e.slice(1).toLowerCase()?e:e.toLowerCase():""}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(98),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s={key:null,v:"1.4.4",protocol:"https",hostAndPath:"webapi.amap.com/maps",plugin:[],callback:"amapInitComponent"},a=function(){function e(t){r(this,e),this._config=o({},s,t),this._document=document,this._window=window,this._scriptLoaded=!1,this._queueEvents=[i.a]}return e.prototype.load=function(){var e=this;if(this._window.AMap&&this._window.AMap.Map)return this.loadUIAMap();if(this._scriptLoadingPromise)return this._scriptLoadingPromise;var t=this._document.createElement("script");t.type="text/javascript",t.async=!0,t.defer=!0,t.src=this._getScriptSrc();var n=this._config.uiVersion?this.loadUIAMap():null;return this._scriptLoadingPromise=new Promise((function(r,i){e._window.amapInitComponent=function(){for(;e._queueEvents.length;)e._queueEvents.pop().apply();if(!n)return r();n.then((function(){window.initAMapUI(),setTimeout(r)}))},t.onerror=function(e){return i(e)}})),this._document.head.appendChild(t),this._scriptLoadingPromise},e.prototype.loadUIAMap=function(){var e=this;return!this._config.uiVersion||window.AMapUI?Promise.resolve():new Promise((function(t,n){var r=document.createElement("script"),i=e._config.uiVersion.split("."),o=i[0],s=i[1],a=i[2];if(void 0!==o&&void 0!==s){var c=e._config.protocol+"://webapi.amap.com/ui/"+o+"."+s+"/main-async.js";a&&(c+="?v="+o+"."+s+"."+a),r.src=c,r.type="text/javascript",r.async=!0,e._document.head.appendChild(r),r.onload=function(){setTimeout(t,0)},r.onerror=function(){return n()}}else console.error("amap ui version is not correct, please check! version: ",e._config.uiVersion)}))},e.prototype._getScriptSrc=function(){var e=/^AMap./,t=this._config,n=["v","key","plugin","callback"];if(t.plugin&&t.plugin.length>0){t.plugin.push("Autocomplete","PlaceSearch","PolyEditor","CircleEditor");var r=[];t.plugin.forEach((function(t){var n=e.test(t)?t:"AMap."+t,i=n.replace(e,"");r.push(n,i)})),t.plugin=r}var i=Object.keys(t).filter((function(e){return~n.indexOf(e)})).filter((function(e){return null!=t[e]})).filter((function(e){return!Array.isArray(t[e])||Array.isArray(t[e])&&t[e].length>0})).map((function(e){var n=t[e];return Array.isArray(n)?{key:e,value:n.join(",")}:{key:e,value:n}})).map((function(e){return e.key+"="+e.value})).join("&");return this._config.protocol+"://"+this._config.hostAndPath+"?"+i},e}();t.a=a},function(e,t,n){"use strict";function r(){if(AMap.UA.ios&&"https:"!==document.location.protocol){var e=new i.a;navigator.geolocation.getCurrentPosition=function(){return e.getCurrentPosition.apply(e,arguments)},navigator.geolocation.watchPosition=function(){return e.watchPosition.apply(e,arguments)}}}t.a=r;var i=n(99)},function(e,t,n){"use strict";function r(){this._remoteSvrUrl="https://webapi.amap.com/html/geolocate.html",this._callbackList=[],this._seqBase=1,this._frameReady=0,this._watchIdMap={}}r.prototype={_getSeq:function(){return this._seqBase++},_onRrameReady:function(e){if(0===this._frameReady)return this._frameReadyList||(this._frameReadyList=[]),this._frameReadyList.push(e),void this._prepareIframe();e.call(this)},_prepareIframe:function(){if(!this._iframeWin){var e=document.createElement("iframe");e.src=this._remoteSvrUrl+(this._remoteSvrUrl.indexOf("?")>0?"&":"?"),e.width="0px",e.height="0px",e.style.position="absolute",e.style.display="none",e.allow="geolocation";var t=this,n=setTimeout((function(){t._frameReady=!1,t._callbackFrameReadyList()}),5e3);e.onload=function(){clearTimeout(n),t._frameReady=!0,t._callbackFrameReadyList(),e.onload=null},document.body.appendChild(e),this._iframeWin=e.contentWindow,window.addEventListener("message",(function(e){0===t._remoteSvrUrl.indexOf(e.origin)&&t._handleRemoteMsg(e.data)}),!1)}},_callbackFrameReadyList:function(){if(this._frameReadyList){var e=this._frameReadyList;this._frameReadyList=null;for(var t=0,n=e.length;t<n;t++)e[t].call(this,this._frameReady)}},_pickCallback:function(e,t){for(var n=this._callbackList,r=0,i=n.length;r<i;r++){var o=n[r];if(e===o.seq)return t||n.splice(r,1),o}},_handleRemoteMsg:function(e){var t=e.seq,n=this._pickCallback(t,!!e.notify);n?n.cbk.call(null,e.error,e.result):console.warn("Receive remote msg: ",e)},_postMessage:function(e,t,n,r){this._prepareIframe();var i={cmd:e,args:t,seq:r||this._getSeq()};this._callbackList.push({cbk:n,seq:i.seq}),this._onRrameReady((function(){if(!0===this._frameReady)try{this._iframeWin.postMessage(i,"*")}catch(e){this._pickCallback(i.seq),n(e)}else this._pickCallback(i.seq),n({message:"iFrame load failed!"})}))},getCurrentPosition:function(e,t,n){this._postMessage("getCurrentPosition",[n],(function(n,r){n?t&&t(n):e&&e(r)}))},watchPosition:function(e,t,n){var r="wk"+this._getSeq(),i=this._getSeq();this._watchIdMap[r]={stat:0,seq:i};var o=this;return this._postMessage("watchPosition",[n],(function(n,i){var s=null;i&&(s=i.id);var a=o._watchIdMap[r];if(a.id=s,a.stat=1,a.callbackList){var c=a.callbackList;a.callbackList=null;for(var u=0,f=c.length;u<f;u++)c[u].call(o,s)}n?t&&t(n):e&&e(i.pos)}),i),r},clearWatch:function(e,t){function n(n){i._postMessage("clearWatch",[n],(function(n,o){n||(i._pickCallback(r.seq),delete i._watchIdMap[e]),t&&t(n,o)}))}if(this._watchIdMap[e]){var r=this._watchIdMap[e],i=this;r.stat<1?(r.callbackList||(r.callbackList=[]),r.callbackList.push((function(e){n(e)}))):n(r.id)}else t("Id not exists: "+e)}},t.a=r},function(e,t,n){"use strict";function r(e){n(101)}var i=n(48),o=n(105),s=n(1),a=r,c=Object(s.a)(i.a,o.a,o.b,!1,a,null,null);t.a=c.exports},function(e,t,n){var r=n(102);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals),n(47)("d6014b94",r,!0)},function(e,t,n){t=e.exports=n(46)(!1),t.push([e.i,".el-vue-amap-container,.el-vue-amap-container .el-vue-amap{height:100%}",""])},function(e,t){e.exports=function(e,t){for(var n=[],r={},i=0;i<t.length;i++){var o=t[i],s=o[0],a=o[1],c=o[2],u=o[3],f={id:e+":"+i,css:a,media:c,sourceMap:u};r[s]?r[s].parts.push(f):n.push(r[s]={id:s,parts:[f]})}return n}},function(e,t,n){"use strict";function r(){for(var e=[],t="0123456789abcdef",n=0;n<36;n++)e[n]=t.substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-",e.join("")}t.a=r},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-vue-amap-container"},[n("div",{staticClass:"el-vue-amap"}),e._v(" "),e._t("default")],2)},i=[]},function(e,t,n){"use strict";var r=n(51),i=n(1),o=Object(i.a)(r.a,void 0,void 0,!1,null,null,null);t.a=o.exports},function(e,t,n){"use strict";function r(e){n(108)}var i=n(53),o=n(110),s=n(1),a=r,c=Object(s.a)(i.a,o.a,o.b,!1,a,null,null);t.a=c.exports},function(e,t,n){var r=n(109);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals),n(47)("80e271aa",r,!0)},function(e,t,n){t=e.exports=n(46)(!1),t.push([e.i,".el-vue-search-box-container{position:relative;width:360px;height:45px;background:#fff;box-shadow:0 2px 2px rgba(0,0,0,.15);border-radius:2px 3px 3px 2px;z-index:10}.el-vue-search-box-container .search-box-wrapper{position:absolute;display:flex;align-items:center;left:0;top:0;width:100%;height:100%;box-sizing:border-box}.el-vue-search-box-container .search-box-wrapper input{flex:1;height:20px;line-height:20px;letter-spacing:.5px;font-size:14px;text-indent:10px;box-sizing:border-box;border:none;outline:none}.el-vue-search-box-container .search-box-wrapper .search-btn{width:45px;height:100%;display:flex;align-items:center;justify-content:center;background:transparent;cursor:pointer}.el-vue-search-box-container .search-tips{position:absolute;top:100%;border:1px solid #dbdbdb;background:#fff;overflow:auto}.el-vue-search-box-container .search-tips ul{padding:0;margin:0}.el-vue-search-box-container .search-tips ul li{height:40px;line-height:40px;box-shadow:0 1px 1px rgba(0,0,0,.1);padding:0 10px;cursor:pointer}.el-vue-search-box-container .search-tips ul li.autocomplete-selected{background:#eee}",""])},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-vue-search-box-container",on:{keydown:[function(t){if(!("button"in t)&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"]))return null;e.selectTip("up")},function(t){if(!("button"in t)&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"]))return null;e.selectTip("down")}]}},[n("div",{staticClass:"search-box-wrapper"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.keyword,expression:"keyword"}],attrs:{type:"text"},domProps:{value:e.keyword},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.search(t):null},input:[function(t){t.target.composing||(e.keyword=t.target.value)},e.autoComplete]}}),e._v(" "),n("span",{staticClass:"search-btn",on:{click:e.search}},[e._v("搜索")])]),e._v(" "),n("div",{staticClass:"search-tips"},[n("ul",e._l(e.tips,(function(t,r){return n("li",{key:r,class:{"autocomplete-selected":r===e.selectedTip},on:{click:function(n){e.changeTip(t)},mouseover:function(t){e.selectedTip=r}}},[e._v(e._s(t.name))])})))])])},i=[]},function(e,t,n){"use strict";var r=n(54),i=n(112),o=n(1),s=Object(o.a)(r.a,i.a,i.b,!1,null,null,null);t.a=s.exports},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var r=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div")},i=[]},function(e,t,n){"use strict";var r=n(55),i=n(114),o=n(1),s=Object(o.a)(r.a,i.a,i.b,!1,null,null,null);t.a=s.exports},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var r=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div")},i=[]},function(e,t,n){"use strict";var r=n(56),i=n(1),o=Object(i.a)(r.a,void 0,void 0,!1,null,null,null);t.a=o.exports},function(e,t,n){"use strict";var r=n(57),i=n(117),o=n(1),s=Object(o.a)(r.a,i.a,i.b,!1,null,null,null);t.a=s.exports},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var r=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div")},i=[]},function(e,t,n){"use strict";var r=n(58),i=n(119),o=n(1),s=Object(o.a)(r.a,i.a,i.b,!1,null,null,null);t.a=s.exports},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var r=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div")},i=[]},function(e,t,n){"use strict";var r=n(59),i=n(121),o=n(1),s=Object(o.a)(r.a,i.a,i.b,!1,null,null,null);t.a=s.exports},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var r=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div")},i=[]},function(e,t,n){"use strict";var r=n(60),i=n(123),o=n(1),s=Object(o.a)(r.a,i.a,i.b,!1,null,null,null);t.a=s.exports},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var r=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div")},i=[]},function(e,t,n){"use strict";var r=n(61),i=n(125),o=n(1),s=Object(o.a)(r.a,i.a,i.b,!1,null,null,null);t.a=s.exports},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var r=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div")},i=[]},function(e,t,n){"use strict";var r=n(62),i=n(127),o=n(1),s=Object(o.a)(r.a,i.a,i.b,!1,null,null,null);t.a=s.exports},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var r=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div")},i=[]},function(e,t,n){"use strict";var r=n(63),i=n(129),o=n(1),s=Object(o.a)(r.a,i.a,i.b,!1,null,null,null);t.a=s.exports},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var r=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div")},i=[]},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(){r(this,e),this._componentMap=new Map,this._map=null}return e.prototype.setMap=function(e){this._map=e},e.prototype.getMap=function(){return this._map},e.prototype.setComponent=function(e,t){this._componentMap.set(e,t)},e.prototype.getComponent=function(e){return this._componentMap.get(e)},e.prototype.getChildInstance=function(e){return this.getComponent(e)},e.prototype.removeComponent=function(e){this._componentMap.delete(e)},e}();t.a=i},function(e,t,n){"use strict";var r=n(0),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.a=function(e){var t=e.init,n=e.data,o=void 0===n?function(){return{}}:n,s=e.converters,a=void 0===s?{}:s,c=e.handlers,u=void 0===c?{}:c,f=e.computed,d=e.methods,l=e.name,p=e.render,h=e.contextReady,m=e.template,v=e.mixins,g=void 0===v?[]:v,y=e.props,b=void 0===y?{}:y,_=i({},e,{props:b,data:function(){return i({},o(),{converters:a,handlers:u})},mixins:[r.a].concat(g),computed:f,methods:i({},d,{__initComponent:t,__contextReady:h})});return m||p||(_.render=function(){return null}),_.install=function(e){return e.use(l,_)},_}}])}))},"90e3":function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++n+r).toString(36)}},9112:function(e,t,n){var r=n("83ab"),i=n("9bf2"),o=n("5c6c");e.exports=r?function(e,t,n){return i.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},9141:function(e,t,n){var r=n("ef08").document;e.exports=r&&r.documentElement},"91dd":function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,o){t=t||"&",n=n||"=";var s={};if("string"!==typeof e||0===e.length)return s;var a=/\+/g;e=e.split(t);var c=1e3;o&&"number"===typeof o.maxKeys&&(c=o.maxKeys);var u=e.length;c>0&&u>c&&(u=c);for(var f=0;f<u;++f){var d,l,p,h,m=e[f].replace(a,"%20"),v=m.indexOf(n);v>=0?(d=m.substr(0,v),l=m.substr(v+1)):(d=m,l=""),p=decodeURIComponent(d),h=decodeURIComponent(l),r(s,p)?i(s[p])?s[p].push(h):s[p]=[s[p],h]:s[p]=h}return s};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},9263:function(e,t,n){"use strict";var r=n("ad6d"),i=n("9f7f"),o=RegExp.prototype.exec,s=String.prototype.replace,a=o,c=function(){var e=/a/,t=/b*/g;return o.call(e,"a"),o.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),u=i.UNSUPPORTED_Y||i.BROKEN_CARET,f=void 0!==/()??/.exec("")[1],d=c||f||u;d&&(a=function(e){var t,n,i,a,d=this,l=u&&d.sticky,p=r.call(d),h=d.source,m=0,v=e;return l&&(p=p.replace("y",""),-1===p.indexOf("g")&&(p+="g"),v=String(e).slice(d.lastIndex),d.lastIndex>0&&(!d.multiline||d.multiline&&"\n"!==e[d.lastIndex-1])&&(h="(?: "+h+")",v=" "+v,m++),n=new RegExp("^(?:"+h+")",p)),f&&(n=new RegExp("^"+h+"$(?!\\s)",p)),c&&(t=d.lastIndex),i=o.call(l?n:d,v),l?i?(i.input=i.input.slice(m),i[0]=i[0].slice(m),i.index=d.lastIndex,d.lastIndex+=i[0].length):d.lastIndex=0:c&&i&&(d.lastIndex=d.global?i.index+i[0].length:t),f&&i&&i.length>1&&s.call(i[0],n,(function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(i[a]=void 0)})),i}),e.exports=a},"92f0":function(e,t,n){var r=n("1a14").f,i=n("9c0e"),o=n("cc15")("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},"92fa":function(e,t){var n=/^(attrs|props|on|nativeOn|class|style|hook)$/;function r(e,t){return function(){e&&e.apply(this,arguments),t&&t.apply(this,arguments)}}e.exports=function(e){return e.reduce((function(e,t){var i,o,s,a,c;for(s in t)if(i=e[s],o=t[s],i&&n.test(s))if("class"===s&&("string"===typeof i&&(c=i,e[s]=i={},i[c]=!0),"string"===typeof o&&(c=o,t[s]=o={},o[c]=!0)),"on"===s||"nativeOn"===s||"hook"===s)for(a in o)i[a]=r(i[a],o[a]);else if(Array.isArray(i))e[s]=i.concat(o);else if(Array.isArray(o))e[s]=[i].concat(o);else for(a in o)i[a]=o[a];else e[s]=t[s];return e}),{})}},"94ca":function(e,t,n){var r=n("d039"),i=/#|\.prototype\./,o=function(e,t){var n=a[s(e)];return n==u||n!=c&&("function"==typeof t?r(t):!!t)},s=o.normalize=function(e){return String(e).replace(i,".").toLowerCase()},a=o.data={},c=o.NATIVE="N",u=o.POLYFILL="P";e.exports=o},9619:function(e,t,n){var r=n("597f"),i=n("0e15");e.exports={throttle:r,debounce:i}},"96cf":function(e,t){!function(t){"use strict";var n,r=Object.prototype,i=r.hasOwnProperty,o="function"===typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag",u="object"===typeof e,f=t.regeneratorRuntime;if(f)u&&(e.exports=f);else{f=t.regeneratorRuntime=u?e.exports:{},f.wrap=_;var d="suspendedStart",l="suspendedYield",p="executing",h="completed",m={},v={};v[s]=function(){return this};var g=Object.getPrototypeOf,y=g&&g(g(A([])));y&&y!==r&&i.call(y,s)&&(v=y);var b=C.prototype=S.prototype=Object.create(v);x.prototype=b.constructor=C,C.constructor=x,C[c]=x.displayName="GeneratorFunction",f.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===x||"GeneratorFunction"===(t.displayName||t.name))},f.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,C):(e.__proto__=C,c in e||(e[c]="GeneratorFunction")),e.prototype=Object.create(b),e},f.awrap=function(e){return{__await:e}},E(I.prototype),I.prototype[a]=function(){return this},f.AsyncIterator=I,f.async=function(e,t,n,r){var i=new I(_(e,t,n,r));return f.isGeneratorFunction(t)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(b),b[c]="Generator",b[s]=function(){return this},b.toString=function(){return"[object Generator]"},f.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){while(t.length){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},f.values=A,M.prototype={constructor:M,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,i){return a.type="throw",a.arg=e,t.next=r,i&&(t.method="next",t.arg=n),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var c=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:A(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=n),m}}}function _(e,t,n,r){var i=t&&t.prototype instanceof S?t:S,o=Object.create(i.prototype),s=new M(r||[]);return o._invoke=T(e,n,s),o}function w(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(r){return{type:"throw",arg:r}}}function S(){}function x(){}function C(){}function E(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function I(e){function t(n,r,o,s){var a=w(e[n],e,r);if("throw"!==a.type){var c=a.arg,u=c.value;return u&&"object"===typeof u&&i.call(u,"__await")?Promise.resolve(u.__await).then((function(e){t("next",e,o,s)}),(function(e){t("throw",e,o,s)})):Promise.resolve(u).then((function(e){c.value=e,o(c)}),s)}s(a.arg)}var n;function r(e,r){function i(){return new Promise((function(n,i){t(e,r,n,i)}))}return n=n?n.then(i,i):i()}this._invoke=r}function T(e,t,n){var r=d;return function(i,o){if(r===p)throw new Error("Generator is already running");if(r===h){if("throw"===i)throw o;return P()}n.method=i,n.arg=o;while(1){var s=n.delegate;if(s){var a=O(s,n);if(a){if(a===m)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var c=w(e,t,n);if("normal"===c.type){if(r=n.done?h:l,c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=h,n.method="throw",n.arg=c.arg)}}}function O(e,t){var r=e.iterator[t.method];if(r===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=n,O(e,t),"throw"===t.method))return m;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var i=w(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,m;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=n),t.delegate=null,m):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function R(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function M(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(R,this),this.reset(!0)}function A(e){if(e){var t=e[s];if(t)return t.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){while(++r<e.length)if(i.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=n,t.done=!0,t};return o.next=o}}return{next:P}}function P(){return{value:n,done:!0}}}(function(){return this}()||Function("return this")())},9742:function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},9876:function(e,t,n){var r=n("03d6"),i=n("9742");e.exports=Object.keys||function(e){return r(e,i)}},"99af":function(e,t,n){"use strict";var r=n("23e7"),i=n("d039"),o=n("e8b5"),s=n("861d"),a=n("7b0b"),c=n("50c4"),u=n("8418"),f=n("65f0"),d=n("1dde"),l=n("b622"),p=n("2d00"),h=l("isConcatSpreadable"),m=9007199254740991,v="Maximum allowed index exceeded",g=p>=51||!i((function(){var e=[];return e[h]=!1,e.concat()[0]!==e})),y=d("concat"),b=function(e){if(!s(e))return!1;var t=e[h];return void 0!==t?!!t:o(e)},_=!g||!y;r({target:"Array",proto:!0,forced:_},{concat:function(e){var t,n,r,i,o,s=a(this),d=f(s,0),l=0;for(t=-1,r=arguments.length;t<r;t++)if(o=-1===t?s:arguments[t],b(o)){if(i=c(o.length),l+i>m)throw TypeError(v);for(n=0;n<i;n++,l++)n in o&&u(d,l,o[n])}else{if(l>=m)throw TypeError(v);u(d,l++,o)}return d.length=l,d}})},"9a8c":function(e,t,n){"use strict";var r=n("ebb5"),i=n("145e"),o=r.aTypedArray,s=r.exportTypedArrayMethod;s("copyWithin",(function(e,t){return i.call(o(this),e,t,arguments.length>2?arguments[2]:void 0)}))},"9bdd":function(e,t,n){var r=n("825a");e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(s){var o=e["return"];throw void 0!==o&&r(o.call(e)),s}}},"9bf2":function(e,t,n){var r=n("83ab"),i=n("0cfb"),o=n("825a"),s=n("c04e"),a=Object.defineProperty;t.f=r?a:function(e,t,n){if(o(e),t=s(t,!0),o(n),i)try{return a(e,t,n)}catch(r){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},"9c0c":function(e,t,n){var r=n("1609");e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},"9c0e":function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},"9d11":function(e,t,n){var r=n("fc5e"),i=Math.max,o=Math.min;e.exports=function(e,t){return e=r(e),e<0?i(e+t,0):o(e,t)}},"9ed3":function(e,t,n){"use strict";var r=n("ae93").IteratorPrototype,i=n("7c73"),o=n("5c6c"),s=n("d44e"),a=n("3f8c"),c=function(){return this};e.exports=function(e,t,n){var u=t+" Iterator";return e.prototype=i(r,{next:o(1,n)}),s(e,u,!1,!0),a[u]=c,e}},"9f7f":function(e,t,n){"use strict";var r=n("d039");function i(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=r((function(){var e=i("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=r((function(){var e=i("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},"9fbb":function(e,t,n){var r=n("4d88");e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},a026:function(e,t,n){"use strict";n.r(t),function(e){
/*!
 * Vue.js v2.6.10
 * (c) 2014-2019 Evan You
 * Released under the MIT License.
 */
var n=Object.freeze({});function r(e){return void 0===e||null===e}function i(e){return void 0!==e&&null!==e}function o(e){return!0===e}function s(e){return!1===e}function a(e){return"string"===typeof e||"number"===typeof e||"symbol"===typeof e||"boolean"===typeof e}function c(e){return null!==e&&"object"===typeof e}var u=Object.prototype.toString;function f(e){return"[object Object]"===u.call(e)}function d(e){return"[object RegExp]"===u.call(e)}function l(e){var t=parseFloat(String(e));return t>=0&&Math.floor(t)===t&&isFinite(e)}function p(e){return i(e)&&"function"===typeof e.then&&"function"===typeof e.catch}function h(e){return null==e?"":Array.isArray(e)||f(e)&&e.toString===u?JSON.stringify(e,null,2):String(e)}function m(e){var t=parseFloat(e);return isNaN(t)?e:t}function v(e,t){for(var n=Object.create(null),r=e.split(","),i=0;i<r.length;i++)n[r[i]]=!0;return t?function(e){return n[e.toLowerCase()]}:function(e){return n[e]}}var g=v("slot,component",!0),y=v("key,ref,slot,slot-scope,is");function b(e,t){if(e.length){var n=e.indexOf(t);if(n>-1)return e.splice(n,1)}}var _=Object.prototype.hasOwnProperty;function w(e,t){return _.call(e,t)}function S(e){var t=Object.create(null);return function(n){var r=t[n];return r||(t[n]=e(n))}}var x=/-(\w)/g,C=S((function(e){return e.replace(x,(function(e,t){return t?t.toUpperCase():""}))})),E=S((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})),I=/\B([A-Z])/g,T=S((function(e){return e.replace(I,"-$1").toLowerCase()}));function O(e,t){function n(n){var r=arguments.length;return r?r>1?e.apply(t,arguments):e.call(t,n):e.call(t)}return n._length=e.length,n}function R(e,t){return e.bind(t)}var k=Function.prototype.bind?R:O;function M(e,t){t=t||0;var n=e.length-t,r=new Array(n);while(n--)r[n]=e[n+t];return r}function A(e,t){for(var n in t)e[n]=t[n];return e}function P(e){for(var t={},n=0;n<e.length;n++)e[n]&&A(t,e[n]);return t}function j(e,t,n){}var N=function(e,t,n){return!1},L=function(e){return e};function D(e){return e.reduce((function(e,t){return e.concat(t.staticKeys||[])}),[]).join(",")}function B(e,t){if(e===t)return!0;var n=c(e),r=c(t);if(!n||!r)return!n&&!r&&String(e)===String(t);try{var i=Array.isArray(e),o=Array.isArray(t);if(i&&o)return e.length===t.length&&e.every((function(e,n){return B(e,t[n])}));if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if(i||o)return!1;var s=Object.keys(e),a=Object.keys(t);return s.length===a.length&&s.every((function(n){return B(e[n],t[n])}))}catch(u){return!1}}function U(e,t){for(var n=0;n<e.length;n++)if(B(e[n],t))return n;return-1}function F(e){var t=!1;return function(){t||(t=!0,e.apply(this,arguments))}}var V="data-server-rendered",W=["component","directive","filter"],q=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch"],$={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:N,isReservedAttr:N,isUnknownElement:N,getTagNamespace:j,parsePlatformTagName:L,mustUseProp:N,async:!0,_lifecycleHooks:q},G=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function z(e){var t=(e+"").charCodeAt(0);return 36===t||95===t}function H(e,t,n,r){Object.defineProperty(e,t,{value:n,enumerable:!!r,writable:!0,configurable:!0})}var K=new RegExp("[^"+G.source+".$_\\d]");function J(e){if(!K.test(e)){var t=e.split(".");return function(e){for(var n=0;n<t.length;n++){if(!e)return;e=e[t[n]]}return e}}}var Y,X="__proto__"in{},Z="undefined"!==typeof window,Q="undefined"!==typeof WXEnvironment&&!!WXEnvironment.platform,ee=Q&&WXEnvironment.platform.toLowerCase(),te=Z&&window.navigator.userAgent.toLowerCase(),ne=te&&/msie|trident/.test(te),re=te&&te.indexOf("msie 9.0")>0,ie=te&&te.indexOf("edge/")>0,oe=(te&&te.indexOf("android"),te&&/iphone|ipad|ipod|ios/.test(te)||"ios"===ee),se=(te&&/chrome\/\d+/.test(te),te&&/phantomjs/.test(te),te&&te.match(/firefox\/(\d+)/)),ae={}.watch,ce=!1;if(Z)try{var ue={};Object.defineProperty(ue,"passive",{get:function(){ce=!0}}),window.addEventListener("test-passive",null,ue)}catch(Xu){}var fe=function(){return void 0===Y&&(Y=!Z&&!Q&&"undefined"!==typeof e&&(e["process"]&&"server"===e["process"].env.VUE_ENV)),Y},de=Z&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function le(e){return"function"===typeof e&&/native code/.test(e.toString())}var pe,he="undefined"!==typeof Symbol&&le(Symbol)&&"undefined"!==typeof Reflect&&le(Reflect.ownKeys);pe="undefined"!==typeof Set&&le(Set)?Set:function(){function e(){this.set=Object.create(null)}return e.prototype.has=function(e){return!0===this.set[e]},e.prototype.add=function(e){this.set[e]=!0},e.prototype.clear=function(){this.set=Object.create(null)},e}();var me=j,ve=0,ge=function(){this.id=ve++,this.subs=[]};ge.prototype.addSub=function(e){this.subs.push(e)},ge.prototype.removeSub=function(e){b(this.subs,e)},ge.prototype.depend=function(){ge.target&&ge.target.addDep(this)},ge.prototype.notify=function(){var e=this.subs.slice();for(var t=0,n=e.length;t<n;t++)e[t].update()},ge.target=null;var ye=[];function be(e){ye.push(e),ge.target=e}function _e(){ye.pop(),ge.target=ye[ye.length-1]}var we=function(e,t,n,r,i,o,s,a){this.tag=e,this.data=t,this.children=n,this.text=r,this.elm=i,this.ns=void 0,this.context=o,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=t&&t.key,this.componentOptions=s,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=a,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},Se={child:{configurable:!0}};Se.child.get=function(){return this.componentInstance},Object.defineProperties(we.prototype,Se);var xe=function(e){void 0===e&&(e="");var t=new we;return t.text=e,t.isComment=!0,t};function Ce(e){return new we(void 0,void 0,void 0,String(e))}function Ee(e){var t=new we(e.tag,e.data,e.children&&e.children.slice(),e.text,e.elm,e.context,e.componentOptions,e.asyncFactory);return t.ns=e.ns,t.isStatic=e.isStatic,t.key=e.key,t.isComment=e.isComment,t.fnContext=e.fnContext,t.fnOptions=e.fnOptions,t.fnScopeId=e.fnScopeId,t.asyncMeta=e.asyncMeta,t.isCloned=!0,t}var Ie=Array.prototype,Te=Object.create(Ie),Oe=["push","pop","shift","unshift","splice","sort","reverse"];Oe.forEach((function(e){var t=Ie[e];H(Te,e,(function(){var n=[],r=arguments.length;while(r--)n[r]=arguments[r];var i,o=t.apply(this,n),s=this.__ob__;switch(e){case"push":case"unshift":i=n;break;case"splice":i=n.slice(2);break}return i&&s.observeArray(i),s.dep.notify(),o}))}));var Re=Object.getOwnPropertyNames(Te),ke=!0;function Me(e){ke=e}var Ae=function(e){this.value=e,this.dep=new ge,this.vmCount=0,H(e,"__ob__",this),Array.isArray(e)?(X?Pe(e,Te):je(e,Te,Re),this.observeArray(e)):this.walk(e)};function Pe(e,t){e.__proto__=t}function je(e,t,n){for(var r=0,i=n.length;r<i;r++){var o=n[r];H(e,o,t[o])}}function Ne(e,t){var n;if(c(e)&&!(e instanceof we))return w(e,"__ob__")&&e.__ob__ instanceof Ae?n=e.__ob__:ke&&!fe()&&(Array.isArray(e)||f(e))&&Object.isExtensible(e)&&!e._isVue&&(n=new Ae(e)),t&&n&&n.vmCount++,n}function Le(e,t,n,r,i){var o=new ge,s=Object.getOwnPropertyDescriptor(e,t);if(!s||!1!==s.configurable){var a=s&&s.get,c=s&&s.set;a&&!c||2!==arguments.length||(n=e[t]);var u=!i&&Ne(n);Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){var t=a?a.call(e):n;return ge.target&&(o.depend(),u&&(u.dep.depend(),Array.isArray(t)&&Ue(t))),t},set:function(t){var r=a?a.call(e):n;t===r||t!==t&&r!==r||a&&!c||(c?c.call(e,t):n=t,u=!i&&Ne(t),o.notify())}})}}function De(e,t,n){if(Array.isArray(e)&&l(t))return e.length=Math.max(e.length,t),e.splice(t,1,n),n;if(t in e&&!(t in Object.prototype))return e[t]=n,n;var r=e.__ob__;return e._isVue||r&&r.vmCount?n:r?(Le(r.value,t,n),r.dep.notify(),n):(e[t]=n,n)}function Be(e,t){if(Array.isArray(e)&&l(t))e.splice(t,1);else{var n=e.__ob__;e._isVue||n&&n.vmCount||w(e,t)&&(delete e[t],n&&n.dep.notify())}}function Ue(e){for(var t=void 0,n=0,r=e.length;n<r;n++)t=e[n],t&&t.__ob__&&t.__ob__.dep.depend(),Array.isArray(t)&&Ue(t)}Ae.prototype.walk=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)Le(e,t[n])},Ae.prototype.observeArray=function(e){for(var t=0,n=e.length;t<n;t++)Ne(e[t])};var Fe=$.optionMergeStrategies;function Ve(e,t){if(!t)return e;for(var n,r,i,o=he?Reflect.ownKeys(t):Object.keys(t),s=0;s<o.length;s++)n=o[s],"__ob__"!==n&&(r=e[n],i=t[n],w(e,n)?r!==i&&f(r)&&f(i)&&Ve(r,i):De(e,n,i));return e}function We(e,t,n){return n?function(){var r="function"===typeof t?t.call(n,n):t,i="function"===typeof e?e.call(n,n):e;return r?Ve(r,i):i}:t?e?function(){return Ve("function"===typeof t?t.call(this,this):t,"function"===typeof e?e.call(this,this):e)}:t:e}function qe(e,t){var n=t?e?e.concat(t):Array.isArray(t)?t:[t]:e;return n?$e(n):n}function $e(e){for(var t=[],n=0;n<e.length;n++)-1===t.indexOf(e[n])&&t.push(e[n]);return t}function Ge(e,t,n,r){var i=Object.create(e||null);return t?A(i,t):i}Fe.data=function(e,t,n){return n?We(e,t,n):t&&"function"!==typeof t?e:We(e,t)},q.forEach((function(e){Fe[e]=qe})),W.forEach((function(e){Fe[e+"s"]=Ge})),Fe.watch=function(e,t,n,r){if(e===ae&&(e=void 0),t===ae&&(t=void 0),!t)return Object.create(e||null);if(!e)return t;var i={};for(var o in A(i,e),t){var s=i[o],a=t[o];s&&!Array.isArray(s)&&(s=[s]),i[o]=s?s.concat(a):Array.isArray(a)?a:[a]}return i},Fe.props=Fe.methods=Fe.inject=Fe.computed=function(e,t,n,r){if(!e)return t;var i=Object.create(null);return A(i,e),t&&A(i,t),i},Fe.provide=We;var ze=function(e,t){return void 0===t?e:t};function He(e,t){var n=e.props;if(n){var r,i,o,s={};if(Array.isArray(n)){r=n.length;while(r--)i=n[r],"string"===typeof i&&(o=C(i),s[o]={type:null})}else if(f(n))for(var a in n)i=n[a],o=C(a),s[o]=f(i)?i:{type:i};else 0;e.props=s}}function Ke(e,t){var n=e.inject;if(n){var r=e.inject={};if(Array.isArray(n))for(var i=0;i<n.length;i++)r[n[i]]={from:n[i]};else if(f(n))for(var o in n){var s=n[o];r[o]=f(s)?A({from:o},s):{from:s}}else 0}}function Je(e){var t=e.directives;if(t)for(var n in t){var r=t[n];"function"===typeof r&&(t[n]={bind:r,update:r})}}function Ye(e,t,n){if("function"===typeof t&&(t=t.options),He(t,n),Ke(t,n),Je(t),!t._base&&(t.extends&&(e=Ye(e,t.extends,n)),t.mixins))for(var r=0,i=t.mixins.length;r<i;r++)e=Ye(e,t.mixins[r],n);var o,s={};for(o in e)a(o);for(o in t)w(e,o)||a(o);function a(r){var i=Fe[r]||ze;s[r]=i(e[r],t[r],n,r)}return s}function Xe(e,t,n,r){if("string"===typeof n){var i=e[t];if(w(i,n))return i[n];var o=C(n);if(w(i,o))return i[o];var s=E(o);if(w(i,s))return i[s];var a=i[n]||i[o]||i[s];return a}}function Ze(e,t,n,r){var i=t[e],o=!w(n,e),s=n[e],a=nt(Boolean,i.type);if(a>-1)if(o&&!w(i,"default"))s=!1;else if(""===s||s===T(e)){var c=nt(String,i.type);(c<0||a<c)&&(s=!0)}if(void 0===s){s=Qe(r,i,e);var u=ke;Me(!0),Ne(s),Me(u)}return s}function Qe(e,t,n){if(w(t,"default")){var r=t.default;return e&&e.$options.propsData&&void 0===e.$options.propsData[n]&&void 0!==e._props[n]?e._props[n]:"function"===typeof r&&"Function"!==et(t.type)?r.call(e):r}}function et(e){var t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:""}function tt(e,t){return et(e)===et(t)}function nt(e,t){if(!Array.isArray(t))return tt(t,e)?0:-1;for(var n=0,r=t.length;n<r;n++)if(tt(t[n],e))return n;return-1}function rt(e,t,n){be();try{if(t){var r=t;while(r=r.$parent){var i=r.$options.errorCaptured;if(i)for(var o=0;o<i.length;o++)try{var s=!1===i[o].call(r,e,t,n);if(s)return}catch(Xu){ot(Xu,r,"errorCaptured hook")}}}ot(e,t,n)}finally{_e()}}function it(e,t,n,r,i){var o;try{o=n?e.apply(t,n):e.call(t),o&&!o._isVue&&p(o)&&!o._handled&&(o.catch((function(e){return rt(e,r,i+" (Promise/async)")})),o._handled=!0)}catch(Xu){rt(Xu,r,i)}return o}function ot(e,t,n){if($.errorHandler)try{return $.errorHandler.call(null,e,t,n)}catch(Xu){Xu!==e&&st(Xu,null,"config.errorHandler")}st(e,t,n)}function st(e,t,n){if(!Z&&!Q||"undefined"===typeof console)throw e;console.error(e)}var at,ct=!1,ut=[],ft=!1;function dt(){ft=!1;var e=ut.slice(0);ut.length=0;for(var t=0;t<e.length;t++)e[t]()}if("undefined"!==typeof Promise&&le(Promise)){var lt=Promise.resolve();at=function(){lt.then(dt),oe&&setTimeout(j)},ct=!0}else if(ne||"undefined"===typeof MutationObserver||!le(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())at="undefined"!==typeof setImmediate&&le(setImmediate)?function(){setImmediate(dt)}:function(){setTimeout(dt,0)};else{var pt=1,ht=new MutationObserver(dt),mt=document.createTextNode(String(pt));ht.observe(mt,{characterData:!0}),at=function(){pt=(pt+1)%2,mt.data=String(pt)},ct=!0}function vt(e,t){var n;if(ut.push((function(){if(e)try{e.call(t)}catch(Xu){rt(Xu,t,"nextTick")}else n&&n(t)})),ft||(ft=!0,at()),!e&&"undefined"!==typeof Promise)return new Promise((function(e){n=e}))}var gt=new pe;function yt(e){bt(e,gt),gt.clear()}function bt(e,t){var n,r,i=Array.isArray(e);if(!(!i&&!c(e)||Object.isFrozen(e)||e instanceof we)){if(e.__ob__){var o=e.__ob__.dep.id;if(t.has(o))return;t.add(o)}if(i){n=e.length;while(n--)bt(e[n],t)}else{r=Object.keys(e),n=r.length;while(n--)bt(e[r[n]],t)}}}var _t=S((function(e){var t="&"===e.charAt(0);e=t?e.slice(1):e;var n="~"===e.charAt(0);e=n?e.slice(1):e;var r="!"===e.charAt(0);return e=r?e.slice(1):e,{name:e,once:n,capture:r,passive:t}}));function wt(e,t){function n(){var e=arguments,r=n.fns;if(!Array.isArray(r))return it(r,null,arguments,t,"v-on handler");for(var i=r.slice(),o=0;o<i.length;o++)it(i[o],null,e,t,"v-on handler")}return n.fns=e,n}function St(e,t,n,i,s,a){var c,u,f,d;for(c in e)u=e[c],f=t[c],d=_t(c),r(u)||(r(f)?(r(u.fns)&&(u=e[c]=wt(u,a)),o(d.once)&&(u=e[c]=s(d.name,u,d.capture)),n(d.name,u,d.capture,d.passive,d.params)):u!==f&&(f.fns=u,e[c]=f));for(c in t)r(e[c])&&(d=_t(c),i(d.name,t[c],d.capture))}function xt(e,t,n){var s;e instanceof we&&(e=e.data.hook||(e.data.hook={}));var a=e[t];function c(){n.apply(this,arguments),b(s.fns,c)}r(a)?s=wt([c]):i(a.fns)&&o(a.merged)?(s=a,s.fns.push(c)):s=wt([a,c]),s.merged=!0,e[t]=s}function Ct(e,t,n){var o=t.options.props;if(!r(o)){var s={},a=e.attrs,c=e.props;if(i(a)||i(c))for(var u in o){var f=T(u);Et(s,c,u,f,!0)||Et(s,a,u,f,!1)}return s}}function Et(e,t,n,r,o){if(i(t)){if(w(t,n))return e[n]=t[n],o||delete t[n],!0;if(w(t,r))return e[n]=t[r],o||delete t[r],!0}return!1}function It(e){for(var t=0;t<e.length;t++)if(Array.isArray(e[t]))return Array.prototype.concat.apply([],e);return e}function Tt(e){return a(e)?[Ce(e)]:Array.isArray(e)?Rt(e):void 0}function Ot(e){return i(e)&&i(e.text)&&s(e.isComment)}function Rt(e,t){var n,s,c,u,f=[];for(n=0;n<e.length;n++)s=e[n],r(s)||"boolean"===typeof s||(c=f.length-1,u=f[c],Array.isArray(s)?s.length>0&&(s=Rt(s,(t||"")+"_"+n),Ot(s[0])&&Ot(u)&&(f[c]=Ce(u.text+s[0].text),s.shift()),f.push.apply(f,s)):a(s)?Ot(u)?f[c]=Ce(u.text+s):""!==s&&f.push(Ce(s)):Ot(s)&&Ot(u)?f[c]=Ce(u.text+s.text):(o(e._isVList)&&i(s.tag)&&r(s.key)&&i(t)&&(s.key="__vlist"+t+"_"+n+"__"),f.push(s)));return f}function kt(e){var t=e.$options.provide;t&&(e._provided="function"===typeof t?t.call(e):t)}function Mt(e){var t=At(e.$options.inject,e);t&&(Me(!1),Object.keys(t).forEach((function(n){Le(e,n,t[n])})),Me(!0))}function At(e,t){if(e){for(var n=Object.create(null),r=he?Reflect.ownKeys(e):Object.keys(e),i=0;i<r.length;i++){var o=r[i];if("__ob__"!==o){var s=e[o].from,a=t;while(a){if(a._provided&&w(a._provided,s)){n[o]=a._provided[s];break}a=a.$parent}if(!a)if("default"in e[o]){var c=e[o].default;n[o]="function"===typeof c?c.call(t):c}else 0}}return n}}function Pt(e,t){if(!e||!e.length)return{};for(var n={},r=0,i=e.length;r<i;r++){var o=e[r],s=o.data;if(s&&s.attrs&&s.attrs.slot&&delete s.attrs.slot,o.context!==t&&o.fnContext!==t||!s||null==s.slot)(n.default||(n.default=[])).push(o);else{var a=s.slot,c=n[a]||(n[a]=[]);"template"===o.tag?c.push.apply(c,o.children||[]):c.push(o)}}for(var u in n)n[u].every(jt)&&delete n[u];return n}function jt(e){return e.isComment&&!e.asyncFactory||" "===e.text}function Nt(e,t,r){var i,o=Object.keys(t).length>0,s=e?!!e.$stable:!o,a=e&&e.$key;if(e){if(e._normalized)return e._normalized;if(s&&r&&r!==n&&a===r.$key&&!o&&!r.$hasNormal)return r;for(var c in i={},e)e[c]&&"$"!==c[0]&&(i[c]=Lt(t,c,e[c]))}else i={};for(var u in t)u in i||(i[u]=Dt(t,u));return e&&Object.isExtensible(e)&&(e._normalized=i),H(i,"$stable",s),H(i,"$key",a),H(i,"$hasNormal",o),i}function Lt(e,t,n){var r=function(){var e=arguments.length?n.apply(null,arguments):n({});return e=e&&"object"===typeof e&&!Array.isArray(e)?[e]:Tt(e),e&&(0===e.length||1===e.length&&e[0].isComment)?void 0:e};return n.proxy&&Object.defineProperty(e,t,{get:r,enumerable:!0,configurable:!0}),r}function Dt(e,t){return function(){return e[t]}}function Bt(e,t){var n,r,o,s,a;if(Array.isArray(e)||"string"===typeof e)for(n=new Array(e.length),r=0,o=e.length;r<o;r++)n[r]=t(e[r],r);else if("number"===typeof e)for(n=new Array(e),r=0;r<e;r++)n[r]=t(r+1,r);else if(c(e))if(he&&e[Symbol.iterator]){n=[];var u=e[Symbol.iterator](),f=u.next();while(!f.done)n.push(t(f.value,n.length)),f=u.next()}else for(s=Object.keys(e),n=new Array(s.length),r=0,o=s.length;r<o;r++)a=s[r],n[r]=t(e[a],a,r);return i(n)||(n=[]),n._isVList=!0,n}function Ut(e,t,n,r){var i,o=this.$scopedSlots[e];o?(n=n||{},r&&(n=A(A({},r),n)),i=o(n)||t):i=this.$slots[e]||t;var s=n&&n.slot;return s?this.$createElement("template",{slot:s},i):i}function Ft(e){return Xe(this.$options,"filters",e,!0)||L}function Vt(e,t){return Array.isArray(e)?-1===e.indexOf(t):e!==t}function Wt(e,t,n,r,i){var o=$.keyCodes[t]||n;return i&&r&&!$.keyCodes[t]?Vt(i,r):o?Vt(o,e):r?T(r)!==t:void 0}function qt(e,t,n,r,i){if(n)if(c(n)){var o;Array.isArray(n)&&(n=P(n));var s=function(s){if("class"===s||"style"===s||y(s))o=e;else{var a=e.attrs&&e.attrs.type;o=r||$.mustUseProp(t,a,s)?e.domProps||(e.domProps={}):e.attrs||(e.attrs={})}var c=C(s),u=T(s);if(!(c in o)&&!(u in o)&&(o[s]=n[s],i)){var f=e.on||(e.on={});f["update:"+s]=function(e){n[s]=e}}};for(var a in n)s(a)}else;return e}function $t(e,t){var n=this._staticTrees||(this._staticTrees=[]),r=n[e];return r&&!t||(r=n[e]=this.$options.staticRenderFns[e].call(this._renderProxy,null,this),zt(r,"__static__"+e,!1)),r}function Gt(e,t,n){return zt(e,"__once__"+t+(n?"_"+n:""),!0),e}function zt(e,t,n){if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r]&&"string"!==typeof e[r]&&Ht(e[r],t+"_"+r,n);else Ht(e,t,n)}function Ht(e,t,n){e.isStatic=!0,e.key=t,e.isOnce=n}function Kt(e,t){if(t)if(f(t)){var n=e.on=e.on?A({},e.on):{};for(var r in t){var i=n[r],o=t[r];n[r]=i?[].concat(i,o):o}}else;return e}function Jt(e,t,n,r){t=t||{$stable:!n};for(var i=0;i<e.length;i++){var o=e[i];Array.isArray(o)?Jt(o,t,n):o&&(o.proxy&&(o.fn.proxy=!0),t[o.key]=o.fn)}return r&&(t.$key=r),t}function Yt(e,t){for(var n=0;n<t.length;n+=2){var r=t[n];"string"===typeof r&&r&&(e[t[n]]=t[n+1])}return e}function Xt(e,t){return"string"===typeof e?t+e:e}function Zt(e){e._o=Gt,e._n=m,e._s=h,e._l=Bt,e._t=Ut,e._q=B,e._i=U,e._m=$t,e._f=Ft,e._k=Wt,e._b=qt,e._v=Ce,e._e=xe,e._u=Jt,e._g=Kt,e._d=Yt,e._p=Xt}function Qt(e,t,r,i,s){var a,c=this,u=s.options;w(i,"_uid")?(a=Object.create(i),a._original=i):(a=i,i=i._original);var f=o(u._compiled),d=!f;this.data=e,this.props=t,this.children=r,this.parent=i,this.listeners=e.on||n,this.injections=At(u.inject,i),this.slots=function(){return c.$slots||Nt(e.scopedSlots,c.$slots=Pt(r,i)),c.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return Nt(e.scopedSlots,this.slots())}}),f&&(this.$options=u,this.$slots=this.slots(),this.$scopedSlots=Nt(e.scopedSlots,this.$slots)),u._scopeId?this._c=function(e,t,n,r){var o=pn(a,e,t,n,r,d);return o&&!Array.isArray(o)&&(o.fnScopeId=u._scopeId,o.fnContext=i),o}:this._c=function(e,t,n,r){return pn(a,e,t,n,r,d)}}function en(e,t,r,o,s){var a=e.options,c={},u=a.props;if(i(u))for(var f in u)c[f]=Ze(f,u,t||n);else i(r.attrs)&&nn(c,r.attrs),i(r.props)&&nn(c,r.props);var d=new Qt(r,c,s,o,e),l=a.render.call(null,d._c,d);if(l instanceof we)return tn(l,r,d.parent,a,d);if(Array.isArray(l)){for(var p=Tt(l)||[],h=new Array(p.length),m=0;m<p.length;m++)h[m]=tn(p[m],r,d.parent,a,d);return h}}function tn(e,t,n,r,i){var o=Ee(e);return o.fnContext=n,o.fnOptions=r,t.slot&&((o.data||(o.data={})).slot=t.slot),o}function nn(e,t){for(var n in t)e[C(n)]=t[n]}Zt(Qt.prototype);var rn={init:function(e,t){if(e.componentInstance&&!e.componentInstance._isDestroyed&&e.data.keepAlive){var n=e;rn.prepatch(n,n)}else{var r=e.componentInstance=an(e,An);r.$mount(t?e.elm:void 0,t)}},prepatch:function(e,t){var n=t.componentOptions,r=t.componentInstance=e.componentInstance;Dn(r,n.propsData,n.listeners,t,n.children)},insert:function(e){var t=e.context,n=e.componentInstance;n._isMounted||(n._isMounted=!0,Vn(n,"mounted")),e.data.keepAlive&&(t._isMounted?er(n):Un(n,!0))},destroy:function(e){var t=e.componentInstance;t._isDestroyed||(e.data.keepAlive?Fn(t,!0):t.$destroy())}},on=Object.keys(rn);function sn(e,t,n,s,a){if(!r(e)){var u=n.$options._base;if(c(e)&&(e=u.extend(e)),"function"===typeof e){var f;if(r(e.cid)&&(f=e,e=xn(f,u),void 0===e))return Sn(f,t,n,s,a);t=t||{},xr(e),i(t.model)&&fn(e.options,t);var d=Ct(t,e,a);if(o(e.options.functional))return en(e,d,t,n,s);var l=t.on;if(t.on=t.nativeOn,o(e.options.abstract)){var p=t.slot;t={},p&&(t.slot=p)}cn(t);var h=e.options.name||a,m=new we("vue-component-"+e.cid+(h?"-"+h:""),t,void 0,void 0,void 0,n,{Ctor:e,propsData:d,listeners:l,tag:a,children:s},f);return m}}}function an(e,t){var n={_isComponent:!0,_parentVnode:e,parent:t},r=e.data.inlineTemplate;return i(r)&&(n.render=r.render,n.staticRenderFns=r.staticRenderFns),new e.componentOptions.Ctor(n)}function cn(e){for(var t=e.hook||(e.hook={}),n=0;n<on.length;n++){var r=on[n],i=t[r],o=rn[r];i===o||i&&i._merged||(t[r]=i?un(o,i):o)}}function un(e,t){var n=function(n,r){e(n,r),t(n,r)};return n._merged=!0,n}function fn(e,t){var n=e.model&&e.model.prop||"value",r=e.model&&e.model.event||"input";(t.attrs||(t.attrs={}))[n]=t.model.value;var o=t.on||(t.on={}),s=o[r],a=t.model.callback;i(s)?(Array.isArray(s)?-1===s.indexOf(a):s!==a)&&(o[r]=[a].concat(s)):o[r]=a}var dn=1,ln=2;function pn(e,t,n,r,i,s){return(Array.isArray(n)||a(n))&&(i=r,r=n,n=void 0),o(s)&&(i=ln),hn(e,t,n,r,i)}function hn(e,t,n,r,o){if(i(n)&&i(n.__ob__))return xe();if(i(n)&&i(n.is)&&(t=n.is),!t)return xe();var s,a,c;(Array.isArray(r)&&"function"===typeof r[0]&&(n=n||{},n.scopedSlots={default:r[0]},r.length=0),o===ln?r=Tt(r):o===dn&&(r=It(r)),"string"===typeof t)?(a=e.$vnode&&e.$vnode.ns||$.getTagNamespace(t),s=$.isReservedTag(t)?new we($.parsePlatformTagName(t),n,r,void 0,void 0,e):n&&n.pre||!i(c=Xe(e.$options,"components",t))?new we(t,n,r,void 0,void 0,e):sn(c,n,e,r,t)):s=sn(t,n,e,r);return Array.isArray(s)?s:i(s)?(i(a)&&mn(s,a),i(n)&&vn(n),s):xe()}function mn(e,t,n){if(e.ns=t,"foreignObject"===e.tag&&(t=void 0,n=!0),i(e.children))for(var s=0,a=e.children.length;s<a;s++){var c=e.children[s];i(c.tag)&&(r(c.ns)||o(n)&&"svg"!==c.tag)&&mn(c,t,n)}}function vn(e){c(e.style)&&yt(e.style),c(e.class)&&yt(e.class)}function gn(e){e._vnode=null,e._staticTrees=null;var t=e.$options,r=e.$vnode=t._parentVnode,i=r&&r.context;e.$slots=Pt(t._renderChildren,i),e.$scopedSlots=n,e._c=function(t,n,r,i){return pn(e,t,n,r,i,!1)},e.$createElement=function(t,n,r,i){return pn(e,t,n,r,i,!0)};var o=r&&r.data;Le(e,"$attrs",o&&o.attrs||n,null,!0),Le(e,"$listeners",t._parentListeners||n,null,!0)}var yn,bn=null;function _n(e){Zt(e.prototype),e.prototype.$nextTick=function(e){return vt(e,this)},e.prototype._render=function(){var e,t=this,n=t.$options,r=n.render,i=n._parentVnode;i&&(t.$scopedSlots=Nt(i.data.scopedSlots,t.$slots,t.$scopedSlots)),t.$vnode=i;try{bn=t,e=r.call(t._renderProxy,t.$createElement)}catch(Xu){rt(Xu,t,"render"),e=t._vnode}finally{bn=null}return Array.isArray(e)&&1===e.length&&(e=e[0]),e instanceof we||(e=xe()),e.parent=i,e}}function wn(e,t){return(e.__esModule||he&&"Module"===e[Symbol.toStringTag])&&(e=e.default),c(e)?t.extend(e):e}function Sn(e,t,n,r,i){var o=xe();return o.asyncFactory=e,o.asyncMeta={data:t,context:n,children:r,tag:i},o}function xn(e,t){if(o(e.error)&&i(e.errorComp))return e.errorComp;if(i(e.resolved))return e.resolved;var n=bn;if(n&&i(e.owners)&&-1===e.owners.indexOf(n)&&e.owners.push(n),o(e.loading)&&i(e.loadingComp))return e.loadingComp;if(n&&!i(e.owners)){var s=e.owners=[n],a=!0,u=null,f=null;n.$on("hook:destroyed",(function(){return b(s,n)}));var d=function(e){for(var t=0,n=s.length;t<n;t++)s[t].$forceUpdate();e&&(s.length=0,null!==u&&(clearTimeout(u),u=null),null!==f&&(clearTimeout(f),f=null))},l=F((function(n){e.resolved=wn(n,t),a?s.length=0:d(!0)})),h=F((function(t){i(e.errorComp)&&(e.error=!0,d(!0))})),m=e(l,h);return c(m)&&(p(m)?r(e.resolved)&&m.then(l,h):p(m.component)&&(m.component.then(l,h),i(m.error)&&(e.errorComp=wn(m.error,t)),i(m.loading)&&(e.loadingComp=wn(m.loading,t),0===m.delay?e.loading=!0:u=setTimeout((function(){u=null,r(e.resolved)&&r(e.error)&&(e.loading=!0,d(!1))}),m.delay||200)),i(m.timeout)&&(f=setTimeout((function(){f=null,r(e.resolved)&&h(null)}),m.timeout)))),a=!1,e.loading?e.loadingComp:e.resolved}}function Cn(e){return e.isComment&&e.asyncFactory}function En(e){if(Array.isArray(e))for(var t=0;t<e.length;t++){var n=e[t];if(i(n)&&(i(n.componentOptions)||Cn(n)))return n}}function In(e){e._events=Object.create(null),e._hasHookEvent=!1;var t=e.$options._parentListeners;t&&kn(e,t)}function Tn(e,t){yn.$on(e,t)}function On(e,t){yn.$off(e,t)}function Rn(e,t){var n=yn;return function r(){var i=t.apply(null,arguments);null!==i&&n.$off(e,r)}}function kn(e,t,n){yn=e,St(t,n||{},Tn,On,Rn,e),yn=void 0}function Mn(e){var t=/^hook:/;e.prototype.$on=function(e,n){var r=this;if(Array.isArray(e))for(var i=0,o=e.length;i<o;i++)r.$on(e[i],n);else(r._events[e]||(r._events[e]=[])).push(n),t.test(e)&&(r._hasHookEvent=!0);return r},e.prototype.$once=function(e,t){var n=this;function r(){n.$off(e,r),t.apply(n,arguments)}return r.fn=t,n.$on(e,r),n},e.prototype.$off=function(e,t){var n=this;if(!arguments.length)return n._events=Object.create(null),n;if(Array.isArray(e)){for(var r=0,i=e.length;r<i;r++)n.$off(e[r],t);return n}var o,s=n._events[e];if(!s)return n;if(!t)return n._events[e]=null,n;var a=s.length;while(a--)if(o=s[a],o===t||o.fn===t){s.splice(a,1);break}return n},e.prototype.$emit=function(e){var t=this,n=t._events[e];if(n){n=n.length>1?M(n):n;for(var r=M(arguments,1),i='event handler for "'+e+'"',o=0,s=n.length;o<s;o++)it(n[o],t,r,t,i)}return t}}var An=null;function Pn(e){var t=An;return An=e,function(){An=t}}function jn(e){var t=e.$options,n=t.parent;if(n&&!t.abstract){while(n.$options.abstract&&n.$parent)n=n.$parent;n.$children.push(e)}e.$parent=n,e.$root=n?n.$root:e,e.$children=[],e.$refs={},e._watcher=null,e._inactive=null,e._directInactive=!1,e._isMounted=!1,e._isDestroyed=!1,e._isBeingDestroyed=!1}function Nn(e){e.prototype._update=function(e,t){var n=this,r=n.$el,i=n._vnode,o=Pn(n);n._vnode=e,n.$el=i?n.__patch__(i,e):n.__patch__(n.$el,e,t,!1),o(),r&&(r.__vue__=null),n.$el&&(n.$el.__vue__=n),n.$vnode&&n.$parent&&n.$vnode===n.$parent._vnode&&(n.$parent.$el=n.$el)},e.prototype.$forceUpdate=function(){var e=this;e._watcher&&e._watcher.update()},e.prototype.$destroy=function(){var e=this;if(!e._isBeingDestroyed){Vn(e,"beforeDestroy"),e._isBeingDestroyed=!0;var t=e.$parent;!t||t._isBeingDestroyed||e.$options.abstract||b(t.$children,e),e._watcher&&e._watcher.teardown();var n=e._watchers.length;while(n--)e._watchers[n].teardown();e._data.__ob__&&e._data.__ob__.vmCount--,e._isDestroyed=!0,e.__patch__(e._vnode,null),Vn(e,"destroyed"),e.$off(),e.$el&&(e.$el.__vue__=null),e.$vnode&&(e.$vnode.parent=null)}}}function Ln(e,t,n){var r;return e.$el=t,e.$options.render||(e.$options.render=xe),Vn(e,"beforeMount"),r=function(){e._update(e._render(),n)},new ir(e,r,j,{before:function(){e._isMounted&&!e._isDestroyed&&Vn(e,"beforeUpdate")}},!0),n=!1,null==e.$vnode&&(e._isMounted=!0,Vn(e,"mounted")),e}function Dn(e,t,r,i,o){var s=i.data.scopedSlots,a=e.$scopedSlots,c=!!(s&&!s.$stable||a!==n&&!a.$stable||s&&e.$scopedSlots.$key!==s.$key),u=!!(o||e.$options._renderChildren||c);if(e.$options._parentVnode=i,e.$vnode=i,e._vnode&&(e._vnode.parent=i),e.$options._renderChildren=o,e.$attrs=i.data.attrs||n,e.$listeners=r||n,t&&e.$options.props){Me(!1);for(var f=e._props,d=e.$options._propKeys||[],l=0;l<d.length;l++){var p=d[l],h=e.$options.props;f[p]=Ze(p,h,t,e)}Me(!0),e.$options.propsData=t}r=r||n;var m=e.$options._parentListeners;e.$options._parentListeners=r,kn(e,r,m),u&&(e.$slots=Pt(o,i.context),e.$forceUpdate())}function Bn(e){while(e&&(e=e.$parent))if(e._inactive)return!0;return!1}function Un(e,t){if(t){if(e._directInactive=!1,Bn(e))return}else if(e._directInactive)return;if(e._inactive||null===e._inactive){e._inactive=!1;for(var n=0;n<e.$children.length;n++)Un(e.$children[n]);Vn(e,"activated")}}function Fn(e,t){if((!t||(e._directInactive=!0,!Bn(e)))&&!e._inactive){e._inactive=!0;for(var n=0;n<e.$children.length;n++)Fn(e.$children[n]);Vn(e,"deactivated")}}function Vn(e,t){be();var n=e.$options[t],r=t+" hook";if(n)for(var i=0,o=n.length;i<o;i++)it(n[i],e,null,e,r);e._hasHookEvent&&e.$emit("hook:"+t),_e()}var Wn=[],qn=[],$n={},Gn=!1,zn=!1,Hn=0;function Kn(){Hn=Wn.length=qn.length=0,$n={},Gn=zn=!1}var Jn=0,Yn=Date.now;if(Z&&!ne){var Xn=window.performance;Xn&&"function"===typeof Xn.now&&Yn()>document.createEvent("Event").timeStamp&&(Yn=function(){return Xn.now()})}function Zn(){var e,t;for(Jn=Yn(),zn=!0,Wn.sort((function(e,t){return e.id-t.id})),Hn=0;Hn<Wn.length;Hn++)e=Wn[Hn],e.before&&e.before(),t=e.id,$n[t]=null,e.run();var n=qn.slice(),r=Wn.slice();Kn(),tr(n),Qn(r),de&&$.devtools&&de.emit("flush")}function Qn(e){var t=e.length;while(t--){var n=e[t],r=n.vm;r._watcher===n&&r._isMounted&&!r._isDestroyed&&Vn(r,"updated")}}function er(e){e._inactive=!1,qn.push(e)}function tr(e){for(var t=0;t<e.length;t++)e[t]._inactive=!0,Un(e[t],!0)}function nr(e){var t=e.id;if(null==$n[t]){if($n[t]=!0,zn){var n=Wn.length-1;while(n>Hn&&Wn[n].id>e.id)n--;Wn.splice(n+1,0,e)}else Wn.push(e);Gn||(Gn=!0,vt(Zn))}}var rr=0,ir=function(e,t,n,r,i){this.vm=e,i&&(e._watcher=this),e._watchers.push(this),r?(this.deep=!!r.deep,this.user=!!r.user,this.lazy=!!r.lazy,this.sync=!!r.sync,this.before=r.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=n,this.id=++rr,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new pe,this.newDepIds=new pe,this.expression="","function"===typeof t?this.getter=t:(this.getter=J(t),this.getter||(this.getter=j)),this.value=this.lazy?void 0:this.get()};ir.prototype.get=function(){var e;be(this);var t=this.vm;try{e=this.getter.call(t,t)}catch(Xu){if(!this.user)throw Xu;rt(Xu,t,'getter for watcher "'+this.expression+'"')}finally{this.deep&&yt(e),_e(),this.cleanupDeps()}return e},ir.prototype.addDep=function(e){var t=e.id;this.newDepIds.has(t)||(this.newDepIds.add(t),this.newDeps.push(e),this.depIds.has(t)||e.addSub(this))},ir.prototype.cleanupDeps=function(){var e=this.deps.length;while(e--){var t=this.deps[e];this.newDepIds.has(t.id)||t.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},ir.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():nr(this)},ir.prototype.run=function(){if(this.active){var e=this.get();if(e!==this.value||c(e)||this.deep){var t=this.value;if(this.value=e,this.user)try{this.cb.call(this.vm,e,t)}catch(Xu){rt(Xu,this.vm,'callback for watcher "'+this.expression+'"')}else this.cb.call(this.vm,e,t)}}},ir.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},ir.prototype.depend=function(){var e=this.deps.length;while(e--)this.deps[e].depend()},ir.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||b(this.vm._watchers,this);var e=this.deps.length;while(e--)this.deps[e].removeSub(this);this.active=!1}};var or={enumerable:!0,configurable:!0,get:j,set:j};function sr(e,t,n){or.get=function(){return this[t][n]},or.set=function(e){this[t][n]=e},Object.defineProperty(e,n,or)}function ar(e){e._watchers=[];var t=e.$options;t.props&&cr(e,t.props),t.methods&&vr(e,t.methods),t.data?ur(e):Ne(e._data={},!0),t.computed&&lr(e,t.computed),t.watch&&t.watch!==ae&&gr(e,t.watch)}function cr(e,t){var n=e.$options.propsData||{},r=e._props={},i=e.$options._propKeys=[],o=!e.$parent;o||Me(!1);var s=function(o){i.push(o);var s=Ze(o,t,n,e);Le(r,o,s),o in e||sr(e,"_props",o)};for(var a in t)s(a);Me(!0)}function ur(e){var t=e.$options.data;t=e._data="function"===typeof t?fr(t,e):t||{},f(t)||(t={});var n=Object.keys(t),r=e.$options.props,i=(e.$options.methods,n.length);while(i--){var o=n[i];0,r&&w(r,o)||z(o)||sr(e,"_data",o)}Ne(t,!0)}function fr(e,t){be();try{return e.call(t,t)}catch(Xu){return rt(Xu,t,"data()"),{}}finally{_e()}}var dr={lazy:!0};function lr(e,t){var n=e._computedWatchers=Object.create(null),r=fe();for(var i in t){var o=t[i],s="function"===typeof o?o:o.get;0,r||(n[i]=new ir(e,s||j,j,dr)),i in e||pr(e,i,o)}}function pr(e,t,n){var r=!fe();"function"===typeof n?(or.get=r?hr(t):mr(n),or.set=j):(or.get=n.get?r&&!1!==n.cache?hr(t):mr(n.get):j,or.set=n.set||j),Object.defineProperty(e,t,or)}function hr(e){return function(){var t=this._computedWatchers&&this._computedWatchers[e];if(t)return t.dirty&&t.evaluate(),ge.target&&t.depend(),t.value}}function mr(e){return function(){return e.call(this,this)}}function vr(e,t){e.$options.props;for(var n in t)e[n]="function"!==typeof t[n]?j:k(t[n],e)}function gr(e,t){for(var n in t){var r=t[n];if(Array.isArray(r))for(var i=0;i<r.length;i++)yr(e,n,r[i]);else yr(e,n,r)}}function yr(e,t,n,r){return f(n)&&(r=n,n=n.handler),"string"===typeof n&&(n=e[n]),e.$watch(t,n,r)}function br(e){var t={get:function(){return this._data}},n={get:function(){return this._props}};Object.defineProperty(e.prototype,"$data",t),Object.defineProperty(e.prototype,"$props",n),e.prototype.$set=De,e.prototype.$delete=Be,e.prototype.$watch=function(e,t,n){var r=this;if(f(t))return yr(r,e,t,n);n=n||{},n.user=!0;var i=new ir(r,e,t,n);if(n.immediate)try{t.call(r,i.value)}catch(o){rt(o,r,'callback for immediate watcher "'+i.expression+'"')}return function(){i.teardown()}}}var _r=0;function wr(e){e.prototype._init=function(e){var t=this;t._uid=_r++,t._isVue=!0,e&&e._isComponent?Sr(t,e):t.$options=Ye(xr(t.constructor),e||{},t),t._renderProxy=t,t._self=t,jn(t),In(t),gn(t),Vn(t,"beforeCreate"),Mt(t),ar(t),kt(t),Vn(t,"created"),t.$options.el&&t.$mount(t.$options.el)}}function Sr(e,t){var n=e.$options=Object.create(e.constructor.options),r=t._parentVnode;n.parent=t.parent,n._parentVnode=r;var i=r.componentOptions;n.propsData=i.propsData,n._parentListeners=i.listeners,n._renderChildren=i.children,n._componentTag=i.tag,t.render&&(n.render=t.render,n.staticRenderFns=t.staticRenderFns)}function xr(e){var t=e.options;if(e.super){var n=xr(e.super),r=e.superOptions;if(n!==r){e.superOptions=n;var i=Cr(e);i&&A(e.extendOptions,i),t=e.options=Ye(n,e.extendOptions),t.name&&(t.components[t.name]=e)}}return t}function Cr(e){var t,n=e.options,r=e.sealedOptions;for(var i in n)n[i]!==r[i]&&(t||(t={}),t[i]=n[i]);return t}function Er(e){this._init(e)}function Ir(e){e.use=function(e){var t=this._installedPlugins||(this._installedPlugins=[]);if(t.indexOf(e)>-1)return this;var n=M(arguments,1);return n.unshift(this),"function"===typeof e.install?e.install.apply(e,n):"function"===typeof e&&e.apply(null,n),t.push(e),this}}function Tr(e){e.mixin=function(e){return this.options=Ye(this.options,e),this}}function Or(e){e.cid=0;var t=1;e.extend=function(e){e=e||{};var n=this,r=n.cid,i=e._Ctor||(e._Ctor={});if(i[r])return i[r];var o=e.name||n.options.name;var s=function(e){this._init(e)};return s.prototype=Object.create(n.prototype),s.prototype.constructor=s,s.cid=t++,s.options=Ye(n.options,e),s["super"]=n,s.options.props&&Rr(s),s.options.computed&&kr(s),s.extend=n.extend,s.mixin=n.mixin,s.use=n.use,W.forEach((function(e){s[e]=n[e]})),o&&(s.options.components[o]=s),s.superOptions=n.options,s.extendOptions=e,s.sealedOptions=A({},s.options),i[r]=s,s}}function Rr(e){var t=e.options.props;for(var n in t)sr(e.prototype,"_props",n)}function kr(e){var t=e.options.computed;for(var n in t)pr(e.prototype,n,t[n])}function Mr(e){W.forEach((function(t){e[t]=function(e,n){return n?("component"===t&&f(n)&&(n.name=n.name||e,n=this.options._base.extend(n)),"directive"===t&&"function"===typeof n&&(n={bind:n,update:n}),this.options[t+"s"][e]=n,n):this.options[t+"s"][e]}}))}function Ar(e){return e&&(e.Ctor.options.name||e.tag)}function Pr(e,t){return Array.isArray(e)?e.indexOf(t)>-1:"string"===typeof e?e.split(",").indexOf(t)>-1:!!d(e)&&e.test(t)}function jr(e,t){var n=e.cache,r=e.keys,i=e._vnode;for(var o in n){var s=n[o];if(s){var a=Ar(s.componentOptions);a&&!t(a)&&Nr(n,o,r,i)}}}function Nr(e,t,n,r){var i=e[t];!i||r&&i.tag===r.tag||i.componentInstance.$destroy(),e[t]=null,b(n,t)}wr(Er),br(Er),Mn(Er),Nn(Er),_n(Er);var Lr=[String,RegExp,Array],Dr={name:"keep-alive",abstract:!0,props:{include:Lr,exclude:Lr,max:[String,Number]},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var e in this.cache)Nr(this.cache,e,this.keys)},mounted:function(){var e=this;this.$watch("include",(function(t){jr(e,(function(e){return Pr(t,e)}))})),this.$watch("exclude",(function(t){jr(e,(function(e){return!Pr(t,e)}))}))},render:function(){var e=this.$slots.default,t=En(e),n=t&&t.componentOptions;if(n){var r=Ar(n),i=this,o=i.include,s=i.exclude;if(o&&(!r||!Pr(o,r))||s&&r&&Pr(s,r))return t;var a=this,c=a.cache,u=a.keys,f=null==t.key?n.Ctor.cid+(n.tag?"::"+n.tag:""):t.key;c[f]?(t.componentInstance=c[f].componentInstance,b(u,f),u.push(f)):(c[f]=t,u.push(f),this.max&&u.length>parseInt(this.max)&&Nr(c,u[0],u,this._vnode)),t.data.keepAlive=!0}return t||e&&e[0]}},Br={KeepAlive:Dr};function Ur(e){var t={get:function(){return $}};Object.defineProperty(e,"config",t),e.util={warn:me,extend:A,mergeOptions:Ye,defineReactive:Le},e.set=De,e.delete=Be,e.nextTick=vt,e.observable=function(e){return Ne(e),e},e.options=Object.create(null),W.forEach((function(t){e.options[t+"s"]=Object.create(null)})),e.options._base=e,A(e.options.components,Br),Ir(e),Tr(e),Or(e),Mr(e)}Ur(Er),Object.defineProperty(Er.prototype,"$isServer",{get:fe}),Object.defineProperty(Er.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(Er,"FunctionalRenderContext",{value:Qt}),Er.version="2.6.10";var Fr=v("style,class"),Vr=v("input,textarea,option,select,progress"),Wr=function(e,t,n){return"value"===n&&Vr(e)&&"button"!==t||"selected"===n&&"option"===e||"checked"===n&&"input"===e||"muted"===n&&"video"===e},qr=v("contenteditable,draggable,spellcheck"),$r=v("events,caret,typing,plaintext-only"),Gr=function(e,t){return Yr(t)||"false"===t?"false":"contenteditable"===e&&$r(t)?t:"true"},zr=v("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,translate,truespeed,typemustmatch,visible"),Hr="http://www.w3.org/1999/xlink",Kr=function(e){return":"===e.charAt(5)&&"xlink"===e.slice(0,5)},Jr=function(e){return Kr(e)?e.slice(6,e.length):""},Yr=function(e){return null==e||!1===e};function Xr(e){var t=e.data,n=e,r=e;while(i(r.componentInstance))r=r.componentInstance._vnode,r&&r.data&&(t=Zr(r.data,t));while(i(n=n.parent))n&&n.data&&(t=Zr(t,n.data));return Qr(t.staticClass,t.class)}function Zr(e,t){return{staticClass:ei(e.staticClass,t.staticClass),class:i(e.class)?[e.class,t.class]:t.class}}function Qr(e,t){return i(e)||i(t)?ei(e,ti(t)):""}function ei(e,t){return e?t?e+" "+t:e:t||""}function ti(e){return Array.isArray(e)?ni(e):c(e)?ri(e):"string"===typeof e?e:""}function ni(e){for(var t,n="",r=0,o=e.length;r<o;r++)i(t=ti(e[r]))&&""!==t&&(n&&(n+=" "),n+=t);return n}function ri(e){var t="";for(var n in e)e[n]&&(t&&(t+=" "),t+=n);return t}var ii={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},oi=v("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),si=v("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),ai=function(e){return"pre"===e},ci=function(e){return oi(e)||si(e)};function ui(e){return si(e)?"svg":"math"===e?"math":void 0}var fi=Object.create(null);function di(e){if(!Z)return!0;if(ci(e))return!1;if(e=e.toLowerCase(),null!=fi[e])return fi[e];var t=document.createElement(e);return e.indexOf("-")>-1?fi[e]=t.constructor===window.HTMLUnknownElement||t.constructor===window.HTMLElement:fi[e]=/HTMLUnknownElement/.test(t.toString())}var li=v("text,number,password,search,email,tel,url");function pi(e){if("string"===typeof e){var t=document.querySelector(e);return t||document.createElement("div")}return e}function hi(e,t){var n=document.createElement(e);return"select"!==e||t.data&&t.data.attrs&&void 0!==t.data.attrs.multiple&&n.setAttribute("multiple","multiple"),n}function mi(e,t){return document.createElementNS(ii[e],t)}function vi(e){return document.createTextNode(e)}function gi(e){return document.createComment(e)}function yi(e,t,n){e.insertBefore(t,n)}function bi(e,t){e.removeChild(t)}function _i(e,t){e.appendChild(t)}function wi(e){return e.parentNode}function Si(e){return e.nextSibling}function xi(e){return e.tagName}function Ci(e,t){e.textContent=t}function Ei(e,t){e.setAttribute(t,"")}var Ii=Object.freeze({createElement:hi,createElementNS:mi,createTextNode:vi,createComment:gi,insertBefore:yi,removeChild:bi,appendChild:_i,parentNode:wi,nextSibling:Si,tagName:xi,setTextContent:Ci,setStyleScope:Ei}),Ti={create:function(e,t){Oi(t)},update:function(e,t){e.data.ref!==t.data.ref&&(Oi(e,!0),Oi(t))},destroy:function(e){Oi(e,!0)}};function Oi(e,t){var n=e.data.ref;if(i(n)){var r=e.context,o=e.componentInstance||e.elm,s=r.$refs;t?Array.isArray(s[n])?b(s[n],o):s[n]===o&&(s[n]=void 0):e.data.refInFor?Array.isArray(s[n])?s[n].indexOf(o)<0&&s[n].push(o):s[n]=[o]:s[n]=o}}var Ri=new we("",{},[]),ki=["create","activate","update","remove","destroy"];function Mi(e,t){return e.key===t.key&&(e.tag===t.tag&&e.isComment===t.isComment&&i(e.data)===i(t.data)&&Ai(e,t)||o(e.isAsyncPlaceholder)&&e.asyncFactory===t.asyncFactory&&r(t.asyncFactory.error))}function Ai(e,t){if("input"!==e.tag)return!0;var n,r=i(n=e.data)&&i(n=n.attrs)&&n.type,o=i(n=t.data)&&i(n=n.attrs)&&n.type;return r===o||li(r)&&li(o)}function Pi(e,t,n){var r,o,s={};for(r=t;r<=n;++r)o=e[r].key,i(o)&&(s[o]=r);return s}function ji(e){var t,n,s={},c=e.modules,u=e.nodeOps;for(t=0;t<ki.length;++t)for(s[ki[t]]=[],n=0;n<c.length;++n)i(c[n][ki[t]])&&s[ki[t]].push(c[n][ki[t]]);function f(e){return new we(u.tagName(e).toLowerCase(),{},[],void 0,e)}function d(e,t){function n(){0===--n.listeners&&l(e)}return n.listeners=t,n}function l(e){var t=u.parentNode(e);i(t)&&u.removeChild(t,e)}function p(e,t,n,r,s,a,c){if(i(e.elm)&&i(a)&&(e=a[c]=Ee(e)),e.isRootInsert=!s,!h(e,t,n,r)){var f=e.data,d=e.children,l=e.tag;i(l)?(e.elm=e.ns?u.createElementNS(e.ns,l):u.createElement(l,e),S(e),b(e,d,t),i(f)&&w(e,t),y(n,e.elm,r)):o(e.isComment)?(e.elm=u.createComment(e.text),y(n,e.elm,r)):(e.elm=u.createTextNode(e.text),y(n,e.elm,r))}}function h(e,t,n,r){var s=e.data;if(i(s)){var a=i(e.componentInstance)&&s.keepAlive;if(i(s=s.hook)&&i(s=s.init)&&s(e,!1),i(e.componentInstance))return m(e,t),y(n,e.elm,r),o(a)&&g(e,t,n,r),!0}}function m(e,t){i(e.data.pendingInsert)&&(t.push.apply(t,e.data.pendingInsert),e.data.pendingInsert=null),e.elm=e.componentInstance.$el,_(e)?(w(e,t),S(e)):(Oi(e),t.push(e))}function g(e,t,n,r){var o,a=e;while(a.componentInstance)if(a=a.componentInstance._vnode,i(o=a.data)&&i(o=o.transition)){for(o=0;o<s.activate.length;++o)s.activate[o](Ri,a);t.push(a);break}y(n,e.elm,r)}function y(e,t,n){i(e)&&(i(n)?u.parentNode(n)===e&&u.insertBefore(e,t,n):u.appendChild(e,t))}function b(e,t,n){if(Array.isArray(t)){0;for(var r=0;r<t.length;++r)p(t[r],n,e.elm,null,!0,t,r)}else a(e.text)&&u.appendChild(e.elm,u.createTextNode(String(e.text)))}function _(e){while(e.componentInstance)e=e.componentInstance._vnode;return i(e.tag)}function w(e,n){for(var r=0;r<s.create.length;++r)s.create[r](Ri,e);t=e.data.hook,i(t)&&(i(t.create)&&t.create(Ri,e),i(t.insert)&&n.push(e))}function S(e){var t;if(i(t=e.fnScopeId))u.setStyleScope(e.elm,t);else{var n=e;while(n)i(t=n.context)&&i(t=t.$options._scopeId)&&u.setStyleScope(e.elm,t),n=n.parent}i(t=An)&&t!==e.context&&t!==e.fnContext&&i(t=t.$options._scopeId)&&u.setStyleScope(e.elm,t)}function x(e,t,n,r,i,o){for(;r<=i;++r)p(n[r],o,e,t,!1,n,r)}function C(e){var t,n,r=e.data;if(i(r))for(i(t=r.hook)&&i(t=t.destroy)&&t(e),t=0;t<s.destroy.length;++t)s.destroy[t](e);if(i(t=e.children))for(n=0;n<e.children.length;++n)C(e.children[n])}function E(e,t,n,r){for(;n<=r;++n){var o=t[n];i(o)&&(i(o.tag)?(I(o),C(o)):l(o.elm))}}function I(e,t){if(i(t)||i(e.data)){var n,r=s.remove.length+1;for(i(t)?t.listeners+=r:t=d(e.elm,r),i(n=e.componentInstance)&&i(n=n._vnode)&&i(n.data)&&I(n,t),n=0;n<s.remove.length;++n)s.remove[n](e,t);i(n=e.data.hook)&&i(n=n.remove)?n(e,t):t()}else l(e.elm)}function T(e,t,n,o,s){var a,c,f,d,l=0,h=0,m=t.length-1,v=t[0],g=t[m],y=n.length-1,b=n[0],_=n[y],w=!s;while(l<=m&&h<=y)r(v)?v=t[++l]:r(g)?g=t[--m]:Mi(v,b)?(R(v,b,o,n,h),v=t[++l],b=n[++h]):Mi(g,_)?(R(g,_,o,n,y),g=t[--m],_=n[--y]):Mi(v,_)?(R(v,_,o,n,y),w&&u.insertBefore(e,v.elm,u.nextSibling(g.elm)),v=t[++l],_=n[--y]):Mi(g,b)?(R(g,b,o,n,h),w&&u.insertBefore(e,g.elm,v.elm),g=t[--m],b=n[++h]):(r(a)&&(a=Pi(t,l,m)),c=i(b.key)?a[b.key]:O(b,t,l,m),r(c)?p(b,o,e,v.elm,!1,n,h):(f=t[c],Mi(f,b)?(R(f,b,o,n,h),t[c]=void 0,w&&u.insertBefore(e,f.elm,v.elm)):p(b,o,e,v.elm,!1,n,h)),b=n[++h]);l>m?(d=r(n[y+1])?null:n[y+1].elm,x(e,d,n,h,y,o)):h>y&&E(e,t,l,m)}function O(e,t,n,r){for(var o=n;o<r;o++){var s=t[o];if(i(s)&&Mi(e,s))return o}}function R(e,t,n,a,c,f){if(e!==t){i(t.elm)&&i(a)&&(t=a[c]=Ee(t));var d=t.elm=e.elm;if(o(e.isAsyncPlaceholder))i(t.asyncFactory.resolved)?A(e.elm,t,n):t.isAsyncPlaceholder=!0;else if(o(t.isStatic)&&o(e.isStatic)&&t.key===e.key&&(o(t.isCloned)||o(t.isOnce)))t.componentInstance=e.componentInstance;else{var l,p=t.data;i(p)&&i(l=p.hook)&&i(l=l.prepatch)&&l(e,t);var h=e.children,m=t.children;if(i(p)&&_(t)){for(l=0;l<s.update.length;++l)s.update[l](e,t);i(l=p.hook)&&i(l=l.update)&&l(e,t)}r(t.text)?i(h)&&i(m)?h!==m&&T(d,h,m,n,f):i(m)?(i(e.text)&&u.setTextContent(d,""),x(d,null,m,0,m.length-1,n)):i(h)?E(d,h,0,h.length-1):i(e.text)&&u.setTextContent(d,""):e.text!==t.text&&u.setTextContent(d,t.text),i(p)&&i(l=p.hook)&&i(l=l.postpatch)&&l(e,t)}}}function k(e,t,n){if(o(n)&&i(e.parent))e.parent.data.pendingInsert=t;else for(var r=0;r<t.length;++r)t[r].data.hook.insert(t[r])}var M=v("attrs,class,staticClass,staticStyle,key");function A(e,t,n,r){var s,a=t.tag,c=t.data,u=t.children;if(r=r||c&&c.pre,t.elm=e,o(t.isComment)&&i(t.asyncFactory))return t.isAsyncPlaceholder=!0,!0;if(i(c)&&(i(s=c.hook)&&i(s=s.init)&&s(t,!0),i(s=t.componentInstance)))return m(t,n),!0;if(i(a)){if(i(u))if(e.hasChildNodes())if(i(s=c)&&i(s=s.domProps)&&i(s=s.innerHTML)){if(s!==e.innerHTML)return!1}else{for(var f=!0,d=e.firstChild,l=0;l<u.length;l++){if(!d||!A(d,u[l],n,r)){f=!1;break}d=d.nextSibling}if(!f||d)return!1}else b(t,u,n);if(i(c)){var p=!1;for(var h in c)if(!M(h)){p=!0,w(t,n);break}!p&&c["class"]&&yt(c["class"])}}else e.data!==t.text&&(e.data=t.text);return!0}return function(e,t,n,a){if(!r(t)){var c=!1,d=[];if(r(e))c=!0,p(t,d);else{var l=i(e.nodeType);if(!l&&Mi(e,t))R(e,t,d,null,null,a);else{if(l){if(1===e.nodeType&&e.hasAttribute(V)&&(e.removeAttribute(V),n=!0),o(n)&&A(e,t,d))return k(t,d,!0),e;e=f(e)}var h=e.elm,m=u.parentNode(h);if(p(t,d,h._leaveCb?null:m,u.nextSibling(h)),i(t.parent)){var v=t.parent,g=_(t);while(v){for(var y=0;y<s.destroy.length;++y)s.destroy[y](v);if(v.elm=t.elm,g){for(var b=0;b<s.create.length;++b)s.create[b](Ri,v);var w=v.data.hook.insert;if(w.merged)for(var S=1;S<w.fns.length;S++)w.fns[S]()}else Oi(v);v=v.parent}}i(m)?E(m,[e],0,0):i(e.tag)&&C(e)}}return k(t,d,c),t.elm}i(e)&&C(e)}}var Ni={create:Li,update:Li,destroy:function(e){Li(e,Ri)}};function Li(e,t){(e.data.directives||t.data.directives)&&Di(e,t)}function Di(e,t){var n,r,i,o=e===Ri,s=t===Ri,a=Ui(e.data.directives,e.context),c=Ui(t.data.directives,t.context),u=[],f=[];for(n in c)r=a[n],i=c[n],r?(i.oldValue=r.value,i.oldArg=r.arg,Vi(i,"update",t,e),i.def&&i.def.componentUpdated&&f.push(i)):(Vi(i,"bind",t,e),i.def&&i.def.inserted&&u.push(i));if(u.length){var d=function(){for(var n=0;n<u.length;n++)Vi(u[n],"inserted",t,e)};o?xt(t,"insert",d):d()}if(f.length&&xt(t,"postpatch",(function(){for(var n=0;n<f.length;n++)Vi(f[n],"componentUpdated",t,e)})),!o)for(n in a)c[n]||Vi(a[n],"unbind",e,e,s)}var Bi=Object.create(null);function Ui(e,t){var n,r,i=Object.create(null);if(!e)return i;for(n=0;n<e.length;n++)r=e[n],r.modifiers||(r.modifiers=Bi),i[Fi(r)]=r,r.def=Xe(t.$options,"directives",r.name,!0);return i}function Fi(e){return e.rawName||e.name+"."+Object.keys(e.modifiers||{}).join(".")}function Vi(e,t,n,r,i){var o=e.def&&e.def[t];if(o)try{o(n.elm,e,n,r,i)}catch(Xu){rt(Xu,n.context,"directive "+e.name+" "+t+" hook")}}var Wi=[Ti,Ni];function qi(e,t){var n=t.componentOptions;if((!i(n)||!1!==n.Ctor.options.inheritAttrs)&&(!r(e.data.attrs)||!r(t.data.attrs))){var o,s,a,c=t.elm,u=e.data.attrs||{},f=t.data.attrs||{};for(o in i(f.__ob__)&&(f=t.data.attrs=A({},f)),f)s=f[o],a=u[o],a!==s&&$i(c,o,s);for(o in(ne||ie)&&f.value!==u.value&&$i(c,"value",f.value),u)r(f[o])&&(Kr(o)?c.removeAttributeNS(Hr,Jr(o)):qr(o)||c.removeAttribute(o))}}function $i(e,t,n){e.tagName.indexOf("-")>-1?Gi(e,t,n):zr(t)?Yr(n)?e.removeAttribute(t):(n="allowfullscreen"===t&&"EMBED"===e.tagName?"true":t,e.setAttribute(t,n)):qr(t)?e.setAttribute(t,Gr(t,n)):Kr(t)?Yr(n)?e.removeAttributeNS(Hr,Jr(t)):e.setAttributeNS(Hr,t,n):Gi(e,t,n)}function Gi(e,t,n){if(Yr(n))e.removeAttribute(t);else{if(ne&&!re&&"TEXTAREA"===e.tagName&&"placeholder"===t&&""!==n&&!e.__ieph){var r=function(t){t.stopImmediatePropagation(),e.removeEventListener("input",r)};e.addEventListener("input",r),e.__ieph=!0}e.setAttribute(t,n)}}var zi={create:qi,update:qi};function Hi(e,t){var n=t.elm,o=t.data,s=e.data;if(!(r(o.staticClass)&&r(o.class)&&(r(s)||r(s.staticClass)&&r(s.class)))){var a=Xr(t),c=n._transitionClasses;i(c)&&(a=ei(a,ti(c))),a!==n._prevClass&&(n.setAttribute("class",a),n._prevClass=a)}}var Ki,Ji,Yi,Xi,Zi,Qi,eo={create:Hi,update:Hi},to=/[\w).+\-_$\]]/;function no(e){var t,n,r,i,o,s=!1,a=!1,c=!1,u=!1,f=0,d=0,l=0,p=0;for(r=0;r<e.length;r++)if(n=t,t=e.charCodeAt(r),s)39===t&&92!==n&&(s=!1);else if(a)34===t&&92!==n&&(a=!1);else if(c)96===t&&92!==n&&(c=!1);else if(u)47===t&&92!==n&&(u=!1);else if(124!==t||124===e.charCodeAt(r+1)||124===e.charCodeAt(r-1)||f||d||l){switch(t){case 34:a=!0;break;case 39:s=!0;break;case 96:c=!0;break;case 40:l++;break;case 41:l--;break;case 91:d++;break;case 93:d--;break;case 123:f++;break;case 125:f--;break}if(47===t){for(var h=r-1,m=void 0;h>=0;h--)if(m=e.charAt(h)," "!==m)break;m&&to.test(m)||(u=!0)}}else void 0===i?(p=r+1,i=e.slice(0,r).trim()):v();function v(){(o||(o=[])).push(e.slice(p,r).trim()),p=r+1}if(void 0===i?i=e.slice(0,r).trim():0!==p&&v(),o)for(r=0;r<o.length;r++)i=ro(i,o[r]);return i}function ro(e,t){var n=t.indexOf("(");if(n<0)return'_f("'+t+'")('+e+")";var r=t.slice(0,n),i=t.slice(n+1);return'_f("'+r+'")('+e+(")"!==i?","+i:i)}function io(e,t){console.error("[Vue compiler]: "+e)}function oo(e,t){return e?e.map((function(e){return e[t]})).filter((function(e){return e})):[]}function so(e,t,n,r,i){(e.props||(e.props=[])).push(go({name:t,value:n,dynamic:i},r)),e.plain=!1}function ao(e,t,n,r,i){var o=i?e.dynamicAttrs||(e.dynamicAttrs=[]):e.attrs||(e.attrs=[]);o.push(go({name:t,value:n,dynamic:i},r)),e.plain=!1}function co(e,t,n,r){e.attrsMap[t]=n,e.attrsList.push(go({name:t,value:n},r))}function uo(e,t,n,r,i,o,s,a){(e.directives||(e.directives=[])).push(go({name:t,rawName:n,value:r,arg:i,isDynamicArg:o,modifiers:s},a)),e.plain=!1}function fo(e,t,n){return n?"_p("+t+',"'+e+'")':e+t}function lo(e,t,r,i,o,s,a,c){var u;i=i||n,i.right?c?t="("+t+")==='click'?'contextmenu':("+t+")":"click"===t&&(t="contextmenu",delete i.right):i.middle&&(c?t="("+t+")==='click'?'mouseup':("+t+")":"click"===t&&(t="mouseup")),i.capture&&(delete i.capture,t=fo("!",t,c)),i.once&&(delete i.once,t=fo("~",t,c)),i.passive&&(delete i.passive,t=fo("&",t,c)),i.native?(delete i.native,u=e.nativeEvents||(e.nativeEvents={})):u=e.events||(e.events={});var f=go({value:r.trim(),dynamic:c},a);i!==n&&(f.modifiers=i);var d=u[t];Array.isArray(d)?o?d.unshift(f):d.push(f):u[t]=d?o?[f,d]:[d,f]:f,e.plain=!1}function po(e,t){return e.rawAttrsMap[":"+t]||e.rawAttrsMap["v-bind:"+t]||e.rawAttrsMap[t]}function ho(e,t,n){var r=mo(e,":"+t)||mo(e,"v-bind:"+t);if(null!=r)return no(r);if(!1!==n){var i=mo(e,t);if(null!=i)return JSON.stringify(i)}}function mo(e,t,n){var r;if(null!=(r=e.attrsMap[t]))for(var i=e.attrsList,o=0,s=i.length;o<s;o++)if(i[o].name===t){i.splice(o,1);break}return n&&delete e.attrsMap[t],r}function vo(e,t){for(var n=e.attrsList,r=0,i=n.length;r<i;r++){var o=n[r];if(t.test(o.name))return n.splice(r,1),o}}function go(e,t){return t&&(null!=t.start&&(e.start=t.start),null!=t.end&&(e.end=t.end)),e}function yo(e,t,n){var r=n||{},i=r.number,o=r.trim,s="$$v",a=s;o&&(a="(typeof "+s+" === 'string'? "+s+".trim(): "+s+")"),i&&(a="_n("+a+")");var c=bo(t,a);e.model={value:"("+t+")",expression:JSON.stringify(t),callback:"function ("+s+") {"+c+"}"}}function bo(e,t){var n=_o(e);return null===n.key?e+"="+t:"$set("+n.exp+", "+n.key+", "+t+")"}function _o(e){if(e=e.trim(),Ki=e.length,e.indexOf("[")<0||e.lastIndexOf("]")<Ki-1)return Xi=e.lastIndexOf("."),Xi>-1?{exp:e.slice(0,Xi),key:'"'+e.slice(Xi+1)+'"'}:{exp:e,key:null};Ji=e,Xi=Zi=Qi=0;while(!So())Yi=wo(),xo(Yi)?Eo(Yi):91===Yi&&Co(Yi);return{exp:e.slice(0,Zi),key:e.slice(Zi+1,Qi)}}function wo(){return Ji.charCodeAt(++Xi)}function So(){return Xi>=Ki}function xo(e){return 34===e||39===e}function Co(e){var t=1;Zi=Xi;while(!So())if(e=wo(),xo(e))Eo(e);else if(91===e&&t++,93===e&&t--,0===t){Qi=Xi;break}}function Eo(e){var t=e;while(!So())if(e=wo(),e===t)break}var Io,To="__r",Oo="__c";function Ro(e,t,n){n;var r=t.value,i=t.modifiers,o=e.tag,s=e.attrsMap.type;if(e.component)return yo(e,r,i),!1;if("select"===o)Ao(e,r,i);else if("input"===o&&"checkbox"===s)ko(e,r,i);else if("input"===o&&"radio"===s)Mo(e,r,i);else if("input"===o||"textarea"===o)Po(e,r,i);else{if(!$.isReservedTag(o))return yo(e,r,i),!1}return!0}function ko(e,t,n){var r=n&&n.number,i=ho(e,"value")||"null",o=ho(e,"true-value")||"true",s=ho(e,"false-value")||"false";so(e,"checked","Array.isArray("+t+")?_i("+t+","+i+")>-1"+("true"===o?":("+t+")":":_q("+t+","+o+")")),lo(e,"change","var $$a="+t+",$$el=$event.target,$$c=$$el.checked?("+o+"):("+s+");if(Array.isArray($$a)){var $$v="+(r?"_n("+i+")":i)+",$$i=_i($$a,$$v);if($$el.checked){$$i<0&&("+bo(t,"$$a.concat([$$v])")+")}else{$$i>-1&&("+bo(t,"$$a.slice(0,$$i).concat($$a.slice($$i+1))")+")}}else{"+bo(t,"$$c")+"}",null,!0)}function Mo(e,t,n){var r=n&&n.number,i=ho(e,"value")||"null";i=r?"_n("+i+")":i,so(e,"checked","_q("+t+","+i+")"),lo(e,"change",bo(t,i),null,!0)}function Ao(e,t,n){var r=n&&n.number,i='Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = "_value" in o ? o._value : o.value;return '+(r?"_n(val)":"val")+"})",o="$event.target.multiple ? $$selectedVal : $$selectedVal[0]",s="var $$selectedVal = "+i+";";s=s+" "+bo(t,o),lo(e,"change",s,null,!0)}function Po(e,t,n){var r=e.attrsMap.type,i=n||{},o=i.lazy,s=i.number,a=i.trim,c=!o&&"range"!==r,u=o?"change":"range"===r?To:"input",f="$event.target.value";a&&(f="$event.target.value.trim()"),s&&(f="_n("+f+")");var d=bo(t,f);c&&(d="if($event.target.composing)return;"+d),so(e,"value","("+t+")"),lo(e,u,d,null,!0),(a||s)&&lo(e,"blur","$forceUpdate()")}function jo(e){if(i(e[To])){var t=ne?"change":"input";e[t]=[].concat(e[To],e[t]||[]),delete e[To]}i(e[Oo])&&(e.change=[].concat(e[Oo],e.change||[]),delete e[Oo])}function No(e,t,n){var r=Io;return function i(){var o=t.apply(null,arguments);null!==o&&Bo(e,i,n,r)}}var Lo=ct&&!(se&&Number(se[1])<=53);function Do(e,t,n,r){if(Lo){var i=Jn,o=t;t=o._wrapper=function(e){if(e.target===e.currentTarget||e.timeStamp>=i||e.timeStamp<=0||e.target.ownerDocument!==document)return o.apply(this,arguments)}}Io.addEventListener(e,t,ce?{capture:n,passive:r}:n)}function Bo(e,t,n,r){(r||Io).removeEventListener(e,t._wrapper||t,n)}function Uo(e,t){if(!r(e.data.on)||!r(t.data.on)){var n=t.data.on||{},i=e.data.on||{};Io=t.elm,jo(n),St(n,i,Do,Bo,No,t.context),Io=void 0}}var Fo,Vo={create:Uo,update:Uo};function Wo(e,t){if(!r(e.data.domProps)||!r(t.data.domProps)){var n,o,s=t.elm,a=e.data.domProps||{},c=t.data.domProps||{};for(n in i(c.__ob__)&&(c=t.data.domProps=A({},c)),a)n in c||(s[n]="");for(n in c){if(o=c[n],"textContent"===n||"innerHTML"===n){if(t.children&&(t.children.length=0),o===a[n])continue;1===s.childNodes.length&&s.removeChild(s.childNodes[0])}if("value"===n&&"PROGRESS"!==s.tagName){s._value=o;var u=r(o)?"":String(o);qo(s,u)&&(s.value=u)}else if("innerHTML"===n&&si(s.tagName)&&r(s.innerHTML)){Fo=Fo||document.createElement("div"),Fo.innerHTML="<svg>"+o+"</svg>";var f=Fo.firstChild;while(s.firstChild)s.removeChild(s.firstChild);while(f.firstChild)s.appendChild(f.firstChild)}else if(o!==a[n])try{s[n]=o}catch(Xu){}}}}function qo(e,t){return!e.composing&&("OPTION"===e.tagName||$o(e,t)||Go(e,t))}function $o(e,t){var n=!0;try{n=document.activeElement!==e}catch(Xu){}return n&&e.value!==t}function Go(e,t){var n=e.value,r=e._vModifiers;if(i(r)){if(r.number)return m(n)!==m(t);if(r.trim)return n.trim()!==t.trim()}return n!==t}var zo={create:Wo,update:Wo},Ho=S((function(e){var t={},n=/;(?![^(]*\))/g,r=/:(.+)/;return e.split(n).forEach((function(e){if(e){var n=e.split(r);n.length>1&&(t[n[0].trim()]=n[1].trim())}})),t}));function Ko(e){var t=Jo(e.style);return e.staticStyle?A(e.staticStyle,t):t}function Jo(e){return Array.isArray(e)?P(e):"string"===typeof e?Ho(e):e}function Yo(e,t){var n,r={};if(t){var i=e;while(i.componentInstance)i=i.componentInstance._vnode,i&&i.data&&(n=Ko(i.data))&&A(r,n)}(n=Ko(e.data))&&A(r,n);var o=e;while(o=o.parent)o.data&&(n=Ko(o.data))&&A(r,n);return r}var Xo,Zo=/^--/,Qo=/\s*!important$/,es=function(e,t,n){if(Zo.test(t))e.style.setProperty(t,n);else if(Qo.test(n))e.style.setProperty(T(t),n.replace(Qo,""),"important");else{var r=ns(t);if(Array.isArray(n))for(var i=0,o=n.length;i<o;i++)e.style[r]=n[i];else e.style[r]=n}},ts=["Webkit","Moz","ms"],ns=S((function(e){if(Xo=Xo||document.createElement("div").style,e=C(e),"filter"!==e&&e in Xo)return e;for(var t=e.charAt(0).toUpperCase()+e.slice(1),n=0;n<ts.length;n++){var r=ts[n]+t;if(r in Xo)return r}}));function rs(e,t){var n=t.data,o=e.data;if(!(r(n.staticStyle)&&r(n.style)&&r(o.staticStyle)&&r(o.style))){var s,a,c=t.elm,u=o.staticStyle,f=o.normalizedStyle||o.style||{},d=u||f,l=Jo(t.data.style)||{};t.data.normalizedStyle=i(l.__ob__)?A({},l):l;var p=Yo(t,!0);for(a in d)r(p[a])&&es(c,a,"");for(a in p)s=p[a],s!==d[a]&&es(c,a,null==s?"":s)}}var is={create:rs,update:rs},os=/\s+/;function ss(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(os).forEach((function(t){return e.classList.add(t)})):e.classList.add(t);else{var n=" "+(e.getAttribute("class")||"")+" ";n.indexOf(" "+t+" ")<0&&e.setAttribute("class",(n+t).trim())}}function as(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(os).forEach((function(t){return e.classList.remove(t)})):e.classList.remove(t),e.classList.length||e.removeAttribute("class");else{var n=" "+(e.getAttribute("class")||"")+" ",r=" "+t+" ";while(n.indexOf(r)>=0)n=n.replace(r," ");n=n.trim(),n?e.setAttribute("class",n):e.removeAttribute("class")}}function cs(e){if(e){if("object"===typeof e){var t={};return!1!==e.css&&A(t,us(e.name||"v")),A(t,e),t}return"string"===typeof e?us(e):void 0}}var us=S((function(e){return{enterClass:e+"-enter",enterToClass:e+"-enter-to",enterActiveClass:e+"-enter-active",leaveClass:e+"-leave",leaveToClass:e+"-leave-to",leaveActiveClass:e+"-leave-active"}})),fs=Z&&!re,ds="transition",ls="animation",ps="transition",hs="transitionend",ms="animation",vs="animationend";fs&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(ps="WebkitTransition",hs="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(ms="WebkitAnimation",vs="webkitAnimationEnd"));var gs=Z?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(e){return e()};function ys(e){gs((function(){gs(e)}))}function bs(e,t){var n=e._transitionClasses||(e._transitionClasses=[]);n.indexOf(t)<0&&(n.push(t),ss(e,t))}function _s(e,t){e._transitionClasses&&b(e._transitionClasses,t),as(e,t)}function ws(e,t,n){var r=xs(e,t),i=r.type,o=r.timeout,s=r.propCount;if(!i)return n();var a=i===ds?hs:vs,c=0,u=function(){e.removeEventListener(a,f),n()},f=function(t){t.target===e&&++c>=s&&u()};setTimeout((function(){c<s&&u()}),o+1),e.addEventListener(a,f)}var Ss=/\b(transform|all)(,|$)/;function xs(e,t){var n,r=window.getComputedStyle(e),i=(r[ps+"Delay"]||"").split(", "),o=(r[ps+"Duration"]||"").split(", "),s=Cs(i,o),a=(r[ms+"Delay"]||"").split(", "),c=(r[ms+"Duration"]||"").split(", "),u=Cs(a,c),f=0,d=0;t===ds?s>0&&(n=ds,f=s,d=o.length):t===ls?u>0&&(n=ls,f=u,d=c.length):(f=Math.max(s,u),n=f>0?s>u?ds:ls:null,d=n?n===ds?o.length:c.length:0);var l=n===ds&&Ss.test(r[ps+"Property"]);return{type:n,timeout:f,propCount:d,hasTransform:l}}function Cs(e,t){while(e.length<t.length)e=e.concat(e);return Math.max.apply(null,t.map((function(t,n){return Es(t)+Es(e[n])})))}function Es(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function Is(e,t){var n=e.elm;i(n._leaveCb)&&(n._leaveCb.cancelled=!0,n._leaveCb());var o=cs(e.data.transition);if(!r(o)&&!i(n._enterCb)&&1===n.nodeType){var s=o.css,a=o.type,u=o.enterClass,f=o.enterToClass,d=o.enterActiveClass,l=o.appearClass,p=o.appearToClass,h=o.appearActiveClass,v=o.beforeEnter,g=o.enter,y=o.afterEnter,b=o.enterCancelled,_=o.beforeAppear,w=o.appear,S=o.afterAppear,x=o.appearCancelled,C=o.duration,E=An,I=An.$vnode;while(I&&I.parent)E=I.context,I=I.parent;var T=!E._isMounted||!e.isRootInsert;if(!T||w||""===w){var O=T&&l?l:u,R=T&&h?h:d,k=T&&p?p:f,M=T&&_||v,A=T&&"function"===typeof w?w:g,P=T&&S||y,j=T&&x||b,N=m(c(C)?C.enter:C);0;var L=!1!==s&&!re,D=Rs(A),B=n._enterCb=F((function(){L&&(_s(n,k),_s(n,R)),B.cancelled?(L&&_s(n,O),j&&j(n)):P&&P(n),n._enterCb=null}));e.data.show||xt(e,"insert",(function(){var t=n.parentNode,r=t&&t._pending&&t._pending[e.key];r&&r.tag===e.tag&&r.elm._leaveCb&&r.elm._leaveCb(),A&&A(n,B)})),M&&M(n),L&&(bs(n,O),bs(n,R),ys((function(){_s(n,O),B.cancelled||(bs(n,k),D||(Os(N)?setTimeout(B,N):ws(n,a,B)))}))),e.data.show&&(t&&t(),A&&A(n,B)),L||D||B()}}}function Ts(e,t){var n=e.elm;i(n._enterCb)&&(n._enterCb.cancelled=!0,n._enterCb());var o=cs(e.data.transition);if(r(o)||1!==n.nodeType)return t();if(!i(n._leaveCb)){var s=o.css,a=o.type,u=o.leaveClass,f=o.leaveToClass,d=o.leaveActiveClass,l=o.beforeLeave,p=o.leave,h=o.afterLeave,v=o.leaveCancelled,g=o.delayLeave,y=o.duration,b=!1!==s&&!re,_=Rs(p),w=m(c(y)?y.leave:y);0;var S=n._leaveCb=F((function(){n.parentNode&&n.parentNode._pending&&(n.parentNode._pending[e.key]=null),b&&(_s(n,f),_s(n,d)),S.cancelled?(b&&_s(n,u),v&&v(n)):(t(),h&&h(n)),n._leaveCb=null}));g?g(x):x()}function x(){S.cancelled||(!e.data.show&&n.parentNode&&((n.parentNode._pending||(n.parentNode._pending={}))[e.key]=e),l&&l(n),b&&(bs(n,u),bs(n,d),ys((function(){_s(n,u),S.cancelled||(bs(n,f),_||(Os(w)?setTimeout(S,w):ws(n,a,S)))}))),p&&p(n,S),b||_||S())}}function Os(e){return"number"===typeof e&&!isNaN(e)}function Rs(e){if(r(e))return!1;var t=e.fns;return i(t)?Rs(Array.isArray(t)?t[0]:t):(e._length||e.length)>1}function ks(e,t){!0!==t.data.show&&Is(t)}var Ms=Z?{create:ks,activate:ks,remove:function(e,t){!0!==e.data.show?Ts(e,t):t()}}:{},As=[zi,eo,Vo,zo,is,Ms],Ps=As.concat(Wi),js=ji({nodeOps:Ii,modules:Ps});re&&document.addEventListener("selectionchange",(function(){var e=document.activeElement;e&&e.vmodel&&Ws(e,"input")}));var Ns={inserted:function(e,t,n,r){"select"===n.tag?(r.elm&&!r.elm._vOptions?xt(n,"postpatch",(function(){Ns.componentUpdated(e,t,n)})):Ls(e,t,n.context),e._vOptions=[].map.call(e.options,Us)):("textarea"===n.tag||li(e.type))&&(e._vModifiers=t.modifiers,t.modifiers.lazy||(e.addEventListener("compositionstart",Fs),e.addEventListener("compositionend",Vs),e.addEventListener("change",Vs),re&&(e.vmodel=!0)))},componentUpdated:function(e,t,n){if("select"===n.tag){Ls(e,t,n.context);var r=e._vOptions,i=e._vOptions=[].map.call(e.options,Us);if(i.some((function(e,t){return!B(e,r[t])}))){var o=e.multiple?t.value.some((function(e){return Bs(e,i)})):t.value!==t.oldValue&&Bs(t.value,i);o&&Ws(e,"change")}}}};function Ls(e,t,n){Ds(e,t,n),(ne||ie)&&setTimeout((function(){Ds(e,t,n)}),0)}function Ds(e,t,n){var r=t.value,i=e.multiple;if(!i||Array.isArray(r)){for(var o,s,a=0,c=e.options.length;a<c;a++)if(s=e.options[a],i)o=U(r,Us(s))>-1,s.selected!==o&&(s.selected=o);else if(B(Us(s),r))return void(e.selectedIndex!==a&&(e.selectedIndex=a));i||(e.selectedIndex=-1)}}function Bs(e,t){return t.every((function(t){return!B(t,e)}))}function Us(e){return"_value"in e?e._value:e.value}function Fs(e){e.target.composing=!0}function Vs(e){e.target.composing&&(e.target.composing=!1,Ws(e.target,"input"))}function Ws(e,t){var n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0),e.dispatchEvent(n)}function qs(e){return!e.componentInstance||e.data&&e.data.transition?e:qs(e.componentInstance._vnode)}var $s={bind:function(e,t,n){var r=t.value;n=qs(n);var i=n.data&&n.data.transition,o=e.__vOriginalDisplay="none"===e.style.display?"":e.style.display;r&&i?(n.data.show=!0,Is(n,(function(){e.style.display=o}))):e.style.display=r?o:"none"},update:function(e,t,n){var r=t.value,i=t.oldValue;if(!r!==!i){n=qs(n);var o=n.data&&n.data.transition;o?(n.data.show=!0,r?Is(n,(function(){e.style.display=e.__vOriginalDisplay})):Ts(n,(function(){e.style.display="none"}))):e.style.display=r?e.__vOriginalDisplay:"none"}},unbind:function(e,t,n,r,i){i||(e.style.display=e.__vOriginalDisplay)}},Gs={model:Ns,show:$s},zs={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function Hs(e){var t=e&&e.componentOptions;return t&&t.Ctor.options.abstract?Hs(En(t.children)):e}function Ks(e){var t={},n=e.$options;for(var r in n.propsData)t[r]=e[r];var i=n._parentListeners;for(var o in i)t[C(o)]=i[o];return t}function Js(e,t){if(/\d-keep-alive$/.test(t.tag))return e("keep-alive",{props:t.componentOptions.propsData})}function Ys(e){while(e=e.parent)if(e.data.transition)return!0}function Xs(e,t){return t.key===e.key&&t.tag===e.tag}var Zs=function(e){return e.tag||Cn(e)},Qs=function(e){return"show"===e.name},ea={name:"transition",props:zs,abstract:!0,render:function(e){var t=this,n=this.$slots.default;if(n&&(n=n.filter(Zs),n.length)){0;var r=this.mode;0;var i=n[0];if(Ys(this.$vnode))return i;var o=Hs(i);if(!o)return i;if(this._leaving)return Js(e,i);var s="__transition-"+this._uid+"-";o.key=null==o.key?o.isComment?s+"comment":s+o.tag:a(o.key)?0===String(o.key).indexOf(s)?o.key:s+o.key:o.key;var c=(o.data||(o.data={})).transition=Ks(this),u=this._vnode,f=Hs(u);if(o.data.directives&&o.data.directives.some(Qs)&&(o.data.show=!0),f&&f.data&&!Xs(o,f)&&!Cn(f)&&(!f.componentInstance||!f.componentInstance._vnode.isComment)){var d=f.data.transition=A({},c);if("out-in"===r)return this._leaving=!0,xt(d,"afterLeave",(function(){t._leaving=!1,t.$forceUpdate()})),Js(e,i);if("in-out"===r){if(Cn(o))return u;var l,p=function(){l()};xt(c,"afterEnter",p),xt(c,"enterCancelled",p),xt(d,"delayLeave",(function(e){l=e}))}}return i}}},ta=A({tag:String,moveClass:String},zs);delete ta.mode;var na={props:ta,beforeMount:function(){var e=this,t=this._update;this._update=function(n,r){var i=Pn(e);e.__patch__(e._vnode,e.kept,!1,!0),e._vnode=e.kept,i(),t.call(e,n,r)}},render:function(e){for(var t=this.tag||this.$vnode.data.tag||"span",n=Object.create(null),r=this.prevChildren=this.children,i=this.$slots.default||[],o=this.children=[],s=Ks(this),a=0;a<i.length;a++){var c=i[a];if(c.tag)if(null!=c.key&&0!==String(c.key).indexOf("__vlist"))o.push(c),n[c.key]=c,(c.data||(c.data={})).transition=s;else;}if(r){for(var u=[],f=[],d=0;d<r.length;d++){var l=r[d];l.data.transition=s,l.data.pos=l.elm.getBoundingClientRect(),n[l.key]?u.push(l):f.push(l)}this.kept=e(t,null,u),this.removed=f}return e(t,null,o)},updated:function(){var e=this.prevChildren,t=this.moveClass||(this.name||"v")+"-move";e.length&&this.hasMove(e[0].elm,t)&&(e.forEach(ra),e.forEach(ia),e.forEach(oa),this._reflow=document.body.offsetHeight,e.forEach((function(e){if(e.data.moved){var n=e.elm,r=n.style;bs(n,t),r.transform=r.WebkitTransform=r.transitionDuration="",n.addEventListener(hs,n._moveCb=function e(r){r&&r.target!==n||r&&!/transform$/.test(r.propertyName)||(n.removeEventListener(hs,e),n._moveCb=null,_s(n,t))})}})))},methods:{hasMove:function(e,t){if(!fs)return!1;if(this._hasMove)return this._hasMove;var n=e.cloneNode();e._transitionClasses&&e._transitionClasses.forEach((function(e){as(n,e)})),ss(n,t),n.style.display="none",this.$el.appendChild(n);var r=xs(n);return this.$el.removeChild(n),this._hasMove=r.hasTransform}}};function ra(e){e.elm._moveCb&&e.elm._moveCb(),e.elm._enterCb&&e.elm._enterCb()}function ia(e){e.data.newPos=e.elm.getBoundingClientRect()}function oa(e){var t=e.data.pos,n=e.data.newPos,r=t.left-n.left,i=t.top-n.top;if(r||i){e.data.moved=!0;var o=e.elm.style;o.transform=o.WebkitTransform="translate("+r+"px,"+i+"px)",o.transitionDuration="0s"}}var sa={Transition:ea,TransitionGroup:na};Er.config.mustUseProp=Wr,Er.config.isReservedTag=ci,Er.config.isReservedAttr=Fr,Er.config.getTagNamespace=ui,Er.config.isUnknownElement=di,A(Er.options.directives,Gs),A(Er.options.components,sa),Er.prototype.__patch__=Z?js:j,Er.prototype.$mount=function(e,t){return e=e&&Z?pi(e):void 0,Ln(this,e,t)},Z&&setTimeout((function(){$.devtools&&de&&de.emit("init",Er)}),0);var aa=/\{\{((?:.|\r?\n)+?)\}\}/g,ca=/[-.*+?^${}()|[\]\/\\]/g,ua=S((function(e){var t=e[0].replace(ca,"\\$&"),n=e[1].replace(ca,"\\$&");return new RegExp(t+"((?:.|\\n)+?)"+n,"g")}));function fa(e,t){var n=t?ua(t):aa;if(n.test(e)){var r,i,o,s=[],a=[],c=n.lastIndex=0;while(r=n.exec(e)){i=r.index,i>c&&(a.push(o=e.slice(c,i)),s.push(JSON.stringify(o)));var u=no(r[1].trim());s.push("_s("+u+")"),a.push({"@binding":u}),c=i+r[0].length}return c<e.length&&(a.push(o=e.slice(c)),s.push(JSON.stringify(o))),{expression:s.join("+"),tokens:a}}}function da(e,t){t.warn;var n=mo(e,"class");n&&(e.staticClass=JSON.stringify(n));var r=ho(e,"class",!1);r&&(e.classBinding=r)}function la(e){var t="";return e.staticClass&&(t+="staticClass:"+e.staticClass+","),e.classBinding&&(t+="class:"+e.classBinding+","),t}var pa={staticKeys:["staticClass"],transformNode:da,genData:la};function ha(e,t){t.warn;var n=mo(e,"style");n&&(e.staticStyle=JSON.stringify(Ho(n)));var r=ho(e,"style",!1);r&&(e.styleBinding=r)}function ma(e){var t="";return e.staticStyle&&(t+="staticStyle:"+e.staticStyle+","),e.styleBinding&&(t+="style:("+e.styleBinding+"),"),t}var va,ga={staticKeys:["staticStyle"],transformNode:ha,genData:ma},ya={decode:function(e){return va=va||document.createElement("div"),va.innerHTML=e,va.textContent}},ba=v("area,base,br,col,embed,frame,hr,img,input,isindex,keygen,link,meta,param,source,track,wbr"),_a=v("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr,source"),wa=v("address,article,aside,base,blockquote,body,caption,col,colgroup,dd,details,dialog,div,dl,dt,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,head,header,hgroup,hr,html,legend,li,menuitem,meta,optgroup,option,param,rp,rt,source,style,summary,tbody,td,tfoot,th,thead,title,tr,track"),Sa=/^\s*([^\s"'<>\/=]+)(?:\s*(=)\s*(?:"([^"]*)"+|'([^']*)'+|([^\s"'=<>`]+)))?/,xa=/^\s*((?:v-[\w-]+:|@|:|#)\[[^=]+\][^\s"'<>\/=]*)(?:\s*(=)\s*(?:"([^"]*)"+|'([^']*)'+|([^\s"'=<>`]+)))?/,Ca="[a-zA-Z_][\\-\\.0-9_a-zA-Z"+G.source+"]*",Ea="((?:"+Ca+"\\:)?"+Ca+")",Ia=new RegExp("^<"+Ea),Ta=/^\s*(\/?)>/,Oa=new RegExp("^<\\/"+Ea+"[^>]*>"),Ra=/^<!DOCTYPE [^>]+>/i,ka=/^<!\--/,Ma=/^<!\[/,Aa=v("script,style,textarea",!0),Pa={},ja={"&lt;":"<","&gt;":">","&quot;":'"',"&amp;":"&","&#10;":"\n","&#9;":"\t","&#39;":"'"},Na=/&(?:lt|gt|quot|amp|#39);/g,La=/&(?:lt|gt|quot|amp|#39|#10|#9);/g,Da=v("pre,textarea",!0),Ba=function(e,t){return e&&Da(e)&&"\n"===t[0]};function Ua(e,t){var n=t?La:Na;return e.replace(n,(function(e){return ja[e]}))}function Fa(e,t){var n,r,i=[],o=t.expectHTML,s=t.isUnaryTag||N,a=t.canBeLeftOpenTag||N,c=0;while(e){if(n=e,r&&Aa(r)){var u=0,f=r.toLowerCase(),d=Pa[f]||(Pa[f]=new RegExp("([\\s\\S]*?)(</"+f+"[^>]*>)","i")),l=e.replace(d,(function(e,n,r){return u=r.length,Aa(f)||"noscript"===f||(n=n.replace(/<!\--([\s\S]*?)-->/g,"$1").replace(/<!\[CDATA\[([\s\S]*?)]]>/g,"$1")),Ba(f,n)&&(n=n.slice(1)),t.chars&&t.chars(n),""}));c+=e.length-l.length,e=l,I(f,c-u,c)}else{var p=e.indexOf("<");if(0===p){if(ka.test(e)){var h=e.indexOf("--\x3e");if(h>=0){t.shouldKeepComment&&t.comment(e.substring(4,h),c,c+h+3),x(h+3);continue}}if(Ma.test(e)){var m=e.indexOf("]>");if(m>=0){x(m+2);continue}}var v=e.match(Ra);if(v){x(v[0].length);continue}var g=e.match(Oa);if(g){var y=c;x(g[0].length),I(g[1],y,c);continue}var b=C();if(b){E(b),Ba(b.tagName,e)&&x(1);continue}}var _=void 0,w=void 0,S=void 0;if(p>=0){w=e.slice(p);while(!Oa.test(w)&&!Ia.test(w)&&!ka.test(w)&&!Ma.test(w)){if(S=w.indexOf("<",1),S<0)break;p+=S,w=e.slice(p)}_=e.substring(0,p)}p<0&&(_=e),_&&x(_.length),t.chars&&_&&t.chars(_,c-_.length,c)}if(e===n){t.chars&&t.chars(e);break}}function x(t){c+=t,e=e.substring(t)}function C(){var t=e.match(Ia);if(t){var n,r,i={tagName:t[1],attrs:[],start:c};x(t[0].length);while(!(n=e.match(Ta))&&(r=e.match(xa)||e.match(Sa)))r.start=c,x(r[0].length),r.end=c,i.attrs.push(r);if(n)return i.unarySlash=n[1],x(n[0].length),i.end=c,i}}function E(e){var n=e.tagName,c=e.unarySlash;o&&("p"===r&&wa(n)&&I(r),a(n)&&r===n&&I(n));for(var u=s(n)||!!c,f=e.attrs.length,d=new Array(f),l=0;l<f;l++){var p=e.attrs[l],h=p[3]||p[4]||p[5]||"",m="a"===n&&"href"===p[1]?t.shouldDecodeNewlinesForHref:t.shouldDecodeNewlines;d[l]={name:p[1],value:Ua(h,m)}}u||(i.push({tag:n,lowerCasedTag:n.toLowerCase(),attrs:d,start:e.start,end:e.end}),r=n),t.start&&t.start(n,d,u,e.start,e.end)}function I(e,n,o){var s,a;if(null==n&&(n=c),null==o&&(o=c),e){for(a=e.toLowerCase(),s=i.length-1;s>=0;s--)if(i[s].lowerCasedTag===a)break}else s=0;if(s>=0){for(var u=i.length-1;u>=s;u--)t.end&&t.end(i[u].tag,n,o);i.length=s,r=s&&i[s-1].tag}else"br"===a?t.start&&t.start(e,[],!0,n,o):"p"===a&&(t.start&&t.start(e,[],!1,n,o),t.end&&t.end(e,n,o))}I()}var Va,Wa,qa,$a,Ga,za,Ha,Ka,Ja=/^@|^v-on:/,Ya=/^v-|^@|^:/,Xa=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,Za=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,Qa=/^\(|\)$/g,ec=/^\[.*\]$/,tc=/:(.*)$/,nc=/^:|^\.|^v-bind:/,rc=/\.[^.\]]+(?=[^\]]*$)/g,ic=/^v-slot(:|$)|^#/,oc=/[\r\n]/,sc=/\s+/g,ac=S(ya.decode),cc="_empty_";function uc(e,t,n){return{type:1,tag:e,attrsList:t,attrsMap:kc(t),rawAttrsMap:{},parent:n,children:[]}}function fc(e,t){Va=t.warn||io,za=t.isPreTag||N,Ha=t.mustUseProp||N,Ka=t.getTagNamespace||N;var n=t.isReservedTag||N;(function(e){return!!e.component||!n(e.tag)}),qa=oo(t.modules,"transformNode"),$a=oo(t.modules,"preTransformNode"),Ga=oo(t.modules,"postTransformNode"),Wa=t.delimiters;var r,i,o=[],s=!1!==t.preserveWhitespace,a=t.whitespace,c=!1,u=!1;function f(e){if(d(e),c||e.processed||(e=pc(e,t)),o.length||e===r||r.if&&(e.elseif||e.else)&&wc(r,{exp:e.elseif,block:e}),i&&!e.forbidden)if(e.elseif||e.else)bc(e,i);else{if(e.slotScope){var n=e.slotTarget||'"default"';(i.scopedSlots||(i.scopedSlots={}))[n]=e}i.children.push(e),e.parent=i}e.children=e.children.filter((function(e){return!e.slotScope})),d(e),e.pre&&(c=!1),za(e.tag)&&(u=!1);for(var s=0;s<Ga.length;s++)Ga[s](e,t)}function d(e){var t;if(!u)while((t=e.children[e.children.length-1])&&3===t.type&&" "===t.text)e.children.pop()}return Fa(e,{warn:Va,expectHTML:t.expectHTML,isUnaryTag:t.isUnaryTag,canBeLeftOpenTag:t.canBeLeftOpenTag,shouldDecodeNewlines:t.shouldDecodeNewlines,shouldDecodeNewlinesForHref:t.shouldDecodeNewlinesForHref,shouldKeepComment:t.comments,outputSourceRange:t.outputSourceRange,start:function(e,n,s,a,d){var l=i&&i.ns||Ka(e);ne&&"svg"===l&&(n=Nc(n));var p=uc(e,n,i);l&&(p.ns=l),Ac(p)&&!fe()&&(p.forbidden=!0);for(var h=0;h<$a.length;h++)p=$a[h](p,t)||p;c||(dc(p),p.pre&&(c=!0)),za(p.tag)&&(u=!0),c?lc(p):p.processed||(vc(p),yc(p),Sc(p)),r||(r=p),s?f(p):(i=p,o.push(p))},end:function(e,t,n){var r=o[o.length-1];o.length-=1,i=o[o.length-1],f(r)},chars:function(e,t,n){if(i&&(!ne||"textarea"!==i.tag||i.attrsMap.placeholder!==e)){var r,o,f=i.children;if(e=u||e.trim()?Mc(i)?e:ac(e):f.length?a?"condense"===a&&oc.test(e)?"":" ":s?" ":"":"",e)u||"condense"!==a||(e=e.replace(sc," ")),!c&&" "!==e&&(r=fa(e,Wa))?o={type:2,expression:r.expression,tokens:r.tokens,text:e}:" "===e&&f.length&&" "===f[f.length-1].text||(o={type:3,text:e}),o&&f.push(o)}},comment:function(e,t,n){if(i){var r={type:3,text:e,isComment:!0};0,i.children.push(r)}}}),r}function dc(e){null!=mo(e,"v-pre")&&(e.pre=!0)}function lc(e){var t=e.attrsList,n=t.length;if(n)for(var r=e.attrs=new Array(n),i=0;i<n;i++)r[i]={name:t[i].name,value:JSON.stringify(t[i].value)},null!=t[i].start&&(r[i].start=t[i].start,r[i].end=t[i].end);else e.pre||(e.plain=!0)}function pc(e,t){hc(e),e.plain=!e.key&&!e.scopedSlots&&!e.attrsList.length,mc(e),xc(e),Ec(e),Ic(e);for(var n=0;n<qa.length;n++)e=qa[n](e,t)||e;return Tc(e),e}function hc(e){var t=ho(e,"key");t&&(e.key=t)}function mc(e){var t=ho(e,"ref");t&&(e.ref=t,e.refInFor=Oc(e))}function vc(e){var t;if(t=mo(e,"v-for")){var n=gc(t);n&&A(e,n)}}function gc(e){var t=e.match(Xa);if(t){var n={};n.for=t[2].trim();var r=t[1].trim().replace(Qa,""),i=r.match(Za);return i?(n.alias=r.replace(Za,"").trim(),n.iterator1=i[1].trim(),i[2]&&(n.iterator2=i[2].trim())):n.alias=r,n}}function yc(e){var t=mo(e,"v-if");if(t)e.if=t,wc(e,{exp:t,block:e});else{null!=mo(e,"v-else")&&(e.else=!0);var n=mo(e,"v-else-if");n&&(e.elseif=n)}}function bc(e,t){var n=_c(t.children);n&&n.if&&wc(n,{exp:e.elseif,block:e})}function _c(e){var t=e.length;while(t--){if(1===e[t].type)return e[t];e.pop()}}function wc(e,t){e.ifConditions||(e.ifConditions=[]),e.ifConditions.push(t)}function Sc(e){var t=mo(e,"v-once");null!=t&&(e.once=!0)}function xc(e){var t;"template"===e.tag?(t=mo(e,"scope"),e.slotScope=t||mo(e,"slot-scope")):(t=mo(e,"slot-scope"))&&(e.slotScope=t);var n=ho(e,"slot");if(n&&(e.slotTarget='""'===n?'"default"':n,e.slotTargetDynamic=!(!e.attrsMap[":slot"]&&!e.attrsMap["v-bind:slot"]),"template"===e.tag||e.slotScope||ao(e,"slot",n,po(e,"slot"))),"template"===e.tag){var r=vo(e,ic);if(r){0;var i=Cc(r),o=i.name,s=i.dynamic;e.slotTarget=o,e.slotTargetDynamic=s,e.slotScope=r.value||cc}}else{var a=vo(e,ic);if(a){0;var c=e.scopedSlots||(e.scopedSlots={}),u=Cc(a),f=u.name,d=u.dynamic,l=c[f]=uc("template",[],e);l.slotTarget=f,l.slotTargetDynamic=d,l.children=e.children.filter((function(e){if(!e.slotScope)return e.parent=l,!0})),l.slotScope=a.value||cc,e.children=[],e.plain=!1}}}function Cc(e){var t=e.name.replace(ic,"");return t||"#"!==e.name[0]&&(t="default"),ec.test(t)?{name:t.slice(1,-1),dynamic:!0}:{name:'"'+t+'"',dynamic:!1}}function Ec(e){"slot"===e.tag&&(e.slotName=ho(e,"name"))}function Ic(e){var t;(t=ho(e,"is"))&&(e.component=t),null!=mo(e,"inline-template")&&(e.inlineTemplate=!0)}function Tc(e){var t,n,r,i,o,s,a,c,u=e.attrsList;for(t=0,n=u.length;t<n;t++){if(r=i=u[t].name,o=u[t].value,Ya.test(r))if(e.hasBindings=!0,s=Rc(r.replace(Ya,"")),s&&(r=r.replace(rc,"")),nc.test(r))r=r.replace(nc,""),o=no(o),c=ec.test(r),c&&(r=r.slice(1,-1)),s&&(s.prop&&!c&&(r=C(r),"innerHtml"===r&&(r="innerHTML")),s.camel&&!c&&(r=C(r)),s.sync&&(a=bo(o,"$event"),c?lo(e,'"update:"+('+r+")",a,null,!1,Va,u[t],!0):(lo(e,"update:"+C(r),a,null,!1,Va,u[t]),T(r)!==C(r)&&lo(e,"update:"+T(r),a,null,!1,Va,u[t])))),s&&s.prop||!e.component&&Ha(e.tag,e.attrsMap.type,r)?so(e,r,o,u[t],c):ao(e,r,o,u[t],c);else if(Ja.test(r))r=r.replace(Ja,""),c=ec.test(r),c&&(r=r.slice(1,-1)),lo(e,r,o,s,!1,Va,u[t],c);else{r=r.replace(Ya,"");var f=r.match(tc),d=f&&f[1];c=!1,d&&(r=r.slice(0,-(d.length+1)),ec.test(d)&&(d=d.slice(1,-1),c=!0)),uo(e,r,i,o,d,c,s,u[t])}else ao(e,r,JSON.stringify(o),u[t]),!e.component&&"muted"===r&&Ha(e.tag,e.attrsMap.type,r)&&so(e,r,"true",u[t])}}function Oc(e){var t=e;while(t){if(void 0!==t.for)return!0;t=t.parent}return!1}function Rc(e){var t=e.match(rc);if(t){var n={};return t.forEach((function(e){n[e.slice(1)]=!0})),n}}function kc(e){for(var t={},n=0,r=e.length;n<r;n++)t[e[n].name]=e[n].value;return t}function Mc(e){return"script"===e.tag||"style"===e.tag}function Ac(e){return"style"===e.tag||"script"===e.tag&&(!e.attrsMap.type||"text/javascript"===e.attrsMap.type)}var Pc=/^xmlns:NS\d+/,jc=/^NS\d+:/;function Nc(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];Pc.test(r.name)||(r.name=r.name.replace(jc,""),t.push(r))}return t}function Lc(e,t){if("input"===e.tag){var n,r=e.attrsMap;if(!r["v-model"])return;if((r[":type"]||r["v-bind:type"])&&(n=ho(e,"type")),r.type||n||!r["v-bind"]||(n="("+r["v-bind"]+").type"),n){var i=mo(e,"v-if",!0),o=i?"&&("+i+")":"",s=null!=mo(e,"v-else",!0),a=mo(e,"v-else-if",!0),c=Dc(e);vc(c),co(c,"type","checkbox"),pc(c,t),c.processed=!0,c.if="("+n+")==='checkbox'"+o,wc(c,{exp:c.if,block:c});var u=Dc(e);mo(u,"v-for",!0),co(u,"type","radio"),pc(u,t),wc(c,{exp:"("+n+")==='radio'"+o,block:u});var f=Dc(e);return mo(f,"v-for",!0),co(f,":type",n),pc(f,t),wc(c,{exp:i,block:f}),s?c.else=!0:a&&(c.elseif=a),c}}}function Dc(e){return uc(e.tag,e.attrsList.slice(),e.parent)}var Bc={preTransformNode:Lc},Uc=[pa,ga,Bc];function Fc(e,t){t.value&&so(e,"textContent","_s("+t.value+")",t)}function Vc(e,t){t.value&&so(e,"innerHTML","_s("+t.value+")",t)}var Wc,qc,$c={model:Ro,text:Fc,html:Vc},Gc={expectHTML:!0,modules:Uc,directives:$c,isPreTag:ai,isUnaryTag:ba,mustUseProp:Wr,canBeLeftOpenTag:_a,isReservedTag:ci,getTagNamespace:ui,staticKeys:D(Uc)},zc=S(Kc);function Hc(e,t){e&&(Wc=zc(t.staticKeys||""),qc=t.isReservedTag||N,Jc(e),Yc(e,!1))}function Kc(e){return v("type,tag,attrsList,attrsMap,plain,parent,children,attrs,start,end,rawAttrsMap"+(e?","+e:""))}function Jc(e){if(e.static=Xc(e),1===e.type){if(!qc(e.tag)&&"slot"!==e.tag&&null==e.attrsMap["inline-template"])return;for(var t=0,n=e.children.length;t<n;t++){var r=e.children[t];Jc(r),r.static||(e.static=!1)}if(e.ifConditions)for(var i=1,o=e.ifConditions.length;i<o;i++){var s=e.ifConditions[i].block;Jc(s),s.static||(e.static=!1)}}}function Yc(e,t){if(1===e.type){if((e.static||e.once)&&(e.staticInFor=t),e.static&&e.children.length&&(1!==e.children.length||3!==e.children[0].type))return void(e.staticRoot=!0);if(e.staticRoot=!1,e.children)for(var n=0,r=e.children.length;n<r;n++)Yc(e.children[n],t||!!e.for);if(e.ifConditions)for(var i=1,o=e.ifConditions.length;i<o;i++)Yc(e.ifConditions[i].block,t)}}function Xc(e){return 2!==e.type&&(3===e.type||!(!e.pre&&(e.hasBindings||e.if||e.for||g(e.tag)||!qc(e.tag)||Zc(e)||!Object.keys(e).every(Wc))))}function Zc(e){while(e.parent){if(e=e.parent,"template"!==e.tag)return!1;if(e.for)return!0}return!1}var Qc=/^([\w$_]+|\([^)]*?\))\s*=>|^function\s*(?:[\w$]+)?\s*\(/,eu=/\([^)]*?\);*$/,tu=/^[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['[^']*?']|\["[^"]*?"]|\[\d+]|\[[A-Za-z_$][\w$]*])*$/,nu={esc:27,tab:9,enter:13,space:32,up:38,left:37,right:39,down:40,delete:[8,46]},ru={esc:["Esc","Escape"],tab:"Tab",enter:"Enter",space:[" ","Spacebar"],up:["Up","ArrowUp"],left:["Left","ArrowLeft"],right:["Right","ArrowRight"],down:["Down","ArrowDown"],delete:["Backspace","Delete","Del"]},iu=function(e){return"if("+e+")return null;"},ou={stop:"$event.stopPropagation();",prevent:"$event.preventDefault();",self:iu("$event.target !== $event.currentTarget"),ctrl:iu("!$event.ctrlKey"),shift:iu("!$event.shiftKey"),alt:iu("!$event.altKey"),meta:iu("!$event.metaKey"),left:iu("'button' in $event && $event.button !== 0"),middle:iu("'button' in $event && $event.button !== 1"),right:iu("'button' in $event && $event.button !== 2")};function su(e,t){var n=t?"nativeOn:":"on:",r="",i="";for(var o in e){var s=au(e[o]);e[o]&&e[o].dynamic?i+=o+","+s+",":r+='"'+o+'":'+s+","}return r="{"+r.slice(0,-1)+"}",i?n+"_d("+r+",["+i.slice(0,-1)+"])":n+r}function au(e){if(!e)return"function(){}";if(Array.isArray(e))return"["+e.map((function(e){return au(e)})).join(",")+"]";var t=tu.test(e.value),n=Qc.test(e.value),r=tu.test(e.value.replace(eu,""));if(e.modifiers){var i="",o="",s=[];for(var a in e.modifiers)if(ou[a])o+=ou[a],nu[a]&&s.push(a);else if("exact"===a){var c=e.modifiers;o+=iu(["ctrl","shift","alt","meta"].filter((function(e){return!c[e]})).map((function(e){return"$event."+e+"Key"})).join("||"))}else s.push(a);s.length&&(i+=cu(s)),o&&(i+=o);var u=t?"return "+e.value+"($event)":n?"return ("+e.value+")($event)":r?"return "+e.value:e.value;return"function($event){"+i+u+"}"}return t||n?e.value:"function($event){"+(r?"return "+e.value:e.value)+"}"}function cu(e){return"if(!$event.type.indexOf('key')&&"+e.map(uu).join("&&")+")return null;"}function uu(e){var t=parseInt(e,10);if(t)return"$event.keyCode!=="+t;var n=nu[e],r=ru[e];return"_k($event.keyCode,"+JSON.stringify(e)+","+JSON.stringify(n)+",$event.key,"+JSON.stringify(r)+")"}function fu(e,t){e.wrapListeners=function(e){return"_g("+e+","+t.value+")"}}function du(e,t){e.wrapData=function(n){return"_b("+n+",'"+e.tag+"',"+t.value+","+(t.modifiers&&t.modifiers.prop?"true":"false")+(t.modifiers&&t.modifiers.sync?",true":"")+")"}}var lu={on:fu,bind:du,cloak:j},pu=function(e){this.options=e,this.warn=e.warn||io,this.transforms=oo(e.modules,"transformCode"),this.dataGenFns=oo(e.modules,"genData"),this.directives=A(A({},lu),e.directives);var t=e.isReservedTag||N;this.maybeComponent=function(e){return!!e.component||!t(e.tag)},this.onceId=0,this.staticRenderFns=[],this.pre=!1};function hu(e,t){var n=new pu(t),r=e?mu(e,n):'_c("div")';return{render:"with(this){return "+r+"}",staticRenderFns:n.staticRenderFns}}function mu(e,t){if(e.parent&&(e.pre=e.pre||e.parent.pre),e.staticRoot&&!e.staticProcessed)return vu(e,t);if(e.once&&!e.onceProcessed)return gu(e,t);if(e.for&&!e.forProcessed)return _u(e,t);if(e.if&&!e.ifProcessed)return yu(e,t);if("template"!==e.tag||e.slotTarget||t.pre){if("slot"===e.tag)return ju(e,t);var n;if(e.component)n=Nu(e.component,e,t);else{var r;(!e.plain||e.pre&&t.maybeComponent(e))&&(r=wu(e,t));var i=e.inlineTemplate?null:Ou(e,t,!0);n="_c('"+e.tag+"'"+(r?","+r:"")+(i?","+i:"")+")"}for(var o=0;o<t.transforms.length;o++)n=t.transforms[o](e,n);return n}return Ou(e,t)||"void 0"}function vu(e,t){e.staticProcessed=!0;var n=t.pre;return e.pre&&(t.pre=e.pre),t.staticRenderFns.push("with(this){return "+mu(e,t)+"}"),t.pre=n,"_m("+(t.staticRenderFns.length-1)+(e.staticInFor?",true":"")+")"}function gu(e,t){if(e.onceProcessed=!0,e.if&&!e.ifProcessed)return yu(e,t);if(e.staticInFor){var n="",r=e.parent;while(r){if(r.for){n=r.key;break}r=r.parent}return n?"_o("+mu(e,t)+","+t.onceId+++","+n+")":mu(e,t)}return vu(e,t)}function yu(e,t,n,r){return e.ifProcessed=!0,bu(e.ifConditions.slice(),t,n,r)}function bu(e,t,n,r){if(!e.length)return r||"_e()";var i=e.shift();return i.exp?"("+i.exp+")?"+o(i.block)+":"+bu(e,t,n,r):""+o(i.block);function o(e){return n?n(e,t):e.once?gu(e,t):mu(e,t)}}function _u(e,t,n,r){var i=e.for,o=e.alias,s=e.iterator1?","+e.iterator1:"",a=e.iterator2?","+e.iterator2:"";return e.forProcessed=!0,(r||"_l")+"(("+i+"),function("+o+s+a+"){return "+(n||mu)(e,t)+"})"}function wu(e,t){var n="{",r=Su(e,t);r&&(n+=r+","),e.key&&(n+="key:"+e.key+","),e.ref&&(n+="ref:"+e.ref+","),e.refInFor&&(n+="refInFor:true,"),e.pre&&(n+="pre:true,"),e.component&&(n+='tag:"'+e.tag+'",');for(var i=0;i<t.dataGenFns.length;i++)n+=t.dataGenFns[i](e);if(e.attrs&&(n+="attrs:"+Lu(e.attrs)+","),e.props&&(n+="domProps:"+Lu(e.props)+","),e.events&&(n+=su(e.events,!1)+","),e.nativeEvents&&(n+=su(e.nativeEvents,!0)+","),e.slotTarget&&!e.slotScope&&(n+="slot:"+e.slotTarget+","),e.scopedSlots&&(n+=Cu(e,e.scopedSlots,t)+","),e.model&&(n+="model:{value:"+e.model.value+",callback:"+e.model.callback+",expression:"+e.model.expression+"},"),e.inlineTemplate){var o=xu(e,t);o&&(n+=o+",")}return n=n.replace(/,$/,"")+"}",e.dynamicAttrs&&(n="_b("+n+',"'+e.tag+'",'+Lu(e.dynamicAttrs)+")"),e.wrapData&&(n=e.wrapData(n)),e.wrapListeners&&(n=e.wrapListeners(n)),n}function Su(e,t){var n=e.directives;if(n){var r,i,o,s,a="directives:[",c=!1;for(r=0,i=n.length;r<i;r++){o=n[r],s=!0;var u=t.directives[o.name];u&&(s=!!u(e,o,t.warn)),s&&(c=!0,a+='{name:"'+o.name+'",rawName:"'+o.rawName+'"'+(o.value?",value:("+o.value+"),expression:"+JSON.stringify(o.value):"")+(o.arg?",arg:"+(o.isDynamicArg?o.arg:'"'+o.arg+'"'):"")+(o.modifiers?",modifiers:"+JSON.stringify(o.modifiers):"")+"},")}return c?a.slice(0,-1)+"]":void 0}}function xu(e,t){var n=e.children[0];if(n&&1===n.type){var r=hu(n,t.options);return"inlineTemplate:{render:function(){"+r.render+"},staticRenderFns:["+r.staticRenderFns.map((function(e){return"function(){"+e+"}"})).join(",")+"]}"}}function Cu(e,t,n){var r=e.for||Object.keys(t).some((function(e){var n=t[e];return n.slotTargetDynamic||n.if||n.for||Iu(n)})),i=!!e.if;if(!r){var o=e.parent;while(o){if(o.slotScope&&o.slotScope!==cc||o.for){r=!0;break}o.if&&(i=!0),o=o.parent}}var s=Object.keys(t).map((function(e){return Tu(t[e],n)})).join(",");return"scopedSlots:_u(["+s+"]"+(r?",null,true":"")+(!r&&i?",null,false,"+Eu(s):"")+")"}function Eu(e){var t=5381,n=e.length;while(n)t=33*t^e.charCodeAt(--n);return t>>>0}function Iu(e){return 1===e.type&&("slot"===e.tag||e.children.some(Iu))}function Tu(e,t){var n=e.attrsMap["slot-scope"];if(e.if&&!e.ifProcessed&&!n)return yu(e,t,Tu,"null");if(e.for&&!e.forProcessed)return _u(e,t,Tu);var r=e.slotScope===cc?"":String(e.slotScope),i="function("+r+"){return "+("template"===e.tag?e.if&&n?"("+e.if+")?"+(Ou(e,t)||"undefined")+":undefined":Ou(e,t)||"undefined":mu(e,t))+"}",o=r?"":",proxy:true";return"{key:"+(e.slotTarget||'"default"')+",fn:"+i+o+"}"}function Ou(e,t,n,r,i){var o=e.children;if(o.length){var s=o[0];if(1===o.length&&s.for&&"template"!==s.tag&&"slot"!==s.tag){var a=n?t.maybeComponent(s)?",1":",0":"";return""+(r||mu)(s,t)+a}var c=n?Ru(o,t.maybeComponent):0,u=i||Mu;return"["+o.map((function(e){return u(e,t)})).join(",")+"]"+(c?","+c:"")}}function Ru(e,t){for(var n=0,r=0;r<e.length;r++){var i=e[r];if(1===i.type){if(ku(i)||i.ifConditions&&i.ifConditions.some((function(e){return ku(e.block)}))){n=2;break}(t(i)||i.ifConditions&&i.ifConditions.some((function(e){return t(e.block)})))&&(n=1)}}return n}function ku(e){return void 0!==e.for||"template"===e.tag||"slot"===e.tag}function Mu(e,t){return 1===e.type?mu(e,t):3===e.type&&e.isComment?Pu(e):Au(e)}function Au(e){return"_v("+(2===e.type?e.expression:Du(JSON.stringify(e.text)))+")"}function Pu(e){return"_e("+JSON.stringify(e.text)+")"}function ju(e,t){var n=e.slotName||'"default"',r=Ou(e,t),i="_t("+n+(r?","+r:""),o=e.attrs||e.dynamicAttrs?Lu((e.attrs||[]).concat(e.dynamicAttrs||[]).map((function(e){return{name:C(e.name),value:e.value,dynamic:e.dynamic}}))):null,s=e.attrsMap["v-bind"];return!o&&!s||r||(i+=",null"),o&&(i+=","+o),s&&(i+=(o?"":",null")+","+s),i+")"}function Nu(e,t,n){var r=t.inlineTemplate?null:Ou(t,n,!0);return"_c("+e+","+wu(t,n)+(r?","+r:"")+")"}function Lu(e){for(var t="",n="",r=0;r<e.length;r++){var i=e[r],o=Du(i.value);i.dynamic?n+=i.name+","+o+",":t+='"'+i.name+'":'+o+","}return t="{"+t.slice(0,-1)+"}",n?"_d("+t+",["+n.slice(0,-1)+"])":t}function Du(e){return e.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}new RegExp("\\b"+"do,if,for,let,new,try,var,case,else,with,await,break,catch,class,const,super,throw,while,yield,delete,export,import,return,switch,default,extends,finally,continue,debugger,function,arguments".split(",").join("\\b|\\b")+"\\b"),new RegExp("\\b"+"delete,typeof,void".split(",").join("\\s*\\([^\\)]*\\)|\\b")+"\\s*\\([^\\)]*\\)");function Bu(e,t){try{return new Function(e)}catch(n){return t.push({err:n,code:e}),j}}function Uu(e){var t=Object.create(null);return function(n,r,i){r=A({},r);r.warn;delete r.warn;var o=r.delimiters?String(r.delimiters)+n:n;if(t[o])return t[o];var s=e(n,r);var a={},c=[];return a.render=Bu(s.render,c),a.staticRenderFns=s.staticRenderFns.map((function(e){return Bu(e,c)})),t[o]=a}}function Fu(e){return function(t){function n(n,r){var i=Object.create(t),o=[],s=[],a=function(e,t,n){(n?s:o).push(e)};if(r)for(var c in r.modules&&(i.modules=(t.modules||[]).concat(r.modules)),r.directives&&(i.directives=A(Object.create(t.directives||null),r.directives)),r)"modules"!==c&&"directives"!==c&&(i[c]=r[c]);i.warn=a;var u=e(n.trim(),i);return u.errors=o,u.tips=s,u}return{compile:n,compileToFunctions:Uu(n)}}}var Vu,Wu=Fu((function(e,t){var n=fc(e.trim(),t);!1!==t.optimize&&Hc(n,t);var r=hu(n,t);return{ast:n,render:r.render,staticRenderFns:r.staticRenderFns}})),qu=Wu(Gc),$u=(qu.compile,qu.compileToFunctions);function Gu(e){return Vu=Vu||document.createElement("div"),Vu.innerHTML=e?'<a href="\n"/>':'<div a="\n"/>',Vu.innerHTML.indexOf("&#10;")>0}var zu=!!Z&&Gu(!1),Hu=!!Z&&Gu(!0),Ku=S((function(e){var t=pi(e);return t&&t.innerHTML})),Ju=Er.prototype.$mount;function Yu(e){if(e.outerHTML)return e.outerHTML;var t=document.createElement("div");return t.appendChild(e.cloneNode(!0)),t.innerHTML}Er.prototype.$mount=function(e,t){if(e=e&&pi(e),e===document.body||e===document.documentElement)return this;var n=this.$options;if(!n.render){var r=n.template;if(r)if("string"===typeof r)"#"===r.charAt(0)&&(r=Ku(r));else{if(!r.nodeType)return this;r=r.innerHTML}else e&&(r=Yu(e));if(r){0;var i=$u(r,{outputSourceRange:!1,shouldDecodeNewlines:zu,shouldDecodeNewlinesForHref:Hu,delimiters:n.delimiters,comments:n.comments},this),o=i.render,s=i.staticRenderFns;n.render=o,n.staticRenderFns=s}}return Ju.call(this,e,t)},Er.compile=$u,t["default"]=Er}.call(this,n("c8ba"))},a078:function(e,t,n){var r=n("7b0b"),i=n("50c4"),o=n("35a1"),s=n("e95a"),a=n("0366"),c=n("ebb5").aTypedArrayConstructor;e.exports=function(e){var t,n,u,f,d,l,p=r(e),h=arguments.length,m=h>1?arguments[1]:void 0,v=void 0!==m,g=o(p);if(void 0!=g&&!s(g)){d=g.call(p),l=d.next,p=[];while(!(f=l.call(d)).done)p.push(f.value)}for(v&&h>2&&(m=a(m,arguments[2],2)),n=i(p.length),u=new(c(this))(n),t=0;n>t;t++)u[t]=v?m(p[t],t):p[t];return u}},a15e:function(e,t,n){"use strict";n.r(t);var r=n("41b2"),i=n.n(r),o=n("1098"),s=n.n(o),a=/%[sdj%]/g,c=function(){};function u(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=1,i=t[0],o=t.length;if("function"===typeof i)return i.apply(null,t.slice(1));if("string"===typeof i){for(var s=String(i).replace(a,(function(e){if("%%"===e)return"%";if(r>=o)return e;switch(e){case"%s":return String(t[r++]);case"%d":return Number(t[r++]);case"%j":try{return JSON.stringify(t[r++])}catch(n){return"[Circular]"}break;default:return e}})),c=t[r];r<o;c=t[++r])s+=" "+c;return s}return i}function f(e){return"string"===e||"url"===e||"hex"===e||"email"===e||"pattern"===e}function d(e,t){return void 0===e||null===e||(!("array"!==t||!Array.isArray(e)||e.length)||!(!f(t)||"string"!==typeof e||e))}function l(e,t,n){var r=[],i=0,o=e.length;function s(e){r.push.apply(r,e),i++,i===o&&n(r)}e.forEach((function(e){t(e,s)}))}function p(e,t,n){var r=0,i=e.length;function o(s){if(s&&s.length)n(s);else{var a=r;r+=1,a<i?t(e[a],o):n([])}}o([])}function h(e){var t=[];return Object.keys(e).forEach((function(n){t.push.apply(t,e[n])})),t}function m(e,t,n,r){if(t.first){var i=h(e);return p(i,n,r)}var o=t.firstFields||[];!0===o&&(o=Object.keys(e));var s=Object.keys(e),a=s.length,c=0,u=[],f=function(e){u.push.apply(u,e),c++,c===a&&r(u)};s.forEach((function(t){var r=e[t];-1!==o.indexOf(t)?p(r,n,f):l(r,n,f)}))}function v(e){return function(t){return t&&t.message?(t.field=t.field||e.fullField,t):{message:t,field:t.field||e.fullField}}}function g(e,t){if(t)for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];"object"===("undefined"===typeof r?"undefined":s()(r))&&"object"===s()(e[n])?e[n]=i()({},e[n],r):e[n]=r}return e}function y(e,t,n,r,i,o){!e.required||n.hasOwnProperty(e.field)&&!d(t,o||e.type)||r.push(u(i.messages.required,e.fullField))}var b=y;function _(e,t,n,r,i){(/^\s+$/.test(t)||""===t)&&r.push(u(i.messages.whitespace,e.fullField))}var w=_,S={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,url:new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i"),hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},x={integer:function(e){return x.number(e)&&parseInt(e,10)===e},float:function(e){return x.number(e)&&!x.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch(t){return!1}},date:function(e){return"function"===typeof e.getTime&&"function"===typeof e.getMonth&&"function"===typeof e.getYear},number:function(e){return!isNaN(e)&&"number"===typeof e},object:function(e){return"object"===("undefined"===typeof e?"undefined":s()(e))&&!x.array(e)},method:function(e){return"function"===typeof e},email:function(e){return"string"===typeof e&&!!e.match(S.email)&&e.length<255},url:function(e){return"string"===typeof e&&!!e.match(S.url)},hex:function(e){return"string"===typeof e&&!!e.match(S.hex)}};function C(e,t,n,r,i){if(e.required&&void 0===t)b(e,t,n,r,i);else{var o=["integer","float","array","regexp","object","method","email","number","date","url","hex"],a=e.type;o.indexOf(a)>-1?x[a](t)||r.push(u(i.messages.types[a],e.fullField,e.type)):a&&("undefined"===typeof t?"undefined":s()(t))!==e.type&&r.push(u(i.messages.types[a],e.fullField,e.type))}}var E=C;function I(e,t,n,r,i){var o="number"===typeof e.len,s="number"===typeof e.min,a="number"===typeof e.max,c=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,f=t,d=null,l="number"===typeof t,p="string"===typeof t,h=Array.isArray(t);if(l?d="number":p?d="string":h&&(d="array"),!d)return!1;h&&(f=t.length),p&&(f=t.replace(c,"_").length),o?f!==e.len&&r.push(u(i.messages[d].len,e.fullField,e.len)):s&&!a&&f<e.min?r.push(u(i.messages[d].min,e.fullField,e.min)):a&&!s&&f>e.max?r.push(u(i.messages[d].max,e.fullField,e.max)):s&&a&&(f<e.min||f>e.max)&&r.push(u(i.messages[d].range,e.fullField,e.min,e.max))}var T=I,O="enum";function R(e,t,n,r,i){e[O]=Array.isArray(e[O])?e[O]:[],-1===e[O].indexOf(t)&&r.push(u(i.messages[O],e.fullField,e[O].join(", ")))}var k=R;function M(e,t,n,r,i){if(e.pattern)if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(t)||r.push(u(i.messages.pattern.mismatch,e.fullField,t,e.pattern));else if("string"===typeof e.pattern){var o=new RegExp(e.pattern);o.test(t)||r.push(u(i.messages.pattern.mismatch,e.fullField,t,e.pattern))}}var A=M,P={required:b,whitespace:w,type:E,range:T,enum:k,pattern:A};function j(e,t,n,r,i){var o=[],s=e.required||!e.required&&r.hasOwnProperty(e.field);if(s){if(d(t,"string")&&!e.required)return n();P.required(e,t,r,o,i,"string"),d(t,"string")||(P.type(e,t,r,o,i),P.range(e,t,r,o,i),P.pattern(e,t,r,o,i),!0===e.whitespace&&P.whitespace(e,t,r,o,i))}n(o)}var N=j;function L(e,t,n,r,i){var o=[],s=e.required||!e.required&&r.hasOwnProperty(e.field);if(s){if(d(t)&&!e.required)return n();P.required(e,t,r,o,i),void 0!==t&&P.type(e,t,r,o,i)}n(o)}var D=L;function B(e,t,n,r,i){var o=[],s=e.required||!e.required&&r.hasOwnProperty(e.field);if(s){if(d(t)&&!e.required)return n();P.required(e,t,r,o,i),void 0!==t&&(P.type(e,t,r,o,i),P.range(e,t,r,o,i))}n(o)}var U=B;function F(e,t,n,r,i){var o=[],s=e.required||!e.required&&r.hasOwnProperty(e.field);if(s){if(d(t)&&!e.required)return n();P.required(e,t,r,o,i),void 0!==t&&P.type(e,t,r,o,i)}n(o)}var V=F;function W(e,t,n,r,i){var o=[],s=e.required||!e.required&&r.hasOwnProperty(e.field);if(s){if(d(t)&&!e.required)return n();P.required(e,t,r,o,i),d(t)||P.type(e,t,r,o,i)}n(o)}var q=W;function $(e,t,n,r,i){var o=[],s=e.required||!e.required&&r.hasOwnProperty(e.field);if(s){if(d(t)&&!e.required)return n();P.required(e,t,r,o,i),void 0!==t&&(P.type(e,t,r,o,i),P.range(e,t,r,o,i))}n(o)}var G=$;function z(e,t,n,r,i){var o=[],s=e.required||!e.required&&r.hasOwnProperty(e.field);if(s){if(d(t)&&!e.required)return n();P.required(e,t,r,o,i),void 0!==t&&(P.type(e,t,r,o,i),P.range(e,t,r,o,i))}n(o)}var H=z;function K(e,t,n,r,i){var o=[],s=e.required||!e.required&&r.hasOwnProperty(e.field);if(s){if(d(t,"array")&&!e.required)return n();P.required(e,t,r,o,i,"array"),d(t,"array")||(P.type(e,t,r,o,i),P.range(e,t,r,o,i))}n(o)}var J=K;function Y(e,t,n,r,i){var o=[],s=e.required||!e.required&&r.hasOwnProperty(e.field);if(s){if(d(t)&&!e.required)return n();P.required(e,t,r,o,i),void 0!==t&&P.type(e,t,r,o,i)}n(o)}var X=Y,Z="enum";function Q(e,t,n,r,i){var o=[],s=e.required||!e.required&&r.hasOwnProperty(e.field);if(s){if(d(t)&&!e.required)return n();P.required(e,t,r,o,i),t&&P[Z](e,t,r,o,i)}n(o)}var ee=Q;function te(e,t,n,r,i){var o=[],s=e.required||!e.required&&r.hasOwnProperty(e.field);if(s){if(d(t,"string")&&!e.required)return n();P.required(e,t,r,o,i),d(t,"string")||P.pattern(e,t,r,o,i)}n(o)}var ne=te;function re(e,t,n,r,i){var o=[],s=e.required||!e.required&&r.hasOwnProperty(e.field);if(s){if(d(t)&&!e.required)return n();if(P.required(e,t,r,o,i),!d(t)){var a=void 0;a="number"===typeof t?new Date(t):t,P.type(e,a,r,o,i),a&&P.range(e,a.getTime(),r,o,i)}}n(o)}var ie=re;function oe(e,t,n,r,i){var o=[],a=Array.isArray(t)?"array":"undefined"===typeof t?"undefined":s()(t);P.required(e,t,r,o,i,a),n(o)}var se=oe;function ae(e,t,n,r,i){var o=e.type,s=[],a=e.required||!e.required&&r.hasOwnProperty(e.field);if(a){if(d(t,o)&&!e.required)return n();P.required(e,t,r,s,i,o),d(t,o)||P.type(e,t,r,s,i)}n(s)}var ce=ae,ue={string:N,method:D,number:U,boolean:V,regexp:q,integer:G,float:H,array:J,object:X,enum:ee,pattern:ne,date:ie,url:ce,hex:ce,email:ce,required:se};function fe(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var de=fe();function le(e){this.rules=null,this._messages=de,this.define(e)}le.prototype={messages:function(e){return e&&(this._messages=g(fe(),e)),this._messages},define:function(e){if(!e)throw new Error("Cannot configure a schema with no rules");if("object"!==("undefined"===typeof e?"undefined":s()(e))||Array.isArray(e))throw new Error("Rules must be an object");this.rules={};var t=void 0,n=void 0;for(t in e)e.hasOwnProperty(t)&&(n=e[t],this.rules[t]=Array.isArray(n)?n:[n])},validate:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments[2],o=e,a=n,f=r;if("function"===typeof a&&(f=a,a={}),this.rules&&0!==Object.keys(this.rules).length){if(a.messages){var d=this.messages();d===de&&(d=fe()),g(d,a.messages),a.messages=d}else a.messages=this.messages();var l=void 0,p=void 0,h={},y=a.keys||Object.keys(this.rules);y.forEach((function(n){l=t.rules[n],p=o[n],l.forEach((function(r){var s=r;"function"===typeof s.transform&&(o===e&&(o=i()({},o)),p=o[n]=s.transform(p)),s="function"===typeof s?{validator:s}:i()({},s),s.validator=t.getValidationMethod(s),s.field=n,s.fullField=s.fullField||n,s.type=t.getType(s),s.validator&&(h[n]=h[n]||[],h[n].push({rule:s,value:p,source:o,field:n}))}))}));var b={};m(h,a,(function(e,t){var n=e.rule,r=("object"===n.type||"array"===n.type)&&("object"===s()(n.fields)||"object"===s()(n.defaultField));function o(e,t){return i()({},t,{fullField:n.fullField+"."+e})}function f(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],f=s;if(Array.isArray(f)||(f=[f]),f.length&&c("async-validator:",f),f.length&&n.message&&(f=[].concat(n.message)),f=f.map(v(n)),a.first&&f.length)return b[n.field]=1,t(f);if(r){if(n.required&&!e.value)return f=n.message?[].concat(n.message).map(v(n)):a.error?[a.error(n,u(a.messages.required,n.field))]:[],t(f);var d={};if(n.defaultField)for(var l in e.value)e.value.hasOwnProperty(l)&&(d[l]=n.defaultField);for(var p in d=i()({},d,e.rule.fields),d)if(d.hasOwnProperty(p)){var h=Array.isArray(d[p])?d[p]:[d[p]];d[p]=h.map(o.bind(null,p))}var m=new le(d);m.messages(a.messages),e.rule.options&&(e.rule.options.messages=a.messages,e.rule.options.error=a.error),m.validate(e.value,e.rule.options||a,(function(e){t(e&&e.length?f.concat(e):e)}))}else t(f)}r=r&&(n.required||!n.required&&e.value),n.field=e.field;var d=n.validator(n,e.value,f,e.source,a);d&&d.then&&d.then((function(){return f()}),(function(e){return f(e)}))}),(function(e){_(e)}))}else f&&f();function _(e){var t=void 0,n=void 0,r=[],i={};function o(e){Array.isArray(e)?r=r.concat.apply(r,e):r.push(e)}for(t=0;t<e.length;t++)o(e[t]);if(r.length)for(t=0;t<r.length;t++)n=r[t].field,i[n]=i[n]||[],i[n].push(r[t]);else r=null,i=null;f(r,i)}},getType:function(e){if(void 0===e.type&&e.pattern instanceof RegExp&&(e.type="pattern"),"function"!==typeof e.validator&&e.type&&!ue.hasOwnProperty(e.type))throw new Error(u("Unknown rule type %s",e.type));return e.type||"string"},getValidationMethod:function(e){if("function"===typeof e.validator)return e.validator;var t=Object.keys(e),n=t.indexOf("message");return-1!==n&&t.splice(n,1),1===t.length&&"required"===t[0]?ue.required:ue[this.getType(e)]||!1}},le.register=function(e,t){if("function"!==typeof t)throw new Error("Cannot register a validator by type, validator is not a function");ue[e]=t},le.messages=de;t["default"]=le},a3de:function(e,t,n){"use strict";var r=!("undefined"===typeof window||!window.document||!window.document.createElement),i={canUseDOM:r,canUseWorkers:"undefined"!==typeof Worker,canUseEventListeners:r&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:r&&!!window.screen,isInWorker:!r};e.exports=i},a4d3:function(e,t,n){"use strict";var r=n("23e7"),i=n("da84"),o=n("d066"),s=n("c430"),a=n("83ab"),c=n("4930"),u=n("fdbf"),f=n("d039"),d=n("5135"),l=n("e8b5"),p=n("861d"),h=n("825a"),m=n("7b0b"),v=n("fc6a"),g=n("c04e"),y=n("5c6c"),b=n("7c73"),_=n("df75"),w=n("241c"),S=n("057f"),x=n("7418"),C=n("06cf"),E=n("9bf2"),I=n("d1e7"),T=n("9112"),O=n("6eeb"),R=n("5692"),k=n("f772"),M=n("d012"),A=n("90e3"),P=n("b622"),j=n("e538"),N=n("746f"),L=n("d44e"),D=n("69f3"),B=n("b727").forEach,U=k("hidden"),F="Symbol",V="prototype",W=P("toPrimitive"),q=D.set,$=D.getterFor(F),G=Object[V],z=i.Symbol,H=o("JSON","stringify"),K=C.f,J=E.f,Y=S.f,X=I.f,Z=R("symbols"),Q=R("op-symbols"),ee=R("string-to-symbol-registry"),te=R("symbol-to-string-registry"),ne=R("wks"),re=i.QObject,ie=!re||!re[V]||!re[V].findChild,oe=a&&f((function(){return 7!=b(J({},"a",{get:function(){return J(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=K(G,t);r&&delete G[t],J(e,t,n),r&&e!==G&&J(G,t,r)}:J,se=function(e,t){var n=Z[e]=b(z[V]);return q(n,{type:F,tag:e,description:t}),a||(n.description=t),n},ae=u?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof z},ce=function(e,t,n){e===G&&ce(Q,t,n),h(e);var r=g(t,!0);return h(n),d(Z,r)?(n.enumerable?(d(e,U)&&e[U][r]&&(e[U][r]=!1),n=b(n,{enumerable:y(0,!1)})):(d(e,U)||J(e,U,y(1,{})),e[U][r]=!0),oe(e,r,n)):J(e,r,n)},ue=function(e,t){h(e);var n=v(t),r=_(n).concat(he(n));return B(r,(function(t){a&&!de.call(n,t)||ce(e,t,n[t])})),e},fe=function(e,t){return void 0===t?b(e):ue(b(e),t)},de=function(e){var t=g(e,!0),n=X.call(this,t);return!(this===G&&d(Z,t)&&!d(Q,t))&&(!(n||!d(this,t)||!d(Z,t)||d(this,U)&&this[U][t])||n)},le=function(e,t){var n=v(e),r=g(t,!0);if(n!==G||!d(Z,r)||d(Q,r)){var i=K(n,r);return!i||!d(Z,r)||d(n,U)&&n[U][r]||(i.enumerable=!0),i}},pe=function(e){var t=Y(v(e)),n=[];return B(t,(function(e){d(Z,e)||d(M,e)||n.push(e)})),n},he=function(e){var t=e===G,n=Y(t?Q:v(e)),r=[];return B(n,(function(e){!d(Z,e)||t&&!d(G,e)||r.push(Z[e])})),r};if(c||(z=function(){if(this instanceof z)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=A(e),n=function(e){this===G&&n.call(Q,e),d(this,U)&&d(this[U],t)&&(this[U][t]=!1),oe(this,t,y(1,e))};return a&&ie&&oe(G,t,{configurable:!0,set:n}),se(t,e)},O(z[V],"toString",(function(){return $(this).tag})),O(z,"withoutSetter",(function(e){return se(A(e),e)})),I.f=de,E.f=ce,C.f=le,w.f=S.f=pe,x.f=he,j.f=function(e){return se(P(e),e)},a&&(J(z[V],"description",{configurable:!0,get:function(){return $(this).description}}),s||O(G,"propertyIsEnumerable",de,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!c,sham:!c},{Symbol:z}),B(_(ne),(function(e){N(e)})),r({target:F,stat:!0,forced:!c},{for:function(e){var t=String(e);if(d(ee,t))return ee[t];var n=z(t);return ee[t]=n,te[n]=t,n},keyFor:function(e){if(!ae(e))throw TypeError(e+" is not a symbol");if(d(te,e))return te[e]},useSetter:function(){ie=!0},useSimple:function(){ie=!1}}),r({target:"Object",stat:!0,forced:!c,sham:!a},{create:fe,defineProperty:ce,defineProperties:ue,getOwnPropertyDescriptor:le}),r({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:pe,getOwnPropertySymbols:he}),r({target:"Object",stat:!0,forced:f((function(){x.f(1)}))},{getOwnPropertySymbols:function(e){return x.f(m(e))}}),H){var me=!c||f((function(){var e=z();return"[null]"!=H([e])||"{}"!=H({a:e})||"{}"!=H(Object(e))}));r({target:"JSON",stat:!0,forced:me},{stringify:function(e,t,n){var r,i=[e],o=1;while(arguments.length>o)i.push(arguments[o++]);if(r=t,(p(t)||void 0!==e)&&!ae(e))return l(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!ae(t))return t}),i[1]=t,H.apply(null,i)}})}z[V][W]||T(z[V],W,z[V].valueOf),L(z,F),M[U]=!0},a5d8:function(e,t,n){},a640:function(e,t,n){"use strict";var r=n("d039");e.exports=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){throw 1},1)}))}},a691:function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},a78e:function(e,t,n){var r,i;
/*!
 * JavaScript Cookie v2.2.0
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */(function(o){var s=!1;if(r=o,i="function"===typeof r?r.call(t,n,t,e):r,void 0===i||(e.exports=i),s=!0,e.exports=o(),s=!0,!s){var a=window.Cookies,c=window.Cookies=o();c.noConflict=function(){return window.Cookies=a,c}}})((function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function t(n){function r(t,i,o){var s;if("undefined"!==typeof document){if(arguments.length>1){if(o=e({path:"/"},r.defaults,o),"number"===typeof o.expires){var a=new Date;a.setMilliseconds(a.getMilliseconds()+864e5*o.expires),o.expires=a}o.expires=o.expires?o.expires.toUTCString():"";try{s=JSON.stringify(i),/^[\{\[]/.test(s)&&(i=s)}catch(v){}i=n.write?n.write(i,t):encodeURIComponent(String(i)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)),t=t.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),t=t.replace(/[\(\)]/g,escape);var c="";for(var u in o)o[u]&&(c+="; "+u,!0!==o[u]&&(c+="="+o[u]));return document.cookie=t+"="+i+c}t||(s={});for(var f=document.cookie?document.cookie.split("; "):[],d=/(%[0-9A-Z]{2})+/g,l=0;l<f.length;l++){var p=f[l].split("="),h=p.slice(1).join("=");this.json||'"'!==h.charAt(0)||(h=h.slice(1,-1));try{var m=p[0].replace(d,decodeURIComponent);if(h=n.read?n.read(h,m):n(h,m)||h.replace(d,decodeURIComponent),this.json)try{h=JSON.parse(h)}catch(v){}if(t===m){s=h;break}t||(s[m]=h)}catch(v){}}return s}}return r.set=r,r.get=function(e){return r.call(r,e)},r.getJSON=function(){return r.apply({json:!0},[].slice.call(arguments))},r.defaults={},r.remove=function(t,n){r(t,"",e(n,{expires:-1}))},r.withConverter=t,r}return t((function(){}))}))},a79d:function(e,t,n){"use strict";var r=n("23e7"),i=n("c430"),o=n("fea9"),s=n("d039"),a=n("d066"),c=n("4840"),u=n("cdf9"),f=n("6eeb"),d=!!o&&s((function(){o.prototype["finally"].call({then:function(){}},(function(){}))}));r({target:"Promise",proto:!0,real:!0,forced:d},{finally:function(e){var t=c(this,a("Promise")),n="function"==typeof e;return this.then(n?function(n){return u(t,e()).then((function(){return n}))}:e,n?function(n){return u(t,e()).then((function(){throw n}))}:e)}}),i||"function"!=typeof o||o.prototype["finally"]||f(o.prototype,"finally",a("Promise").prototype["finally"])},a975:function(e,t,n){"use strict";var r=n("ebb5"),i=n("b727").every,o=r.aTypedArray,s=r.exportTypedArrayMethod;s("every",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},a981:function(e,t){e.exports="undefined"!==typeof ArrayBuffer&&"undefined"!==typeof DataView},a9e3:function(e,t,n){"use strict";var r=n("83ab"),i=n("da84"),o=n("94ca"),s=n("6eeb"),a=n("5135"),c=n("c6b6"),u=n("7156"),f=n("c04e"),d=n("d039"),l=n("7c73"),p=n("241c").f,h=n("06cf").f,m=n("9bf2").f,v=n("58a8").trim,g="Number",y=i[g],b=y.prototype,_=c(l(b))==g,w=function(e){var t,n,r,i,o,s,a,c,u=f(e,!1);if("string"==typeof u&&u.length>2)if(u=v(u),t=u.charCodeAt(0),43===t||45===t){if(n=u.charCodeAt(2),88===n||120===n)return NaN}else if(48===t){switch(u.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+u}for(o=u.slice(2),s=o.length,a=0;a<s;a++)if(c=o.charCodeAt(a),c<48||c>i)return NaN;return parseInt(o,r)}return+u};if(o(g,!y(" 0o1")||!y("0b1")||y("+0x1"))){for(var S,x=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof x&&(_?d((function(){b.valueOf.call(n)})):c(n)!=g)?u(new y(w(t)),n,x):w(t)},C=r?p(y):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),E=0;C.length>E;E++)a(y,S=C[E])&&!a(x,S)&&m(x,S,h(y,S));x.prototype=b,b.constructor=x,s(i,g,x)}},aa47:function(e,t,n){"use strict";
/**!
 * Sortable 1.10.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */
function r(e){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){i(e,t,n[t])}))}return e}function a(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function c(e,t){if(null==e)return{};var n,r,i=a(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function u(e){return f(e)||d(e)||l()}function f(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function d(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance")}n.r(t),n.d(t,"MultiDrag",(function(){return Bt})),n.d(t,"Sortable",(function(){return Ze})),n.d(t,"Swap",(function(){return It}));var p="1.10.2";function h(e){if("undefined"!==typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var m=h(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),v=h(/Edge/i),g=h(/firefox/i),y=h(/safari/i)&&!h(/chrome/i)&&!h(/android/i),b=h(/iP(ad|od|hone)/i),_=h(/chrome/i)&&h(/android/i),w={capture:!1,passive:!1};function S(e,t,n){e.addEventListener(t,n,!m&&w)}function x(e,t,n){e.removeEventListener(t,n,!m&&w)}function C(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(n){return!1}return!1}}function E(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function I(e,t,n,r){if(e){n=n||document;do{if(null!=t&&(">"===t[0]?e.parentNode===n&&C(e,t):C(e,t))||r&&e===n)return e;if(e===n)break}while(e=E(e))}return null}var T,O=/\s+/g;function R(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var r=(" "+e.className+" ").replace(O," ").replace(" "+t+" "," ");e.className=(r+(n?" "+t:"")).replace(O," ")}}function k(e,t,n){var r=e&&e.style;if(r){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in r||-1!==t.indexOf("webkit")||(t="-webkit-"+t),r[t]=n+("string"===typeof n?"":"px")}}function M(e,t){var n="";if("string"===typeof e)n=e;else do{var r=k(e,"transform");r&&"none"!==r&&(n=r+" "+n)}while(!t&&(e=e.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function A(e,t,n){if(e){var r=e.getElementsByTagName(t),i=0,o=r.length;if(n)for(;i<o;i++)n(r[i],i);return r}return[]}function P(){var e=document.scrollingElement;return e||document.documentElement}function j(e,t,n,r,i){if(e.getBoundingClientRect||e===window){var o,s,a,c,u,f,d;if(e!==window&&e!==P()?(o=e.getBoundingClientRect(),s=o.top,a=o.left,c=o.bottom,u=o.right,f=o.height,d=o.width):(s=0,a=0,c=window.innerHeight,u=window.innerWidth,f=window.innerHeight,d=window.innerWidth),(t||n)&&e!==window&&(i=i||e.parentNode,!m))do{if(i&&i.getBoundingClientRect&&("none"!==k(i,"transform")||n&&"static"!==k(i,"position"))){var l=i.getBoundingClientRect();s-=l.top+parseInt(k(i,"border-top-width")),a-=l.left+parseInt(k(i,"border-left-width")),c=s+o.height,u=a+o.width;break}}while(i=i.parentNode);if(r&&e!==window){var p=M(i||e),h=p&&p.a,v=p&&p.d;p&&(s/=v,a/=h,d/=h,f/=v,c=s+f,u=a+d)}return{top:s,left:a,bottom:c,right:u,width:d,height:f}}}function N(e,t,n){var r=V(e,!0),i=j(e)[t];while(r){var o=j(r)[n],s=void 0;if(s="top"===n||"left"===n?i>=o:i<=o,!s)return r;if(r===P())break;r=V(r,!1)}return!1}function L(e,t,n){var r=0,i=0,o=e.children;while(i<o.length){if("none"!==o[i].style.display&&o[i]!==Ze.ghost&&o[i]!==Ze.dragged&&I(o[i],n.draggable,e,!1)){if(r===t)return o[i];r++}i++}return null}function D(e,t){var n=e.lastElementChild;while(n&&(n===Ze.ghost||"none"===k(n,"display")||t&&!C(n,t)))n=n.previousElementSibling;return n||null}function B(e,t){var n=0;if(!e||!e.parentNode)return-1;while(e=e.previousElementSibling)"TEMPLATE"===e.nodeName.toUpperCase()||e===Ze.clone||t&&!C(e,t)||n++;return n}function U(e){var t=0,n=0,r=P();if(e)do{var i=M(e),o=i.a,s=i.d;t+=e.scrollLeft*o,n+=e.scrollTop*s}while(e!==r&&(e=e.parentNode));return[t,n]}function F(e,t){for(var n in e)if(e.hasOwnProperty(n))for(var r in t)if(t.hasOwnProperty(r)&&t[r]===e[n][r])return Number(n);return-1}function V(e,t){if(!e||!e.getBoundingClientRect)return P();var n=e,r=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=k(n);if(n.clientWidth<n.scrollWidth&&("auto"==i.overflowX||"scroll"==i.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==i.overflowY||"scroll"==i.overflowY)){if(!n.getBoundingClientRect||n===document.body)return P();if(r||t)return n;r=!0}}}while(n=n.parentNode);return P()}function W(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function q(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function $(e,t){return function(){if(!T){var n=arguments,r=this;1===n.length?e.call(r,n[0]):e.apply(r,n),T=setTimeout((function(){T=void 0}),t)}}}function G(){clearTimeout(T),T=void 0}function z(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function H(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function K(e,t){k(e,"position","absolute"),k(e,"top",t.top),k(e,"left",t.left),k(e,"width",t.width),k(e,"height",t.height)}function J(e){k(e,"position",""),k(e,"top",""),k(e,"left",""),k(e,"width",""),k(e,"height","")}var Y="Sortable"+(new Date).getTime();function X(){var e,t=[];return{captureAnimationState:function(){if(t=[],this.options.animation){var e=[].slice.call(this.el.children);e.forEach((function(e){if("none"!==k(e,"display")&&e!==Ze.ghost){t.push({target:e,rect:j(e)});var n=s({},t[t.length-1].rect);if(e.thisAnimationDuration){var r=M(e,!0);r&&(n.top-=r.f,n.left-=r.e)}e.fromRect=n}}))}},addAnimationState:function(e){t.push(e)},removeAnimationState:function(e){t.splice(F(t,{target:e}),1)},animateAll:function(n){var r=this;if(!this.options.animation)return clearTimeout(e),void("function"===typeof n&&n());var i=!1,o=0;t.forEach((function(e){var t=0,n=e.target,s=n.fromRect,a=j(n),c=n.prevFromRect,u=n.prevToRect,f=e.rect,d=M(n,!0);d&&(a.top-=d.f,a.left-=d.e),n.toRect=a,n.thisAnimationDuration&&q(c,a)&&!q(s,a)&&(f.top-a.top)/(f.left-a.left)===(s.top-a.top)/(s.left-a.left)&&(t=Q(f,c,u,r.options)),q(a,s)||(n.prevFromRect=s,n.prevToRect=a,t||(t=r.options.animation),r.animate(n,f,a,t)),t&&(i=!0,o=Math.max(o,t),clearTimeout(n.animationResetTimer),n.animationResetTimer=setTimeout((function(){n.animationTime=0,n.prevFromRect=null,n.fromRect=null,n.prevToRect=null,n.thisAnimationDuration=null}),t),n.thisAnimationDuration=t)})),clearTimeout(e),i?e=setTimeout((function(){"function"===typeof n&&n()}),o):"function"===typeof n&&n(),t=[]},animate:function(e,t,n,r){if(r){k(e,"transition",""),k(e,"transform","");var i=M(this.el),o=i&&i.a,s=i&&i.d,a=(t.left-n.left)/(o||1),c=(t.top-n.top)/(s||1);e.animatingX=!!a,e.animatingY=!!c,k(e,"transform","translate3d("+a+"px,"+c+"px,0)"),Z(e),k(e,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),k(e,"transform","translate3d(0,0,0)"),"number"===typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout((function(){k(e,"transition",""),k(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1}),r)}}}}function Z(e){return e.offsetWidth}function Q(e,t,n,r){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*r.animation}var ee=[],te={initializeByDefault:!0},ne={mount:function(e){for(var t in te)te.hasOwnProperty(t)&&!(t in e)&&(e[t]=te[t]);ee.push(e)},pluginEvent:function(e,t,n){var r=this;this.eventCanceled=!1,n.cancel=function(){r.eventCanceled=!0};var i=e+"Global";ee.forEach((function(r){t[r.pluginName]&&(t[r.pluginName][i]&&t[r.pluginName][i](s({sortable:t},n)),t.options[r.pluginName]&&t[r.pluginName][e]&&t[r.pluginName][e](s({sortable:t},n)))}))},initializePlugins:function(e,t,n,r){for(var i in ee.forEach((function(r){var i=r.pluginName;if(e.options[i]||r.initializeByDefault){var s=new r(e,t,e.options);s.sortable=e,s.options=e.options,e[i]=s,o(n,s.defaults)}})),e.options)if(e.options.hasOwnProperty(i)){var s=this.modifyOption(e,i,e.options[i]);"undefined"!==typeof s&&(e.options[i]=s)}},getEventProperties:function(e,t){var n={};return ee.forEach((function(r){"function"===typeof r.eventProperties&&o(n,r.eventProperties.call(t[r.pluginName],e))})),n},modifyOption:function(e,t,n){var r;return ee.forEach((function(i){e[i.pluginName]&&i.optionListeners&&"function"===typeof i.optionListeners[t]&&(r=i.optionListeners[t].call(e[i.pluginName],n))})),r}};function re(e){var t=e.sortable,n=e.rootEl,r=e.name,i=e.targetEl,o=e.cloneEl,a=e.toEl,c=e.fromEl,u=e.oldIndex,f=e.newIndex,d=e.oldDraggableIndex,l=e.newDraggableIndex,p=e.originalEvent,h=e.putSortable,g=e.extraEventProperties;if(t=t||n&&n[Y],t){var y,b=t.options,_="on"+r.charAt(0).toUpperCase()+r.substr(1);!window.CustomEvent||m||v?(y=document.createEvent("Event"),y.initEvent(r,!0,!0)):y=new CustomEvent(r,{bubbles:!0,cancelable:!0}),y.to=a||n,y.from=c||n,y.item=i||n,y.clone=o,y.oldIndex=u,y.newIndex=f,y.oldDraggableIndex=d,y.newDraggableIndex=l,y.originalEvent=p,y.pullMode=h?h.lastPutMode:void 0;var w=s({},g,ne.getEventProperties(r,t));for(var S in w)y[S]=w[S];n&&n.dispatchEvent(y),b[_]&&b[_].call(t,y)}}var ie=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.evt,i=c(n,["evt"]);ne.pluginEvent.bind(Ze)(e,t,s({dragEl:se,parentEl:ae,ghostEl:ce,rootEl:ue,nextEl:fe,lastDownEl:de,cloneEl:le,cloneHidden:pe,dragStarted:Ie,putSortable:be,activeSortable:Ze.active,originalEvent:r,oldIndex:he,oldDraggableIndex:ve,newIndex:me,newDraggableIndex:ge,hideGhostForTarget:Ke,unhideGhostForTarget:Je,cloneNowHidden:function(){pe=!0},cloneNowShown:function(){pe=!1},dispatchSortableEvent:function(e){oe({sortable:t,name:e,originalEvent:r})}},i))};function oe(e){re(s({putSortable:be,cloneEl:le,targetEl:se,rootEl:ue,oldIndex:he,oldDraggableIndex:ve,newIndex:me,newDraggableIndex:ge},e))}var se,ae,ce,ue,fe,de,le,pe,he,me,ve,ge,ye,be,_e,we,Se,xe,Ce,Ee,Ie,Te,Oe,Re,ke,Me=!1,Ae=!1,Pe=[],je=!1,Ne=!1,Le=[],De=!1,Be=[],Ue="undefined"!==typeof document,Fe=b,Ve=v||m?"cssFloat":"float",We=Ue&&!_&&!b&&"draggable"in document.createElement("div"),qe=function(){if(Ue){if(m)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),$e=function(e,t){var n=k(e),r=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),i=L(e,0,t),o=L(e,1,t),s=i&&k(i),a=o&&k(o),c=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+j(i).width,u=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+j(o).width;if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if("grid"===n.display)return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(i&&s["float"]&&"none"!==s["float"]){var f="left"===s["float"]?"left":"right";return!o||"both"!==a.clear&&a.clear!==f?"horizontal":"vertical"}return i&&("block"===s.display||"flex"===s.display||"table"===s.display||"grid"===s.display||c>=r&&"none"===n[Ve]||o&&"none"===n[Ve]&&c+u>r)?"vertical":"horizontal"},Ge=function(e,t,n){var r=n?e.left:e.top,i=n?e.right:e.bottom,o=n?e.width:e.height,s=n?t.left:t.top,a=n?t.right:t.bottom,c=n?t.width:t.height;return r===s||i===a||r+o/2===s+c/2},ze=function(e,t){var n;return Pe.some((function(r){if(!D(r)){var i=j(r),o=r[Y].options.emptyInsertThreshold,s=e>=i.left-o&&e<=i.right+o,a=t>=i.top-o&&t<=i.bottom+o;return o&&s&&a?n=r:void 0}})),n},He=function(e){function t(e,n){return function(r,i,o,s){var a=r.options.group.name&&i.options.group.name&&r.options.group.name===i.options.group.name;if(null==e&&(n||a))return!0;if(null==e||!1===e)return!1;if(n&&"clone"===e)return e;if("function"===typeof e)return t(e(r,i,o,s),n)(r,i,o,s);var c=(n?r:i).options.group.name;return!0===e||"string"===typeof e&&e===c||e.join&&e.indexOf(c)>-1}}var n={},i=e.group;i&&"object"==r(i)||(i={name:i}),n.name=i.name,n.checkPull=t(i.pull,!0),n.checkPut=t(i.put),n.revertClone=i.revertClone,e.group=n},Ke=function(){!qe&&ce&&k(ce,"display","none")},Je=function(){!qe&&ce&&k(ce,"display","")};Ue&&document.addEventListener("click",(function(e){if(Ae)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),Ae=!1,!1}),!0);var Ye=function(e){if(se){e=e.touches?e.touches[0]:e;var t=ze(e.clientX,e.clientY);if(t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[Y]._onDragOver(n)}}},Xe=function(e){se&&se.parentNode[Y]._isOutsideThisEl(e.target)};function Ze(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=o({},t),e[Y]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return $e(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Ze.supportPointer&&"PointerEvent"in window,emptyInsertThreshold:5};for(var r in ne.initializePlugins(this,e,n),n)!(r in t)&&(t[r]=n[r]);for(var i in He(t),this)"_"===i.charAt(0)&&"function"===typeof this[i]&&(this[i]=this[i].bind(this));this.nativeDraggable=!t.forceFallback&&We,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?S(e,"pointerdown",this._onTapStart):(S(e,"mousedown",this._onTapStart),S(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(S(e,"dragover",this),S(e,"dragenter",this)),Pe.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),o(this,X())}function Qe(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function et(e,t,n,r,i,o,s,a){var c,u,f=e[Y],d=f.options.onMove;return!window.CustomEvent||m||v?(c=document.createEvent("Event"),c.initEvent("move",!0,!0)):c=new CustomEvent("move",{bubbles:!0,cancelable:!0}),c.to=t,c.from=e,c.dragged=n,c.draggedRect=r,c.related=i||t,c.relatedRect=o||j(t),c.willInsertAfter=a,c.originalEvent=s,e.dispatchEvent(c),d&&(u=d.call(f,c,s)),u}function tt(e){e.draggable=!1}function nt(){De=!1}function rt(e,t,n){var r=j(D(n.el,n.options.draggable)),i=10;return t?e.clientX>r.right+i||e.clientX<=r.right&&e.clientY>r.bottom&&e.clientX>=r.left:e.clientX>r.right&&e.clientY>r.top||e.clientX<=r.right&&e.clientY>r.bottom+i}function it(e,t,n,r,i,o,s,a){var c=r?e.clientY:e.clientX,u=r?n.height:n.width,f=r?n.top:n.left,d=r?n.bottom:n.right,l=!1;if(!s)if(a&&Re<u*i){if(!je&&(1===Oe?c>f+u*o/2:c<d-u*o/2)&&(je=!0),je)l=!0;else if(1===Oe?c<f+Re:c>d-Re)return-Oe}else if(c>f+u*(1-i)/2&&c<d-u*(1-i)/2)return ot(t);return l=l||s,l&&(c<f+u*o/2||c>d-u*o/2)?c>f+u/2?1:-1:0}function ot(e){return B(se)<B(e)?1:-1}function st(e){var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,r=0;while(n--)r+=t.charCodeAt(n);return r.toString(36)}function at(e){Be.length=0;var t=e.getElementsByTagName("input"),n=t.length;while(n--){var r=t[n];r.checked&&Be.push(r)}}function ct(e){return setTimeout(e,0)}function ut(e){return clearTimeout(e)}Ze.prototype={constructor:Ze,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(Te=null)},_getDirection:function(e,t){return"function"===typeof this.options.direction?this.options.direction.call(this,e,t,se):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,r=this.options,i=r.preventOnFilter,o=e.type,s=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,a=(s||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||a,u=r.filter;if(at(n),!se&&!(/mousedown|pointerdown/.test(o)&&0!==e.button||r.disabled)&&!c.isContentEditable&&(a=I(a,r.draggable,n,!1),(!a||!a.animated)&&de!==a)){if(he=B(a),ve=B(a,r.draggable),"function"===typeof u){if(u.call(this,e,a,this))return oe({sortable:t,rootEl:c,name:"filter",targetEl:a,toEl:n,fromEl:n}),ie("filter",t,{evt:e}),void(i&&e.cancelable&&e.preventDefault())}else if(u&&(u=u.split(",").some((function(r){if(r=I(c,r.trim(),n,!1),r)return oe({sortable:t,rootEl:r,name:"filter",targetEl:a,fromEl:n,toEl:n}),ie("filter",t,{evt:e}),!0})),u))return void(i&&e.cancelable&&e.preventDefault());r.handle&&!I(c,r.handle,n,!1)||this._prepareDragStart(e,s,a)}}},_prepareDragStart:function(e,t,n){var r,i=this,o=i.el,s=i.options,a=o.ownerDocument;if(n&&!se&&n.parentNode===o){var c=j(n);if(ue=o,se=n,ae=se.parentNode,fe=se.nextSibling,de=n,ye=s.group,Ze.dragged=se,_e={target:se,clientX:(t||e).clientX,clientY:(t||e).clientY},Ce=_e.clientX-c.left,Ee=_e.clientY-c.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,se.style["will-change"]="all",r=function(){ie("delayEnded",i,{evt:e}),Ze.eventCanceled?i._onDrop():(i._disableDelayedDragEvents(),!g&&i.nativeDraggable&&(se.draggable=!0),i._triggerDragStart(e,t),oe({sortable:i,name:"choose",originalEvent:e}),R(se,s.chosenClass,!0))},s.ignore.split(",").forEach((function(e){A(se,e.trim(),tt)})),S(a,"dragover",Ye),S(a,"mousemove",Ye),S(a,"touchmove",Ye),S(a,"mouseup",i._onDrop),S(a,"touchend",i._onDrop),S(a,"touchcancel",i._onDrop),g&&this.nativeDraggable&&(this.options.touchStartThreshold=4,se.draggable=!0),ie("delayStart",this,{evt:e}),!s.delay||s.delayOnTouchOnly&&!t||this.nativeDraggable&&(v||m))r();else{if(Ze.eventCanceled)return void this._onDrop();S(a,"mouseup",i._disableDelayedDrag),S(a,"touchend",i._disableDelayedDrag),S(a,"touchcancel",i._disableDelayedDrag),S(a,"mousemove",i._delayedDragTouchMoveHandler),S(a,"touchmove",i._delayedDragTouchMoveHandler),s.supportPointer&&S(a,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(r,s.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){se&&tt(se),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;x(e,"mouseup",this._disableDelayedDrag),x(e,"touchend",this._disableDelayedDrag),x(e,"touchcancel",this._disableDelayedDrag),x(e,"mousemove",this._delayedDragTouchMoveHandler),x(e,"touchmove",this._delayedDragTouchMoveHandler),x(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?S(document,"pointermove",this._onTouchMove):S(document,t?"touchmove":"mousemove",this._onTouchMove):(S(se,"dragend",this),S(ue,"dragstart",this._onDragStart));try{document.selection?ct((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(n){}},_dragStarted:function(e,t){if(Me=!1,ue&&se){ie("dragStarted",this,{evt:t}),this.nativeDraggable&&S(document,"dragover",Xe);var n=this.options;!e&&R(se,n.dragClass,!1),R(se,n.ghostClass,!0),Ze.active=this,e&&this._appendGhost(),oe({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(we){this._lastX=we.clientX,this._lastY=we.clientY,Ke();var e=document.elementFromPoint(we.clientX,we.clientY),t=e;while(e&&e.shadowRoot){if(e=e.shadowRoot.elementFromPoint(we.clientX,we.clientY),e===t)break;t=e}if(se.parentNode[Y]._isOutsideThisEl(e),t)do{if(t[Y]){var n=void 0;if(n=t[Y]._onDragOver({clientX:we.clientX,clientY:we.clientY,target:e,rootEl:t}),n&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);Je()}},_onTouchMove:function(e){if(_e){var t=this.options,n=t.fallbackTolerance,r=t.fallbackOffset,i=e.touches?e.touches[0]:e,o=ce&&M(ce,!0),s=ce&&o&&o.a,a=ce&&o&&o.d,c=Fe&&ke&&U(ke),u=(i.clientX-_e.clientX+r.x)/(s||1)+(c?c[0]-Le[0]:0)/(s||1),f=(i.clientY-_e.clientY+r.y)/(a||1)+(c?c[1]-Le[1]:0)/(a||1);if(!Ze.active&&!Me){if(n&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(ce){o?(o.e+=u-(Se||0),o.f+=f-(xe||0)):o={a:1,b:0,c:0,d:1,e:u,f:f};var d="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");k(ce,"webkitTransform",d),k(ce,"mozTransform",d),k(ce,"msTransform",d),k(ce,"transform",d),Se=u,xe=f,we=i}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!ce){var e=this.options.fallbackOnBody?document.body:ue,t=j(se,!0,Fe,!0,e),n=this.options;if(Fe){ke=e;while("static"===k(ke,"position")&&"none"===k(ke,"transform")&&ke!==document)ke=ke.parentNode;ke!==document.body&&ke!==document.documentElement?(ke===document&&(ke=P()),t.top+=ke.scrollTop,t.left+=ke.scrollLeft):ke=P(),Le=U(ke)}ce=se.cloneNode(!0),R(ce,n.ghostClass,!1),R(ce,n.fallbackClass,!0),R(ce,n.dragClass,!0),k(ce,"transition",""),k(ce,"transform",""),k(ce,"box-sizing","border-box"),k(ce,"margin",0),k(ce,"top",t.top),k(ce,"left",t.left),k(ce,"width",t.width),k(ce,"height",t.height),k(ce,"opacity","0.8"),k(ce,"position",Fe?"absolute":"fixed"),k(ce,"zIndex","100000"),k(ce,"pointerEvents","none"),Ze.ghost=ce,e.appendChild(ce),k(ce,"transform-origin",Ce/parseInt(ce.style.width)*100+"% "+Ee/parseInt(ce.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,r=e.dataTransfer,i=n.options;ie("dragStart",this,{evt:e}),Ze.eventCanceled?this._onDrop():(ie("setupClone",this),Ze.eventCanceled||(le=H(se),le.draggable=!1,le.style["will-change"]="",this._hideClone(),R(le,this.options.chosenClass,!1),Ze.clone=le),n.cloneId=ct((function(){ie("clone",n),Ze.eventCanceled||(n.options.removeCloneOnHide||ue.insertBefore(le,se),n._hideClone(),oe({sortable:n,name:"clone"}))})),!t&&R(se,i.dragClass,!0),t?(Ae=!0,n._loopId=setInterval(n._emulateDragOver,50)):(x(document,"mouseup",n._onDrop),x(document,"touchend",n._onDrop),x(document,"touchcancel",n._onDrop),r&&(r.effectAllowed="move",i.setData&&i.setData.call(n,r,se)),S(document,"drop",n),k(se,"transform","translateZ(0)")),Me=!0,n._dragStartId=ct(n._dragStarted.bind(n,t,e)),S(document,"selectstart",n),Ie=!0,y&&k(document.body,"user-select","none"))},_onDragOver:function(e){var t,n,r,i,o=this.el,a=e.target,c=this.options,u=c.group,f=Ze.active,d=ye===u,l=c.sort,p=be||f,h=this,m=!1;if(!De){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),a=I(a,c.draggable,o,!0),A("dragOver"),Ze.eventCanceled)return m;if(se.contains(e.target)||a.animated&&a.animatingX&&a.animatingY||h._ignoreWhileAnimating===a)return L(!1);if(Ae=!1,f&&!c.disabled&&(d?l||(r=!ue.contains(se)):be===this||(this.lastPutMode=ye.checkPull(this,f,se,e))&&u.checkPut(this,f,se,e))){if(i="vertical"===this._getDirection(e,a),t=j(se),A("dragOverValid"),Ze.eventCanceled)return m;if(r)return ae=ue,P(),this._hideClone(),A("revert"),Ze.eventCanceled||(fe?ue.insertBefore(se,fe):ue.appendChild(se)),L(!0);var v=D(o,c.draggable);if(!v||rt(e,i,this)&&!v.animated){if(v===se)return L(!1);if(v&&o===e.target&&(a=v),a&&(n=j(a)),!1!==et(ue,o,se,t,a,n,e,!!a))return P(),o.appendChild(se),ae=o,U(),L(!0)}else if(a.parentNode===o){n=j(a);var g,y,b=0,_=se.parentNode!==o,w=!Ge(se.animated&&se.toRect||t,a.animated&&a.toRect||n,i),S=i?"top":"left",x=N(a,"top","top")||N(se,"top","top"),C=x?x.scrollTop:void 0;if(Te!==a&&(g=n[S],je=!1,Ne=!w&&c.invertSwap||_),b=it(e,a,n,i,w?1:c.swapThreshold,null==c.invertedSwapThreshold?c.swapThreshold:c.invertedSwapThreshold,Ne,Te===a),0!==b){var E=B(se);do{E-=b,y=ae.children[E]}while(y&&("none"===k(y,"display")||y===ce))}if(0===b||y===a)return L(!1);Te=a,Oe=b;var T=a.nextElementSibling,O=!1;O=1===b;var M=et(ue,o,se,t,a,n,e,O);if(!1!==M)return 1!==M&&-1!==M||(O=1===M),De=!0,setTimeout(nt,30),P(),O&&!T?o.appendChild(se):a.parentNode.insertBefore(se,O?T:a),x&&z(x,0,C-x.scrollTop),ae=se.parentNode,void 0===g||Ne||(Re=Math.abs(g-j(a)[S])),U(),L(!0)}if(o.contains(se))return L(!1)}return!1}function A(c,u){ie(c,h,s({evt:e,isOwner:d,axis:i?"vertical":"horizontal",revert:r,dragRect:t,targetRect:n,canSort:l,fromSortable:p,target:a,completed:L,onMove:function(n,r){return et(ue,o,se,t,n,j(n),e,r)},changed:U},u))}function P(){A("dragOverAnimationCapture"),h.captureAnimationState(),h!==p&&p.captureAnimationState()}function L(t){return A("dragOverCompleted",{insertion:t}),t&&(d?f._hideClone():f._showClone(h),h!==p&&(R(se,be?be.options.ghostClass:f.options.ghostClass,!1),R(se,c.ghostClass,!0)),be!==h&&h!==Ze.active?be=h:h===Ze.active&&be&&(be=null),p===h&&(h._ignoreWhileAnimating=a),h.animateAll((function(){A("dragOverAnimationComplete"),h._ignoreWhileAnimating=null})),h!==p&&(p.animateAll(),p._ignoreWhileAnimating=null)),(a===se&&!se.animated||a===o&&!a.animated)&&(Te=null),c.dragoverBubble||e.rootEl||a===document||(se.parentNode[Y]._isOutsideThisEl(e.target),!t&&Ye(e)),!c.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),m=!0}function U(){me=B(se),ge=B(se,c.draggable),oe({sortable:h,name:"change",toEl:o,newIndex:me,newDraggableIndex:ge,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){x(document,"mousemove",this._onTouchMove),x(document,"touchmove",this._onTouchMove),x(document,"pointermove",this._onTouchMove),x(document,"dragover",Ye),x(document,"mousemove",Ye),x(document,"touchmove",Ye)},_offUpEvents:function(){var e=this.el.ownerDocument;x(e,"mouseup",this._onDrop),x(e,"touchend",this._onDrop),x(e,"pointerup",this._onDrop),x(e,"touchcancel",this._onDrop),x(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;me=B(se),ge=B(se,n.draggable),ie("drop",this,{evt:e}),ae=se&&se.parentNode,me=B(se),ge=B(se,n.draggable),Ze.eventCanceled||(Me=!1,Ne=!1,je=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),ut(this.cloneId),ut(this._dragStartId),this.nativeDraggable&&(x(document,"drop",this),x(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),y&&k(document.body,"user-select",""),k(se,"transform",""),e&&(Ie&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),ce&&ce.parentNode&&ce.parentNode.removeChild(ce),(ue===ae||be&&"clone"!==be.lastPutMode)&&le&&le.parentNode&&le.parentNode.removeChild(le),se&&(this.nativeDraggable&&x(se,"dragend",this),tt(se),se.style["will-change"]="",Ie&&!Me&&R(se,be?be.options.ghostClass:this.options.ghostClass,!1),R(se,this.options.chosenClass,!1),oe({sortable:this,name:"unchoose",toEl:ae,newIndex:null,newDraggableIndex:null,originalEvent:e}),ue!==ae?(me>=0&&(oe({rootEl:ae,name:"add",toEl:ae,fromEl:ue,originalEvent:e}),oe({sortable:this,name:"remove",toEl:ae,originalEvent:e}),oe({rootEl:ae,name:"sort",toEl:ae,fromEl:ue,originalEvent:e}),oe({sortable:this,name:"sort",toEl:ae,originalEvent:e})),be&&be.save()):me!==he&&me>=0&&(oe({sortable:this,name:"update",toEl:ae,originalEvent:e}),oe({sortable:this,name:"sort",toEl:ae,originalEvent:e})),Ze.active&&(null!=me&&-1!==me||(me=he,ge=ve),oe({sortable:this,name:"end",toEl:ae,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){ie("nulling",this),ue=se=ae=ce=fe=le=de=pe=_e=we=Ie=me=ge=he=ve=Te=Oe=be=ye=Ze.dragged=Ze.ghost=Ze.clone=Ze.active=null,Be.forEach((function(e){e.checked=!0})),Be.length=Se=xe=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":se&&(this._onDragOver(e),Qe(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e,t=[],n=this.el.children,r=0,i=n.length,o=this.options;r<i;r++)e=n[r],I(e,o.draggable,this.el,!1)&&t.push(e.getAttribute(o.dataIdAttr)||st(e));return t},sort:function(e){var t={},n=this.el;this.toArray().forEach((function(e,r){var i=n.children[r];I(i,this.options.draggable,n,!1)&&(t[e]=i)}),this),e.forEach((function(e){t[e]&&(n.removeChild(t[e]),n.appendChild(t[e]))}))},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return I(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(void 0===t)return n[e];var r=ne.modifyOption(this,e,t);n[e]="undefined"!==typeof r?r:t,"group"===e&&He(n)},destroy:function(){ie("destroy",this);var e=this.el;e[Y]=null,x(e,"mousedown",this._onTapStart),x(e,"touchstart",this._onTapStart),x(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(x(e,"dragover",this),x(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),(function(e){e.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),Pe.splice(Pe.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!pe){if(ie("hideClone",this),Ze.eventCanceled)return;k(le,"display","none"),this.options.removeCloneOnHide&&le.parentNode&&le.parentNode.removeChild(le),pe=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(pe){if(ie("showClone",this),Ze.eventCanceled)return;ue.contains(se)&&!this.options.group.revertClone?ue.insertBefore(le,se):fe?ue.insertBefore(le,fe):ue.appendChild(le),this.options.group.revertClone&&this.animate(se,le),k(le,"display",""),pe=!1}}else this._hideClone()}},Ue&&S(document,"touchmove",(function(e){(Ze.active||Me)&&e.cancelable&&e.preventDefault()})),Ze.utils={on:S,off:x,css:k,find:A,is:function(e,t){return!!I(e,t,e,!1)},extend:W,throttle:$,closest:I,toggleClass:R,clone:H,index:B,nextTick:ct,cancelNextTick:ut,detectDirection:$e,getChild:L},Ze.get=function(e){return e[Y]},Ze.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach((function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(Ze.utils=s({},Ze.utils,e.utils)),ne.mount(e)}))},Ze.create=function(e,t){return new Ze(e,t)},Ze.version=p;var ft,dt,lt,pt,ht,mt,vt=[],gt=!1;function yt(){function e(){for(var e in this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"===typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?S(document,"dragover",this._handleAutoScroll):this.options.supportPointer?S(document,"pointermove",this._handleFallbackAutoScroll):t.touches?S(document,"touchmove",this._handleFallbackAutoScroll):S(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?x(document,"dragover",this._handleAutoScroll):(x(document,"pointermove",this._handleFallbackAutoScroll),x(document,"touchmove",this._handleFallbackAutoScroll),x(document,"mousemove",this._handleFallbackAutoScroll)),_t(),bt(),G()},nulling:function(){ht=dt=ft=gt=mt=lt=pt=null,vt.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var n=this,r=(e.touches?e.touches[0]:e).clientX,i=(e.touches?e.touches[0]:e).clientY,o=document.elementFromPoint(r,i);if(ht=e,t||v||m||y){St(e,this.options,o,t);var s=V(o,!0);!gt||mt&&r===lt&&i===pt||(mt&&_t(),mt=setInterval((function(){var o=V(document.elementFromPoint(r,i),!0);o!==s&&(s=o,bt()),St(e,n.options,o,t)}),10),lt=r,pt=i)}else{if(!this.options.bubbleScroll||V(o,!0)===P())return void bt();St(e,this.options,V(o,!1),!1)}}},o(e,{pluginName:"scroll",initializeByDefault:!0})}function bt(){vt.forEach((function(e){clearInterval(e.pid)})),vt=[]}function _t(){clearInterval(mt)}var wt,St=$((function(e,t,n,r){if(t.scroll){var i,o=(e.touches?e.touches[0]:e).clientX,s=(e.touches?e.touches[0]:e).clientY,a=t.scrollSensitivity,c=t.scrollSpeed,u=P(),f=!1;dt!==n&&(dt=n,bt(),ft=t.scroll,i=t.scrollFn,!0===ft&&(ft=V(n,!0)));var d=0,l=ft;do{var p=l,h=j(p),m=h.top,v=h.bottom,g=h.left,y=h.right,b=h.width,_=h.height,w=void 0,S=void 0,x=p.scrollWidth,C=p.scrollHeight,E=k(p),I=p.scrollLeft,T=p.scrollTop;p===u?(w=b<x&&("auto"===E.overflowX||"scroll"===E.overflowX||"visible"===E.overflowX),S=_<C&&("auto"===E.overflowY||"scroll"===E.overflowY||"visible"===E.overflowY)):(w=b<x&&("auto"===E.overflowX||"scroll"===E.overflowX),S=_<C&&("auto"===E.overflowY||"scroll"===E.overflowY));var O=w&&(Math.abs(y-o)<=a&&I+b<x)-(Math.abs(g-o)<=a&&!!I),R=S&&(Math.abs(v-s)<=a&&T+_<C)-(Math.abs(m-s)<=a&&!!T);if(!vt[d])for(var M=0;M<=d;M++)vt[M]||(vt[M]={});vt[d].vx==O&&vt[d].vy==R&&vt[d].el===p||(vt[d].el=p,vt[d].vx=O,vt[d].vy=R,clearInterval(vt[d].pid),0==O&&0==R||(f=!0,vt[d].pid=setInterval(function(){r&&0===this.layer&&Ze.active._onTouchMove(ht);var t=vt[this.layer].vy?vt[this.layer].vy*c:0,n=vt[this.layer].vx?vt[this.layer].vx*c:0;"function"===typeof i&&"continue"!==i.call(Ze.dragged.parentNode[Y],n,t,e,ht,vt[this.layer].el)||z(vt[this.layer].el,n,t)}.bind({layer:d}),24))),d++}while(t.bubbleScroll&&l!==u&&(l=V(l,!1)));gt=f}}),30),xt=function(e){var t=e.originalEvent,n=e.putSortable,r=e.dragEl,i=e.activeSortable,o=e.dispatchSortableEvent,s=e.hideGhostForTarget,a=e.unhideGhostForTarget;if(t){var c=n||i;s();var u=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,f=document.elementFromPoint(u.clientX,u.clientY);a(),c&&!c.el.contains(f)&&(o("spill"),this.onSpill({dragEl:r,putSortable:n}))}};function Ct(){}function Et(){}function It(){function e(){this.defaults={swapClass:"sortable-swap-highlight"}}return e.prototype={dragStart:function(e){var t=e.dragEl;wt=t},dragOverValid:function(e){var t=e.completed,n=e.target,r=e.onMove,i=e.activeSortable,o=e.changed,s=e.cancel;if(i.options.swap){var a=this.sortable.el,c=this.options;if(n&&n!==a){var u=wt;!1!==r(n)?(R(n,c.swapClass,!0),wt=n):wt=null,u&&u!==wt&&R(u,c.swapClass,!1)}o(),t(!0),s()}},drop:function(e){var t=e.activeSortable,n=e.putSortable,r=e.dragEl,i=n||this.sortable,o=this.options;wt&&R(wt,o.swapClass,!1),wt&&(o.swap||n&&n.options.swap)&&r!==wt&&(i.captureAnimationState(),i!==t&&t.captureAnimationState(),Tt(r,wt),i.animateAll(),i!==t&&t.animateAll())},nulling:function(){wt=null}},o(e,{pluginName:"swap",eventProperties:function(){return{swapItem:wt}}})}function Tt(e,t){var n,r,i=e.parentNode,o=t.parentNode;i&&o&&!i.isEqualNode(t)&&!o.isEqualNode(e)&&(n=B(e),r=B(t),i.isEqualNode(o)&&n<r&&r++,i.insertBefore(t,i.children[n]),o.insertBefore(e,o.children[r]))}Ct.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var r=L(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(t,r):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:xt},o(Ct,{pluginName:"revertOnSpill"}),Et.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable,r=n||this.sortable;r.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),r.animateAll()},drop:xt},o(Et,{pluginName:"removeOnSpill"});var Ot,Rt,kt,Mt,At,Pt=[],jt=[],Nt=!1,Lt=!1,Dt=!1;function Bt(){function e(e){for(var t in this)"_"===t.charAt(0)&&"function"===typeof this[t]&&(this[t]=this[t].bind(this));e.options.supportPointer?S(document,"pointerup",this._deselectMultiDrag):(S(document,"mouseup",this._deselectMultiDrag),S(document,"touchend",this._deselectMultiDrag)),S(document,"keydown",this._checkKeyDown),S(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(t,n){var r="";Pt.length&&Rt===e?Pt.forEach((function(e,t){r+=(t?", ":"")+e.textContent})):r=n.textContent,t.setData("Text",r)}}}return e.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(e){var t=e.dragEl;kt=t},delayEnded:function(){this.isMultiDrag=~Pt.indexOf(kt)},setupClone:function(e){var t=e.sortable,n=e.cancel;if(this.isMultiDrag){for(var r=0;r<Pt.length;r++)jt.push(H(Pt[r])),jt[r].sortableIndex=Pt[r].sortableIndex,jt[r].draggable=!1,jt[r].style["will-change"]="",R(jt[r],this.options.selectedClass,!1),Pt[r]===kt&&R(jt[r],this.options.chosenClass,!1);t._hideClone(),n()}},clone:function(e){var t=e.sortable,n=e.rootEl,r=e.dispatchSortableEvent,i=e.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||Pt.length&&Rt===t&&(Ft(!0,n),r("clone"),i()))},showClone:function(e){var t=e.cloneNowShown,n=e.rootEl,r=e.cancel;this.isMultiDrag&&(Ft(!1,n),jt.forEach((function(e){k(e,"display","")})),t(),At=!1,r())},hideClone:function(e){var t=this,n=(e.sortable,e.cloneNowHidden),r=e.cancel;this.isMultiDrag&&(jt.forEach((function(e){k(e,"display","none"),t.options.removeCloneOnHide&&e.parentNode&&e.parentNode.removeChild(e)})),n(),At=!0,r())},dragStartGlobal:function(e){e.sortable;!this.isMultiDrag&&Rt&&Rt.multiDrag._deselectMultiDrag(),Pt.forEach((function(e){e.sortableIndex=B(e)})),Pt=Pt.sort((function(e,t){return e.sortableIndex-t.sortableIndex})),Dt=!0},dragStarted:function(e){var t=this,n=e.sortable;if(this.isMultiDrag){if(this.options.sort&&(n.captureAnimationState(),this.options.animation)){Pt.forEach((function(e){e!==kt&&k(e,"position","absolute")}));var r=j(kt,!1,!0,!0);Pt.forEach((function(e){e!==kt&&K(e,r)})),Lt=!0,Nt=!0}n.animateAll((function(){Lt=!1,Nt=!1,t.options.animation&&Pt.forEach((function(e){J(e)})),t.options.sort&&Vt()}))}},dragOver:function(e){var t=e.target,n=e.completed,r=e.cancel;Lt&&~Pt.indexOf(t)&&(n(!1),r())},revert:function(e){var t=e.fromSortable,n=e.rootEl,r=e.sortable,i=e.dragRect;Pt.length>1&&(Pt.forEach((function(e){r.addAnimationState({target:e,rect:Lt?j(e):i}),J(e),e.fromRect=i,t.removeAnimationState(e)})),Lt=!1,Ut(!this.options.removeCloneOnHide,n))},dragOverCompleted:function(e){var t=e.sortable,n=e.isOwner,r=e.insertion,i=e.activeSortable,o=e.parentEl,s=e.putSortable,a=this.options;if(r){if(n&&i._hideClone(),Nt=!1,a.animation&&Pt.length>1&&(Lt||!n&&!i.options.sort&&!s)){var c=j(kt,!1,!0,!0);Pt.forEach((function(e){e!==kt&&(K(e,c),o.appendChild(e))})),Lt=!0}if(!n)if(Lt||Vt(),Pt.length>1){var u=At;i._showClone(t),i.options.animation&&!At&&u&&jt.forEach((function(e){i.addAnimationState({target:e,rect:Mt}),e.fromRect=Mt,e.thisAnimationDuration=null}))}else i._showClone(t)}},dragOverAnimationCapture:function(e){var t=e.dragRect,n=e.isOwner,r=e.activeSortable;if(Pt.forEach((function(e){e.thisAnimationDuration=null})),r.options.animation&&!n&&r.multiDrag.isMultiDrag){Mt=o({},t);var i=M(kt,!0);Mt.top-=i.f,Mt.left-=i.e}},dragOverAnimationComplete:function(){Lt&&(Lt=!1,Vt())},drop:function(e){var t=e.originalEvent,n=e.rootEl,r=e.parentEl,i=e.sortable,o=e.dispatchSortableEvent,s=e.oldIndex,a=e.putSortable,c=a||this.sortable;if(t){var u=this.options,f=r.children;if(!Dt)if(u.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),R(kt,u.selectedClass,!~Pt.indexOf(kt)),~Pt.indexOf(kt))Pt.splice(Pt.indexOf(kt),1),Ot=null,re({sortable:i,rootEl:n,name:"deselect",targetEl:kt,originalEvt:t});else{if(Pt.push(kt),re({sortable:i,rootEl:n,name:"select",targetEl:kt,originalEvt:t}),t.shiftKey&&Ot&&i.el.contains(Ot)){var d,l,p=B(Ot),h=B(kt);if(~p&&~h&&p!==h)for(h>p?(l=p,d=h):(l=h,d=p+1);l<d;l++)~Pt.indexOf(f[l])||(R(f[l],u.selectedClass,!0),Pt.push(f[l]),re({sortable:i,rootEl:n,name:"select",targetEl:f[l],originalEvt:t}))}else Ot=kt;Rt=c}if(Dt&&this.isMultiDrag){if((r[Y].options.sort||r!==n)&&Pt.length>1){var m=j(kt),v=B(kt,":not(."+this.options.selectedClass+")");if(!Nt&&u.animation&&(kt.thisAnimationDuration=null),c.captureAnimationState(),!Nt&&(u.animation&&(kt.fromRect=m,Pt.forEach((function(e){if(e.thisAnimationDuration=null,e!==kt){var t=Lt?j(e):m;e.fromRect=t,c.addAnimationState({target:e,rect:t})}}))),Vt(),Pt.forEach((function(e){f[v]?r.insertBefore(e,f[v]):r.appendChild(e),v++})),s===B(kt))){var g=!1;Pt.forEach((function(e){e.sortableIndex===B(e)||(g=!0)})),g&&o("update")}Pt.forEach((function(e){J(e)})),c.animateAll()}Rt=c}(n===r||a&&"clone"!==a.lastPutMode)&&jt.forEach((function(e){e.parentNode&&e.parentNode.removeChild(e)}))}},nullingGlobal:function(){this.isMultiDrag=Dt=!1,jt.length=0},destroyGlobal:function(){this._deselectMultiDrag(),x(document,"pointerup",this._deselectMultiDrag),x(document,"mouseup",this._deselectMultiDrag),x(document,"touchend",this._deselectMultiDrag),x(document,"keydown",this._checkKeyDown),x(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(e){if(("undefined"===typeof Dt||!Dt)&&Rt===this.sortable&&(!e||!I(e.target,this.options.draggable,this.sortable.el,!1))&&(!e||0===e.button))while(Pt.length){var t=Pt[0];R(t,this.options.selectedClass,!1),Pt.shift(),re({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:t,originalEvt:e})}},_checkKeyDown:function(e){e.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(e){e.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},o(e,{pluginName:"multiDrag",utils:{select:function(e){var t=e.parentNode[Y];t&&t.options.multiDrag&&!~Pt.indexOf(e)&&(Rt&&Rt!==t&&(Rt.multiDrag._deselectMultiDrag(),Rt=t),R(e,t.options.selectedClass,!0),Pt.push(e))},deselect:function(e){var t=e.parentNode[Y],n=Pt.indexOf(e);t&&t.options.multiDrag&&~n&&(R(e,t.options.selectedClass,!1),Pt.splice(n,1))}},eventProperties:function(){var e=this,t=[],n=[];return Pt.forEach((function(r){var i;t.push({multiDragElement:r,index:r.sortableIndex}),i=Lt&&r!==kt?-1:Lt?B(r,":not(."+e.options.selectedClass+")"):B(r),n.push({multiDragElement:r,index:i})})),{items:u(Pt),clones:[].concat(jt),oldIndicies:t,newIndicies:n}},optionListeners:{multiDragKey:function(e){return e=e.toLowerCase(),"ctrl"===e?e="Control":e.length>1&&(e=e.charAt(0).toUpperCase()+e.substr(1)),e}}})}function Ut(e,t){Pt.forEach((function(n,r){var i=t.children[n.sortableIndex+(e?Number(r):0)];i?t.insertBefore(n,i):t.appendChild(n)}))}function Ft(e,t){jt.forEach((function(n,r){var i=t.children[n.sortableIndex+(e?Number(r):0)];i?t.insertBefore(n,i):t.appendChild(n)}))}function Vt(){Pt.forEach((function(e){e!==kt&&e.parentNode&&e.parentNode.removeChild(e)}))}Ze.mount(new yt),Ze.mount(Et,Ct),t["default"]=Ze},ac1f:function(e,t,n){"use strict";var r=n("23e7"),i=n("9263");r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},ace4:function(e,t,n){"use strict";var r=n("23e7"),i=n("d039"),o=n("621a"),s=n("825a"),a=n("23cb"),c=n("50c4"),u=n("4840"),f=o.ArrayBuffer,d=o.DataView,l=f.prototype.slice,p=i((function(){return!new f(2).slice(1,void 0).byteLength}));r({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:p},{slice:function(e,t){if(void 0!==l&&void 0===t)return l.call(s(this),e);var n=s(this).byteLength,r=a(e,n),i=a(void 0===t?n:t,n),o=new(u(this,f))(c(i-r)),p=new d(this),h=new d(o),m=0;while(r<i)h.setUint8(m++,p.getUint8(r++));return o}})},ad6d:function(e,t,n){"use strict";var r=n("825a");e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},ade3:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return r}))},ae40:function(e,t,n){var r=n("83ab"),i=n("d039"),o=n("5135"),s=Object.defineProperty,a={},c=function(e){throw e};e.exports=function(e,t){if(o(a,e))return a[e];t||(t={});var n=[][e],u=!!o(t,"ACCESSORS")&&t.ACCESSORS,f=o(t,0)?t[0]:c,d=o(t,1)?t[1]:void 0;return a[e]=!!n&&!i((function(){if(u&&!r)return!0;var e={length:-1};u?s(e,1,{enumerable:!0,get:c}):e[1]=1,n.call(e,f,d)}))}},ae93:function(e,t,n){"use strict";var r,i,o,s=n("e163"),a=n("9112"),c=n("5135"),u=n("b622"),f=n("c430"),d=u("iterator"),l=!1,p=function(){return this};[].keys&&(o=[].keys(),"next"in o?(i=s(s(o)),i!==Object.prototype&&(r=i)):l=!0),void 0==r&&(r={}),f||c(r,d)||a(r,d,p),e.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:l}},b041:function(e,t,n){"use strict";var r=n("00ee"),i=n("f5df");e.exports=r?{}.toString:function(){return"[object "+i(this)+"]"}},b0c0:function(e,t,n){var r=n("83ab"),i=n("9bf2").f,o=Function.prototype,s=o.toString,a=/^\s*function ([^ (]*)/,c="name";r&&!(c in o)&&i(o,c,{configurable:!0,get:function(){try{return s.call(this).match(a)[1]}catch(e){return""}}})},b367:function(e,t,n){var r=n("5524"),i=n("ef08"),o="__core-js_shared__",s=i[o]||(i[o]={});(e.exports=function(e,t){return s[e]||(s[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n("e444")?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},b383:function(e,t,n){"use strict";t.decode=t.parse=n("91dd"),t.encode=t.stringify=n("e099")},b39a:function(e,t,n){"use strict";var r=n("da84"),i=n("ebb5"),o=n("d039"),s=r.Int8Array,a=i.aTypedArray,c=i.exportTypedArrayMethod,u=[].toLocaleString,f=[].slice,d=!!s&&o((function(){u.call(new s(1))})),l=o((function(){return[1,2].toLocaleString()!=new s([1,2]).toLocaleString()}))||!o((function(){s.prototype.toLocaleString.call([1,2])}));c("toLocaleString",(function(){return u.apply(d?f.call(a(this)):a(this),arguments)}),l)},b50d:function(e,t,n){"use strict";var r=n("c532"),i=n("467f"),o=n("30b5"),s=n("c345"),a=n("3934"),c=n("2d83");e.exports=function(e){return new Promise((function(t,u){var f=e.data,d=e.headers;r.isFormData(f)&&delete d["Content-Type"];var l=new XMLHttpRequest;if(e.auth){var p=e.auth.username||"",h=e.auth.password||"";d.Authorization="Basic "+btoa(p+":"+h)}if(l.open(e.method.toUpperCase(),o(e.url,e.params,e.paramsSerializer),!0),l.timeout=e.timeout,l.onreadystatechange=function(){if(l&&4===l.readyState&&(0!==l.status||l.responseURL&&0===l.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in l?s(l.getAllResponseHeaders()):null,r=e.responseType&&"text"!==e.responseType?l.response:l.responseText,o={data:r,status:l.status,statusText:l.statusText,headers:n,config:e,request:l};i(t,u,o),l=null}},l.onerror=function(){u(c("Network Error",e,null,l)),l=null},l.ontimeout=function(){u(c("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",l)),l=null},r.isStandardBrowserEnv()){var m=n("7aac"),v=(e.withCredentials||a(e.url))&&e.xsrfCookieName?m.read(e.xsrfCookieName):void 0;v&&(d[e.xsrfHeaderName]=v)}if("setRequestHeader"in l&&r.forEach(d,(function(e,t){"undefined"===typeof f&&"content-type"===t.toLowerCase()?delete d[t]:l.setRequestHeader(t,e)})),e.withCredentials&&(l.withCredentials=!0),e.responseType)try{l.responseType=e.responseType}catch(g){if("json"!==e.responseType)throw g}"function"===typeof e.onDownloadProgress&&l.addEventListener("progress",e.onDownloadProgress),"function"===typeof e.onUploadProgress&&l.upload&&l.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){l&&(l.abort(),u(e),l=null)})),void 0===f&&(f=null),l.send(f)}))}},b575:function(e,t,n){var r,i,o,s,a,c,u,f,d=n("da84"),l=n("06cf").f,p=n("c6b6"),h=n("2cf4").set,m=n("1cdc"),v=d.MutationObserver||d.WebKitMutationObserver,g=d.process,y=d.Promise,b="process"==p(g),_=l(d,"queueMicrotask"),w=_&&_.value;w||(r=function(){var e,t;b&&(e=g.domain)&&e.exit();while(i){t=i.fn,i=i.next;try{t()}catch(n){throw i?s():o=void 0,n}}o=void 0,e&&e.enter()},b?s=function(){g.nextTick(r)}:v&&!m?(a=!0,c=document.createTextNode(""),new v(r).observe(c,{characterData:!0}),s=function(){c.data=a=!a}):y&&y.resolve?(u=y.resolve(void 0),f=u.then,s=function(){f.call(u,r)}):s=function(){h.call(d,r)}),e.exports=w||function(e){var t={fn:e,next:void 0};o&&(o.next=t),i||(i=t,s()),o=t}},b622:function(e,t,n){var r=n("da84"),i=n("5692"),o=n("5135"),s=n("90e3"),a=n("4930"),c=n("fdbf"),u=i("wks"),f=r.Symbol,d=c?f:f&&f.withoutSetter||s;e.exports=function(e){return o(u,e)||(a&&o(f,e)?u[e]=f[e]:u[e]=d("Symbol."+e)),u[e]}},b64b:function(e,t,n){var r=n("23e7"),i=n("7b0b"),o=n("df75"),s=n("d039"),a=s((function(){o(1)}));r({target:"Object",stat:!0,forced:a},{keys:function(e){return o(i(e))}})},b727:function(e,t,n){var r=n("0366"),i=n("44ad"),o=n("7b0b"),s=n("50c4"),a=n("65f0"),c=[].push,u=function(e){var t=1==e,n=2==e,u=3==e,f=4==e,d=6==e,l=5==e||d;return function(p,h,m,v){for(var g,y,b=o(p),_=i(b),w=r(h,m,3),S=s(_.length),x=0,C=v||a,E=t?C(p,S):n?C(p,0):void 0;S>x;x++)if((l||x in _)&&(g=_[x],y=w(g,x,b),e))if(t)E[x]=y;else if(y)switch(e){case 3:return!0;case 5:return g;case 6:return x;case 2:c.call(E,g)}else if(f)return!1;return d?-1:u||f?f:E}};e.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6)}},b76a:function(e,t,n){(function(t,r){e.exports=r(n("aa47"))})("undefined"!==typeof self&&self,(function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="fb15")}({"01f9":function(e,t,n){"use strict";var r=n("2d00"),i=n("5ca1"),o=n("2aba"),s=n("32e9"),a=n("84f2"),c=n("41a0"),u=n("7f20"),f=n("38fd"),d=n("2b4c")("iterator"),l=!([].keys&&"next"in[].keys()),p="@@iterator",h="keys",m="values",v=function(){return this};e.exports=function(e,t,n,g,y,b,_){c(n,t,g);var w,S,x,C=function(e){if(!l&&e in O)return O[e];switch(e){case h:return function(){return new n(this,e)};case m:return function(){return new n(this,e)}}return function(){return new n(this,e)}},E=t+" Iterator",I=y==m,T=!1,O=e.prototype,R=O[d]||O[p]||y&&O[y],k=R||C(y),M=y?I?C("entries"):k:void 0,A="Array"==t&&O.entries||R;if(A&&(x=f(A.call(new e)),x!==Object.prototype&&x.next&&(u(x,E,!0),r||"function"==typeof x[d]||s(x,d,v))),I&&R&&R.name!==m&&(T=!0,k=function(){return R.call(this)}),r&&!_||!l&&!T&&O[d]||s(O,d,k),a[t]=k,a[E]=v,y)if(w={values:I?k:C(m),keys:b?k:C(h),entries:M},_)for(S in w)S in O||o(O,S,w[S]);else i(i.P+i.F*(l||T),t,w);return w}},"02f4":function(e,t,n){var r=n("4588"),i=n("be13");e.exports=function(e){return function(t,n){var o,s,a=String(i(t)),c=r(n),u=a.length;return c<0||c>=u?e?"":void 0:(o=a.charCodeAt(c),o<55296||o>56319||c+1===u||(s=a.charCodeAt(c+1))<56320||s>57343?e?a.charAt(c):o:e?a.slice(c,c+2):s-56320+(o-55296<<10)+65536)}}},"0390":function(e,t,n){"use strict";var r=n("02f4")(!0);e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},"0bfb":function(e,t,n){"use strict";var r=n("cb7c");e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},"0d58":function(e,t,n){var r=n("ce10"),i=n("e11e");e.exports=Object.keys||function(e){return r(e,i)}},1495:function(e,t,n){var r=n("86cc"),i=n("cb7c"),o=n("0d58");e.exports=n("9e1e")?Object.defineProperties:function(e,t){i(e);var n,s=o(t),a=s.length,c=0;while(a>c)r.f(e,n=s[c++],t[n]);return e}},"214f":function(e,t,n){"use strict";n("b0c5");var r=n("2aba"),i=n("32e9"),o=n("79e5"),s=n("be13"),a=n("2b4c"),c=n("520a"),u=a("species"),f=!o((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),d=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();e.exports=function(e,t,n){var l=a(e),p=!o((function(){var t={};return t[l]=function(){return 7},7!=""[e](t)})),h=p?!o((function(){var t=!1,n=/a/;return n.exec=function(){return t=!0,null},"split"===e&&(n.constructor={},n.constructor[u]=function(){return n}),n[l](""),!t})):void 0;if(!p||!h||"replace"===e&&!f||"split"===e&&!d){var m=/./[l],v=n(s,l,""[e],(function(e,t,n,r,i){return t.exec===c?p&&!i?{done:!0,value:m.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}})),g=v[0],y=v[1];r(String.prototype,e,g),i(RegExp.prototype,l,2==t?function(e,t){return y.call(e,this,t)}:function(e){return y.call(e,this)})}}},"230e":function(e,t,n){var r=n("d3f4"),i=n("7726").document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},"23c6":function(e,t,n){var r=n("2d95"),i=n("2b4c")("toStringTag"),o="Arguments"==r(function(){return arguments}()),s=function(e,t){try{return e[t]}catch(n){}};e.exports=function(e){var t,n,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=s(t=Object(e),i))?n:o?r(t):"Object"==(a=r(t))&&"function"==typeof t.callee?"Arguments":a}},2621:function(e,t){t.f=Object.getOwnPropertySymbols},"2aba":function(e,t,n){var r=n("7726"),i=n("32e9"),o=n("69a8"),s=n("ca5a")("src"),a=n("fa5b"),c="toString",u=(""+a).split(c);n("8378").inspectSource=function(e){return a.call(e)},(e.exports=function(e,t,n,a){var c="function"==typeof n;c&&(o(n,"name")||i(n,"name",t)),e[t]!==n&&(c&&(o(n,s)||i(n,s,e[t]?""+e[t]:u.join(String(t)))),e===r?e[t]=n:a?e[t]?e[t]=n:i(e,t,n):(delete e[t],i(e,t,n)))})(Function.prototype,c,(function(){return"function"==typeof this&&this[s]||a.call(this)}))},"2aeb":function(e,t,n){var r=n("cb7c"),i=n("1495"),o=n("e11e"),s=n("613b")("IE_PROTO"),a=function(){},c="prototype",u=function(){var e,t=n("230e")("iframe"),r=o.length,i="<",s=">";t.style.display="none",n("fab2").appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write(i+"script"+s+"document.F=Object"+i+"/script"+s),e.close(),u=e.F;while(r--)delete u[c][o[r]];return u()};e.exports=Object.create||function(e,t){var n;return null!==e?(a[c]=r(e),n=new a,a[c]=null,n[s]=e):n=u(),void 0===t?n:i(n,t)}},"2b4c":function(e,t,n){var r=n("5537")("wks"),i=n("ca5a"),o=n("7726").Symbol,s="function"==typeof o,a=e.exports=function(e){return r[e]||(r[e]=s&&o[e]||(s?o:i)("Symbol."+e))};a.store=r},"2d00":function(e,t){e.exports=!1},"2d95":function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},"2fdb":function(e,t,n){"use strict";var r=n("5ca1"),i=n("d2c8"),o="includes";r(r.P+r.F*n("5147")(o),"String",{includes:function(e){return!!~i(this,e,o).indexOf(e,arguments.length>1?arguments[1]:void 0)}})},"32e9":function(e,t,n){var r=n("86cc"),i=n("4630");e.exports=n("9e1e")?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},"38fd":function(e,t,n){var r=n("69a8"),i=n("4bf8"),o=n("613b")("IE_PROTO"),s=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?s:null}},"41a0":function(e,t,n){"use strict";var r=n("2aeb"),i=n("4630"),o=n("7f20"),s={};n("32e9")(s,n("2b4c")("iterator"),(function(){return this})),e.exports=function(e,t,n){e.prototype=r(s,{next:i(1,n)}),o(e,t+" Iterator")}},"456d":function(e,t,n){var r=n("4bf8"),i=n("0d58");n("5eda")("keys",(function(){return function(e){return i(r(e))}}))},4588:function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},4630:function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},"4bf8":function(e,t,n){var r=n("be13");e.exports=function(e){return Object(r(e))}},5147:function(e,t,n){var r=n("2b4c")("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,!"/./"[e](t)}catch(i){}}return!0}},"520a":function(e,t,n){"use strict";var r=n("0bfb"),i=RegExp.prototype.exec,o=String.prototype.replace,s=i,a="lastIndex",c=function(){var e=/a/,t=/b*/g;return i.call(e,"a"),i.call(t,"a"),0!==e[a]||0!==t[a]}(),u=void 0!==/()??/.exec("")[1],f=c||u;f&&(s=function(e){var t,n,s,f,d=this;return u&&(n=new RegExp("^"+d.source+"$(?!\\s)",r.call(d))),c&&(t=d[a]),s=i.call(d,e),c&&s&&(d[a]=d.global?s.index+s[0].length:t),u&&s&&s.length>1&&o.call(s[0],n,(function(){for(f=1;f<arguments.length-2;f++)void 0===arguments[f]&&(s[f]=void 0)})),s}),e.exports=s},"52a7":function(e,t){t.f={}.propertyIsEnumerable},5537:function(e,t,n){var r=n("8378"),i=n("7726"),o="__core-js_shared__",s=i[o]||(i[o]={});(e.exports=function(e,t){return s[e]||(s[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n("2d00")?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},"5ca1":function(e,t,n){var r=n("7726"),i=n("8378"),o=n("32e9"),s=n("2aba"),a=n("9b43"),c="prototype",u=function(e,t,n){var f,d,l,p,h=e&u.F,m=e&u.G,v=e&u.S,g=e&u.P,y=e&u.B,b=m?r:v?r[t]||(r[t]={}):(r[t]||{})[c],_=m?i:i[t]||(i[t]={}),w=_[c]||(_[c]={});for(f in m&&(n=t),n)d=!h&&b&&void 0!==b[f],l=(d?b:n)[f],p=y&&d?a(l,r):g&&"function"==typeof l?a(Function.call,l):l,b&&s(b,f,l,e&u.U),_[f]!=l&&o(_,f,p),g&&w[f]!=l&&(w[f]=l)};r.core=i,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},"5eda":function(e,t,n){var r=n("5ca1"),i=n("8378"),o=n("79e5");e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],s={};s[e]=t(n),r(r.S+r.F*o((function(){n(1)})),"Object",s)}},"5f1b":function(e,t,n){"use strict";var r=n("23c6"),i=RegExp.prototype.exec;e.exports=function(e,t){var n=e.exec;if("function"===typeof n){var o=n.call(e,t);if("object"!==typeof o)throw new TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==r(e))throw new TypeError("RegExp#exec called on incompatible receiver");return i.call(e,t)}},"613b":function(e,t,n){var r=n("5537")("keys"),i=n("ca5a");e.exports=function(e){return r[e]||(r[e]=i(e))}},"626a":function(e,t,n){var r=n("2d95");e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},6762:function(e,t,n){"use strict";var r=n("5ca1"),i=n("c366")(!0);r(r.P,"Array",{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n("9c6c")("includes")},6821:function(e,t,n){var r=n("626a"),i=n("be13");e.exports=function(e){return r(i(e))}},"69a8":function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},"6a99":function(e,t,n){var r=n("d3f4");e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},7333:function(e,t,n){"use strict";var r=n("0d58"),i=n("2621"),o=n("52a7"),s=n("4bf8"),a=n("626a"),c=Object.assign;e.exports=!c||n("79e5")((function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=c({},e)[n]||Object.keys(c({},t)).join("")!=r}))?function(e,t){var n=s(e),c=arguments.length,u=1,f=i.f,d=o.f;while(c>u){var l,p=a(arguments[u++]),h=f?r(p).concat(f(p)):r(p),m=h.length,v=0;while(m>v)d.call(p,l=h[v++])&&(n[l]=p[l])}return n}:c},7726:function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},"77f1":function(e,t,n){var r=n("4588"),i=Math.max,o=Math.min;e.exports=function(e,t){return e=r(e),e<0?i(e+t,0):o(e,t)}},"79e5":function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},"7f20":function(e,t,n){var r=n("86cc").f,i=n("69a8"),o=n("2b4c")("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},8378:function(e,t){var n=e.exports={version:"2.6.5"};"number"==typeof __e&&(__e=n)},"84f2":function(e,t){e.exports={}},"86cc":function(e,t,n){var r=n("cb7c"),i=n("c69a"),o=n("6a99"),s=Object.defineProperty;t.f=n("9e1e")?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return s(e,t,n)}catch(a){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},"9b43":function(e,t,n){var r=n("d8e8");e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},"9c6c":function(e,t,n){var r=n("2b4c")("unscopables"),i=Array.prototype;void 0==i[r]&&n("32e9")(i,r,{}),e.exports=function(e){i[r][e]=!0}},"9def":function(e,t,n){var r=n("4588"),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},"9e1e":function(e,t,n){e.exports=!n("79e5")((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},a352:function(t,n){t.exports=e},a481:function(e,t,n){"use strict";var r=n("cb7c"),i=n("4bf8"),o=n("9def"),s=n("4588"),a=n("0390"),c=n("5f1b"),u=Math.max,f=Math.min,d=Math.floor,l=/\$([$&`']|\d\d?|<[^>]*>)/g,p=/\$([$&`']|\d\d?)/g,h=function(e){return void 0===e?e:String(e)};n("214f")("replace",2,(function(e,t,n,m){return[function(r,i){var o=e(this),s=void 0==r?void 0:r[t];return void 0!==s?s.call(r,o,i):n.call(String(o),r,i)},function(e,t){var i=m(n,e,this,t);if(i.done)return i.value;var d=r(e),l=String(this),p="function"===typeof t;p||(t=String(t));var g=d.global;if(g){var y=d.unicode;d.lastIndex=0}var b=[];while(1){var _=c(d,l);if(null===_)break;if(b.push(_),!g)break;var w=String(_[0]);""===w&&(d.lastIndex=a(l,o(d.lastIndex),y))}for(var S="",x=0,C=0;C<b.length;C++){_=b[C];for(var E=String(_[0]),I=u(f(s(_.index),l.length),0),T=[],O=1;O<_.length;O++)T.push(h(_[O]));var R=_.groups;if(p){var k=[E].concat(T,I,l);void 0!==R&&k.push(R);var M=String(t.apply(void 0,k))}else M=v(E,l,I,T,R,t);I>=x&&(S+=l.slice(x,I)+M,x=I+E.length)}return S+l.slice(x)}];function v(e,t,r,o,s,a){var c=r+e.length,u=o.length,f=p;return void 0!==s&&(s=i(s),f=l),n.call(a,f,(function(n,i){var a;switch(i.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,r);case"'":return t.slice(c);case"<":a=s[i.slice(1,-1)];break;default:var f=+i;if(0===f)return n;if(f>u){var l=d(f/10);return 0===l?n:l<=u?void 0===o[l-1]?i.charAt(1):o[l-1]+i.charAt(1):n}a=o[f-1]}return void 0===a?"":a}))}}))},aae3:function(e,t,n){var r=n("d3f4"),i=n("2d95"),o=n("2b4c")("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==i(e))}},ac6a:function(e,t,n){for(var r=n("cadf"),i=n("0d58"),o=n("2aba"),s=n("7726"),a=n("32e9"),c=n("84f2"),u=n("2b4c"),f=u("iterator"),d=u("toStringTag"),l=c.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},h=i(p),m=0;m<h.length;m++){var v,g=h[m],y=p[g],b=s[g],_=b&&b.prototype;if(_&&(_[f]||a(_,f,l),_[d]||a(_,d,g),c[g]=l,y))for(v in r)_[v]||o(_,v,r[v],!0)}},b0c5:function(e,t,n){"use strict";var r=n("520a");n("5ca1")({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},be13:function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},c366:function(e,t,n){var r=n("6821"),i=n("9def"),o=n("77f1");e.exports=function(e){return function(t,n,s){var a,c=r(t),u=i(c.length),f=o(s,u);if(e&&n!=n){while(u>f)if(a=c[f++],a!=a)return!0}else for(;u>f;f++)if((e||f in c)&&c[f]===n)return e||f||0;return!e&&-1}}},c649:function(e,t,n){"use strict";(function(e){n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return c}));n("a481");function r(){return"undefined"!==typeof window?window.console:e.console}var i=r();function o(e){var t=Object.create(null);return function(n){var r=t[n];return r||(t[n]=e(n))}}var s=/-(\w)/g,a=o((function(e){return e.replace(s,(function(e,t){return t?t.toUpperCase():""}))}));function c(e){null!==e.parentElement&&e.parentElement.removeChild(e)}function u(e,t,n){var r=0===n?e.children[0]:e.children[n-1].nextSibling;e.insertBefore(t,r)}}).call(this,n("c8ba"))},c69a:function(e,t,n){e.exports=!n("9e1e")&&!n("79e5")((function(){return 7!=Object.defineProperty(n("230e")("div"),"a",{get:function(){return 7}}).a}))},c8ba:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}e.exports=n},ca5a:function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},cadf:function(e,t,n){"use strict";var r=n("9c6c"),i=n("d53b"),o=n("84f2"),s=n("6821");e.exports=n("01f9")(Array,"Array",(function(e,t){this._t=s(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},cb7c:function(e,t,n){var r=n("d3f4");e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},ce10:function(e,t,n){var r=n("69a8"),i=n("6821"),o=n("c366")(!1),s=n("613b")("IE_PROTO");e.exports=function(e,t){var n,a=i(e),c=0,u=[];for(n in a)n!=s&&r(a,n)&&u.push(n);while(t.length>c)r(a,n=t[c++])&&(~o(u,n)||u.push(n));return u}},d2c8:function(e,t,n){var r=n("aae3"),i=n("be13");e.exports=function(e,t,n){if(r(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(i(e))}},d3f4:function(e,t){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},d53b:function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},d8e8:function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},e11e:function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},f559:function(e,t,n){"use strict";var r=n("5ca1"),i=n("9def"),o=n("d2c8"),s="startsWith",a=""[s];r(r.P+r.F*n("5147")(s),"String",{startsWith:function(e){var t=o(this,e,s),n=i(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),r=String(e);return a?a.call(t,r,n):t.slice(n,n+r.length)===r}})},f6fd:function(e,t){(function(e){var t="currentScript",n=e.getElementsByTagName("script");t in e||Object.defineProperty(e,t,{get:function(){try{throw new Error}catch(r){var e,t=(/.*at [^\(]*\((.*):.+:.+\)$/gi.exec(r.stack)||[!1])[1];for(e in n)if(n[e].src==t||"interactive"==n[e].readyState)return n[e];return null}}})})(document)},f751:function(e,t,n){var r=n("5ca1");r(r.S+r.F,"Object",{assign:n("7333")})},fa5b:function(e,t,n){e.exports=n("5537")("native-function-to-string",Function.toString)},fab2:function(e,t,n){var r=n("7726").document;e.exports=r&&r.documentElement},fb15:function(e,t,n){"use strict";var r;(n.r(t),"undefined"!==typeof window)&&(n("f6fd"),(r=window.document.currentScript)&&(r=r.src.match(/(.+\/)[^/]+\.js(\?.*)?$/))&&(n.p=r[1]));n("f751"),n("f559"),n("ac6a"),n("cadf"),n("456d");function i(e){if(Array.isArray(e))return e}function o(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done);r=!0)if(n.push(s.value),t&&n.length===t)break}catch(c){i=!0,o=c}finally{try{r||null==a["return"]||a["return"]()}finally{if(i)throw o}}return n}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){if(e){if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e,t){return i(e)||o(e,t)||a(e,t)||c()}n("6762"),n("2fdb");function f(e){if(Array.isArray(e))return s(e)}function d(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(e){return f(e)||d(e)||a(e)||l()}var h=n("a352"),m=n.n(h),v=n("c649");function g(e,t,n){return void 0===n||(e=e||{},e[t]=n),e}function y(e,t){return e.map((function(e){return e.elm})).indexOf(t)}function b(e,t,n,r){if(!e)return[];var i=e.map((function(e){return e.elm})),o=t.length-r,s=p(t).map((function(e,t){return t>=o?i.length:i.indexOf(e)}));return n?s.filter((function(e){return-1!==e})):s}function _(e,t){var n=this;this.$nextTick((function(){return n.$emit(e.toLowerCase(),t)}))}function w(e){var t=this;return function(n){null!==t.realList&&t["onDrag"+e](n),_.call(t,e,n)}}function S(e){return["transition-group","TransitionGroup"].includes(e)}function x(e){if(!e||1!==e.length)return!1;var t=u(e,1),n=t[0].componentOptions;return!!n&&S(n.tag)}function C(e,t,n){return e[n]||(t[n]?t[n]():void 0)}function E(e,t,n){var r=0,i=0,o=C(t,n,"header");o&&(r=o.length,e=e?[].concat(p(o),p(e)):p(o));var s=C(t,n,"footer");return s&&(i=s.length,e=e?[].concat(p(e),p(s)):p(s)),{children:e,headerOffset:r,footerOffset:i}}function I(e,t){var n=null,r=function(e,t){n=g(n,e,t)},i=Object.keys(e).filter((function(e){return"id"===e||e.startsWith("data-")})).reduce((function(t,n){return t[n]=e[n],t}),{});if(r("attrs",i),!t)return n;var o=t.on,s=t.props,a=t.attrs;return r("on",o),r("props",s),Object.assign(n.attrs,a),n}var T=["Start","Add","Remove","Update","End"],O=["Choose","Unchoose","Sort","Filter","Clone"],R=["Move"].concat(T,O).map((function(e){return"on"+e})),k=null,M={options:Object,list:{type:Array,required:!1,default:null},value:{type:Array,required:!1,default:null},noTransitionOnDrag:{type:Boolean,default:!1},clone:{type:Function,default:function(e){return e}},element:{type:String,default:"div"},tag:{type:String,default:null},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},A={name:"draggable",inheritAttrs:!1,props:M,data:function(){return{transitionMode:!1,noneFunctionalComponentMode:!1}},render:function(e){var t=this.$slots.default;this.transitionMode=x(t);var n=E(t,this.$slots,this.$scopedSlots),r=n.children,i=n.headerOffset,o=n.footerOffset;this.headerOffset=i,this.footerOffset=o;var s=I(this.$attrs,this.componentData);return e(this.getTag(),s,r)},created:function(){null!==this.list&&null!==this.value&&v["b"].error("Value and list props are mutually exclusive! Please set one or another."),"div"!==this.element&&v["b"].warn("Element props is deprecated please use tag props instead. See https://github.com/SortableJS/Vue.Draggable/blob/master/documentation/migrate.md#element-props"),void 0!==this.options&&v["b"].warn("Options props is deprecated, add sortable options directly as vue.draggable item, or use v-bind. See https://github.com/SortableJS/Vue.Draggable/blob/master/documentation/migrate.md#options-props")},mounted:function(){var e=this;if(this.noneFunctionalComponentMode=this.getTag().toLowerCase()!==this.$el.nodeName.toLowerCase()&&!this.getIsFunctional(),this.noneFunctionalComponentMode&&this.transitionMode)throw new Error("Transition-group inside component is not supported. Please alter tag value or remove transition-group. Current tag value: ".concat(this.getTag()));var t={};T.forEach((function(n){t["on"+n]=w.call(e,n)})),O.forEach((function(n){t["on"+n]=_.bind(e,n)}));var n=Object.keys(this.$attrs).reduce((function(t,n){return t[Object(v["a"])(n)]=e.$attrs[n],t}),{}),r=Object.assign({},this.options,n,t,{onMove:function(t,n){return e.onDragMove(t,n)}});!("draggable"in r)&&(r.draggable=">*"),this._sortable=new m.a(this.rootContainer,r),this.computeIndexes()},beforeDestroy:function(){void 0!==this._sortable&&this._sortable.destroy()},computed:{rootContainer:function(){return this.transitionMode?this.$el.children[0]:this.$el},realList:function(){return this.list?this.list:this.value}},watch:{options:{handler:function(e){this.updateOptions(e)},deep:!0},$attrs:{handler:function(e){this.updateOptions(e)},deep:!0},realList:function(){this.computeIndexes()}},methods:{getIsFunctional:function(){var e=this._vnode.fnOptions;return e&&e.functional},getTag:function(){return this.tag||this.element},updateOptions:function(e){for(var t in e){var n=Object(v["a"])(t);-1===R.indexOf(n)&&this._sortable.option(n,e[t])}},getChildrenNodes:function(){if(this.noneFunctionalComponentMode)return this.$children[0].$slots.default;var e=this.$slots.default;return this.transitionMode?e[0].child.$slots.default:e},computeIndexes:function(){var e=this;this.$nextTick((function(){e.visibleIndexes=b(e.getChildrenNodes(),e.rootContainer.children,e.transitionMode,e.footerOffset)}))},getUnderlyingVm:function(e){var t=y(this.getChildrenNodes()||[],e);if(-1===t)return null;var n=this.realList[t];return{index:t,element:n}},getUnderlyingPotencialDraggableComponent:function(e){var t=e.__vue__;return t&&t.$options&&S(t.$options._componentTag)?t.$parent:!("realList"in t)&&1===t.$children.length&&"realList"in t.$children[0]?t.$children[0]:t},emitChanges:function(e){var t=this;this.$nextTick((function(){t.$emit("change",e)}))},alterList:function(e){if(this.list)e(this.list);else{var t=p(this.value);e(t),this.$emit("input",t)}},spliceList:function(){var e=arguments,t=function(t){return t.splice.apply(t,p(e))};this.alterList(t)},updatePosition:function(e,t){var n=function(n){return n.splice(t,0,n.splice(e,1)[0])};this.alterList(n)},getRelatedContextFromMoveEvent:function(e){var t=e.to,n=e.related,r=this.getUnderlyingPotencialDraggableComponent(t);if(!r)return{component:r};var i=r.realList,o={list:i,component:r};if(t!==n&&i&&r.getUnderlyingVm){var s=r.getUnderlyingVm(n);if(s)return Object.assign(s,o)}return o},getVmIndex:function(e){var t=this.visibleIndexes,n=t.length;return e>n-1?n:t[e]},getComponent:function(){return this.$slots.default[0].componentInstance},resetTransitionData:function(e){if(this.noTransitionOnDrag&&this.transitionMode){var t=this.getChildrenNodes();t[e].data=null;var n=this.getComponent();n.children=[],n.kept=void 0}},onDragStart:function(e){this.context=this.getUnderlyingVm(e.item),e.item._underlying_vm_=this.clone(this.context.element),k=e.item},onDragAdd:function(e){var t=e.item._underlying_vm_;if(void 0!==t){Object(v["d"])(e.item);var n=this.getVmIndex(e.newIndex);this.spliceList(n,0,t),this.computeIndexes();var r={element:t,newIndex:n};this.emitChanges({added:r})}},onDragRemove:function(e){if(Object(v["c"])(this.rootContainer,e.item,e.oldIndex),"clone"!==e.pullMode){var t=this.context.index;this.spliceList(t,1);var n={element:this.context.element,oldIndex:t};this.resetTransitionData(t),this.emitChanges({removed:n})}else Object(v["d"])(e.clone)},onDragUpdate:function(e){Object(v["d"])(e.item),Object(v["c"])(e.from,e.item,e.oldIndex);var t=this.context.index,n=this.getVmIndex(e.newIndex);this.updatePosition(t,n);var r={element:this.context.element,oldIndex:t,newIndex:n};this.emitChanges({moved:r})},updateProperty:function(e,t){e.hasOwnProperty(t)&&(e[t]+=this.headerOffset)},computeFutureIndex:function(e,t){if(!e.element)return 0;var n=p(t.to.children).filter((function(e){return"none"!==e.style["display"]})),r=n.indexOf(t.related),i=e.component.getVmIndex(r),o=-1!==n.indexOf(k);return o||!t.willInsertAfter?i:i+1},onDragMove:function(e,t){var n=this.move;if(!n||!this.realList)return!0;var r=this.getRelatedContextFromMoveEvent(e),i=this.context,o=this.computeFutureIndex(r,e);Object.assign(i,{futureIndex:o});var s=Object.assign({},e,{relatedContext:r,draggedContext:i});return n(s,t)},onDragEnd:function(){this.computeIndexes(),k=null}}};"undefined"!==typeof window&&"Vue"in window&&window.Vue.component("draggable",A);var P=A;t["default"]=P}})["default"]}))},b9c7:function(e,t,n){n("e507"),e.exports=n("5524").Object.assign},ba01:function(e,t,n){e.exports=n("051b")},bc3a:function(e,t,n){e.exports=n("cee4")},c04e:function(e,t,n){var r=n("861d");e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},c098:function(e,t,n){e.exports=n("d4af")},c1ac:function(e,t,n){"use strict";var r=n("ebb5"),i=n("b727").filter,o=n("4840"),s=r.aTypedArray,a=r.aTypedArrayConstructor,c=r.exportTypedArrayMethod;c("filter",(function(e){var t=i(s(this),e,arguments.length>1?arguments[1]:void 0),n=o(this,this.constructor),r=0,c=t.length,u=new(a(n))(c);while(c>r)u[r]=t[r++];return u}))},c345:function(e,t,n){"use strict";var r=n("c532"),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,o,s={};return e?(r.forEach(e.split("\n"),(function(e){if(o=e.indexOf(":"),t=r.trim(e.substr(0,o)).toLowerCase(),n=r.trim(e.substr(o+1)),t){if(s[t]&&i.indexOf(t)>=0)return;s[t]="set-cookie"===t?(s[t]?s[t]:[]).concat([n]):s[t]?s[t]+", "+n:n}})),s):s}},c401:function(e,t,n){"use strict";var r=n("c532");e.exports=function(e,t,n){return r.forEach(n,(function(n){e=n(e,t)})),e}},c430:function(e,t){e.exports=!1},c532:function(e,t,n){"use strict";var r=n("1d2b"),i=n("044b"),o=Object.prototype.toString;function s(e){return"[object Array]"===o.call(e)}function a(e){return"[object ArrayBuffer]"===o.call(e)}function c(e){return"undefined"!==typeof FormData&&e instanceof FormData}function u(e){var t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer,t}function f(e){return"string"===typeof e}function d(e){return"number"===typeof e}function l(e){return"undefined"===typeof e}function p(e){return null!==e&&"object"===typeof e}function h(e){return"[object Date]"===o.call(e)}function m(e){return"[object File]"===o.call(e)}function v(e){return"[object Blob]"===o.call(e)}function g(e){return"[object Function]"===o.call(e)}function y(e){return p(e)&&g(e.pipe)}function b(e){return"undefined"!==typeof URLSearchParams&&e instanceof URLSearchParams}function _(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}function w(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)}function S(e,t){if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),s(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}function x(){var e={};function t(t,n){"object"===typeof e[n]&&"object"===typeof t?e[n]=x(e[n],t):e[n]=t}for(var n=0,r=arguments.length;n<r;n++)S(arguments[n],t);return e}function C(e,t,n){return S(t,(function(t,i){e[i]=n&&"function"===typeof t?r(t,n):t})),e}e.exports={isArray:s,isArrayBuffer:a,isBuffer:i,isFormData:c,isArrayBufferView:u,isString:f,isNumber:d,isObject:p,isUndefined:l,isDate:h,isFile:m,isBlob:v,isFunction:g,isStream:y,isURLSearchParams:b,isStandardBrowserEnv:w,forEach:S,merge:x,extend:C,trim:_}},c6b6:function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},c6cd:function(e,t,n){var r=n("da84"),i=n("ce4e"),o="__core-js_shared__",s=r[o]||i(o,{});e.exports=s},c8af:function(e,t,n){"use strict";var r=n("c532");e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},c8ba:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}e.exports=n},c8d2:function(e,t,n){var r=n("d039"),i=n("5899"),o="​᠎";e.exports=function(e){return r((function(){return!!i[e]()||o[e]()!=o||i[e].name!==e}))}},c901:function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},c975:function(e,t,n){"use strict";var r=n("23e7"),i=n("4d64").indexOf,o=n("a640"),s=n("ae40"),a=[].indexOf,c=!!a&&1/[1].indexOf(1,-0)<0,u=o("indexOf"),f=s("indexOf",{ACCESSORS:!0,1:0});r({target:"Array",proto:!0,forced:c||!u||!f},{indexOf:function(e){return c?a.apply(this,arguments)||0:i(this,e,arguments.length>1?arguments[1]:void 0)}})},ca84:function(e,t,n){var r=n("5135"),i=n("fc6a"),o=n("4d64").indexOf,s=n("d012");e.exports=function(e,t){var n,a=i(e),c=0,u=[];for(n in a)!r(s,n)&&r(a,n)&&u.push(n);while(t.length>c)r(a,n=t[c++])&&(~o(u,n)||u.push(n));return u}},ca91:function(e,t,n){"use strict";var r=n("ebb5"),i=n("d58f").left,o=r.aTypedArray,s=r.exportTypedArrayMethod;s("reduce",(function(e){return i(o(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)}))},caad:function(e,t,n){"use strict";var r=n("23e7"),i=n("4d64").includes,o=n("44d2"),s=n("ae40"),a=s("indexOf",{ACCESSORS:!0,1:0});r({target:"Array",proto:!0,forced:!a},{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),o("includes")},cc12:function(e,t,n){var r=n("da84"),i=n("861d"),o=r.document,s=i(o)&&i(o.createElement);e.exports=function(e){return s?o.createElement(e):{}}},cc15:function(e,t,n){var r=n("b367")("wks"),i=n("8b1a"),o=n("ef08").Symbol,s="function"==typeof o,a=e.exports=function(e){return r[e]||(r[e]=s&&o[e]||(s?o:i)("Symbol."+e))};a.store=r},cca6:function(e,t,n){var r=n("23e7"),i=n("60da");r({target:"Object",stat:!0,forced:Object.assign!==i},{assign:i})},cd26:function(e,t,n){"use strict";var r=n("ebb5"),i=r.aTypedArray,o=r.exportTypedArrayMethod,s=Math.floor;o("reverse",(function(){var e,t=this,n=i(t).length,r=s(n/2),o=0;while(o<r)e=t[o],t[o++]=t[--n],t[n]=e;return t}))},cdf9:function(e,t,n){var r=n("825a"),i=n("861d"),o=n("f069");e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=o.f(e),s=n.resolve;return s(t),n.promise}},ce4e:function(e,t,n){var r=n("da84"),i=n("9112");e.exports=function(e,t){try{i(r,e,t)}catch(n){r[e]=t}return t}},ce7a:function(e,t,n){var r=n("9c0e"),i=n("0983"),o=n("5a94")("IE_PROTO"),s=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?s:null}},cee4:function(e,t,n){"use strict";var r=n("c532"),i=n("1d2b"),o=n("0a06"),s=n("2444");function a(e){var t=new o(e),n=i(o.prototype.request,t);return r.extend(n,o.prototype,t),r.extend(n,t),n}var c=a(s);c.Axios=o,c.create=function(e){return a(r.merge(s,e))},c.Cancel=n("7a77"),c.CancelToken=n("8df4"),c.isCancel=n("2e67"),c.all=function(e){return Promise.all(e)},c.spread=n("0df6"),e.exports=c,e.exports.default=c},d012:function(e,t){e.exports={}},d039:function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},d066:function(e,t,n){var r=n("428f"),i=n("da84"),o=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?o(r[e])||o(i[e]):r[e]&&r[e][t]||i[e]&&i[e][t]}},d139:function(e,t,n){"use strict";var r=n("ebb5"),i=n("b727").find,o=r.aTypedArray,s=r.exportTypedArrayMethod;s("find",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},d16a:function(e,t,n){var r=n("fc5e"),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},d1e7:function(e,t,n){"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,o=i&&!r.call({1:2},1);t.f=o?function(e){var t=i(this,e);return!!t&&t.enumerable}:r},d28b:function(e,t,n){var r=n("746f");r("iterator")},d2bb:function(e,t,n){var r=n("825a"),i=n("3bbe");e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,e.call(n,[]),t=n instanceof Array}catch(o){}return function(n,o){return r(n),i(o),t?e.call(n,o):n.__proto__=o,n}}():void 0)},d3b7:function(e,t,n){var r=n("00ee"),i=n("6eeb"),o=n("b041");r||i(Object.prototype,"toString",o,{unsafe:!0})},d44e:function(e,t,n){var r=n("9bf2").f,i=n("5135"),o=n("b622"),s=o("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,s)&&r(e,s,{configurable:!0,value:t})}},d4af:function(e,t,n){"use strict";var r=n("8eb7"),i=n("7b3e"),o=10,s=40,a=800;function c(e){var t=0,n=0,r=0,i=0;return"detail"in e&&(n=e.detail),"wheelDelta"in e&&(n=-e.wheelDelta/120),"wheelDeltaY"in e&&(n=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=n,n=0),r=t*o,i=n*o,"deltaY"in e&&(i=e.deltaY),"deltaX"in e&&(r=e.deltaX),(r||i)&&e.deltaMode&&(1==e.deltaMode?(r*=s,i*=s):(r*=a,i*=a)),r&&!t&&(t=r<1?-1:1),i&&!n&&(n=i<1?-1:1),{spinX:t,spinY:n,pixelX:r,pixelY:i}}c.getEventType=function(){return r.firefox()?"DOMMouseScroll":i("wheel")?"wheel":"mousewheel"},e.exports=c},d58f:function(e,t,n){var r=n("1c0b"),i=n("7b0b"),o=n("44ad"),s=n("50c4"),a=function(e){return function(t,n,a,c){r(n);var u=i(t),f=o(u),d=s(u.length),l=e?d-1:0,p=e?-1:1;if(a<2)while(1){if(l in f){c=f[l],l+=p;break}if(l+=p,e?l<0:d<=l)throw TypeError("Reduce of empty array with no initial value")}for(;e?l>=0:d>l;l+=p)l in f&&(c=n(c,f[l],l,u));return c}};e.exports={left:a(!1),right:a(!0)}},d5d6:function(e,t,n){"use strict";var r=n("ebb5"),i=n("b727").forEach,o=r.aTypedArray,s=r.exportTypedArrayMethod;s("forEach",(function(e){i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},d784:function(e,t,n){"use strict";n("ac1f");var r=n("6eeb"),i=n("d039"),o=n("b622"),s=n("9263"),a=n("9112"),c=o("species"),u=!i((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),f=function(){return"$0"==="a".replace(/./,"$0")}(),d=o("replace"),l=function(){return!!/./[d]&&""===/./[d]("a","$0")}(),p=!i((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));e.exports=function(e,t,n,d){var h=o(e),m=!i((function(){var t={};return t[h]=function(){return 7},7!=""[e](t)})),v=m&&!i((function(){var t=!1,n=/a/;return"split"===e&&(n={},n.constructor={},n.constructor[c]=function(){return n},n.flags="",n[h]=/./[h]),n.exec=function(){return t=!0,null},n[h](""),!t}));if(!m||!v||"replace"===e&&(!u||!f||l)||"split"===e&&!p){var g=/./[h],y=n(h,""[e],(function(e,t,n,r,i){return t.exec===s?m&&!i?{done:!0,value:g.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),{REPLACE_KEEPS_$0:f,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:l}),b=y[0],_=y[1];r(String.prototype,e,b),r(RegExp.prototype,h,2==t?function(e,t){return _.call(e,this,t)}:function(e){return _.call(e,this)})}d&&a(RegExp.prototype[h],"sham",!0)}},d81d:function(e,t,n){"use strict";var r=n("23e7"),i=n("b727").map,o=n("1dde"),s=n("ae40"),a=o("map"),c=s("map");r({target:"Array",proto:!0,forced:!a||!c},{map:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},d925:function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},da84:function(e,t,n){(function(t){var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||Function("return this")()}).call(this,n("c8ba"))},dbb4:function(e,t,n){var r=n("23e7"),i=n("83ab"),o=n("56ef"),s=n("fc6a"),a=n("06cf"),c=n("8418");r({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(e){var t,n,r=s(e),i=a.f,u=o(r),f={},d=0;while(u.length>d)n=i(r,t=u[d++]),void 0!==n&&c(f,t,n);return f}})},dcd0:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[!0===e.showChooseBtn&&!0===e.isModal?n("div",{on:{click:e.handleOpen}},[e._t("openImgCutter"),e._t("open")],2):e._e(),e.$slots.openImgCutter||e.$slots.open||!0!==e.isModal?e._e():n("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:e.handleOpen}},[e._v(e._s(e.label))]),n("transition",{attrs:{name:"fade"}},[e.visible?n("div",{ref:"mask",class:!0===e.isModal?"mask vue-img-cutter":""},[e.visible?n("div",{class:!0===e.isModal?"dialogBoxModal":"dialogBox"},[n("transition",{attrs:{name:"fade","enter-class":"fade-in-enter","enter-active-class":"fade-in-active","leave-class":"fade-out-enter","leave-active-class":"fade-out-active"}},[n("div",{ref:"dialogMainModalRef",class:!0===e.isModal?"dialogMainModal":"dialogMain",style:"width:"+(!0===e.isModal?e.boxWidth+32:e.boxWidth)+"px"},[n("div",{staticClass:"toolMain"},[!0===e.isModal?n("div",{staticClass:"tool-title"},[e._v(" 图片裁剪 "),n("span",{staticClass:"closeIcon",on:{click:e.handleClose}},[e._v("×")])]):e._e(),n("div",{ref:"toolBox",staticClass:"toolBox",style:"height:"+e.boxHeight+"px;width:"+e.boxWidth+"px",on:{mousemove:e.controlBtnMouseMove,mouseup:e.controlBtnMouseUp,mouseleave:e.controlBtnMouseUp}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!e.drawImg.img&&!0===e.showChooseBtn,expression:"!drawImg.img && showChooseBtn===true"}],staticClass:"tips"},[n("div",{staticClass:"btn btn-warning btn-xs",on:{click:e.chooseImg}},[e._v(e._s(e.label))])]),1==e.tool?n("div",{directives:[{name:"show",rawName:"v-show",value:this.drawImg.img&&!0!==e.dropImg.active&&1==e.controlBox.disable&&1==e.toolBox.disable,expression:"this.drawImg.img && dropImg.active!==true && controlBox.disable==true && toolBox.disable==true"}],staticClass:"dockMain",style:"background:"+this.toolBgc,on:{mouseenter:e.dropImgOff}},[e.rate?n("div",{staticClass:"dockBtn"},[e._t("ratio",[e._v(" Ratio: ")]),e._v(" "+e._s(e.rate)+" ")],2):e._e(),n("div",{staticClass:"dockBtn",on:{click:e.scaleReset}},[e._t("scaleReset",[e._v(" Scale: ")]),e._v(" "+e._s(e.drawImg.swidth>0?(e.drawImg.width/e.drawImg.swidth).toFixed(2):"-")+" ")],2),!1===e.originalGraph?n("div",{staticClass:"dockBtn",on:{click:function(t){return e.turnImg(-90)}}},[e._t("turnLeft",[e._v(" ↳ ")])],2):e._e(),!1===e.originalGraph?n("div",{staticClass:"dockBtn",on:{click:function(t){return e.turnImg(90)}}},[e._t("turnRight",[e._v(" ↲ ")])],2):e._e(),!1===e.originalGraph?n("div",{staticClass:"dockBtn",on:{click:function(t){return e.turnReset()}}},[e._t("reset",[e._v(" ↻ ")])],2):e._e(),!1===e.originalGraph?n("div",{staticClass:"dockBtnScrollBar"},[n("div",{ref:"dockBtnScrollControl",staticClass:"scrollBarControl",style:"left:"+e.rotateControl.position+"px",on:{mousemove:e.scrollBarControlMove,mousedown:e.scrollBarControlOn,mouseleave:e.scrollBarControlOff,mouseup:e.scrollBarControlOff}}),1==e.rotateControl.active?n("div",{staticClass:"scrollBarText",style:"left:"+e.rotateControl.position+"px"},[e._v(" "+e._s(e.rotateImg.angle.toFixed(0)+"°")+" ")]):e._e()]):e._e(),!1===e.originalGraph?n("div",{staticClass:"dockBtn",on:{click:e.flipHorizontal}},[e._t("flipHorizontal",[e._v(" ⇆ ")])],2):e._e(),!1===e.originalGraph?n("div",{staticClass:"dockBtn",on:{click:e.flipVertically}},[e._t("turnRight",[e._v(" ⇅ ")])],2):e._e()]):e._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:null!=e.drawImg.img,expression:"drawImg.img!=null"}],ref:"toolBoxControl",staticClass:"toolBoxControl",on:{mousedown:e.toolBoxMouseDown,mouseup:e.toolBoxMouseUp,mousemove:e.toolBoxMouseMove,mouseleave:e.toolBoxMouseLeave}},[n("div",{staticClass:"toolBoxControlBox"},[n("div",{staticClass:"controlBox"},[n("div",{staticClass:"controlBoxInnerLine controlBoxInnerLineTop"}),n("div",{staticClass:"controlBoxInnerLine controlBoxInnerLineBottom"}),n("div",{staticClass:"controlBoxInnerLine controlBoxInnerLineLeft"}),n("div",{staticClass:"controlBoxInnerLine controlBoxInnerLineRight"}),!1===e.originalGraph?n("div",{staticClass:"selectArea"},[e._v(" 宽:"+e._s(e.toolBox.width)+" 高:"+e._s(e.toolBox.height)+" (x:"+e._s(e.toolBoxPosition.x)+",y:"+e._s(e.toolBoxPosition.y)+") ")]):e._e(),!0===e.originalGraph?n("div",{staticClass:"selectArea"},[e._v(" 宽:"+e._s((e.toolBox.width/(e.drawImg.width/e.drawImg.swidth)).toFixed(0))+" 高:"+e._s((e.toolBox.height/(e.drawImg.width/e.drawImg.swidth)).toFixed(0))+" (x:"+e._s(e.toolBoxPosition.x)+",y:"+e._s(e.toolBoxPosition.y)+") ")]):e._e(),!0===e.sizeChange?n("div",{staticClass:"leftUp controlBtn",attrs:{"data-name":"leftUp"},on:{mousedown:function(t){return e.controlBtnMouseDown(t,"leftUp")}}}):e._e(),!0===e.sizeChange?n("div",{staticClass:"leftDown controlBtn",attrs:{"data-name":"leftDown"},on:{mousedown:function(t){return e.controlBtnMouseDown(t,"leftDown")}}}):e._e(),!0===e.sizeChange?n("div",{staticClass:"rightUp controlBtn",attrs:{"data-name":"rightUp"},on:{mousedown:function(t){return e.controlBtnMouseDown(t,"rightUp")}}}):e._e(),!0===e.sizeChange?n("div",{staticClass:"rightDown controlBtn",attrs:{"data-name":"rightDown"},on:{mousedown:function(t){return e.controlBtnMouseDown(t,"rightDown")}}}):e._e(),!0===e.sizeChange&&!e.rate&&this.toolBox.width>20?n("div",{staticClass:"topCenter controlBtn",attrs:{"data-name":"topCenter"},on:{mousedown:function(t){return e.controlBtnMouseDown(t,"topCenter")}}}):e._e(),!0===e.sizeChange&&!e.rate&&this.toolBox.width>20?n("div",{staticClass:"downCenter controlBtn",attrs:{"data-name":"downCenter"},on:{mousedown:function(t){return e.controlBtnMouseDown(t,"downCenter")}}}):e._e(),!0===e.sizeChange&&!e.rate&&this.toolBox.height>20?n("div",{staticClass:"leftCenter controlBtn",attrs:{"data-name":"leftCenter"},on:{mousedown:function(t){return e.controlBtnMouseDown(t,"leftCenter")}}}):e._e(),!0===e.sizeChange&&!e.rate&&this.toolBox.height>20?n("div",{staticClass:"rightCenter controlBtn",attrs:{"data-name":"rightCenter"},on:{mousedown:function(t){return e.controlBtnMouseDown(t,"rightCenter")}}}):e._e()]),n("div",{staticClass:"toolBoxControlLine toolBoxControlLineItem-1"}),n("div",{staticClass:"toolBoxControlLine toolBoxControlLineItem-2"}),n("div",{staticClass:"toolBoxControlLine toolBoxControlLineItem-3"}),n("div",{staticClass:"toolBoxControlLine toolBoxControlLineItem-4"})])]),n("div",{staticClass:"copyright"},[e.DoNotDisplayCopyright?e._e():n("a",{attrs:{target:"_blank",href:"https://github.com/acccccccb/vue-img-cutter",rel:"nofollow"}},[e._v("vue-img-cutter "+e._s(e.version))])]),n("canvas",{ref:"canvasSelectBox",staticClass:"canvasSelectBox",attrs:{width:e.boxWidth,height:e.boxHeight},on:{mousedown:e.dropImgOn,mouseup:e.dropImgOff,mousemove:e.dropImgMove}}),n("canvas",{ref:"canvas",staticClass:"canvas",attrs:{width:e.boxWidth,height:e.boxHeight}})])]),n("div",{staticClass:"i-dialog-footer"},[n("input",{ref:"inputFile",staticStyle:{width:"1px",height:"1px",border:"none",opacity:"0"},attrs:{type:"file",accept:"image/gif, image/jpeg ,image/png"},on:{change:e.putImgToCanv}}),n("span",{on:{click:e.chooseImg}},[e._t("choose",[!0===e.showChooseBtn?n("div",{staticClass:"btn btn-primary btn-primary-plain"},[e._v(e._s(e.label))]):e._e()])],2),n("div",{staticClass:"btn-group fr"},[n("span",{on:{click:e.handleClose}},[e._t("cancel",[n("button",{staticClass:"btn btn-default",attrs:{type:"button"}},[e._v("取消")])])],2),n("span",{on:{click:function(t){return e.cropPicture(!1)}}},[e._t("confirm",[n("button",{staticClass:"btn btn-primary",staticStyle:{"margin-left":"15px"},attrs:{type:"button",disabled:!e.drawImg.img}},[e._v("确定")])])],2)])])])]),n("div",{staticStyle:{clear:"both"}})],1):e._e()]):e._e()])],1)},i=[],o=(n("c975"),n("ace4"),n("b0c0"),n("a9e3"),n("d3b7"),n("ac1f"),n("466d"),n("1276"),n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("5530")),s=n("53ca"),a=n("46d2"),c={name:"ImgCutter",props:{crossOrigin:{type:Boolean,default:!1,required:!1},crossOriginHeader:{type:String,default:"*",required:!1},label:{type:String,default:"选择图片",required:!1},isModal:{type:Boolean,default:!0,required:!1},lockScroll:{type:Boolean,default:!0,required:!1},showChooseBtn:{type:Boolean,default:!0,required:!1},boxWidth:{type:Number,default:800,required:!1},boxHeight:{type:Number,default:400,required:!1},cutWidth:{type:Number,default:200,required:!1},cutHeight:{type:Number,default:200,required:!1},rate:{type:String,default:null,required:!1},tool:{type:Boolean,default:!0,required:!1},toolBgc:{type:String,default:"#fff",required:!1},sizeChange:{type:Boolean,default:!0,required:!1},originalGraph:{type:Boolean,default:!1,required:!1},moveAble:{type:Boolean,default:!0,required:!1},CuttingOriginal:{type:Boolean,default:!1,required:!1},WatermarkText:{type:String,default:"",required:!1},WatermarkTextFont:{type:String,default:"12px Sans-serif",required:!1},WatermarkTextColor:{type:String,default:"#fff",required:!1},WatermarkTextX:{type:Number,default:.95,required:!1},WatermarkTextY:{type:Number,default:.95,required:!1},smallToUpload:{type:Boolean,default:!1,required:!1},saveCutPosition:{type:Boolean,default:!1,required:!1},scaleAble:{type:Boolean,default:!0,required:!1},DoNotDisplayCopyright:{type:Boolean,default:!1,required:!1}},model:["label","boxWidth","boxHeight","rate","tool","DoNotDisplayCopyright"],data:function(){var e,t;return e=this.boxWidth/2,t=this.boxHeight/2,{version:"",visible:!1,fileName:"",cutImageObj:null,onPrintImgTimmer:null,toolBoxPosition:{x:0,y:0},drawImg:{img:null,sx:0,sy:0,swidth:0,sheight:0,x:0,y:0,width:0,height:0},toolBox:{disable:!0,width:e,height:t,x:0,y:0,boxMove:{start:{x:0,y:0},moveTo:{x:0,y:0}}},dropImg:{active:!1,pageX:0,pageY:0,params:{}},rotateImg:{angle:0},rotateControl:{active:!1,start:{x:0,y:0},position:100},scaleImg:{rate:0,params:{}},controlBox:{disable:!0,btnName:"",start:{x:0,y:0,width:0,height:0}},selectBox:!1,selectBoxColor:"rgba(0,0,0,0.6)",isFlipHorizontal:!1,isFlipVertically:!1}},mounted:function(){var e=this;this.version=a.version,!1===this.isModal&&(this.visible=!0,this.$nextTick((function(){e.$refs["toolBox"].onmousewheel=e.scaleImgWheel,e.$refs["toolBox"].addEventListener("DOMMouseScroll",e.scaleImgWheel)})))},methods:{handleOpen:function(e){var t=this,n=this,r=function(e){if(n.$refs["toolBox"].onmousewheel=t.scaleImgWheel,n.$refs["toolBox"].addEventListener("DOMMouseScroll",t.scaleImgWheel),!0===n.isModal){!0===n.lockScroll&&(document.body.style.overflowY="hidden");var r=n.$refs["dialogMainModalRef"].offsetHeight+200,i=window.innerHeight,o=n.$refs["mask"];o.style.overflowY=r>i?"scroll":"hidden"}e&&"function"===typeof e&&e()};if(e&&"object"==Object(s["a"])(e)&&e.src){if(!e.name)throw new Error("传入参数必须包含：src,name");var i=new Image;!0===this.crossOrigin&&(i.crossOrigin=this.crossOriginHeader),i.name=e.name,i.style.position="fixed",i.style.top=-5e3,i.style.opacity=0,i.onerror=function(e){console.error("图片加载失败"),n.$emit("error",{event:e,msg:"图片加载失败"}),n.clearCutImageObj()},i.onload=function(){if(!0!==i.complete)throw new Error("图片加载失败");n.visible=!0,n.$nextTick((function(){r((function(){n.importImgToCanv(i)}))}))},i.src=e.src,this.cutImageObj=i,document.body.appendChild(i),this.$emit("onChooseImg",e)}else n.visible=!0,n.$nextTick((function(){r()}))},handleClose:function(){var e=this;this.clearAll(),!0===this.isModal&&(!0===this.lockScroll&&(document.body.style.overflowY="scroll"),this.$nextTick((function(){e.visible=!1})))},chooseImg:function(){this.$refs["inputFile"].click()},importImgToCanv:function(e){var t=this;t.fileName=e.name;var n,r=e.height,i=e.width,s=t.boxWidth,a=t.boxHeight,c=Object(o["a"])({},t.drawImg);c.img=e,t.scaleImg.rate=i/r,r<a&&i<s?(n=1,c.x=(s-i)/2,c.y=(a-r)/2):i/r<=s/a?(n=a/r,c.x=(s-i*n)/2):(n=s/i,c.y=(a-r*n)/2),c.swidth=i,c.sheight=r,c.width=i*n,c.height=r*n,c.x=(s-c.width)/2,c.y=(a-c.height)/2,t.$set(t,"drawImg",c),t.printImg(),t.putToolBox()},putImgToCanv:function(e){var t,n=this;if(!e.target.files)return console.error("IE9及以下需要自己传入image对象"),!1;if(t=e.target.files[0]||null,t){this.fileName=t.name;var r=new FileReader;new Image,r.readAsDataURL(t),r.onload=function(e){var i=e.target.result,s=document.createElement("img");s.src=i;var a=setInterval((function(){if(2==r.readyState){if(clearInterval(a),!n.sizeChange&&n.smallToUpload&&s.width<=n.cutWidth&&s.height<=n.cutHeight)return n.handleClose(),void n.$emit("cutDown",{filename:t.name,file:t});var e,i=s.height,c=s.width,u=n.boxWidth,f=n.boxHeight,d=Object(o["a"])({},n.drawImg);d.img=s,n.scaleImg.rate=c/i,i<f&&c<u?(e=1,d.x=(u-c)/2,d.y=(f-i)/2):c/i<=u/f?(e=f/i,d.x=(u-c*e)/2):(e=u/c,d.y=(f-i*e)/2),d.swidth=c,d.sheight=i,d.width=c*e,d.height=i*e,d.x=(u-d.width)/2,d.y=(f-d.height)/2,n.$set(n,"drawImg",d),n.printImg(),n.putToolBox()}}),200)},this.$emit("onChooseImg",t)}},putToolBox:function(){this.toolBox.width!==this.boxWidth/2&&this.toolBox.height!==this.boxHeight/2&&!1!==this.saveCutPosition||(this.toolBox.width=this.cutWidth>this.boxWidth?this.boxWidth:this.cutWidth,this.toolBox.height=this.cutHeight>this.boxHeight?this.boxHeight:this.cutHeight),(0===this.toolBox.x&&0===this.toolBox.y||!1===this.saveCutPosition)&&(this.toolBox.x=this.boxWidth/2-this.toolBox.width/2,this.toolBox.y=this.boxHeight/2-this.toolBox.height/2),this.drawControlBox(this.toolBox.width,this.toolBox.height,this.toolBox.x,this.toolBox.y)},isSupportFileApi:function(){return!!(window.File&&window.FileList&&window.FileReader&&window.Blob&&-1===navigator.userAgent.indexOf("Edge")&&-1===navigator.userAgent.indexOf("MSIE")&&-1===navigator.userAgent.indexOf("Trident"))},dataURLtoFile:function(e,t){var n=e.split(","),r=n[0].match(/:(.*?);/)[1],i=atob(n[1]),o=i.length,s=new Uint8Array(o);while(o--)s[o]=i.charCodeAt(o);if(this.isSupportFileApi()){var a=new File([s],t,{type:r});return a}return"不支持File对象"},clearAll:function(){var e=this,t=e.$refs["canvas"],n=t.getContext("2d");n.clearRect(0,0,t.width,t.height);var r=e.$refs["canvasSelectBox"],i=r.getContext("2d");i.clearRect(0,0,r.width,r.height);var o=e.drawImg.sx,s=e.drawImg.sy;this.drawImg={img:null,sx:o,sy:s,swidth:0,sheight:0,x:0,y:0,width:0,height:0},this.isFlipHorizontal=!1,this.isFlipVertically=!1,this.$refs["inputFile"].value="",this.rotateImg.angle=0,this.drawImg.img=null,this.turnReset(),this.clearCutImageObj(),this.$emit("onClearAll")},clearCutImageObj:function(){null!==this.cutImageObj&&void 0!==this.cutImageObj&&("function"===typeof this.cutImageObj.remove?this.cutImageObj.remove():this.cutImageObj.removeNode()),this.cutImageObj=null},drawControlBox:function(e,t,n,r){var i=this;e>this.boxWidth&&(e=this.boxWidth),t>this.boxHeight&&(t=this.boxHeight),n<0&&(n=0),r<0&&(r=0);var o,s,a=this.$refs["toolBoxControl"],c=this.$refs["canvasSelectBox"],u=c.getContext("2d");if(u.fillStyle=this.selectBoxColor,u.clearRect(0,0,c.width,c.height),u.fillRect(0,0,c.width,c.height),this.rate&&""!==this.rate){var f=this.rate.split(":")[0]/this.rate.split(":")[1];f>=1?(o=e,s=e/f):(o=t*f,s=t)}else o=e,s=t;this.toolBox.width=o,this.toolBox.height=s,a.style.width=Math.abs(o)+"px",a.style.height=Math.abs(s)+"px",this.toolBox.boxMove.moveTo.x=n,this.toolBox.boxMove.moveTo.y=r,o<0&&(n+=o),s<0&&(r+=s),n+this.toolBox.width>this.boxWidth&&(n=this.boxWidth-this.toolBox.width),n<0&&(n=0),r+this.toolBox.height>this.boxHeight&&(r=this.boxHeight-this.toolBox.height),r<0&&(r=0),this.toolBoxPosition.x=n,this.toolBoxPosition.y=r,a.style.left=n+"px",a.style.top=r+"px",u.clearRect(n,r,Math.abs(o),Math.abs(s)),this.onPrintImgTimmer&&clearTimeout(this.onPrintImgTimmer),this.onPrintImgTimmer=setTimeout((function(){i.cropPicture(!0)}),100)},resetToolBox:function(){this.toolBox.width<0&&(this.toolBox.boxMove.moveTo.x=this.toolBox.x-this.toolBox.width),this.toolBox.height<0&&(this.toolBox.boxMove.moveTo.y=this.toolBox.y-this.toolBox.height),this.toolBox.width=Math.abs(this.toolBox.width),this.toolBox.height=Math.abs(this.toolBox.height)},toolBoxMouseDown:function(e){var t=this.$refs["toolBoxControl"];this.toolBox.x=parseInt(t.style.left.split("px")[0]),this.toolBox.y=parseInt(t.style.top.split("px")[0]),this.toolBox.disable=!1,this.dropImg.active=!1,this.toolBox.boxMove.start={x:e.pageX,y:e.pageY}},toolBoxMouseMove:function(e){if(this.dropImg.active&&this.dropImgMove(e),!1===this.toolBox.disable&&!0===this.moveAble){var t=e.pageX-this.toolBox.boxMove.start.x,n=e.pageY-this.toolBox.boxMove.start.y,r=this.toolBox.x+t,i=this.toolBox.y+n;this.drawControlBox(this.toolBox.width,this.toolBox.height,r,i)}},toolBoxMouseLeave:function(){var e=this;this.toolBox.disable=!0,this.onPrintImgTimmer&&clearTimeout(this.onPrintImgTimmer),this.onPrintImgTimmer=setTimeout((function(){e.cropPicture(!0)}),100),this.resetToolBox()},toolBoxMouseUp:function(e){this.toolBox.x=parseInt(this.toolBoxPosition.x),this.toolBox.y=parseInt(this.toolBoxPosition.y),this.toolBox.disable=!0,this.dropImg.active=!1,this.resetToolBox()},printImg:function(){var e=this;if(this.drawImg.img){var t=this.$refs["canvas"],n=t.getContext("2d");n.font="18px bold 黑体",n.fillStyle="#ff0",n.textAlign="center",n.textBaseline="middle",n.save(),n.clearRect(0,0,t.width,t.height),n.translate(this.drawImg.x+this.drawImg.width/2,this.drawImg.y+this.drawImg.height/2),n.rotate(this.rotateImg.angle*Math.PI/180),n.translate(-(this.drawImg.x+this.drawImg.width/2),-(this.drawImg.y+this.drawImg.height/2)),n.translate(this.drawImg.x,this.drawImg.y),n.scale(this.isFlipHorizontal?-1:1,this.isFlipVertically?-1:1),n.drawImage(this.drawImg.img,this.drawImg.sx,this.drawImg.sy,this.drawImg.swidth,this.drawImg.sheight,this.isFlipHorizontal?-this.drawImg.width:0,this.isFlipVertically?-this.drawImg.height:0,this.drawImg.width,this.drawImg.height),n.translate(-this.drawImg.x,this.drawImg.y),n.restore(),this.onPrintImgTimmer&&clearTimeout(this.onPrintImgTimmer),this.onPrintImgTimmer=setTimeout((function(){e.cropPicture(!0)}),100)}},dropImgOn:function(e){this.dropImg.active=!0,this.dropImg.params=Object(o["a"])({},this.drawImg),this.dropImg.pageX=e.pageX,this.dropImg.pageY=e.pageY},dropImgOff:function(){var e=this;this.dropImg.active=!1,this.onPrintImgTimmer&&clearTimeout(this.onPrintImgTimmer),this.onPrintImgTimmer=setTimeout((function(){e.cropPicture(!0)}),100)},dropImgMove:function(e){var t=this;if(this.dropImg.active&&this.drawImg.img){var n=Object(o["a"])({},t.drawImg);n.x=t.dropImg.params.x-(t.dropImg.pageX-e.pageX),n.y=t.dropImg.params.y-(t.dropImg.pageY-e.pageY),t.$set(t,"drawImg",n),t.printImg(),e.stopPropagation()}},scaleReset:function(){this.drawImg.width=this.drawImg.swidth,this.drawImg.height=this.drawImg.sheight,this.printImg()},scaleImgWheel:function(e){var t=this,n=this;if(n.drawImg.img&&!0===this.scaleAble){var r,i=e||window.event;i.wheelDelta?r=-i.wheelDelta/40:i.detail&&(r=i.detail);var o=50;n.drawImg.x=n.drawImg.width-9*r>o?n.drawImg.x+3*r:n.drawImg.x,n.drawImg.y=n.drawImg.width-9*r>o?n.drawImg.y+3*r:n.drawImg.y,n.drawImg.width=n.drawImg.width-9*r>o?n.drawImg.width-9*r:o,n.drawImg.height=n.drawImg.width/n.scaleImg.rate,n.printImg(),this.onPrintImgTimmer&&clearTimeout(this.onPrintImgTimmer),this.onPrintImgTimmer=setTimeout((function(){t.cropPicture(!0)}),100)}return e.preventDefault(),e.returnValue=!1,!1},flipHorizontal:function(){this.drawImg.img&&(0==this.isFlipHorizontal?this.isFlipHorizontal=!0:this.isFlipHorizontal=!1,this.printImg())},flipVertically:function(){this.drawImg.img&&(0==this.isFlipVertically?this.isFlipVertically=!0:this.isFlipVertically=!1,this.printImg())},turnImg:function(e){var t=this.rotateImg.angle,n=t+e;n>=-180&&n<=180&&(this.rotateImg.angle=n,this.rotateControl.position=n/180*100+100,this.printImg("rotate"))},turnReset:function(){this.rotateImg.angle=0,this.rotateControl.position=100,this.printImg("rotate")},controlBtnMouseDown:function(e,t){this.controlBox.disable=!1,this.controlBox.btnName=t,this.controlBox.start.x=e.clientX,this.controlBox.start.y=e.clientY,this.controlBox.start.width=this.toolBox.width,this.controlBox.start.height=this.toolBox.height,e.stopPropagation()},controlBtnMouseUp:function(e){this.controlBox.disable=!0,this.dropImgOff(),this.resetToolBox(),this.toolBoxMouseUp(),e.stopPropagation()},controlBtnMouseMove:function(e){if(!1===this.controlBox.disable){var t,n,r=e.clientX-this.controlBox.start.x,i=e.clientY-this.controlBox.start.y;"leftUp"==this.controlBox.btnName&&(t=this.toolBox.x+r,n=this.toolBox.y+i,this.toolBox.width=this.controlBox.start.width-r,this.toolBox.height=this.controlBox.start.height-i),"rightUp"==this.controlBox.btnName&&(t=this.toolBox.x,n=this.toolBox.y+i,this.toolBox.width=this.controlBox.start.width+r,this.toolBox.height=this.controlBox.start.height-i),"rightDown"==this.controlBox.btnName&&(t=this.toolBox.x,n=this.toolBox.y,this.toolBox.width=this.controlBox.start.width+r,this.toolBox.height=this.controlBox.start.height+i),"leftDown"==this.controlBox.btnName&&(t=this.toolBox.x+r,n=this.toolBox.y,this.toolBox.width=this.controlBox.start.width-r,this.toolBox.height=this.controlBox.start.height+i),"topCenter"==this.controlBox.btnName&&(t=this.toolBox.x,n=this.toolBox.y+i,this.toolBox.width=this.controlBox.start.width,this.toolBox.height=this.controlBox.start.height-i),"downCenter"==this.controlBox.btnName&&(t=this.toolBox.x,n=this.toolBox.y,this.toolBox.width=this.controlBox.start.width,this.toolBox.height=this.controlBox.start.height+i),"leftCenter"==this.controlBox.btnName&&(t=this.toolBox.x+r,n=this.toolBox.y,this.toolBox.width=this.controlBox.start.width-r,this.toolBox.height=this.controlBox.start.height),"rightCenter"==this.controlBox.btnName&&(t=this.toolBox.x,n=this.toolBox.y,this.toolBox.width=this.controlBox.start.width+r,this.toolBox.height=this.controlBox.start.height),this.drawControlBox(this.toolBox.width,this.toolBox.height,t,n)}e.stopPropagation()},cropPicture:function(e){var t=this;if(this.drawImg.img){var n=this.$refs["canvas"];if(this.WatermarkText&&!e){var r=n.getContext("2d");r.font=this.WatermarkTextFont,r.fillStyle=this.WatermarkTextColor,r.textAlign="right",r.textBaseline="bottom",r.fillText(this.WatermarkText,this.toolBox.x+this.toolBox.width*this.WatermarkTextX,this.toolBox.y+this.toolBox.height*this.WatermarkTextY)}var i=new Image;!0===this.crossOrigin&&(i.crossOrigin=this.crossOriginHeader),i.src=n.toDataURL(),HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,r){window.atob?setTimeout((function(){for(var i=atob(n.toDataURL(t,r).split(",")[1]),o=i.length,s=new Uint8Array(o),a=0;a<o;a++)s[a]=i.charCodeAt(a);e(new Blob([s],{type:t||"image/png"}))}),200):e(!1,{type:"image/png"})}}),n.toBlob((function(n){if(n){var r=new FileReader;r.readAsDataURL(n),r.onload=function(){var n=setInterval((function(){if(2==r.readyState){clearInterval(n);var o=document.createElement("canvas"),s=o.getContext("2d");if(1==t.originalGraph){var a=t.drawImg.width/t.drawImg.swidth,c=t.toolBox.width/a,u=t.toolBox.height/a;o.width=c,o.height=u;var f=(t.toolBox.x-t.drawImg.x)/a,d=(t.toolBox.y-t.drawImg.y)/a,l=t.drawImg.swidth,p=t.drawImg.sheight;s.translate(-f,-d),s.drawImage(t.drawImg.img,0,0,l,p)}else{o.width=t.toolBox.width,o.height=t.toolBox.height;var h=t.toolBox;if(t.rate){var m=t.rate.split(":")[0]/t.rate.split(":")[1],v=t.rate.split(":")[0],g=t.rate.split(":")[1];v>=g?s.drawImage(i,h.x,h.y,h.width,h.width*m,0,0,h.width,h.width*m):s.drawImage(i,h.x,h.y,h.width,h.width/m,0,0,h.width,h.width/m)}else s.drawImage(i,h.x,h.y,h.width,h.height,0,0,h.width,h.height)}o.toBlob((function(n){e?t.$emit("onPrintImg",{fileName:t.fileName,blob:n,file:t.dataURLtoFile(o.toDataURL(),t.fileName),dataURL:o.toDataURL()}):(t.handleClose(),t.$emit("cutDown",{fileName:t.fileName,blob:n,file:t.dataURLtoFile(o.toDataURL(),t.fileName),dataURL:o.toDataURL()}))}),"image/jpeg",.95)}}),200)}}else{var o=document.createElement("canvas");o.width=t.toolBox.width,o.height=t.toolBox.height;var s=o.getContext("2d"),a=t.toolBox;if(t.rate){var c=t.rate.split(":")[0]/t.rate.split(":")[1];s.drawImage(i,a.x,a.y,a.width,a.width*c,0,0,a.width,a.width*c)}else s.drawImage(i,a.x,a.y,a.width,a.height,0,0,a.width,a.height);e?t.$emit("onPrintImg",{fileName:t.fileName,dataURL:o.toDataURL()}):(t.handleClose(),t.$emit("cutDown",{fileName:t.fileName,dataURL:o.toDataURL()}))}}))}else e||(console.warn("No picture selected"),t.$emit("error",{err:1,msg:"No picture selected"}))},scrollBarControlMove:function(e){if(this.rotateControl.active){var t=e.pageX-this.rotateControl.start.x,n=this.rotateControl.start.position+t;n<=0&&(n=0),n>=200&&(n=200),this.rotateControl.position=n,this.rotateImg.angle=(n-100)/100*180,this.printImg()}},scrollBarControlOn:function(e){this.rotateControl.active=!0,this.rotateControl.start.x=e.pageX,this.rotateControl.start.y=e.pageY,this.rotateControl.start.position=this.rotateControl.position},scrollBarControlOff:function(){this.rotateControl.active=!1}}},u=c,f=(n("7a10"),n("2877")),d=Object(f["a"])(u,r,i,!1,null,"83221ac8",null),l=d.exports;t["a"]=l},ddb0:function(e,t,n){var r=n("da84"),i=n("fdbc"),o=n("e260"),s=n("9112"),a=n("b622"),c=a("iterator"),u=a("toStringTag"),f=o.values;for(var d in i){var l=r[d],p=l&&l.prototype;if(p){if(p[c]!==f)try{s(p,c,f)}catch(m){p[c]=f}if(p[u]||s(p,u,d),i[d])for(var h in o)if(p[h]!==o[h])try{s(p,h,o[h])}catch(m){p[h]=o[h]}}}},df75:function(e,t,n){var r=n("ca84"),i=n("7839");e.exports=Object.keys||function(e){return r(e,i)}},df7c:function(e,t,n){(function(e){function n(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e){"string"!==typeof e&&(e+="");var t,n=0,r=-1,i=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!i){n=t+1;break}}else-1===r&&(i=!1,r=t+1);return-1===r?"":e.slice(n,r)}function i(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}t.resolve=function(){for(var t="",r=!1,o=arguments.length-1;o>=-1&&!r;o--){var s=o>=0?arguments[o]:e.cwd();if("string"!==typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(t=s+"/"+t,r="/"===s.charAt(0))}return t=n(i(t.split("/"),(function(e){return!!e})),!r).join("/"),(r?"/":"")+t||"."},t.normalize=function(e){var r=t.isAbsolute(e),s="/"===o(e,-1);return e=n(i(e.split("/"),(function(e){return!!e})),!r).join("/"),e||r||(e="."),e&&s&&(e+="/"),(r?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(i(e,(function(e,t){if("string"!==typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,n){function r(e){for(var t=0;t<e.length;t++)if(""!==e[t])break;for(var n=e.length-1;n>=0;n--)if(""!==e[n])break;return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var i=r(e.split("/")),o=r(n.split("/")),s=Math.min(i.length,o.length),a=s,c=0;c<s;c++)if(i[c]!==o[c]){a=c;break}var u=[];for(c=a;c<i.length;c++)u.push("..");return u=u.concat(o.slice(a)),u.join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!==typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,r=-1,i=!0,o=e.length-1;o>=1;--o)if(t=e.charCodeAt(o),47===t){if(!i){r=o;break}}else i=!1;return-1===r?n?"/":".":n&&1===r?"/":e.slice(0,r)},t.basename=function(e,t){var n=r(e);return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){"string"!==typeof e&&(e+="");for(var t=-1,n=0,r=-1,i=!0,o=0,s=e.length-1;s>=0;--s){var a=e.charCodeAt(s);if(47!==a)-1===r&&(i=!1,r=s+1),46===a?-1===t?t=s:1!==o&&(o=1):-1!==t&&(o=-1);else if(!i){n=s+1;break}}return-1===t||-1===r||0===o||1===o&&t===r-1&&t===n+1?"":e.slice(t,r)};var o="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,n("4362"))},dfe5:function(e,t){},e017:function(e,t,n){(function(t){(function(t,n){e.exports=n()})(0,(function(){"use strict";var e=function(e){var t=e.id,n=e.viewBox,r=e.content;this.id=t,this.viewBox=n,this.content=r};e.prototype.stringify=function(){return this.content},e.prototype.toString=function(){return this.stringify()},e.prototype.destroy=function(){var e=this;["id","viewBox","content"].forEach((function(t){return delete e[t]}))};var n=function(e){var t=!!document.importNode,n=(new DOMParser).parseFromString(e,"image/svg+xml").documentElement;return t?document.importNode(n,!0):n};"undefined"!==typeof window?window:"undefined"!==typeof t||"undefined"!==typeof self&&self;function r(e,t){return t={exports:{}},e(t,t.exports),t.exports}var i=r((function(e,t){(function(t,n){e.exports=n()})(0,(function(){function e(e){var t=e&&"object"===typeof e;return t&&"[object RegExp]"!==Object.prototype.toString.call(e)&&"[object Date]"!==Object.prototype.toString.call(e)}function t(e){return Array.isArray(e)?[]:{}}function n(n,r){var i=r&&!0===r.clone;return i&&e(n)?o(t(n),n,r):n}function r(t,r,i){var s=t.slice();return r.forEach((function(r,a){"undefined"===typeof s[a]?s[a]=n(r,i):e(r)?s[a]=o(t[a],r,i):-1===t.indexOf(r)&&s.push(n(r,i))})),s}function i(t,r,i){var s={};return e(t)&&Object.keys(t).forEach((function(e){s[e]=n(t[e],i)})),Object.keys(r).forEach((function(a){e(r[a])&&t[a]?s[a]=o(t[a],r[a],i):s[a]=n(r[a],i)})),s}function o(e,t,o){var s=Array.isArray(t),a=o||{arrayMerge:r},c=a.arrayMerge||r;return s?Array.isArray(e)?c(e,t,o):n(t,o):i(e,t,o)}return o.all=function(e,t){if(!Array.isArray(e)||e.length<2)throw new Error("first argument should be an array with at least two elements");return e.reduce((function(e,n){return o(e,n,t)}))},o}))})),o=r((function(e,t){var n={svg:{name:"xmlns",uri:"http://www.w3.org/2000/svg"},xlink:{name:"xmlns:xlink",uri:"http://www.w3.org/1999/xlink"}};t.default=n,e.exports=t.default})),s=function(e){return Object.keys(e).map((function(t){var n=e[t].toString().replace(/"/g,"&quot;");return t+'="'+n+'"'})).join(" ")},a=o.svg,c=o.xlink,u={};u[a.name]=a.uri,u[c.name]=c.uri;var f=function(e,t){void 0===e&&(e="");var n=i(u,t||{}),r=s(n);return"<svg "+r+">"+e+"</svg>"},d=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={isMounted:{}};return r.isMounted.get=function(){return!!this.node},t.createFromExistingNode=function(e){return new t({id:e.getAttribute("id"),viewBox:e.getAttribute("viewBox"),content:e.outerHTML})},t.prototype.destroy=function(){this.isMounted&&this.unmount(),e.prototype.destroy.call(this)},t.prototype.mount=function(e){if(this.isMounted)return this.node;var t="string"===typeof e?document.querySelector(e):e,n=this.render();return this.node=n,t.appendChild(n),n},t.prototype.render=function(){var e=this.stringify();return n(f(e)).childNodes[0]},t.prototype.unmount=function(){this.node.parentNode.removeChild(this.node)},Object.defineProperties(t.prototype,r),t}(e);return d}))}).call(this,n("c8ba"))},e01a:function(e,t,n){"use strict";var r=n("23e7"),i=n("83ab"),o=n("da84"),s=n("5135"),a=n("861d"),c=n("9bf2").f,u=n("e893"),f=o.Symbol;if(i&&"function"==typeof f&&(!("description"in f.prototype)||void 0!==f().description)){var d={},l=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof l?new f(e):void 0===e?f():f(e);return""===e&&(d[t]=!0),t};u(l,f);var p=l.prototype=f.prototype;p.constructor=l;var h=p.toString,m="Symbol(test)"==String(f("test")),v=/^Symbol\((.*)\)[^)]+$/;c(p,"description",{configurable:!0,get:function(){var e=a(this)?this.valueOf():this,t=h.call(e);if(s(d,e))return"";var n=m?t.slice(7,-1):t.replace(v,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:l})}},e099:function(e,t,n){"use strict";var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,a){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"===typeof e?o(s(e),(function(s){var a=encodeURIComponent(r(s))+n;return i(e[s])?o(e[s],(function(e){return a+encodeURIComponent(r(e))})).join(t):a+encodeURIComponent(r(e[s]))})).join(t):a?encodeURIComponent(r(a))+n+encodeURIComponent(r(e)):""};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function o(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var s=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},e163:function(e,t,n){var r=n("5135"),i=n("7b0b"),o=n("f772"),s=n("e177"),a=o("IE_PROTO"),c=Object.prototype;e.exports=s?Object.getPrototypeOf:function(e){return e=i(e),r(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?c:null}},e177:function(e,t,n){var r=n("d039");e.exports=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},e198:function(e,t,n){var r=n("ef08"),i=n("5524"),o=n("e444"),s=n("fcd4"),a=n("1a14").f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||a(t,e,{value:s.f(e)})}},e260:function(e,t,n){"use strict";var r=n("fc6a"),i=n("44d2"),o=n("3f8c"),s=n("69f3"),a=n("7dd0"),c="Array Iterator",u=s.set,f=s.getterFor(c);e.exports=a(Array,"Array",(function(e,t){u(this,{type:c,target:r(e),index:0,kind:t})}),(function(){var e=f(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},e2cc:function(e,t,n){var r=n("6eeb");e.exports=function(e,t,n){for(var i in t)r(e,i,t[i],n);return e}},e34a:function(e,t,n){var r=n("8b1a")("meta"),i=n("7a41"),o=n("9c0e"),s=n("1a14").f,a=0,c=Object.isExtensible||function(){return!0},u=!n("4b8b")((function(){return c(Object.preventExtensions({}))})),f=function(e){s(e,r,{value:{i:"O"+ ++a,w:{}}})},d=function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,r)){if(!c(e))return"F";if(!t)return"E";f(e)}return e[r].i},l=function(e,t){if(!o(e,r)){if(!c(e))return!0;if(!t)return!1;f(e)}return e[r].w},p=function(e){return u&&h.NEED&&c(e)&&!o(e,r)&&f(e),e},h=e.exports={KEY:r,NEED:!1,fastKey:d,getWeak:l,onFreeze:p}},e439:function(e,t,n){var r=n("23e7"),i=n("d039"),o=n("fc6a"),s=n("06cf").f,a=n("83ab"),c=i((function(){s(1)})),u=!a||c;r({target:"Object",stat:!0,forced:u,sham:!a},{getOwnPropertyDescriptor:function(e,t){return s(o(e),t)}})},e444:function(e,t){e.exports=!0},e507:function(e,t,n){var r=n("512c");r(r.S+r.F,"Object",{assign:n("072d")})},e538:function(e,t,n){var r=n("b622");t.f=r},e58c:function(e,t,n){"use strict";var r=n("fc6a"),i=n("a691"),o=n("50c4"),s=n("a640"),a=n("ae40"),c=Math.min,u=[].lastIndexOf,f=!!u&&1/[1].lastIndexOf(1,-0)<0,d=s("lastIndexOf"),l=a("indexOf",{ACCESSORS:!0,1:0}),p=f||!d||!l;e.exports=p?function(e){if(f)return u.apply(this,arguments)||0;var t=r(this),n=o(t.length),s=n-1;for(arguments.length>1&&(s=c(s,i(arguments[1]))),s<0&&(s=n+s);s>=0;s--)if(s in t&&t[s]===e)return s||0;return-1}:u},e667:function(e,t){e.exports=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}}},e683:function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},e6cf:function(e,t,n){"use strict";var r,i,o,s,a=n("23e7"),c=n("c430"),u=n("da84"),f=n("d066"),d=n("fea9"),l=n("6eeb"),p=n("e2cc"),h=n("d44e"),m=n("2626"),v=n("861d"),g=n("1c0b"),y=n("19aa"),b=n("c6b6"),_=n("8925"),w=n("2266"),S=n("1c7e"),x=n("4840"),C=n("2cf4").set,E=n("b575"),I=n("cdf9"),T=n("44de"),O=n("f069"),R=n("e667"),k=n("69f3"),M=n("94ca"),A=n("b622"),P=n("2d00"),j=A("species"),N="Promise",L=k.get,D=k.set,B=k.getterFor(N),U=d,F=u.TypeError,V=u.document,W=u.process,q=f("fetch"),$=O.f,G=$,z="process"==b(W),H=!!(V&&V.createEvent&&u.dispatchEvent),K="unhandledrejection",J="rejectionhandled",Y=0,X=1,Z=2,Q=1,ee=2,te=M(N,(function(){var e=_(U)!==String(U);if(!e){if(66===P)return!0;if(!z&&"function"!=typeof PromiseRejectionEvent)return!0}if(c&&!U.prototype["finally"])return!0;if(P>=51&&/native code/.test(U))return!1;var t=U.resolve(1),n=function(e){e((function(){}),(function(){}))},r=t.constructor={};return r[j]=n,!(t.then((function(){}))instanceof n)})),ne=te||!S((function(e){U.all(e)["catch"]((function(){}))})),re=function(e){var t;return!(!v(e)||"function"!=typeof(t=e.then))&&t},ie=function(e,t,n){if(!t.notified){t.notified=!0;var r=t.reactions;E((function(){var i=t.value,o=t.state==X,s=0;while(r.length>s){var a,c,u,f=r[s++],d=o?f.ok:f.fail,l=f.resolve,p=f.reject,h=f.domain;try{d?(o||(t.rejection===ee&&ce(e,t),t.rejection=Q),!0===d?a=i:(h&&h.enter(),a=d(i),h&&(h.exit(),u=!0)),a===f.promise?p(F("Promise-chain cycle")):(c=re(a))?c.call(a,l,p):l(a)):p(i)}catch(m){h&&!u&&h.exit(),p(m)}}t.reactions=[],t.notified=!1,n&&!t.rejection&&se(e,t)}))}},oe=function(e,t,n){var r,i;H?(r=V.createEvent("Event"),r.promise=t,r.reason=n,r.initEvent(e,!1,!0),u.dispatchEvent(r)):r={promise:t,reason:n},(i=u["on"+e])?i(r):e===K&&T("Unhandled promise rejection",n)},se=function(e,t){C.call(u,(function(){var n,r=t.value,i=ae(t);if(i&&(n=R((function(){z?W.emit("unhandledRejection",r,e):oe(K,e,r)})),t.rejection=z||ae(t)?ee:Q,n.error))throw n.value}))},ae=function(e){return e.rejection!==Q&&!e.parent},ce=function(e,t){C.call(u,(function(){z?W.emit("rejectionHandled",e):oe(J,e,t.value)}))},ue=function(e,t,n,r){return function(i){e(t,n,i,r)}},fe=function(e,t,n,r){t.done||(t.done=!0,r&&(t=r),t.value=n,t.state=Z,ie(e,t,!0))},de=function(e,t,n,r){if(!t.done){t.done=!0,r&&(t=r);try{if(e===n)throw F("Promise can't be resolved itself");var i=re(n);i?E((function(){var r={done:!1};try{i.call(n,ue(de,e,r,t),ue(fe,e,r,t))}catch(o){fe(e,r,o,t)}})):(t.value=n,t.state=X,ie(e,t,!1))}catch(o){fe(e,{done:!1},o,t)}}};te&&(U=function(e){y(this,U,N),g(e),r.call(this);var t=L(this);try{e(ue(de,this,t),ue(fe,this,t))}catch(n){fe(this,t,n)}},r=function(e){D(this,{type:N,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:Y,value:void 0})},r.prototype=p(U.prototype,{then:function(e,t){var n=B(this),r=$(x(this,U));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=z?W.domain:void 0,n.parent=!0,n.reactions.push(r),n.state!=Y&&ie(this,n,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),i=function(){var e=new r,t=L(e);this.promise=e,this.resolve=ue(de,e,t),this.reject=ue(fe,e,t)},O.f=$=function(e){return e===U||e===o?new i(e):G(e)},c||"function"!=typeof d||(s=d.prototype.then,l(d.prototype,"then",(function(e,t){var n=this;return new U((function(e,t){s.call(n,e,t)})).then(e,t)}),{unsafe:!0}),"function"==typeof q&&a({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return I(U,q.apply(u,arguments))}}))),a({global:!0,wrap:!0,forced:te},{Promise:U}),h(U,N,!1,!0),m(N),o=f(N),a({target:N,stat:!0,forced:te},{reject:function(e){var t=$(this);return t.reject.call(void 0,e),t.promise}}),a({target:N,stat:!0,forced:c||te},{resolve:function(e){return I(c&&this===o?U:this,e)}}),a({target:N,stat:!0,forced:ne},{all:function(e){var t=this,n=$(t),r=n.resolve,i=n.reject,o=R((function(){var n=g(t.resolve),o=[],s=0,a=1;w(e,(function(e){var c=s++,u=!1;o.push(void 0),a++,n.call(t,e).then((function(e){u||(u=!0,o[c]=e,--a||r(o))}),i)})),--a||r(o)}));return o.error&&i(o.value),n.promise},race:function(e){var t=this,n=$(t),r=n.reject,i=R((function(){var i=g(t.resolve);w(e,(function(e){i.call(t,e).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}})},e893:function(e,t,n){var r=n("5135"),i=n("56ef"),o=n("06cf"),s=n("9bf2");e.exports=function(e,t){for(var n=i(t),a=s.f,c=o.f,u=0;u<n.length;u++){var f=n[u];r(e,f)||a(e,f,c(t,f))}}},e8b5:function(e,t,n){var r=n("c6b6");e.exports=Array.isArray||function(e){return"Array"==r(e)}},e91f:function(e,t,n){"use strict";var r=n("ebb5"),i=n("4d64").indexOf,o=r.aTypedArray,s=r.exportTypedArrayMethod;s("indexOf",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},e95a:function(e,t,n){var r=n("b622"),i=n("3f8c"),o=r("iterator"),s=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||s[o]===e)}},ea34:function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},ebb5:function(e,t,n){"use strict";var r,i=n("a981"),o=n("83ab"),s=n("da84"),a=n("861d"),c=n("5135"),u=n("f5df"),f=n("9112"),d=n("6eeb"),l=n("9bf2").f,p=n("e163"),h=n("d2bb"),m=n("b622"),v=n("90e3"),g=s.Int8Array,y=g&&g.prototype,b=s.Uint8ClampedArray,_=b&&b.prototype,w=g&&p(g),S=y&&p(y),x=Object.prototype,C=x.isPrototypeOf,E=m("toStringTag"),I=v("TYPED_ARRAY_TAG"),T=i&&!!h&&"Opera"!==u(s.opera),O=!1,R={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},k=function(e){var t=u(e);return"DataView"===t||c(R,t)},M=function(e){return a(e)&&c(R,u(e))},A=function(e){if(M(e))return e;throw TypeError("Target is not a typed array")},P=function(e){if(h){if(C.call(w,e))return e}else for(var t in R)if(c(R,r)){var n=s[t];if(n&&(e===n||C.call(n,e)))return e}throw TypeError("Target is not a typed array constructor")},j=function(e,t,n){if(o){if(n)for(var r in R){var i=s[r];i&&c(i.prototype,e)&&delete i.prototype[e]}S[e]&&!n||d(S,e,n?t:T&&y[e]||t)}},N=function(e,t,n){var r,i;if(o){if(h){if(n)for(r in R)i=s[r],i&&c(i,e)&&delete i[e];if(w[e]&&!n)return;try{return d(w,e,n?t:T&&g[e]||t)}catch(a){}}for(r in R)i=s[r],!i||i[e]&&!n||d(i,e,t)}};for(r in R)s[r]||(T=!1);if((!T||"function"!=typeof w||w===Function.prototype)&&(w=function(){throw TypeError("Incorrect invocation")},T))for(r in R)s[r]&&h(s[r],w);if((!T||!S||S===x)&&(S=w.prototype,T))for(r in R)s[r]&&h(s[r].prototype,S);if(T&&p(_)!==S&&h(_,S),o&&!c(S,E))for(r in O=!0,l(S,E,{get:function(){return a(this)?this[I]:void 0}}),R)s[r]&&f(s[r],I,r);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:T,TYPED_ARRAY_TAG:O&&I,aTypedArray:A,aTypedArrayConstructor:P,exportTypedArrayMethod:j,exportTypedArrayStaticMethod:N,isView:k,isTypedArray:M,TypedArray:w,TypedArrayPrototype:S}},ef08:function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},f069:function(e,t,n){"use strict";var r=n("1c0b"),i=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)};e.exports.f=function(e){return new i(e)}},f5df:function(e,t,n){var r=n("00ee"),i=n("c6b6"),o=n("b622"),s=o("toStringTag"),a="Arguments"==i(function(){return arguments}()),c=function(e,t){try{return e[t]}catch(n){}};e.exports=r?i:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=c(t=Object(e),s))?n:a?i(t):"Object"==(r=i(t))&&"function"==typeof t.callee?"Arguments":r}},f5df1:function(e,t,n){},f6b4:function(e,t,n){"use strict";var r=n("c532");function i(){this.handlers=[]}i.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=i},f772:function(e,t,n){var r=n("5692"),i=n("90e3"),o=r("keys");e.exports=function(e){return o[e]||(o[e]=i(e))}},f893:function(e,t,n){e.exports={default:n("8119"),__esModule:!0}},f8cd:function(e,t,n){var r=n("a691");e.exports=function(e){var t=r(e);if(t<0)throw RangeError("The argument can't be less than 0");return t}},faf5:function(e,t,n){e.exports=!n("0bad")&&!n("4b8b")((function(){return 7!=Object.defineProperty(n("05f5")("div"),"a",{get:function(){return 7}}).a}))},fc5e:function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},fc6a:function(e,t,n){var r=n("44ad"),i=n("1d80");e.exports=function(e){return r(i(e))}},fcd4:function(e,t,n){t.f=n("cc15")},fdbc:function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(e,t,n){var r=n("4930");e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},fea9:function(e,t,n){var r=n("da84");e.exports=r.Promise},fecc:function(module,exports,__webpack_require__){!function(e,t){module.exports=t()}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/Users/zhangdong/code/kefu-fe/websdk/packages/sdk",n(n.s=106)}([function(e,t,n){"use strict";e.exports=function(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(e){"object"===("undefined"==typeof window?"undefined":r(window))&&(i=window)}e.exports=i},,function(e,t,n){"use strict";var r,i,o=e.exports=n(13),s=n(86);o.codegen=n(150),o.fetch=n(151),o.path=n(152),o.fs=o.inquire("fs"),o.toArray=function(e){if(e){for(var t=Object.keys(e),n=new Array(t.length),r=0;r<t.length;)n[r]=e[t[r++]];return n}return[]},o.toObject=function(e){for(var t={},n=0;n<e.length;){var r=e[n++],i=e[n++];void 0!==i&&(t[r]=i)}return t};var a=/\\/g,c=/"/g;o.isReserved=function(e){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e)},o.safeProp=function(e){return!/^[$\w_]+$/.test(e)||o.isReserved(e)?'["'+e.replace(a,"\\\\").replace(c,'\\"')+'"]':"."+e},o.ucFirst=function(e){return e.charAt(0).toUpperCase()+e.substring(1)};var u=/_([a-z])/g;o.camelCase=function(e){return e.substring(0,1)+e.substring(1).replace(u,(function(e,t){return t.toUpperCase()}))},o.compareFieldsById=function(e,t){return e.id-t.id},o.decorateType=function(e,t){if(e.$type)return t&&e.$type.name!==t&&(o.decorateRoot.remove(e.$type),e.$type.name=t,o.decorateRoot.add(e.$type)),e.$type;r||(r=n(47));var i=new r(t||e.name);return o.decorateRoot.add(i),i.ctor=e,Object.defineProperty(e,"$type",{value:i,enumerable:!1}),Object.defineProperty(e.prototype,"$type",{value:i,enumerable:!1}),i};var f=0;o.decorateEnum=function(e){if(e.$type)return e.$type;i||(i=n(11));var t=new i("Enum"+f++,e);return o.decorateRoot.add(t),Object.defineProperty(e,"$type",{value:t,enumerable:!1}),t},Object.defineProperty(o,"decorateRoot",{get:function(){return s.decorated||(s.decorated=new(n(52)))}})},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return(i="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}function o(t){return"function"==typeof Symbol&&"symbol"===i(Symbol.iterator)?e.exports=o=function(e){return i(e)}:e.exports=o=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":i(e)},o(t)}e.exports=o},function(e,t,n){"use strict";var r=n(1),i=n(70);function o(){i.call(this)}r(o,i),o.prototype.removeAllListeners=function(e){e?delete this._listeners[e]:this._listeners={}},o.prototype.once=function(e,t){var n=this,r=!1;this.on(e,(function i(){n.removeListener(e,i),r||(r=!0,t.apply(this,arguments))}))},o.prototype.emit=function(){var e=arguments[0],t=this._listeners[e];if(t){for(var n=arguments.length,r=new Array(n-1),i=1;i<n;i++)r[i-1]=arguments[i];for(var o=0;o<t.length;o++)t[o].apply(this,r)}},o.prototype.on=o.prototype.addListener=i.prototype.addEventListener,o.prototype.removeListener=i.prototype.removeEventListener,e.exports.EventEmitter=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){return{WEBIM_CONNCTION_USER_NOT_ASSIGN_ERROR:0,WEBIM_CONNCTION_OPEN_ERROR:1,WEBIM_CONNCTION_AUTH_ERROR:2,WEBIM_CONNCTION_OPEN_USERGRID_ERROR:3,WEBIM_CONNCTION_ATTACH_ERROR:4,WEBIM_CONNCTION_ATTACH_USERGRID_ERROR:5,WEBIM_CONNCTION_REOPEN_ERROR:6,WEBIM_CONNCTION_SERVER_CLOSE_ERROR:7,WEBIM_CONNCTION_SERVER_ERROR:8,WEBIM_CONNCTION_IQ_ERROR:9,WEBIM_CONNCTION_USER_REMOVED:207,WEBIM_CONNCTION_USER_LOGIN_ANOTHER_DEVICE:206,WEBIM_CONNCTION_USER_KICKED_BY_CHANGE_PASSWORD:216,WEBIM_CONNCTION_USER_KICKED_BY_OTHER_DEVICE:217,WEBIM_CONNCTION_PING_ERROR:10,WEBIM_CONNCTION_NOTIFYVERSION_ERROR:11,WEBIM_CONNCTION_GETROSTER_ERROR:12,WEBIM_CONNCTION_CROSSDOMAIN_ERROR:13,WEBIM_CONNCTION_LISTENING_OUTOF_MAXRETRIES:14,WEBIM_CONNCTION_RECEIVEMSG_CONTENTERROR:15,WEBIM_CONNCTION_DISCONNECTED:16,WEBIM_CONNCTION_AJAX_ERROR:17,WEBIM_CONNCTION_JOINROOM_ERROR:18,WEBIM_CONNCTION_GETROOM_ERROR:19,WEBIM_CONNCTION_GETROOMINFO_ERROR:20,WEBIM_CONNCTION_GETROOMMEMBER_ERROR:21,WEBIM_CONNCTION_GETROOMOCCUPANTS_ERROR:22,WEBIM_CONNCTION_LOAD_CHATROOM_ERROR:23,WEBIM_CONNCTION_NOT_SUPPORT_CHATROOM_ERROR:24,WEBIM_CONNCTION_JOINCHATROOM_ERROR:25,WEBIM_CONNCTION_QUITCHATROOM_ERROR:26,WEBIM_CONNCTION_APPKEY_NOT_ASSIGN_ERROR:27,WEBIM_CONNCTION_TOKEN_NOT_ASSIGN_ERROR:28,WEBIM_CONNCTION_SESSIONID_NOT_ASSIGN_ERROR:29,WEBIM_CONNCTION_RID_NOT_ASSIGN_ERROR:30,WEBIM_CONNCTION_CALLBACK_INNER_ERROR:31,WEBIM_CONNCTION_CLIENT_OFFLINE:32,WEBIM_CONNCTION_CLIENT_LOGOUT:33,WEBIM_CONNCTION_CLIENT_TOO_MUCH_ERROR:34,WEBIM_CONNECTION_ACCEPT_INVITATION_FROM_GROUP:35,WEBIM_CONNECTION_DECLINE_INVITATION_FROM_GROUP:36,WEBIM_CONNECTION_ACCEPT_JOIN_GROUP:37,WEBIM_CONNECTION_DECLINE_JOIN_GROUP:38,WEBIM_CONNECTION_CLOSED:39,WEBIM_CONNECTION_ERROR:40,WEBIM_UPLOADFILE_BROWSER_ERROR:100,WEBIM_UPLOADFILE_ERROR:101,WEBIM_UPLOADFILE_NO_LOGIN:102,WEBIM_UPLOADFILE_NO_FILE:103,WEBIM_DOWNLOADFILE_ERROR:200,WEBIM_DOWNLOADFILE_NO_LOGIN:201,WEBIM_DOWNLOADFILE_BROWSER_ERROR:202,WEBIM_MESSAGE_REC_TEXT:300,WEBIM_MESSAGE_REC_TEXT_ERROR:301,WEBIM_MESSAGE_REC_EMOTION:302,WEBIM_MESSAGE_REC_PHOTO:303,WEBIM_MESSAGE_REC_AUDIO:304,WEBIM_MESSAGE_REC_AUDIO_FILE:305,WEBIM_MESSAGE_REC_VEDIO:306,WEBIM_MESSAGE_REC_VEDIO_FILE:307,WEBIM_MESSAGE_REC_FILE:308,WEBIM_MESSAGE_SED_TEXT:309,WEBIM_MESSAGE_SED_EMOTION:310,WEBIM_MESSAGE_SED_PHOTO:311,WEBIM_MESSAGE_SED_AUDIO:312,WEBIM_MESSAGE_SED_AUDIO_FILE:313,WEBIM_MESSAGE_SED_VEDIO:314,WEBIM_MESSAGE_SED_VEDIO_FILE:315,WEBIM_MESSAGE_SED_FILE:316,WEBIM_MESSAGE_SED_ERROR:317,STATUS_INIT:400,STATUS_DOLOGIN_USERGRID:401,STATUS_DOLOGIN_IM:402,STATUS_OPENED:403,STATUS_CLOSING:404,STATUS_CLOSED:405,STATUS_ERROR:406,GROUP_NOT_EXIST:605,GROUP_NOT_JOINED:602,MESSAGE_RECALL_TIME_LIMIT:504,SERVICE_NOT_ENABLED:505,SERVICE_NOT_ALLOW_MESSAGING:506,SERVER_UNKNOWN_ERROR:503,MESSAGE_INCLUDE_ILLEGAL_CONTENT:501,PERMISSION_DENIED:603,WEBIM_LOAD_MSG_ERROR:604,SDK_RUNTIME_ERROR:999}};t.default=r},function(e,t,n){"use strict";e.exports=i;var r=null;try{r=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function i(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function o(e){return!0===(e&&e.__isLong__)}i.prototype.__isLong__,Object.defineProperty(i.prototype,"__isLong__",{value:!0}),i.isLong=o;var s={},a={};function c(e,t){var n,r,i;return t?(i=0<=(e>>>=0)&&e<256)&&(r=a[e])?r:(n=f(e,(0|e)<0?-1:0,!0),i&&(a[e]=n),n):(i=-128<=(e|=0)&&e<128)&&(r=s[e])?r:(n=f(e,e<0?-1:0,!1),i&&(s[e]=n),n)}function u(e,t){if(isNaN(e))return t?b:y;if(t){if(e<0)return b;if(e>=m)return C}else{if(e<=-v)return E;if(e+1>=v)return x}return e<0?u(-e,t).neg():f(e%h|0,e/h|0,t)}function f(e,t,n){return new i(e,t,n)}i.fromInt=c,i.fromNumber=u,i.fromBits=f;var d=Math.pow;function l(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return y;if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return l(e.substring(1),t,n).neg();for(var i=u(d(n,8)),o=y,s=0;s<e.length;s+=8){var a=Math.min(8,e.length-s),c=parseInt(e.substring(s,s+a),n);if(a<8){var f=u(d(n,a));o=o.mul(f).add(u(c))}else o=(o=o.mul(i)).add(u(c))}return o.unsigned=t,o}function p(e,t){return"number"==typeof e?u(e,t):"string"==typeof e?l(e,t):f(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}i.fromString=l,i.fromValue=p;var h=4294967296,m=h*h,v=m/2,g=c(1<<24),y=c(0);i.ZERO=y;var b=c(0,!0);i.UZERO=b;var _=c(1);i.ONE=_;var w=c(1,!0);i.UONE=w;var S=c(-1);i.NEG_ONE=S;var x=f(-1,2147483647,!1);i.MAX_VALUE=x;var C=f(-1,-1,!0);i.MAX_UNSIGNED_VALUE=C;var E=f(0,-2147483648,!1);i.MIN_VALUE=E;var I=i.prototype;I.toInt=function(){return this.unsigned?this.low>>>0:this.low},I.toNumber=function(){return this.unsigned?(this.high>>>0)*h+(this.low>>>0):this.high*h+(this.low>>>0)},I.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(E)){var t=u(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var i=u(d(e,6),this.unsigned),o=this,s="";;){var a=o.div(i),c=(o.sub(a.mul(i)).toInt()>>>0).toString(e);if((o=a).isZero())return c+s;for(;c.length<6;)c="0"+c;s=""+c+s}},I.getHighBits=function(){return this.high},I.getHighBitsUnsigned=function(){return this.high>>>0},I.getLowBits=function(){return this.low},I.getLowBitsUnsigned=function(){return this.low>>>0},I.getNumBitsAbs=function(){if(this.isNegative())return this.eq(E)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},I.isZero=function(){return 0===this.high&&0===this.low},I.eqz=I.isZero,I.isNegative=function(){return!this.unsigned&&this.high<0},I.isPositive=function(){return this.unsigned||this.high>=0},I.isOdd=function(){return 1==(1&this.low)},I.isEven=function(){return 0==(1&this.low)},I.equals=function(e){return o(e)||(e=p(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},I.eq=I.equals,I.notEquals=function(e){return!this.eq(e)},I.neq=I.notEquals,I.ne=I.notEquals,I.lessThan=function(e){return this.comp(e)<0},I.lt=I.lessThan,I.lessThanOrEqual=function(e){return this.comp(e)<=0},I.lte=I.lessThanOrEqual,I.le=I.lessThanOrEqual,I.greaterThan=function(e){return this.comp(e)>0},I.gt=I.greaterThan,I.greaterThanOrEqual=function(e){return this.comp(e)>=0},I.gte=I.greaterThanOrEqual,I.ge=I.greaterThanOrEqual,I.compare=function(e){if(o(e)||(e=p(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},I.comp=I.compare,I.negate=function(){return!this.unsigned&&this.eq(E)?E:this.not().add(_)},I.neg=I.negate,I.add=function(e){o(e)||(e=p(e));var t=this.high>>>16,n=65535&this.high,r=this.low>>>16,i=65535&this.low,s=e.high>>>16,a=65535&e.high,c=e.low>>>16,u=0,d=0,l=0,h=0;return l+=(h+=i+(65535&e.low))>>>16,d+=(l+=r+c)>>>16,u+=(d+=n+a)>>>16,u+=t+s,f((l&=65535)<<16|(h&=65535),(u&=65535)<<16|(d&=65535),this.unsigned)},I.subtract=function(e){return o(e)||(e=p(e)),this.add(e.neg())},I.sub=I.subtract,I.multiply=function(e){if(this.isZero())return y;if(o(e)||(e=p(e)),r)return f(r.mul(this.low,this.high,e.low,e.high),r.get_high(),this.unsigned);if(e.isZero())return y;if(this.eq(E))return e.isOdd()?E:y;if(e.eq(E))return this.isOdd()?E:y;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(g)&&e.lt(g))return u(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,n=65535&this.high,i=this.low>>>16,s=65535&this.low,a=e.high>>>16,c=65535&e.high,d=e.low>>>16,l=65535&e.low,h=0,m=0,v=0,b=0;return v+=(b+=s*l)>>>16,m+=(v+=i*l)>>>16,v&=65535,m+=(v+=s*d)>>>16,h+=(m+=n*l)>>>16,m&=65535,h+=(m+=i*d)>>>16,m&=65535,h+=(m+=s*c)>>>16,h+=t*l+n*d+i*c+s*a,f((v&=65535)<<16|(b&=65535),(h&=65535)<<16|(m&=65535),this.unsigned)},I.mul=I.multiply,I.divide=function(e){if(o(e)||(e=p(e)),e.isZero())throw Error("division by zero");var t,n,i;if(r)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?f((this.unsigned?r.div_u:r.div_s)(this.low,this.high,e.low,e.high),r.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?b:y;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return b;if(e.gt(this.shru(1)))return w;i=b}else{if(this.eq(E))return e.eq(_)||e.eq(S)?E:e.eq(E)?_:(t=this.shr(1).div(e).shl(1)).eq(y)?e.isNegative()?_:S:(n=this.sub(e.mul(t)),i=t.add(n.div(e)));if(e.eq(E))return this.unsigned?b:y;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=y}for(n=this;n.gte(e);){t=Math.max(1,Math.floor(n.toNumber()/e.toNumber()));for(var s=Math.ceil(Math.log(t)/Math.LN2),a=s<=48?1:d(2,s-48),c=u(t),l=c.mul(e);l.isNegative()||l.gt(n);)l=(c=u(t-=a,this.unsigned)).mul(e);c.isZero()&&(c=_),i=i.add(c),n=n.sub(l)}return i},I.div=I.divide,I.modulo=function(e){return o(e)||(e=p(e)),r?f((this.unsigned?r.rem_u:r.rem_s)(this.low,this.high,e.low,e.high),r.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},I.mod=I.modulo,I.rem=I.modulo,I.not=function(){return f(~this.low,~this.high,this.unsigned)},I.and=function(e){return o(e)||(e=p(e)),f(this.low&e.low,this.high&e.high,this.unsigned)},I.or=function(e){return o(e)||(e=p(e)),f(this.low|e.low,this.high|e.high,this.unsigned)},I.xor=function(e){return o(e)||(e=p(e)),f(this.low^e.low,this.high^e.high,this.unsigned)},I.shiftLeft=function(e){return o(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?f(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):f(0,this.low<<e-32,this.unsigned)},I.shl=I.shiftLeft,I.shiftRight=function(e){return o(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?f(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):f(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},I.shr=I.shiftRight,I.shiftRightUnsigned=function(e){if(o(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?f(this.low>>>e|t<<32-e,t>>>e,this.unsigned):f(32===e?t:t>>>e-32,0,this.unsigned)},I.shru=I.shiftRightUnsigned,I.shr_u=I.shiftRightUnsigned,I.toSigned=function(){return this.unsigned?f(this.low,this.high,!1):this},I.toUnsigned=function(){return this.unsigned?this:f(this.low,this.high,!0)},I.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},I.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},I.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},i.fromBytes=function(e,t,n){return n?i.fromBytesLE(e,t):i.fromBytesBE(e,t)},i.fromBytesLE=function(e,t){return new i(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},i.fromBytesBE=function(e,t){return new i(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},function(e,t,n){"use strict";var r=n(69);e.exports={getOrigin:function(e){if(!e)return null;var t=new r(e);if("file:"===t.protocol)return null;var n=t.port;return n||(n="https:"===t.protocol?"443":"80"),t.protocol+"//"+t.hostname+":"+n},isOriginEqual:function(e,t){var n=this.getOrigin(e)===this.getOrigin(t);return n},isSchemeEqual:function(e,t){return e.split(":")[0]===t.split(":")[0]},addPath:function(e,t){var n=e.split("?");return n[0]+t+(n[1]?"?"+n[1]:"")},addQuery:function(e,t){return e+(-1===e.indexOf("?")?"?"+t:"&"+t)}}},,function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=a;var i=n(20);((a.prototype=Object.create(i.prototype)).constructor=a).className="Enum";var o=n(28),s=n(4);function a(e,t,n,o,s){if(i.call(this,e,n),t&&"object"!==r(t))throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=o,this.comments=s||{},this.reserved=void 0,t)for(var a=Object.keys(t),c=0;c<a.length;++c)"number"==typeof t[a[c]]&&(this.valuesById[this.values[a[c]]=t[a[c]]]=a[c])}a.fromJSON=function(e,t){var n=new a(e,t.values,t.options,t.comment,t.comments);return n.reserved=t.reserved,n},a.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return s.toObject(["options",this.options,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",t?this.comment:void 0,"comments",t?this.comments:void 0])},a.prototype.add=function(e,t,n){if(!s.isString(e))throw TypeError("name must be a string");if(!s.isInteger(t))throw TypeError("id must be an integer");if(void 0!==this.values[e])throw Error("duplicate name '"+e+"' in "+this);if(this.isReservedId(t))throw Error("id "+t+" is reserved in "+this);if(this.isReservedName(e))throw Error("name '"+e+"' is reserved in "+this);if(void 0!==this.valuesById[t]){if(!this.options||!this.options.allow_alias)throw Error("duplicate id "+t+" in "+this);this.values[e]=t}else this.valuesById[this.values[e]=t]=e;return this.comments[e]=n||null,this},a.prototype.remove=function(e){if(!s.isString(e))throw TypeError("name must be a string");var t=this.values[e];if(null==t)throw Error("name '"+e+"' does not exist in "+this);return delete this.valuesById[t],delete this.values[e],delete this.comments[e],this},a.prototype.isReservedId=function(e){return o.isReservedId(this.reserved,e)},a.prototype.isReservedName=function(e){return o.isReservedName(this.reserved,e)}},function(e,t,n){"use strict";(function(e,r){var i;function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}
/*! JSON v3.3.2 | http://bestiejs.github.io/json3 | Copyright 2012-2014, Kit Cambridge | http://kit.mit-license.org */(function(){var s=n(119),a={function:!0,object:!0},c=a[o(t)]&&t&&!t.nodeType&&t,u=a["undefined"==typeof window?"undefined":o(window)]&&window||this,f=c&&a[o(e)]&&e&&!e.nodeType&&"object"==(void 0===r?"undefined":o(r))&&r;function d(e,t){e||(e=u.Object()),t||(t=u.Object());var n=e.Number||u.Number,r=e.String||u.String,i=e.Object||u.Object,s=e.Date||u.Date,c=e.SyntaxError||u.SyntaxError,f=e.TypeError||u.TypeError,l=e.Math||u.Math,p=e.JSON||u.JSON;"object"==o(p)&&p&&(t.stringify=p.stringify,t.parse=p.parse);var h,m,v=i.prototype,g=v.toString,y=new s(-0xc782b5b800cec);try{y=-109252==y.getUTCFullYear()&&0===y.getUTCMonth()&&1===y.getUTCDate()&&10==y.getUTCHours()&&37==y.getUTCMinutes()&&6==y.getUTCSeconds()&&708==y.getUTCMilliseconds()}catch(e){}function b(e){if(void 0!==b[e])return b[e];var i;if("bug-string-char-index"==e)i="a"!="a"[0];else if("json"==e)i=b("json-stringify")&&b("json-parse");else{var o,a='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var c=t.stringify,u="function"==typeof c&&y;if(u){(o=function(){return 1}).toJSON=o;try{u="0"===c(0)&&"0"===c(new n)&&'""'==c(new r)&&void 0===c(g)&&void 0===c(void 0)&&void 0===c()&&"1"===c(o)&&"[1]"==c([o])&&"[null]"==c([void 0])&&"null"==c(null)&&"[null,null,null]"==c([void 0,g,null])&&c({a:[o,!0,!1,null,"\0\b\n\f\r\t"]})==a&&"1"===c(null,o)&&"[\n 1,\n 2\n]"==c([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==c(new s(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==c(new s(864e13))&&'"-000001-01-01T00:00:00.000Z"'==c(new s(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==c(new s(-1))}catch(e){u=!1}}i=u}if("json-parse"==e){var f=t.parse;if("function"==typeof f)try{if(0===f("0")&&!f(!1)){var d=5==(o=f(a)).a.length&&1===o.a[0];if(d){try{d=!f('"\t"')}catch(e){}if(d)try{d=1!==f("01")}catch(e){}if(d)try{d=1!==f("1.")}catch(e){}}}}catch(e){d=!1}i=d}}return b[e]=!!i}if(!b("json")){var _=b("bug-string-char-index");if(!y)var w=l.floor,S=[0,31,59,90,120,151,181,212,243,273,304,334],x=function(e,t){return S[t]+365*(e-1970)+w((e-1969+(t=+(t>1)))/4)-w((e-1901+t)/100)+w((e-1601+t)/400)};if((h=v.hasOwnProperty)||(h=function(e){var t,n={};return(n.__proto__=null,n.__proto__={toString:1},n).toString!=g?h=function(e){var t=this.__proto__,n=e in(this.__proto__=null,this);return this.__proto__=t,n}:(t=n.constructor,h=function(e){var n=(this.constructor||t).prototype;return e in this&&!(e in n&&this[e]===n[e])}),n=null,h.call(this,e)}),m=function(e,t){var n,r,i,s=0;for(i in(n=function(){this.valueOf=0}).prototype.valueOf=0,r=new n)h.call(r,i)&&s++;return n=r=null,s?m=2==s?function(e,t){var n,r={},i="[object Function]"==g.call(e);for(n in e)i&&"prototype"==n||h.call(r,n)||!(r[n]=1)||!h.call(e,n)||t(n)}:function(e,t){var n,r,i="[object Function]"==g.call(e);for(n in e)i&&"prototype"==n||!h.call(e,n)||(r="constructor"===n)||t(n);(r||h.call(e,n="constructor"))&&t(n)}:(r=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],m=function(e,t){var n,i,s="[object Function]"==g.call(e),c=!s&&"function"!=typeof e.constructor&&a[o(e.hasOwnProperty)]&&e.hasOwnProperty||h;for(n in e)s&&"prototype"==n||!c.call(e,n)||t(n);for(i=r.length;n=r[--i];c.call(e,n)&&t(n));}),m(e,t)},!b("json-stringify")){var C={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},E=function(e,t){return("000000"+(t||0)).slice(-e)},I=function(e){for(var t='"',n=0,r=e.length,i=!_||r>10,o=i&&(_?e.split(""):e);n<r;n++){var s=e.charCodeAt(n);switch(s){case 8:case 9:case 10:case 12:case 13:case 34:case 92:t+=C[s];break;default:if(s<32){t+="\\u00"+E(2,s.toString(16));break}t+=i?o[n]:e.charAt(n)}}return t+'"'};t.stringify=function(e,t,n){var r,i,s,c;if(a[o(t)]&&t)if("[object Function]"==(c=g.call(t)))i=t;else if("[object Array]"==c){s={};for(var u,d=0,l=t.length;d<l;u=t[d++],("[object String]"==(c=g.call(u))||"[object Number]"==c)&&(s[u]=1));}if(n)if("[object Number]"==(c=g.call(n))){if((n-=n%1)>0)for(r="",n>10&&(n=10);r.length<n;r+=" ");}else"[object String]"==c&&(r=n.length<=10?n:n.slice(0,10));return function e(t,n,r,i,s,a,c){var u,d,l,p,v,y,b,_,S,C,T,O,R,k,M,A;try{u=n[t]}catch(e){}if("object"==o(u)&&u)if("[object Date]"!=(d=g.call(u))||h.call(u,"toJSON"))"function"==typeof u.toJSON&&("[object Number]"!=d&&"[object String]"!=d&&"[object Array]"!=d||h.call(u,"toJSON"))&&(u=u.toJSON(t));else if(u>-1/0&&u<1/0){if(x){for(v=w(u/864e5),l=w(v/365.2425)+1970-1;x(l+1,0)<=v;l++);for(p=w((v-x(l,0))/30.42);x(l,p+1)<=v;p++);v=1+v-x(l,p),b=w((y=(u%864e5+864e5)%864e5)/36e5)%24,_=w(y/6e4)%60,S=w(y/1e3)%60,C=y%1e3}else l=u.getUTCFullYear(),p=u.getUTCMonth(),v=u.getUTCDate(),b=u.getUTCHours(),_=u.getUTCMinutes(),S=u.getUTCSeconds(),C=u.getUTCMilliseconds();u=(l<=0||l>=1e4?(l<0?"-":"+")+E(6,l<0?-l:l):E(4,l))+"-"+E(2,p+1)+"-"+E(2,v)+"T"+E(2,b)+":"+E(2,_)+":"+E(2,S)+"."+E(3,C)+"Z"}else u=null;if(r&&(u=r.call(n,t,u)),null===u)return"null";if("[object Boolean]"==(d=g.call(u)))return""+u;if("[object Number]"==d)return u>-1/0&&u<1/0?""+u:"null";if("[object String]"==d)return I(""+u);if("object"==o(u)){for(k=c.length;k--;)if(c[k]===u)throw f();if(c.push(u),T=[],M=a,a+=s,"[object Array]"==d){for(R=0,k=u.length;R<k;R++)O=e(R,u,r,i,s,a,c),T.push(void 0===O?"null":O);A=T.length?s?"[\n"+a+T.join(",\n"+a)+"\n"+M+"]":"["+T.join(",")+"]":"[]"}else m(i||u,(function(t){var n=e(t,u,r,i,s,a,c);void 0!==n&&T.push(I(t)+":"+(s?" ":"")+n)})),A=T.length?s?"{\n"+a+T.join(",\n"+a)+"\n"+M+"}":"{"+T.join(",")+"}":"{}";return c.pop(),A}}("",((u={})[""]=e,u),i,s,r,"",[])}}if(!b("json-parse")){var T,O,R=r.fromCharCode,k={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},M=function(){throw T=O=null,c()},A=function(){for(var e,t,n,r,i,o=O,s=o.length;T<s;)switch(i=o.charCodeAt(T)){case 9:case 10:case 13:case 32:T++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=_?o.charAt(T):o[T],T++,e;case 34:for(e="@",T++;T<s;)if((i=o.charCodeAt(T))<32)M();else if(92==i)switch(i=o.charCodeAt(++T)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=k[i],T++;break;case 117:for(t=++T,n=T+4;T<n;T++)(i=o.charCodeAt(T))>=48&&i<=57||i>=97&&i<=102||i>=65&&i<=70||M();e+=R("0x"+o.slice(t,T));break;default:M()}else{if(34==i)break;for(i=o.charCodeAt(T),t=T;i>=32&&92!=i&&34!=i;)i=o.charCodeAt(++T);e+=o.slice(t,T)}if(34==o.charCodeAt(T))return T++,e;M();default:if(t=T,45==i&&(r=!0,i=o.charCodeAt(++T)),i>=48&&i<=57){for(48==i&&(i=o.charCodeAt(T+1))>=48&&i<=57&&M(),r=!1;T<s&&(i=o.charCodeAt(T))>=48&&i<=57;T++);if(46==o.charCodeAt(T)){for(n=++T;n<s&&(i=o.charCodeAt(n))>=48&&i<=57;n++);n==T&&M(),T=n}if(101==(i=o.charCodeAt(T))||69==i){for(43!=(i=o.charCodeAt(++T))&&45!=i||T++,n=T;n<s&&(i=o.charCodeAt(n))>=48&&i<=57;n++);n==T&&M(),T=n}return+o.slice(t,T)}if(r&&M(),"true"==o.slice(T,T+4))return T+=4,!0;if("false"==o.slice(T,T+5))return T+=5,!1;if("null"==o.slice(T,T+4))return T+=4,null;M()}return"$"},P=function(e,t,n){var r=j(e,t,n);void 0===r?delete e[t]:e[t]=r},j=function(e,t,n){var r,i=e[t];if("object"==o(i)&&i)if("[object Array]"==g.call(i))for(r=i.length;r--;)P(i,r,n);else m(i,(function(e){P(i,e,n)}));return n.call(e,t,i)};t.parse=function(e,t){var n,r;return T=0,O=""+e,n=function e(t){var n,r;if("$"==t&&M(),"string"==typeof t){if("@"==(_?t.charAt(0):t[0]))return t.slice(1);if("["==t){for(n=[];"]"!=(t=A());r||(r=!0))r&&(","==t?"]"==(t=A())&&M():M()),","==t&&M(),n.push(e(t));return n}if("{"==t){for(n={};"}"!=(t=A());r||(r=!0))r&&(","==t?"}"==(t=A())&&M():M()),","!=t&&"string"==typeof t&&"@"==(_?t.charAt(0):t[0])&&":"==A()||M(),n[t.slice(1)]=e(A());return n}M()}return t}(A()),"$"!=A()&&M(),T=O=null,t&&"[object Function]"==g.call(t)?j(((r={})[""]=n,r),"",t):n}}}return t.runInContext=d,t}if(!f||f.global!==f&&f.window!==f&&f.self!==f||(u=f),c&&!s)d(u,c);else{var l=u.JSON,p=u.JSON3,h=!1,m=d(u,u.JSON3={noConflict:function(){return h||(h=!0,u.JSON=l,u.JSON3=p,l=p=null),m}});u.JSON={parse:m.parse,stringify:m.stringify}}s&&(void 0===(i=function(){return m}.call(t,n,t,e))||(e.exports=i))}).call(void 0)}).call(this,n(118)(e),n(2))},function(e,t,n){"use strict";(function(e){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=t;function o(e,t,n){for(var r=Object.keys(t),i=0;i<r.length;++i)void 0!==e[r[i]]&&n||(e[r[i]]=t[r[i]]);return e}function s(e){function t(e,n){if(!(this instanceof t))return new t(e,n);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),n&&o(this,n)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}i.asPromise=n(83),i.base64=n(141),i.EventEmitter=n(142),i.float=n(143),i.inquire=n(84),i.utf8=n(144),i.pool=n(145),i.LongBits=n(146),i.global="undefined"!=typeof window&&window||void 0!==e&&e||"undefined"!=typeof self&&self||void 0,i.emptyArray=Object.freeze?Object.freeze([]):[],i.emptyObject=Object.freeze?Object.freeze({}):{},i.isNode=Boolean(i.global.process&&i.global.process.versions&&i.global.process.versions.node),i.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},i.isString=function(e){return"string"==typeof e||e instanceof String},i.isObject=function(e){return e&&"object"===r(e)},i.isset=i.isSet=function(e,t){var n=e[t];return!(null==n||!e.hasOwnProperty(t))&&("object"!==r(n)||(Array.isArray(n)?n.length:Object.keys(n).length)>0)},i.Buffer=function(){try{var e=i.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),i._Buffer_from=null,i._Buffer_allocUnsafe=null,i.newBuffer=function(e){return"number"==typeof e?i.Buffer?i._Buffer_allocUnsafe(e):new i.Array(e):i.Buffer?i._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},i.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,i.Long=i.global.dcodeIO&&i.global.dcodeIO.Long||i.global.Long||i.inquire("long"),i.key2Re=/^true|false|0|1$/,i.key32Re=/^-?(?:0|[1-9][0-9]*)$/,i.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,i.longToHash=function(e){return e?i.LongBits.from(e).toHash():i.LongBits.zeroHash},i.longFromHash=function(e,t){var n=i.LongBits.fromHash(e);return i.Long?i.Long.fromBits(n.lo,n.hi,t):n.toNumber(Boolean(t))},i.merge=o,i.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},i.newError=s,i.ProtocolError=s("ProtocolError"),i.oneOfGetter=function(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=1;return function(){for(var e=Object.keys(this),n=e.length-1;n>-1;--n)if(1===t[e[n]]&&void 0!==this[e[n]]&&null!==this[e[n]])return e[n]}},i.oneOfSetter=function(e){return function(t){for(var n=0;n<e.length;++n)e[n]!==t&&delete this[e[n]]}},i.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},i._configure=function(){var e=i.Buffer;e?(i._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,n){return new e(t,n)},i._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):i._Buffer_from=i._Buffer_allocUnsafe=null}}).call(this,n(2))},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(5)),o=r(n(55)),s=r(n(56)),a=n(57),c=function(e){},u={},f=function(){function e(t,n,r){(0,o.default)(this,e),this.name=t||"defaultLogger",this.currentLevel=void 0,this.useCookiePersist=void 0,this.storageLogLevelKey="loglevel",this.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},this.logMethods=["trace","debug","info","warn","error"],this.methodFactory=r||this.defaultMethodFactory;var i=this._getPersistedLevel();null==i&&(i=null==n?"WARN":n),this.logs=[],this.config={useCache:!1,maxCache:3145728,color:"",background:""},this.logBytes=0,this.setLevel(i,!1)}return(0,s.default)(e,[{key:"setConfig",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.config=e}},{key:"getLevel",value:function(){return this.currentLevel}},{key:"setLevel",value:function(e,t,n){if("string"==typeof e&&"undefined"!==this.levels[e.toUpperCase()]&&(e=this.levels[e.toUpperCase()]),!("number"==typeof e&&e>=0&&e<=this.levels.SILENT))throw"log.setLevel() called with invalid level: "+e;if(this.currentLevel=e,!1!==t&&this._persistLevel(e),this.replaceLoggingMethods(e,n),"undefined"==typeof console&&e<self.levels.SILENT)return"No console available for logging"}},{key:"setDefaultLevel",value:function(){_getPersistedLevel()||this.setLevel(level,!1)}},{key:"enableAll",value:function(e){this.setLevel(this.levels.TRACE,e)}},{key:"disableAll",value:function(e){this.setLevel(this.levels.SILENT,e)}},{key:"getLogs",value:function(){return this.logs}},{key:"download",value:function(){if("undefined"!=typeof window&&"undefined"!=typeof document){var e=this.getLogs().join("\n"),t=new Blob([e],{type:"text/plain;charset=UTF-8"}),n=window.URL.createObjectURL(t),r=(new FormData,document.createElement("a"));r.style.display="none",r.href=n,r.setAttribute("download","sdklog"),document.body.appendChild(r),r.click()}}},{key:"_bindMethod",value:function(e,t,n){var r=e[t];if(n)return this._cacheLog;if("function"==typeof r.bind)return r.bind(e);try{return Function.prototype.bind.call(r,e)}catch(t){return function(){return Function.prototype.apply.apply(r,[e,arguments])}}}},{key:"_cacheLog",value:function(){for(var e=(new Date).toLocaleString()+": ",t="",n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];r.forEach((function(e){"object"===(0,i.default)(e)?t+=JSON.stringify(e)+" ":t+=e+" "})),this._cacheLogCall(e+t)}},{key:"_cacheLogCall",value:function(e){var t=d(e),n=this.logBytes+t,r=this.config.maxCache;if(!(t>=r)){if(n<r)this.logBytes+=t;else for(var i=n-r,o=0;o<i;){var s=this.logs.shift();console.log("clearOutLog",s),"undefined"!==s&&(o+=d(s))}this.logs.push(e)}}},{key:"_getPersistedLevel",value:function(){var e;if("undefined"==typeof window)return console.warn("this lib can run in browser only!");if("undefined"===(e=window.localStorage[this.storageLogLevelKey])){var t=window.document.cookie,n=t.indexOf(encodeURIComponent(this.storageLogLevelKey));-1!==n&&(e=/^([^;]+)/.exec(t.slice(n))[1])}return e}},{key:"_persistLevel",value:function(e){var t=this.logMethods[e]||"SILENT";if("undefined"==typeof window)return console.warn("this lib can run in browser only!");window.localStorage[this.storageLogLevelKey]=t,this.useCookiePersist&&(window.document.cookie=encodeURIComponent(this.storageLogLevelKey)+"="+t+";")}},{key:"replaceLoggingMethods",value:function(e,t){for(var n=0;n<this.logMethods.length;n++){var r=this.logMethods[n];this[r]=n<e?c:this.methodFactory(r,e,t)}this.log=this.debug}},{key:"defaultMethodFactory",value:function(e,t,n){return this.realMethod(e)||this.enableLoggingWhenConsoleArrives.apply(this,arguments)}},{key:"realMethod",value:function(e){return"debug"===e&&(e="log"),"undefined"!=typeof console&&("trace"===e&&a.isIE?a.traceForIE:"undefined"!==console[e]?this._bindMethod(console,e,this.config.useCache):"undefined"!==console.log?this._bindMethod(console,"log",this.config.useCache):c)}},{key:"enableLoggingWhenConsoleArrives",value:function(e,t,n){return function(){"undefined"!=typeof console&&(replaceLoggingMethods.call(this,t,n),this[e].apply(this,arguments))}}}]),e}();function d(e){for(var t=e.length,n=0;n<e.length;n++)e.charCodeAt(n)>255&&t++;return t}var l=new f;l.getLogger=function(e){if("string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=u[e];return t||(t=u[e]=new f(e,l.getLevel(),l.methodFactory)),t};var p="undefined"!=typeof window?window.log:void 0;l.noConflict=function(){return"undefined"!=typeof window&&window.log===l&&(window.log=p),l},l.getLoggers=function(){return u};var h=l;t.default=h},function(e,t,n){"use strict";(function(t){var r=n(18),i={},o=!1,s=t.chrome&&t.chrome.app&&t.chrome.app.runtime;e.exports={attachEvent:function(e,n){void 0!==t.addEventListener?t.addEventListener(e,n,!1):t.document&&t.attachEvent&&(t.document.attachEvent("on"+e,n),t.attachEvent("on"+e,n))},detachEvent:function(e,n){void 0!==t.addEventListener?t.removeEventListener(e,n,!1):t.document&&t.detachEvent&&(t.document.detachEvent("on"+e,n),t.detachEvent("on"+e,n))},unloadAdd:function(e){if(s)return null;var t=r.string(8);return i[t]=e,o&&setTimeout(this.triggerUnloadCallbacks,0),t},unloadDel:function(e){e in i&&delete i[e]},triggerUnloadCallbacks:function(){for(var e in i)i[e](),delete i[e]}},s||e.exports.attachEvent("unload",(function(){o||(o=!0,e.exports.triggerUnloadCallbacks())}))}).call(this,n(2))},,function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=f;var i=n(20);((f.prototype=Object.create(i.prototype)).constructor=f).className="Field";var o,s=n(11),a=n(21),c=n(4),u=/^required|optional|repeated$/;function f(e,t,n,r,o,s,f){if(c.isObject(r)?(f=o,s=r,r=o=void 0):c.isObject(o)&&(f=s,s=o,o=void 0),i.call(this,e,s),!c.isInteger(t)||t<0)throw TypeError("id must be a non-negative integer");if(!c.isString(n))throw TypeError("type must be a string");if(void 0!==r&&!u.test(r=r.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(void 0!==o&&!c.isString(o))throw TypeError("extend must be a string");this.rule=r&&"optional"!==r?r:void 0,this.type=n,this.id=t,this.extend=o||void 0,this.required="required"===r,this.optional=!this.required,this.repeated="repeated"===r,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!c.Long&&void 0!==a.long[n],this.bytes="bytes"===n,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=f}f.fromJSON=function(e,t){return new f(e,t.id,t.type,t.rule,t.extend,t.options,t.comment)},Object.defineProperty(f.prototype,"packed",{get:function(){return null===this._packed&&(this._packed=!1!==this.getOption("packed")),this._packed}}),f.prototype.setOption=function(e,t,n){return"packed"===e&&(this._packed=null),i.prototype.setOption.call(this,e,t,n)},f.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return c.toObject(["rule","optional"!==this.rule&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},f.prototype.resolve=function(){if(this.resolved)return this;if(void 0===(this.typeDefault=a.defaults[this.type])&&(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof o?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof s&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(!0!==this.options.packed&&(void 0===this.options.packed||!this.resolvedType||this.resolvedType instanceof s)||delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=c.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"==typeof this.typeDefault){var e;c.base64.test(this.typeDefault)?c.base64.decode(this.typeDefault,e=c.newBuffer(c.base64.length(this.typeDefault)),0):c.utf8.write(this.typeDefault,e=c.newBuffer(c.utf8.length(this.typeDefault)),0),this.typeDefault=e}return this.map?this.defaultValue=c.emptyObject:this.repeated?this.defaultValue=c.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof o&&(this.parent.ctor.prototype[this.name]=this.defaultValue),i.prototype.resolve.call(this)},f.d=function(e,t,n,i){return"function"==typeof t?t=c.decorateType(t).name:t&&"object"===r(t)&&(t=c.decorateEnum(t).name),function(r,o){c.decorateType(r.constructor).add(new f(o,e,t,n,{default:i}))}},f._configure=function(e){o=e}},function(e,t,n){"use strict";var r=n(110);e.exports={string:function(e){for(var t="abcdefghijklmnopqrstuvwxyz012345".length,n=r.randomBytes(e),i=[],o=0;o<e;o++)i.push("abcdefghijklmnopqrstuvwxyz012345".substr(n[o]%t,1));return i.join("")},number:function(e){return Math.floor(Math.random()*e)},numberString:function(e){var t=(""+(e-1)).length;return(new Array(t+1).join("0")+this.number(e)).slice(-t)}}},function(e,t,n){"use strict";var r=n(1),i=n(9),o=n(71);function s(e,t,n,r){o.call(this,e,t,function(e){return function(t,n,r){var o={};"string"==typeof n&&(o.headers={"Content-type":"text/plain"});var s=i.addPath(t,"/xhr_send"),a=new e("POST",s,n,o);return a.once("finish",(function(e){if(a=null,200!==e&&204!==e)return r(new Error("http status "+e));r()})),function(){a.close(),a=null;var e=new Error("Aborted");e.code=1e3,r(e)}}}(r),n,r)}r(s,o),e.exports=s},function(e,t,n){"use strict";e.exports=o,o.className="ReflectionObject";var r,i=n(4);function o(e,t){if(!i.isString(e))throw TypeError("name must be a string");if(t&&!i.isObject(t))throw TypeError("options must be an object");this.options=t,this.name=e,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(o.prototype,{root:{get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}},fullName:{get:function(){for(var e=[this.name],t=this.parent;t;)e.unshift(t.name),t=t.parent;return e.join(".")}}}),o.prototype.toJSON=function(){throw Error()},o.prototype.onAdd=function(e){this.parent&&this.parent!==e&&this.parent.remove(this),this.parent=e,this.resolved=!1;var t=e.root;t instanceof r&&t._handleAdd(this)},o.prototype.onRemove=function(e){var t=e.root;t instanceof r&&t._handleRemove(this),this.parent=null,this.resolved=!1},o.prototype.resolve=function(){return this.resolved||this.root instanceof r&&(this.resolved=!0),this},o.prototype.getOption=function(e){if(this.options)return this.options[e]},o.prototype.setOption=function(e,t,n){return n&&this.options&&void 0!==this.options[e]||((this.options||(this.options={}))[e]=t),this},o.prototype.setOptions=function(e,t){if(e)for(var n=Object.keys(e),r=0;r<n.length;++r)this.setOption(n[r],e[n[r]],t);return this},o.prototype.toString=function(){var e=this.constructor.className,t=this.fullName;return t.length?e+" "+t:e},o._configure=function(e){r=e}},function(e,t,n){"use strict";var r=t,i=n(4),o=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function s(e,t){var n=0,r={};for(t|=0;n<e.length;)r[o[n+t]]=e[n++];return r}r.basic=s([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),r.defaults=s([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",i.emptyArray,null]),r.long=s([0,0,0,1,1],7),r.mapKey=s([0,0,0,5,5,0,0,0,1,1,0,2],2),r.packed=s([1,5,0,0,0,5,5,0,0,0,1,1,0])},,,,function(e,t,n){"use strict";var r=n(1),i=n(72);function o(e,t,n){i.call(this,e,t,n,{noCredentials:!0})}r(o,i),o.enabled=i.enabled,e.exports=o},function(e,t,n){"use strict";(function(t){e.exports={isOpera:function(){return t.navigator&&/opera/i.test(t.navigator.userAgent)},isKonqueror:function(){return t.navigator&&/konqueror/i.test(t.navigator.userAgent)},hasDomain:function(){if(!t.document)return!0;try{return!!t.document.domain}catch(e){return!1}}}}).call(this,n(2))},function(e,t,n){"use strict";(function(t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=n(15),o=n(12),s=n(26);e.exports={WPrefix:"_jp",currentWindowId:null,polluteGlobalNamespace:function(){e.exports.WPrefix in t||(t[e.exports.WPrefix]={})},postMessage:function(n,r){t.parent!==t&&t.parent.postMessage(o.stringify({windowId:e.exports.currentWindowId,type:n,data:r||""}),"*")},createIframe:function(e,n){var r,o,s=t.document.createElement("iframe"),a=function(){clearTimeout(r);try{s.onload=null}catch(e){}s.onerror=null},c=function(){s&&(a(),setTimeout((function(){s&&s.parentNode.removeChild(s),s=null}),0),i.unloadDel(o))},u=function(e){s&&(c(),n(e))};return s.src=e,s.style.display="none",s.style.position="absolute",s.onerror=function(){u("onerror")},s.onload=function(){clearTimeout(r),r=setTimeout((function(){u("onload timeout")}),2e3)},t.document.body.appendChild(s),r=setTimeout((function(){u("timeout")}),15e3),o=i.unloadAdd(c),{post:function(e,t){setTimeout((function(){try{s&&s.contentWindow&&s.contentWindow.postMessage(e,t)}catch(e){}}),0)},cleanup:c,loaded:a}},createHtmlfile:function(n,r){var o,s,a,c=["Active"].concat("Object").join("X"),u=new t[c]("htmlfile"),f=function(){clearTimeout(o),a.onerror=null},d=function(){u&&(f(),i.unloadDel(s),a.parentNode.removeChild(a),a=u=null,CollectGarbage())},l=function(e){u&&(d(),r(e))};u.open(),u.write('<html><script>document.domain="'+t.document.domain+'";<\/script></html>'),u.close(),u.parentWindow[e.exports.WPrefix]=t[e.exports.WPrefix];var p=u.createElement("div");return u.body.appendChild(p),a=u.createElement("iframe"),p.appendChild(a),a.src=n,a.onerror=function(){l("onerror")},o=setTimeout((function(){l("timeout")}),15e3),s=i.unloadAdd(d),{post:function(e,t){try{setTimeout((function(){a&&a.contentWindow&&a.contentWindow.postMessage(e,t)}),0)}catch(e){}},cleanup:d,loaded:f}}},e.exports.iframeEnabled=!1,t.document&&(e.exports.iframeEnabled=("function"==typeof t.postMessage||"object"===r(t.postMessage))&&!s.isKonqueror())}).call(this,n(2))},function(e,t,n){"use strict";e.exports=f;var r=n(20);((f.prototype=Object.create(r.prototype)).constructor=f).className="Namespace";var i,o,s,a=n(17),c=n(4);function u(e,t){if(e&&e.length){for(var n={},r=0;r<e.length;++r)n[e[r].name]=e[r].toJSON(t);return n}}function f(e,t){r.call(this,e,t),this.nested=void 0,this._nestedArray=null}function d(e){return e._nestedArray=null,e}f.fromJSON=function(e,t){return new f(e,t.options).addJSON(t.nested)},f.arrayToJSON=u,f.isReservedId=function(e,t){if(e)for(var n=0;n<e.length;++n)if("string"!=typeof e[n]&&e[n][0]<=t&&e[n][1]>=t)return!0;return!1},f.isReservedName=function(e,t){if(e)for(var n=0;n<e.length;++n)if(e[n]===t)return!0;return!1},Object.defineProperty(f.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=c.toArray(this.nested))}}),f.prototype.toJSON=function(e){return c.toObject(["options",this.options,"nested",u(this.nestedArray,e)])},f.prototype.addJSON=function(e){if(e)for(var t,n=Object.keys(e),r=0;r<n.length;++r)t=e[n[r]],this.add((void 0!==t.fields?i.fromJSON:void 0!==t.values?s.fromJSON:void 0!==t.methods?o.fromJSON:void 0!==t.id?a.fromJSON:f.fromJSON)(n[r],t));return this},f.prototype.get=function(e){return this.nested&&this.nested[e]||null},f.prototype.getEnum=function(e){if(this.nested&&this.nested[e]instanceof s)return this.nested[e].values;throw Error("no such enum: "+e)},f.prototype.add=function(e){if(!(e instanceof a&&void 0!==e.extend||e instanceof i||e instanceof s||e instanceof o||e instanceof f))throw TypeError("object must be a valid nested object");if(this.nested){var t=this.get(e.name);if(t){if(!(t instanceof f&&e instanceof f)||t instanceof i||t instanceof o)throw Error("duplicate name '"+e.name+"' in "+this);for(var n=t.nestedArray,r=0;r<n.length;++r)e.add(n[r]);this.remove(t),this.nested||(this.nested={}),e.setOptions(t.options,!0)}}else this.nested={};return this.nested[e.name]=e,e.onAdd(this),d(this)},f.prototype.remove=function(e){if(!(e instanceof r))throw TypeError("object must be a ReflectionObject");if(e.parent!==this)throw Error(e+" is not a member of "+this);return delete this.nested[e.name],Object.keys(this.nested).length||(this.nested=void 0),e.onRemove(this),d(this)},f.prototype.define=function(e,t){if(c.isString(e))e=e.split(".");else if(!Array.isArray(e))throw TypeError("illegal path");if(e&&e.length&&""===e[0])throw Error("path must be relative");for(var n=this;e.length>0;){var r=e.shift();if(n.nested&&n.nested[r]){if(!((n=n.nested[r])instanceof f))throw Error("path conflicts with non-namespace objects")}else n.add(n=new f(r))}return t&&n.addJSON(t),n},f.prototype.resolveAll=function(){for(var e=this.nestedArray,t=0;t<e.length;)e[t]instanceof f?e[t++].resolveAll():e[t++].resolve();return this.resolve()},f.prototype.lookup=function(e,t,n){if("boolean"==typeof t?(n=t,t=void 0):t&&!Array.isArray(t)&&(t=[t]),c.isString(e)&&e.length){if("."===e)return this.root;e=e.split(".")}else if(!e.length)return this;if(""===e[0])return this.root.lookup(e.slice(1),t);var r=this.get(e[0]);if(r){if(1===e.length){if(!t||t.indexOf(r.constructor)>-1)return r}else if(r instanceof f&&(r=r.lookup(e.slice(1),t,!0)))return r}else for(var i=0;i<this.nestedArray.length;++i)if(this._nestedArray[i]instanceof f&&(r=this._nestedArray[i].lookup(e,t,!0)))return r;return null===this.parent||n?null:this.parent.lookup(e,t)},f.prototype.lookupType=function(e){var t=this.lookup(e,[i]);if(!t)throw Error("no such type: "+e);return t},f.prototype.lookupEnum=function(e){var t=this.lookup(e,[s]);if(!t)throw Error("no such Enum '"+e+"' in "+this);return t},f.prototype.lookupTypeOrEnum=function(e){var t=this.lookup(e,[i,s]);if(!t)throw Error("no such Type or Enum '"+e+"' in "+this);return t},f.prototype.lookupService=function(e){var t=this.lookup(e,[o]);if(!t)throw Error("no such Service '"+e+"' in "+this);return t},f._configure=function(e,t,n){i=e,o=t,s=n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function e(t,n){return!this instanceof e?new e(t):(this._msg={},"function"==typeof e[t]&&(e[t].prototype.setGroup=this.setGroup,e[t].prototype.setChatType=this.setChatType,this._msg=new e[t](n)),this._msg)};r.prototype.setGroup=function(e){this.body.group=e},r.prototype.setChatType=function(e){this.body.chatType=e},r.prototype._utils={},(r.read=function(e){this.id=e,this.type="read"}).prototype.set=function(e){this.body={id:this.id,type:this.type,ackId:e.id,to:e.to,from:e.from||""},e.msgConfig&&(this.body.msgConfig=e.msgConfig),e.ackContent&&(this.body.ackContent=e.ackContent)},(r.delivery=function(e){this.id=e,this.type="delivery"}).prototype.set=function(e){this.body={id:this.id,type:this.type,ackId:e.ackId,to:e.to,from:e.from||""}},(r.txt=function(e){this.id=e,this.type="txt",this.body={}}).prototype.set=function(e){this.value=e.msg,this.body={id:this.id,to:e.to,from:e.from||"",msg:this.value,type:this.type,roomType:e.roomType||!1,ext:e.ext||{},success:e.success,fail:e.fail,chatType:e.chatType||"singleChat"},e.msgConfig&&(this.body.msgConfig=e.msgConfig)},(r.cmd=function(e){this.id=e,this.type="cmd",this.body={}}).prototype.set=function(e){this.body={id:this.id,to:e.to,from:e.from||"",action:e.action,type:this.type,roomType:e.roomType||!1,chatType:e.chatType||"singleChat",ext:e.ext||{},success:e.success,fail:e.fail}},(r.custom=function(e){this.id=e,this.type="custom",this.body={}}).prototype.set=function(e){this.body={id:this.id,to:e.to,from:e.from||"",customEvent:e.customEvent,customExts:e.customExts,type:this.type,roomType:e.roomType||!1,chatType:e.chatType||"singleChat",ext:e.ext||{},success:e.success,fail:e.fail}},(r.location=function(e){this.id=e,this.type="loc",this.body={}}).prototype.set=function(e){this.body={id:this.id,to:e.to,from:e.from||"",type:this.type,roomType:e.roomType||!1,chatType:e.chatType||"singleChat",addr:e.addr,lat:e.lat,lng:e.lng,ext:e.ext||{},success:e.success,fail:e.fail}},(r.img=function(e){this.id=e,this.type="img",this.body={}}).prototype.set=function(e){e.file=e.file||r.prototype._utils.getFileUrl(e.fileInputId),this.value=e.file,this.body={id:this.id,file:this.value,apiUrl:e.apiUrl,to:e.to,from:e.from||"",type:this.type,ext:e.ext||{},roomType:e.roomType||!1,chatType:e.chatType||"singleChat",onFileUploadError:e.onFileUploadError,onFileUploadComplete:e.onFileUploadComplete,success:e.success,fail:e.fail,flashUpload:e.flashUpload,width:e.width,height:e.height,body:e.body,uploadError:e.uploadError,uploadComplete:e.uploadComplete}},(r.audio=function(e){this.id=e,this.type="audio",this.body={}}).prototype.set=function(e){e.file=e.file||r.prototype._utils.getFileUrl(e.fileInputId),this.value=e.file,this.filename=e.filename||this.value.filename,this.body={id:this.id,file:this.value,filename:this.filename,apiUrl:e.apiUrl,to:e.to,from:e.from||"",type:this.type,ext:e.ext||{},length:e.length||0,roomType:e.roomType||!1,chatType:e.chatType||"singleChat",file_length:e.file_length,onFileUploadError:e.onFileUploadError,onFileUploadComplete:e.onFileUploadComplete,success:e.success,fail:e.fail,flashUpload:e.flashUpload,body:e.body}},(r.file=function(e){this.id=e,this.type="file",this.body={}}).prototype.set=function(e){e.file=e.file||r.prototype._utils.getFileUrl(e.fileInputId),this.value=e.file,this.filename=e.filename||this.value.filename,this.body={id:this.id,file:this.value,filename:this.filename,apiUrl:e.apiUrl,to:e.to,from:e.from||"",type:this.type,ext:e.ext||{},roomType:e.roomType||!1,chatType:e.chatType||"singleChat",onFileUploadError:e.onFileUploadError,onFileUploadComplete:e.onFileUploadComplete,success:e.success,fail:e.fail,flashUpload:e.flashUpload,body:e.body}},(r.video=function(e){this.id=e,this.type="video",this.body={}}).prototype.set=function(e){e.file=e.file||r.prototype._utils.getFileUrl(e.fileInputId),this.value=e.file,this.filename=e.filename||this.value.filename,this.body={id:this.id,file:this.value,filename:this.filename,apiUrl:e.apiUrl,to:e.to,from:e.from||"",type:this.type,ext:e.ext||{},length:e.length||0,roomType:e.roomType||!1,chatType:e.chatType||"singleChat",file_length:e.file_length,onFileUploadError:e.onFileUploadError,onFileUploadComplete:e.onFileUploadComplete,success:e.success,fail:e.fail,flashUpload:e.flashUpload,body:e.body}};var i=r;t.default=i},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o=r(n(5)),s=r(n(14)).default.getLogger("IM-SDK-LOG");function a(e){if(e&&"object"==(0,o.default)(e)){var t=[],n=this.context.root.lookup("easemob.pb.KeyValue"),r=[];for(var i in e){var s=n.decode(t);s.key=i,"object"==(0,o.default)(e[i])?(s.type=8,s.stringValue=JSON.stringify(e[i])):"string"==typeof e[i]?(s.type=7,s.stringValue=e[i]):"boolean"==typeof e[i]?(s.type=1,s.varintValue=1==e[i]?1:0):Number.isInteger(e[i])?(s.type=2,s.varintValue=e[i]):(s.type=6,s.doubleValue=e[i]),r.push(s)}return r}}var c=function(e,t){s.debug("⬆︎ messageOption: ",e);var n=[],r=t.context.root.lookup("easemob.pb.MessageBody.Content").decode(n),i=t.context.root.lookup("easemob.pb.KeyValue"),c=[],u=!e.group&&!e.roomType&&"chatRoom"!=e.chatType&&"chatroom"!=e.chatType&&"groupChat"!=e.chatType&&"groupchat"!=e.chatType||"singleChat"===e.chatType&&!e.group,f=e.group&&!e.roomType||"groupChat"===e.chatType||"groupchat"===e.chatType,d=e.group&&e.roomType||"chatRoom"===e.chatType||"chatroom"===e.chatType;switch(e.type){case"txt":r.type=0,r.text=e.msg;break;case"img":r.type=1,r.displayName=e.body.filename,r.remotePath=e.body.url,r.secretKey=e.body.secret,r.fileLength=e.body.file_length,r.size=e.body.size,r.thumbnailDisplayName=e.body.filename;break;case"video":r.type=2,r.displayName=e.body.filename,r.remotePath=e.body.url,r.secretKey=e.body.secret,r.fileLength=e.body.file_length,r.duration=e.body.length,r.thumbnailDisplayName=e.body.filename;break;case"loc":r.type=3,r.latitude=e.lat,r.longitude=e.lng,r.address=e.addr,r.latitude=e.lat;break;case"audio":r.type=4,r.displayName=e.body.filename,r.remotePath=e.body.url,r.secretKey=e.body.secret,r.fileLength=e.body.file_length,r.duration=e.body.length,r.thumbnailDisplayName=e.body.filename;break;case"file":r.type=5,r.displayName=e.body.filename,r.remotePath=e.body.url,r.secretKey=e.body.secret,r.fileLength=e.body.file_length,r.size=e.body.size,r.thumbnailDisplayName=e.body.filename;break;case"cmd":r.type=6,r.action=e.action;break;case"custom":r.type=7,r.customEvent=e.customEvent,r.customExts=a.call(t,e.customExts)}if(e.ext)for(var l in e.ext){var p=i.decode(n);p.key=l,"object"==(0,o.default)(e.ext[l])?(p.type=8,p.stringValue=JSON.stringify(e.ext[l])):"string"==typeof e.ext[l]?(p.type=7,p.stringValue=e.ext[l]):"boolean"==typeof e.ext[l]?(p.type=1,p.varintValue=1==e.ext[l]?1:0):Number.isInteger(e.ext[l])?(p.type=2,p.varintValue=e.ext[l]):(p.type=6,p.doubleValue=e.ext[l]),c.push(p)}var h=t.context.root.lookup("easemob.pb.MessageBody"),m=h.decode(n);"recall"===e.type?(m.type=6,m.from={name:t.context.jid.name},m.to={name:e.to},m.ackMessageId=e.ackId):"delivery"===e.type?(m.type=5,m.from={name:t.context.jid.name},m.to={name:e.to},m.ackMessageId=e.ackId):"read"===e.type?(m.type=4,m.from={name:t.context.jid.name},m.to={name:e.to},m.ackMessageId=e.ackId,e.msgConfig&&f&&(m.msgConfig=e.msgConfig,m.ackContent=e.ackContent)):u?(m.type=1,m.from={name:t.context.jid.name},m.to={name:e.to}):f?(m.type=2,m.from={name:t.context.jid.name},m.to={name:e.to},e.msgConfig&&(m.msgConfig=e.msgConfig)):d&&(m.type=3,m.from={name:t.context.jid.name},m.to={name:e.to}),m.contents=[r],m.ext=c,m=h.encode(m).finish();var v=t.context.root.lookup("easemob.pb.Meta").decode(n);if(v.id=e.id,"recall"===e.type){v.from=t.context.jid;var g="easemob.com";(f||d)&&(g="conference.easemob.com"),v.to={appKey:t.appKey,name:e.to,domain:g}}else"delivery"===e.type?(v.from=t.context.jid,v.to={appKey:t.appKey,name:e.to,domain:"easemob.com"}):"read"===e.type?(v.from=t.context.jid,g="easemob.com",f&&(g="conference.easemob.com"),v.to={appKey:t.appKey,name:e.to,domain:g}):u?(v.from=t.context.jid,v.to={appKey:t.appKey,name:e.to,domain:"easemob.com"}):(f||d)&&(v.from={appKey:t.appKey,name:t.user,domain:"conference.easemob.com"},v.to={appKey:t.appKey,name:e.to,domain:"conference.easemob.com"});v.ns=1,v.payload=m,s.debug("⬆︎ thirdMessage: ",v);var y=t.context.root.lookup("easemob.pb.CommSyncUL"),b=y.decode(n);b.meta=v,b=y.encode(b).finish();var _=t.context.root.lookup("easemob.pb.MSync"),w=_.decode(n);w.version=t.version,w.encryptType=t.encryptType,w.command=0,w.guid=t.context.jid,w.payload=b,s.debug("⬆︎ MSync: ",w),w=_.encode(w).finish(),t.sendMSync(w)},u=function(e,t,n){i=n;var r=t||this;if(r.msg=e,!e.file)return c(r.msg,t);if(r.msg.body&&r.msg.body.url)return c(r.msg,t);var o=r.msg.onFileUploadComplete;r.msg.onFileUploadComplete=function(e){if(e.entities[0]["file-metadata"]){var n=e.entities[0]["file-metadata"]["content-length"];r.msg.filetype=e.entities[0]["file-metadata"]["content-type"],n>204800&&(r.msg.thumbnail=!0)}r.msg.body={type:r.msg.type||"file",url:(t.isHttpDNS?t.apiUrl+e.uri.substr(e.uri.indexOf("/",9)):e.uri)+"/"+e.entities[0].uuid,secret:e.entities[0]["share-secret"],filename:r.msg.file.filename||r.msg.filename,size:{width:r.msg.width||0,height:r.msg.height||0},length:r.msg.length||0,file_length:r.msg.ext.file_length||0,filetype:r.msg.filetype||r.msg.file.filetype},c(r.msg,t),o instanceof Function&&o(e,r.msg.id)},i.uploadFile.call(t,r.msg)};t.default=u},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(8)),o=(r(n(30)),r(n(7))),s=(r(n(29)),r(n(58))),a=r(n(14)).default.getLogger("IM-SDK-LOG"),c=(0,o.default)(),u={0:"TEXT",1:"IMAGE",2:"VIDEO",3:"LOCATION",4:"VOICE",5:"FILE",6:"COMMAND",7:"CUSTOM"},f=function(e){if(e){for(var t=e,n={},r=0;r<t.length;r++)if(8==t[r].type)n[t[r].key]=JSON.parse(t[r].stringValue);else if(7==t[r].type)n[t[r].key]=t[r].stringValue;else if(6==t[r].type)n[t[r].key]=t[r].doubleValue;else if(5==t[r].type)n[t[r].key]=t[r].floatValue;else if(1==t[r].type){var o=t[r].varintValue,s=new i.default(o.low,o.high,o.unsigned).toString();n[t[r].key]=0!==Number(s)}else 2!=t[r].type&&3!=t[r].type&&4!=t[r].type||(o=t[r].varintValue,s=new i.default(o.low,o.high,o.unsigned).toString(),n[t[r].key]=Number(s));return n}},d=function(e,t,n,r){var o=n,d=new i.default(e.timestamp.low,e.timestamp.high,e.timestamp.unsigned).toString(),l=o.context.root.lookup("easemob.pb.MessageBody").decode(e.payload),p=new i.default(e.id.low,e.id.high,e.id.unsigned).toString(),h=l.ackMessageId?new i.default(l.ackMessageId.low,l.ackMessageId.high,l.ackMessageId.unsigned).toString():"",m=null;if(a.debug("⬇thirdMessage：",l),1===l.type)m="chat";else if(2===l.type)m="groupchat";else if(3===l.type)m="chatroom";else{if(4===l.type)return m="read_ack",l.msgConfig?void n.onReadMessage({mid:h,groupReadCount:l.ext[0]&&JSON.parse(l.ext[0].stringValue),ackContent:l.ackContent}):void n.onReadMessage({mid:h});if(5===l.type)return m="deliver_ack",void n.onDeliverdMessage({mid:h});if(6===l.type)return m="recall",void n.onRecallMessage({mid:h})}for(var v=0;v<l.contents.length;v++){var g={},y=t.errorCode>0,b=t.errorCode,_=t.reason,w=l.contents[v],S=l.from.name,x=l.to.name,C={};l.ext&&(C=f(l.ext));try{switch(w.type){case 0:var E=l.contents[v].text;if(!I)var I={};var T=s.default.parseTextMessage(E,I&&I.Emoji);T.isemoji?(!(g={id:p,type:m,contentsType:"EMOJI",from:S,to:x,data:T.body,ext:C,time:d,msgConfig:l.msgConfig}).delay&&delete g.delay,!g.msgConfig&&delete l.msgConfig,g.error=y,g.errorText=_,g.errorCode=b,!r&&o.onEmojiMessage(g)):(!(g={id:p,type:m,contentsType:u[w.type],from:S,to:x,data:w.text,ext:C,sourceMsg:w.text,time:d,msgConfig:l.msgConfig}).msgConfig&&delete l.msgConfig,g.error=y,g.errorText=_,g.errorCode=b,!r&&n.onTextMessage(g));break;case 1:if(w.size)var O=w.size.width||0,R=w.size.height||0;var k=n.useOwnUploadFun?w.remotePath:(w.remotePath&&o.apiUrl+w.remotePath.substr(w.remotePath.indexOf("/",9)))+"?em-redirect=true";!(g={id:p,type:m,contentsType:u[w.type],from:S,to:x,url:k,secret:w.secretKey,filename:w.displayName,thumb:w.thumbnailRemotePath,thumb_secret:w.thumbnailSecretKey,file_length:w.fileLength||"",width:O,height:R,filetype:w.filetype||"",accessToken:n.token||"",ext:C,time:d,msgConfig:l.msgConfig}).delay&&delete g.delay,!g.msgConfig&&delete l.msgConfig,g.error=y,g.errorText=_,g.errorCode=b,!r&&n.onPictureMessage(g);break;case 2:k=n.useOwnUploadFun?w.remotePath:(w.remotePath&&o.apiUrl+w.remotePath.substr(w.remotePath.indexOf("/",9)))+"?em-redirect=true",!(g={id:p,type:m,contentsType:u[w.type],from:S,to:x,url:k,secret:w.secretKey,filename:w.displayName,length:w.duration||"",file_length:w.fileLength||"",filetype:w.filetype||"",accessToken:n.token||"",ext:C,time:d,msgConfig:l.msgConfig}).delay&&delete g.delay,!g.msgConfig&&delete l.msgConfig,g.error=y,g.errorText=_,g.errorCode=b,!r&&n.onVideoMessage(g);break;case 3:!(g={id:p,type:m,contentsType:u[w.type],from:S,to:x,addr:w.address,lat:w.latitude,lng:w.longitude,ext:C,time:d,msgConfig:l.msgConfig}).delay&&delete g.delay,!g.msgConfig&&delete l.msgConfig,g.error=y,g.errorText=_,g.errorCode=b,!r&&n.onLocationMessage(g);break;case 4:k=n.useOwnUploadFun?w.remotePath:(w.remotePath&&o.apiUrl+w.remotePath.substr(w.remotePath.indexOf("/",9)))+"?em-redirect=true",!(g={id:p,type:m,contentsType:u[w.type],from:S,to:x,url:k,secret:w.secretKey,filename:w.displayName,file_length:w.fileLength||"",accessToken:n.token||"",ext:C,length:w.duration,time:d,msgConfig:l.msgConfig}).delay&&delete g.delay,!g.msgConfig&&delete l.msgConfig,g.error=y,g.errorText=_,g.errorCode=b,!r&&n.onAudioMessage(g);break;case 5:k=n.useOwnUploadFun?w.remotePath:(w.remotePath&&o.apiUrl+w.remotePath.substr(w.remotePath.indexOf("/",9)))+"?em-redirect=true",!(g={id:p,type:m,contentsType:u[w.type],from:S,to:x,url:k,secret:w.secretKey,filename:w.displayName,file_length:w.fileLength,accessToken:n.token||"",ext:C,time:d,msgConfig:l.msgConfig}).delay&&delete g.delay,!g.msgConfig&&delete l.msgConfig,g.error=y,g.errorText=_,g.errorCode=b,!r&&n.onFileMessage(g);break;case 6:!(g={id:p,contentsType:u[w.type],from:S,to:x,action:w.action,ext:C,time:d,msgConfig:l.msgConfig}).msgConfig&&delete l.msgConfig,g.error=y,g.errorText=_,g.errorCode=b,!r&&n.onCmdMessage(g);break;case 7:var M="",A="";l.contents[0].customExts&&(M=f(l.contents[0].customExts)),l.contents[0].params&&(A=f(l.contents[0].params)),g={id:p,contentsType:u[w.type],from:S,to:x,customEvent:w.customEvent,params:A,customExts:M,ext:C,time:d},!r&&n.onCustomMessage(g)}}catch(e){n.onError({type:c.WEBIM_CONNCTION_CALLBACK_INNER_ERROR,message:"parsing message error",data:e})}if(r||n.delivery)return g.message_type=m,g}};t.default=d},,,function(e,t,n){"use strict";var r=n(1),i=n(6).EventEmitter;function o(e,t){i.call(this);var n=this;this.bufferPosition=0,this.xo=new t("POST",e,null),this.xo.on("chunk",this._chunkHandler.bind(this)),this.xo.once("finish",(function(e,t){n._chunkHandler(e,t),n.xo=null;var r=200===e?"network":"permanent";n.emit("close",null,r),n._cleanup()}))}r(o,i),o.prototype._chunkHandler=function(e,t){if(200===e&&t)for(var n=-1;;this.bufferPosition+=n+1){var r=t.slice(this.bufferPosition);if(-1===(n=r.indexOf("\n")))break;var i=r.slice(0,n);i&&this.emit("message",i)}},o.prototype._cleanup=function(){this.removeAllListeners()},o.prototype.abort=function(){this.xo&&(this.xo.close(),this.emit("close",null,"user"),this.xo=null),this._cleanup()},e.exports=o},function(e,t,n){"use strict";var r=n(1),i=n(72);function o(e,t,n,r){i.call(this,e,t,n,r)}r(o,i),o.enabled=i.enabled&&i.supportsCORS,e.exports=o},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(){var e="object"===r(t)&&null!==t&&"number"!=typeof t.nodeType?t:"undefined"!=typeof self?self:$.global,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function i(e){this.message=e}i.prototype=new Error,i.prototype.name="InvalidCharacterError",e.btoa||(e.btoa=function(e){for(var t,r,o=String(e),s=0,a=n,c="";o.charAt(0|s)||(a="=",s%1);c+=a.charAt(63&t>>8-s%1*8)){if((r=o.charCodeAt(s+=3/4))>255)throw new i("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");t=t<<8|r}return c}),e.atob||(e.atob=function(e){var t=String(e).replace(/[=]+$/,"");if(t.length%4==1)throw new i("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,o,s=0,a=0,c="";o=t.charAt(a++);~o&&(r=s%4?64*r+o:o,s++%4)?c+=String.fromCharCode(255&r>>(-2*s&6)):0)o=n.indexOf(o);return c})}()},function(e,t,n){"use strict";e.exports=s;var r=n(20);((s.prototype=Object.create(r.prototype)).constructor=s).className="OneOf";var i=n(17),o=n(4);function s(e,t,n,i){if(Array.isArray(t)||(n=t,t=void 0),r.call(this,e,n),void 0!==t&&!Array.isArray(t))throw TypeError("fieldNames must be an Array");this.oneof=t||[],this.fieldsArray=[],this.comment=i}function a(e){if(e.parent)for(var t=0;t<e.fieldsArray.length;++t)e.fieldsArray[t].parent||e.parent.add(e.fieldsArray[t])}s.fromJSON=function(e,t){return new s(e,t.oneof,t.options,t.comment)},s.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return o.toObject(["options",this.options,"oneof",this.oneof,"comment",t?this.comment:void 0])},s.prototype.add=function(e){if(!(e instanceof i))throw TypeError("field must be a Field");return e.parent&&e.parent!==this.parent&&e.parent.remove(e),this.oneof.push(e.name),this.fieldsArray.push(e),e.partOf=this,a(this),this},s.prototype.remove=function(e){if(!(e instanceof i))throw TypeError("field must be a Field");var t=this.fieldsArray.indexOf(e);if(t<0)throw Error(e+" is not a member of "+this);return this.fieldsArray.splice(t,1),(t=this.oneof.indexOf(e.name))>-1&&this.oneof.splice(t,1),e.partOf=null,this},s.prototype.onAdd=function(e){r.prototype.onAdd.call(this,e);for(var t=0;t<this.oneof.length;++t){var n=e.get(this.oneof[t]);n&&!n.partOf&&(n.partOf=this,this.fieldsArray.push(n))}a(this)},s.prototype.onRemove=function(e){for(var t,n=0;n<this.fieldsArray.length;++n)(t=this.fieldsArray[n]).parent&&t.parent.remove(t);r.prototype.onRemove.call(this,e)},s.d=function(){for(var e=new Array(arguments.length),t=0;t<arguments.length;)e[t]=arguments[t++];return function(t,n){o.decorateType(t.constructor).add(new s(n,e)),Object.defineProperty(t,n,{get:o.oneOfGetter(e),set:o.oneOfSetter(e)})}}},,,,function(e,t,n){"use strict";(function(t){var r=n(6).EventEmitter,i=n(1),o=n(15),s=n(26),a=n(9);function c(e,t,n){var i=this;r.call(this),setTimeout((function(){i._start(e,t,n)}),0)}i(c,r),c.prototype._start=function(e,n,r){var i=this,s=new t.XDomainRequest;n=a.addQuery(n,"t="+ +new Date),s.onerror=function(){i._error()},s.ontimeout=function(){i._error()},s.onprogress=function(){s.responseText,i.emit("chunk",200,s.responseText)},s.onload=function(){i.emit("finish",200,s.responseText),i._cleanup(!1)},this.xdr=s,this.unloadRef=o.unloadAdd((function(){i._cleanup(!0)}));try{this.xdr.open(e,n),this.timeout&&(this.xdr.timeout=this.timeout),this.xdr.send(r)}catch(e){this._error()}},c.prototype._error=function(){this.emit("finish",0,""),this._cleanup(!1)},c.prototype._cleanup=function(e){if(this.xdr){if(this.removeAllListeners(),o.unloadDel(this.unloadRef),this.xdr.ontimeout=this.xdr.onerror=this.xdr.onprogress=this.xdr.onload=null,e)try{this.xdr.abort()}catch(e){}this.unloadRef=this.xdr=null}},c.prototype.close=function(){this._cleanup(!0)},c.enabled=!(!t.XDomainRequest||!s.hasDomain()),e.exports=c}).call(this,n(2))},function(e,t,n){"use strict";(function(t){var r=n(1),i=n(76),o=n(43);e.exports=function(e){function n(t,n){i.call(this,e.transportName,t,n)}return r(n,i),n.enabled=function(n,r){if(!t.document)return!1;var s=o.extend({},r);return s.sameOrigin=!0,e.enabled(s)&&i.enabled()},n.transportName="iframe-"+e.transportName,n.needBody=!0,n.roundTrips=i.roundTrips+e.roundTrips-1,n.facadeTransport=e,n}}).call(this,n(2))},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports={isObject:function(e){var t=r(e);return"function"===t||"object"===t&&!!e},extend:function(e){if(!this.isObject(e))return e;for(var t,n,r=1,i=arguments.length;r<i;r++)for(n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}}},function(e,t,n){"use strict";function r(e){this.type=e}r.prototype.initEvent=function(e,t,n){return this.type=e,this.bubbles=t,this.cancelable=n,this.timeStamp=+new Date,this},r.prototype.stopPropagation=function(){},r.prototype.preventDefault=function(){},r.CAPTURING_PHASE=1,r.AT_TARGET=2,r.BUBBLING_PHASE=3,e.exports=r},function(e,t,n){"use strict";e.exports=d;var r,i=n(13),o=i.LongBits,s=i.base64,a=i.utf8;function c(e,t,n){this.fn=e,this.len=t,this.next=void 0,this.val=n}function u(){}function f(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function d(){this.len=0,this.head=new c(u,0,0),this.tail=this.head,this.states=null}function l(e,t,n){t[n]=255&e}function p(e,t){this.len=e,this.next=void 0,this.val=t}function h(e,t,n){for(;e.hi;)t[n++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[n++]=127&e.lo|128,e.lo=e.lo>>>7;t[n++]=e.lo}function m(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}d.create=i.Buffer?function(){return(d.create=function(){return new r})()}:function(){return new d},d.alloc=function(e){return new i.Array(e)},i.Array!==Array&&(d.alloc=i.pool(d.alloc,i.Array.prototype.subarray)),d.prototype._push=function(e,t,n){return this.tail=this.tail.next=new c(e,t,n),this.len+=t,this},p.prototype=Object.create(c.prototype),p.prototype.fn=function(e,t,n){for(;e>127;)t[n++]=127&e|128,e>>>=7;t[n]=e},d.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new p((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},d.prototype.int32=function(e){return e<0?this._push(h,10,o.fromNumber(e)):this.uint32(e)},d.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},d.prototype.uint64=function(e){var t=o.from(e);return this._push(h,t.length(),t)},d.prototype.int64=d.prototype.uint64,d.prototype.sint64=function(e){var t=o.from(e).zzEncode();return this._push(h,t.length(),t)},d.prototype.bool=function(e){return this._push(l,1,e?1:0)},d.prototype.fixed32=function(e){return this._push(m,4,e>>>0)},d.prototype.sfixed32=d.prototype.fixed32,d.prototype.fixed64=function(e){var t=o.from(e);return this._push(m,4,t.lo)._push(m,4,t.hi)},d.prototype.sfixed64=d.prototype.fixed64,d.prototype.float=function(e){return this._push(i.float.writeFloatLE,4,e)},d.prototype.double=function(e){return this._push(i.float.writeDoubleLE,8,e)};var v=i.Array.prototype.set?function(e,t,n){t.set(e,n)}:function(e,t,n){for(var r=0;r<e.length;++r)t[n+r]=e[r]};d.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(l,1,0);if(i.isString(e)){var n=d.alloc(t=s.length(e));s.decode(e,n,0),e=n}return this.uint32(t)._push(v,t,e)},d.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(l,1,0)},d.prototype.fork=function(){return this.states=new f(this),this.head=this.tail=new c(u,0,0),this.len=0,this},d.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new c(u,0,0),this.len=0),this},d.prototype.ldelim=function(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this},d.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t},d._configure=function(e){r=e}},function(e,t,n){"use strict";e.exports=c;var r,i=n(13),o=i.LongBits,s=i.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function c(e){this.buf=e,this.pos=0,this.len=e.length}var u,f="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new c(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new c(e);throw Error("illegal buffer")};function d(){var e=new o(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function l(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function p(){if(this.pos+8>this.len)throw a(this,8);return new o(l(this.buf,this.pos+=4),l(this.buf,this.pos+=4))}c.create=i.Buffer?function(e){return(c.create=function(e){return i.Buffer.isBuffer(e)?new r(e):f(e)})(e)}:f,c.prototype._slice=i.Array.prototype.subarray||i.Array.prototype.slice,c.prototype.uint32=(u=4294967295,function(){if(u=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return u;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return u}),c.prototype.int32=function(){return 0|this.uint32()},c.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},c.prototype.bool=function(){return 0!==this.uint32()},c.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return l(this.buf,this.pos+=4)},c.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|l(this.buf,this.pos+=4)},c.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=i.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},c.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=i.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},c.prototype.bytes=function(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw a(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)},c.prototype.string=function(){var e=this.bytes();return s.read(e,0,e.length)},c.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},c.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},c._configure=function(e){r=e;var t=i.Long?"toLong":"toNumber";i.merge(c.prototype,{int64:function(){return d.call(this)[t](!1)},uint64:function(){return d.call(this)[t](!0)},sint64:function(){return d.call(this).zzDecode()[t](!1)},fixed64:function(){return p.call(this)[t](!0)},sfixed64:function(){return p.call(this)[t](!1)}})}},function(e,t,n){"use strict";e.exports=y;var r=n(28);((y.prototype=Object.create(r.prototype)).constructor=y).className="Type";var i=n(11),o=n(37),s=n(17),a=n(48),c=n(49),u=n(51),f=n(46),d=n(45),l=n(4),p=n(87),h=n(88),m=n(89),v=n(90),g=n(91);function y(e,t){r.call(this,e,t),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}function b(e){return e._fieldsById=e._fieldsArray=e._oneofsArray=null,delete e.encode,delete e.decode,delete e.verify,e}Object.defineProperties(y.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var e=Object.keys(this.fields),t=0;t<e.length;++t){var n=this.fields[e[t]],r=n.id;if(this._fieldsById[r])throw Error("duplicate id "+r+" in "+this);this._fieldsById[r]=n}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=l.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=l.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=y.generateConstructor(this)())},set:function(e){var t=e.prototype;t instanceof u||((e.prototype=new u).constructor=e,l.merge(e.prototype,t)),e.$type=e.prototype.$type=this,l.merge(e,u,!0),this._ctor=e;for(var n=0;n<this.fieldsArray.length;++n)this._fieldsArray[n].resolve();var r={};for(n=0;n<this.oneofsArray.length;++n)r[this._oneofsArray[n].resolve().name]={get:l.oneOfGetter(this._oneofsArray[n].oneof),set:l.oneOfSetter(this._oneofsArray[n].oneof)};n&&Object.defineProperties(e.prototype,r)}}}),y.generateConstructor=function(e){for(var t,n=l.codegen(["p"],e.name),r=0;r<e.fieldsArray.length;++r)(t=e._fieldsArray[r]).map?n("this%s={}",l.safeProp(t.name)):t.repeated&&n("this%s=[]",l.safeProp(t.name));return n("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},y.fromJSON=function(e,t){var n=new y(e,t.options);n.extensions=t.extensions,n.reserved=t.reserved;for(var u=Object.keys(t.fields),f=0;f<u.length;++f)n.add((void 0!==t.fields[u[f]].keyType?a.fromJSON:s.fromJSON)(u[f],t.fields[u[f]]));if(t.oneofs)for(u=Object.keys(t.oneofs),f=0;f<u.length;++f)n.add(o.fromJSON(u[f],t.oneofs[u[f]]));if(t.nested)for(u=Object.keys(t.nested),f=0;f<u.length;++f){var d=t.nested[u[f]];n.add((void 0!==d.id?s.fromJSON:void 0!==d.fields?y.fromJSON:void 0!==d.values?i.fromJSON:void 0!==d.methods?c.fromJSON:r.fromJSON)(u[f],d))}return t.extensions&&t.extensions.length&&(n.extensions=t.extensions),t.reserved&&t.reserved.length&&(n.reserved=t.reserved),t.group&&(n.group=!0),t.comment&&(n.comment=t.comment),n},y.prototype.toJSON=function(e){var t=r.prototype.toJSON.call(this,e),n=!!e&&Boolean(e.keepComments);return l.toObject(["options",t&&t.options||void 0,"oneofs",r.arrayToJSON(this.oneofsArray,e),"fields",r.arrayToJSON(this.fieldsArray.filter((function(e){return!e.declaringField})),e)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",t&&t.nested||void 0,"comment",n?this.comment:void 0])},y.prototype.resolveAll=function(){for(var e=this.fieldsArray,t=0;t<e.length;)e[t++].resolve();var n=this.oneofsArray;for(t=0;t<n.length;)n[t++].resolve();return r.prototype.resolveAll.call(this)},y.prototype.get=function(e){return this.fields[e]||this.oneofs&&this.oneofs[e]||this.nested&&this.nested[e]||null},y.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof s&&void 0===e.extend){if(this._fieldsById?this._fieldsById[e.id]:this.fieldsById[e.id])throw Error("duplicate id "+e.id+" in "+this);if(this.isReservedId(e.id))throw Error("id "+e.id+" is reserved in "+this);if(this.isReservedName(e.name))throw Error("name '"+e.name+"' is reserved in "+this);return e.parent&&e.parent.remove(e),this.fields[e.name]=e,e.message=this,e.onAdd(this),b(this)}return e instanceof o?(this.oneofs||(this.oneofs={}),this.oneofs[e.name]=e,e.onAdd(this),b(this)):r.prototype.add.call(this,e)},y.prototype.remove=function(e){if(e instanceof s&&void 0===e.extend){if(!this.fields||this.fields[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.fields[e.name],e.parent=null,e.onRemove(this),b(this)}if(e instanceof o){if(!this.oneofs||this.oneofs[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.oneofs[e.name],e.parent=null,e.onRemove(this),b(this)}return r.prototype.remove.call(this,e)},y.prototype.isReservedId=function(e){return r.isReservedId(this.reserved,e)},y.prototype.isReservedName=function(e){return r.isReservedName(this.reserved,e)},y.prototype.create=function(e){return new this.ctor(e)},y.prototype.setup=function(){for(var e=this.fullName,t=[],n=0;n<this.fieldsArray.length;++n)t.push(this._fieldsArray[n].resolve().resolvedType);this.encode=p(this)({Writer:d,types:t,util:l}),this.decode=h(this)({Reader:f,types:t,util:l}),this.verify=m(this)({types:t,util:l}),this.fromObject=v.fromObject(this)({types:t,util:l}),this.toObject=v.toObject(this)({types:t,util:l});var r=g[e];if(r){var i=Object.create(this);i.fromObject=this.fromObject,this.fromObject=r.fromObject.bind(i),i.toObject=this.toObject,this.toObject=r.toObject.bind(i)}return this},y.prototype.encode=function(e,t){return this.setup().encode(e,t)},y.prototype.encodeDelimited=function(e,t){return this.encode(e,t&&t.len?t.fork():t).ldelim()},y.prototype.decode=function(e,t){return this.setup().decode(e,t)},y.prototype.decodeDelimited=function(e){return e instanceof f||(e=f.create(e)),this.decode(e,e.uint32())},y.prototype.verify=function(e){return this.setup().verify(e)},y.prototype.fromObject=function(e){return this.setup().fromObject(e)},y.prototype.toObject=function(e,t){return this.setup().toObject(e,t)},y.d=function(e){return function(t){l.decorateType(t,e)}}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=a;var i=n(17);((a.prototype=Object.create(i.prototype)).constructor=a).className="MapField";var o=n(21),s=n(4);function a(e,t,n,r,o,a){if(i.call(this,e,t,r,void 0,void 0,o,a),!s.isString(n))throw TypeError("keyType must be a string");this.keyType=n,this.resolvedKeyType=null,this.map=!0}a.fromJSON=function(e,t){return new a(e,t.id,t.keyType,t.type,t.options,t.comment)},a.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return s.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},a.prototype.resolve=function(){if(this.resolved)return this;if(void 0===o.mapKey[this.keyType])throw Error("invalid key type: "+this.keyType);return i.prototype.resolve.call(this)},a.d=function(e,t,n){return"function"==typeof n?n=s.decorateType(n).name:n&&"object"===r(n)&&(n=s.decorateEnum(n).name),function(r,i){s.decorateType(r.constructor).add(new a(i,e,t,n))}}},function(e,t,n){"use strict";e.exports=a;var r=n(28);((a.prototype=Object.create(r.prototype)).constructor=a).className="Service";var i=n(50),o=n(4),s=n(85);function a(e,t){r.call(this,e,t),this.methods={},this._methodsArray=null}function c(e){return e._methodsArray=null,e}a.fromJSON=function(e,t){var n=new a(e,t.options);if(t.methods)for(var r=Object.keys(t.methods),o=0;o<r.length;++o)n.add(i.fromJSON(r[o],t.methods[r[o]]));return t.nested&&n.addJSON(t.nested),n.comment=t.comment,n},a.prototype.toJSON=function(e){var t=r.prototype.toJSON.call(this,e),n=!!e&&Boolean(e.keepComments);return o.toObject(["options",t&&t.options||void 0,"methods",r.arrayToJSON(this.methodsArray,e)||{},"nested",t&&t.nested||void 0,"comment",n?this.comment:void 0])},Object.defineProperty(a.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=o.toArray(this.methods))}}),a.prototype.get=function(e){return this.methods[e]||r.prototype.get.call(this,e)},a.prototype.resolveAll=function(){for(var e=this.methodsArray,t=0;t<e.length;++t)e[t].resolve();return r.prototype.resolve.call(this)},a.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);return e instanceof i?(this.methods[e.name]=e,e.parent=this,c(this)):r.prototype.add.call(this,e)},a.prototype.remove=function(e){if(e instanceof i){if(this.methods[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.methods[e.name],e.parent=null,c(this)}return r.prototype.remove.call(this,e)},a.prototype.create=function(e,t,n){for(var r,i=new s.Service(e,t,n),a=0;a<this.methodsArray.length;++a){var c=o.lcFirst((r=this._methodsArray[a]).resolve().name).replace(/[^$\w_]/g,"");i[c]=o.codegen(["r","c"],o.isReserved(c)?c+"_":c)("return this.rpcCall(m,q,s,r,c)")({m:r,q:r.resolvedRequestType.ctor,s:r.resolvedResponseType.ctor})}return i}},function(e,t,n){"use strict";e.exports=o;var r=n(20);((o.prototype=Object.create(r.prototype)).constructor=o).className="Method";var i=n(4);function o(e,t,n,o,s,a,c,u){if(i.isObject(s)?(c=s,s=a=void 0):i.isObject(a)&&(c=a,a=void 0),void 0!==t&&!i.isString(t))throw TypeError("type must be a string");if(!i.isString(n))throw TypeError("requestType must be a string");if(!i.isString(o))throw TypeError("responseType must be a string");r.call(this,e,c),this.type=t||"rpc",this.requestType=n,this.requestStream=!!s||void 0,this.responseType=o,this.responseStream=!!a||void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=u}o.fromJSON=function(e,t){return new o(e,t.type,t.requestType,t.responseType,t.requestStream,t.responseStream,t.options,t.comment)},o.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return i.toObject(["type","rpc"!==this.type&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",t?this.comment:void 0])},o.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),r.prototype.resolve.call(this))}},function(e,t,n){"use strict";e.exports=i;var r=n(13);function i(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)this[t[n]]=e[t[n]]}i.create=function(e){return this.$type.create(e)},i.encode=function(e,t){return this.$type.encode(e,t)},i.encodeDelimited=function(e,t){return this.$type.encodeDelimited(e,t)},i.decode=function(e){return this.$type.decode(e)},i.decodeDelimited=function(e){return this.$type.decodeDelimited(e)},i.verify=function(e){return this.$type.verify(e)},i.fromObject=function(e){return this.$type.fromObject(e)},i.toObject=function(e,t){return this.$type.toObject(e,t)},i.prototype.toJSON=function(){return this.$type.toObject(this,r.toJSONOptions)}},function(e,t,n){"use strict";e.exports=d;var r=n(28);((d.prototype=Object.create(r.prototype)).constructor=d).className="Root";var i,o,s,a=n(17),c=n(11),u=n(37),f=n(4);function d(e){r.call(this,"",e),this.deferred=[],this.files=[]}function l(){}d.fromJSON=function(e,t){return t||(t=new d),e.options&&t.setOptions(e.options),t.addJSON(e.nested)},d.prototype.resolvePath=f.path.resolve,d.prototype.load=function e(t,n,r){"function"==typeof n&&(r=n,n=void 0);var i=this;if(!r)return f.asPromise(e,i,t,n);var a=r===l;function c(e,t){if(r){var n=r;if(r=null,a)throw e;n(e,t)}}function u(e,t){try{if(f.isString(t)&&"{"===t.charAt(0)&&(t=JSON.parse(t)),f.isString(t)){o.filename=e;var r,s=o(t,i,n),u=0;if(s.imports)for(;u<s.imports.length;++u)(r=i.resolvePath(e,s.imports[u]))&&d(r);if(s.weakImports)for(u=0;u<s.weakImports.length;++u)(r=i.resolvePath(e,s.weakImports[u]))&&d(r,!0)}else i.setOptions(t.options).addJSON(t.nested)}catch(e){c(e)}a||p||c(null,i)}function d(e,t){var n=e.lastIndexOf("google/protobuf/");if(n>-1){var o=e.substring(n);o in s&&(e=o)}if(!(i.files.indexOf(e)>-1))if(i.files.push(e),e in s)a?u(e,s[e]):(++p,setTimeout((function(){--p,u(e,s[e])})));else if(a){var d;try{d=f.fs.readFileSync(e).toString("utf8")}catch(e){return void(t||c(e))}u(e,d)}else++p,f.fetch(e,(function(n,o){--p,r&&(n?t?p||c(null,i):c(n):u(e,o))}))}var p=0;f.isString(t)&&(t=[t]);for(var h,m=0;m<t.length;++m)(h=i.resolvePath("",t[m]))&&d(h);if(a)return i;p||c(null,i)},d.prototype.loadSync=function(e,t){if(!f.isNode)throw Error("not supported");return this.load(e,t,l)},d.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map((function(e){return"'extend "+e.extend+"' in "+e.parent.fullName})).join(", "));return r.prototype.resolveAll.call(this)};var p=/^[A-Z]/;function h(e,t){var n=t.parent.lookup(t.extend);if(n){var r=new a(t.fullName,t.id,t.type,t.rule,void 0,t.options);return r.declaringField=t,t.extensionField=r,n.add(r),!0}return!1}d.prototype._handleAdd=function(e){if(e instanceof a)void 0===e.extend||e.extensionField||h(0,e)||this.deferred.push(e);else if(e instanceof c)p.test(e.name)&&(e.parent[e.name]=e.values);else if(!(e instanceof u)){if(e instanceof i)for(var t=0;t<this.deferred.length;)h(0,this.deferred[t])?this.deferred.splice(t,1):++t;for(var n=0;n<e.nestedArray.length;++n)this._handleAdd(e._nestedArray[n]);p.test(e.name)&&(e.parent[e.name]=e)}},d.prototype._handleRemove=function(e){if(e instanceof a){if(void 0!==e.extend)if(e.extensionField)e.extensionField.parent.remove(e.extensionField),e.extensionField=null;else{var t=this.deferred.indexOf(e);t>-1&&this.deferred.splice(t,1)}}else if(e instanceof c)p.test(e.name)&&delete e.parent[e.name];else if(e instanceof r){for(var n=0;n<e.nestedArray.length;++n)this._handleRemove(e._nestedArray[n]);p.test(e.name)&&delete e.parent[e.name]}},d._configure=function(e,t,n){i=e,o=t,s=n}},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o,s=r(n(7)),a=r(n(29)),c=r(n(54)),u=r(n(30)),f=r(n(31)),d=r(n(59)),l=r(n(60)),p=r(n(61)),h=r(n(8)),m=r(n(62)),v=r(n(14)).default.getLogger("IM-SDK-LOG"),g={},y=(0,s.default)(),b=[],_=1,w=function(){},S=function e(t){if(!this instanceof e)return new e(t);t=t||{},this.isDebug=t.isDebug||!1,this.isHttpDNS=t.isHttpDNS||!1,this.isMultiLoginSessions=t.isMultiLoginSessions||!1,this.wait=t.wait||30,this.retry=t.retry||!1,this.https=t.https&&window&&"https:"===location.protocol,this.url=t.url,this.hold=t.hold||1,this.route=t.route||null,this.inactivity=t.inactivity||30,this.heartBeatWait=t.heartBeatWait||3e4,this.maxRetries=t.maxRetries||5,this.isAutoLogin=!1!==t.isAutoLogin,this.pollingTime=t.pollingTime||800,this.stropheConn=!1,this.autoReconnectNumMax=t.autoReconnectNumMax||0,this.autoReconnectNumTotal=0,this.autoReconnectInterval=t.autoReconnectInterval||0,this.context={status:y.STATUS_INIT},this.sendQueue=new c.default,this.intervalId=null,this.apiUrl=t.apiUrl||"",this.encrypt=t.encrypt||{encrypt:{type:"none"}},this.delivery=t.delivery||!1,this.appKey=t.appKey||"",this.domain=t.domain||"easemob.com",this.clientResource="84ff3eba1",this.user="",this.orgName="",this.appName="",this.token="",this.unSendMsgArr=[],this.dnsArr=["https://rs.easemob.com","http://182.92.174.78","http://112.126.66.111"],this.dnsIndex=0,this.dnsTotal=this.dnsArr.length,this.restHosts=[],this.restIndex=0,this.restTotal=0,this.socketHost=[],this.hostIndex=0,this.hostTotal=0,this.groupOption={},this.version=t.version||"3.0.0",this.compressAlgorimth=t.compressAlgorimth||0,this.userAgent=t.userAgent||0,this.pov=t.pov||0,this.command=t.command||3,this.deviceId=t.deviceId||"webim",this.encryptKey=t.encryptKey||"",this.firstPayload=t.firstPayload||[],this.compressType=t.compressType||[0],this.encryptType=t.encryptType||[0],this.osType=16,this.useOwnUploadFun=t.useOwnUploadFun||!1};S.prototype.registerUser=function(e){this.isHttpDNS?(this.dnsIndex=0,this.getHttpDNS(e,"signup")):this.signup(e)},S.prototype.listen=function(e){this.onOpened=e.onOpened||w,this.onClosed=e.onClosed||w,this.onTextMessage=e.onTextMessage||w,this.onEmojiMessage=e.onEmojiMessage||w,this.onPictureMessage=e.onPictureMessage||w,this.onAudioMessage=e.onAudioMessage||w,this.onVideoMessage=e.onVideoMessage||w,this.onFileMessage=e.onFileMessage||w,this.onLocationMessage=e.onLocationMessage||w,this.onCustomMessage=e.onCustomMessage||w,this.onCmdMessage=e.onCmdMessage||w,this.onStatisticMessage=e.onStatisticMessage||w,this.onPresence=e.onPresence||w,this.onRoster=e.onRoster||w,this.onError=e.onError||w,this.onReceivedMessage=e.onReceivedMessage||w,this.onInviteMessage=e.onInviteMessage||w,this.onDeliverdMessage=e.onDeliveredMessage||w,this.onReadMessage=e.onReadMessage||w,this.onRecallMessage=e.onRecallMessage||w,this.onMutedMessage=e.onMutedMessage||w,this.onOffline=e.onOffline||w,this.onOnline=e.onOnline||w,this.onConfirmPop=e.onConfirmPop||w,this.onCreateGroup=e.onCreateGroup||w,this.onContactAgreed=e.onContactAgreed||w,this.onContactRefuse=e.onContactRefuse||w,this.onContactInvited=e.onContactInvited||w,this.onContactDeleted=e.onContactDeleted||w,this.onContactAdded=e.onContactAdded||w,this.onUpdateMyGroupList=e.onUpdateMyGroupList||w,this.onUpdateMyRoster=e.onUpdateMyRoster||w,this.onBlacklistUpdate=e.onBlacklistUpdate||w,o._listenNetwork(this.onOnline,this.onOffline)},S.prototype.getParams=function(e){i=e.root,o=e.utils,S.prototype._utils=o,g.utils=o,g.statusCode=y,g.message=a.default,g.message.prototype._utils=o},S.prototype._msgHash={},S.prototype._queues=[],S.prototype._lastsession=function(e,t,n){var r=[],o=i.lookup("easemob.pb.CommSyncUL"),s=o.decode(r);s.queue=t,s.key=new h.default(e.low,e.high,e.unsigned).toString(),s=o.encode(s).finish(),v.debug("⬆︎_lastsession: ",s);var a=i.lookup("easemob.pb.MSync"),c=a.decode(r);if(c.version=n.version,c.encryptType=n.encryptType,c.command=0,c.payload=s,c=a.encode(c).finish(),n.sock.readyState!==_){var u={type:y.WEBIM_CONNCTION_DISCONNECTED,message:"websocket has been disconnected"};n.onError(u)}else n._base64transform(c,n)},S.prototype._metapayload=function(e,t,n){for(var r=0;r<e.length;r++){var i=new h.default(e[r].id.low,e[r].id.high,e[r].id.unsigned).toString();b.indexOf(i)<0&&(v.debug("下行meta：",e[r]),1===e[r].ns?(0,f.default)(e[r],t,n):2===e[r].ns?(0,d.default)(e[r],t,n):3===e[r].ns?l.default.handleMessage(e[r],t,n):0===e[r].ns?(0,p.default)(e[r],t,n):4===e[r].ns&&n.registerConfrIQHandler&&n.registerConfrIQHandler(e[r],t,n),b.length<=100||b.shift(),b.push(i))}},S.prototype._rebuild=function(){var e=[],t=i.lookup("easemob.pb.StatisticsBody"),n=t.decode(e);n.operation=0,n=t.encode(n).finish();var r=i.lookup("easemob.pb.Meta").decode(e);r.id=(new Date).valueOf(),r.ns=0,r.payload=n;var o=i.lookup("easemob.pb.CommSyncUL"),s=o.decode(e);s.meta=r,v.debug("⬆︎ rebuild: ",r),s=o.encode(s).finish();var a=i.lookup("easemob.pb.MSync"),c=a.decode(e);c.version=this.version,c.encryptType=[0],c.command=0,c.payload=s,c=a.encode(c).finish(),this._base64transform(c,this)},S.prototype._backqueue=function(e,t){var n=[],r=i.lookup("easemob.pb.CommSyncUL"),o=r.decode(n);o.queue=e,v.debug("⬆︎queue: ",o),o=r.encode(o).finish();var s=i.lookup("easemob.pb.MSync"),a=s.decode(n);a.version=t.version,a.encryptType=t.encryptType,a.command=0,a.payload=o,a=s.encode(a).finish(),t._base64transform(a,t)};var x=function(e){var t=i.lookup("easemob.pb.MSync"),n=t.decode([]);n.version=e.version,n.encryptType=e.encryptType,n.command=1,v.debug("⬆︎unreadDeal: ",n),n=t.encode(n).finish(),e._base64transform(n,e)};S.prototype._receiveProvision=function(e,t){var n=i.lookup("easemob.pb.Provision").decode(e.payload);t.context.jid.clientResource=n.resource,t.clientResource=n.resource,0==n.status.errorCode?(t.onOpened(),t.heartBeat(t),x(t),t._rebuild(t)):t.isDebug&&console.log("下行provision失败: ",n)},S.prototype.heartBeatID=0,S.prototype.heartBeat=function(e){this.stopHeartBeat(),this.heartBeatID=setInterval((function(){x(e)}),this.heartBeatWait)},S.prototype.stopHeartBeat=function(){clearInterval(this.heartBeatID)},S.prototype.getRestFromHttpDNS=function(e,t){if(!(this.restIndex>this.restTotal)){var n="",r=this.restHosts[this.restIndex],i=r.domain,o=r.ip;if(o&&"http:"==location.protocol){var s=r.port;n=("https:"===location.protocol?"https:":"http:")+"//"+o+":"+s}else n=("https:"===location.protocol?"https:":"http:")+"//"+i;""!=n&&(this.apiUrl=n,e.apiUrl=n),"login"==t?this.login(e):this.signup(e)}},S.prototype.getHttpDNS=function(e,t){var n=this,r={url:this.dnsArr[this.dnsIndex]+"/easemob/server.json",dataType:"json",type:"GET",data:{app_key:encodeURIComponent(e.appKey||this.appKey)},success:function(r,i){var o=r.rest.hosts;if(o){for(var s=n.https?"https":"http",a=o.filter((function(e,t){if(e.protocol==s)return e})),c=0;c<a.length;c++)if(a[c].protocol===s){var u=a[c];a.splice(c,1),a.unshift(u)}n.restHosts=a,n.restTotal=a.length;try{Array.prototype.slice.call(document.documentElement.childNodes,0)[0].nodeType}catch(e){}var f=r["msync-ws"].hosts;if(f){var d=f.filter((function(e,t){if(e.protocol==s)return e}));for(c=0;c<d.length;c++)d[c].protocol===s&&(u=d[c],d.splice(c,1),d.unshift(u));n.socketHost=d,n.hostTotal=d.length,n.getRestFromHttpDNS(e,t)}}}||w,error:function(r,i,o){console.log("getHttpDNS error",r,o),n.dnsIndex++,n.dnsIndex<n.dnsTotal&&n.getHttpDNS(e,t)}||w};o.ajax(r)},S.prototype.signup=function(e){v.debug("signup");var t=this,n=e.orgName||"",r=e.appName||"",i=e.appKey||this.appKey,s=e.success||w,a=e.error||w;if(!n&&!r&&i){var c=i.split("#");2===c.length&&(n=c[0],r=c[1])}if(n||r){e.https||this.https;var u=(e.apiUrl||this.apiUrl)+"/"+n+"/"+r+"/users",f={username:e.username,password:e.password,nickname:e.nickname||""},d={url:u,dataType:"json",data:o.stringify(f),success:s,error:function(n,r,i){if(t.isHttpDNS&&t.restIndex+1<t.restTotal)return t.restIndex++,void t.getRestFromHttpDNS(e,"signup");t.clear(),a(n)}};return o.ajax(d)}a({type:y.WEBIM_CONNCTION_APPKEY_NOT_ASSIGN_ERROR})},S.prototype.open=function(e){var t=e.appKey,n=t.split("#")[0],r=t.split("#")[1];this.orgName=n,this.appName=r,e.accessToken&&(this.token=e.accessToken),this.isHttpDNS?(this.dnsIndex=0,this.getHttpDNS(e,"login")):this.login(e)},S.prototype.login=function(e){if(this.user=e.user,function(e,t){if(""==(e=e||{}).user)return t.onError({type:y.WEBIM_CONNCTION_USER_NOT_ASSIGN_ERROR,message:"the user cannot be empty"}),!1;var n=e.user+""||"",r=e.appKey||"",o=r.split("#");if(2!==o.length)return t.onError({type:y.WEBIM_CONNCTION_APPKEY_NOT_ASSIGN_ERROR,message:"the appKey is illegal"}),!1;var s=o[0],a=o[1];return s&&a?(t.context.jid={appKey:r,name:n,domain:t.domain,clientResource:t.clientResource},t.context.root=i,t.context.userId=n,t.context.appKey=r,t.context.appName=a,t.context.orgName=s,!0):(t.onError({type:y.WEBIM_CONNCTION_APPKEY_NOT_ASSIGN_ERROR,message:"the appKey is illegal"}),!1)}(e,this)){var t=this;if(!t.isOpened())if(e.accessToken)e.access_token=e.accessToken,this._login(e,t);else{var n=e.apiUrl,r=this.context.userId,s=e.pwd||"",a=this.context.appName,c=this.context.orgName,u={grant_type:"password",username:r,password:s,timestamp:+new Date},f={headers:{"Content-type":"application/json"},url:n+"/"+c+"/"+a+"/token",dataType:"json",data:o.stringify(u),success:function(n,r){e.success&&e.success(n),t.token=n.access_token,t.context.restTokenData=n.access_token,t._login(n,t)}||w,error:function(n,r,i){if(e.error&&e.error(),t.isHttpDNS&&t.restIndex+1<t.restTotal)return t.restIndex++,void t.getRestFromHttpDNS(e,"login");t.clear(),n.error&&n.error_description?t.onError({type:y.WEBIM_CONNCTION_OPEN_USERGRID_ERROR,message:"login failed",data:n,xhr:r}):t.onError({type:y.WEBIM_CONNCTION_OPEN_ERROR,message:"login failed",data:n,xhr:r})}||w};o.ajax(f)}}},S.prototype.close=function(e){this.logOut=!0,this.context.status=y.STATUS_CLOSING,this.sock.close(),this.stopHeartBeat(),this.context.status=y.STATUS_CLOSING},S.prototype.recallMessage=function(e){var t={id:this.getUniqueId(),type:"recall",chatType:"chat"==e.type?"singleChat":e.type,ackId:e.mid,to:e.to,success:e.success,fail:e.fail};this.send(t,this)},S.prototype.sendMSync=function(e){if(this.sock.readyState===_)return this._base64transform(e,this);this.unSendMsgArr.push(this._base64transform(e,this,!0)),!this.logOut&&this.autoReconnectNumTotal<this.autoReconnectNumMax&&(this.autoReconnectNumTotal<=this.socketHost.length&&this.isHttpDNS||!this.isHttpDNS)&&(this.offLineSendConnecting=!0,this.reconnect()),this.onError({type:y.WEBIM_CONNCTION_DISCONNECTED,message:"websocket has been disconnected",reconnect:!0})},S.prototype.getUniqueId=function(e){this.autoIncrement?this.autoIncrement++:this.autoIncrement=1;var t=new Date,n=new Date(2010,1,1);return t.getTime()-n.getTime()+this.autoIncrement},S.prototype.send=function(e){(0,u.default)(e,this,o),this._msgHash[e.id]=e},S.prototype.removeRoster=function(e){l.default.operatRoster(e,"remove",this)},S.prototype.subscribe=function(e){l.default.operatRoster(e,"add",this)},S.prototype.subscribed=function(e){l.default.operatRoster(e,"accept",this)},S.prototype.unsubscribed=function(e){l.default.operatRoster(e,"decline",this)},S.prototype.addContact=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n={to:e,message:t};l.default.operatRoster(n,"add",this)},S.prototype.deleteContact=function(e){var t={to:e};l.default.operatRoster(t,"remove",this)},S.prototype.acceptInvitation=function(e){var t={to:e};l.default.operatRoster(t,"accept",this)},S.prototype.declineInvitation=function(e){var t={to:e};l.default.operatRoster(t,"decline",this)},S.prototype.isOpened=function(){return this.sock&&this.sock.readyState===_},S.prototype.clear=function(){var e=this.context.appKey;if(this.errorType!=y.WEBIM_CONNCTION_DISCONNECTED&&this.logOut&&(this.unSendMsgArr=[],this.offLineSendConnecting=!1,this.context={status:y.STATUS_INIT,appKey:e}),this.intervalId&&clearInterval(this.intervalId),this.restIndex=0,this.hostIndex=0,this.errorType==y.WEBIM_CONNCTION_CLIENT_LOGOUT||-1==this.errorType){var t={type:y.WEBIM_CONNCTION_CLIENT_LOGOUT,message:"when login or sinup error",data:{data:"logout"}};this.onError(t)}},S.prototype.autoReconnectInterval=0,S.prototype.times=1,S.prototype.reconnect=function(e){v.debug("reconnect: time",this.hostIndex);var t=this;t.hostIndex<t.socketHost.length-1&&t.hostIndex++,setTimeout((function(){t._login({access_token:t.context.accessToken},t),t.autoReconnectInterval+=t.times*t.times,t.times++}),1e3*(0==this.autoReconnectNumTotal?0:t.autoReconnectInterval)),this.autoReconnectNumTotal++},S.prototype.closed=function(){var e={data:{data:"Closed error"},type:y.WEBIM_CONNECTION_CLOSED,message:"closed error"};this.onError(e),this.stopHeartBeat()},S.prototype.addToBlackList=function(e){l.default.operatRoster({to:e.name},"ban",this)},S.prototype.removeFromBlackList=function(e){l.default.operatRoster({to:e.name},"allow",this)},Object.assign(S.prototype,m.default),g.connection=S,g.doQuery=function(e,t,n){void 0!==window.cefQuery&&window.cefQuery({request:e,persistent:!1,onSuccess:t,onFailure:n})},g.debug=function(e){};var C=g;t.default=C},function(e,t,n){"use strict";function r(e){this.array=void 0===e?[]:new Array(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r.prototype={length:function(){return this.array.length},at:function(e){return this.array[e]},set:function(e,t){this.array[e]=t},push:function(e){return this.array.push(e)},slice:function(e,t){return this.array=this.array.slice(e,t)},concat:function(e){this.array=this.array.concat(e)},remove:function(e,t){t=void 0===t?1:t,this.array.splice(e,t)},join:function(e){return this.array.join(e)},clear:function(){this.array.length=0}};var i=function(){this._array_h=new r};i.prototype={_index:0,push:function(e){this._array_h.push(e)},pop:function(){var e=null;return this._array_h.length()&&(e=this._array_h.at(this._index),2*++this._index>=this._array_h.length()&&(this._array_h.slice(this._index),this._index=0)),e},head:function(){var e=null,t=this._array_h.length();return t&&(e=this._array_h.at(t-1)),e},tail:function(){var e=null;return this._array_h.length()&&(e=this._array_h.at(this._index)),e},length:function(){return this._array_h.length()-this._index},empty:function(){return 0===this._array_h.length()},clear:function(){this._array_h.clear()}};var o=i;t.default=o},function(e,t,n){"use strict";e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.traceForIE=function(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()},t.isIE=void 0;var r="undefined"!=typeof window&&void 0!==window.navigator&&/Trident\/|MSIE /.test(window.navigator.userAgent);t.isIE=r},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o,s,a,c=r(n(5));Object.keys||(Object.keys=(i=Object.prototype.hasOwnProperty,o=!{toString:null}.propertyIsEnumerable("toString"),a=(s=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]).length,function(e){if("object"!==(0,c.default)(e)&&("function"!=typeof e||null===e))throw new TypeError("Object.keys called on non-object");var t,n,r=[];for(t in e)i.call(e,t)&&r.push(t);if(o)for(n=0;n<a;n++)i.call(e,s[n])&&r.push(s[n]);return r}));var u={emptyfn:function(){},stringify:function(e){if("undefined"!=typeof JSON&&JSON.stringify)return JSON.stringify(e);var t="",n=[];return function e(r){var i=!1;for(var o in"[object Array]"===Object.prototype.toString.call(r)?(n.push("]","["),i=!0):"[object Object]"===Object.prototype.toString.call(r)&&n.push("}","{"),r)"[object Null]"===Object.prototype.toString.call(r[o])?r[o]="null":"[object Undefined]"===Object.prototype.toString.call(r[o])&&(r[o]="undefined"),r[o]&&"object"===(0,c.default)(r[o])?t+=","+(i?"":'"'+o+'":'+(i?'"':""))+e(r[o]):t+=',"'+(i?"":o+'":"')+r[o]+'"';return""!=t&&(t=t.slice(1)),n.pop()+t+n.pop()}(e)},getFileSize:function(e){var t=this.getFileLength(e);if(t>1e7)return!1;var n=Math.round(t/1e3);if(n<1e3)t=n+" KB";else if(n>=1e3){var r=n/1e3;t=r<1e3?r.toFixed(1)+" MB":(r/1e3).toFixed(1)+" GB"}return t},trim:function(e){return(e="string"==typeof e?e:"").trim?e.trim():e.replace(/^\s|\s$/g,"")},parseTextMessage:function(e,t){if("string"==typeof e){if("[object Object]"!==Object.prototype.toString.call(t))return{isemoji:!1,body:[{type:"txt",data:e}]};var n=e,r=[],i=n.match(/\[[^[\]]{2,3}\]/gm);if(!i||i.length<1)return{isemoji:!1,body:[{type:"txt",data:e}]};for(var o=!1,s=0;s<i.length;s++){var a=n.substring(0,n.indexOf(i[s])),c=WebIM.Emoji.map[i[s]];if(a&&r.push({type:"txt",data:a}),c){var u=WebIM.Emoji.map?WebIM.Emoji.path+c:null;u?(o=!0,r.push({type:"emoji",data:u})):r.push({type:"txt",data:i[s]});var f=n.indexOf(i[s])+i[s].length;n=n.substring(f)}else r.push({type:"txt",data:i[s]})}return n&&r.push({type:"txt",data:n}),o?{isemoji:o,body:r}:{isemoji:!1,body:[{type:"txt",data:e}]}}},ts:function(){var e=new Date,t=e.getHours(),n=e.getMinutes(),r=e.getSeconds();return(t<10?"0"+t:t)+":"+(n<10?"0"+n:n)+":"+(r<10?"0"+r:r)+":"+e.getMilliseconds()+" "},getObjectKey:function(e,t){for(var n in e)if(e[n]==t)return n;return""},sprintf:function(){var e,t,n=arguments,r=n[0]||"";for(e=1,t=n.length;e<t;e++)r=r.replace(/%s/,n[e]);return r},reverse:function(e){var t=[];if(Array.prototype.reverse)t=e.reverse();else for(var n=0;n<e.length;n++)t.unshift(e[n]);return t},checkArray:function(e,t){var n="off";if(e.forEach((function(e,r){if(e.name===t.name)return n="on",r})),"off"==n)return!1}},f=u;t.default=f},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(8)),o=function(e,t,n){var r=n.context.root.lookup("easemob.pb.MUCBody").decode(e.payload);new i.default(e.id.low,e.id.high,e.id.unsigned).toString(),function(e){var t={type:"",owner:r.from.name,gid:r.mucId.name,from:r.from.name,fromJid:r.from,to:r.to.length?r.to[0].name:"",toJid:r.to,chatroom:r.isChatroom,status:r.status};({32:function(){t.type=r.isChatroom?"rmChatRoomMute":"rmGroupMute",n.onPresence(t)},31:function(){t.type=r.isChatroom?"muteChatRoom":"muteGroup",n.onPresence(t)},30:function(){t.type=r.isChatroom?"rmUserFromChatRoomWhiteList":"rmUserFromGroupWhiteList",n.onPresence(t)},29:function(){t.type=r.isChatroom?"addUserToChatRoomWhiteList":"addUserToGroupWhiteList",n.onPresence(t)},28:function(){t.type="deleteFile",n.onPresence(t)},27:function(){t.type="uploadFile",n.onPresence(t)},26:function(){t.type="deleteAnnouncement",n.onPresence(t)},25:function(){t.type="updateAnnouncement",n.onPresence(t)},24:function(){t.type="removeMute",n.onPresence(t)},23:function(){t.type="addMute",n.onPresence(t)},22:function(){t.type="removeAdmin",n.onPresence(t)},21:function(){t.type="addAdmin",n.onPresence(t)},20:function(){t.type="changeOwner",n.onPresence(t)},19:function(){t.type="direct_joined",n.onPresence(t)},18:function(){t.type=r.isChatroom?"leaveChatRoom":"leaveGroup",n.onPresence(t)},17:function(){t.type=r.isChatroom?"memberJoinChatRoomSuccess":"memberJoinPublicGroupSuccess",n.onPresence(t)},16:function(){t.type="unblock",n.onPresence(t)},15:function(){t.type="block",n.onPresence(t)},14:function(){t.type="update",n.onPresence(t)},13:function(){t.type="allow",t.reason=r.reason,n.onPresence(t)},12:function(){t.type="ban",n.onPresence(t)},11:function(){t.type="getBlackList",n.onPresence(t)},10:function(){t.type="removedFromGroup",t.kicked=t.to,n.onPresence(t)},9:function(){t.type="invite_decline",t.kicked=t.to,n.onPresence(t)},8:function(){t.type="invite_accept",t.kicked=t.to,n.onPresence(t)},7:function(){t.type="invite",t.kicked=t.to,n.onPresence(t)},6:function(){t.type="joinPublicGroupDeclined",n.onPresence(t)},5:function(){t.type="joinPublicGroupSuccess",n.onPresence(t)},4:function(){t.type="joinGroupNotifications",t.reason=r.reason,n.onPresence(t)},3:function(){t.type="leave",n.onPresence(t)},2:function(){t.type="join",n.onPresence(t)},1:function(){t.type="deleteGroupChat",n.onPresence(t)}}[e]||function(){console.log("%c没有匹配".concat(e,"类型"),"background: green")})()}(r.operation)};t.default=o},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(8)),o={handleMessage:function(e,t,n){var r=n.context.root.lookup("easemob.pb.RosterBody").decode(e.payload),o=(new i.default(e.id.low,e.id.high,e.id.unsigned).toString(),{to:r.to[0].name,from:r.from.name,status:r.reason});switch(r.operation){case 0:break;case 2:o.type="subscribe",n.onContactInvited(o),console.warn("in onPresence function, case subscribe is no longer maintained from version 3.3.0.\n                Please use onContactInvited instead. \n                refer to the documentation for details: \n                http://docs-im.easemob.com/im/web/basics/buddy");break;case 3:o.type="unsubscribed",n.onContactDeleted(o),console.warn("in onPresence function, case unsubscribed is no longer maintained from version 3.3.0.\n                Please use onContactDeleted instead. \n                refer to the documentation for details: \n                http://docs-im.easemob.com/im/web/basics/buddy");break;case 4:o.type="subscribed",n.onContactAdded(o),console.warn("in onPresence function, case subscribed is no longer maintained from version 3.3.0.\n                Please use onContactAdded instead. \n                refer to the documentation for details: \n                http://docs-im.easemob.com/im/web/basics/buddy");break;case 5:o.type="unsubscribed",n.onContactRefuse(o),console.warn("in onPresence function, case unsubscribed is no longer maintained from version 3.3.0.\n                Please use onContactRefuse instead. \n                refer to the documentation for details: \n                http://docs-im.easemob.com/im/web/basics/buddy");break;case 6:case 7:n.getBlacklist();break;case 8:o.type="subscribed",n.onContactAgreed(o),console.warn("in onPresence function, case subscribed is no longer maintained from version 3.3.0.\n                Please use onContactAgreed instead. \n                refer to the documentation for details: \n                http://docs-im.easemob.com/im/web/basics/buddy");break;case 9:o.type="unsubscribed",n.onContactRefuse(o),console.warn("in onPresence function, case unsubscribed is no longer maintained from version 3.3.0.\n                Please use onContactRefuse instead. \n                refer to the documentation for details: \n                http://docs-im.easemob.com/im/web/basics/buddy")}n.onPresence(o)},operatRoster:function(e,t,n){var r=[],i=n.context.root.lookup("easemob.pb.RosterBody"),o=i.decode(r);"add"===t?o.operation=2:"remove"===t?o.operation=3:"accept"===t?o.operation=4:"decline"===t?o.operation=5:"ban"===t?o.operation=6:"allow"===t&&(o.operation=7),o.from=n.context.jid;var s=[];if("string"==typeof e.to)s.push({appKey:n.appKey||n.context.appKey,name:e.to,domain:"easemob.com"});else if(e.to instanceof Array)for(var a=0;a<e.to.length;a++)s.push({appKey:n.appKey,name:e.to[a],domain:"easemob.com"});o.to=s,o.reason=e.message,o=i.encode(o).finish();var c=n.context.root.lookup("easemob.pb.Meta").decode(r);c.id=e.id||n.getUniqueId(),c.from=n.context.jid,c.to={domain:"@easemob.com"},c.ns=3,c.payload=o;var u=n.context.root.lookup("easemob.pb.CommSyncUL"),f=u.decode(r);f.meta=c,f=u.encode(f).finish();var d=n.context.root.lookup("easemob.pb.MSync"),l=d.decode(r);l.version=n.version,l.encryptType=[0],l.command=0,l.guid=n.jid,l.payload=f,l=d.encode(l).finish(),n.sendMSync(l)}};t.default=o},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(8)),o=(0,r(n(7)).default)(),s=function(e,t,n){var r=n.context.root.lookup("easemob.pb.StatisticsBody").decode(e.payload);switch(new i.default(e.id.low,e.id.high,e.id.unsigned).toString(),r.operation){case 0:n.onStatisticMessage(r);break;case 1:var s={type:o.WEBIM_CONNCTION_USER_REMOVED,message:"user has been removed"};n.logOut=!0,n.onError(s);break;case 2:s={type:o.WEBIM_CONNCTION_USER_LOGIN_ANOTHER_DEVICE,message:"the user is already logged on another device"},n.logOut=!0,n.onError(s);break;case 3:s={type:o.WEBIM_CONNCTION_USER_KICKED_BY_CHANGE_PASSWORD,message:"the user was kicked by changing password"},n.logOut=!0,n.onError(s);break;case 4:s={type:o.WEBIM_CONNCTION_USER_KICKED_BY_OTHER_DEVICE,message:"the user was kicked by other device"},n.logOut=!0,n.onError(s)}};t.default=s},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o=r(n(63)),s=r(n(31)),a=r(n(7)),c=r(n(36)),u=(0,a.default)(),f=(i={mr_cache:[],_fetchMessages:function(e,t){var n=e.accessToken||t.context.accessToken;if(t._utils.isCanSetRequestHeader)if(n){var r=t.apiUrl||this.apiUrl,i=t.context.appName,o=t.context.orgName;if(!i||!o)return void t.onError({type:u.WEBIM_CONNCTION_AUTH_ERROR,message:"appName or orgName is illegal"});if(!e.queue)return void t.onError({type:u.SDK_RUNTIME_ERROR,message:"queue is not specified"});var a=e.queue,f=this.mr_cache[a]||(this.mr_cache[a]={msgs:[]}),d=t.context.userId,l=-1;if(f.msgs.length>=e.count||f.is_last)return void("function"==typeof e.success&&e.success(f));f&&f.next_key&&(l=f.next_key);var p={queue:a+(e.isGroup?"@conference.easemob.com":"@easemob.com"),start:l,end:-1},h={url:r+"/"+o+"/"+i+"/users/"+d+"/messageroaming",dataType:"json",type:"POST",headers:{Authorization:"Bearer "+n},data:JSON.stringify(p),success:function(n,r){if(n&&n.data){var i=n.data;if(!n.data.msgs)return"function"==typeof e.success&&e.success(f),f.is_last=!0,void(f.next_key="");var o=i.msgs,a=o.length;f.is_last=i.is_last,f.next_key=i.next_key;var u=function(e){for(var n=[],r=0,i=(e=c.default.atob(e)).length;r<i;++r)n.push(e.charCodeAt(r));var o=t.context.root.lookup("easemob.pb.Meta");if(1==(o=o.decode(n)).ns)return(0,s.default)(o,{errorCode:0,reason:""},t,!0)};try{for(var d=0;d<a;d++){var l=u(o[d].msg);l&&f.msgs.push(l)}}catch(e){console.log(e)}finally{"function"==typeof e.success&&e.success(f)}}}||t._utils.emptyfn,error:function(e,n){e.error&&e.error_description&&t.onError({type:u.WEBIM_CONNCTION_LOAD_CHATROOM_ERROR,message:"fetch history messages error",msg:e.error_description,data:e})}||t._utils.emptyfn};t._utils.ajax(h)}else t.onError({type:u.WEBIM_CONNCTION_TOKEN_NOT_ASSIGN_ERROR,message:"token not assign error"});else t.onError({type:u.WEBIM_CONNCTION_NOT_SUPPORT_CHATROOM_ERROR,message:"current environment can not set request header"})},fetchHistoryMessages:function(e){var t=this;return new Promise((function(n,r){if(e.queue){var i=e.count||20;!function o(){t._fetchMessages({count:i,isGroup:!!e.isGroup,queue:e.queue,success:function(r){if(r.msgs.length>=i||r.is_last){var s=t._utils.reverse(r.msgs.splice(0,i));e.success&&e.success(s),n(s)}else o()},fail:function(t){r(t),e.fail&&e.fail(t)}},t)}()}else t.onError({type:u.SDK_RUNTIME_ERROR,message:"queue is not specified"})}))},getChatRooms:function(e){var t=this,n=e.accessToken||this.context.accessToken;if(t._utils.isCanSetRequestHeader){if(n){var r=e.apiUrl||this.apiUrl,i=this.context.appName,o=this.context.orgName;if(!i||!o)return void t.onError({type:u.WEBIM_CONNCTION_AUTH_ERROR,message:"appName or orgName is illegal"});var s={url:r+"/"+o+"/"+i+"/chatrooms",dataType:"json",type:"GET",headers:{Authorization:"Bearer "+n},data:{pagenum:parseInt(e.pagenum)||1,pagesize:parseInt(e.pagesize)||20},success:function(t,n){"function"==typeof e.success&&e.success(t)}||t._utils.emptyfn,error:function(e,n,r){e.error&&e.error_description&&t.onError({type:u.WEBIM_CONNCTION_LOAD_CHATROOM_ERROR,message:e.error_description,data:e,xhr:n})}||t._utils.emptyfn};return t._utils.ajax(s)}t.onError({type:u.WEBIM_CONNCTION_TOKEN_NOT_ASSIGN_ERROR,message:"token not assign error"})}else t.onError({type:u.WEBIM_CONNCTION_NOT_SUPPORT_CHATROOM_ERROR,message:"current environment can not set request header"})},createChatRoom:function(e){if(e=e||{},this._utils.isCanSetRequestHeader){var t=this,n=e.accessToken||this.token,r=t.user;if(n){var i=e.apiUrl||this.apiUrl,o=this.context.appName,s=this.context.orgName;if(!o||!s)return void t.onError({type:u.WEBIM_CONNCTION_AUTH_ERROR,message:"appName or orgName is illegal"});var a={name:e.name,description:e.description,maxusers:e.maxusers,owner:r,members:e.members},c={url:i+"/"+s+"/"+o+"/chatrooms",dataType:"json",type:"POST",data:JSON.stringify(a),headers:{Authorization:"Bearer "+n,"Content-Type":"application/json"},success:function(t,n){"function"==typeof e.success&&e.success(t)}||t._utils.emptyfn,error:function(t,n,r){"function"==typeof e.error&&e.error(t)}||t._utils.emptyfn};return t._utils.ajax(c)}t.onError({type:u.WEBIM_CONNCTION_TOKEN_NOT_ASSIGN_ERROR,message:"token not assign error"})}else t.onError({type:u.WEBIM_CONNCTION_NOT_SUPPORT_CHATROOM_ERROR,message:"current environment can not set request header"})},destroyChatRoom:function(e){if(e=e||{},this._utils.isCanSetRequestHeader){var t=this,n=e.accessToken||this.token;if(n){var r=e.apiUrl||this.apiUrl,i=this.context.appName,o=this.context.orgName,s=e.chatRoomId;if(!i||!o)return void t.onError({type:u.WEBIM_CONNCTION_AUTH_ERROR,message:"appName or orgName is illegal"});var a={url:r+"/"+o+"/"+i+"/chatrooms/"+s,dataType:"json",type:"DELETE",headers:{Authorization:"Bearer "+n},success:function(t,n){"function"==typeof e.success&&e.success(t)}||t._utils.emptyfn,error:function(t,n,r){"function"==typeof e.error&&e.error(t)}||t._utils.emptyfn};return t._utils.ajax(a)}t.onError({type:u.WEBIM_CONNCTION_TOKEN_NOT_ASSIGN_ERROR,message:"token not assign error"})}else t.onError({type:u.WEBIM_CONNCTION_NOT_SUPPORT_CHATROOM_ERROR,message:"current environment can not set request header"})},getChatRoomDetails:function(e){var t=e.chatRoomId,n=this.context.appName,r=this.context.orgName;if(n&&r){var i={url:(e.apiUrl||this.apiUrl)+"/"+r+"/"+n+"/chatrooms/"+t,dataType:"json",type:"GET",headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}};return i.success=e.success||this._utils.emptyfn,i.error=e.error||this._utils.emptyfn,this._utils.ajax(i)}conn.onError({type:u.WEBIM_CONNCTION_AUTH_ERROR,message:"appName or orgName is illegal"})},modifyChatRoom:function(e){var t=e.chatRoomId,n={groupname:e.chatRoomName,description:e.description,maxusers:e.maxusers},r={url:this.apiUrl+"/"+this.orgName+"/"+this.appName+"/chatrooms/"+t,type:"PUT",data:JSON.stringify(n),dataType:"json",headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}};return r.success=e.success||this._utils.emptyfn,r.error=e.error||this._utils.emptyfn,this._utils.ajax(r)},removeSingleChatRoomMember:function(e){var t=e.chatRoomId,n=e.username,r={url:this.apiUrl+"/"+this.orgName+"/"+this.appName+"/chatrooms/"+t+"/users/"+n,type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}};return r.success=e.success||this._utils.emptyfn,r.error=e.error||this._utils.emptyfn,this._utils.ajax(r)},removeMultiChatRoomMember:function(e){var t=e.chatRoomId,n=e.users.join(","),r={url:this.apiUrl+"/"+this.orgName+"/"+this.appName+"/chatrooms/"+t+"/users/"+n,type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}};return r.success=e.success||this._utils.emptyfn,r.error=e.error||this._utils.emptyfn,this._utils.ajax(r)},addUsersToChatRoom:function(e){var t=e.chatRoomId,n={usernames:e.users},r={url:this.apiUrl+"/"+this.orgName+"/"+this.appName+"/chatrooms/"+t+"/users",type:"POST",data:JSON.stringify(n),dataType:"json",headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}};return r.success=e.success||this._utils.emptyfn,r.error=e.error||this._utils.emptyfn,this._utils.ajax(r)},joinChatRoom:function(e){if(e=e||{},this._utils.isCanSetRequestHeader){var t=this,n=e.accessToken||this.token;if(n){var r=e.apiUrl||this.apiUrl,i=this.context.appName,o=this.context.orgName,s=e.roomId,a=e.message||"";if(!i||!o)return void t.onError({type:u.WEBIM_CONNCTION_AUTH_ERROR,message:"appName or orgName is illegal"});var c={url:r+"/"+o+"/"+i+"/chatrooms/"+s+"/apply",dataType:"json",type:"POST",data:JSON.stringify({message:a}),headers:{Authorization:"Bearer "+n,"Content-Type":"application/json"},success:function(t,n){"function"==typeof e.success&&e.success(t)}||t._utils.emptyfn,error:function(t,n,r){"function"==typeof e.error&&e.error(t)}||t._utils.emptyfn};return t._utils.ajax(c)}t.onError({type:u.WEBIM_CONNCTION_TOKEN_NOT_ASSIGN_ERROR,message:"token not assign error"})}else t.onError({type:u.WEBIM_CONNCTION_NOT_SUPPORT_CHATROOM_ERROR,message:"current environment can not set request header"})},quitChatRoom:function(e){if(e=e||{},this._utils.isCanSetRequestHeader){var t=this,n=e.accessToken||this.token;if(n){var r=e.apiUrl||this.apiUrl,i=this.context.appName,o=this.context.orgName,s=e.roomId;if(!i||!o)return void t.onError({type:u.WEBIM_CONNCTION_AUTH_ERROR,message:"appName or orgName is illegal"});var a={url:r+"/"+o+"/"+i+"/chatrooms/"+s+"/quit",dataType:"json",type:"DELETE",headers:{Authorization:"Bearer "+n},success:function(t,n){"function"==typeof e.success&&e.success(t)}||t._utils.emptyfn,error:function(t,n,r){"function"==typeof e.error&&e.error(t)}||t._utils.emptyfn};return t._utils.ajax(a)}t.onError({type:u.WEBIM_CONNCTION_TOKEN_NOT_ASSIGN_ERROR,message:"token not assign error"})}else t.onError({type:u.WEBIM_CONNCTION_NOT_SUPPORT_CHATROOM_ERROR,message:"current environment can not set request header"})},createGroupNew:function(e){if(e&&e.data){e.data.owner=this.user,e.data.hasOwnProperty("inviteNeedConfirm")&&(e.data.invite_need_confirm=e.data.inviteNeedConfirm,delete e.data.inviteNeedConfirm);var t={url:this.apiUrl+"/"+this.orgName+"/"+this.appName+"/chatgroups",dataType:"json",type:"POST",data:JSON.stringify(e.data),headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}};return t.success=function(t){e.success(t),this.onCreateGroup(t)}.bind(this),t.error=e.error||this._utils.emptyfn,this._utils.ajax(t)}},blockGroup:function(e){var t=e.groupId;t="notification_ignore_"+t;var n={entities:[]};n.entities[0]={},n.entities[0][t]=!0;var r={type:"PUT",url:this.apiUrl+"/"+this.orgName+"/"+this.appName+"/users/"+this.user,data:JSON.stringify(n),headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}};return r.success=e.success||this._utils.emptyfn,r.error=e.error||this._utils.emptyfn,this._utils.ajax(r)},listGroups:function(e){var t=[];if(t.limit=e.limit,t.cursor=e.cursor,t.cursor||delete t.cursor,isNaN(e.limit))throw'The parameter "limit" should be a number';var n={url:this.apiUrl+"/"+this.orgName+"/"+this.appName+"/publicchatgroups",type:"GET",dataType:"json",data:t,headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}};return n.success=e.success||this._utils.emptyfn,n.error=e.error||this._utils.emptyfn,this._utils.ajax(n)},getGroup:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={url:this.apiUrl+"/"+this.orgName+"/"+this.appName+"/users/"+this.user+"/joined_chatgroups",dataType:"json",type:"GET",headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}};return t.success=e.success||this._utils.emptyfn,t.error=e.error||this._utils.emptyfn,this._utils.ajax(t)},changeOwner:function(e){var t={newowner:e.newOwner},n={url:this.apiUrl+"/"+this.orgName+"/"+this.appName+"/chatgroups/"+e.groupId,type:"PUT",dataType:"json",headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"},data:JSON.stringify(t)};return n.success=e.success||this._utils.emptyfn,n.error=e.error||this._utils.emptyfn,this._utils.ajax(n)},getGroupInfo:function(e){var t={url:this.apiUrl+"/"+this.orgName+"/"+this.appName+"/chatgroups/"+e.groupId+"?joined_time=true",type:"GET",dataType:"json",headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}};return t.success=e.success||this._utils.emptyfn,t.error=e.error||this._utils.emptyfn,this._utils.ajax(t)},modifyGroup:function(e){var t=e.groupId,n={groupname:e.groupName,description:e.description},r={url:this.apiUrl+"/"+this.orgName+"/"+this.appName+"/chatgroups/"+t,type:"PUT",data:JSON.stringify(n),dataType:"json",headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}};return r.success=e.success||this._utils.emptyfn,r.error=e.error||this._utils.emptyfn,this._utils.ajax(r)},listGroupMember:function(e){if(isNaN(e.pageNum)||e.pageNum<=0)throw'The parameter "pageNum" should be a positive number';if(isNaN(e.pageSize)||e.pageSize<=0)throw'The parameter "pageSize" should be a positive number';if(null===e.groupId&&void 0===e.groupId)throw'The parameter "groupId" should be added';var t=[],n=e.groupId;t.pagenum=e.pageNum,t.pagesize=e.pageSize;var r={url:this.apiUrl+"/"+this.orgName+"/"+this.appName+"/chatgroups/"+n+"/users",dataType:"json",type:"GET",data:t,headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}};return r.success=e.success||this._utils.emptyfn,r.error=e.error||this._utils.emptyfn,this._utils.ajax(r)}},(0,o.default)(i,"listGroupMember",(function(e){if(isNaN(e.pageNum)||e.pageNum<=0)throw'The parameter "pageNum" should be a positive number';if(isNaN(e.pageSize)||e.pageSize<=0)throw'The parameter "pageSize" should be a positive number';if(null===e.groupId&&void 0===e.groupId)throw'The parameter "groupId" should be added';var t=[],n=e.groupId;t.pagenum=e.pageNum,t.pagesize=e.pageSize;var r={url:this.apiUrl+"/"+this.orgName+"/"+this.appName+"/chatgroups/"+n+"/users",dataType:"json",type:"GET",data:t,headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}};return r.success=e.success||this._utils.emptyfn,r.error=e.error||this._utils.emptyfn,this._utils.ajax(r)})),(0,o.default)(i,"listChatRoomMember",(function(e){if(isNaN(e.pageNum)||e.pageNum<=0)throw'The parameter "pageNum" should be a positive number';if(isNaN(e.pageSize)||e.pageSize<=0)throw'The parameter "pageSize" should be a positive number';if(null===e.chatRoomId&&void 0===e.chatRoomId)throw'The parameter "chatRoomId" should be added';var t=[],n=e.chatRoomId;t.pagenum=e.pageNum,t.pagesize=e.pageSize;var r={url:this.apiUrl+"/"+this.orgName+"/"+this.appName+"/chatrooms/"+n+"/users",dataType:"json",type:"GET",data:t,headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}};return r.success=e.success||this._utils.emptyfn,r.error=e.error||this._utils.emptyfn,this._utils.ajax(r)})),(0,o.default)(i,"getGroupAdmin",(function(e){var t=e.groupId,n={url:this.apiUrl+"/"+this.orgName+"/"+this.appName+"/chatgroups/"+t+"/admin",dataType:"json",type:"GET",headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}};return n.success=e.success||this._utils.emptyfn,n.error=e.error||this._utils.emptyfn,this._utils.ajax(n)})),(0,o.default)(i,"getChatRoomAdmin",(function(e){var t=e.chatRoomId,n={url:this.apiUrl+"/"+this.orgName+"/"+this.appName+"/chatrooms/"+t+"/admin",dataType:"json",type:"GET",headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}};return n.success=e.success||this._utils.emptyfn,n.error=e.error||this._utils.emptyfn,this._utils.ajax(n)})),(0,o.default)(i,"setAdmin",(function(e){var t=e.groupId,n={newadmin:e.username},r={url:this.apiUrl+"/"+this.orgName+"/"+this.appName+"/chatgroups/"+t+"/admin",type:"POST",dataType:"json",data:JSON.stringify(n),headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}};return r.success=e.success||this._utils.emptyfn,r.error=e.error||this._utils.emptyfn,this._utils.ajax(r)})),(0,o.default)(i,"setChatRoomAdmin",(function(e){var t=e.chatRoomId,n={newadmin:e.username},r={url:this.apiUrl+"/"+this.orgName+"/"+this.appName+"/chatrooms/"+t+"/admin",type:"POST",dataType:"json",data:JSON.stringify(n),headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}};return r.success=e.success||this._utils.emptyfn,r.error=e.error||this._utils.emptyfn,this._utils.ajax(r)})),(0,o.default)(i,"removeAdmin",(function(e){var t=e.groupId,n=e.username,r={url:this.apiUrl+"/"+this.orgName+"/"+this.appName+"/chatgroups/"+t+"/admin/"+n,type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}};return r.success=e.success||this._utils.emptyfn,r.error=e.error||this._utils.emptyfn,this._utils.ajax(r)})),(0,o.default)(i,"removeChatRoomAdmin",(function(e){var t=e.chatRoomId,n=e.username,r={url:this.apiUrl+"/"+this.orgName+"/"+this.appName+"/chatrooms/"+t+"/admin/"+n,type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}};return r.success=e.success||this._utils.emptyfn,r.error=e.error||this._utils.emptyfn,this._utils.ajax(r)})),(0,o.default)(i,"dissolveGroup",(function(e){var t=e.groupId,n={url:this.apiUrl+"/"+this.orgName+"/"+this.appName+"/chatgroups/"+t+"?version=v3",type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}};return n.success=e.success||this._utils.emptyfn,n.error=e.error||this._utils.emptyfn,this._utils.ajax(n)})),(0,o.default)(i,"quitGroup",(function(e){var t=e.groupId,n={url:this.apiUrl+"/"+this.orgName+"/"+this.appName+"/chatgroups/"+t+"/quit",type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}};return n.success=e.success||this._utils.emptyfn,n.error=e.error||this._utils.emptyfn,this._utils.ajax(n)})),(0,o.default)(i,"inviteToGroup",(function(e){var t=e.groupId,n={usernames:e.users},r={url:this.apiUrl+"/"+this.orgName+"/"+this.appName+"/chatgroups/"+t+"/invite",type:"POST",data:JSON.stringify(n),dataType:"json",headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}};return r.success=e.success||this._utils.emptyfn,r.error=e.error||this._utils.emptyfn,this._utils.ajax(r)})),(0,o.default)(i,"joinGroup",(function(e){var t={url:this.apiUrl+"/"+this.orgName+"/"+this.appName+"/chatgroups/"+e.groupId+"/apply",type:"POST",dataType:"json",data:JSON.stringify({message:"join group"}),headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}};return t.success=e.success||this._utils.emptyfn,t.error=e.error||this._utils.emptyfn,this._utils.ajax(t)})),(0,o.default)(i,"agreeJoinGroup",(function(e){var t=e.groupId,n={applicant:e.applicant,verifyResult:!0,reason:"no clue"},r={url:this.apiUrl+"/"+this.orgName+"/"+this.appName+"/chatgroups/"+t+"/apply_verify",type:"POST",dataType:"json",data:JSON.stringify(n),headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}};return r.success=e.success||this._utils.emptyfn,r.error=e.error||this._utils.emptyfn,this._utils.ajax(r)})),(0,o.default)(i,"rejectJoinGroup",(function(e){var t=e.groupId,n={applicant:e.applicant,verifyResult:!1,reason:"no clue"},r={url:this.apiUrl+"/"+this.orgName+"/"+this.appName+"/chatgroups/"+t+"/apply_verify",type:"POST",dataType:"json",data:JSON.stringify(n),headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}};return r.success=e.success||this._utils.emptyfn,r.error=e.error||this._utils.emptyfn,this._utils.ajax(r)})),(0,o.default)(i,"agreeInviteIntoGroup",(function(e){var t=e.groupId,n={invitee:e.invitee,verifyResult:!0},r={url:this.apiUrl+"/"+this.orgName+"/"+this.appName+"/chatgroups/"+t+"/invite_verify",type:"POST",dataType:"json",data:JSON.stringify(n),headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}};return r.success=e.success||this._utils.emptyfn,r.error=e.error||this._utils.emptyfn,this._utils.ajax(r)})),(0,o.default)(i,"rejectInviteIntoGroup",(function(e){var t=e.groupId,n={invitee:e.invitee,verifyResult:!1},r={url:this.apiUrl+"/"+this.orgName+"/"+this.appName+"/chatgroups/"+t+"/invite_verify",type:"POST",dataType:"json",data:JSON.stringify(n),headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}};return r.success=e.success||this._utils.emptyfn,r.error=e.error||this._utils.emptyfn,this._utils.ajax(r)})),(0,o.default)(i,"removeSingleGroupMember",(function(e){var t=e.groupId,n=e.username,r={url:this.apiUrl+"/"+this.orgName+"/"+this.appName+"/chatgroups/"+t+"/users/"+n,type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}};return r.success=e.success||this._utils.emptyfn,r.error=e.error||this._utils.emptyfn,this._utils.ajax(r)})),(0,o.default)(i,"removeMultiGroupMember",(function(e){var t=e.groupId,n=e.users.join(","),r={url:this.apiUrl+"/"+this.orgName+"/"+this.appName+"/chatgroups/"+t+"/users/"+n,type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}};return r.success=e.success||this._utils.emptyfn,r.error=e.error||this._utils.emptyfn,this._utils.ajax(r)})),(0,o.default)(i,"mute",(function(e){var t=e.groupId,n={usernames:[e.username],mute_duration:e.muteDuration},r={url:this.apiUrl+"/"+this.orgName+"/"+this.appName+"/chatgroups/"+t+"/mute",dataType:"json",type:"POST",headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"},data:JSON.stringify(n)};return r.success=e.success||this._utils.emptyfn,r.error=e.error||this._utils.emptyfn,this._utils.ajax(r)})),(0,o.default)(i,"muteChatRoomMember",(function(e){var t=e.chatRoomId,n={usernames:[e.username],mute_duration:e.muteDuration},r={url:this.apiUrl+"/"+this.orgName+"/"+this.appName+"/chatrooms/"+t+"/mute",dataType:"json",type:"POST",headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"},data:JSON.stringify(n)};return r.success=e.success||this._utils.emptyfn,r.error=e.error||this._utils.emptyfn,this._utils.ajax(r)})),(0,o.default)(i,"removeMute",(function(e){var t=e.groupId,n=e.username,r={url:this.apiUrl+"/"+this.orgName+"/"+this.appName+"/chatgroups/"+t+"/mute/"+n,dataType:"json",type:"DELETE",headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}};return r.success=e.success||this._utils.emptyfn,r.error=e.error||this._utils.emptyfn,this._utils.ajax(r)})),(0,o.default)(i,"removeMuteChatRoomMember",(function(e){var t=e.chatRoomId,n=e.username,r={url:this.apiUrl+"/"+this.orgName+"/"+this.appName+"/chatrooms/"+t+"/mute/"+n,dataType:"json",type:"DELETE",headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}};return r.success=e.success||this._utils.emptyfn,r.error=e.error||this._utils.emptyfn,this._utils.ajax(r)})),(0,o.default)(i,"getMuted",(function(e){var t=e.groupId,n={url:this.apiUrl+"/"+this.orgName+"/"+this.appName+"/chatgroups/"+t+"/mute",dataType:"json",type:"GET",headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}};return n.success=e.success||this._utils.emptyfn,n.error=e.error||this._utils.emptyfn,this._utils.ajax(n)})),(0,o.default)(i,"getChatRoomMuted",(function(e){var t=e.chatRoomId,n={url:this.apiUrl+"/"+this.orgName+"/"+this.appName+"/chatrooms/"+t+"/mute",dataType:"json",type:"GET",headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}};return n.success=e.success||this._utils.emptyfn,n.error=e.error||this._utils.emptyfn,this._utils.ajax(n)})),(0,o.default)(i,"groupBlockSingle",(function(e){var t=e.groupId,n=e.username,r={url:this.apiUrl+"/"+this.orgName+"/"+this.appName+"/chatgroups/"+t+"/blocks/users/"+n,type:"POST",dataType:"json",headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}};return r.success=e.success||this._utils.emptyfn,r.error=e.error||this._utils.emptyfn,this._utils.ajax(r)})),(0,o.default)(i,"chatRoomBlockSingle",(function(e){var t=e.chatRoomId,n=e.username,r={url:this.apiUrl+"/"+this.orgName+"/"+this.appName+"/chatrooms/"+t+"/blocks/users/"+n,type:"POST",dataType:"json",headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}};return r.success=e.success||this._utils.emptyfn,r.error=e.error||this._utils.emptyfn,this._utils.ajax(r)})),(0,o.default)(i,"groupBlockMulti",(function(e){var t=e.groupId,n={usernames:e.usernames},r={url:this.apiUrl+"/"+this.orgName+"/"+this.appName+"/chatgroups/"+t+"/blocks/users",data:JSON.stringify(n),type:"POST",dataType:"json",headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}};return r.success=e.success||this._utils.emptyfn,r.error=e.error||this._utils.emptyfn,this._utils.ajax(r)})),(0,o.default)(i,"chatRoomBlockMulti",(function(e){var t=e.chatRoomId,n={usernames:e.usernames},r={url:this.apiUrl+"/"+this.orgName+"/"+this.appName+"/chatrooms/"+t+"/blocks/users",data:JSON.stringify(n),type:"POST",dataType:"json",headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}};return r.success=e.success||this._utils.emptyfn,r.error=e.error||this._utils.emptyfn,this._utils.ajax(r)})),(0,o.default)(i,"removeGroupBlockSingle",(function(e){var t=e.groupId,n=e.username,r={url:this.apiUrl+"/"+this.orgName+"/"+this.appName+"/chatgroups/"+t+"/blocks/users/"+n,type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}};return r.success=e.success||this._utils.emptyfn,r.error=e.error||this._utils.emptyfn,this._utils.ajax(r)})),(0,o.default)(i,"removeChatRoomBlockSingle",(function(e){var t=e.chatRoomId,n=e.username,r={url:this.apiUrl+"/"+this.orgName+"/"+this.appName+"/chatrooms/"+t+"/blocks/users/"+n,type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}};return r.success=e.success||this._utils.emptyfn,r.error=e.error||this._utils.emptyfn,this._utils.ajax(r)})),(0,o.default)(i,"removeGroupBlockMulti",(function(e){var t=e.groupId,n=e.usernames.join(","),r={url:this.apiUrl+"/"+this.orgName+"/"+this.appName+"/chatgroups/"+t+"/blocks/users/"+n,type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}};return r.success=e.success||this._utils.emptyfn,r.error=e.error||this._utils.emptyfn,this._utils.ajax(r)})),(0,o.default)(i,"removeChatRoomBlockMulti",(function(e){var t=e.chatRoomId,n=e.usernames.join(","),r={url:this.apiUrl+"/"+this.orgName+"/"+this.appName+"/chatrooms/"+t+"/blocks/users/"+n,type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}};return r.success=e.success||this._utils.emptyfn,r.error=e.error||this._utils.emptyfn,this._utils.ajax(r)})),(0,o.default)(i,"getGroupBlacklistNew",(function(e){var t=e.groupId,n={url:this.apiUrl+"/"+this.orgName+"/"+this.appName+"/chatgroups/"+t+"/blocks/users",type:"GET",dataType:"json",headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}};return n.success=e.success||this._utils.emptyfn,n.error=e.error||this._utils.emptyfn,this._utils.ajax(n)})),(0,o.default)(i,"getChatRoomBlacklistNew",(function(e){var t=e.chatRoomId,n={url:this.apiUrl+"/"+this.orgName+"/"+this.appName+"/chatrooms/"+t+"/blocks/users",type:"GET",dataType:"json",headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}};return n.success=e.success||this._utils.emptyfn,n.error=e.error||this._utils.emptyfn,this._utils.ajax(n)})),(0,o.default)(i,"disableSendGroupMsg",(function(e){var t=e.groupId,n={url:this.apiUrl+"/"+this.orgName+"/"+this.appName+"/chatgroups/"+t+"/ban",type:"POST",dataType:"json",headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}};return n.success=e.success||this._utils.emptyfn,n.error=e.error||this._utils.emptyfn,this._utils.ajax(n)})),(0,o.default)(i,"disableSendChatRoomMsg",(function(e){var t=e.chatRoomId,n={url:this.apiUrl+"/"+this.orgName+"/"+this.appName+"/chatrooms/"+t+"/ban",type:"POST",dataType:"json",headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}};return n.success=e.success||this._utils.emptyfn,n.error=e.error||this._utils.emptyfn,this._utils.ajax(n)})),(0,o.default)(i,"enableSendGroupMsg",(function(e){var t=e.groupId,n={url:this.apiUrl+"/"+this.orgName+"/"+this.appName+"/chatgroups/"+t+"/ban",type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}};return n.success=e.success||this._utils.emptyfn,n.error=e.error||this._utils.emptyfn,this._utils.ajax(n)})),(0,o.default)(i,"enableSendChatRoomMsg",(function(e){var t=e.chatRoomId,n={url:this.apiUrl+"/"+this.orgName+"/"+this.appName+"/chatrooms/"+t+"/ban",type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}};return n.success=e.success||this._utils.emptyfn,n.error=e.error||this._utils.emptyfn,this._utils.ajax(n)})),(0,o.default)(i,"addUsersToGroupWhitelist",(function(e){var t=e.groupId,n={usernames:e.users},r={url:this.apiUrl+"/"+this.orgName+"/"+this.appName+"/chatgroups/"+t+"/white/users",type:"POST",data:JSON.stringify(n),dataType:"json",headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}};return r.success=e.success||this._utils.emptyfn,r.error=e.error||this._utils.emptyfn,this._utils.ajax(r)})),(0,o.default)(i,"addUsersToChatRoomWhitelist",(function(e){var t=e.chatRoomId,n={usernames:e.users},r={url:this.apiUrl+"/"+this.orgName+"/"+this.appName+"/chatrooms/"+t+"/white/users",type:"POST",data:JSON.stringify(n),dataType:"json",headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}};return r.success=e.success||this._utils.emptyfn,r.error=e.error||this._utils.emptyfn,this._utils.ajax(r)})),(0,o.default)(i,"rmUsersFromGroupWhitelist",(function(e){var t=e.groupId,n={url:this.apiUrl+"/"+this.orgName+"/"+this.appName+"/chatgroups/"+t+"/white/users/"+e.userName,type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}};return n.success=e.success||this._utils.emptyfn,n.error=e.error||this._utils.emptyfn,this._utils.ajax(n)})),(0,o.default)(i,"rmUsersFromChatRoomWhitelist",(function(e){var t=e.chatRoomId,n={url:this.apiUrl+"/"+this.orgName+"/"+this.appName+"/chatrooms/"+t+"/white/users/"+e.userName,type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}};return n.success=e.success||this._utils.emptyfn,n.error=e.error||this._utils.emptyfn,this._utils.ajax(n)})),(0,o.default)(i,"getGroupWhitelist",(function(e){var t=e.groupId,n=(e.users,{url:this.apiUrl+"/"+this.orgName+"/"+this.appName+"/chatgroups/"+t+"/white/users",type:"GET",dataType:"json",headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}});return n.success=e.success||this._utils.emptyfn,n.error=e.error||this._utils.emptyfn,this._utils.ajax(n)})),(0,o.default)(i,"getChatRoomWhitelist",(function(e){var t=e.chatRoomId,n=(e.users,{url:this.apiUrl+"/"+this.orgName+"/"+this.appName+"/chatrooms/"+t+"/white/users",type:"GET",dataType:"json",headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}});return n.success=e.success||this._utils.emptyfn,n.error=e.error||this._utils.emptyfn,this._utils.ajax(n)})),(0,o.default)(i,"isGroupWhiteUser",(function(e){var t=e.groupId,n=(e.users,{url:this.apiUrl+"/"+this.orgName+"/"+this.appName+"/chatgroups/"+t+"/white/users/"+e.userName,type:"GET",dataType:"json",headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}});return n.success=e.success||this._utils.emptyfn,n.error=e.error||this._utils.emptyfn,this._utils.ajax(n)})),(0,o.default)(i,"isChatRoomWhiteUser",(function(e){var t=e.chatRoomId,n=(e.users,{url:this.apiUrl+"/"+this.orgName+"/"+this.appName+"/chatrooms/"+t+"/white/users/"+e.userName,type:"GET",dataType:"json",headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}});return n.success=e.success||this._utils.emptyfn,n.error=e.error||this._utils.emptyfn,this._utils.ajax(n)})),(0,o.default)(i,"getGroupMsgReadUser",(function(e){var t=this;if(e=e||{},this._utils.isCanSetRequestHeader){var n=e.accessToken||this.token;if(n){var r=t.apiUrl,i=t.context.appName,o=t.context.orgName;if(!i||!o)return void t.onError({type:u.WEBIM_CONNCTION_AUTH_ERROR,message:"appName or orgName is illegal"});var s={url:r+"/"+o+"/"+i+"/chatgroups/"+e.groupId+"/acks/"+e.msgId,dataType:"json",type:"GET",data:{limit:500,key:void 0},headers:{Authorization:"Bearer "+n},success:function(t){"function"==typeof e.success&&e.success(t)}||this._utils.emptyfn,error:function(t){"function"==typeof e.error&&e.error(t)}||this._utils.emptyfn};return this._utils.ajax(s)}t.onError({type:u.WEBIM_CONNCTION_TOKEN_NOT_ASSIGN_ERROR,message:"token not assign error"})}else conn.onError({type:u.WEBIM_CONNCTION_NOT_SUPPORT_CHATROOM_ERROR,message:"current environment can not set request header"})})),(0,o.default)(i,"getBlacklist",(function(e){var t=this;if(e=e||{},this._utils.isCanSetRequestHeader){var n=this,r=e.accessToken||this.token;if(r){var i=e.apiUrl||this.apiUrl,o=this.context.appName,s=this.context.orgName;if(!o||!s)return void n.onError({type:u.WEBIM_CONNCTION_AUTH_ERROR,message:"appName or orgName is illegal"});var a={url:i+"/"+s+"/"+o+"/users/"+this.user+"/blocks/users",dataType:"json",type:"GET",headers:{Authorization:"Bearer "+r},success:function(n,r){var i={};n.data.forEach((function(e,t){i[e]={name:e}})),t.onBlacklistUpdate(i),"function"==typeof e.success&&e.success(n)}||this._utils.emptyfn,error:function(n,r,i){t.onBlacklistUpdate([]),"function"==typeof e.error&&e.error(n)}||this._utils.emptyfn};return this._utils.ajax(a)}n.onError({type:u.WEBIM_CONNCTION_TOKEN_NOT_ASSIGN_ERROR,message:"token not assign error"})}else n.onError({type:u.WEBIM_CONNCTION_NOT_SUPPORT_CHATROOM_ERROR,message:"current environment can not set request header"})})),(0,o.default)(i,"getRoster",(function(e){e=e||{};var t=this;if(this._utils.isCanSetRequestHeader){var n=this,r=e.accessToken||this.token;if(r){var i=e.apiUrl||this.apiUrl,o=this.context.appName,s=this.context.orgName;if(!o||!s)return void n.onError({type:u.WEBIM_CONNCTION_AUTH_ERROR,message:"appName or orgName is illegal"});var a={url:i+"/"+s+"/"+o+"/users/"+this.user+"/contacts/users",dataType:"json",type:"GET",headers:{Authorization:"Bearer "+r},success:function(n,r){var i=[];n.data.forEach((function(e,n){i.push({name:e,subscription:"both",jid:t.context.jid})})),"function"==typeof e.success&&e.success(i),t.onRoster&&t.onRoster(i)}||this._utils.emptyfn,error:function(t,n,r){"function"==typeof e.error&&e.error(t)}||this._utils.emptyfn};return this._utils.ajax(a)}n.onError({type:u.WEBIM_CONNCTION_TOKEN_NOT_ASSIGN_ERROR,message:"token not assign error"})}else n.onError({type:u.WEBIM_CONNCTION_NOT_SUPPORT_CHATROOM_ERROR,message:"current environment can not set request header"})})),(0,o.default)(i,"fetchGroupAnnouncement",(function(e){var t=e.apiUrl||this.apiUrl,n=this.context.appName,r=this.context.orgName,i=e.groupId,o={url:"".concat(t,"/").concat(r,"/").concat(n,"/chatgroups/").concat(i,"/announcement"),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}};return o.success=e.success||this._utils.emptyfn,o.error=e.error||this._utils.emptyfn,this._utils.ajax(o)})),(0,o.default)(i,"fetchChatRoomAnnouncement",(function(e){var t=e.apiUrl||this.apiUrl,n=this.context.appName,r=this.context.orgName,i=e.roomId,o={url:"".concat(t,"/").concat(r,"/").concat(n,"/chatrooms/").concat(i,"/announcement"),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}};return o.success=e.success||this._utils.emptyfn,o.error=e.error||this._utils.emptyfn,this._utils.ajax(o)})),(0,o.default)(i,"updateGroupAnnouncement",(function(e){var t=e.apiUrl||this.apiUrl,n=this.context.appName,r=this.context.orgName,i=e.groupId,o={announcement:e.announcement},s={url:"".concat(t,"/").concat(r,"/").concat(n,"/chatgroups/").concat(i,"/announcement"),type:"POST",dataType:"json",data:JSON.stringify(o),headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}};return s.success=e.success||this._utils.emptyfn,s.error=e.error||this._utils.emptyfn,this._utils.ajax(s)})),(0,o.default)(i,"updateChatRoomAnnouncement",(function(e){var t=e.apiUrl||this.apiUrl,n=this.context.appName,r=this.context.orgName,i=e.roomId,o={announcement:e.announcement},s={url:"".concat(t,"/").concat(r,"/").concat(n,"/chatrooms/").concat(i,"/announcement"),type:"POST",dataType:"json",data:JSON.stringify(o),headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}};return s.success=e.success||this._utils.emptyfn,s.error=e.error||this._utils.emptyfn,this._utils.ajax(s)})),(0,o.default)(i,"uploadGroupSharedFile",(function(e){var t=e.apiUrl||this.apiUrl,n=this.context.appName,r=this.context.orgName,i=e.groupId;this._utils.uploadFile({uploadUrl:"".concat(t,"/").concat(r,"/").concat(n,"/chatgroups/").concat(i,"/share_files"),onFileUploadProgress:e.onFileUploadProgress,onFileUploadComplete:e.onFileUploadComplete,onFileUploadError:e.onFileUploadError,onFileUploadCanceled:e.onFileUploadCanceled,accessToken:this.token,apiUrl:t,file:e.file,appKey:this.context.appKey})})),(0,o.default)(i,"uploadChatRoomSharedFile",(function(e){var t=e.apiUrl||this.apiUrl,n=this.context.appName,r=this.context.orgName,i=e.roomId;this._utils.uploadFile({uploadUrl:"".concat(t,"/").concat(r,"/").concat(n,"/chatrooms/").concat(i,"/share_files"),onFileUploadProgress:e.onFileUploadProgress,onFileUploadComplete:e.onFileUploadComplete,onFileUploadError:e.onFileUploadError,onFileUploadCanceled:e.onFileUploadCanceled,accessToken:this.token,apiUrl:t,file:e.file,appKey:this.context.appKey})})),(0,o.default)(i,"deleteGroupSharedFile",(function(e){var t=e.apiUrl||this.apiUrl,n=this.context.appName,r=this.context.orgName,i=e.groupId,o=e.fileId,s={url:"".concat(t,"/").concat(r,"/").concat(n,"/chatgroups/").concat(i,"/share_files/").concat(o),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}};return s.success=e.success||this._utils.emptyfn,s.error=e.error||this._utils.emptyfn,this._utils.ajax(s)})),(0,o.default)(i,"deleteChatRoomSharedFile",(function(e){var t=e.apiUrl||this.apiUrl,n=this.context.appName,r=this.context.orgName,i=e.roomId,o=e.fileId,s={url:"".concat(t,"/").concat(r,"/").concat(n,"/chatrooms/").concat(i,"/share_files/").concat(o),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}};return s.success=e.success||this._utils.emptyfn,s.error=e.error||this._utils.emptyfn,this._utils.ajax(s)})),(0,o.default)(i,"downloadGroupSharedFile",(function(e){var t=e.apiUrl||this.apiUrl,n=this.context.appName,r=this.context.orgName,i=e.groupId,o=e.fileId;this._utils.download.call(this,{url:"".concat(t,"/").concat(r,"/").concat(n,"/chatgroups/").concat(i,"/share_files/").concat(o),onFileDownloadComplete:e.onFileDownloadComplete,onFileDownloadError:e.onFileDownloadError,accessToken:this.token,id:o,secret:""})})),(0,o.default)(i,"downloadChatRoomSharedFile",(function(e){var t=e.apiUrl||this.apiUrl,n=this.context.appName,r=this.context.orgName,i=e.roomId,o=e.fileId;this._utils.download.call(this,{url:"".concat(t,"/").concat(r,"/").concat(n,"/chatrooms/").concat(i,"/share_files/").concat(o),onFileDownloadComplete:e.onFileDownloadComplete,onFileDownloadError:e.onFileDownloadError,accessToken:this.token,id:o,secret:""})})),(0,o.default)(i,"fetchGroupSharedFileList",(function(e){var t=e.apiUrl||this.apiUrl,n=this.context.appName,r=this.context.orgName,i=e.groupId,o={url:"".concat(t,"/").concat(r,"/").concat(n,"/chatgroups/").concat(i,"/share_files"),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}};return o.success=e.success||this._utils.emptyfn,o.error=e.error||this._utils.emptyfn,this._utils.ajax(o)})),(0,o.default)(i,"fetchChatRoomSharedFileList",(function(e){var t=e.apiUrl||this.apiUrl,n=this.context.appName,r=this.context.orgName,i=e.roomId,o={url:"".concat(t,"/").concat(r,"/").concat(n,"/chatrooms/").concat(i,"/share_files"),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}};return o.success=e.success||this._utils.emptyfn,o.error=e.error||this._utils.emptyfn,this._utils.ajax(o)})),i);t.default=f},function(e,t,n){"use strict";e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){return{nested:{easemob:{nested:{pb:{nested:{MessageBody:{fields:{type:{type:"Type",id:1},from:{type:"JID",id:2},to:{type:"JID",id:3},contents:{rule:"repeated",type:"Content",id:4},ext:{rule:"repeated",type:"KeyValue",id:5},ackMessageId:{type:"uint64",id:6},msgConfig:{type:"MessageConfig",id:7},ackContent:{type:"string",id:8}},nested:{Content:{fields:{type:{type:"Type",id:1},text:{type:"string",id:2},latitude:{type:"double",id:3},longitude:{type:"double",id:4},address:{type:"string",id:5},displayName:{type:"string",id:6},remotePath:{type:"string",id:7},secretKey:{type:"string",id:8},fileLength:{type:"int32",id:9},action:{type:"string",id:10},params:{rule:"repeated",type:"KeyValue",id:11},duration:{type:"int32",id:12},size:{type:"Size",id:13},thumbnailRemotePath:{type:"string",id:14},thumbnailSecretKey:{type:"string",id:15},thumbnailDisplayName:{type:"string",id:16},thumbnailFileLength:{type:"int32",id:17},thumbnailSize:{type:"Size",id:18},customEvent:{type:"string",id:19},customExts:{rule:"repeated",type:"KeyValue",id:20}},nested:{Type:{values:{TEXT:0,IMAGE:1,VIDEO:2,LOCATION:3,VOICE:4,FILE:5,COMMAND:6,CUSTOM:7}},Size:{fields:{width:{type:"double",id:1},height:{type:"double",id:2}}}}},Type:{values:{NORMAL:0,CHAT:1,GROUPCHAT:2,CHATROOM:3,READ_ACK:4,DELIVER_ACK:5,RECALL:6}},MessageConfig:{fields:{allowGroupAck:{type:"bool",id:1}}}}},KeyValue:{oneofs:{value:{oneof:["varintValue","floatValue","doubleValue","stringValue"]}},fields:{key:{type:"string",id:1},type:{type:"ValueType",id:2},varintValue:{type:"int64",id:3},floatValue:{type:"float",id:4},doubleValue:{type:"double",id:5},stringValue:{type:"string",id:6}},nested:{ValueType:{values:{BOOL:1,INT:2,UINT:3,LLINT:4,FLOAT:5,DOUBLE:6,STRING:7,JSON_STRING:8}}}},JID:{fields:{appKey:{type:"string",id:1},name:{type:"string",id:2},domain:{type:"string",id:3},clientResource:{type:"string",id:4}}},ConferenceBody:{fields:{sessionId:{type:"string",id:1},operation:{type:"Operation",id:2},conferenceId:{type:"string",id:3},type:{type:"Type",id:4},content:{type:"string",id:5},network:{type:"string",id:6},version:{type:"string",id:7},identity:{type:"Identity",id:8},duration:{type:"string",id:9},peerName:{type:"string",id:10},endReason:{type:"EndReason",id:11},status:{type:"Status",id:12},isDirect:{type:"bool",id:13},controlType:{type:"StreamControlType",id:14},routeFlag:{type:"int32",id:15},routeKey:{type:"string",id:16}},nested:{Status:{fields:{errorCode:{type:"int32",id:1}}},Operation:{values:{JOIN:0,INITIATE:1,ACCEPT_INITIATE:2,ANSWER:3,TERMINATE:4,REMOVE:5,STREAM_CONTROL:6,MEDIA_REQUEST:7}},Type:{values:{VOICE:0,VIDEO:1}},Identity:{values:{CALLER:0,CALLEE:1}},EndReason:{values:{HANGUP:0,NORESPONSE:1,REJECT:2,BUSY:3,FAIL:4,UNSUPPORTED:5,OFFLINE:6}},StreamControlType:{values:{PAUSE_VOICE:0,RESUME_VOICE:1,PAUSE_VIDEO:2,RESUME_VIDEO:3}}}},MSync:{fields:{version:{type:"Version",id:1,options:{default:"MSYNC_V1"}},guid:{type:"JID",id:2},auth:{type:"string",id:3},compressAlgorimth:{type:"uint32",id:4},crypto:{type:"uint32",id:5},userAgent:{type:"string",id:6},pov:{type:"uint64",id:7},command:{type:"Command",id:8},deviceId:{type:"uint32",id:10},encryptType:{rule:"repeated",type:"EncryptType",id:11,options:{packed:!1}},encryptKey:{type:"string",id:12},payload:{type:"bytes",id:9}},nested:{Version:{values:{MSYNC_V1:0,MSYNC_V2:1}},Command:{values:{SYNC:0,UNREAD:1,NOTICE:2,PROVISION:3}}}},EncryptType:{values:{ENCRYPT_NONE:0,ENCRYPT_AES_128_CBC:1,ENCRYPT_AES_256_CBC:2}},CommSyncUL:{fields:{meta:{type:"Meta",id:1},key:{type:"uint64",id:2},queue:{type:"JID",id:3},isRoam:{type:"bool",id:4},lastFullRoamKey:{type:"uint64",id:5}}},CommSyncDL:{fields:{status:{type:"Status",id:1},metaId:{type:"uint64",id:2},serverId:{type:"uint64",id:3},metas:{rule:"repeated",type:"Meta",id:4},nextKey:{type:"uint64",id:5},queue:{type:"JID",id:6},isLast:{type:"bool",id:7},timestamp:{type:"uint64",id:8},isRoam:{type:"bool",id:9}}},CommNotice:{fields:{queue:{type:"JID",id:1}}},CommUnreadUL:{fields:{}},CommUnreadDL:{fields:{status:{type:"Status",id:1},unread:{rule:"repeated",type:"MetaQueue",id:2},timestamp:{type:"uint64",id:3}}},MetaQueue:{fields:{queue:{type:"JID",id:1},n:{type:"uint32",id:2}}},Meta:{fields:{id:{type:"uint64",id:1},from:{type:"JID",id:2},to:{type:"JID",id:3},timestamp:{type:"uint64",id:4},ns:{type:"NameSpace",id:5},payload:{type:"bytes",id:6},routetype:{type:"RouteType",id:7}},nested:{NameSpace:{values:{STATISTIC:0,CHAT:1,MUC:2,ROSTER:3,CONFERENCE:4}},RouteType:{values:{ROUTE_ALL:0,ROUTE_ONLINE:1}}}},Status:{fields:{errorCode:{type:"ErrorCode",id:1},reason:{type:"string",id:2},redirectInfo:{rule:"repeated",type:"RedirectInfo",id:3}},nested:{ErrorCode:{values:{OK:0,FAIL:1,UNAUTHORIZED:2,MISSING_PARAMETER:3,WRONG_PARAMETER:4,REDIRECT:5,TOKEN_EXPIRED:6,PERMISSION_DENIED:7,NO_ROUTE:8,UNKNOWN_COMMAND:9,PB_PARSER_ERROR:10,BIND_ANOTHER_DEVICE:11,IM_FORBIDDEN:12,TOO_MANY_DEVICES:13,PLATFORM_LIMIT:14,USER_MUTED:15,ENCRYPT_DISABLE:16,ENCRYPT_ENABLE:17,DECRYPT_FAILURE:18}}}},RedirectInfo:{fields:{host:{type:"string",id:1},port:{type:"uint32",id:2}}},Provision:{fields:{osType:{type:"OsType",id:1},version:{type:"string",id:2},networkType:{type:"NetworkType",id:3},appSign:{type:"string",id:4},compressType:{rule:"repeated",type:"CompressType",id:5,options:{packed:!1}},encryptType:{rule:"repeated",type:"EncryptType",id:6,options:{packed:!1}},encryptKey:{type:"string",id:7},status:{type:"Status",id:8},deviceUuid:{type:"string",id:9},isManualLogin:{type:"bool",id:10},password:{type:"string",id:11},deviceName:{type:"string",id:12},resource:{type:"string",id:13},auth:{type:"string",id:14}},nested:{OsType:{values:{OS_IOS:0,OS_ANDROID:1,OS_LINUX:2,OS_OSX:3,OS_WIN:4,OS_OTHER:16}},NetworkType:{values:{NETWORK_NONE:0,NETWORK_WIFI:1,NETWORK_4G:2,NETWORK_3G:3,NETWORK_2G:4,NETWORK_WIRE:5}},CompressType:{values:{COMPRESS_NONE:0,COMPRESS_ZLIB:1}}}},MUCBody:{fields:{mucId:{type:"JID",id:1},operation:{type:"Operation",id:2},from:{type:"JID",id:3},to:{rule:"repeated",type:"JID",id:4},setting:{type:"Setting",id:5},reason:{type:"string",id:6},isChatroom:{type:"bool",id:7},status:{type:"Status",id:8}},nested:{Operation:{values:{CREATE:0,DESTROY:1,JOIN:2,LEAVE:3,APPLY:4,APPLY_ACCEPT:5,APPLY_DECLINE:6,INVITE:7,INVITE_ACCEPT:8,INVITE_DECLINE:9,KICK:10,GET_BLACKLIST:11,BAN:12,ALLOW:13,UPDATE:14,BLOCK:15,UNBLOCK:16,PRESENCE:17,ABSENCE:18,DIRECT_JOINED:19,ASSIGN_OWNER:20,ADD_ADMIN:21,REMOVE_ADMIN:22,ADD_MUTE:23,REMOVE_MUTE:24,UPDATE_ANNOUNCEMENT:25,DELETE_ANNOUNCEMENT:26,UPLOAD_FILE:27,DELETE_FILE:28,ADD_USER_WHITE_LIST:29,REMOVE_USER_WHITE_LIST:30,BAN_GROUP:31,REMOVE_BAN_GROUP:32}},Setting:{fields:{name:{type:"string",id:1},desc:{type:"string",id:2},type:{type:"Type",id:3},maxUsers:{type:"int32",id:4},owner:{type:"string",id:5}},nested:{Type:{values:{PRIVATE_OWNER_INVITE:0,PRIVATE_MEMBER_INVITE:1,PUBLIC_JOIN_APPROVAL:2,PUBLIC_JOIN_OPEN:3,PUBLIC_ANONYMOUS:4}}}},Status:{fields:{errorCode:{type:"ErrorCode",id:1},description:{type:"string",id:2}},nested:{ErrorCode:{values:{OK:0,PERMISSION_DENIED:1,WRONG_PARAMETER:2,MUC_NOT_EXIST:3,USER_NOT_EXIST:4,UNKNOWN:5}}}}}},RosterBody:{fields:{operation:{type:"Operation",id:1},status:{type:"Status",id:2},from:{type:"JID",id:3},to:{rule:"repeated",type:"JID",id:4},reason:{type:"string",id:5},rosterVer:{type:"string",id:6},biDirection:{type:"bool",id:7}},nested:{Operation:{values:{GET_ROSTER:0,GET_BLACKLIST:1,ADD:2,REMOVE:3,ACCEPT:4,DECLINE:5,BAN:6,ALLOW:7,REMOTE_ACCEPT:8,REMOTE_DECLINE:9}},Status:{fields:{errorCode:{type:"ErrorCode",id:1},description:{type:"string",id:2}},nested:{ErrorCode:{values:{OK:0,USER_NOT_EXIST:1,USER_ALREADY_FRIEND:2,USER_ALREADY_BLACKLIST:3}}}}}},StatisticsBody:{fields:{operation:{type:"Operation",id:1},os:{type:"OsType",id:2},version:{type:"string",id:3},network:{type:"NetworkType",id:4},imTime:{type:"uint32",id:5},chatTime:{type:"uint32",id:6},location:{type:"string",id:7}},nested:{Operation:{values:{INFORMATION:0,USER_REMOVED:1,USER_LOGIN_ANOTHER_DEVICE:2,USER_KICKED_BY_CHANGE_PASSWORD:3,USER_KICKED_BY_OTHER_DEVICE:4}},OsType:{values:{OS_IOS:0,OS_ANDROID:1,OS_LINUX:2,OS_OSX:3,OS_WIN:4,OS_OTHER:16}},NetworkType:{values:{NETWORK_NONE:0,NETWORK_WIFI:1,NETWORK_4G:2,NETWORK_3G:3,NETWORK_2G:4,NETWORK_WIRE:5}}}}}}}}}}};t.default=r},,,,,function(e,t,n){"use strict";(function(t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=n(111),o=n(112),s=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,a=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,c=[["#","hash"],["?","query"],function(e){return e.replace("\\","/")},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],u={hash:1,query:1};function f(e){var n,i=("undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{}).location||{},o={},s=r(e=e||i);if("blob:"===e.protocol)o=new l(unescape(e.pathname),{});else if("string"===s)for(n in o=new l(e,{}),u)delete o[n];else if("object"===s){for(n in e)n in u||(o[n]=e[n]);void 0===o.slashes&&(o.slashes=a.test(e.href))}return o}function d(e){var t=s.exec(e);return{protocol:t[1]?t[1].toLowerCase():"",slashes:!!t[2],rest:t[3]}}function l(e,t,n){if(!(this instanceof l))return new l(e,t,n);var s,a,u,p,h,m,v=c.slice(),g=r(t),y=this,b=0;for("object"!==g&&"string"!==g&&(n=t,t=null),n&&"function"!=typeof n&&(n=o.parse),t=f(t),s=!(a=d(e||"")).protocol&&!a.slashes,y.slashes=a.slashes||s&&t.slashes,y.protocol=a.protocol||t.protocol||"",e=a.rest,a.slashes||(v[3]=[/(.*)/,"pathname"]);b<v.length;b++)"function"!=typeof(p=v[b])?(u=p[0],m=p[1],u!=u?y[m]=e:"string"==typeof u?~(h=e.indexOf(u))&&("number"==typeof p[2]?(y[m]=e.slice(0,h),e=e.slice(h+p[2])):(y[m]=e.slice(h),e=e.slice(0,h))):(h=u.exec(e))&&(y[m]=h[1],e=e.slice(0,h.index)),y[m]=y[m]||s&&p[3]&&t[m]||"",p[4]&&(y[m]=y[m].toLowerCase())):e=p(e);n&&(y.query=n(y.query)),s&&t.slashes&&"/"!==y.pathname.charAt(0)&&(""!==y.pathname||""!==t.pathname)&&(y.pathname=function(e,t){for(var n=(t||"/").split("/").slice(0,-1).concat(e.split("/")),r=n.length,i=n[r-1],o=!1,s=0;r--;)"."===n[r]?n.splice(r,1):".."===n[r]?(n.splice(r,1),s++):s&&(0===r&&(o=!0),n.splice(r,1),s--);return o&&n.unshift(""),"."!==i&&".."!==i||n.push(""),n.join("/")}(y.pathname,t.pathname)),i(y.port,y.protocol)||(y.host=y.hostname,y.port=""),y.username=y.password="",y.auth&&(p=y.auth.split(":"),y.username=p[0]||"",y.password=p[1]||""),y.origin=y.protocol&&y.host&&"file:"!==y.protocol?y.protocol+"//"+y.host:"null",y.href=y.toString()}l.prototype={set:function(e,t,n){var r=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(n||o.parse)(t)),r[e]=t;break;case"port":r[e]=t,i(t,r.protocol)?t&&(r.host=r.hostname+":"+t):(r.host=r.hostname,r[e]="");break;case"hostname":r[e]=t,r.port&&(t+=":"+r.port),r.host=t;break;case"host":r[e]=t,/:\d+$/.test(t)?(t=t.split(":"),r.port=t.pop(),r.hostname=t.join(":")):(r.hostname=t,r.port="");break;case"protocol":r.protocol=t.toLowerCase(),r.slashes=!n;break;case"pathname":case"hash":if(t){var s="pathname"===e?"/":"#";r[e]=t.charAt(0)!==s?s+t:t}else r[e]=t;break;default:r[e]=t}for(var a=0;a<c.length;a++){var u=c[a];u[4]&&(r[u[1]]=r[u[1]].toLowerCase())}return r.origin=r.protocol&&r.host&&"file:"!==r.protocol?r.protocol+"//"+r.host:"null",r.href=r.toString(),r},toString:function(e){e&&"function"==typeof e||(e=o.stringify);var t,n=this,i=n.protocol;i&&":"!==i.charAt(i.length-1)&&(i+=":");var s=i+(n.slashes?"//":"");return n.username&&(s+=n.username,n.password&&(s+=":"+n.password),s+="@"),s+=n.host+n.pathname,(t="object"===r(n.query)?e(n.query):n.query)&&(s+="?"!==t.charAt(0)?"?"+t:t),n.hash&&(s+=n.hash),s}},l.extractProtocol=d,l.location=f,l.qs=o,e.exports=l}).call(this,n(2))},function(e,t,n){"use strict";function r(){this._listeners={}}r.prototype.addEventListener=function(e,t){e in this._listeners||(this._listeners[e]=[]);var n=this._listeners[e];-1===n.indexOf(t)&&(n=n.concat([t])),this._listeners[e]=n},r.prototype.removeEventListener=function(e,t){var n=this._listeners[e];if(n){var r=n.indexOf(t);-1===r||(n.length>1?this._listeners[e]=n.slice(0,r).concat(n.slice(r+1)):delete this._listeners[e])}},r.prototype.dispatchEvent=function(){var e=arguments[0],t=e.type,n=1===arguments.length?[e]:Array.apply(null,arguments);if(this["on"+t]&&this["on"+t].apply(this,n),t in this._listeners)for(var r=this._listeners[t],i=0;i<r.length;i++)r[i].apply(this,n)},e.exports=r},function(e,t,n){"use strict";var r=n(1),i=n(9),o=n(115),s=n(116);function a(e,t,n,r,a){var c=i.addPath(e,t),u=this;o.call(this,e,n),this.poll=new s(r,c,a),this.poll.on("message",(function(e){u.emit("message",e)})),this.poll.once("close",(function(e,t){u.poll=null,u.emit("close",e,t),u.close()}))}r(a,o),a.prototype.close=function(){o.prototype.close.call(this),this.removeAllListeners(),this.poll&&(this.poll.abort(),this.poll=null)},e.exports=a},function(e,t,n){"use strict";(function(t){var r=n(6).EventEmitter,i=n(1),o=n(15),s=n(9),a=t.XMLHttpRequest;function c(e,t,n,i){var o=this;r.call(this),setTimeout((function(){o._start(e,t,n,i)}),0)}i(c,r),c.prototype._start=function(e,t,n,r){var i=this;try{this.xhr=new a}catch(e){}if(!this.xhr)return this.emit("finish",0,"no xhr support"),void this._cleanup();t=s.addQuery(t,"t="+ +new Date),this.unloadRef=o.unloadAdd((function(){i._cleanup(!0)}));try{this.xhr.open(e,t,!0),this.timeout&&"timeout"in this.xhr&&(this.xhr.timeout=this.timeout,this.xhr.ontimeout=function(){i.emit("finish",0,""),i._cleanup(!1)})}catch(e){return this.emit("finish",0,""),void this._cleanup(!1)}if(r&&r.noCredentials||!c.supportsCORS||(this.xhr.withCredentials=!0),r&&r.headers)for(var u in r.headers)this.xhr.setRequestHeader(u,r.headers[u]);this.xhr.onreadystatechange=function(){if(i.xhr){var e,t,n=i.xhr;switch(n.readyState,n.readyState){case 3:try{t=n.status,e=n.responseText}catch(e){}1223===t&&(t=204),200===t&&e&&e.length>0&&i.emit("chunk",t,e);break;case 4:1223===(t=n.status)&&(t=204),12005!==t&&12029!==t||(t=0),n.responseText,i.emit("finish",t,n.responseText),i._cleanup(!1)}}};try{i.xhr.send(n)}catch(e){i.emit("finish",0,""),i._cleanup(!1)}},c.prototype._cleanup=function(e){if(this.xhr){if(this.removeAllListeners(),o.unloadDel(this.unloadRef),this.xhr.onreadystatechange=function(){},this.xhr.ontimeout&&(this.xhr.ontimeout=null),e)try{this.xhr.abort()}catch(e){}this.unloadRef=this.xhr=null}},c.prototype.close=function(){this._cleanup(!0)},c.enabled=!!a;var u=["Active"].concat("Object").join("X");!c.enabled&&u in t&&(a=function(){try{return new t[u]("Microsoft.XMLHTTP")}catch(e){return null}},c.enabled=!!new a);var f=!1;try{f="withCredentials"in new a}catch(e){}c.supportsCORS=f,e.exports=c}).call(this,n(2))},function(e,t,n){"use strict";var r=n(1),i=n(19),o=n(34),s=n(41);function a(e){if(!s.enabled)throw new Error("Transport created when disabled");i.call(this,e,"/xhr_streaming",o,s)}r(a,i),a.enabled=function(e){return!e.cookie_needed&&!e.nullOrigin&&s.enabled&&e.sameScheme},a.transportName="xdr-streaming",a.roundTrips=2,e.exports=a},function(e,t,n){"use strict";var r=n(1),i=n(19),o=n(117),s=n(35),a=n(75);function c(e){if(!c.enabled())throw new Error("Transport created when disabled");i.call(this,e,"/eventsource",o,s)}r(c,i),c.enabled=function(){return!!a},c.transportName="eventsource",c.roundTrips=2,e.exports=c},function(e,t,n){"use strict";(function(t){e.exports=t.EventSource}).call(this,n(2))},function(e,t,n){"use strict";var r=n(1),i=n(12),o=n(6).EventEmitter,s=n(77),a=n(9),c=n(27),u=n(15),f=n(18);function d(e,t,n){if(!d.enabled())throw new Error("Transport created when disabled");o.call(this);var r=this;this.origin=a.getOrigin(n),this.baseUrl=n,this.transUrl=t,this.transport=e,this.windowId=f.string(8);var i=a.addPath(n,"/iframe.html")+"#"+this.windowId;this.iframeObj=c.createIframe(i,(function(e){r.emit("close",1006,"Unable to load an iframe ("+e+")"),r.close()})),this.onmessageCallback=this._message.bind(this),u.attachEvent("message",this.onmessageCallback)}r(d,o),d.prototype.close=function(){if(this.removeAllListeners(),this.iframeObj){u.detachEvent("message",this.onmessageCallback);try{this.postMessage("c")}catch(e){}this.iframeObj.cleanup(),this.iframeObj=null,this.onmessageCallback=this.iframeObj=null}},d.prototype._message=function(e){if(e.data,!a.isOriginEqual(e.origin,this.origin))return e.origin,void this.origin;var t;try{t=i.parse(e.data)}catch(t){return void e.data}if(t.windowId!==this.windowId)return t.windowId,void this.windowId;switch(t.type){case"s":this.iframeObj.loaded(),this.postMessage("s",i.stringify([s,this.transport,this.transUrl,this.baseUrl]));break;case"t":this.emit("message",t.data);break;case"c":var n;try{n=i.parse(t.data)}catch(e){return void t.data}this.emit("close",n[0],n[1]),this.close()}},d.prototype.postMessage=function(e,t){this.iframeObj.post(i.stringify({windowId:this.windowId,type:e,data:t||""}),this.origin)},d.prototype.send=function(e){this.postMessage("m",e)},d.enabled=function(){return c.iframeEnabled},d.transportName="iframe",d.roundTrips=2,e.exports=d},function(e,t,n){"use strict";e.exports="1.3.0"},function(e,t,n){"use strict";var r=n(1),i=n(120),o=n(25),s=n(19);function a(e){if(!i.enabled)throw new Error("Transport created when disabled");s.call(this,e,"/htmlfile",i,o)}r(a,s),a.enabled=function(e){return i.enabled&&e.sameOrigin},a.transportName="htmlfile",a.roundTrips=2,e.exports=a},function(e,t,n){"use strict";var r=n(1),i=n(19),o=n(34),s=n(35),a=n(25);function c(e){if(!a.enabled&&!s.enabled)throw new Error("Transport created when disabled");i.call(this,e,"/xhr",o,s)}r(c,i),c.enabled=function(e){return!e.nullOrigin&&(!(!a.enabled||!e.sameOrigin)||s.enabled)},c.transportName="xhr-polling",c.roundTrips=2,e.exports=c},function(e,t,n){"use strict";(function(t){e.exports=t.location||{origin:"http://localhost:80",protocol:"http:",host:"localhost",port:80,href:"http://localhost/",hash:""}}).call(this,n(2))},function(e,t,n){"use strict";var r=n(1),i=n(6).EventEmitter,o=n(12),s=n(25),a=n(82);function c(e){var t=this;i.call(this),this.ir=new a(e,s),this.ir.once("finish",(function(e,n){t.ir=null,t.emit("message",o.stringify([e,n]))}))}r(c,i),c.transportName="iframe-info-receiver",c.prototype.close=function(){this.ir&&(this.ir.close(),this.ir=null),this.removeAllListeners()},e.exports=c},function(e,t,n){"use strict";var r=n(6).EventEmitter,i=n(1),o=n(12),s=n(43);function a(e,t){r.call(this);var n=this,i=+new Date;this.xo=new t("GET",e),this.xo.once("finish",(function(e,t){var r,a;if(200===e){if(a=+new Date-i,t)try{r=o.parse(t)}catch(e){}s.isObject(r)||(r={})}n.emit("finish",r,a),n.removeAllListeners()}))}i(a,r),a.prototype.close=function(){this.removeAllListeners(),this.xo.close()},e.exports=a},function(e,t,n){"use strict";e.exports=function(e,t){for(var n=new Array(arguments.length-1),r=0,i=2,o=!0;i<arguments.length;)n[r++]=arguments[i++];return new Promise((function(i,s){n[r]=function(e){if(o)if(o=!1,e)s(e);else{for(var t=new Array(arguments.length-1),n=0;n<t.length;)t[n++]=arguments[n];i.apply(null,t)}};try{e.apply(t||null,n)}catch(e){o&&(o=!1,s(e))}}))}},function(module,exports,__webpack_require__){"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},function(e,t,n){"use strict";t.Service=n(149)},function(e,t,n){"use strict";e.exports={}},function(e,t,n){"use strict";e.exports=function(e){for(var t,n=o.codegen(["m","w"],e.name+"$encode")("if(!w)")("w=Writer.create()"),a=e.fieldsArray.slice().sort(o.compareFieldsById),c=0;c<a.length;++c){var u=a[c].resolve(),f=e._fieldsArray.indexOf(u),d=u.resolvedType instanceof r?"int32":u.type,l=i.basic[d];t="m"+o.safeProp(u.name),u.map?(n("if(%s!=null&&m.hasOwnProperty(%j)){",t,u.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",t)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(u.id<<3|2)>>>0,8|i.mapKey[u.keyType],u.keyType),void 0===l?n("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",f,t):n(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|l,d,t),n("}")("}")):u.repeated?(n("if(%s!=null&&%s.length){",t,t),u.packed&&void 0!==i.packed[d]?n("w.uint32(%i).fork()",(u.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",t)("w.%s(%s[i])",d,t)("w.ldelim()"):(n("for(var i=0;i<%s.length;++i)",t),void 0===l?s(n,u,f,t+"[i]"):n("w.uint32(%i).%s(%s[i])",(u.id<<3|l)>>>0,d,t)),n("}")):(u.optional&&n("if(%s!=null&&m.hasOwnProperty(%j))",t,u.name),void 0===l?s(n,u,f,t):n("w.uint32(%i).%s(%s)",(u.id<<3|l)>>>0,d,t))}return n("return w")};var r=n(11),i=n(21),o=n(4);function s(e,t,n,r){return t.resolvedType.group?e("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",n,r,(t.id<<3|3)>>>0,(t.id<<3|4)>>>0):e("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",n,r,(t.id<<3|2)>>>0)}},function(e,t,n){"use strict";e.exports=function(e){var t=o.codegen(["r","l"],e.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(e.fieldsArray.filter((function(e){return e.map})).length?",k":""))("while(r.pos<c){")("var t=r.uint32()");e.group&&t("if((t&7)===4)")("break"),t("switch(t>>>3){");for(var n=0;n<e.fieldsArray.length;++n){var a=e._fieldsArray[n].resolve(),c=a.resolvedType instanceof r?"int32":a.type,u="m"+o.safeProp(a.name);t("case %i:",a.id),a.map?(t("r.skip().pos++")("if(%s===util.emptyObject)",u)("%s={}",u)("k=r.%s()",a.keyType)("r.pos++"),void 0!==i.long[a.keyType]?void 0===i.basic[c]?t('%s[typeof k==="object"?util.longToHash(k):k]=types[%i].decode(r,r.uint32())',u,n):t('%s[typeof k==="object"?util.longToHash(k):k]=r.%s()',u,c):void 0===i.basic[c]?t("%s[k]=types[%i].decode(r,r.uint32())",u,n):t("%s[k]=r.%s()",u,c)):a.repeated?(t("if(!(%s&&%s.length))",u,u)("%s=[]",u),void 0!==i.packed[c]&&t("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",u,c)("}else"),void 0===i.basic[c]?t(a.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",u,n):t("%s.push(r.%s())",u,c)):void 0===i.basic[c]?t(a.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",u,n):t("%s=r.%s()",u,c),t("break")}for(t("default:")("r.skipType(t&7)")("break")("}")("}"),n=0;n<e._fieldsArray.length;++n){var f=e._fieldsArray[n];f.required&&t("if(!m.hasOwnProperty(%j))",f.name)("throw util.ProtocolError(%j,{instance:m})",s(f))}return t("return m")};var r=n(11),i=n(21),o=n(4);function s(e){return"missing required '"+e.name+"'"}},function(e,t,n){"use strict";e.exports=function(e){var t=i.codegen(["m"],e.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),n=e.oneofsArray,r={};n.length&&t("var p={}");for(var c=0;c<e.fieldsArray.length;++c){var u=e._fieldsArray[c].resolve(),f="m"+i.safeProp(u.name);if(u.optional&&t("if(%s!=null&&m.hasOwnProperty(%j)){",f,u.name),u.map)t("if(!util.isObject(%s))",f)("return%j",o(u,"object"))("var k=Object.keys(%s)",f)("for(var i=0;i<k.length;++i){"),a(t,u,"k[i]"),s(t,u,c,f+"[k[i]]")("}");else if(u.repeated)t("if(!Array.isArray(%s))",f)("return%j",o(u,"array"))("for(var i=0;i<%s.length;++i){",f),s(t,u,c,f+"[i]")("}");else{if(u.partOf){var d=i.safeProp(u.partOf.name);1===r[u.partOf.name]&&t("if(p%s===1)",d)("return%j",u.partOf.name+": multiple values"),r[u.partOf.name]=1,t("p%s=1",d)}s(t,u,c,f)}u.optional&&t("}")}return t("return null")};var r=n(11),i=n(4);function o(e,t){return e.name+": "+t+(e.repeated&&"array"!==t?"[]":e.map&&"object"!==t?"{k:"+e.keyType+"}":"")+" expected"}function s(e,t,n,i){if(t.resolvedType)if(t.resolvedType instanceof r){e("switch(%s){",i)("default:")("return%j",o(t,"enum value"));for(var s=Object.keys(t.resolvedType.values),a=0;a<s.length;++a)e("case %i:",t.resolvedType.values[s[a]]);e("break")("}")}else e("{")("var e=types[%i].verify(%s);",n,i)("if(e)")("return%j+e",t.name+".")("}");else switch(t.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.isInteger(%s))",i)("return%j",o(t,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",i,i,i,i)("return%j",o(t,"integer|Long"));break;case"float":case"double":e('if(typeof %s!=="number")',i)("return%j",o(t,"number"));break;case"bool":e('if(typeof %s!=="boolean")',i)("return%j",o(t,"boolean"));break;case"string":e("if(!util.isString(%s))",i)("return%j",o(t,"string"));break;case"bytes":e('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',i,i,i)("return%j",o(t,"buffer"))}return e}function a(e,t,n){switch(t.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.key32Re.test(%s))",n)("return%j",o(t,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.key64Re.test(%s))",n)("return%j",o(t,"integer|Long key"));break;case"bool":e("if(!util.key2Re.test(%s))",n)("return%j",o(t,"boolean key"))}return e}},function(e,t,n){"use strict";var r=t,i=n(11),o=n(4);function s(e,t,n,r){if(t.resolvedType)if(t.resolvedType instanceof i){e("switch(d%s){",r);for(var o=t.resolvedType.values,s=Object.keys(o),a=0;a<s.length;++a)t.repeated&&o[s[a]]===t.typeDefault&&e("default:"),e("case%j:",s[a])("case %i:",o[s[a]])("m%s=%j",r,o[s[a]])("break");e("}")}else e('if(typeof d%s!=="object")',r)("throw TypeError(%j)",t.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",r,n,r);else{var c=!1;switch(t.type){case"double":case"float":e("m%s=Number(d%s)",r,r);break;case"uint32":case"fixed32":e("m%s=d%s>>>0",r,r);break;case"int32":case"sint32":case"sfixed32":e("m%s=d%s|0",r,r);break;case"uint64":c=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",r,r,c)('else if(typeof d%s==="string")',r)("m%s=parseInt(d%s,10)",r,r)('else if(typeof d%s==="number")',r)("m%s=d%s",r,r)('else if(typeof d%s==="object")',r)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",r,r,r,c?"true":"");break;case"bytes":e('if(typeof d%s==="string")',r)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",r,r,r)("else if(d%s.length)",r)("m%s=d%s",r,r);break;case"string":e("m%s=String(d%s)",r,r);break;case"bool":e("m%s=Boolean(d%s)",r,r)}}return e}function a(e,t,n,r){if(t.resolvedType)t.resolvedType instanceof i?e("d%s=o.enums===String?types[%i].values[m%s]:m%s",r,n,r,r):e("d%s=types[%i].toObject(m%s,o)",r,n,r);else{var o=!1;switch(t.type){case"double":case"float":e("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",r,r,r,r);break;case"uint64":o=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e('if(typeof m%s==="number")',r)("d%s=o.longs===String?String(m%s):m%s",r,r,r)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",r,r,r,r,o?"true":"",r);break;case"bytes":e("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",r,r,r,r,r);break;default:e("d%s=m%s",r,r)}}return e}r.fromObject=function(e){var t=e.fieldsArray,n=o.codegen(["d"],e.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!t.length)return n("return new this.ctor");n("var m=new this.ctor");for(var r=0;r<t.length;++r){var a=t[r].resolve(),c=o.safeProp(a.name);a.map?(n("if(d%s){",c)('if(typeof d%s!=="object")',c)("throw TypeError(%j)",a.fullName+": object expected")("m%s={}",c)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",c),s(n,a,r,c+"[ks[i]]")("}")("}")):a.repeated?(n("if(d%s){",c)("if(!Array.isArray(d%s))",c)("throw TypeError(%j)",a.fullName+": array expected")("m%s=[]",c)("for(var i=0;i<d%s.length;++i){",c),s(n,a,r,c+"[i]")("}")("}")):(a.resolvedType instanceof i||n("if(d%s!=null){",c),s(n,a,r,c),a.resolvedType instanceof i||n("}"))}return n("return m")},r.toObject=function(e){var t=e.fieldsArray.slice().sort(o.compareFieldsById);if(!t.length)return o.codegen()("return {}");for(var n=o.codegen(["m","o"],e.name+"$toObject")("if(!o)")("o={}")("var d={}"),r=[],s=[],c=[],u=0;u<t.length;++u)t[u].partOf||(t[u].resolve().repeated?r:t[u].map?s:c).push(t[u]);if(r.length){for(n("if(o.arrays||o.defaults){"),u=0;u<r.length;++u)n("d%s=[]",o.safeProp(r[u].name));n("}")}if(s.length){for(n("if(o.objects||o.defaults){"),u=0;u<s.length;++u)n("d%s={}",o.safeProp(s[u].name));n("}")}if(c.length){for(n("if(o.defaults){"),u=0;u<c.length;++u){var f=c[u],d=o.safeProp(f.name);if(f.resolvedType instanceof i)n("d%s=o.enums===String?%j:%j",d,f.resolvedType.valuesById[f.typeDefault],f.typeDefault);else if(f.long)n("if(util.Long){")("var n=new util.Long(%i,%i,%j)",f.typeDefault.low,f.typeDefault.high,f.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",d)("}else")("d%s=o.longs===String?%j:%i",d,f.typeDefault.toString(),f.typeDefault.toNumber());else if(f.bytes){var l="["+Array.prototype.slice.call(f.typeDefault).join(",")+"]";n("if(o.bytes===String)d%s=%j",d,String.fromCharCode.apply(String,f.typeDefault))("else{")("d%s=%s",d,l)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",d,d)("}")}else n("d%s=%j",d,f.typeDefault)}n("}")}var p=!1;for(u=0;u<t.length;++u){f=t[u];var h=e._fieldsArray.indexOf(f);d=o.safeProp(f.name),f.map?(p||(p=!0,n("var ks2")),n("if(m%s&&(ks2=Object.keys(m%s)).length){",d,d)("d%s={}",d)("for(var j=0;j<ks2.length;++j){"),a(n,f,h,d+"[ks2[j]]")("}")):f.repeated?(n("if(m%s&&m%s.length){",d,d)("d%s=[]",d)("for(var j=0;j<m%s.length;++j){",d),a(n,f,h,d+"[j]")("}")):(n("if(m%s!=null&&m.hasOwnProperty(%j)){",d,f.name),a(n,f,h,d),f.partOf&&n("if(o.oneofs)")("d%s=%j",o.safeProp(f.partOf.name),f.name)),n("}")}return n("return d")}},function(e,t,n){"use strict";var r=t,i=n(51);r[".google.protobuf.Any"]={fromObject:function(e){if(e&&e["@type"]){var t=this.lookup(e["@type"]);if(t){var n="."===e["@type"].charAt(0)?e["@type"].substr(1):e["@type"];return this.create({type_url:"/"+n,value:t.encode(t.fromObject(e)).finish()})}}return this.fromObject(e)},toObject:function(e,t){if(t&&t.json&&e.type_url&&e.value){var n=e.type_url.substring(e.type_url.lastIndexOf("/")+1),r=this.lookup(n);r&&(e=r.decode(e.value))}if(!(e instanceof this.ctor)&&e instanceof i){var o=e.$type.toObject(e,t);return o["@type"]=e.$type.fullName,o}return this.toObject(e,t)}}},function(e,t,n){"use strict";e.exports=p;var r=/[\s{}=;:[\],'"()<>]/g,i=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,o=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,s=/^ *[*/]+ */,a=/^\s*\*?\/*/,c=/\n/g,u=/\s/,f=/\\(.?)/g,d={0:"\0",r:"\r",n:"\n",t:"\t"};function l(e){return e.replace(f,(function(e,t){switch(t){case"\\":case"":return t;default:return d[t]||""}}))}function p(e,t){e=e.toString();var n=0,f=e.length,d=1,p=null,h=null,m=0,v=!1,g=[],y=null;function b(e){return Error("illegal "+e+" (line "+d+")")}function _(t){return e.charAt(t)}function w(n,r){p=e.charAt(n++),m=d,v=!1;var i,o=n-(t?2:3);do{if(--o<0||"\n"===(i=e.charAt(o))){v=!0;break}}while(" "===i||"\t"===i);for(var u=e.substring(n,r).split(c),f=0;f<u.length;++f)u[f]=u[f].replace(t?a:s,"").trim();h=u.join("\n").trim()}function S(t){var n=x(t),r=e.substring(t,n);return/^\s*\/{1,2}/.test(r)}function x(e){for(var t=e;t<f&&"\n"!==_(t);)t++;return t}function C(){if(g.length>0)return g.shift();if(y)return function(){var t="'"===y?o:i;t.lastIndex=n-1;var r=t.exec(e);if(!r)throw b("string");return n=t.lastIndex,E(y),y=null,l(r[1])}();var s,a,c,p,h;do{if(n===f)return null;for(s=!1;u.test(c=_(n));)if("\n"===c&&++d,++n===f)return null;if("/"===_(n)){if(++n===f)throw b("comment");if("/"===_(n))if(t){if(p=n,h=!1,S(n)){h=!0;do{if((n=x(n))===f)break;n++}while(S(n))}else n=Math.min(f,x(n)+1);h&&w(p,n),d++,s=!0}else{for(h="/"===_(p=n+1);"\n"!==_(++n);)if(n===f)return null;++n,h&&w(p,n-1),++d,s=!0}else{if("*"!==(c=_(n)))return"/";p=n+1,h=t||"*"===_(p);do{if("\n"===c&&++d,++n===f)throw b("comment");a=c,c=_(n)}while("*"!==a||"/"!==c);++n,h&&w(p,n-2),s=!0}}}while(s);var m=n;if(r.lastIndex=0,!r.test(_(m++)))for(;m<f&&!r.test(_(m));)++m;var v=e.substring(n,n=m);return'"'!==v&&"'"!==v||(y=v),v}function E(e){g.push(e)}function I(){if(!g.length){var e=C();if(null===e)return null;E(e)}return g[0]}return Object.defineProperty({next:C,peek:I,push:E,skip:function(e,t){var n=I();if(n===e)return C(),!0;if(!t)throw b("token '"+n+"', '"+e+"' expected");return!1},cmnt:function(e){var n=null;return void 0===e?m===d-1&&(t||"*"===p||v)&&(n=h):(m<e&&I(),m!==e||v||!t&&"/"!==p||(n=h)),n}},"line",{get:function(){return d}})}p.unescape=l},,,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(107)),o=r(n(36)),s=r(n(137)),a=r(n(53)),c=r(n(8)),u=r(n(64)),f=r(n(155)),d=r(n(7)),l=r(n(14)).default.getLogger("IM-SDK-LOG");l.setConfig({useCache:!0,maxCache:3145728}),l.enableAll();var p=(0,d.default)(),h=(0,u.default)();s.default.util.Long=c.default,s.default.configure();var m,v=s.default.Root.fromJSON(h);a.default.connection.prototype.getParams({root:v,utils:f.default});var g=function(e,t,n){for(var r="",i=0;i<e.length;i++)r+=String.fromCharCode(e[i]);if(r=o.default.btoa(r),n)return r;try{m.send(r)}catch(e){t.onError({type:p.SDK_RUNTIME_ERROR,message:"send message error",data:e})}};function y(e){if(e.isHttpDNS){var t=e.socketHost[e.hostIndex],n=t.domain,r=t.ip,o="";if(r){o=r;var s=t.port;"80"!=s&&(o+=":"+s)}else o=n;o&&(e.url="//"+o+"/ws")}return new i.default(e.url)}a.default.connection.prototype._base64transform=g,a.default.connection.prototype._getSock=y,a.default.connection.prototype._login=function(e,t){e&&(m=y(t),a.default.connection.prototype.sock=m,m.onopen=function(){l.debug("onopen"),t.autoReconnectInterval=0,t.times=1,t.autoReconnectNumTotal=0;var n=[],r=(new Date).valueOf(),i=v.lookup("easemob.pb.Provision"),o=i.decode(n),s="",a="",c="";"webim"===t.deviceId?(c=r.toString(),s=t.deviceId+"_"+c,a=t.deviceId):s=a=c="webim_"+t.deviceId,t.context.jid.clientResource=s,o.compressType=t.compressType,o.encryptType=t.encryptType,o.osType=t.osType,o.version=t.version,o.deviceName=a,o.resource=s,o.deviceUuid=c,o.auth="$t$"+e.access_token,o=i.encode(o).finish();var u=v.lookup("easemob.pb.MSync"),f=u.decode(n);if(f.version=t.version,f.guid=t.context.jid,f.auth="$t$"+e.access_token,f.command=3,f.deviceId=a,f.encryptType=t.encryptType,f.payload=o,f=u.encode(f).finish(),g(f,t),t.logOut=!1,t.offLineSendConnecting=!1,t.unSendMsgArr.length>0)for(var d in t.unSendMsgArr){var p=t.unSendMsgArr[d];t.sendMSync(p),delete t.unSendMsgArr[d]}},m.onclose=function(e){if(l.debug("onclose:",e),!t.logOut&&t.autoReconnectNumTotal<t.autoReconnectNumMax&&(t.autoReconnectNumTotal<=t.socketHost.length&&t.isHttpDNS||!t.isHttpDNS)){t.reconnect();var n={type:p.WEBIM_CONNCTION_DISCONNECTED,message:"websocket has been disconnected"};t.onError(n)}else t.logOut?(t.clear(),t.onClosed()):(n={type:p.WEBIM_CONNCTION_DISCONNECTED,message:"websocket has been disconnected"},t.onError(n),t.onClosed())},m.onmessage=function(e){try{for(var n=o.default.atob(e.data),r=[],i=0,s=n.length;i<s;++i)r.push(n.charCodeAt(i));var a=v.lookup("easemob.pb.MSync").decode(r);switch(l.debug("⬇MSync：",a),a.command){case 0:var u=v.lookup("easemob.pb.CommSyncDL");u=u.decode(a.payload);var d=new c.default(u.serverId.low,u.serverId.high,u.serverId.unsigned).toString(),h=new c.default(u.metaId.low,u.metaId.high,u.metaId.unsigned).toString();if(l.debug("⬇CommSyncDLMessage：",u),0!==u.metas.length)t._metapayload(u.metas,u.status,t),t._lastsession(u.nextKey,u.queue,t);else if(u.isLast){var m=f.default.checkArray(t._queues,u.queue);!1!==m&&t._queues.splice(m,1),t._queues.length>0&&(t._backqueue(t._queues[0],t),this.qTimer&&clearTimeout(this.qTimer))}else if(u.status&&0===u.status.errorCode){if(t._msgHash[h]){try{t._msgHash[h].success instanceof Function&&t._msgHash[h].success(h,d)}catch(e){t.onError({type:p.WEBIM_CONNCTION_CALLBACK_INNER_ERROR,message:"when executing success function error",data:e})}delete t._msgHash[h]}t.onReceivedMessage({id:h,mid:d})}else if(u.status&&15===u.status.errorCode)t.onMutedMessage({mid:d});else if(u.status&&1===u.status.errorCode){var g="";switch(u.status.reason){case"blocked":g=p.PERMISSION_DENIED;break;case"group not found":g=p.GROUP_NOT_EXIST;break;case"not in group or chatroom":g=p.GROUP_NOT_JOINED;break;case"exceed recall time limit":g=p.MESSAGE_RECALL_TIME_LIMIT;break;case"message recall disabled":g=p.SERVICE_NOT_ENABLED;break;case"not in group or chatroom white list":g=p.SERVICE_NOT_ALLOW_MESSAGING;break;default:g=p.SERVER_UNKNOWN_ERROR}t._msgHash[h].fail instanceof Function&&t._msgHash[h].fail({type:g,reason:u.status.reason?u.status.reason:"",data:{id:h,mid:d}})}else if(u.status&&7===u.status.errorCode&&"sensitive words"===u.status.reason)t._msgHash[h].fail instanceof Function&&t._msgHash[h].fail({type:p.MESSAGE_INCLUDE_ILLEGAL_CONTENT,data:{id:h,mid:d}});else if(t._msgHash[h]){try{t._msgHash[h].fail instanceof Function&&t._msgHash[h].fail({type:p.WEBIM_LOAD_MSG_ERROR,data:{errorCode:u.status&&u.status.errorCode,reason:u.status&&u.status.reason}})}catch(e){t.onError({type:p.WEBIM_CONNCTION_CALLBACK_INNER_ERROR,message:"when executing fail function error",data:e})}delete t._msgHash[h]}else t.onError({type:p.WEBIM_CONNCTION_CALLBACK_INNER_ERROR,message:"on message error"});break;case 1:var y=v.lookup("easemob.pb.CommUnreadDL");if(y=y.decode(a.payload),l.debug("⬇CommUnreadDLMessage：",y),0===y.unread.length);else for(i=0;i<y.unread.length;i++)t._backqueue(y.unread[i].queue,t);t._rebuild();break;case 2:var b=v.lookup("easemob.pb.CommNotice").decode(a.payload);if(l.debug("⬇noticeMessage：",b),!1!==f.default.checkArray(t._queues,b.queue))return;t._queues.push(b.queue),this.qTimer&&clearTimeout(this.qTimer),this.qTimer=setTimeout((function(){var e=b.queue;!1!==f.default.checkArray(t._queues,e)&&(t._backqueue(e,t),l.debug("⬇q:",e))}),2e4),1==t._queues.length&&t._backqueue(b.queue,t);break;case 3:t._receiveProvision(a,t),l.debug("⬇Provision：",a)}}catch(n){n.msg=e,t.onError({type:p.WEBIM_LOAD_MSG_ERROR,message:"decode message error",data:n})}},""!=(e.access_token||"")?t.context.accessToken=e.access_token:t.onError({type:p.WEBIM_CONNCTION_OPEN_USERGRID_ERROR,message:"token not assign error",data:e}))},a.default.logger=l,window.WebIM=a.default;var b=a.default;t.default=b},function(e,t,n){"use strict";(function(t){var r=n(108);e.exports=n(125)(r),"_sockjs_onload"in t&&setTimeout(t._sockjs_onload,1)}).call(this,n(2))},function(e,t,n){"use strict";e.exports=[n(109),n(114),n(73),n(74),n(42)(n(74)),n(78),n(42)(n(78)),n(79),n(121),n(42)(n(79)),n(122)]},function(e,t,n){"use strict";var r=n(15),i=n(9),o=n(1),s=n(6).EventEmitter,a=n(113);function c(e,t,n){if(!c.enabled())throw new Error("Transport created when disabled");s.call(this);var o=this,u=i.addPath(e,"/websocket");u="https"===u.slice(0,5)?"wss"+u.slice(5):"ws"+u.slice(4),this.url=u,this.ws=new a(this.url,[],n),this.ws.onmessage=function(e){e.data,o.emit("message",e.data)},this.unloadRef=r.unloadAdd((function(){o.ws.close()})),this.ws.onclose=function(e){e.code,e.reason,o.emit("close",e.code,e.reason),o._cleanup()},this.ws.onerror=function(e){o.emit("close",1006,"WebSocket connection broken"),o._cleanup()}}o(c,s),c.prototype.send=function(e){var t="["+e+"]";this.ws.send(t)},c.prototype.close=function(){var e=this.ws;this._cleanup(),e&&e.close()},c.prototype._cleanup=function(){var e=this.ws;e&&(e.onmessage=e.onclose=e.onerror=null),r.unloadDel(this.unloadRef),this.unloadRef=this.ws=null,this.removeAllListeners()},c.enabled=function(){return!!a},c.transportName="websocket",c.roundTrips=2,e.exports=c},function(e,t,n){"use strict";(function(t){t.crypto&&t.crypto.getRandomValues?e.exports.randomBytes=function(e){var n=new Uint8Array(e);return t.crypto.getRandomValues(n),n}:e.exports.randomBytes=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=Math.floor(256*Math.random());return t}}).call(this,n(2))},function(e,t,n){"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty;function i(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}t.stringify=function(e,t){t=t||"";var n,i,o=[];for(i in"string"!=typeof t&&(t="?"),e)if(r.call(e,i)){if((n=e[i])||null!=n&&!isNaN(n)||(n=""),i=encodeURIComponent(i),n=encodeURIComponent(n),null===i||null===n)continue;o.push(i+"="+n)}return o.length?t+o.join("&"):""},t.parse=function(e){for(var t,n=/([^=?&]+)=?([^&]*)/g,r={};t=n.exec(e);){var o=i(t[1]),s=i(t[2]);null===o||null===s||o in r||(r[o]=s)}return r}},function(e,t,n){"use strict";(function(t){var n=t.WebSocket||t.MozWebSocket;e.exports=n?function(e){return new n(e)}:void 0}).call(this,n(2))},function(e,t,n){"use strict";(function(t){var r=n(1),i=n(19),o=n(34),s=n(35),a=n(25),c=n(26);function u(e){if(!a.enabled&&!s.enabled)throw new Error("Transport created when disabled");i.call(this,e,"/xhr_streaming",o,s)}r(u,i),u.enabled=function(e){return!e.nullOrigin&&!c.isOpera()&&s.enabled},u.transportName="xhr-streaming",u.roundTrips=2,u.needBody=!!t.document,e.exports=u}).call(this,n(2))},function(e,t,n){"use strict";var r=n(1),i=n(6).EventEmitter;function o(e,t){i.call(this),this.sendBuffer=[],this.sender=t,this.url=e}r(o,i),o.prototype.send=function(e){this.sendBuffer.push(e),this.sendStop||this.sendSchedule()},o.prototype.sendScheduleWait=function(){var e,t=this;this.sendStop=function(){t.sendStop=null,clearTimeout(e)},e=setTimeout((function(){t.sendStop=null,t.sendSchedule()}),25)},o.prototype.sendSchedule=function(){this.sendBuffer.length;var e=this;if(this.sendBuffer.length>0){var t="["+this.sendBuffer.join(",")+"]";this.sendStop=this.sender(this.url,t,(function(t){e.sendStop=null,t?(e.emit("close",t.code||1006,"Sending error: "+t),e.close()):e.sendScheduleWait()})),this.sendBuffer=[]}},o.prototype._cleanup=function(){this.removeAllListeners()},o.prototype.close=function(){this._cleanup(),this.sendStop&&(this.sendStop(),this.sendStop=null)},e.exports=o},function(e,t,n){"use strict";var r=n(1),i=n(6).EventEmitter;function o(e,t,n){i.call(this),this.Receiver=e,this.receiveUrl=t,this.AjaxObject=n,this._scheduleReceiver()}r(o,i),o.prototype._scheduleReceiver=function(){var e=this,t=this.poll=new this.Receiver(this.receiveUrl,this.AjaxObject);t.on("message",(function(t){e.emit("message",t)})),t.once("close",(function(n,r){e.pollIsClosing,e.poll=t=null,e.pollIsClosing||("network"===r?e._scheduleReceiver():(e.emit("close",n||1006,r),e.removeAllListeners()))}))},o.prototype.abort=function(){this.removeAllListeners(),this.pollIsClosing=!0,this.poll&&this.poll.abort()},e.exports=o},function(e,t,n){"use strict";var r=n(1),i=n(6).EventEmitter,o=n(75);function s(e){i.call(this);var t=this,n=this.es=new o(e);n.onmessage=function(e){e.data,t.emit("message",decodeURI(e.data))},n.onerror=function(e){n.readyState;var r=2!==n.readyState?"network":"permanent";t._cleanup(),t._close(r)}}r(s,i),s.prototype.abort=function(){this._cleanup(),this._close("user")},s.prototype._cleanup=function(){var e=this.es;e&&(e.onmessage=e.onerror=null,e.close(),this.es=null)},s.prototype._close=function(e){var t=this;setTimeout((function(){t.emit("close",null,e),t.removeAllListeners()}),200)},e.exports=s},function(e,t,n){"use strict";e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){(function(t){e.exports=t}).call(this,{})},function(e,t,n){"use strict";(function(t){var r=n(1),i=n(27),o=n(9),s=n(6).EventEmitter,a=n(18);function c(e){s.call(this);var n=this;i.polluteGlobalNamespace(),this.id="a"+a.string(6),e=o.addQuery(e,"c="+decodeURIComponent(i.WPrefix+"."+this.id)),c.htmlfileEnabled;var r=c.htmlfileEnabled?i.createHtmlfile:i.createIframe;t[i.WPrefix][this.id]={start:function(){n.iframeObj.loaded()},message:function(e){n.emit("message",e)},stop:function(){n._cleanup(),n._close("network")}},this.iframeObj=r(e,(function(){n._cleanup(),n._close("permanent")}))}r(c,s),c.prototype.abort=function(){this._cleanup(),this._close("user")},c.prototype._cleanup=function(){this.iframeObj&&(this.iframeObj.cleanup(),this.iframeObj=null),delete t[i.WPrefix][this.id]},c.prototype._close=function(e){this.emit("close",null,e),this.removeAllListeners()},c.htmlfileEnabled=!1;var u=["Active"].concat("Object").join("X");if(u in t)try{c.htmlfileEnabled=!!new t[u]("htmlfile")}catch(e){}c.enabled=c.htmlfileEnabled||i.iframeEnabled,e.exports=c}).call(this,n(2))},function(e,t,n){"use strict";var r=n(1),i=n(19),o=n(73),s=n(34),a=n(41);function c(e){if(!a.enabled)throw new Error("Transport created when disabled");i.call(this,e,"/xhr",s,a)}r(c,i),c.enabled=o.enabled,c.transportName="xdr-polling",c.roundTrips=2,e.exports=c},function(e,t,n){"use strict";(function(t){var r=n(1),i=n(71),o=n(123),s=n(124);function a(e){if(!a.enabled())throw new Error("Transport created when disabled");i.call(this,e,"/jsonp",s,o)}r(a,i),a.enabled=function(){return!!t.document},a.transportName="jsonp-polling",a.roundTrips=1,a.needBody=!0,e.exports=a}).call(this,n(2))},function(e,t,n){"use strict";(function(t){var r=n(27),i=n(18),o=n(26),s=n(9),a=n(1),c=n(6).EventEmitter;function u(e){var n=this;c.call(this),r.polluteGlobalNamespace(),this.id="a"+i.string(6);var o=s.addQuery(e,"c="+encodeURIComponent(r.WPrefix+"."+this.id));t[r.WPrefix][this.id]=this._callback.bind(this),this._createScript(o),this.timeoutId=setTimeout((function(){n._abort(new Error("JSONP script loaded abnormally (timeout)"))}),u.timeout)}a(u,c),u.prototype.abort=function(){if(t[r.WPrefix][this.id]){var e=new Error("JSONP user aborted read");e.code=1e3,this._abort(e)}},u.timeout=35e3,u.scriptErrorTimeout=1e3,u.prototype._callback=function(e){this._cleanup(),this.aborting||(e&&this.emit("message",e),this.emit("close",null,"network"),this.removeAllListeners())},u.prototype._abort=function(e){this._cleanup(),this.aborting=!0,this.emit("close",e.code,e.message),this.removeAllListeners()},u.prototype._cleanup=function(){if(clearTimeout(this.timeoutId),this.script2&&(this.script2.parentNode.removeChild(this.script2),this.script2=null),this.script){var e=this.script;e.parentNode.removeChild(e),e.onreadystatechange=e.onerror=e.onload=e.onclick=null,this.script=null}delete t[r.WPrefix][this.id]},u.prototype._scriptError=function(){var e=this;this.errorTimer||(this.errorTimer=setTimeout((function(){e.loadedOkay||e._abort(new Error("JSONP script loaded abnormally (onerror)"))}),u.scriptErrorTimeout))},u.prototype._createScript=function(e){var n,r=this,s=this.script=t.document.createElement("script");if(s.id="a"+i.string(8),s.src=e,s.type="text/javascript",s.charset="UTF-8",s.onerror=this._scriptError.bind(this),s.onload=function(){r._abort(new Error("JSONP script loaded abnormally (onload)"))},s.onreadystatechange=function(){if(s.readyState,/loaded|closed/.test(s.readyState)){if(s&&s.htmlFor&&s.onclick){r.loadedOkay=!0;try{s.onclick()}catch(e){}}s&&r._abort(new Error("JSONP script loaded abnormally (onreadystatechange)"))}},void 0===s.async&&t.document.attachEvent)if(o.isOpera())(n=this.script2=t.document.createElement("script")).text="try{var a = document.getElementById('"+s.id+"'); if(a)a.onerror();}catch(x){};",s.async=n.async=!1;else{try{s.htmlFor=s.id,s.event="onclick"}catch(e){}s.async=!0}void 0!==s.async&&(s.async=!0);var a=t.document.getElementsByTagName("head")[0];a.insertBefore(s,a.firstChild),n&&a.insertBefore(n,a.firstChild)},e.exports=u}).call(this,n(2))},function(e,t,n){"use strict";(function(t){var r,i,o=n(18),s=n(9);e.exports=function(e,n,a){r||((r=t.document.createElement("form")).style.display="none",r.style.position="absolute",r.method="POST",r.enctype="application/x-www-form-urlencoded",r.acceptCharset="UTF-8",(i=t.document.createElement("textarea")).name="d",r.appendChild(i),t.document.body.appendChild(r));var c="a"+o.string(8);r.target=c,r.action=s.addQuery(s.addPath(e,"/jsonp_send"),"i="+c);var u=function(e){try{return t.document.createElement('<iframe name="'+e+'">')}catch(r){var n=t.document.createElement("iframe");return n.name=e,n}}(c);u.id=c,u.style.display="none",r.appendChild(u);try{i.value=n}catch(e){}r.submit();var f=function(e){u.onerror&&(u.onreadystatechange=u.onerror=u.onload=null,setTimeout((function(){u.parentNode.removeChild(u),u=null}),500),i.value="",a(e))};return u.onerror=function(){f()},u.onload=function(){f()},u.onreadystatechange=function(e){u.readyState,"complete"===u.readyState&&f()},function(){f(new Error("Aborted"))}}}).call(this,n(2))},function(e,t,n){"use strict";(function(t){n(126);var r,i=n(69),o=n(1),s=n(12),a=n(18),c=n(127),u=n(9),f=n(15),d=n(128),l=n(43),p=n(26),h=n(129),m=n(44),v=n(70),g=n(80),y=n(130),b=n(131),_=n(132);function w(e,t,n){if(!(this instanceof w))return new w(e,t,n);if(arguments.length<1)throw new TypeError("Failed to construct 'SockJS: 1 argument required, but only 0 present");v.call(this),this.readyState=w.CONNECTING,this.extensions="",this.protocol="",(n=n||{}).protocols_whitelist&&h.warn("'protocols_whitelist' is DEPRECATED. Use 'transports' instead."),this._transportsWhitelist=n.transports,this._transportOptions=n.transportOptions||{};var r=n.sessionId||8;if("function"==typeof r)this._generateSessionId=r;else{if("number"!=typeof r)throw new TypeError("If sessionId is used in the options, it needs to be a number or a function.");this._generateSessionId=function(){return a.string(r)}}this._server=n.server||a.numberString(1e3);var o=new i(e);if(!o.host||!o.protocol)throw new SyntaxError("The URL '"+e+"' is invalid");if(o.hash)throw new SyntaxError("The URL must not contain a fragment");if("http:"!==o.protocol&&"https:"!==o.protocol)throw new SyntaxError("The URL's scheme must be either 'http:' or 'https:'. '"+o.protocol+"' is not allowed.");var s="https:"===o.protocol;if("https:"===g.protocol&&!s)throw new Error("SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS");t?Array.isArray(t)||(t=[t]):t=[];var c=t.sort();c.forEach((function(e,t){if(!e)throw new SyntaxError("The protocols entry '"+e+"' is invalid.");if(t<c.length-1&&e===c[t+1])throw new SyntaxError("The protocols entry '"+e+"' is duplicated.")}));var f=u.getOrigin(g.href);this._origin=f?f.toLowerCase():null,o.set("pathname",o.pathname.replace(/\/+$/,"")),this.url=o.href,this.url,this._urlInfo={nullOrigin:!p.hasDomain(),sameOrigin:u.isOriginEqual(this.url,g.href),sameScheme:u.isSchemeEqual(this.url,g.href)},this._ir=new _(this.url,this._urlInfo),this._ir.once("finish",this._receiveInfo.bind(this))}function S(e){return 1e3===e||e>=3e3&&e<=4999}o(w,v),w.prototype.close=function(e,t){if(e&&!S(e))throw new Error("InvalidAccessError: Invalid code");if(t&&t.length>123)throw new SyntaxError("reason argument has an invalid length");this.readyState!==w.CLOSING&&this.readyState!==w.CLOSED&&this._close(e||1e3,t||"Normal closure",!0)},w.prototype.send=function(e){if("string"!=typeof e&&(e=""+e),this.readyState===w.CONNECTING)throw new Error("InvalidStateError: The connection has not been established yet");this.readyState===w.OPEN&&this._transport.send(c.quote(e))},w.version=n(77),w.CONNECTING=0,w.OPEN=1,w.CLOSING=2,w.CLOSED=3,w.prototype._receiveInfo=function(e,t){if(this._ir=null,e){this._rto=this.countRTO(t),this._transUrl=e.base_url?e.base_url:this.url,e=l.extend(e,this._urlInfo);var n=r.filterToEnabled(this._transportsWhitelist,e);this._transports=n.main,this._transports.length,this._connect()}else this._close(1002,"Cannot connect to server")},w.prototype._connect=function(){for(var e=this._transports.shift();e;e=this._transports.shift()){if(e.transportName,e.needBody&&(!t.document.body||void 0!==t.document.readyState&&"complete"!==t.document.readyState&&"interactive"!==t.document.readyState))return this._transports.unshift(e),void f.attachEvent("load",this._connect.bind(this));var n=this._rto*e.roundTrips||5e3;this._transportTimeoutId=setTimeout(this._transportTimeout.bind(this),n);var r=u.addPath(this._transUrl,"/"+this._server+"/"+this._generateSessionId()),i=this._transportOptions[e.transportName],o=new e(r,this._transUrl,i);return o.on("message",this._transportMessage.bind(this)),o.once("close",this._transportClose.bind(this)),o.transportName=e.transportName,void(this._transport=o)}this._close(2e3,"All transports failed",!1)},w.prototype._transportTimeout=function(){this.readyState===w.CONNECTING&&(this._transport&&this._transport.close(),this._transportClose(2007,"Transport timed out"))},w.prototype._transportMessage=function(e){var t,n=this,r=e.slice(0,1),i=e.slice(1);switch(r){case"o":return void this._open();case"h":return this.dispatchEvent(new m("heartbeat")),void this.transport}if(i)try{t=s.parse(i)}catch(e){}if(void 0!==t)switch(r){case"a":Array.isArray(t)&&t.forEach((function(e){n.transport,n.dispatchEvent(new b(e))}));break;case"m":this.transport,this.dispatchEvent(new b(t));break;case"c":Array.isArray(t)&&2===t.length&&this._close(t[0],t[1],!0)}},w.prototype._transportClose=function(e,t){this.transport,this._transport&&(this._transport.removeAllListeners(),this._transport=null,this.transport=null),S(e)||2e3===e||this.readyState!==w.CONNECTING?this._close(e,t):this._connect()},w.prototype._open=function(){this._transport.transportName,this.readyState,this.readyState===w.CONNECTING?(this._transportTimeoutId&&(clearTimeout(this._transportTimeoutId),this._transportTimeoutId=null),this.readyState=w.OPEN,this.transport=this._transport.transportName,this.dispatchEvent(new m("open")),this.transport):this._close(1006,"Server lost session")},w.prototype._close=function(e,t,n){this.transport,this.readyState;var r=!1;if(this._ir&&(r=!0,this._ir.close(),this._ir=null),this._transport&&(this._transport.close(),this._transport=null,this.transport=null),this.readyState===w.CLOSED)throw new Error("InvalidStateError: SockJS has already been closed");this.readyState=w.CLOSING,setTimeout(function(){this.readyState=w.CLOSED,r&&this.dispatchEvent(new m("error"));var i=new y("close");i.wasClean=n||!1,i.code=e||1e3,i.reason=t,this.dispatchEvent(i),this.onmessage=this.onclose=this.onerror=null}.bind(this),0)},w.prototype.countRTO=function(e){return e>100?4*e:300+e},e.exports=function(e){return r=d(e),n(135)(w,e),w}}).call(this,n(2))},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i,o=Array.prototype,s=Object.prototype,a=Function.prototype,c=String.prototype,u=o.slice,f=s.toString,d=function(e){return"[object Function]"===s.toString.call(e)},l=function(e){return"[object String]"===f.call(e)},p=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(e){return!1}}();i=p?function(e,t,n,r){!r&&t in e||Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:!0,value:n})}:function(e,t,n,r){!r&&t in e||(e[t]=n)};var h=function(e,t,n){for(var r in t)s.hasOwnProperty.call(t,r)&&i(e,r,t[r],n)},m=function(e){if(null==e)throw new TypeError("can't convert "+e+" to object");return Object(e)};function v(e){var t=+e;return t!=t?t=0:0!==t&&t!==1/0&&t!==-1/0&&(t=(t>0||-1)*Math.floor(Math.abs(t))),t}function g(){}h(a,{bind:function(e){var t=this;if(!d(t))throw new TypeError("Function.prototype.bind called on incompatible "+t);for(var n=u.call(arguments,1),r=function(){if(this instanceof a){var r=t.apply(this,n.concat(u.call(arguments)));return Object(r)===r?r:this}return t.apply(e,n.concat(u.call(arguments)))},i=Math.max(0,t.length-n.length),o=[],s=0;s<i;s++)o.push("$"+s);var a=Function("binder","return function ("+o.join(",")+"){ return binder.apply(this, arguments); }")(r);return t.prototype&&(g.prototype=t.prototype,a.prototype=new g,g.prototype=null),a}}),h(Array,{isArray:function(e){return"[object Array]"===f.call(e)}});var y,b,_,w=Object("a"),S="a"!==w[0]||!(0 in w);h(o,{forEach:function(e){var t=m(this),n=S&&l(this)?this.split(""):t,r=arguments[1],i=-1,o=n.length>>>0;if(!d(e))throw new TypeError;for(;++i<o;)i in n&&e.call(r,n[i],i,t)}},(y=o.forEach,b=!0,_=!0,y&&(y.call("foo",(function(e,t,n){"object"!==r(n)&&(b=!1)})),y.call([1],(function(){_="string"==typeof this}),"x")),!(y&&b&&_)));var x=Array.prototype.indexOf&&-1!==[0,1].indexOf(1,2);h(o,{indexOf:function(e){var t=S&&l(this)?this.split(""):m(this),n=t.length>>>0;if(!n)return-1;var r=0;for(arguments.length>1&&(r=v(arguments[1])),r=r>=0?r:Math.max(0,n+r);r<n;r++)if(r in t&&t[r]===e)return r;return-1}},x);var C,E=c.split;2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||4!=="test".split(/(?:)/,-1).length||"".split(/.?/).length||".".split(/()()/).length>1?(C=void 0===/()??/.exec("")[1],c.split=function(e,t){var n=this;if(void 0===e&&0===t)return[];if("[object RegExp]"!==f.call(e))return E.call(this,e,t);var r,i,s,a,c=[],u=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.extended?"x":"")+(e.sticky?"y":""),d=0;for(e=new RegExp(e.source,u+"g"),n+="",C||(r=new RegExp("^"+e.source+"$(?!\\s)",u)),t=void 0===t?-1>>>0:t>>>0;(i=e.exec(n))&&!((s=i.index+i[0].length)>d&&(c.push(n.slice(d,i.index)),!C&&i.length>1&&i[0].replace(r,(function(){for(var e=1;e<arguments.length-2;e++)void 0===arguments[e]&&(i[e]=void 0)})),i.length>1&&i.index<n.length&&o.push.apply(c,i.slice(1)),a=i[0].length,d=s,c.length>=t));)e.lastIndex===i.index&&e.lastIndex++;return d===n.length?!a&&e.test("")||c.push(""):c.push(n.slice(d)),c.length>t?c.slice(0,t):c}):"0".split(void 0,0).length&&(c.split=function(e,t){return void 0===e&&0===t?[]:E.call(this,e,t)});var I=c.substr,T="".substr&&"b"!=="0b".substr(-1);h(c,{substr:function(e,t){return I.call(this,e<0&&(e=this.length+e)<0?0:e,t)}},T)},function(e,t,n){"use strict";var r,i=n(12),o=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g;e.exports={quote:function(e){var t=i.stringify(e);return o.lastIndex=0,o.test(t)?(r||(r=function(e){var t,n={},r=[];for(t=0;t<65536;t++)r.push(String.fromCharCode(t));return e.lastIndex=0,r.join("").replace(e,(function(e){return n[e]="\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4),""})),e.lastIndex=0,n}(o)),t.replace(o,(function(e){return r[e]}))):t}}},function(e,t,n){"use strict";e.exports=function(e){return{filterToEnabled:function(t,n){var r={main:[],facade:[]};return t?"string"==typeof t&&(t=[t]):t=[],e.forEach((function(e){e&&("websocket"===e.transportName&&!1===n.websocket||(t.length&&-1===t.indexOf(e.transportName)?e.transportName:e.enabled(n)?(e.transportName,r.main.push(e),e.facadeTransport&&r.facade.push(e.facadeTransport)):e.transportName))})),r}}}},function(e,t,n){"use strict";(function(t){var n={};["log","debug","warn"].forEach((function(e){var r;try{r=t.console&&t.console[e]&&t.console[e].apply}catch(e){}n[e]=r?function(){return t.console[e].apply(t.console,arguments)}:"log"===e?function(){}:n.log})),e.exports=n}).call(this,n(2))},function(e,t,n){"use strict";var r=n(1),i=n(44);function o(){i.call(this),this.initEvent("close",!1,!1),this.wasClean=!1,this.code=0,this.reason=""}r(o,i),e.exports=o},function(e,t,n){"use strict";var r=n(1),i=n(44);function o(e){i.call(this),this.initEvent("message",!1,!1),this.data=e}r(o,i),e.exports=o},function(e,t,n){"use strict";var r=n(6).EventEmitter,i=n(1),o=n(9),s=n(41),a=n(35),c=n(25),u=n(133),f=n(134),d=n(82);function l(e,t){var n=this;r.call(this),setTimeout((function(){n.doXhr(e,t)}),0)}i(l,r),l._getReceiver=function(e,t,n){return n.sameOrigin?new d(t,c):a.enabled?new d(t,a):s.enabled&&n.sameScheme?new d(t,s):f.enabled()?new f(e,t):new d(t,u)},l.prototype.doXhr=function(e,t){var n=this,r=o.addPath(e,"/info");this.xo=l._getReceiver(e,r,t),this.timeoutRef=setTimeout((function(){n._cleanup(!1),n.emit("finish")}),l.timeout),this.xo.once("finish",(function(e,t){n._cleanup(!0),n.emit("finish",e,t)}))},l.prototype._cleanup=function(e){clearTimeout(this.timeoutRef),this.timeoutRef=null,!e&&this.xo&&this.xo.close(),this.xo=null},l.prototype.close=function(){this.removeAllListeners(),this._cleanup(!1)},l.timeout=8e3,e.exports=l},function(e,t,n){"use strict";var r=n(6).EventEmitter;function i(){var e=this;r.call(this),this.to=setTimeout((function(){e.emit("finish",200,"{}")}),i.timeout)}n(1)(i,r),i.prototype.close=function(){clearTimeout(this.to)},i.timeout=2e3,e.exports=i},function(e,t,n){"use strict";(function(t){var r=n(6).EventEmitter,i=n(1),o=n(12),s=n(15),a=n(76),c=n(81);function u(e,n){var i=this;r.call(this);var u=function(){var t=i.ifr=new a(c.transportName,n,e);t.once("message",(function(e){if(e){var t;try{t=o.parse(e)}catch(e){return i.emit("finish"),void i.close()}var n=t[0],r=t[1];i.emit("finish",n,r)}i.close()})),t.once("close",(function(){i.emit("finish"),i.close()}))};t.document.body?u():s.attachEvent("load",u)}i(u,r),u.enabled=function(){return a.enabled()},u.prototype.close=function(){this.ifr&&this.ifr.close(),this.removeAllListeners(),this.ifr=null},e.exports=u}).call(this,n(2))},function(e,t,n){"use strict";var r=n(9),i=n(15),o=n(12),s=n(136),a=n(81),c=n(27),u=n(80);e.exports=function(e,t){var n,f={};t.forEach((function(e){e.facadeTransport&&(f[e.facadeTransport.transportName]=e.facadeTransport)})),f[a.transportName]=a,e.bootstrap_iframe=function(){var t;c.currentWindowId=u.hash.slice(1),i.attachEvent("message",(function(i){if(i.source===parent&&(void 0===n&&(n=i.origin),i.origin===n)){var a;try{a=o.parse(i.data)}catch(e){return void i.data}if(a.windowId===c.currentWindowId)switch(a.type){case"s":var d;try{d=o.parse(a.data)}catch(e){a.data;break}var l=d[0],p=d[1],h=d[2],m=d[3];if(l!==e.version)throw new Error('Incompatible SockJS! Main site uses: "'+l+'", the iframe: "'+e.version+'".');if(!r.isOriginEqual(h,u.href)||!r.isOriginEqual(m,u.href))throw new Error("Can't connect to different domain from within an iframe. ("+u.href+", "+h+", "+m+")");t=new s(new f[p](h,m));break;case"m":t._send(a.data);break;case"c":t&&t._close(),t=null}}})),c.postMessage("s")}}},function(e,t,n){"use strict";var r=n(12),i=n(27);function o(e){this._transport=e,e.on("message",this._transportMessage.bind(this)),e.on("close",this._transportClose.bind(this))}o.prototype._transportClose=function(e,t){i.postMessage("c",r.stringify([e,t]))},o.prototype._transportMessage=function(e){i.postMessage("t",e)},o.prototype._send=function(e){this._transport.send(e)},o.prototype._close=function(){this._transport.close(),this._transport.removeAllListeners()},e.exports=o},function(e,t,n){"use strict";e.exports=n(138)},function(e,t,n){"use strict";var r=e.exports=n(139);r.build="full",r.tokenize=n(92),r.parse=n(153),r.common=n(154),r.Root._configure(r.Type,r.parse,r.common)},function(e,t,n){"use strict";var r=e.exports=n(140);r.build="light",r.load=function(e,t,n){return"function"==typeof t?(n=t,t=new r.Root):t||(t=new r.Root),t.load(e,n)},r.loadSync=function(e,t){return t||(t=new r.Root),t.loadSync(e)},r.encoder=n(87),r.decoder=n(88),r.verifier=n(89),r.converter=n(90),r.ReflectionObject=n(20),r.Namespace=n(28),r.Root=n(52),r.Enum=n(11),r.Type=n(47),r.Field=n(17),r.OneOf=n(37),r.MapField=n(48),r.Service=n(49),r.Method=n(50),r.Message=n(51),r.wrappers=n(91),r.types=n(21),r.util=n(4),r.ReflectionObject._configure(r.Root),r.Namespace._configure(r.Type,r.Service,r.Enum),r.Root._configure(r.Type),r.Field._configure(r.Type)},function(e,t,n){"use strict";var r=t;function i(){r.Reader._configure(r.BufferReader),r.util._configure()}r.build="minimal",r.Writer=n(45),r.BufferWriter=n(147),r.Reader=n(46),r.BufferReader=n(148),r.util=n(13),r.rpc=n(85),r.roots=n(86),r.configure=i,r.Writer._configure(r.BufferWriter),i()},function(e,t,n){"use strict";var r=t;r.length=function(e){var t=e.length;if(!t)return 0;for(var n=0;--t%4>1&&"="===e.charAt(t);)++n;return Math.ceil(3*e.length)/4-n};for(var i=new Array(64),o=new Array(123),s=0;s<64;)o[i[s]=s<26?s+65:s<52?s+71:s<62?s-4:s-59|43]=s++;r.encode=function(e,t,n){for(var r,o=null,s=[],a=0,c=0;t<n;){var u=e[t++];switch(c){case 0:s[a++]=i[u>>2],r=(3&u)<<4,c=1;break;case 1:s[a++]=i[r|u>>4],r=(15&u)<<2,c=2;break;case 2:s[a++]=i[r|u>>6],s[a++]=i[63&u],c=0}a>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,s)),a=0)}return c&&(s[a++]=i[r],s[a++]=61,1===c&&(s[a++]=61)),o?(a&&o.push(String.fromCharCode.apply(String,s.slice(0,a))),o.join("")):String.fromCharCode.apply(String,s.slice(0,a))},r.decode=function(e,t,n){for(var r,i=n,s=0,a=0;a<e.length;){var c=e.charCodeAt(a++);if(61===c&&s>1)break;if(void 0===(c=o[c]))throw Error("invalid encoding");switch(s){case 0:r=c,s=1;break;case 1:t[n++]=r<<2|(48&c)>>4,r=c,s=2;break;case 2:t[n++]=(15&r)<<4|(60&c)>>2,r=c,s=3;break;case 3:t[n++]=(3&r)<<6|c,s=0}}if(1===s)throw Error("invalid encoding");return n-i},r.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},function(e,t,n){"use strict";function r(){this._listeners={}}e.exports=r,r.prototype.on=function(e,t,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:n||this}),this},r.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var n=this._listeners[e],r=0;r<n.length;)n[r].fn===t?n.splice(r,1):++r;return this},r.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var n=[],r=1;r<arguments.length;)n.push(arguments[r++]);for(r=0;r<t.length;)t[r].fn.apply(t[r++].ctx,n)}return this}},function(e,t,n){"use strict";function r(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),n=new Uint8Array(t.buffer),r=128===n[3];function i(e,r,i){t[0]=e,r[i]=n[0],r[i+1]=n[1],r[i+2]=n[2],r[i+3]=n[3]}function o(e,r,i){t[0]=e,r[i]=n[3],r[i+1]=n[2],r[i+2]=n[1],r[i+3]=n[0]}function s(e,r){return n[0]=e[r],n[1]=e[r+1],n[2]=e[r+2],n[3]=e[r+3],t[0]}function a(e,r){return n[3]=e[r],n[2]=e[r+1],n[1]=e[r+2],n[0]=e[r+3],t[0]}e.writeFloatLE=r?i:o,e.writeFloatBE=r?o:i,e.readFloatLE=r?s:a,e.readFloatBE=r?a:s}():function(){function t(e,t,n,r){var i=t<0?1:0;if(i&&(t=-t),0===t)e(1/t>0?0:2147483648,n,r);else if(isNaN(t))e(2143289344,n,r);else if(t>34028234663852886e22)e((i<<31|2139095040)>>>0,n,r);else if(t<11754943508222875e-54)e((i<<31|Math.round(t/1401298464324817e-60))>>>0,n,r);else{var o=Math.floor(Math.log(t)/Math.LN2);e((i<<31|o+127<<23|8388607&Math.round(t*Math.pow(2,-o)*8388608))>>>0,n,r)}}function n(e,t,n){var r=e(t,n),i=2*(r>>31)+1,o=r>>>23&255,s=8388607&r;return 255===o?s?NaN:i*(1/0):0===o?1401298464324817e-60*i*s:i*Math.pow(2,o-150)*(s+8388608)}e.writeFloatLE=t.bind(null,i),e.writeFloatBE=t.bind(null,o),e.readFloatLE=n.bind(null,s),e.readFloatBE=n.bind(null,a)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),n=new Uint8Array(t.buffer),r=128===n[7];function i(e,r,i){t[0]=e,r[i]=n[0],r[i+1]=n[1],r[i+2]=n[2],r[i+3]=n[3],r[i+4]=n[4],r[i+5]=n[5],r[i+6]=n[6],r[i+7]=n[7]}function o(e,r,i){t[0]=e,r[i]=n[7],r[i+1]=n[6],r[i+2]=n[5],r[i+3]=n[4],r[i+4]=n[3],r[i+5]=n[2],r[i+6]=n[1],r[i+7]=n[0]}function s(e,r){return n[0]=e[r],n[1]=e[r+1],n[2]=e[r+2],n[3]=e[r+3],n[4]=e[r+4],n[5]=e[r+5],n[6]=e[r+6],n[7]=e[r+7],t[0]}function a(e,r){return n[7]=e[r],n[6]=e[r+1],n[5]=e[r+2],n[4]=e[r+3],n[3]=e[r+4],n[2]=e[r+5],n[1]=e[r+6],n[0]=e[r+7],t[0]}e.writeDoubleLE=r?i:o,e.writeDoubleBE=r?o:i,e.readDoubleLE=r?s:a,e.readDoubleBE=r?a:s}():function(){function t(e,t,n,r,i,o){var s=r<0?1:0;if(s&&(r=-r),0===r)e(0,i,o+t),e(1/r>0?0:2147483648,i,o+n);else if(isNaN(r))e(0,i,o+t),e(2146959360,i,o+n);else if(r>17976931348623157e292)e(0,i,o+t),e((s<<31|2146435072)>>>0,i,o+n);else{var a;if(r<22250738585072014e-324)e((a=r/5e-324)>>>0,i,o+t),e((s<<31|a/4294967296)>>>0,i,o+n);else{var c=Math.floor(Math.log(r)/Math.LN2);1024===c&&(c=1023),e(4503599627370496*(a=r*Math.pow(2,-c))>>>0,i,o+t),e((s<<31|c+1023<<20|1048576*a&1048575)>>>0,i,o+n)}}}function n(e,t,n,r,i){var o=e(r,i+t),s=e(r,i+n),a=2*(s>>31)+1,c=s>>>20&2047,u=4294967296*(1048575&s)+o;return 2047===c?u?NaN:a*(1/0):0===c?5e-324*a*u:a*Math.pow(2,c-1075)*(u+4503599627370496)}e.writeDoubleLE=t.bind(null,i,0,4),e.writeDoubleBE=t.bind(null,o,4,0),e.readDoubleLE=n.bind(null,s,0,4),e.readDoubleBE=n.bind(null,a,4,0)}(),e}function i(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}function o(e,t,n){t[n]=e>>>24,t[n+1]=e>>>16&255,t[n+2]=e>>>8&255,t[n+3]=255&e}function s(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function a(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=r(r)},function(e,t,n){"use strict";var r=t;r.length=function(e){for(var t=0,n=0,r=0;r<e.length;++r)(n=e.charCodeAt(r))<128?t+=1:n<2048?t+=2:55296==(64512&n)&&56320==(64512&e.charCodeAt(r+1))?(++r,t+=4):t+=3;return t},r.read=function(e,t,n){if(n-t<1)return"";for(var r,i=null,o=[],s=0;t<n;)(r=e[t++])<128?o[s++]=r:r>191&&r<224?o[s++]=(31&r)<<6|63&e[t++]:r>239&&r<365?(r=((7&r)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,o[s++]=55296+(r>>10),o[s++]=56320+(1023&r)):o[s++]=(15&r)<<12|(63&e[t++])<<6|63&e[t++],s>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,o)),s=0);return i?(s&&i.push(String.fromCharCode.apply(String,o.slice(0,s))),i.join("")):String.fromCharCode.apply(String,o.slice(0,s))},r.write=function(e,t,n){for(var r,i,o=n,s=0;s<e.length;++s)(r=e.charCodeAt(s))<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296==(64512&r)&&56320==(64512&(i=e.charCodeAt(s+1)))?(r=65536+((1023&r)<<10)+(1023&i),++s,t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128);return n-o}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r=n||8192,i=r>>>1,o=null,s=r;return function(n){if(n<1||n>i)return e(n);s+n>r&&(o=e(r),s=0);var a=t.call(o,s,s+=n);return 7&s&&(s=1+(7|s)),a}}},function(e,t,n){"use strict";e.exports=i;var r=n(13);function i(e,t){this.lo=e>>>0,this.hi=t>>>0}var o=i.zero=new i(0,0);o.toNumber=function(){return 0},o.zzEncode=o.zzDecode=function(){return this},o.length=function(){return 1};var s=i.zeroHash="\0\0\0\0\0\0\0\0";i.fromNumber=function(e){if(0===e)return o;var t=e<0;t&&(e=-e);var n=e>>>0,r=(e-n)/4294967296>>>0;return t&&(r=~r>>>0,n=~n>>>0,++n>4294967295&&(n=0,++r>4294967295&&(r=0))),new i(n,r)},i.from=function(e){if("number"==typeof e)return i.fromNumber(e);if(r.isString(e)){if(!r.Long)return i.fromNumber(parseInt(e,10));e=r.Long.fromString(e)}return e.low||e.high?new i(e.low>>>0,e.high>>>0):o},i.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,n=~this.hi>>>0;return t||(n=n+1>>>0),-(t+4294967296*n)}return this.lo+4294967296*this.hi},i.prototype.toLong=function(e){return r.Long?new r.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var a=String.prototype.charCodeAt;i.fromHash=function(e){return e===s?o:new i((a.call(e,0)|a.call(e,1)<<8|a.call(e,2)<<16|a.call(e,3)<<24)>>>0,(a.call(e,4)|a.call(e,5)<<8|a.call(e,6)<<16|a.call(e,7)<<24)>>>0)},i.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},i.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},i.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},i.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}},function(e,t,n){"use strict";e.exports=s;var r=n(45);(s.prototype=Object.create(r.prototype)).constructor=s;var i=n(13),o=i.Buffer;function s(){r.call(this)}s.alloc=function(e){return(s.alloc=i._Buffer_allocUnsafe)(e)};var a=o&&o.prototype instanceof Uint8Array&&"set"===o.prototype.set.name?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var r=0;r<e.length;)t[n++]=e[r++]};function c(e,t,n){e.length<40?i.utf8.write(e,t,n):t.utf8Write(e,n)}s.prototype.bytes=function(e){i.isString(e)&&(e=i._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(a,t,e),this},s.prototype.string=function(e){var t=o.byteLength(e);return this.uint32(t),t&&this._push(c,t,e),this}},function(e,t,n){"use strict";e.exports=o;var r=n(46);(o.prototype=Object.create(r.prototype)).constructor=o;var i=n(13);function o(e){r.call(this,e)}i.Buffer&&(o.prototype._slice=i.Buffer.prototype.slice),o.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len))}},function(e,t,n){"use strict";e.exports=i;var r=n(13);function i(e,t,n){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(n)}(i.prototype=Object.create(r.EventEmitter.prototype)).constructor=i,i.prototype.rpcCall=function e(t,n,i,o,s){if(!o)throw TypeError("request must be specified");var a=this;if(!s)return r.asPromise(e,a,t,n,i,o);if(a.rpcImpl)try{return a.rpcImpl(t,n[a.requestDelimited?"encodeDelimited":"encode"](o).finish(),(function(e,n){if(e)return a.emit("error",e,t),s(e);if(null!==n){if(!(n instanceof i))try{n=i[a.responseDelimited?"decodeDelimited":"decode"](n)}catch(e){return a.emit("error",e,t),s(e)}return a.emit("data",n,t),s(null,n)}a.end(!0)}))}catch(e){return a.emit("error",e,t),void setTimeout((function(){s(e)}),0)}else setTimeout((function(){s(Error("already ended"))}),0)},i.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},function(e,t,n){"use strict";function r(e,t){"string"==typeof e&&(t=e,e=void 0);var n=[];function i(e){if("string"!=typeof e){var t=o();if(r.verbose&&console.log("codegen: "+t),t="return "+t,e){for(var s=Object.keys(e),a=new Array(s.length+1),c=new Array(s.length),u=0;u<s.length;)a[u]=s[u],c[u]=e[s[u++]];return a[u]=t,Function.apply(null,a).apply(null,c)}return Function(t)()}for(var f=new Array(arguments.length-1),d=0;d<f.length;)f[d]=arguments[++d];if(d=0,e=e.replace(/%([%dfijs])/g,(function(e,t){var n=f[d++];switch(t){case"d":case"f":return String(Number(n));case"i":return String(Math.floor(n));case"j":return JSON.stringify(n);case"s":return String(n)}return"%"})),d!==f.length)throw Error("parameter count mismatch");return n.push(e),i}function o(r){return"function "+(r||t||"")+"("+(e&&e.join(",")||"")+"){\n  "+n.join("\n  ")+"\n}"}return i.toString=o,i}e.exports=r,r.verbose=!1},function(e,t,n){"use strict";e.exports=o;var r=n(83),i=n(84)("fs");function o(e,t,n){return"function"==typeof t?(n=t,t={}):t||(t={}),n?!t.xhr&&i&&i.readFile?i.readFile(e,(function(r,i){return r&&"undefined"!=typeof XMLHttpRequest?o.xhr(e,t,n):r?n(r):n(null,t.binary?i:i.toString("utf8"))})):o.xhr(e,t,n):r(o,this,e,t)}o.xhr=function(e,t,n){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4===r.readyState){if(0!==r.status&&200!==r.status)return n(Error("status "+r.status));if(t.binary){var e=r.response;if(!e){e=[];for(var i=0;i<r.responseText.length;++i)e.push(255&r.responseText.charCodeAt(i))}return n(null,"undefined"!=typeof Uint8Array?new Uint8Array(e):e)}return n(null,r.responseText)}},t.binary&&("overrideMimeType"in r&&r.overrideMimeType("text/plain; charset=x-user-defined"),r.responseType="arraybuffer"),r.open("GET",e),r.send()}},function(e,t,n){"use strict";var r=t,i=r.isAbsolute=function(e){return/^(?:\/|\w+:)/.test(e)},o=r.normalize=function(e){var t=(e=e.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),n=i(e),r="";n&&(r=t.shift()+"/");for(var o=0;o<t.length;)".."===t[o]?o>0&&".."!==t[o-1]?t.splice(--o,2):n?t.splice(o,1):++o:"."===t[o]?t.splice(o,1):++o;return r+t.join("/")};r.resolve=function(e,t,n){return n||(t=o(t)),i(t)?t:(n||(e=o(e)),(e=e.replace(/(?:\/|^)[^/]+$/,"")).length?o(e+"/"+t):t)}},function(e,t,n){"use strict";e.exports=C,C.filename=null,C.defaults={keepCase:!1};var r=n(92),i=n(52),o=n(47),s=n(17),a=n(48),c=n(37),u=n(11),f=n(49),d=n(50),l=n(21),p=n(4),h=/^[1-9][0-9]*$/,m=/^-?[1-9][0-9]*$/,v=/^0[x][0-9a-fA-F]+$/,g=/^-?0[x][0-9a-fA-F]+$/,y=/^0[0-7]+$/,b=/^-?0[0-7]+$/,_=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,w=/^[a-zA-Z_][a-zA-Z_0-9]*$/,S=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/,x=/^(?:\.[a-zA-Z_][a-zA-Z_0-9]*)+$/;function C(e,t,n){t instanceof i||(n=t,t=new i),n||(n=C.defaults);var E,I,T,O,R,k=r(e,n.alternateCommentMode||!1),M=k.next,A=k.push,P=k.peek,j=k.skip,N=k.cmnt,L=!0,D=!1,B=t,U=n.keepCase?function(e){return e}:p.camelCase;function F(e,t,n){var r=C.filename;return n||(C.filename=null),Error("illegal "+(t||"token")+" '"+e+"' ("+(r?r+", ":"")+"line "+k.line+")")}function V(){var e,t=[];do{if('"'!==(e=M())&&"'"!==e)throw F(e);t.push(M()),j(e),e=P()}while('"'===e||"'"===e);return t.join("")}function W(e){var t=M();switch(t){case"'":case'"':return A(t),V();case"true":case"TRUE":return!0;case"false":case"FALSE":return!1}try{return function(e,t){var n=1;switch("-"===e.charAt(0)&&(n=-1,e=e.substring(1)),e){case"inf":case"INF":case"Inf":return n*(1/0);case"nan":case"NAN":case"Nan":case"NaN":return NaN;case"0":return 0}if(h.test(e))return n*parseInt(e,10);if(v.test(e))return n*parseInt(e,16);if(y.test(e))return n*parseInt(e,8);if(_.test(e))return n*parseFloat(e);throw F(e,"number",t)}(t,!0)}catch(n){if(e&&S.test(t))return t;throw F(t,"value")}}function q(e,t){var n,r;do{!t||'"'!==(n=P())&&"'"!==n?e.push([r=$(M()),j("to",!0)?$(M()):r]):e.push(V())}while(j(",",!0));j(";")}function $(e,t){switch(e){case"max":case"MAX":case"Max":return 536870911;case"0":return 0}if(!t&&"-"===e.charAt(0))throw F(e,"id");if(m.test(e))return parseInt(e,10);if(g.test(e))return parseInt(e,16);if(b.test(e))return parseInt(e,8);throw F(e,"id")}function G(){if(void 0!==E)throw F("package");if(E=M(),!S.test(E))throw F(E,"name");B=B.define(E),j(";")}function z(){var e,t=P();switch(t){case"weak":e=T||(T=[]),M();break;case"public":M();default:e=I||(I=[])}t=V(),j(";"),e.push(t)}function H(){if(j("="),O=V(),!(D="proto3"===O)&&"proto2"!==O)throw F(O,"syntax");j(";")}function K(e,t){switch(t){case"option":return X(e,t),j(";"),!0;case"message":return function(e,t){if(!w.test(t=M()))throw F(t,"type name");var n=new o(t);J(n,(function(e){if(!K(n,e))switch(e){case"map":!function(e){j("<");var t=M();if(void 0===l.mapKey[t])throw F(t,"type");j(",");var n=M();if(!S.test(n))throw F(n,"type");j(">");var r=M();if(!w.test(r))throw F(r,"name");j("=");var i=new a(U(r),$(M()),t,n);J(i,(function(e){if("option"!==e)throw F(e);X(i,e),j(";")}),(function(){ee(i)})),e.add(i)}(n);break;case"required":case"optional":case"repeated":Y(n,e);break;case"oneof":!function(e,t){if(!w.test(t=M()))throw F(t,"name");var n=new c(U(t));J(n,(function(e){"option"===e?(X(n,e),j(";")):(A(e),Y(n,"optional"))})),e.add(n)}(n,e);break;case"extensions":q(n.extensions||(n.extensions=[]));break;case"reserved":q(n.reserved||(n.reserved=[]),!0);break;default:if(!D||!S.test(e))throw F(e);A(e),Y(n,"optional")}})),e.add(n)}(e,t),!0;case"enum":return function(e,t){if(!w.test(t=M()))throw F(t,"name");var n=new u(t);J(n,(function(e){switch(e){case"option":X(n,e),j(";");break;case"reserved":q(n.reserved||(n.reserved=[]),!0);break;default:!function(e,t){if(!w.test(t))throw F(t,"name");j("=");var n=$(M(),!0),r={};J(r,(function(e){if("option"!==e)throw F(e);X(r,e),j(";")}),(function(){ee(r)})),e.add(t,n,r.comment)}(n,e)}})),e.add(n)}(e,t),!0;case"service":return function(e,t){if(!w.test(t=M()))throw F(t,"service name");var n=new f(t);J(n,(function(e){if(!K(n,e)){if("rpc"!==e)throw F(e);!function(e,t){var n=t;if(!w.test(t=M()))throw F(t,"name");var r,i,o,s,a=t;if(j("("),j("stream",!0)&&(i=!0),!S.test(t=M()))throw F(t);if(r=t,j(")"),j("returns"),j("("),j("stream",!0)&&(s=!0),!S.test(t=M()))throw F(t);o=t,j(")");var c=new d(a,n,r,o,i,s);J(c,(function(e){if("option"!==e)throw F(e);X(c,e),j(";")})),e.add(c)}(n,e)}})),e.add(n)}(e,t),!0;case"extend":return function(e,t){if(!S.test(t=M()))throw F(t,"reference");var n=t;J(null,(function(t){switch(t){case"required":case"repeated":case"optional":Y(e,t,n);break;default:if(!D||!S.test(t))throw F(t);A(t),Y(e,"optional",n)}}))}(e,t),!0}return!1}function J(e,t,n){var r=k.line;if(e&&(e.comment=N(),e.filename=C.filename),j("{",!0)){for(var i;"}"!==(i=M());)t(i);j(";",!0)}else n&&n(),j(";"),e&&"string"!=typeof e.comment&&(e.comment=N(r))}function Y(e,t,n){var r=M();if("group"!==r){if(!S.test(r))throw F(r,"type");var i=M();if(!w.test(i))throw F(i,"name");i=U(i),j("=");var a=new s(i,$(M()),r,t,n);J(a,(function(e){if("option"!==e)throw F(e);X(a,e),j(";")}),(function(){ee(a)})),e.add(a),D||!a.repeated||void 0===l.packed[r]&&void 0!==l.basic[r]||a.setOption("packed",!1,!0)}else!function(e,t){var n=M();if(!w.test(n))throw F(n,"name");var r=p.lcFirst(n);n===r&&(n=p.ucFirst(n)),j("=");var i=$(M()),a=new o(n);a.group=!0;var c=new s(r,i,n,t);c.filename=C.filename,J(a,(function(e){switch(e){case"option":X(a,e),j(";");break;case"required":case"optional":case"repeated":Y(a,e);break;default:throw F(e)}})),e.add(a).add(c)}(e,t)}function X(e,t){var n=j("(",!0);if(!S.test(t=M()))throw F(t,"name");var r=t;n&&(j(")"),r="("+r+")",t=P(),x.test(t)&&(r+=t,M())),j("="),Z(e,r)}function Z(e,t){if(j("{",!0))do{if(!w.test(R=M()))throw F(R,"name");"{"===P()?Z(e,t+"."+R):(j(":"),"{"===P()?Z(e,t+"."+R):Q(e,t+"."+R,W(!0))),j(",",!0)}while(!j("}",!0));else Q(e,t,W(!0))}function Q(e,t,n){e.setOption&&e.setOption(t,n)}function ee(e){if(j("[",!0)){do{X(e,"option")}while(j(",",!0));j("]")}return e}for(;null!==(R=M());)switch(R){case"package":if(!L)throw F(R);G();break;case"import":if(!L)throw F(R);z();break;case"syntax":if(!L)throw F(R);H();break;case"option":if(!L)throw F(R);X(B,R),j(";");break;default:if(K(B,R)){L=!1;continue}throw F(R)}return C.filename=null,{package:E,imports:I,weakImports:T,syntax:O,root:t}}},function(e,t,n){"use strict";e.exports=o;var r,i=/\/|\./;function o(e,t){i.test(e)||(e="google/protobuf/"+e+".proto",t={nested:{google:{nested:{protobuf:{nested:t}}}}}),o[e]=t}o("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}}),o("duration",{Duration:r={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}}),o("timestamp",{Timestamp:r}),o("empty",{Empty:{fields:{}}}),o("struct",{Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}}),o("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}}),o("field_mask",{FieldMask:{fields:{paths:{rule:"repeated",type:"string",id:1}}}}),o.get=function(e){return o[e]||null}},function(e,t,n){"use strict";(function(e){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(5)),o=r(n(7)),s=function(){};if(void 0===a)var a={};void 0!==e&&"undefined"!=e.navigator&&(a=e);var c,u,f,d,l=(0,o.default)(),p=function(e){e=e||!0;var t=function(){try{return new a.XMLHttpRequest}catch(e){return!1}}()||function(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(e){return!1}}()||{};if("withCredentials"in t)return t;if(!e)return t;if(void 0===a.XDomainRequest)return t;var n=new XDomainRequest;return n.readyState=0,n.status=100,n.onreadystatechange=s,n.onload=function(){n.readyState=4,n.status=200;var e=new ActiveXObject("Microsoft.XMLDOM");e.async="false",e.loadXML(n.responseText),n.responseXML=e,n.response=n.responseText,n.onreadystatechange()},n.ontimeout=n.onerror=function(){n.readyState=4,n.status=500,n.onreadystatechange()},n},h=function(){if(0===Object.keys(a).length)return 0;if("ActiveXObject"in a)try{return new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(e){return 0}else if(navigator.plugins&&navigator.plugins.length>0)return navigator.plugins["Shockwave Flash"];return 0}(),m=void 0!==a?p():{},v="undefined"!=typeof FormData,g="undefined"!=typeof Blob,y=m.setRequestHeader||!1,b=m.overrideMimeType||!1,_=y&&v,w=_||h,S=y&&(g||b);Object.keys||(Object.keys=(c=Object.prototype.hasOwnProperty,u=!{toString:null}.propertyIsEnumerable("toString"),d=(f=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]).length,function(e){if("object"!==(0,i.default)(e)&&("function"!=typeof e||null===e))throw new TypeError("Object.keys called on non-object");var t,n,r=[];for(t in e)c.call(e,t)&&r.push(t);if(u)for(n=0;n<d;n++)c.call(e,f[n])&&r.push(f[n]);return r}));var x,C,E={hasFormData:v,hasBlob:g,emptyfn:s,isCanSetRequestHeader:y,hasOverrideMimeType:b,isCanUploadFileAsync:_,isCanUploadFile:w,isCanDownLoadFile:S,isSupportWss:function(){var e=[/MQQBrowser[\/]5([.]\d+)?\sTBS/];if(!a.WebSocket)return!1;for(var t=a.navigator?a.navigator.userAgent:"",n=0,r=e.length;n<r;n++)if(e[n].test(t))return!1;return!0}(),getIEVersion:(C=a.navigator?a.navigator.userAgent:"",(x=C.match(/MSIE (\d+)/i))&&x[1]?+x[1]:(x=C.match(/Trident\/(\d+)/i))&&x[1]&&{4:8,5:9,6:10,7:11}[x[1]]||null),stringify:function(e){if("undefined"!=typeof JSON&&JSON.stringify)return JSON.stringify(e);var t="",n=[];return function e(r){var o=!1;for(var s in"[object Array]"===Object.prototype.toString.call(r)?(n.push("]","["),o=!0):"[object Object]"===Object.prototype.toString.call(r)&&n.push("}","{"),r)"[object Null]"===Object.prototype.toString.call(r[s])?r[s]="null":"[object Undefined]"===Object.prototype.toString.call(r[s])&&(r[s]="undefined"),r[s]&&"object"===(0,i.default)(r[s])?t+=","+(o?"":'"'+s+'":'+(o?'"':""))+e(r[s]):t+=',"'+(o?"":s+'":"')+r[s]+'"';return""!=t&&(t=t.slice(1)),n.pop()+t+n.pop()}(e)},login:function(e){var t=(e=e||{}).success||s,n=e.error||s,r=(e.appKey||"").split("#");if(2!==r.length)return n({type:l.WEBIM_CONNCTION_APPKEY_NOT_ASSIGN_ERROR}),!1;var i=r[0],o=r[1],a=a||e.https,c=e.user||"",u=e.pwd||"",f=e.apiUrl,d={grant_type:"password",username:c,password:u,timestamp:+new Date};return e={url:f+"/"+i+"/"+o+"/token",dataType:"json",data:E.stringify(d),success:t,error:n},E.ajax(e)},getFileUrl:function(e){var t={url:"",filename:"",filetype:"",data:""},n="string"==typeof e?document.getElementById(e):e;if(!E.isCanUploadFileAsync||!n)return t;try{if(a.URL.createObjectURL){var r=n.files;if(r.length>0){var i=r.item(0);t.data=i,t.url=a.URL.createObjectURL(i),t.filename=i.name||""}}else{i=document.getElementById(e).value,t.url=i;var o=i.lastIndexOf("/"),s=i.lastIndexOf("\\"),c=Math.max(o,s);t.filename=c<0?i:i.substring(c+1)}var u=t.filename.lastIndexOf(".");return-1!=u&&(t.filetype=t.filename.substring(u+1).toLowerCase()),t}catch(e){throw e}},getFileSize:function(e){var t=this.getFileLength(e);if(t>1e7)return!1;var n=Math.round(t/1e3);if(n<1e3)t=n+" KB";else if(n>=1e3){var r=n/1e3;t=r<1e3?r.toFixed(1)+" MB":(r/1e3).toFixed(1)+" GB"}return t},getFileLength:function(e){var t=0;return e&&(e.files?e.files.length>0&&(t=e.files[0].size):e.select&&"ActiveXObject"in a&&(e.select(),t=(e=new ActiveXObject("Scripting.FileSystemObject").GetFile(e.value)).Size)),t},hasFlash:h,trim:function(e){return(e="string"==typeof e?e:"").trim?e.trim():e.replace(/^\s|\s$/g,"")},parseEmoji:function(e){if(void 0===WebIM.Emoji||void 0===WebIM.Emoji.map)return e;var t=WebIM.Emoji;for(var n in t.map)if(t.map.hasOwnProperty(n))for(;e.indexOf(n)>-1;)e=e.replace(n,'<img class="emoji" src="'+t.path+t.map[n]+'" />');return e},parseLink:function(e){return e.replace(/(https?\:\/\/|www\.)([a-zA-Z0-9-]+(\.[a-zA-Z0-9]+)+)(\:[0-9]{2,4})?\/?((\.[:_0-9a-zA-Z-]+)|[:_0-9a-zA-Z-]*\/?)*\??[:_#@*&%0-9a-zA-Z-/=]*/gm,(function(e){return"<a href='"+(/^https?/gm.test(e)?e:"//"+e)+"' target='_blank'>"+e+"</a>"}))},parseJSON:function(e){if(a.JSON&&a.JSON.parse)return a.JSON.parse(e+"");var t,n=null,r=E.trim(e+"");return r&&!E.trim(r.replace(/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g,(function(e,r,i,o){return t&&r&&(n=0),0===n?e:(t=i||r,n+=!o-!i,"")})))?Function("return "+r)():Function("Invalid JSON: "+e)()},parseUploadResponse:function(e){return e.indexOf("callback")>-1?e.slice(9,-1):e},parseDownloadResponse:function(e){return e&&e.type&&"application/json"===e.type||0>Object.prototype.toString.call(e).indexOf("Blob")?this.url+"?token=":a.URL.createObjectURL(e)},uploadFile:function(e){(e=e||{}).onFileUploadProgress=e.onFileUploadProgress||s,e.onFileUploadComplete=e.onFileUploadComplete||s,e.onFileUploadError=e.onFileUploadError||s,e.onFileUploadCanceled=e.onFileUploadCanceled||s;var t=e.accessToken||this.context.accessToken;if(t){var n,r,i,o=e.appKey||this.context.appKey||"";if(o&&(n=(i=o.split("#"))[0],r=i[1]),n||r){var c=e.apiUrl;this.isHttpDNS&&(c=this.apiUrl);var u=e.uploadUrl||c+"/"+n+"/"+r+"/chatfiles";if(E.isCanUploadFileAsync)if((e.file.data?e.file.data.size:void 0)<=0)e.onFileUploadError({type:l.WEBIM_UPLOADFILE_ERROR,id:e.id});else{var f=E.xmlrequest();f.upload&&f.upload.addEventListener("progress",e.onFileUploadProgress,!1),f.addEventListener?(f.addEventListener("abort",e.onFileUploadCanceled,!1),f.addEventListener("load",(function(t){try{var n=E.parseJSON(f.responseText);if(400===f.status&&"content improper"===n.error)return e.onFileUploadError({type:l.WEBIM_UPLOADFILE_ERROR,data:n}),!1;try{e.onFileUploadComplete(n)}catch(t){e.onFileUploadError({type:l.WEBIM_CONNCTION_CALLBACK_INNER_ERROR,data:t})}}catch(t){e.onFileUploadError({type:l.WEBIM_UPLOADFILE_ERROR,data:f.responseText,id:e.id,xhr:f})}}),!1),f.addEventListener("error",(function(t){e.onFileUploadError({type:l.WEBIM_UPLOADFILE_ERROR,id:e.id,xhr:f})}),!1)):f.onreadystatechange&&(f.onreadystatechange=function(){if(4===f.readyState)if(200===ajax.status)try{var t=E.parseJSON(f.responseText);if(400===f.status&&"content improper"===t.error)return e.onFileUploadError({type:l.WEBIM_UPLOADFILE_ERROR,data:t}),!1;e.onFileUploadComplete(t)}catch(t){e.onFileUploadError({type:l.WEBIM_UPLOADFILE_ERROR,data:f.responseText,id:e.id,xhr:f})}else e.onFileUploadError({type:l.WEBIM_UPLOADFILE_ERROR,data:f.responseText,id:e.id,xhr:f});else f.abort(),e.onFileUploadCanceled()}),f.open("POST",u),f.setRequestHeader("restrict-access","true"),f.setRequestHeader("Accept","*/*"),f.setRequestHeader("Authorization","Bearer "+t);var d=new FormData;d.append("file",e.file.data),a.XDomainRequest&&(f.readyState=2),f.send(d)}else E.hasFlash&&"function"==typeof e.flashUpload?e.flashUpload&&e.flashUpload(u,e):e.onFileUploadError({type:l.WEBIM_UPLOADFILE_BROWSER_ERROR,id:e.id})}else e.onFileUploadError({type:l.WEBIM_UPLOADFILE_ERROR,id:e.id})}else e.onFileUploadError({type:l.WEBIM_UPLOADFILE_NO_LOGIN,id:e.id})},download:function(e){e.onFileDownloadComplete=e.onFileDownloadComplete||s,e.onFileDownloadError=e.onFileDownloadError||s;var t=e.accessToken||this.context.accessToken;if(t)if(E.isCanDownLoadFile){var n=E.xmlrequest();"addEventListener"in n?(n.addEventListener("load",(function(t){e.onFileDownloadComplete(n.response,n)}),!1),n.addEventListener("error",(function(t){e.onFileDownloadError({type:l.WEBIM_DOWNLOADFILE_ERROR,id:e.id,xhr:n})}),!1)):"onreadystatechange"in n&&(n.onreadystatechange=function(){4===n.readyState?200===ajax.status?e.onFileDownloadComplete(n.response,n):e.onFileDownloadError({type:l.WEBIM_DOWNLOADFILE_ERROR,id:e.id,xhr:n}):(n.abort(),e.onFileDownloadError({type:l.WEBIM_DOWNLOADFILE_ERROR,id:e.id,xhr:n}))});var r=e.method||"GET",i=e.responseType||"blob",o=e.mimeType||"text/plain; charset=x-user-defined";n.open(r,e.url),"undefined"!=typeof Blob?n.responseType=i:n.overrideMimeType(o);var c={"X-Requested-With":"XMLHttpRequest",Accept:"application/octet-stream","share-secret":e.secret,Authorization:"Bearer "+t},u=e.headers||{};for(var f in u)c[f]=u[f];for(var f in c)c[f]&&n.setRequestHeader(f,c[f]);a.XDomainRequest&&(n.readyState=2),n.send(null)}else e.onFileDownloadComplete();else e.onFileDownloadError({type:l.WEBIM_DOWNLOADFILE_NO_LOGIN,id:e.id})},parseTextMessage:function(e,t){if("string"==typeof e){if("[object Object]"!==Object.prototype.toString.call(t))return{isemoji:!1,body:[{type:"txt",data:e}]};var n=e,r=[],i=n.match(/\[[^[\]]{2,3}\]/gm);if(!i||i.length<1)return{isemoji:!1,body:[{type:"txt",data:e}]};for(var o=!1,s=0;s<i.length;s++){var a=n.substring(0,n.indexOf(i[s])),c=WebIM.Emoji.map[i[s]];if(a&&r.push({type:"txt",data:a}),c){var u=WebIM.Emoji.map?WebIM.Emoji.path+c:null;u?(o=!0,r.push({type:"emoji",data:u})):r.push({type:"txt",data:i[s]});var f=n.indexOf(i[s])+i[s].length;n=n.substring(f)}else r.push({type:"txt",data:i[s]})}return n&&r.push({type:"txt",data:n}),o?{isemoji:o,body:r}:{isemoji:!1,body:[{type:"txt",data:e}]}}},parseUri:function(){var e={};if(a.location.search){var t=a.location.search.match(/([^\?|&])\w+=([^&]+)/g);for(var n in t){var r=t[n],i=r.indexOf("="),o=r.substr(0,i),s=r.substr(i+1);e[o]=s}}return e},parseHrefHash:function(){var e={};if(a.location.hash){var t=a.location.hash.match(/([^\#|&])\w+=([^&]+)/g);for(var n in t){var r=t[n],i=r.indexOf("="),o=r.substr(0,i),s=r.substr(i+1);e[o]=s}}return e},xmlrequest:p,getXmlFirstChild:function(e,t){var n=e.getElementsByTagName(t);return 0==n.length?null:n[0]},wxRequest:function(e){var t=e.success||s,n=e.error||s,r=e.type||"POST",i=e.data||null,o="";if("get"===r.toLowerCase()&&i){for(var a in i)i.hasOwnProperty(a)&&(o+=a+"="+i[a]+"&");o=o?o.slice(0,-1):o,e.url+=(e.url.indexOf("?")>0?"&":"?")+(o?o+"&":o)+"_v="+(new Date).getTime(),i=null,o=null}console.log("wx.request",e.url),wx.request({url:e.url,data:e.data,header:e.headers,method:r,success:function(e){console.log("wx.request.success",arguments),"200"==e.statusCode?t(e.data):n(e)},complete:function(){console.log("wx.request.complete",arguments)},fail:function(){console.log("wx.request.fail",arguments)}})},ajax:function(e){return new Promise((function(t,n){var r=e.dataType||"text",i=e.success||s,o=e.error||s,c=E.xmlrequest();c.onreadystatechange=function(){if(4===c.readyState){if(200===(c.status||0)){try{switch(r){case"text":return i(c.responseText),void t(c.responseText);case"json":var e=E.parseJSON(c.responseText);return i(e,c),void t(e);case"xml":return void(c.responseXML&&c.responseXML.documentElement?(i(c.responseXML.documentElement,c),t(c.responseXML.documentElement)):(o({type:l.WEBIM_CONNCTION_AJAX_ERROR,data:c.responseText}),n({type:l.WEBIM_CONNCTION_AJAX_ERROR,data:c.responseText})))}t(c.response||c.responseText,c),i(c.response||c.responseText,c)}catch(e){n(e)}return}return n({type:l.WEBIM_CONNCTION_AJAX_ERROR,data:c.responseText}),void o({type:l.WEBIM_CONNCTION_AJAX_ERROR,data:c.responseText})}0===c.readyState&&(o({type:l.WEBIM_CONNCTION_AJAX_ERROR,data:c.responseText}),n({type:l.WEBIM_CONNCTION_AJAX_ERROR,data:c.responseText}))},e.responseType&&c.responseType&&(c.responseType=e.responseType),e.mimeType&&E.hasOverrideMimeType&&c.overrideMimeType(e.mimeType);var u=e.type||"POST",f=e.data||null,d="";if("get"===u.toLowerCase()&&f){for(var p in f)f.hasOwnProperty(p)&&(d+=p+"="+f[p]+"&");d=d?d.slice(0,-1):d,e.url+=(e.url.indexOf("?")>0?"&":"?")+(d?d+"&":d)+"_v="+(new Date).getTime(),f=null,d=null}if(c.open(u,e.url,E.isCanSetRequestHeader),E.isCanSetRequestHeader){var h=e.headers||{};for(var m in h)h.hasOwnProperty(m)&&c.setRequestHeader(m,h[m])}a.XDomainRequest&&(c.readyState=2),c.send(f)}))},ts:function(){var e=new Date,t=e.getHours(),n=e.getMinutes(),r=e.getSeconds();return(t<10?"0"+t:t)+":"+(n<10?"0"+n:n)+":"+(r<10?"0"+r:r)+":"+e.getMilliseconds()+" "},getObjectKey:function(e,t){for(var n in e)if(e[n]==t)return n;return""},sprintf:function(){var e,t,n=arguments,r=n[0]||"";for(e=1,t=n.length;e<t;e++)r=r.replace(/%s/,n[e]);return r},setCookie:function(e,t,n){var r=e+"="+encodeURIComponent(t);"number"==typeof n&&(r+="; max-age: "+60*n*60*24),document.cookie=r},getCookie:function(){var e={},t=document.cookie;if(""===t)return e;for(var n=t.split("; "),r=0;r<n.length;r++){var i=n[r],o=i.indexOf("="),s=i.substring(0,o),a=i.substring(o+1);a=decodeURIComponent(a),e[s]=a}return e},reverse:function(e){var t=[];if(Array.prototype.reverse)t=e.reverse();else for(var n=0;n<e.length;n++)t.unshift(e[n]);return t},useWxProgram:function(){E.ajax=E.wxRequest},getEnv:function(){var e=!0;try{e=!a||!a.navigator}catch(t){e=!0}return e},checkArray:function(e,t){var n="off";if(e.forEach((function(e,r){if(e.name===t.name)return n="on",r})),"off"==n)return!1},_listenNetwork:function(e,t){a.addEventListener?(a.addEventListener("online",e),a.addEventListener("offline",t)):a.attachEvent&&(document.body?(document.body.attachEvent("ononline",e),document.body.attachEvent("onoffline",t)):a.attachEvent("load",(function(){document.body.attachEvent("ononline",e),document.body.attachEvent("onoffline",t)})))}},I=E;t.default=I}).call(this,n(2))}])}))},fed5:function(e,t){t.f=Object.getOwnPropertySymbols}}]);
//# sourceMappingURL=chunk-libs.c8e78dee.js.map