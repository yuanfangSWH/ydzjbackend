(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-72487c8d"],{"132d":function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=this,i=e.$createElement,o=e._self._c||i;return o("div",{staticClass:"articleOperation"},[o("p",[e._v(e._s(e.title))]),o("div",[o("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.formData,rules:e.rules,"label-width":"100px"}},[o("el-form-item",{attrs:{label:"文章标题:",prop:"title"}},[o("el-input",{staticStyle:{width:"100%"},model:{value:e.formData.title,callback:function(t){e.$set(e.formData,"title",t)},expression:"formData.title"}})],1),o("el-form-item",{attrs:{label:"文章排序:"}},[o("el-input",{attrs:{type:"Number"},model:{value:e.formData.sort,callback:function(t){e.$set(e.formData,"sort",t)},expression:"formData.sort"}})],1)],1),o("editorBar",{attrs:{editorContentData:e.formData.content,root:"article"},on:{editorData:e.getEditorData}}),o("el-form",{staticClass:"demo-ruleForm",attrs:{"label-width":"100px"}},[o("el-form-item",{staticStyle:{"margin-top":"20px"}},[o("el-button",{staticStyle:{"margin-right":"30px"},attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v(e._s(e.btnVal))]),o("el-button",{on:{click:function(){t.$router.go(-1)}}},[e._v("返回")])],1)],1)],1)])},a=[],r=(i("a9e3"),i("c55c")),n={name:"articleYD",data:function(){return{imageUploadUrl:this.api.articleManage.uploadsImage,title:"",rules:{title:[{required:!0,message:"请输入文章标题",trigger:"blur"}]},formData:{class_id:0,title:"",status:1,type:3,content:"",sort:""},btnVal:"新增",dialogVisible:!1,imageInit:!1}},components:{editorBar:r["a"]},created:function(){this.$route.query.id?(this.title="编辑文章",this.btnVal="修改",this.imageInit=!0,this.getArticleDetile(this.$route.query.id)):this.title="新增文章"},methods:{getArticleDetile:function(t){var e=this;this.api.articleManage.articleDetail({id:t}).then((function(t){var i=t.data.data,o=i.content,a=i.title,r=i.article_id,n=i.sort,s=i.status,l=i.type;e.formData={content:o,title:a,article_id:r,sort:n,status:s,type:l}}))},getEditorData:function(t){this.formData.content=t},submitForm:function(t){var e=this;this.formData.sort=Number(this.formData.sort),this.$refs[t].validate((function(t){if(!t)return console.log("error submit!!"),!1;e.$route.query.id?e.api.articleManage.editArticle(e.formData).then((function(t){console.log(t),e.$message.success("修改成功！"),e.$router.push({path:"/articleManage"}),e.$router.back()})):e.api.articleManage.addArticle(e.formData).then((function(t){e.$message.success("新增成功！"),e.$router.back()}))}))}}},s=n,l=(i("fadd"),i("2877")),c=Object(l["a"])(s,o,a,!1,null,null,null);e["default"]=c.exports},"7d19":function(t,e,i){"use strict";var o=i("90b3"),a=i.n(o);a.a},"884f":function(t,e,i){},"90b3":function(t,e,i){},c55c:function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-link",{directives:[{name:"show",rawName:"v-show",value:!t.isHtml&&""!=t.root,expression:"!isHtml && root != ''"}],attrs:{type:"primary"},on:{click:function(e){return t.handleHtml(!0)}}},[t._v("编辑HTML")]),i("el-link",{directives:[{name:"show",rawName:"v-show",value:t.isHtml&&""!=t.root,expression:"isHtml && root != ''"}],attrs:{type:"primary"},on:{click:function(e){return t.handleHtml(!1)}}},[t._v("返回编辑器")]),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.isHtml&&""!=t.root,expression:"!isHtml && root != ''"}],ref:"editorElem"}),i("el-input",{directives:[{name:"show",rawName:"v-show",value:t.isHtml&&""!=t.root,expression:"isHtml && root != ''"}],attrs:{type:"textarea",rows:15,placeholder:"请输入内容"},on:{change:t.handleHtmlChange},model:{value:t.editorContentHtml,callback:function(e){t.editorContentHtml=e},expression:"editorContentHtml"}}),i("h4",{directives:[{name:"show",rawName:"v-show",value:""==this.root,expression:"this.root == ''"}]},[t._v("没有设置路径“root”...")])],1)},a=[],r=i("6fad"),n=i.n(r),s=i("bc3a"),l=i.n(s),c=i("5f87"),d={name:"Editor",data:function(){return{isHtml:!1,editor:null,editorContent:"",editorContentHtml:"",header:{headers:{"Content-Type":"multipart/form-data; boundary=--------------------------AAAAA",AccessToken:Object(c["a"])()}}}},props:{editorContentData:{},root:{type:String,default:""}},watch:{editorContentData:function(t,e){this.editorContent||(this.editorContent=t,this.editor.txt.html(this.editorContent))}},mounted:function(){var t=this;this.editor=new n.a(this.$refs.editorElem),this.editor.config.onchange=function(e){t.editorContent=e,t.catchData(t.editorContent)},this.editor.config.withCredentials=!0,this.editor.config.customUploadImg=function(e,i){var o=new FormData;o.append("file[]",e[0]),o.append("root",t.root);var a="/api/file/uploads";l.a.post(a,o,t.header).then((function(e){var i=e.data,o=i.data.url_path;for(var a in o)t.editor.cmd.do("insertHTML",'<img src="https://files.ddhi.cn'+o[a]+'" style="max-width: 100%;">')}))},this.editor.config.uploadImgMaxSize=3145728,this.editor.config.uploadImgMaxLength=5,this.editor.config.uploadImgShowBase64=!0,this.editor.config.uploadFileName="myFileName",this.editor.config.menus=["head","bold","fontSize","fontName","italic","underline","strikeThrough","foreColor","backColor","link","list","justify","quote","emoticon","image","table","code","undo","redo"],this.editor.create()},methods:{catchData:function(t){this.$emit("editorData",t)},handleHtml:function(t){t&&(this.editorContentHtml=this.editorContent),this.isHtml=t},handleHtmlChange:function(){this.editorContent=this.editorContentHtml,this.editor.txt.html(this.editorContent)}}},u=d,m=(i("7d19"),i("2877")),h=Object(m["a"])(u,o,a,!1,null,null,null);e["a"]=h.exports},fadd:function(t,e,i){"use strict";var o=i("884f"),a=i.n(o);a.a}}]);
//# sourceMappingURL=chunk-72487c8d.8c9a6563.js.map