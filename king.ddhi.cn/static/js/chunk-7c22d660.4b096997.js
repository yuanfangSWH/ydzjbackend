(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7c22d660"],{"0fd0":function(t,e,a){},8454:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"shopSet"},[a("div",{staticClass:"pageTitle"},[t._v(t._s(this._getVuex("pageTitle")))]),a("div",{staticClass:"add-box"},[a("el-button",{attrs:{type:"danger",disabled:!t.multipleSelection.length>0},on:{click:t.batchDelete}},[t._v("删除")]),a("el-button",{attrs:{type:"success"},on:{click:t.insertItemtk}},[t._v("新增")]),a("el-input",{staticClass:"searchInput",attrs:{placeholder:"请输入要搜索的内容","prefix-icon":"el-icon-search"},on:{change:t.searchDatas},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}})],1),a("div",{staticClass:"shanxdiv"},[a("el-select",{staticStyle:{"margin-right":"10px"},attrs:{placeholder:"请选择部门"},model:{value:t.dept_id,callback:function(e){t.dept_id=e},expression:"dept_id"}},t._l(t.deptData,(function(t){return a("el-option",{key:t.dept_id,attrs:{label:t.dept_name,value:t.dept_id}})})),1),a("el-select",{staticStyle:{"margin-right":"10px"},attrs:{placeholder:"请选择角色"},model:{value:t.role_id,callback:function(e){t.role_id=e},expression:"role_id"}},t._l(t.roleData,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1),a("el-select",{staticStyle:{"margin-right":"10px"},attrs:{placeholder:"请选择状态"},model:{value:t.staff_status,callback:function(e){t.staff_status=e},expression:"staff_status"}},[a("el-option",{key:"0",attrs:{label:"停用",value:"0"}}),a("el-option",{key:"1",attrs:{label:"正常",value:"1"}})],1),a("el-select",{staticStyle:{"margin-right":"10px"},attrs:{placeholder:"请选择排序"},model:{value:t.sort,callback:function(e){t.sort=e},expression:"sort"}},[a("el-option",{key:"0",attrs:{label:"员工ID",value:"staff_id"}}),a("el-option",{key:"1",attrs:{label:"员工提成",value:"staff_commission"}}),a("el-option",{key:"2",attrs:{label:"赠送额度",value:"staff_gift_amount"}}),a("el-option",{key:"3",attrs:{label:"加入时间",value:"staff_create_time"}})],1),a("el-button",{attrs:{type:"primary"},on:{click:t.screening}},[t._v("筛选")]),a("el-button",{attrs:{type:"info"},on:{click:t.resetData}},[t._v("重置")])],1),a("el-table",{ref:"multipNum",staticStyle:{width:"100%"},attrs:{stripe:"",data:t.tableListData,"tooltip-effect":"dark"},on:{"selection-change":t.selectItem}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{label:"全选/员工ID",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.staff_id))])]}}])}),a("el-table-column",{attrs:{prop:"dept_id",label:"部门ID",width:"150"}}),a("el-table-column",{attrs:{prop:"dept_name",label:"部门名称",width:"150"}}),a("el-table-column",{attrs:{prop:"role_id",label:"角色ID",width:"150"}}),a("el-table-column",{attrs:{prop:"role_name",label:"角色名称",width:"150"}}),a("el-table-column",{attrs:{prop:"staff_account",label:"员工账号（工号）",width:"150"}}),a("el-table-column",{attrs:{prop:"staff_commission",label:"员工提成",width:"150"}}),a("el-table-column",{attrs:{prop:"staff_create_time",label:"加入时间",width:"150"}}),a("el-table-column",{attrs:{prop:"staff_gift_amount",label:"赠送额度",width:"150"}}),a("el-table-column",{attrs:{prop:"staff_name",label:"员工名字",width:"150"}}),a("el-table-column",{attrs:{prop:"staff_phone",label:"员工电话",width:"150"}}),a("el-table-column",{attrs:{label:"员工状态",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{directives:[{name:"show",rawName:"v-show",value:0==e.row.staff_status,expression:"scope.row.staff_status == 0"}]},[t._v("停用")]),a("span",{directives:[{name:"show",rawName:"v-show",value:1==e.row.staff_status,expression:"scope.row.staff_status == 1"}]},[t._v("正常")])]}}])}),a("el-table-column",{attrs:{align:"right",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.openUpdateDialog(JSON.parse(JSON.stringify(e.row)))}}},[t._v("修改")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.openDelDialog(e.row)}}},[t._v("删除")])]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":t.curPage,"hide-on-single-page":!0,background:"",layout:"prev, pager, next",total:t.total},on:{"current-change":t.pageChange}})],1),a("el-dialog",{attrs:{title:"新增",visible:t.insertDialog},on:{"update:visible":function(e){t.insertDialog=e}}},[a("el-form",{ref:"formName1",staticClass:"updateArea",attrs:{model:t.addItem,rules:t.rules,"label-width":"90px"}},[a("el-form-item",{attrs:{label:"部门ID",prop:"dept_id"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.addItem.dept_id,callback:function(e){t.$set(t.addItem,"dept_id",e)},expression:"addItem.dept_id"}},t._l(t.departmentData,(function(t){return a("el-option",{key:t.dept_id,attrs:{label:t.dept_name,value:t.dept_id}})})),1)],1),a("el-form-item",{attrs:{label:"角色ID",prop:"role_id"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.addItem.role_id,callback:function(e){t.$set(t.addItem,"role_id",e)},expression:"addItem.role_id"}},t._l(t.juesData,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),a("el-form-item",{attrs:{label:"员工名称",prop:"staff_name"}},[a("el-input",{model:{value:t.addItem.staff_name,callback:function(e){t.$set(t.addItem,"staff_name",e)},expression:"addItem.staff_name"}})],1),a("el-form-item",{attrs:{label:"员工账号",prop:"staff_account"}},[a("el-input",{model:{value:t.addItem.staff_account,callback:function(e){t.$set(t.addItem,"staff_account",e)},expression:"addItem.staff_account"}})],1),a("el-form-item",{attrs:{label:"密码",prop:"staff_password"}},[a("el-input",{model:{value:t.addItem.staff_password,callback:function(e){t.$set(t.addItem,"staff_password",e)},expression:"addItem.staff_password"}})],1),a("el-form-item",{attrs:{label:"手机号",prop:"staff_phone"}},[a("el-input",{model:{value:t.addItem.staff_phone,callback:function(e){t.$set(t.addItem,"staff_phone",e)},expression:"addItem.staff_phone"}})],1),a("el-form-item",{attrs:{label:"员工提成",prop:"staff_commission"}},[a("el-input",{model:{value:t.addItem.staff_commission,callback:function(e){t.$set(t.addItem,"staff_commission",e)},expression:"addItem.staff_commission"}}),t._v(" (示例：10表示10%) ")],1),a("el-form-item",{attrs:{label:"赠送额度",prop:"staff_gift_amount"}},[a("el-input",{model:{value:t.addItem.staff_gift_amount,callback:function(e){t.$set(t.addItem,"staff_gift_amount",e)},expression:"addItem.staff_gift_amount"}})],1),a("el-form-item",{attrs:{label:"员工状态",prop:"staff_status"}},[a("el-switch",{attrs:{"active-color":"#13ce66"},model:{value:t.staff_status_ui,callback:function(e){t.staff_status_ui=e},expression:"staff_status_ui"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.insertDialog=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.validation("formName1")}}},[t._v("确定")])],1)],1),a("el-dialog",{attrs:{title:"修改-"+t.updateDialogTitle,visible:t.updateDialog},on:{"update:visible":function(e){t.updateDialog=e}}},[a("el-form",{ref:"formName2",staticClass:"updateArea",attrs:{model:t.currenItem,"label-width":"90px"}},[a("el-form-item",{attrs:{label:"部门ID",prop:"dept_id"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.currenItem.dept_id,callback:function(e){t.$set(t.currenItem,"dept_id",e)},expression:"currenItem.dept_id"}},t._l(t.departmentData,(function(t){return a("el-option",{key:t.dept_id,attrs:{label:t.dept_name,value:t.dept_id}})})),1)],1),a("el-form-item",{attrs:{label:"角色ID",prop:"role_id"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.currenItem.role_id,callback:function(e){t.$set(t.currenItem,"role_id",e)},expression:"currenItem.role_id"}},t._l(t.juesData,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),a("el-form-item",{attrs:{label:"员工名称",prop:"staff_name"}},[a("el-input",{model:{value:t.currenItem.staff_name,callback:function(e){t.$set(t.currenItem,"staff_name",e)},expression:"currenItem.staff_name"}})],1),a("el-form-item",{attrs:{label:"员工账号",prop:"staff_account"}},[a("el-input",{model:{value:t.currenItem.staff_account,callback:function(e){t.$set(t.currenItem,"staff_account",e)},expression:"currenItem.staff_account"}})],1),a("el-form-item",{attrs:{label:"密码"}},[a("el-input",{attrs:{placeholder:"请输入新的密码"},model:{value:t.currenItem.staff_password,callback:function(e){t.$set(t.currenItem,"staff_password",e)},expression:"currenItem.staff_password"}})],1),a("el-form-item",{attrs:{label:"手机号"}},[a("el-input",{model:{value:t.currenItem.staff_phone,callback:function(e){t.$set(t.currenItem,"staff_phone",e)},expression:"currenItem.staff_phone"}})],1),a("el-form-item",{attrs:{label:"员工提成"}},[a("el-input",{model:{value:t.currenItem.staff_commission,callback:function(e){t.$set(t.currenItem,"staff_commission",e)},expression:"currenItem.staff_commission"}}),t._v(" (示例：10表示10%) ")],1),a("el-form-item",{attrs:{label:"赠送额度"}},[a("el-input",{model:{value:t.currenItem.staff_gift_amount,callback:function(e){t.$set(t.currenItem,"staff_gift_amount",e)},expression:"currenItem.staff_gift_amount"}})],1),a("el-form-item",{attrs:{label:"员工状态"}},[a("el-switch",{attrs:{"active-color":"#13ce66"},model:{value:t.staff_status_ui,callback:function(e){t.staff_status_ui=e},expression:"staff_status_ui"}})],1),a("el-form-item",{attrs:{label:"是否锁定"}},[a("el-switch",{attrs:{"active-color":"#13ce66"},model:{value:t.lock_ui,callback:function(e){t.lock_ui=e},expression:"lock_ui"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.updateDialog=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.validation("formName2")}}},[t._v("确定")])],1)],1),a("el-dialog",{attrs:{title:"删除-"+t.deltitle,visible:t.deleteDialog,width:"30%"},on:{"update:visible":function(e){t.deleteDialog=e}}},[a("span",[t._v("确定要删除此项吗")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.deleteDialog=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.deleteItem("one")}}},[t._v("确定")])],1)]),a("el-dialog",{attrs:{title:"删除",visible:t.mutilDeleteDialog,width:"50%"},on:{"update:visible":function(e){t.mutilDeleteDialog=e}}},[a("span",{staticClass:"s-title"},[t._v("确定要删除以下内容吗?")]),t._l(t.nameArr,(function(e,s){return a("div",{key:s,staticClass:"gz-name"},[t._v(" "+t._s(e)+" ")])})),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.mutilDeleteDialog=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.deleteItem("mutil")}}},[t._v("确定")])],1)],2)],1)},i=[],l=(a("4160"),a("a9e3"),a("159b"),{name:"currenPage",data:function(){return{merchants:{shop_id:0,merchant_id:0},sort:"",staff_status:"",dept_id:"",deptData:[],role_id:"",roleData:[],updateDialog:!1,insertDialog:!1,mutilDeleteDialog:!1,deleteDialog:!1,curPage:1,total:1,rules:{dept_id:[{required:!0,message:"请选择部门",trigger:"blur"}],role_id:[{required:!0,message:"请选择角色",trigger:"blur"}],staff_name:[{required:!0,message:"请输入员工名称",trigger:"blur"}],staff_account:[{required:!0,message:"请输入员工账号",trigger:"blur"}],staff_password:[{required:!0,message:"请输入员工密码",trigger:"blur"}]},tableListData:[],addItem:{shop_id:"",merchant_id:"",role_id:"",dept_id:"",staff_name:"",staff_account:"",staff_password:"",staff_phone:"",staff_commission:"",staff_gift_amount:"",staff_status:1,lock:0},staff_status_ui:!0,lock_ui:!1,currenItem:{shop_id:"",merchant_id:"",role_id:"",dept_id:"",staff_id:"",staff_name:"",staff_account:"",staff_password:"",staff_phone:"",staff_commission:"",staff_gift_amount:"",staff_status:1,lock:0},currenDeleteRow:"",multipleSelection:[],nameArr:[],updateDialogTitle:"",deltitle:"",searchValue:"",departmentData:"",juesData:""}},created:function(){this.merchants.shop_id=Number(this.$route.query.shop_id),this.merchants.merchant_id=Number(this.$route.query.merchant_id),this.addItem.shop_id=Number(this.$route.query.shop_id),this.addItem.merchant_id=Number(this.$route.query.merchant_id),this.getTableList(),this.getBumeng(),this.getJueshe()},methods:{resetData:function(){this.dept_id="",this.role_id="",this.staff_status="",this.sort="",this.curPage=1,this.getTableList()},screening:function(){this.curPage=1,this.getTableList()},getBumeng:function(){var t=this,e={merchant_id:this.merchants.merchant_id,shop_id:this.merchants.shop_id,page:1,page_size:99};this.api.staff.deptList(e).then((function(e){t.departmentData=e.data.data,t.deptData=e.data.data}))},getJueshe:function(){var t=this,e={merchant_id:this.merchants.merchant_id,shop_id:this.merchants.shop_id,page:1,page_size:99};this.api.staff.juesList(e).then((function(e){t.juesData=e.data.data,t.roleData=e.data.data}))},getTableList:function(){var t=this,e={merchant_id:this.merchants.merchant_id,shop_id:this.merchants.shop_id,dept_id:this.dept_id,role_id:this.role_id,staff_status:this.staff_status,sort:this.sort,page:this.curPage,name:this.searchValue};this.api.staff.userList(e).then((function(e){t.tableListData=e.data.data,t.total=e.data.count}))},searchDatas:function(){this.curPage=1,this.getTableList()},validation:function(t){var e=this;this.$refs[t].validate((function(a){if(!a)return!1;"formName1"==t?e.insertItem():e.multiUpdate()}))},insertItemtk:function(){this.insertDialog=!0,this.staff_status_ui=!0,this.lock_ui=!1},insertItem:function(){var t=this;this.staff_status_ui?this.addItem.staff_status=1:this.addItem.staff_status=0,this.lock_ui?this.addItem.lock=1:this.addItem.lock=0,this.addItem.staff_commission=Number(this.addItem.staff_commission),this.addItem.staff_gift_amount=Number(this.addItem.staff_gift_amount);var e=this.addItem;this.api.staff.userInsert(e).then((function(e){t.$refs["formName1"].resetFields(),t.$message({message:"添加成功",type:"success"}),t.getTableList(),t.insertDialog=!1}))},openUpdateDialog:function(t){var e=this;this.updateDialog=!0,this.updateDialogTitle=t.staff_name;var a={merchant_id:this.merchants.merchant_id,shop_id:this.merchants.shop_id,id:t.staff_id};this.api.staff.userDetail(a).then((function(t){e.currenItem.shop_id=t.data.data[0].shop_id,e.currenItem.merchant_id=t.data.data[0].merchant_id,e.currenItem.role_id=t.data.data[0].role_id,e.currenItem.dept_id=t.data.data[0].dept_id,e.currenItem.staff_id=t.data.data[0].staff_id,e.currenItem.staff_name=t.data.data[0].staff_name,e.currenItem.staff_account=t.data.data[0].staff_account,e.currenItem.staff_phone=t.data.data[0].staff_phone,e.currenItem.staff_commission=t.data.data[0].staff_commission,e.currenItem.staff_gift_amount=t.data.data[0].staff_gift_amount,e.currenItem.staff_status=t.data.data[0].staff_status,e.currenItem.lock=t.data.data[0].lock,1==e.currenItem.staff_status?e.staff_status_ui=!0:e.staff_status_ui=!1,1==e.currenItem.lock?e.lock_ui=!0:e.lock_ui=!1}))},multiUpdate:function(){var t=this;this.staff_status_ui?this.currenItem.staff_status=1:this.currenItem.staff_status=0,this.lock_ui?this.currenItem.lock=1:this.currenItem.lock=0,this.currenItem.staff_commission=Number(this.addItem.staff_commission),this.currenItem.staff_gift_amount=Number(this.addItem.staff_gift_amount);var e=this.currenItem;this.api.staff.userUpdate(e).then((function(e){t.$message({message:"修改成功",type:"success"}),t.getTableList(),t.updateDialog=!1}))},batchDelete:function(){""!=this.multipleSelection?this.mutilDeleteDialog=!0:this.$message({message:"请先勾选要删除的数据",type:"warning"})},openDelDialog:function(t){this.deltitle=t.staff_name,this.currenDeleteRow=t,this.deleteDialog=!0},selectItem:function(t){var e=this;this.multipleSelection=[],this.nameArr=[],t.forEach((function(t,a){e.multipleSelection.push(t.staff_id),e.nameArr.push(t.staff_name)}))},deleteItem:function(t){var e=this,a=new Array;a.push(this.currenDeleteRow.staff_id);var s="one"===t?a:this.multipleSelection,i={id:s,merchant_id:this.merchants.merchant_id,shop_id:this.merchants.shop_id};this.api.staff.userDelete(i).then((function(t){e.$message({message:"删除成功",type:"success"}),e.getTableList(),e.mutilDeleteDialog=!1,e.deleteDialog=!1}))},pageChange:function(t){this.curPage=t,this.getTableList()}}}),r=l,o=(a("b5eb"),a("2877")),n=Object(o["a"])(r,s,i,!1,null,"8131bb9e",null);e["default"]=n.exports},b5eb:function(t,e,a){"use strict";var s=a("0fd0"),i=a.n(s);i.a}}]);
//# sourceMappingURL=chunk-7c22d660.4b096997.js.map