(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3f02709c"],{"61c5":function(t,e,a){"use strict";var i=a("8165"),o=a.n(i);o.a},"7d19":function(t,e,a){"use strict";var i=a("90b3"),o=a.n(i);o.a},8165:function(t,e,a){},"90b3":function(t,e,a){},9157:function(t,e,a){"use strict";var i=a("9f04"),o=a.n(i);o.a},"9e26":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"uploadFiles"},[a("el-upload",{directives:[{name:"show",rawName:"v-show",value:""!=this.root,expression:"this.root != ''"}],staticClass:"upload-demo",attrs:{action:"/api/file/uploads","file-list":t.fileList,"on-remove":t.handleRemove,"on-change":t.handleChange,"on-error":t.failureMethods,"before-upload":t.beforeAvatarUpload,"http-request":t.uploadImg,"list-type":"picture"}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选择图片")])],1),a("h4",{directives:[{name:"show",rawName:"v-show",value:""==this.root,expression:"this.root == ''"}]},[t._v("没有设置路径“root”...")])],1)},o=[],r=(a("a434"),a("5f87")),n={name:"uploadImgEX",props:{root:{type:String,default:""}},data:function(){return{header:{headers:{"Content-Type":"multipart/form-data; boundary=--------------------------AAAAA",AccessToken:Object(r["a"])()}},fileList:[],DataImg:{url:"",uid:0},IMGdata:[]}},methods:{concert:function(){this.fileList=[]},handleRemove:function(t,e){for(var a=0;a<this.IMGdata.length;a++)if(this.IMGdata[a].uid==t.uid){this.IMGdata.splice(a,1),this.$emit("theIMGEX",this.IMGdata);break}},beforeAvatarUpload:function(t){var e=t.size/1024/1024<2;return e||this.$message.error("上传图片大小不能超过 2MB!"),e},handleChange:function(t,e){this.DataImg.url=t.raw,this.DataImg.uid=t.uid},uploadImg:function(t){var e=this,a=new FormData;a.append("file[]",this.DataImg.url),this.$ajax.post("/api/file/uploads",a,this.header).then((function(t){0==t.data.code&&(e.IMGdata.push({url:t.data.data.url_path[0],uid:e.DataImg.uid}),e.$emit("theIMGEX",e.IMGdata))}))},failureMethods:function(){this.$message({message:"上传图片失败，网络质量不佳或未知错误，请重试",type:"warning"})}}},s=n,l=(a("9157"),a("2877")),u=Object(l["a"])(s,i,o,!1,null,null,null);e["a"]=u.exports},"9f04":function(t,e,a){},a434:function(t,e,a){"use strict";var i=a("23e7"),o=a("23cb"),r=a("a691"),n=a("50c4"),s=a("7b0b"),l=a("65f0"),u=a("8418"),c=a("1dde"),d=a("ae40"),m=c("splice"),h=d("splice",{ACCESSORS:!0,0:0,1:2}),f=Math.max,p=Math.min,g=9007199254740991,v="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!m||!h},{splice:function(t,e){var a,i,c,d,m,h,b=s(this),D=n(b.length),w=o(t,D),C=arguments.length;if(0===C?a=i=0:1===C?(a=0,i=D-w):(a=C-2,i=p(f(r(e),0),D-w)),D+a-i>g)throw TypeError(v);for(c=l(b,i),d=0;d<i;d++)m=w+d,m in b&&u(c,d,b[m]);if(c.length=i,a<i){for(d=w;d<D-i;d++)m=d+i,h=d+a,m in b?b[h]=b[m]:delete b[h];for(d=D;d>D-i+a;d--)delete b[d-1]}else if(a>i)for(d=D-i;d>w;d--)m=d+i-1,h=d+a-1,m in b?b[h]=b[m]:delete b[h];for(d=0;d<a;d++)b[d+w]=arguments[d+2];return b.length=D-i+a,c}})},c55c:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-link",{directives:[{name:"show",rawName:"v-show",value:!t.isHtml&&""!=t.root,expression:"!isHtml && root != ''"}],attrs:{type:"primary"},on:{click:function(e){return t.handleHtml(!0)}}},[t._v("编辑HTML")]),a("el-link",{directives:[{name:"show",rawName:"v-show",value:t.isHtml&&""!=t.root,expression:"isHtml && root != ''"}],attrs:{type:"primary"},on:{click:function(e){return t.handleHtml(!1)}}},[t._v("返回编辑器")]),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.isHtml&&""!=t.root,expression:"!isHtml && root != ''"}],ref:"editorElem"}),a("el-input",{directives:[{name:"show",rawName:"v-show",value:t.isHtml&&""!=t.root,expression:"isHtml && root != ''"}],attrs:{type:"textarea",rows:15,placeholder:"请输入内容"},on:{change:t.handleHtmlChange},model:{value:t.editorContentHtml,callback:function(e){t.editorContentHtml=e},expression:"editorContentHtml"}}),a("h4",{directives:[{name:"show",rawName:"v-show",value:""==this.root,expression:"this.root == ''"}]},[t._v("没有设置路径“root”...")])],1)},o=[],r=a("6fad"),n=a.n(r),s=a("bc3a"),l=a.n(s),u=a("5f87"),c={name:"Editor",data:function(){return{isHtml:!1,editor:null,editorContent:"",editorContentHtml:"",header:{headers:{"Content-Type":"multipart/form-data; boundary=--------------------------AAAAA",AccessToken:Object(u["a"])()}}}},props:{editorContentData:{},root:{type:String,default:""}},watch:{editorContentData:function(t,e){this.editorContent||(this.editorContent=t,this.editor.txt.html(this.editorContent))}},mounted:function(){var t=this;this.editor=new n.a(this.$refs.editorElem),this.editor.config.onchange=function(e){t.editorContent=e,t.catchData(t.editorContent)},this.editor.config.withCredentials=!0,this.editor.config.customUploadImg=function(e,a){var i=new FormData;i.append("file[]",e[0]),i.append("root",t.root);var o="/api/file/uploads";l.a.post(o,i,t.header).then((function(e){var a=e.data,i=a.data.url_path;for(var o in i)t.editor.cmd.do("insertHTML",'<img src="https://files.ddhi.cn'+i[o]+'" style="max-width: 100%;">')}))},this.editor.config.uploadImgMaxSize=3145728,this.editor.config.uploadImgMaxLength=5,this.editor.config.uploadImgShowBase64=!0,this.editor.config.uploadFileName="myFileName",this.editor.config.menus=["head","bold","fontSize","fontName","italic","underline","strikeThrough","foreColor","backColor","link","list","justify","quote","emoticon","image","table","code","undo","redo"],this.editor.create()},methods:{catchData:function(t){this.$emit("editorData",t)},handleHtml:function(t){t&&(this.editorContentHtml=this.editorContent),this.isHtml=t},handleHtmlChange:function(){this.editorContent=this.editorContentHtml,this.editor.txt.html(this.editorContent)}}},d=c,m=(a("7d19"),a("2877")),h=Object(m["a"])(d,i,o,!1,null,null,null);e["a"]=h.exports},e8b4:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=this,a=e.$createElement,i=e._self._c||a;return i("div",{staticClass:"articleOperation"},[i("p",[e._v(e._s(e.title))]),i("div",[i("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.formData,rules:e.rules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"文章标题:",prop:"article_title"}},[i("el-input",{model:{value:e.formData.title,callback:function(t){e.$set(e.formData,"title",t)},expression:"formData.title"}})],1),i("el-form-item",{attrs:{label:"文章地址:",prop:"url"}},[i("el-input",{model:{value:e.formData.url,callback:function(t){e.$set(e.formData,"url",t)},expression:"formData.url"}},[i("template",{slot:"prepend"},[e._v("Http://")])],2)],1),i("el-form-item",{attrs:{label:"文章排序:",op:"sort"}},[i("el-input",{model:{value:e.formData.sort,callback:function(t){e.$set(e.formData,"sort",t)},expression:"formData.sort"}})],1),i("el-form-item",{attrs:{label:"文章图标:",prop:"image"}},[i("div",{staticClass:"imageType"},[e.imageInit?i("img",{staticClass:"imageInit",attrs:{src:e.formData.image,alt:""}}):e._e(),i("el-upload",{attrs:{action:"/file/uploads","list-type":"picture-card",headers:{AccessToken:this._getToken()},limit:1,data:{root:"article"},"on-success":e.handleSuccess,"before-upload":e.beforeAvatarUpload,name:"file[]","on-remove":e.handleRemove}},[i("i",{staticClass:"el-icon-plus"})]),i("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("img",{attrs:{width:"100%",src:e.formData.image}})])],1)]),i("el-form-item",{attrs:{label:"文章状态:",prop:"status"}},[i("el-radio-group",{model:{value:e.formData.status,callback:function(t){e.$set(e.formData,"status",t)},expression:"formData.status"}},[i("el-radio",{attrs:{label:1}},[e._v("是")]),i("el-radio",{attrs:{label:0}},[e._v("否")])],1)],1),i("editorBar",{attrs:{editorContentData:e.formData.content},on:{editorData:e.getEditorData}}),i("el-form-item",{staticStyle:{"margin-top":"20px"}},[i("el-button",{staticStyle:{"margin-right":"30px"},attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v(e._s(e.btnVal))]),i("el-button",{on:{click:function(){t.$router.go(-1)}}},[e._v("返回")])],1)],1)],1)])},o=[],r=a("ade3"),n=a("c55c"),s=a("9e26"),l={name:"articleOperation",data:function(){var t;return{imageUploadUrl:this.api.articleManage.uploadsImage,title:"",formData:{article_id:"",title:"",url:"",image:"",status:"",content:"",sort:""},rules:(t={title:[{required:!0,message:"请输入文章标题",trigger:"blur"}],url:[{required:!0,message:"请输入文章地址",trigger:"blur"}],sort:[{required:!0,message:"请输入文章排序",trigger:"blur"}]},Object(r["a"])(t,"url",[{required:!0,message:"请输入文章图标",trigger:"blur"}]),Object(r["a"])(t,"status",[{required:!0,message:"请输入文章状态",trigger:"blur"}]),t),btnVal:"新增",dialogVisible:!1,imageInit:!1}},components:{editorBar:n["a"],uploadFilesEX:s["a"]},created:function(){this.$route.query.id?(this.title="编辑文章",this.btnVal="修改",this.imageInit=!0,this.getArticleDetile(this.$route.query.id)):this.title="新增文章"},methods:{getArticleDetile:function(t){var e=this;this.api.articleManage.articleDetail({id:t}).then((function(t){var a,i=t.data.data,o=i.content,n=i.title,s=i.url,l=i.image,u=i.article_id,c=i.sort,d=i.status;e.formData=(a={content:o,title:n,url:s,status:d},Object(r["a"])(a,"content",o),Object(r["a"])(a,"sort",c),Object(r["a"])(a,"image",l),Object(r["a"])(a,"status",d),Object(r["a"])(a,"article_id",u),a),console.log(e.formData)}))},getEditorData:function(t){this.formData.content=t},beforeAvatarUpload:function(t){return this.imageInit=!1,!0},handleRemove:function(t,e){this.formData.image=null,setTimeout((function(){document.getElementsByClassName("el-upload--picture-card")[0].style.display="inline-block"}),200)},handleSuccess:function(t){this.formData.image=t.data?t.data.url_path[0]:t,document.getElementsByClassName("el-upload--picture-card")[0].style.display="none"},submitForm:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return console.log("error submit!!"),!1;e.$route.query.id?e.api.articleManage.editArticle(e.formData).then((function(t){console.log(t),e.$message.success("修改成功！"),e.$router.push({path:"/articleManage"})})):e.api.articleManage.addArticle(e.formData).then((function(t){e.$message.success("新增成功！"),e.$router.push({path:"/articleManage"})}))}))}}},u=l,c=(a("61c5"),a("2877")),d=Object(c["a"])(u,i,o,!1,null,null,null);e["default"]=d.exports}}]);
//# sourceMappingURL=chunk-3f02709c.ea3a1cd3.js.map