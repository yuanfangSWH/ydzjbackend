(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d4729b00"],{"16ce":function(e,n,t){"use strict";var o=t("2558"),i=t.n(o);i.a},2017:function(e,n,t){"use strict";var o=t("cafe"),i=t.n(o);i.a},2558:function(e,n,t){},"9ed6":function(e,n,t){"use strict";t.r(n);var o=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"login-container"},[t("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:e.loginForm,rules:e.loginRules,"auto-complete":"on","label-position":"left"}},[t("div",{staticClass:"title-container"},[t("h3",{staticClass:"title"},[e._v("天天总后台管理系统")])]),1==e.loginType?t("el-form-item",{attrs:{prop:"username"}},[t("span",{staticClass:"svg-container"},[t("svg-icon",{attrs:{"icon-class":"user"}})],1),t("el-input",{ref:"username",attrs:{placeholder:"请输入用户名",name:"username",type:"text",tabindex:"1","auto-complete":"on"},model:{value:e.loginForm.username,callback:function(n){e.$set(e.loginForm,"username",n)},expression:"loginForm.username"}})],1):e._e(),1==e.loginType?t("el-form-item",{attrs:{prop:"password"}},[t("span",{staticClass:"svg-container"},[t("svg-icon",{attrs:{"icon-class":"password"}})],1),t("el-input",{key:e.passwordType,ref:"password",attrs:{type:e.passwordType,placeholder:"请输入密码",name:"password",tabindex:"2","auto-complete":"on"},nativeOn:{keyup:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:e.handleLogin(n)}},model:{value:e.loginForm.password,callback:function(n){e.$set(e.loginForm,"password",n)},expression:"loginForm.password"}}),t("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[t("svg-icon",{attrs:{"icon-class":"password"===e.passwordType?"eye":"eye-open"}})],1)],1):e._e(),2==e.loginType?t("el-form-item",{attrs:{prop:"phone"}},[t("span",{staticClass:"svg-container"},[t("svg-icon",{attrs:{"icon-class":"user"}})],1),t("el-input",{ref:"phone",attrs:{placeholder:"请输入手机号",name:"phone",type:"text",tabindex:"1","auto-complete":"on"},model:{value:e.loginForm.phone,callback:function(n){e.$set(e.loginForm,"phone",n)},expression:"loginForm.phone"}})],1):e._e(),2==e.loginType?t("el-form-item",{attrs:{prop:"captcha"}},[t("span",{staticClass:"svg-container"},[t("svg-icon",{attrs:{"icon-class":"password"}})],1),t("el-input",{ref:"captcha",staticClass:"captcha",attrs:{placeholder:"请输入短信验证码",name:"captcha",type:"text",tabindex:"1","auto-complete":"on"},model:{value:e.loginForm.captcha,callback:function(n){e.$set(e.loginForm,"captcha",n)},expression:"loginForm.captcha"}}),t("el-button",{staticClass:"getCaptcha",attrs:{plain:""},on:{click:e.getCaptcha}},[e._v("获取短信验证码")])],1):e._e(),t("el-button",{staticStyle:{width:"100%","margin-bottom":"30px"},attrs:{loading:e.loading,type:"primary"},nativeOn:{click:function(n){return n.preventDefault(),e.handleLogin(n)}}},[e._v("登 录")]),t("div",{staticClass:"tips"},[t("el-link",{directives:[{name:"show",rawName:"v-show",value:2==e.loginType,expression:"loginType == 2"}],staticClass:"accountLogin",attrs:{underline:!1},on:{click:function(n){e.loginType=1}},model:{value:e.loginType,callback:function(n){e.loginType=n},expression:"loginType"}},[e._v("账号登录")]),t("el-link",{directives:[{name:"show",rawName:"v-show",value:1==e.loginType,expression:"loginType == 1"}],staticClass:"phoneLogin",attrs:{underline:!1},on:{click:function(n){e.loginType=2}},model:{value:e.loginType,callback:function(n){e.loginType=n},expression:"loginType"}},[e._v("手机登录")]),t("el-link",{staticClass:"forgot",attrs:{underline:!1},on:{click:e.forgotPsw}},[e._v("忘记密码?")])],1)],1)],1)},i=[],a=(t("c975"),t("ac1f"),t("61f7")),s={name:"Login",data:function(){var e=function(e,n,t){Object(a["c"])(n),t()},n=function(e,n,t){n.length<6?t(new Error("密码不能小于6位字符")):t()},t=function(e,n,t){Object(a["b"])(n)?t():t(new Error("请输入正确的手机号"))};return{ajaxConfig:{headers:{"Content-Type":"application/x-www-form-urlencoded"}},loginForm:{username:"",password:"",phone:"",captcha:""},loginRules:{username:[{required:!0,trigger:"blur",validator:e}],password:[{required:!0,trigger:"blur",validator:n}],phone:[{required:!0,trigger:"blur",validator:t}]},captchaData:{phone:"",scene:1},loading:!1,loginType:1,passwordType:"password",redirect:void 0}},watch:{$route:{handler:function(e){this.redirect=e.query&&e.query.redirect},immediate:!0}},created:function(){console.info(this.getSystem())},methods:{getCaptcha:function(e){var n=this;this.captchaData.phone=this.loginForm.phone,this.$store.dispatch("login/getCaptcha",this.captchaData).then((function(e){})).catch((function(){n.loading=!1}))},getSystem:function(){var e=navigator.platform,n=navigator.userAgent,t="",o="";return e.indexOf("Win")>-1?n.indexOf("Windows NT 5.0")>-1?t+="Win2000":n.indexOf("Windows NT 5.1")>-1?t+="WinXP":n.indexOf("Windows NT 5.2")>-1?t+="Win2003":n.indexOf("Windows NT 6.0")>-1?t+="WindowsVista":n.indexOf("Windows NT 6.1")>-1||n.indexOf("Windows 7")>-1?t+="Win7":n.indexOf("Windows 8")>-1?t+="Win8":n.indexOf("Windows NT 10")>-1?t+="Win10":t+="Windows":e.indexOf("Mac")>-1?n.indexOf("Mac OS X 11")>-1?t+="Mac OS X 11":n.indexOf("Mac OS X 10")>-1?t+="Mac OS X 10":n.indexOf("Mac OS X 9")>-1?t+="Mac OS X 9":t+="Mac OS":e.indexOf("X11")>-1?t+="Unix":e.indexOf("Linux")>-1?t+="Linux":t+="Other",t+="/",/[Ff]irefox(\/\d+\.\d+)/.test(n)?(o=/([Ff]irefox)\/(\d+\.\d+)/.exec(n),t+=o[1]+o[2]):/MSIE \d+\.\d+/.test(n)?(o=/MS(IE) (\d+\.\d+)/.exec(n),t+=o[1]+o[2]):/[Cc]hrome\/\d+/.test(n)?(o=/([Cc]hrome)\/(\d+)/.exec(n),t+=o[1]+o[2]):/[Vv]ersion\/\d+\.\d+\.\d+(\.\d)* *[Ss]afari/.test(n)?(o=/[Vv]ersion\/(\d+\.\d+\.\d+)(\.\d)* *([Ss]afari)/.exec(n),t+=o[3]+o[1]):/[Oo]pera.+[Vv]ersion\/\d+\.\d+/.test(n)?(o=/([Oo]pera).+[Vv]ersion\/(\d+)\.\d+/.exec(n),t+=o[1]+o[2]):t+="unknown",t},showPwd:function(){var e=this;"password"===this.passwordType?this.passwordType="":this.passwordType="password",this.$nextTick((function(){e.$refs.password.focus()}))},handleLogin:function(){var e=this;this.$refs.loginForm.validate((function(n){if(!n)return console.log("error submit!!"),!1;e.loading=!0;var t=1===e.loginType?"login/login":"login/phoneLogin",o=e.loginForm;1===e.loginType&&(o["os"]=e.getSystem()),e.$store.dispatch(t,o).then((function(n){localStorage.setItem("userInfoBackend",JSON.stringify(n.data)),e._setVuex("userinfo",n.data),localStorage.setItem("strawberry",JSON.stringify(n.data.oss_url)),e.$router.push({path:"/HomeIndex"}),e.loading=!1})).catch((function(){e.loading=!1}))}))},getShopList:function(){this.$store.dispatch("shop/getShopInfo").then((function(e){sessionStorage.setItem("shopList",JSON.stringify(e.data))}))},forgotPsw:function(){this.$router.push({path:"/forgot"})}}},r=s,c=(t("2017"),t("16ce"),t("2877")),l=Object(c["a"])(r,o,i,!1,null,"06f27ffe",null);n["default"]=l.exports},cafe:function(e,n,t){}}]);
//# sourceMappingURL=chunk-d4729b00.42544d18.js.map