{"version":3,"sources":["webpack:///./node_modules/echarts/lib/component/tooltip.js","webpack:///./node_modules/echarts/lib/coord/cartesian/cartesianAxisHelper.js","webpack:///./node_modules/echarts/lib/component/gridSimple.js","webpack:///./node_modules/echarts/lib/component/dataset.js","webpack:///./node_modules/echarts/lib/component/tooltip/TooltipContent.js","webpack:///./node_modules/echarts/lib/component/axisPointer/findPointFromSeries.js","webpack:///./node_modules/echarts/lib/chart/helper/Symbol.js","webpack:///./node_modules/echarts/lib/component/axisPointer/globalListener.js","webpack:///./node_modules/echarts/lib/chart/line/LineSeries.js","webpack:///./node_modules/echarts/lib/preprocessor/helper/compatStyle.js","webpack:///./node_modules/echarts/lib/lang.js","webpack:///./node_modules/zrender/lib/tool/parseSVG.js","webpack:///./node_modules/echarts/lib/model/mixin/dataFormat.js","webpack:///./node_modules/echarts/lib/echarts.js","webpack:///./node_modules/echarts/lib/component/tooltip/TooltipView.js","webpack:///./node_modules/echarts/lib/component/legend/legendAction.js","webpack:///./node_modules/echarts/lib/component/axisPointer/AxisPointerModel.js","webpack:///./node_modules/echarts/lib/coord/cartesian/AxisModel.js","webpack:///./node_modules/echarts/lib/component/axisPointer/CartesianAxisPointer.js","webpack:///./node_modules/echarts/lib/model/Series.js","webpack:///./node_modules/echarts/lib/component/axis/axisSplitHelper.js","webpack:///./node_modules/echarts/lib/coord/cartesian/Grid.js","webpack:///./node_modules/echarts/lib/component/legend/LegendView.js","webpack:///./node_modules/echarts/lib/component/title.js","webpack:///./node_modules/echarts/lib/component/axis/AxisView.js","webpack:///./node_modules/echarts/lib/stream/Scheduler.js","webpack:///./node_modules/echarts/lib/model/Component.js","webpack:///./node_modules/echarts/lib/coord/axisDefault.js","webpack:///./node_modules/echarts/lib/component/helper/listComponent.js","webpack:///./node_modules/echarts/lib/model/Global.js","webpack:///./node_modules/echarts/lib/visual/symbol.js","webpack:///./node_modules/echarts/lib/component/tooltip/TooltipRichContent.js","webpack:///./node_modules/echarts/lib/ExtensionAPI.js","webpack:///./node_modules/echarts/lib/component/legend/LegendModel.js","webpack:///./node_modules/echarts/lib/layout/points.js","webpack:///./node_modules/echarts/lib/util/component.js","webpack:///./node_modules/echarts/lib/model/globalDefault.js","webpack:///./node_modules/echarts/lib/coord/cartesian/GridModel.js","webpack:///./node_modules/echarts/lib/component/legend/legendFilter.js","webpack:///./node_modules/echarts/lib/loading/default.js","webpack:///./node_modules/echarts/lib/coord/axisModelCreator.js","webpack:///./node_modules/echarts/lib/chart/line/helper.js","webpack:///./node_modules/echarts/lib/component/tooltip/TooltipModel.js","webpack:///./node_modules/zrender/lib/graphic/shape/Ellipse.js","webpack:///./node_modules/echarts/lib/component/axis.js","webpack:///./node_modules/echarts/lib/chart/helper/createClipPathFromCoordSys.js","webpack:///./node_modules/echarts/lib/view/Component.js","webpack:///./node_modules/echarts/lib/visual/aria.js","webpack:///./node_modules/echarts/lib/theme/light.js","webpack:///./node_modules/echarts/lib/chart/helper/labelHelper.js","webpack:///./node_modules/echarts/lib/model/OptionManager.js","webpack:///./node_modules/echarts/lib/component/axisPointer.js","webpack:///./node_modules/echarts/lib/coord/cartesian/Cartesian2D.js","webpack:///./node_modules/echarts/lib/component/axisPointer/modelHelper.js","webpack:///./node_modules/echarts/lib/coord/cartesian/Cartesian.js","webpack:///./node_modules/echarts/lib/processor/dataStack.js","webpack:///./node_modules/echarts/lib/component/legend.js","webpack:///./node_modules/echarts/lib/component/axisPointer/AxisPointerView.js","webpack:///./node_modules/echarts/lib/chart/line/poly.js","webpack:///./node_modules/echarts/lib/component/axisPointer/BaseAxisPointer.js","webpack:///./node_modules/echarts/lib/model/mixin/boxLayout.js","webpack:///./node_modules/echarts/lib/model/mixin/colorPalette.js","webpack:///./node_modules/echarts/lib/view/Chart.js","webpack:///./node_modules/echarts/lib/component/axisPointer/axisTrigger.js","webpack:///./node_modules/echarts/lib/coord/cartesian/Axis2D.js","webpack:///./node_modules/echarts/lib/coord/geo/mapDataStorage.js","webpack:///./node_modules/echarts/lib/chart/line.js","webpack:///./node_modules/echarts/lib/chart/line/lineAnimationDiff.js","webpack:///./node_modules/echarts/lib/chart/line/LineView.js","webpack:///./node_modules/echarts/lib/theme/dark.js","webpack:///./node_modules/echarts/lib/component/axis/CartesianAxisView.js","webpack:///./node_modules/echarts/lib/stream/task.js","webpack:///./node_modules/echarts/lib/chart/helper/SymbolDraw.js","webpack:///./node_modules/echarts/lib/component/axis/AxisBuilder.js","webpack:///./node_modules/echarts/lib/preprocessor/backwardCompat.js","webpack:///./node_modules/echarts/lib/visual/seriesColor.js","webpack:///./node_modules/echarts/lib/processor/dataSample.js","webpack:///./node_modules/echarts/lib/component/axisPointer/viewHelper.js"],"names":["echarts","registerAction","type","event","update","zrUtil","layout","gridModel","axisModel","opt","grid","coordinateSystem","axis","otherAxisOnZeroOf","getAxesOnZeroOf","rawAxisPosition","position","axisPosition","axisDim","dim","rect","getRect","rectBound","x","width","y","height","idx","left","right","top","bottom","onZero","axisOffset","get","posBound","onZeroCoord","toGlobalCoord","dataToCoord","Math","max","min","rotation","PI","dirMap","labelDirection","tickDirection","nameDirection","labelOffset","retrieve","labelInside","labelRotate","z2","exports","graphic","extendComponentView","render","ecModel","this","group","removeAll","add","Rect","shape","style","defaults","fill","getItemStyle","silent","registerPreprocessor","option","xAxis","yAxis","ComponentModel","ComponentView","_sourceHelper","detectSourceFormat","_sourceType","SERIES_LAYOUT_BY_COLUMN","extend","defaultOption","seriesLayoutBy","sourceHeader","dimensions","source","optionUpdated","zrColor","eventUtil","domUtil","env","formatUtil","each","toCamelCase","vendors","gCssText","assembleTransition","duration","transitionCurve","transitionText","map","vendorPrefix","join","assembleFont","textStyleModel","cssText","fontSize","color","getTextColor","push","getFont","lineHeight","round","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","name","val","assembleCssText","tooltipModel","transitionDuration","backgroundColor","getModel","padding","canvasSupported","toHex","borderName","camelCase","normalizeCssArray","makeStyleCoord","out","zr","appendToBody","zrX","zrY","zrPainter","painter","zrViewportRoot","getViewportRoot","transformLocalCoord","document","body","viewportRootOffset","getViewportRootOffset","offsetLeft","offsetTop","getWidth","getHeight","TooltipContent","container","api","wxa","el","createElement","domBelongToZr","_zr","getZr","_appendToBody","_styleCoord","appendChild","_container","_show","_hideTimeout","self","onmouseenter","_enterable","clearTimeout","_inContent","onmousemove","e","window","handler","normalizeEvent","dispatch","onmouseleave","hideLater","_hideDelay","prototype","constructor","stl","currentStyle","defaultView","getComputedStyle","domStyle","alwaysShowContent","_moveTooltipIfResized","ratioX","ratioY","realX","realY","moveTo","show","styleCoord","display","innerHTML","pointerEvents","setContent","content","setEnterable","enterable","getSize","clientWidth","clientHeight","hide","time","setTimeout","bind","isShow","dispose","parentNode","removeChild","getOuterSize","parseInt","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth","_default","module","modelUtil","finder","seriesModel","point","seriesIndex","getSeriesByIndex","data","getData","dataIndex","queryDataIndex","isArray","getItemGraphicEl","coordSys","getTooltipPosition","dataToPoint","getValues","mapDimension","getBoundingRect","clone","applyTransform","transform","_symbol","createSymbol","_number","parsePercent","_labelHelper","getDefaultLabel","SymbolClz","seriesScope","Group","call","updateData","symbolProto","getSymbolSize","symbolSize","getItemVisual","Array","slice","getScale","driftSymbol","dx","dy","parent","drift","_createSymbol","symbolType","keepAspect","symbolPath","attr","culling","scale","_symbolType","stopSymbolAnimation","toLastFrame","childAt","stopAnimation","getSymbolPath","highlight","trigger","downplay","setZ","zlevel","z","setDraggable","draggable","cursor","hostModel","isInit","updateProps","_updateCommon","fadeIn","target","opacity","initProps","_seriesModel","normalStyleAccessPath","emphasisStyleAccessPath","normalLabelAccessPath","emphasisLabelAccessPath","highDownOnUpdate","fromState","toState","incremental","useHoverLayer","__symbolOriginalScale","ratio","emphasisOpt","animateTo","useStyle","strokeNoScale","setStyle","itemStyle","hoverItemStyle","symbolOffset","labelModel","hoverLabelModel","hoverAnimation","cursorStyle","hasItemOption","itemModel","getItemModel","getShallow","elStyle","symbolRotate","setColor","symbolInnerColor","liftZ","z2Origin","__z2Origin","useNameLabel","getLabelDefaultText","getName","setLabelStyle","labelFetcher","labelDataIndex","defaultText","isRectText","autoColor","hoverStyle","isAnimationEnabled","setHoverStyle","fadeOut","cb","keepLabel","text","inherits","_model","makeInner","inner","register","key","node","records","initGlobalListeners","record","useHandler","eventType","on","dis","makeDispatchAction","dispatchAction","dispatchTooltipFinally","pendings","initialized","curry","doEnter","onLeave","actuallyPayload","showLen","showTip","length","hideLen","hideTip","currTrigger","payload","pendingList","unregister","_config","createListFromArray","__DEV__","SeriesModel","dependencies","getInitialData","getSource","useEncodeDefaulter","legendHoverLink","clip","label","lineStyle","step","smooth","smoothMonotone","symbol","showSymbol","showAllSymbol","connectNulls","sampling","animationEasing","progressive","hoverLayerThreshold","Infinity","isObject","POSSIBLE_STYLES","compatEC2ItemStyle","itemStyleOpt","i","len","styleName","normalItemStyleOpt","normal","emphasisItemStyleOpt","emphasis","merge","convertNormalEmphasis","optType","useExtend","normalOpt","removeEC3NormalStatus","compatTextStyle","propName","labelOptSingle","textStyle","TEXT_STYLE_OPTIONS","hasOwnProperty","compatEC3CommonStyles","processSeries","seriesOpt","markPoint","markLine","markArea","nodes","edgeData","links","edges","isTypedArray","categories","mpData","mlData","breadcrumb","levels","leaves","toArr","o","toObj","isTheme","series","axes","axisName","axisOpt","axisPointer","parallel","parallelOpt","parallelAxisDefault","calendar","calendarOpt","radar","radarOpt","geo","geoOpt","regions","regionObj","timeline","timelineOpt","item","toolbox","toolboxOpt","feature","featureOpt","tooltip","legend","selector","all","inverse","brush","title","polygon","lineX","lineY","keep","clear","dataView","lang","dataZoom","zoom","back","magicType","line","bar","stack","tiled","restore","saveAsImage","typeNames","pie","scatter","effectScatter","tree","treemap","boxplot","candlestick","k","heatmap","lines","graph","sankey","funnel","gauge","pictorialBar","themeRiver","sunburst","aria","general","withTitle","withoutTitle","single","prefix","withName","withoutName","multiple","separator","middle","end","allData","partialData","ZImage","Text","Circle","Ellipse","Line","Path","Polygon","Polyline","LinearGradient","Style","matrix","_path","createFromString","_util","isString","trim","DILIMITER_REG","parseXML","svg","parser","DOMParser","parseFromString","nodeType","firstChild","nodeName","toLowerCase","nextSibling","SVGParser","_defs","_root","_isDefine","_isText","parse","xml","Error","root","viewBox","getAttribute","parseFloat","isNaN","parseAttributes","viewBoxRect","viewBoxTransform","child","_parseNode","viewBoxArr","split","makeViewBoxTransform","ignoreViewBox","elRoot","ignoreRootClip","setClipPath","xmlNode","parentGroup","defineParsers","def","id","nodeParsers","_parseText","_textX","_textY","textContent","transformText","inheritStyle","g","setShape","circle","cx","cy","r","x1","y1","x2","y2","ellipse","rx","ry","points","parsePoints","path","polyline","img","image","d","gradient","_parseGradientColorStops","stop","offset","indexOf","stopColor","addColorStop","__inheritedStyle","pointsString","list","attributesMap","defs","onlyInlineStyle","zrStyle","isTextEl","parseTransformAttribute","parseStyleAttribute","svgAttrName","attrValue","elFillProp","elStrokeProp","set","getPaint","stroke","elPropName","textBaseline","textAlign","lineDash","urlRegex","str","urlMatch","match","url","transformRegex","replace","m","transformOps","value","create","translate","rotate","console","warn","setLocalTransform","styleRegex","result","styleRegResult","styleList","lastIndex","exec","scaleX","scaleY","viewBoxScale","viewBoxPosition","parseSVG","_dataProvider","retrieveRawValue","_format","getTooltipMarker","formatTpl","getTooltipRenderMode","DIMENSION_LABEL_REG","getDataParams","dataType","rawValue","getRawValue","rawDataIndex","getRawIndex","itemOpt","getRawDataItem","borderColor","getComponent","renderModeOption","renderMode","mainType","isSeries","userOutput","componentType","componentSubType","subType","componentIndex","seriesType","seriesId","seriesName","dimensionNames","encode","marker","$vars","getFormattedLabel","status","dimIndex","labelProp","params","formatter","dimensionIndex","origin","charAt","formatTooltip","zrender","colorTool","timsort","Eventful","GlobalModel","ExtensionAPI","CoordinateSystemManager","OptionManager","backwardCompat","dataStack","ChartView","_throttle","throttle","seriesColor","loadingDefault","Scheduler","lightTheme","darkTheme","mapDataStorage","assert","isFunction","parseClassType","version","TEST_FRAME_REMAIN_TIME","PRIORITY_PROCESSOR_FILTER","PRIORITY_PROCESSOR_SERIES_FILTER","PRIORITY_PROCESSOR_DATASTACK","PRIORITY_PROCESSOR_STATISTIC","PRIORITY_VISUAL_LAYOUT","PRIORITY_VISUAL_PROGRESSIVE_LAYOUT","PRIORITY_VISUAL_GLOBAL","PRIORITY_VISUAL_CHART","PRIORITY_VISUAL_POST_CHART_LAYOUT","PRIORITY_VISUAL_COMPONENT","PRIORITY_VISUAL_BRUSH","PRIORITY","PROCESSOR","FILTER","SERIES_FILTER","STATISTIC","VISUAL","LAYOUT","PROGRESSIVE_LAYOUT","GLOBAL","CHART","POST_CHART_LAYOUT","COMPONENT","BRUSH","IN_MAIN_PROCESS","OPTION_UPDATED","ACTION_REG","createRegisterEventWithLowercaseName","method","ignoreDisposed","eventName","context","_disposed","disposedWarning","MessageCenter","ECharts","dom","theme","opts","themeStorage","_dom","defaultRenderer","init","renderer","devicePixelRatio","_throttledZrFlush","flush","_theme","_chartsViews","_chartsMap","_componentsViews","_componentsMap","_coordSysMgr","_api","createExtensionAPI","prioritySortFunc","a","b","__prio","visualFuncs","dataProcessorFuncs","_scheduler","_ecEventProcessor","EventProcessor","_messageCenter","_initEvents","resize","_pendingActions","animation","_onframe","bindRenderedEvent","setAsPrimitive","off","one","mixin","echartsProto","doConvertPixel","methodName","coordSysList","getCoordinateSystems","parseFinder","scheduler","prepare","updateMethods","flushPendingActions","triggerUpdatedEvent","unfinished","remainTime","startTime","Date","performSeriesTasks","performDataProcessorTasks","updateStreamModes","performVisualTasks","renderSeries","getDom","setOption","notMerge","lazyUpdate","optionManager","optionPreprocessorFuncs","setTheme","error","getOption","getDevicePixelRatio","dpr","getRenderedCanvas","pixelRatio","getSvgDataURL","svgSupported","storage","getDisplayList","toDataURL","getDataURL","excludeComponents","excludesComponentViews","eachComponent","component","view","__viewId","ignore","getType","getConnectedDataURL","isSvg","groupId","mathMin","mathMax","MAX_NUMBER","connectedGroups","canvasList","instances","chart","canvas","getSvgDom","boundingRect","getBoundingClientRect","targetCanvas","createCanvas","getSvgRoot","connectedBackgroundColor","setBackgroundColor","refreshImmediately","Image","convertToPixel","convertFromPixel","containPixel","models","model","containPoint","getVisual","visualType","defaultMainType","dataIndexInside","indexOfRawIndex","getViewOfComponentModel","componentModel","getViewOfSeriesModel","prepareAndUpdate","coordSysMgr","restoreData","clearColorPalette","colorArr","stringify","performPostUpdateFuncs","updateTransform","ecIns","componentDirtyList","componentView","__alive","seriesDirtyMap","createHashMap","eachSeries","chartView","uid","setDirty","dirtyMap","updateView","markUpdateMethod","updateVisual","updateLayout","restorePipelines","prepareStageTasks","prepareView","plan","updateDirectly","query","condition","excludeSeriesId","normalizeToArray","callView","concat","__model","chartsMap","doDispatchAction","payloadType","escapeConnect","actionWrap","actions","actionInfo","cptType","updateMethod","pop","payloads","batched","batch","eventObj","eventObjBatch","isHighDown","batchItem","action","main","sub","pendingActions","shift","isFinished","isComponent","viewList","viewMap","doPrepare","viewId","classType","Clazz","getClass","__id","__ecComponentInfo","index","renderTask","remove","splice","renderComponents","dirtyList","updateZ","updatePayload","dirty","perform","getPerformArgs","updateBlend","updateHoverLayerStatus","postUpdateFuncs","func","_loadingFX","optionChanged","resetOption","showLoading","cfg","hideLoading","loadingEffects","makeActionFromEvent","eventActionMap","browser","weChat","appendData","MOUSE_EVENT_NAMES","elCount","traverse","preventUsingHoverLayer","blendMode","isGroup","blend","eachPendingDisplayable","displayable","ecInstance","getComponentByElement","modelInfo","eventInfo","eveName","isGlobalOut","dataModel","eventData","targetEl","packedEvent","zrEventfulCallAtLast","actionType","isDisposed","setAttribute","DOM_ATTRIBUTE_KEY","normalizeQuery","cptQuery","dataQuery","otherQuery","condCptType","suffixes","dataKeys","reserved","propSuffix","suffixPos","lastIndexOf","filter","args","check","filterForExposedEvent","host","prop","propOnHost","afterTrigger","idBase","groupIdBase","enableConnect","STATUS_PENDING","STATUS_UPDATING","STATUS_UPDATED","STATUS_KEY","updateConnectedChartsStatus","charts","otherChart","otherCharts","existInstance","getInstanceByDom","connect","disConnect","disconnect","getInstanceById","registerTheme","preprocessorFunc","registerProcessor","priority","processor","normalizeRegister","registerPostUpdate","postUpdateFunc","test","registerCoordinateSystem","CoordinateSystem","getCoordinateSystemDimensions","coordSysCreator","getDimensionsInfo","registerLayout","layoutTask","registerVisual","visualTask","targetList","fn","defaultPriority","stageHandler","wrapStageHandler","__raw","registerLoading","loadingFx","extendComponentModel","extendSeriesModel","extendChartView","setCanvasCreator","creator","$override","registerMap","mapName","geoJson","specialAreas","getMap","retrieveMap","geoJSON","noop","dataTool","___ec_export","TooltipRichContent","numberUtil","findPointFromSeries","layoutUtil","Model","globalListener","axisHelper","axisPointerViewHelper","proxyRect","tooltipContent","_renderMode","_newLine","_tooltipContent","_tooltipModel","_ecModel","_lastDataByCoordSys","_alwaysShowContent","_initGlobalListener","_keepShow","triggerOn","_tryShow","_hide","_lastX","_lastY","_refreshUpdateTimeout","manuallyShowTip","from","_ticket","dataByCoordSys","offsetX","offsetY","tooltipOption","_manuallyAxisShowTip","pointInfo","findHover","manuallyHideTip","coordSysAxesInfo","buildTooltipModel","_showAxisTooltip","_showSeriesItemTooltip","_showComponentItemTooltip","_showOrMove","delay","_showTimout","globalTooltipModel","singleDefaultHTML","singleParamsList","singleTooltipModel","newLine","markers","itemCoordSys","dataByAxis","axisIndex","axisValue","seriesDefaultHTML","valueLabel","getValueLabel","seriesDataIndices","valueLabelOpt","idxItem","dataParams","axisType","axisId","getAxisRawValue","axisValueLabel","html","seriesTooltip","newMarkers","firstLine","encodeHTML","reverse","positionExpr","_updateContentNotChangedOnAxis","_updatePosition","_showTooltipContent","random","undefined","tooltipTrigger","defaultHtml","asyncTicket","tooltipOpt","subTooltipModel","callback","cbTicket","viewWidth","viewHeight","contentSize","align","vAlign","viewSize","layoutRect","getLayoutRect","pos","calcTooltipPosition","refixTooltipPosition","isCenterAlign","confineTooltipPosition","lastCoordSys","contentNotChanged","lastItemCoordSys","indexCoordSys","lastDataByAxis","thisItemCoordSys","thisDataByAxis","lastItem","indexAxis","thisItem","lastIndices","newIndices","lastIdxItem","j","newIdxItem","modelCascade","resultModel","isInstance","gapH","gapV","size","domWidth","domHeight","gap","rectWidth","rectHeight","legendSelectActionHandler","isSelected","selectedMap","isToggleSelect","legendModel","legendData","isItemSelected","selected","AxisPointerModel","snap","triggerTooltip","link","animationDurationUpdate","shadowStyle","precision","margin","borderWidth","handle","icon","axisModelCreator","axisModelCommonMixin","AxisModel","superApply","arguments","resetRange","mergeOption","getCoordSysModel","queryComponents","gridIndex","gridId","getAxisType","extraOption","BaseAxisPointer","viewHelper","cartesianAxisHelper","AxisView","CartesianAxisPointer","makeElOption","elOption","axisPointerModel","axisPointerType","otherExtent","getCartesian","getOtherAxis","getGlobalExtent","pixelValue","buildElStyle","pointerOption","pointerShapeBuilder","graphicKey","pointer","layoutInfo","buildCartesianSingleLabelElOption","getHandleTransform","labelMargin","getTransformedPosition","updateHandleTransform","delta","axisExtent","currPosition","cursorOtherValue","cursorPoint","tooltipOptions","verticalAlign","targetShape","makeLineShape","getAxisDimIndex","subPixelOptimize","shadow","bandWidth","getBandWidth","span","makeRectShape","registerAxisPointerClass","formatTime","addCommas","colorPaletteMixin","dataFormatMixin","_layout","getLayoutParams","mergeLayoutParam","_task","createTask","prepareSource","legendVisualProvider","visualColorAccessPath","visualBorderColorAccessPath","layoutMode","parentModel","extraOpt","dataTask","count","dataTaskCount","reset","dataTaskReset","mergeDefaultAndTheme","wrapData","dataBeforeProcessed","autoSeriesName","inputPositionParams","themeSubType","hasClass","getTheme","getDefaultOption","defaultEmphasis","fillDataTextStyle","newSeriesOption","props","getRawData","task","getCurrentTask","getLinkedData","setData","modifyOutputEnd","setOutputEnd","outputData","getBaseAxis","multipleSeries","isRichText","markerId","formatArrayValue","vertially","reduce","dimItem","getDimensionInfo","displayName","setEachItem","dimInfo","otherDims","dimType","markName","dimHead","dimHeadStr","valStr","tooltipDims","formatSingleValue","tooltipDimLen","isValueArr","colorStops","formattedValue","colorEl","isNameSpecified","colorStr","animationEnabled","getColorFromPalette","scope","requestColorNum","coordDimToDataDim","coordDim","getProgressive","getProgressiveThreshold","getAxisTooltipData","pipeTask","preventIncremental","pipelineContext","getSeriesAutoName","dataDims","nameArr","dataDim","cloneShallow","dataTaskProgress","param","CHANGABLE_METHODS","wrapMethod","onDataSelfChange","pipeline","getPipeline","currentTask","agentStubMap","rectCoordAxisBuildSplitArea","axisView","axisGroup","isBlank","splitAreaModel","areaStyleModel","areaColors","gridRect","ticksCoords","getTicksCoords","tickModel","clamp","areaColorsLen","lastSplitAreaColors","__splitAreaColors","newSplitAreaColors","colorIndex","cIndex","tickValue","prev","coord","areaStyle","getAreaStyle","tickCoord","isHorizontal","anid","rectCoordAxisHandleRemove","_axisHelper","createScaleByModel","ifAxisCrossZero","niceScaleExtent","estimateLabelUnionRect","Cartesian2D","Axis2D","_dataStackHelper","getStackedDimension","isAxisUsedInTheGrid","Grid","_coordsMap","_coordsList","_axesMap","_axesList","_initCartesian","gridProto","fixAxisOnZero","axesMap","otherAxisDim","onZeroRecords","otherAxes","onZeroAxisIndex","canOnZeroToAxis","getOnZeroRecordKey","updateAxisTransform","coordBase","getExtent","axisExtentSum","toLocalCoord","axisPointerEnabled","_rect","_updateScale","ignoreContainLabel","getBoxLayoutParams","axesList","adjustAxes","extent","setExtent","labelUnionRect","getAxis","axesMapOnDim","getAxes","xAxisIndex","yAxisIndex","coordList","getCartesians","_findConvertTarget","cartesian","pointToData","coordToData","xAxisModel","getReferringComponents","yAxisModel","coordsList","axisPositionUsed","axesCount","createAxisCreator","isCategory","onBand","addAxis","unionExtent","unionExtentFromData","isCartesian2D","axesModels","findAxesModels","getTooltipAxes","baseAxes","baseAxis","otherAxis","axesTypes","grids","_listComponent","makeBackground","newlineDisabled","_contentGroup","_backgroundEl","_selectorGroup","_isFirstRender","getContentGroup","getSelectorGroup","isFirstRender","resetInner","itemAlign","orient","selectorPosition","renderInner","positionInfo","viewportSize","maxSize","mainRect","layoutInner","contentGroup","legendDrawnMap","selectMode","eachRawSeries","getSeriesByName","legendSymbolType","itemGroup","_createItem","dispatchSelectAction","dispatchHighlightAction","dispatchDownplayAction","provider","containName","indexOfName","newline","_createSelector","selectorGroup","createSelectorButton","selectorItem","labelText","onclick","emphasisLabelModel","itemWidth","itemHeight","inactiveColor","inactiveBorderColor","symbolKeepAspect","legendModelItemStyle","itemIcon","legendGlobalTooltipModel","legendSymbol","setSymbolStyle","legendSymbolCenter","textX","setTextStyle","textFill","textVerticalAlign","hitRect","invisible","formatterParams","legendIndex","eachChild","__legendDataIndex","box","contentRect","contentPos","selectorRect","selectorPos","selectorButtonGap","orientIdx","getOrient","wh","hw","yx","dataName","windowOpen","ignoreSize","subtext","subtarget","itemGap","fontWeight","subtextStyle","titleModel","subtextStyleModel","retrieve2","textEl","disableBox","textRect","subText","subTextEl","sublink","triggerEvent","groupRect","layoutOption","alignStyle","axisPointerModelHelper","_axisPointer","axisPointerClass","fixValue","updateAxisPointer","force","disposeAxisPointer","forceRender","getAxisPointerClass","getAxisPointerModel","axisPointerClazz","clazz","_component","getUID","dataProcessorHandlers","visualHandlers","_dataProcessorHandlers","_visualHandlers","_allHandlers","_stageTaskMap","proto","performStageTasks","stageHandlers","needSetDirty","__pipeline","stageHandlerRecord","seriesTaskMap","overallTask","overallNeedDirty","stub","performArgs","block","pipelineId","skip","performRawSeries","isSeriesFiltered","taskRecord","isBlock","_pipelineMap","pCtx","progressiveEnabled","progressiveRender","__idxInPipeline","blockIndex","modDataCount","modBy","ceil","dataLen","incrementalPrepareRender","threshold","large","pipelineMap","head","tail","pipe","stageTaskMap","createSeriesStageTask","overallReset","createOverallStageTask","__block","getUpstream","getTargetSeries","seriesTaskPlan","seriesTaskReset","seriesTaskCount","useClearVisual","isVisual","isLayout","createOnAllSeries","eachRawSeriesByType","removeKey","overallTaskReset","overallProgress","createStub","stubReset","onDirty","stubOnDirty","agent","getSeries","upstreamContext","stubProgress","getDownstream","clearAllVisual","resetDefines","v","makeSeriesTaskProgress","singleSeriesTaskProgress","resetDefineIdx","resetDefine","dataEach","start","progress","detectSeriseType","legacyFunc","ecModelMock","apiMock","mockMethods","Clz","eachSeriesByType","cond","componentUtil","_clazz","enableClassManagement","boxLayoutMixin","dependentModels","$constructor","themeModel","newCptOption","fields","optList","Class","superClass","getDependencies","deps","getClassesByMainType","unshift","registerWhenExtend","enableSubTypeDefaulter","enableTopologicalTravel","nameLocation","nameRotate","nameTruncate","maxWidth","ellipsis","placeholder","nameTextStyle","nameGap","axisLine","axisTick","inside","axisLabel","showMinLabel","showMaxLabel","splitLine","splitArea","axisDefault","categoryAxis","boundaryGap","deduplication","alignWithLabel","interval","valueAxis","splitNumber","minorTick","minorSplitLine","timeAxis","logAxis","logBase","layoutBox","positionElement","boxLayoutParams","globalDefault","resetSourceDefaulter","OPTION_INNER_KEY","_optionManager","baseOption","mountOption","initBase","timelineOption","getTimelineOption","mediaOptions","getMediaOption","mediaOption","newOption","componentsMap","newCptTypes","visitComponent","newCptOptionList","mapResult","mappingToExists","makeIdAndName","keyInfo","determineSubType","exist","getComponentsByTypes","resultItem","ComponentModelClass","createSeriesIndices","componentOption","topologicalTravel","getAllClassMainTypes","_seriesIndicesMap","_seriesIndices","isIdInner","cpts","isIdArray","cpt","isNameArray","filterBySubType","findComponents","queryCond","getQueryCond","doFilter","q","indexAttr","idAttr","nameAttr","res","components","queryResult","oneSeries","getSeriesByType","getSeriesCount","assertSeriesInitialized","rawSeriesIndex","getCurrentSeriesIndices","filterSeries","filteredSeries","componentTypes","isNotTargetSeries","seiresIndex","mergeTheme","notMergeColorLayer","colorLayer","themeItem","types","ret","existComponent","seriesModels","defaultSymbolType","hasSymbolTypeCallback","hasSymbolSizeCallback","hasSymbolRotateCallback","hasCallback","seriesSymbol","seriesSymbolSize","setVisual","setItemVisual","itemSymbolType","itemSymbolSize","itemSymbolRotate","itemSymbolKeepAspect","graphicUtil","markerRich","suffix","startId","endId","substr","textWidth","textHeight","textBorderRadius","textBackgroundColor","textOffset","rich","textPadding","textLineHeight","bounding","echartsAPIList","chartInstance","langSelector","defaultSelectorOption","LegendModel","_updateSelector","superCall","_updateData","_data","hasSelected","select","potentialData","availableNames","isPotential","names","getAllNames","_availableNames","rawData","dataItem","selectedMode","unSelect","toggleSelected","allSelect","inverseSelect","borderRadius","selectorLabel","fontFamily","selectorItemGap","createRenderPlanner","isDimensionStacked","isLargeRender","dims","dimLen","stackResultDim","getCalculationInfo","segCount","Float32Array","tmpIn","tmpOut","NaN","setItemLayout","setLayout","base","toFixed","entity","subTypeDefaulters","registerSubTypeDefaulter","defaulter","componentTypeMain","hasSubTypes","dependencyGetter","makeDepndencyGraph","fullNameList","noEntryList","createDependencyGraphItem","originalDeps","availableDeps","getAvailableDependencies","entryCount","dependentName","predecessor","thatItem","successor","dep","targetNameList","targetNameSet","currComponentType","currVertex","isInTargetNameSet","removeEdgeAndAdd","removeEdge","succComponentType","platform","navigator","gradientColor","fontStyle","animationDuration","animationEasingUpdate","animationThreshold","progressiveThreshold","useUTC","containLabel","legendModels","textContain","textColor","maskColor","showSpinner","spinnerRadius","lineWidth","mask","font","labelRect","textPosition","textDistance","arc","Arc","startAngle","endAngle","lineCap","animateShape","when","OrdinalMeta","AXIS_TYPES","BaseAxisModelClass","axisTypeDefaulter","extraDefaultOption","thisOption","__ordinalMeta","createByAxisModel","getCategories","getOrdinalMeta","mergeAll","prepareDataCoordInfo","valueOrigin","stacked","valueStart","getValueStart","baseAxisDim","valueAxisDim","valueDim","baseDim","baseDataOffset","dataDimsForPoint","stackedOverDimension","getStackedOnPoint","dataCoordInfo","stackedData","showContent","displayMode","confine","showDelay","hideDelay","extraCssText","crossStyle","buildPath","ctx","ox","oy","bezierCurveTo","closePath","createGridClipPath","hasAnimation","getArea","floor","clipPath","createPolarClipPath","polar","sectorArea","Sector","r0","clockwise","createClipPath","clazzUtil","Component","componentProto","enableClassExtend","ariaModel","seriesCnt","ariaLabel","maxDataCnt","maxSeriesCnt","displaySeriesCnt","getTitle","getConfig","seriesLabels","seriesCount","seriesLabel","seriesTpl","getSeriesTypeName","displayCnt","dataLabels","keyValues","RegExp","userConfig","pathArr","colorAll","labelDims","vals","QUERY_REG","_timelineOptions","_mediaList","_mediaDefault","_currentMediaIndices","_optionBackup","_newBaseOption","parseRawOption","rawOption","isNew","mediaDefault","timelineOptions","mediaList","options","media","singleMedia","preProcess","applyMediaQuery","ecWidth","ecHeight","realMap","aspectratio","applicatable","matched","operator","realAttr","compare","real","expect","indicesEquals","indices1","indices2","oldOption","newCptOpt","oldCptOpt","oldOptionBackup","newParsedOption","isRecreate","optionBackup","timelineModel","getCurrentIndex","indices","axisTrigger","collect","BoundingRect","Cartesian","getAxesByScale","axisX","axisY","contain","containData","clampData","xScale","yScale","xAxisExtent","yAxisExtent","xExtent","yExtent","axesInfo","seriesInvolved","coordSysMap","collectAxesInfo","collectSeriesInfo","globalAxisPointerModel","linksOption","linkGroups","coordSysKey","makeKey","axesInfoInCoordSys","coordSysModel","baseTooltipModel","saveTooltipAxisInfo","triggerAxis","cross","tooltipAxes","fromTooltip","axisPointerShow","isHandleTrigger","makeAxisPointerModel","involveSeries","axisInfo","useHandle","groupIndex","getLinkGroupIndex","linkGroup","mapper","tooltipAxisPointerModel","volatileOption","field","labelOption","tooltipAxisPointerLabelShow","seriesTooltipTrigger","seriesTooltipShow","seriesDataCount","linkOption","checkPropInLink","linkPropValue","axisPropValue","getAxisInfo","dimAxisMapper","_axes","_dimList","scaleType","_dataCoordConvert","input","dimList","output","stackInfoMap","stackInfoList","stackInfo","stackResultDimension","stackedDimension","stackedByDimension","isStackedByIndex","setCalculationInfo","calculateStack","targetStackInfo","idxInStack","resultVal","resultNaN","targetData","newData","v0","v1","byValue","stackedDataRawIndex","sum","stackedOver","rawIndexOf","getByRawIndex","legendFilter","AxisPointerView","vec2","fixClipWithShadow","vec2Min","vec2Max","scaleAndAdd","v2Copy","copy","cp0","cp1","isPointNull","p","drawSegment","segLen","allLen","dir","smoothMin","smoothMax","drawMono","apply","drawNonMono","prevIdx","prevP","ctrlLen","lineTo","nextIdx","nextP","ratioNextSeg","lenPrevSeg","lenNextSeg","abs","dist","getBoundingBox","smoothConstraint","ptMin","ptMax","pt","stackedOnPoints","stackedOnSmooth","bbox","stackedOnBBox","eventTool","throttleUtil","animationModel","moveAnimation","propsEqual","lastProp","lastProps","newProps","equals","updateLabelShowHide","labelEl","getHandleTransProps","trans","updateMandatoryProps","_group","_lastGraphicKey","_handle","_dragging","_lastValue","_lastStatus","_payloadInfo","_axisModel","_axisPointerModel","_moveAnimation","determineAnimation","doUpdateProps","updatePointerEl","updateLabelEl","createPointerEl","createLabelEl","_renderHandle","isCategoryAxis","useSnap","pointerEl","handleModel","createIcon","onmousedown","_onHandleDragMove","ondragend","_onHandleDragEnd","includeStyles","handleSize","createOrUpdate","_moveHandleToValue","_doDispatchAxisPointer","payloadInfo","doClear","buildLabel","xy","xDimIndex","getNearestColorPalette","colors","paletteNum","colorIdx","colorNameMap","scopeFields","defaultColorPalette","layeredColorPalette","colorPalette","renderPlanner","Chart","renderTaskPlan","renderTaskReset","toggleHighlight","incrementalRender","chartProto","elSetState","state","highlightDigit","isHighDownDispatcher","childCount","highlightKey","getHighlightDigit","dataIdx","eachItemGraphicEl","progressMethodMap","forceFirstProgress","modelHelper","illegalPoint","isIllegalPoint","inputAxesInfo","shouldHide","outputFinder","showValueMap","updaters","showPointer","showTooltip","coordSysContainsPoint","inputAxisInfo","findInputAxisInfo","processOnAxis","linkTriggers","tarAxisInfo","tarKey","srcAxisInfo","srcKey","srcValItem","makeMapperParam","updateModelActually","dispatchTooltipActually","dispatchHighDownActually","newValue","dontSnap","buildPayloadsBySeries","payloadBatch","snapToValue","minDist","Number","MAX_VALUE","minDiff","seriesNestestValue","dataIndices","nestestValue","indicesOfNearest","isFinite","diff","coordSysItem","coordSysId","coordSysIndex","coordSysType","coordSysMainType","outputAxesInfo","valItem","sampleItem","highDownKey","lastHighlights","newHighlights","toHighlight","toDownplay","Axis","coordExtent","asc","_parseSVG","rawGeoJson","rawSpecialAreas","features","parsers","JSON","Function","svgXML","visualSymbol","layoutPoints","dataSample","_helper","diffData","oldData","diffResult","cmd","newIdx","oldIdx","idx1","execute","oldStackedOnPoints","newStackedOnPoints","oldCoordSys","newCoordSys","oldValueOrigin","newValueOrigin","currPoints","nextPoints","currStackedPoints","nextStackedPoints","sortedIndices","rawIndices","newDataOldCoordInfo","oldDataNewCoordInfo","diffItem","pointAdded","currentPt","getItemLayout","nextPt","rawIndex","sort","sortedCurrPoints","sortedNextPoints","sortedCurrStackedPoints","sortedNextStackedPoints","sortedStatus","current","next","stackedOnCurrent","stackedOnNext","_bbox","fromPoints","SymbolDraw","lineAnimationDiff","_poly","_createClipPathFromCoordSys","isPointsSame","points1","points2","p1","p2","getBoundingDiff","min1","max1","min2","max2","getSmooth","getStackedOnPoints","turnPointsIntoStep","stepTurnAt","baseIndex","stepPoints","stepPt","stepPt2","getVisualGradient","visualMetaList","visualMeta","dimension","dimName","stops","stopLen","outerColors","tinyExtent","minCoord","maxCoord","coordSpan","getIsIgnoreFunc","isAuto","canShowAllSymbolForCategory","categoryDataDim","labelMap","getViewLabels","labelItem","availSize","createLineClipPath","rectShape","expandSize","lineGroup","symbolDraw","_symbolDraw","_lineGroup","lineStyleModel","mapArray","isCoordSysPolar","prevCoordSys","_coordSys","_polyline","_polygon","isAreaChart","isEmpty","isIgnoreFunc","__temp","setItemGraphicEl","clipShapeForSymbol","r1","_clipShapeForSymbol","_step","_newPolygon","isIgnore","clipShape","_stackedOnPoints","_points","_updateAnimation","_newPolyline","visualColor","getLineStyle","lineJoin","stackedOnSeries","_valueOrigin","__points","updatedDataInfo","diffStatus","ptIdx","animators","during","contrastColor","axisCommon","iconStyle","visualMap","controlStyle","color0","borderColor0","AxisBuilder","_axisSplitHelper","axisBuilderAttrs","selfBuilderAttrs","CartesianAxisView","oldAxisGroup","_axisGroup","axisBuilder","getGroup","groupTransition","_splitLine","splitLineModel","lineColors","lineCount","_minorSplitLine","minorSplitLineModel","minorTicksCoords","getMinorTicksCoords","_splitArea","define","Task","_reset","_plan","_count","_onDirty","_dirty","taskProto","planResult","upTask","_upstream","lastModBy","normalizeModBy","_modBy","lastModDataCount","_modDataCount","_dueEnd","_outputDueEnd","_progress","_dueIndex","doProgress","outputDueEnd","_settedOutputEnd","iterator","winCount","it","s","sStep","sCount","modNext","sequentialNext","taskIns","_callingProgress","downstream","_downstream","downTask","symbolCtor","_symbolCtor","symbolDrawProto","symbolNeedsDraw","normalizeUpdateOpt","makeSeriesScope","SymbolCtor","symbolEl","isPersistent","incrementalPrepareUpdate","_seriesScope","incrementalUpdate","taskParams","updateIncrementalAndHover","enableAnimation","isRadianAroundZero","remRadian","matrixUtil","_vector","v2ApplyTransform","shouldShowAllLabels","dumbGroup","_transform","_dumbGroup","hasBuilder","builders","pt1","pt2","strokeContainThreshold","arrows","arrowSize","arrowOffset","symbolWidth","symbolHeight","sqrt","cos","sin","axisTickLabel","ticksEls","buildAxisMajorTicks","labelEls","buildAxisLabel","fixMinMaxLabelShow","buildAxisMinorTicks","labelLayout","axisNameAvailableWidth","gapSignal","isNameLocationCenter","nameRotation","innerTextLayout","endTextLayout","textFont","truncateOpt","nameTruncateMaxWidth","truncatedText","truncateText","minChar","__fullText","__truncatedText","isLabelSilent","makeAxisEventDataBase","targetType","decomposeTransform","axisRotation","textRotation","direction","rotationDiff","textRotate","onLeft","tickEls","firstLabel","nextLabel","lastLabel","prevLabel","firstTick","nextTick","lastTick","prevTick","ignoreEl","isTwoLabelOverlapped","firstRect","nextRect","mRotationBack","identity","mul","getLocalTransform","intersect","createTicks","tickTransform","tickEndCoord","tickLineStyle","aniid","tickEl","minorTickModel","minorTickLineStyle","minorTicksEls","axisLabelShow","labels","labelRotation","rawCategoryData","formattedLabel","rawLabel","itemLabelModel","compatStyle","obj","overwrite","compatLayoutProperties","LAYOUT_PROPERTIES","COMPATITABLE_COMPONENTS","clipOverflow","clockWise","pointerColor","dataRange","componentName","Gradient","colorAccessPath","colorCallback","borderColorAccessPath","samplers","average","frame","nearest","indexSampler","sampler","rate","downSample","styleModel","buildLabelElOption","labelPos","paddings","confineInContainer","bgColor","getLabel","axisDimension","seriesData","textLayout","makeSectorShape"],"mappings":"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","file":"static/js/chunk-1ffd93b0.d4191da4.js","sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../echarts\");\n\nrequire(\"./axisPointer\");\n\nrequire(\"./tooltip/TooltipModel\");\n\nrequire(\"./tooltip/TooltipView\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// FIXME Better way to pack data in graphic element\n\n/**\n * @action\n * @property {string} type\n * @property {number} seriesIndex\n * @property {number} dataIndex\n * @property {number} [x]\n * @property {number} [y]\n */\necharts.registerAction({\n  type: 'showTip',\n  event: 'showTip',\n  update: 'tooltip:manuallyShowTip'\n}, // noop\nfunction () {});\necharts.registerAction({\n  type: 'hideTip',\n  event: 'hideTip',\n  update: 'tooltip:manuallyHideTip'\n}, // noop\nfunction () {});","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Can only be called after coordinate system creation stage.\n * (Can be called before coordinate system update stage).\n *\n * @param {Object} opt {labelInside}\n * @return {Object} {\n *  position, rotation, labelDirection, labelOffset,\n *  tickDirection, labelRotate, z2\n * }\n */\nfunction layout(gridModel, axisModel, opt) {\n  opt = opt || {};\n  var grid = gridModel.coordinateSystem;\n  var axis = axisModel.axis;\n  var layout = {};\n  var otherAxisOnZeroOf = axis.getAxesOnZeroOf()[0];\n  var rawAxisPosition = axis.position;\n  var axisPosition = otherAxisOnZeroOf ? 'onZero' : rawAxisPosition;\n  var axisDim = axis.dim;\n  var rect = grid.getRect();\n  var rectBound = [rect.x, rect.x + rect.width, rect.y, rect.y + rect.height];\n  var idx = {\n    left: 0,\n    right: 1,\n    top: 0,\n    bottom: 1,\n    onZero: 2\n  };\n  var axisOffset = axisModel.get('offset') || 0;\n  var posBound = axisDim === 'x' ? [rectBound[2] - axisOffset, rectBound[3] + axisOffset] : [rectBound[0] - axisOffset, rectBound[1] + axisOffset];\n\n  if (otherAxisOnZeroOf) {\n    var onZeroCoord = otherAxisOnZeroOf.toGlobalCoord(otherAxisOnZeroOf.dataToCoord(0));\n    posBound[idx.onZero] = Math.max(Math.min(onZeroCoord, posBound[1]), posBound[0]);\n  } // Axis position\n\n\n  layout.position = [axisDim === 'y' ? posBound[idx[axisPosition]] : rectBound[0], axisDim === 'x' ? posBound[idx[axisPosition]] : rectBound[3]]; // Axis rotation\n\n  layout.rotation = Math.PI / 2 * (axisDim === 'x' ? 0 : 1); // Tick and label direction, x y is axisDim\n\n  var dirMap = {\n    top: -1,\n    bottom: 1,\n    left: -1,\n    right: 1\n  };\n  layout.labelDirection = layout.tickDirection = layout.nameDirection = dirMap[rawAxisPosition];\n  layout.labelOffset = otherAxisOnZeroOf ? posBound[idx[rawAxisPosition]] - posBound[idx.onZero] : 0;\n\n  if (axisModel.get('axisTick.inside')) {\n    layout.tickDirection = -layout.tickDirection;\n  }\n\n  if (zrUtil.retrieve(opt.labelInside, axisModel.get('axisLabel.inside'))) {\n    layout.labelDirection = -layout.labelDirection;\n  } // Special label rotation\n\n\n  var labelRotate = axisModel.get('axisLabel.rotate');\n  layout.labelRotate = axisPosition === 'top' ? -labelRotate : labelRotate; // Over splitLine and splitArea\n\n  layout.z2 = 1;\n  return layout;\n}\n\nexports.layout = layout;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../util/graphic\");\n\nrequire(\"../coord/cartesian/Grid\");\n\nrequire(\"./axis\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Grid view\necharts.extendComponentView({\n  type: 'grid',\n  render: function (gridModel, ecModel) {\n    this.group.removeAll();\n\n    if (gridModel.get('show')) {\n      this.group.add(new graphic.Rect({\n        shape: gridModel.coordinateSystem.getRect(),\n        style: zrUtil.defaults({\n          fill: gridModel.get('backgroundColor')\n        }, gridModel.getItemStyle()),\n        silent: true,\n        z2: -1\n      }));\n    }\n  }\n});\necharts.registerPreprocessor(function (option) {\n  // Only create grid when need\n  if (option.xAxis && option.yAxis && !option.grid) {\n    option.grid = {};\n  }\n});","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar ComponentModel = require(\"../model/Component\");\n\nvar ComponentView = require(\"../view/Component\");\n\nvar _sourceHelper = require(\"../data/helper/sourceHelper\");\n\nvar detectSourceFormat = _sourceHelper.detectSourceFormat;\n\nvar _sourceType = require(\"../data/helper/sourceType\");\n\nvar SERIES_LAYOUT_BY_COLUMN = _sourceType.SERIES_LAYOUT_BY_COLUMN;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * This module is imported by echarts directly.\n *\n * Notice:\n * Always keep this file exists for backward compatibility.\n * Because before 4.1.0, dataset is an optional component,\n * some users may import this module manually.\n */\nComponentModel.extend({\n  type: 'dataset',\n\n  /**\n   * @protected\n   */\n  defaultOption: {\n    // 'row', 'column'\n    seriesLayoutBy: SERIES_LAYOUT_BY_COLUMN,\n    // null/'auto': auto detect header, see \"module:echarts/data/helper/sourceHelper\"\n    sourceHeader: null,\n    dimensions: null,\n    source: null\n  },\n  optionUpdated: function () {\n    detectSourceFormat(this);\n  }\n});\nComponentView.extend({\n  type: 'dataset'\n});","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar zrColor = require(\"zrender/lib/tool/color\");\n\nvar eventUtil = require(\"zrender/lib/core/event\");\n\nvar domUtil = require(\"zrender/lib/core/dom\");\n\nvar env = require(\"zrender/lib/core/env\");\n\nvar formatUtil = require(\"../../util/format\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar each = zrUtil.each;\nvar toCamelCase = formatUtil.toCamelCase;\nvar vendors = ['', '-webkit-', '-moz-', '-o-'];\nvar gCssText = 'position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;';\n/**\n * @param {number} duration\n * @return {string}\n * @inner\n */\n\nfunction assembleTransition(duration) {\n  var transitionCurve = 'cubic-bezier(0.23, 1, 0.32, 1)';\n  var transitionText = 'left ' + duration + 's ' + transitionCurve + ',' + 'top ' + duration + 's ' + transitionCurve;\n  return zrUtil.map(vendors, function (vendorPrefix) {\n    return vendorPrefix + 'transition:' + transitionText;\n  }).join(';');\n}\n/**\n * @param {Object} textStyle\n * @return {string}\n * @inner\n */\n\n\nfunction assembleFont(textStyleModel) {\n  var cssText = [];\n  var fontSize = textStyleModel.get('fontSize');\n  var color = textStyleModel.getTextColor();\n  color && cssText.push('color:' + color);\n  cssText.push('font:' + textStyleModel.getFont());\n  var lineHeight = textStyleModel.get('lineHeight');\n\n  if (lineHeight == null) {\n    lineHeight = Math.round(fontSize * 3 / 2);\n  }\n\n  fontSize && cssText.push('line-height:' + lineHeight + 'px');\n  var shadowColor = textStyleModel.get('textShadowColor');\n  var shadowBlur = textStyleModel.get('textShadowBlur') || 0;\n  var shadowOffsetX = textStyleModel.get('textShadowOffsetX') || 0;\n  var shadowOffsetY = textStyleModel.get('textShadowOffsetY') || 0;\n  shadowBlur && cssText.push('text-shadow:' + shadowOffsetX + 'px ' + shadowOffsetY + 'px ' + shadowBlur + 'px ' + shadowColor);\n  each(['decoration', 'align'], function (name) {\n    var val = textStyleModel.get(name);\n    val && cssText.push('text-' + name + ':' + val);\n  });\n  return cssText.join(';');\n}\n/**\n * @param {Object} tooltipModel\n * @return {string}\n * @inner\n */\n\n\nfunction assembleCssText(tooltipModel) {\n  var cssText = [];\n  var transitionDuration = tooltipModel.get('transitionDuration');\n  var backgroundColor = tooltipModel.get('backgroundColor');\n  var textStyleModel = tooltipModel.getModel('textStyle');\n  var padding = tooltipModel.get('padding'); // Animation transition. Do not animate when transitionDuration is 0.\n\n  transitionDuration && cssText.push(assembleTransition(transitionDuration));\n\n  if (backgroundColor) {\n    if (env.canvasSupported) {\n      cssText.push('background-Color:' + backgroundColor);\n    } else {\n      // for ie\n      cssText.push('background-Color:#' + zrColor.toHex(backgroundColor));\n      cssText.push('filter:alpha(opacity=70)');\n    }\n  } // Border style\n\n\n  each(['width', 'color', 'radius'], function (name) {\n    var borderName = 'border-' + name;\n    var camelCase = toCamelCase(borderName);\n    var val = tooltipModel.get(camelCase);\n    val != null && cssText.push(borderName + ':' + val + (name === 'color' ? '' : 'px'));\n  }); // Text style\n\n  cssText.push(assembleFont(textStyleModel)); // Padding\n\n  if (padding != null) {\n    cssText.push('padding:' + formatUtil.normalizeCssArray(padding).join('px ') + 'px');\n  }\n\n  return cssText.join(';') + ';';\n} // If not able to make, do not modify the input `out`.\n\n\nfunction makeStyleCoord(out, zr, appendToBody, zrX, zrY) {\n  var zrPainter = zr && zr.painter;\n\n  if (appendToBody) {\n    var zrViewportRoot = zrPainter && zrPainter.getViewportRoot();\n\n    if (zrViewportRoot) {\n      // Some APPs might use scale on body, so we support CSS transform here.\n      domUtil.transformLocalCoord(out, zrViewportRoot, document.body, zrX, zrY);\n    }\n  } else {\n    out[0] = zrX;\n    out[1] = zrY; // xy should be based on canvas root. But tooltipContent is\n    // the sibling of canvas root. So padding of ec container\n    // should be considered here.\n\n    var viewportRootOffset = zrPainter && zrPainter.getViewportRootOffset();\n\n    if (viewportRootOffset) {\n      out[0] += viewportRootOffset.offsetLeft;\n      out[1] += viewportRootOffset.offsetTop;\n    }\n  }\n\n  out[2] = out[0] / zr.getWidth(); // The ratio of left to width\n\n  out[3] = out[1] / zr.getHeight(); // The ratio of top to height\n}\n/**\n * @alias module:echarts/component/tooltip/TooltipContent\n * @param {HTMLElement} container\n * @param {ExtensionAPI} api\n * @param {Object} [opt]\n * @param {boolean} [opt.appendToBody]\n *        `false`: the DOM element will be inside the container. Default value.\n *        `true`: the DOM element will be appended to HTML body, which avoid\n *                some overflow clip but intrude outside of the container.\n * @constructor\n */\n\n\nfunction TooltipContent(container, api, opt) {\n  if (env.wxa) {\n    return null;\n  }\n\n  var el = document.createElement('div');\n  el.domBelongToZr = true;\n  this.el = el;\n  var zr = this._zr = api.getZr();\n  var appendToBody = this._appendToBody = opt && opt.appendToBody;\n  this._styleCoord = [0, 0, 0, 0]; // [left, top, left/width, top/height]\n\n  makeStyleCoord(this._styleCoord, zr, appendToBody, api.getWidth() / 2, api.getHeight() / 2);\n\n  if (appendToBody) {\n    document.body.appendChild(el);\n  } else {\n    container.appendChild(el);\n  }\n\n  this._container = container;\n  this._show = false;\n  /**\n   * @private\n   */\n\n  this._hideTimeout; // FIXME\n  // Is it needed to trigger zr event manually if\n  // the browser do not support `pointer-events: none`.\n\n  var self = this;\n\n  el.onmouseenter = function () {\n    // clear the timeout in hideLater and keep showing tooltip\n    if (self._enterable) {\n      clearTimeout(self._hideTimeout);\n      self._show = true;\n    }\n\n    self._inContent = true;\n  };\n\n  el.onmousemove = function (e) {\n    e = e || window.event;\n\n    if (!self._enterable) {\n      // `pointer-events: none` is set to tooltip content div\n      // if `enterable` is set as `false`, and `el.onmousemove`\n      // can not be triggered. But in browser that do not\n      // support `pointer-events`, we need to do this:\n      // Try trigger zrender event to avoid mouse\n      // in and out shape too frequently\n      var handler = zr.handler;\n      var zrViewportRoot = zr.painter.getViewportRoot();\n      eventUtil.normalizeEvent(zrViewportRoot, e, true);\n      handler.dispatch('mousemove', e);\n    }\n  };\n\n  el.onmouseleave = function () {\n    if (self._enterable) {\n      if (self._show) {\n        self.hideLater(self._hideDelay);\n      }\n    }\n\n    self._inContent = false;\n  };\n}\n\nTooltipContent.prototype = {\n  constructor: TooltipContent,\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  _enterable: true,\n\n  /**\n   * Update when tooltip is rendered\n   */\n  update: function (tooltipModel) {\n    // FIXME\n    // Move this logic to ec main?\n    var container = this._container;\n    var stl = container.currentStyle || document.defaultView.getComputedStyle(container);\n    var domStyle = container.style;\n\n    if (domStyle.position !== 'absolute' && stl.position !== 'absolute') {\n      domStyle.position = 'relative';\n    }\n\n    var alwaysShowContent = tooltipModel.get('alwaysShowContent');\n    alwaysShowContent && this._moveTooltipIfResized(); // Hide the tooltip\n    // PENDING\n    // this.hide();\n  },\n\n  /**\n   * when `alwaysShowContent` is true,\n   * we should move the tooltip after chart resized\n   */\n  _moveTooltipIfResized: function () {\n    var ratioX = this._styleCoord[2]; // The ratio of left to width\n\n    var ratioY = this._styleCoord[3]; // The ratio of top to height\n\n    var realX = ratioX * this._zr.getWidth();\n\n    var realY = ratioY * this._zr.getHeight();\n\n    this.moveTo(realX, realY);\n  },\n  show: function (tooltipModel) {\n    clearTimeout(this._hideTimeout);\n    var el = this.el;\n    var styleCoord = this._styleCoord;\n    el.style.cssText = gCssText + assembleCssText(tooltipModel) // Because of the reason described in:\n    // http://stackoverflow.com/questions/21125587/css3-transition-not-working-in-chrome-anymore\n    // we should set initial value to `left` and `top`.\n    + ';left:' + styleCoord[0] + 'px;top:' + styleCoord[1] + 'px;' + (tooltipModel.get('extraCssText') || '');\n    el.style.display = el.innerHTML ? 'block' : 'none'; // If mouse occasionally move over the tooltip, a mouseout event will be\n    // triggered by canvas, and cause some unexpectable result like dragging\n    // stop, \"unfocusAdjacency\". Here `pointer-events: none` is used to solve\n    // it. Although it is not supported by IE8~IE10, fortunately it is a rare\n    // scenario.\n\n    el.style.pointerEvents = this._enterable ? 'auto' : 'none';\n    this._show = true;\n  },\n  setContent: function (content) {\n    this.el.innerHTML = content == null ? '' : content;\n  },\n  setEnterable: function (enterable) {\n    this._enterable = enterable;\n  },\n  getSize: function () {\n    var el = this.el;\n    return [el.clientWidth, el.clientHeight];\n  },\n  moveTo: function (zrX, zrY) {\n    var styleCoord = this._styleCoord;\n    makeStyleCoord(styleCoord, this._zr, this._appendToBody, zrX, zrY);\n    var style = this.el.style;\n    style.left = styleCoord[0] + 'px';\n    style.top = styleCoord[1] + 'px';\n  },\n  hide: function () {\n    this.el.style.display = 'none';\n    this._show = false;\n  },\n  hideLater: function (time) {\n    if (this._show && !(this._inContent && this._enterable)) {\n      if (time) {\n        this._hideDelay = time; // Set show false to avoid invoke hideLater multiple times\n\n        this._show = false;\n        this._hideTimeout = setTimeout(zrUtil.bind(this.hide, this), time);\n      } else {\n        this.hide();\n      }\n    }\n  },\n  isShow: function () {\n    return this._show;\n  },\n  dispose: function () {\n    this.el.parentNode.removeChild(this.el);\n  },\n  getOuterSize: function () {\n    var width = this.el.clientWidth;\n    var height = this.el.clientHeight; // Consider browser compatibility.\n    // IE8 does not support getComputedStyle.\n\n    if (document.defaultView && document.defaultView.getComputedStyle) {\n      var stl = document.defaultView.getComputedStyle(this.el);\n\n      if (stl) {\n        width += parseInt(stl.borderLeftWidth, 10) + parseInt(stl.borderRightWidth, 10);\n        height += parseInt(stl.borderTopWidth, 10) + parseInt(stl.borderBottomWidth, 10);\n      }\n    }\n\n    return {\n      width: width,\n      height: height\n    };\n  }\n};\nvar _default = TooltipContent;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar modelUtil = require(\"../../util/model\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @param {Object} finder contains {seriesIndex, dataIndex, dataIndexInside}\n * @param {module:echarts/model/Global} ecModel\n * @return {Object} {point: [x, y], el: ...} point Will not be null.\n */\nfunction _default(finder, ecModel) {\n  var point = [];\n  var seriesIndex = finder.seriesIndex;\n  var seriesModel;\n\n  if (seriesIndex == null || !(seriesModel = ecModel.getSeriesByIndex(seriesIndex))) {\n    return {\n      point: []\n    };\n  }\n\n  var data = seriesModel.getData();\n  var dataIndex = modelUtil.queryDataIndex(data, finder);\n\n  if (dataIndex == null || dataIndex < 0 || zrUtil.isArray(dataIndex)) {\n    return {\n      point: []\n    };\n  }\n\n  var el = data.getItemGraphicEl(dataIndex);\n  var coordSys = seriesModel.coordinateSystem;\n\n  if (seriesModel.getTooltipPosition) {\n    point = seriesModel.getTooltipPosition(dataIndex) || [];\n  } else if (coordSys && coordSys.dataToPoint) {\n    point = coordSys.dataToPoint(data.getValues(zrUtil.map(coordSys.dimensions, function (dim) {\n      return data.mapDimension(dim);\n    }), dataIndex, true)) || [];\n  } else if (el) {\n    // Use graphic bounding rect\n    var rect = el.getBoundingRect().clone();\n    rect.applyTransform(el.transform);\n    point = [rect.x + rect.width / 2, rect.y + rect.height / 2];\n  }\n\n  return {\n    point: point,\n    el: el\n  };\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar _symbol = require(\"../../util/symbol\");\n\nvar createSymbol = _symbol.createSymbol;\n\nvar graphic = require(\"../../util/graphic\");\n\nvar _number = require(\"../../util/number\");\n\nvar parsePercent = _number.parsePercent;\n\nvar _labelHelper = require(\"./labelHelper\");\n\nvar getDefaultLabel = _labelHelper.getDefaultLabel;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @module echarts/chart/helper/Symbol\n */\n\n/**\n * @constructor\n * @alias {module:echarts/chart/helper/Symbol}\n * @param {module:echarts/data/List} data\n * @param {number} idx\n * @extends {module:zrender/graphic/Group}\n */\nfunction SymbolClz(data, idx, seriesScope) {\n  graphic.Group.call(this);\n  this.updateData(data, idx, seriesScope);\n}\n\nvar symbolProto = SymbolClz.prototype;\n/**\n * @public\n * @static\n * @param {module:echarts/data/List} data\n * @param {number} dataIndex\n * @return {Array.<number>} [width, height]\n */\n\nvar getSymbolSize = SymbolClz.getSymbolSize = function (data, idx) {\n  var symbolSize = data.getItemVisual(idx, 'symbolSize');\n  return symbolSize instanceof Array ? symbolSize.slice() : [+symbolSize, +symbolSize];\n};\n\nfunction getScale(symbolSize) {\n  return [symbolSize[0] / 2, symbolSize[1] / 2];\n}\n\nfunction driftSymbol(dx, dy) {\n  this.parent.drift(dx, dy);\n}\n\nsymbolProto._createSymbol = function (symbolType, data, idx, symbolSize, keepAspect) {\n  // Remove paths created before\n  this.removeAll();\n  var color = data.getItemVisual(idx, 'color'); // var symbolPath = createSymbol(\n  //     symbolType, -0.5, -0.5, 1, 1, color\n  // );\n  // If width/height are set too small (e.g., set to 1) on ios10\n  // and macOS Sierra, a circle stroke become a rect, no matter what\n  // the scale is set. So we set width/height as 2. See #4150.\n\n  var symbolPath = createSymbol(symbolType, -1, -1, 2, 2, color, keepAspect);\n  symbolPath.attr({\n    z2: 100,\n    culling: true,\n    scale: getScale(symbolSize)\n  }); // Rewrite drift method\n\n  symbolPath.drift = driftSymbol;\n  this._symbolType = symbolType;\n  this.add(symbolPath);\n};\n/**\n * Stop animation\n * @param {boolean} toLastFrame\n */\n\n\nsymbolProto.stopSymbolAnimation = function (toLastFrame) {\n  this.childAt(0).stopAnimation(toLastFrame);\n};\n/**\n * FIXME:\n * Caution: This method breaks the encapsulation of this module,\n * but it indeed brings convenience. So do not use the method\n * unless you detailedly know all the implements of `Symbol`,\n * especially animation.\n *\n * Get symbol path element.\n */\n\n\nsymbolProto.getSymbolPath = function () {\n  return this.childAt(0);\n};\n/**\n * Get scale(aka, current symbol size).\n * Including the change caused by animation\n */\n\n\nsymbolProto.getScale = function () {\n  return this.childAt(0).scale;\n};\n/**\n * Highlight symbol\n */\n\n\nsymbolProto.highlight = function () {\n  this.childAt(0).trigger('emphasis');\n};\n/**\n * Downplay symbol\n */\n\n\nsymbolProto.downplay = function () {\n  this.childAt(0).trigger('normal');\n};\n/**\n * @param {number} zlevel\n * @param {number} z\n */\n\n\nsymbolProto.setZ = function (zlevel, z) {\n  var symbolPath = this.childAt(0);\n  symbolPath.zlevel = zlevel;\n  symbolPath.z = z;\n};\n\nsymbolProto.setDraggable = function (draggable) {\n  var symbolPath = this.childAt(0);\n  symbolPath.draggable = draggable;\n  symbolPath.cursor = draggable ? 'move' : symbolPath.cursor;\n};\n/**\n * Update symbol properties\n * @param {module:echarts/data/List} data\n * @param {number} idx\n * @param {Object} [seriesScope]\n * @param {Object} [seriesScope.itemStyle]\n * @param {Object} [seriesScope.hoverItemStyle]\n * @param {Object} [seriesScope.symbolRotate]\n * @param {Object} [seriesScope.symbolOffset]\n * @param {module:echarts/model/Model} [seriesScope.labelModel]\n * @param {module:echarts/model/Model} [seriesScope.hoverLabelModel]\n * @param {boolean} [seriesScope.hoverAnimation]\n * @param {Object} [seriesScope.cursorStyle]\n * @param {module:echarts/model/Model} [seriesScope.itemModel]\n * @param {string} [seriesScope.symbolInnerColor]\n * @param {Object} [seriesScope.fadeIn=false]\n */\n\n\nsymbolProto.updateData = function (data, idx, seriesScope) {\n  this.silent = false;\n  var symbolType = data.getItemVisual(idx, 'symbol') || 'circle';\n  var seriesModel = data.hostModel;\n  var symbolSize = getSymbolSize(data, idx);\n  var isInit = symbolType !== this._symbolType;\n\n  if (isInit) {\n    var keepAspect = data.getItemVisual(idx, 'symbolKeepAspect');\n\n    this._createSymbol(symbolType, data, idx, symbolSize, keepAspect);\n  } else {\n    var symbolPath = this.childAt(0);\n    symbolPath.silent = false;\n    graphic.updateProps(symbolPath, {\n      scale: getScale(symbolSize)\n    }, seriesModel, idx);\n  }\n\n  this._updateCommon(data, idx, symbolSize, seriesScope);\n\n  if (isInit) {\n    var symbolPath = this.childAt(0);\n    var fadeIn = seriesScope && seriesScope.fadeIn;\n    var target = {\n      scale: symbolPath.scale.slice()\n    };\n    fadeIn && (target.style = {\n      opacity: symbolPath.style.opacity\n    });\n    symbolPath.scale = [0, 0];\n    fadeIn && (symbolPath.style.opacity = 0);\n    graphic.initProps(symbolPath, target, seriesModel, idx);\n  }\n\n  this._seriesModel = seriesModel;\n}; // Update common properties\n\n\nvar normalStyleAccessPath = ['itemStyle'];\nvar emphasisStyleAccessPath = ['emphasis', 'itemStyle'];\nvar normalLabelAccessPath = ['label'];\nvar emphasisLabelAccessPath = ['emphasis', 'label'];\n/**\n * @param {module:echarts/data/List} data\n * @param {number} idx\n * @param {Array.<number>} symbolSize\n * @param {Object} [seriesScope]\n */\n\nsymbolProto._updateCommon = function (data, idx, symbolSize, seriesScope) {\n  var symbolPath = this.childAt(0);\n  var seriesModel = data.hostModel;\n  var color = data.getItemVisual(idx, 'color'); // Reset style\n\n  if (symbolPath.type !== 'image') {\n    symbolPath.useStyle({\n      strokeNoScale: true\n    });\n  } else {\n    symbolPath.setStyle({\n      opacity: 1,\n      shadowBlur: null,\n      shadowOffsetX: null,\n      shadowOffsetY: null,\n      shadowColor: null\n    });\n  }\n\n  var itemStyle = seriesScope && seriesScope.itemStyle;\n  var hoverItemStyle = seriesScope && seriesScope.hoverItemStyle;\n  var symbolOffset = seriesScope && seriesScope.symbolOffset;\n  var labelModel = seriesScope && seriesScope.labelModel;\n  var hoverLabelModel = seriesScope && seriesScope.hoverLabelModel;\n  var hoverAnimation = seriesScope && seriesScope.hoverAnimation;\n  var cursorStyle = seriesScope && seriesScope.cursorStyle;\n\n  if (!seriesScope || data.hasItemOption) {\n    var itemModel = seriesScope && seriesScope.itemModel ? seriesScope.itemModel : data.getItemModel(idx); // Color must be excluded.\n    // Because symbol provide setColor individually to set fill and stroke\n\n    itemStyle = itemModel.getModel(normalStyleAccessPath).getItemStyle(['color']);\n    hoverItemStyle = itemModel.getModel(emphasisStyleAccessPath).getItemStyle();\n    symbolOffset = itemModel.getShallow('symbolOffset');\n    labelModel = itemModel.getModel(normalLabelAccessPath);\n    hoverLabelModel = itemModel.getModel(emphasisLabelAccessPath);\n    hoverAnimation = itemModel.getShallow('hoverAnimation');\n    cursorStyle = itemModel.getShallow('cursor');\n  } else {\n    hoverItemStyle = zrUtil.extend({}, hoverItemStyle);\n  }\n\n  var elStyle = symbolPath.style;\n  var symbolRotate = data.getItemVisual(idx, 'symbolRotate');\n  symbolPath.attr('rotation', (symbolRotate || 0) * Math.PI / 180 || 0);\n\n  if (symbolOffset) {\n    symbolPath.attr('position', [parsePercent(symbolOffset[0], symbolSize[0]), parsePercent(symbolOffset[1], symbolSize[1])]);\n  }\n\n  cursorStyle && symbolPath.attr('cursor', cursorStyle); // PENDING setColor before setStyle!!!\n\n  symbolPath.setColor(color, seriesScope && seriesScope.symbolInnerColor);\n  symbolPath.setStyle(itemStyle);\n  var opacity = data.getItemVisual(idx, 'opacity');\n\n  if (opacity != null) {\n    elStyle.opacity = opacity;\n  }\n\n  var liftZ = data.getItemVisual(idx, 'liftZ');\n  var z2Origin = symbolPath.__z2Origin;\n\n  if (liftZ != null) {\n    if (z2Origin == null) {\n      symbolPath.__z2Origin = symbolPath.z2;\n      symbolPath.z2 += liftZ;\n    }\n  } else if (z2Origin != null) {\n    symbolPath.z2 = z2Origin;\n    symbolPath.__z2Origin = null;\n  }\n\n  var useNameLabel = seriesScope && seriesScope.useNameLabel;\n  graphic.setLabelStyle(elStyle, hoverItemStyle, labelModel, hoverLabelModel, {\n    labelFetcher: seriesModel,\n    labelDataIndex: idx,\n    defaultText: getLabelDefaultText,\n    isRectText: true,\n    autoColor: color\n  }); // Do not execute util needed.\n\n  function getLabelDefaultText(idx, opt) {\n    return useNameLabel ? data.getName(idx) : getDefaultLabel(data, idx);\n  }\n\n  symbolPath.__symbolOriginalScale = getScale(symbolSize);\n  symbolPath.hoverStyle = hoverItemStyle;\n  symbolPath.highDownOnUpdate = hoverAnimation && seriesModel.isAnimationEnabled() ? highDownOnUpdate : null;\n  graphic.setHoverStyle(symbolPath);\n};\n\nfunction highDownOnUpdate(fromState, toState) {\n  // Do not support this hover animation util some scenario required.\n  // Animation can only be supported in hover layer when using `el.incremetal`.\n  if (this.incremental || this.useHoverLayer) {\n    return;\n  }\n\n  if (toState === 'emphasis') {\n    var scale = this.__symbolOriginalScale;\n    var ratio = scale[1] / scale[0];\n    var emphasisOpt = {\n      scale: [Math.max(scale[0] * 1.1, scale[0] + 3), Math.max(scale[1] * 1.1, scale[1] + 3 * ratio)]\n    }; // FIXME\n    // modify it after support stop specified animation.\n    // toState === fromState\n    //     ? (this.stopAnimation(), this.attr(emphasisOpt))\n\n    this.animateTo(emphasisOpt, 400, 'elasticOut');\n  } else if (toState === 'normal') {\n    this.animateTo({\n      scale: this.__symbolOriginalScale\n    }, 400, 'elasticOut');\n  }\n}\n/**\n * @param {Function} cb\n * @param {Object} [opt]\n * @param {Object} [opt.keepLabel=true]\n */\n\n\nsymbolProto.fadeOut = function (cb, opt) {\n  var symbolPath = this.childAt(0); // Avoid mistaken hover when fading out\n\n  this.silent = symbolPath.silent = true; // Not show text when animating\n\n  !(opt && opt.keepLabel) && (symbolPath.style.text = null);\n  graphic.updateProps(symbolPath, {\n    style: {\n      opacity: 0\n    },\n    scale: [0, 0]\n  }, this._seriesModel, this.dataIndex, cb);\n};\n\nzrUtil.inherits(SymbolClz, graphic.Group);\nvar _default = SymbolClz;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar env = require(\"zrender/lib/core/env\");\n\nvar _model = require(\"../../util/model\");\n\nvar makeInner = _model.makeInner;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar inner = makeInner();\nvar each = zrUtil.each;\n/**\n * @param {string} key\n * @param {module:echarts/ExtensionAPI} api\n * @param {Function} handler\n *      param: {string} currTrigger\n *      param: {Array.<number>} point\n */\n\nfunction register(key, api, handler) {\n  if (env.node) {\n    return;\n  }\n\n  var zr = api.getZr();\n  inner(zr).records || (inner(zr).records = {});\n  initGlobalListeners(zr, api);\n  var record = inner(zr).records[key] || (inner(zr).records[key] = {});\n  record.handler = handler;\n}\n\nfunction initGlobalListeners(zr, api) {\n  if (inner(zr).initialized) {\n    return;\n  }\n\n  inner(zr).initialized = true;\n  useHandler('click', zrUtil.curry(doEnter, 'click'));\n  useHandler('mousemove', zrUtil.curry(doEnter, 'mousemove')); // useHandler('mouseout', onLeave);\n\n  useHandler('globalout', onLeave);\n\n  function useHandler(eventType, cb) {\n    zr.on(eventType, function (e) {\n      var dis = makeDispatchAction(api);\n      each(inner(zr).records, function (record) {\n        record && cb(record, e, dis.dispatchAction);\n      });\n      dispatchTooltipFinally(dis.pendings, api);\n    });\n  }\n}\n\nfunction dispatchTooltipFinally(pendings, api) {\n  var showLen = pendings.showTip.length;\n  var hideLen = pendings.hideTip.length;\n  var actuallyPayload;\n\n  if (showLen) {\n    actuallyPayload = pendings.showTip[showLen - 1];\n  } else if (hideLen) {\n    actuallyPayload = pendings.hideTip[hideLen - 1];\n  }\n\n  if (actuallyPayload) {\n    actuallyPayload.dispatchAction = null;\n    api.dispatchAction(actuallyPayload);\n  }\n}\n\nfunction onLeave(record, e, dispatchAction) {\n  record.handler('leave', null, dispatchAction);\n}\n\nfunction doEnter(currTrigger, record, e, dispatchAction) {\n  record.handler(currTrigger, e, dispatchAction);\n}\n\nfunction makeDispatchAction(api) {\n  var pendings = {\n    showTip: [],\n    hideTip: []\n  }; // FIXME\n  // better approach?\n  // 'showTip' and 'hideTip' can be triggered by axisPointer and tooltip,\n  // which may be conflict, (axisPointer call showTip but tooltip call hideTip);\n  // So we have to add \"final stage\" to merge those dispatched actions.\n\n  var dispatchAction = function (payload) {\n    var pendingList = pendings[payload.type];\n\n    if (pendingList) {\n      pendingList.push(payload);\n    } else {\n      payload.dispatchAction = dispatchAction;\n      api.dispatchAction(payload);\n    }\n  };\n\n  return {\n    dispatchAction: dispatchAction,\n    pendings: pendings\n  };\n}\n/**\n * @param {string} key\n * @param {module:echarts/ExtensionAPI} api\n */\n\n\nfunction unregister(key, api) {\n  if (env.node) {\n    return;\n  }\n\n  var zr = api.getZr();\n  var record = (inner(zr).records || {})[key];\n\n  if (record) {\n    inner(zr).records[key] = null;\n  }\n}\n\nexports.register = register;\nexports.unregister = unregister;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar createListFromArray = require(\"../helper/createListFromArray\");\n\nvar SeriesModel = require(\"../../model/Series\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _default = SeriesModel.extend({\n  type: 'series.line',\n  dependencies: ['grid', 'polar'],\n  getInitialData: function (option, ecModel) {\n    return createListFromArray(this.getSource(), this, {\n      useEncodeDefaulter: true\n    });\n  },\n  defaultOption: {\n    zlevel: 0,\n    z: 2,\n    coordinateSystem: 'cartesian2d',\n    legendHoverLink: true,\n    hoverAnimation: true,\n    // stack: null\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    // polarIndex: 0,\n    // If clip the overflow value\n    clip: true,\n    // cursor: null,\n    label: {\n      position: 'top'\n    },\n    // itemStyle: {\n    // },\n    lineStyle: {\n      width: 2,\n      type: 'solid'\n    },\n    // areaStyle: {\n    // origin of areaStyle. Valid values:\n    // `'auto'/null/undefined`: from axisLine to data\n    // `'start'`: from min to data\n    // `'end'`: from data to max\n    // origin: 'auto'\n    // },\n    // false, 'start', 'end', 'middle'\n    step: false,\n    // Disabled if step is true\n    smooth: false,\n    smoothMonotone: null,\n    symbol: 'emptyCircle',\n    symbolSize: 4,\n    symbolRotate: null,\n    showSymbol: true,\n    // `false`: follow the label interval strategy.\n    // `true`: show all symbols.\n    // `'auto'`: If possible, show all symbols, otherwise\n    //           follow the label interval strategy.\n    showAllSymbol: 'auto',\n    // Whether to connect break point.\n    connectNulls: false,\n    // Sampling for large data. Can be: 'average', 'max', 'min', 'sum'.\n    sampling: 'none',\n    animationEasing: 'linear',\n    // Disable progressive\n    progressive: 0,\n    hoverLayerThreshold: Infinity\n  }\n});\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar modelUtil = require(\"../../util/model\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar each = zrUtil.each;\nvar isObject = zrUtil.isObject;\nvar POSSIBLE_STYLES = ['areaStyle', 'lineStyle', 'nodeStyle', 'linkStyle', 'chordStyle', 'label', 'labelLine'];\n\nfunction compatEC2ItemStyle(opt) {\n  var itemStyleOpt = opt && opt.itemStyle;\n\n  if (!itemStyleOpt) {\n    return;\n  }\n\n  for (var i = 0, len = POSSIBLE_STYLES.length; i < len; i++) {\n    var styleName = POSSIBLE_STYLES[i];\n    var normalItemStyleOpt = itemStyleOpt.normal;\n    var emphasisItemStyleOpt = itemStyleOpt.emphasis;\n\n    if (normalItemStyleOpt && normalItemStyleOpt[styleName]) {\n      opt[styleName] = opt[styleName] || {};\n\n      if (!opt[styleName].normal) {\n        opt[styleName].normal = normalItemStyleOpt[styleName];\n      } else {\n        zrUtil.merge(opt[styleName].normal, normalItemStyleOpt[styleName]);\n      }\n\n      normalItemStyleOpt[styleName] = null;\n    }\n\n    if (emphasisItemStyleOpt && emphasisItemStyleOpt[styleName]) {\n      opt[styleName] = opt[styleName] || {};\n\n      if (!opt[styleName].emphasis) {\n        opt[styleName].emphasis = emphasisItemStyleOpt[styleName];\n      } else {\n        zrUtil.merge(opt[styleName].emphasis, emphasisItemStyleOpt[styleName]);\n      }\n\n      emphasisItemStyleOpt[styleName] = null;\n    }\n  }\n}\n\nfunction convertNormalEmphasis(opt, optType, useExtend) {\n  if (opt && opt[optType] && (opt[optType].normal || opt[optType].emphasis)) {\n    var normalOpt = opt[optType].normal;\n    var emphasisOpt = opt[optType].emphasis;\n\n    if (normalOpt) {\n      // Timeline controlStyle has other properties besides normal and emphasis\n      if (useExtend) {\n        opt[optType].normal = opt[optType].emphasis = null;\n        zrUtil.defaults(opt[optType], normalOpt);\n      } else {\n        opt[optType] = normalOpt;\n      }\n    }\n\n    if (emphasisOpt) {\n      opt.emphasis = opt.emphasis || {};\n      opt.emphasis[optType] = emphasisOpt;\n    }\n  }\n}\n\nfunction removeEC3NormalStatus(opt) {\n  convertNormalEmphasis(opt, 'itemStyle');\n  convertNormalEmphasis(opt, 'lineStyle');\n  convertNormalEmphasis(opt, 'areaStyle');\n  convertNormalEmphasis(opt, 'label');\n  convertNormalEmphasis(opt, 'labelLine'); // treemap\n\n  convertNormalEmphasis(opt, 'upperLabel'); // graph\n\n  convertNormalEmphasis(opt, 'edgeLabel');\n}\n\nfunction compatTextStyle(opt, propName) {\n  // Check whether is not object (string\\null\\undefined ...)\n  var labelOptSingle = isObject(opt) && opt[propName];\n  var textStyle = isObject(labelOptSingle) && labelOptSingle.textStyle;\n\n  if (textStyle) {\n    for (var i = 0, len = modelUtil.TEXT_STYLE_OPTIONS.length; i < len; i++) {\n      var propName = modelUtil.TEXT_STYLE_OPTIONS[i];\n\n      if (textStyle.hasOwnProperty(propName)) {\n        labelOptSingle[propName] = textStyle[propName];\n      }\n    }\n  }\n}\n\nfunction compatEC3CommonStyles(opt) {\n  if (opt) {\n    removeEC3NormalStatus(opt);\n    compatTextStyle(opt, 'label');\n    opt.emphasis && compatTextStyle(opt.emphasis, 'label');\n  }\n}\n\nfunction processSeries(seriesOpt) {\n  if (!isObject(seriesOpt)) {\n    return;\n  }\n\n  compatEC2ItemStyle(seriesOpt);\n  removeEC3NormalStatus(seriesOpt);\n  compatTextStyle(seriesOpt, 'label'); // treemap\n\n  compatTextStyle(seriesOpt, 'upperLabel'); // graph\n\n  compatTextStyle(seriesOpt, 'edgeLabel');\n\n  if (seriesOpt.emphasis) {\n    compatTextStyle(seriesOpt.emphasis, 'label'); // treemap\n\n    compatTextStyle(seriesOpt.emphasis, 'upperLabel'); // graph\n\n    compatTextStyle(seriesOpt.emphasis, 'edgeLabel');\n  }\n\n  var markPoint = seriesOpt.markPoint;\n\n  if (markPoint) {\n    compatEC2ItemStyle(markPoint);\n    compatEC3CommonStyles(markPoint);\n  }\n\n  var markLine = seriesOpt.markLine;\n\n  if (markLine) {\n    compatEC2ItemStyle(markLine);\n    compatEC3CommonStyles(markLine);\n  }\n\n  var markArea = seriesOpt.markArea;\n\n  if (markArea) {\n    compatEC3CommonStyles(markArea);\n  }\n\n  var data = seriesOpt.data; // Break with ec3: if `setOption` again, there may be no `type` in option,\n  // then the backward compat based on option type will not be performed.\n\n  if (seriesOpt.type === 'graph') {\n    data = data || seriesOpt.nodes;\n    var edgeData = seriesOpt.links || seriesOpt.edges;\n\n    if (edgeData && !zrUtil.isTypedArray(edgeData)) {\n      for (var i = 0; i < edgeData.length; i++) {\n        compatEC3CommonStyles(edgeData[i]);\n      }\n    }\n\n    zrUtil.each(seriesOpt.categories, function (opt) {\n      removeEC3NormalStatus(opt);\n    });\n  }\n\n  if (data && !zrUtil.isTypedArray(data)) {\n    for (var i = 0; i < data.length; i++) {\n      compatEC3CommonStyles(data[i]);\n    }\n  } // mark point data\n\n\n  var markPoint = seriesOpt.markPoint;\n\n  if (markPoint && markPoint.data) {\n    var mpData = markPoint.data;\n\n    for (var i = 0; i < mpData.length; i++) {\n      compatEC3CommonStyles(mpData[i]);\n    }\n  } // mark line data\n\n\n  var markLine = seriesOpt.markLine;\n\n  if (markLine && markLine.data) {\n    var mlData = markLine.data;\n\n    for (var i = 0; i < mlData.length; i++) {\n      if (zrUtil.isArray(mlData[i])) {\n        compatEC3CommonStyles(mlData[i][0]);\n        compatEC3CommonStyles(mlData[i][1]);\n      } else {\n        compatEC3CommonStyles(mlData[i]);\n      }\n    }\n  } // Series\n\n\n  if (seriesOpt.type === 'gauge') {\n    compatTextStyle(seriesOpt, 'axisLabel');\n    compatTextStyle(seriesOpt, 'title');\n    compatTextStyle(seriesOpt, 'detail');\n  } else if (seriesOpt.type === 'treemap') {\n    convertNormalEmphasis(seriesOpt.breadcrumb, 'itemStyle');\n    zrUtil.each(seriesOpt.levels, function (opt) {\n      removeEC3NormalStatus(opt);\n    });\n  } else if (seriesOpt.type === 'tree') {\n    removeEC3NormalStatus(seriesOpt.leaves);\n  } // sunburst starts from ec4, so it does not need to compat levels.\n\n}\n\nfunction toArr(o) {\n  return zrUtil.isArray(o) ? o : o ? [o] : [];\n}\n\nfunction toObj(o) {\n  return (zrUtil.isArray(o) ? o[0] : o) || {};\n}\n\nfunction _default(option, isTheme) {\n  each(toArr(option.series), function (seriesOpt) {\n    isObject(seriesOpt) && processSeries(seriesOpt);\n  });\n  var axes = ['xAxis', 'yAxis', 'radiusAxis', 'angleAxis', 'singleAxis', 'parallelAxis', 'radar'];\n  isTheme && axes.push('valueAxis', 'categoryAxis', 'logAxis', 'timeAxis');\n  each(axes, function (axisName) {\n    each(toArr(option[axisName]), function (axisOpt) {\n      if (axisOpt) {\n        compatTextStyle(axisOpt, 'axisLabel');\n        compatTextStyle(axisOpt.axisPointer, 'label');\n      }\n    });\n  });\n  each(toArr(option.parallel), function (parallelOpt) {\n    var parallelAxisDefault = parallelOpt && parallelOpt.parallelAxisDefault;\n    compatTextStyle(parallelAxisDefault, 'axisLabel');\n    compatTextStyle(parallelAxisDefault && parallelAxisDefault.axisPointer, 'label');\n  });\n  each(toArr(option.calendar), function (calendarOpt) {\n    convertNormalEmphasis(calendarOpt, 'itemStyle');\n    compatTextStyle(calendarOpt, 'dayLabel');\n    compatTextStyle(calendarOpt, 'monthLabel');\n    compatTextStyle(calendarOpt, 'yearLabel');\n  }); // radar.name.textStyle\n\n  each(toArr(option.radar), function (radarOpt) {\n    compatTextStyle(radarOpt, 'name');\n  });\n  each(toArr(option.geo), function (geoOpt) {\n    if (isObject(geoOpt)) {\n      compatEC3CommonStyles(geoOpt);\n      each(toArr(geoOpt.regions), function (regionObj) {\n        compatEC3CommonStyles(regionObj);\n      });\n    }\n  });\n  each(toArr(option.timeline), function (timelineOpt) {\n    compatEC3CommonStyles(timelineOpt);\n    convertNormalEmphasis(timelineOpt, 'label');\n    convertNormalEmphasis(timelineOpt, 'itemStyle');\n    convertNormalEmphasis(timelineOpt, 'controlStyle', true);\n    var data = timelineOpt.data;\n    zrUtil.isArray(data) && zrUtil.each(data, function (item) {\n      if (zrUtil.isObject(item)) {\n        convertNormalEmphasis(item, 'label');\n        convertNormalEmphasis(item, 'itemStyle');\n      }\n    });\n  });\n  each(toArr(option.toolbox), function (toolboxOpt) {\n    convertNormalEmphasis(toolboxOpt, 'iconStyle');\n    each(toolboxOpt.feature, function (featureOpt) {\n      convertNormalEmphasis(featureOpt, 'iconStyle');\n    });\n  });\n  compatTextStyle(toObj(option.axisPointer), 'label');\n  compatTextStyle(toObj(option.tooltip).axisPointer, 'label');\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Language: (Simplified) Chinese.\n */\nvar _default = {\n  legend: {\n    selector: {\n      all: '',\n      inverse: ''\n    }\n  },\n  toolbox: {\n    brush: {\n      title: {\n        rect: '',\n        polygon: '',\n        lineX: '',\n        lineY: '',\n        keep: '',\n        clear: ''\n      }\n    },\n    dataView: {\n      title: '',\n      lang: ['', '', '']\n    },\n    dataZoom: {\n      title: {\n        zoom: '',\n        back: ''\n      }\n    },\n    magicType: {\n      title: {\n        line: '',\n        bar: '',\n        stack: '',\n        tiled: ''\n      }\n    },\n    restore: {\n      title: ''\n    },\n    saveAsImage: {\n      title: '',\n      lang: ['']\n    }\n  },\n  series: {\n    typeNames: {\n      pie: '',\n      bar: '',\n      line: '',\n      scatter: '',\n      effectScatter: '',\n      radar: '',\n      tree: '',\n      treemap: '',\n      boxplot: '',\n      candlestick: 'K',\n      k: 'K',\n      heatmap: '',\n      map: '',\n      parallel: '',\n      lines: '',\n      graph: '',\n      sankey: '',\n      funnel: '',\n      gauge: '',\n      pictorialBar: '',\n      themeRiver: '',\n      sunburst: ''\n    }\n  },\n  aria: {\n    general: {\n      withTitle: '{title}',\n      withoutTitle: ''\n    },\n    series: {\n      single: {\n        prefix: '',\n        withName: '{seriesType}{seriesName}',\n        withoutName: '{seriesType}'\n      },\n      multiple: {\n        prefix: '{seriesCount}',\n        withName: '{seriesId}{seriesName}{seriesType}',\n        withoutName: '{seriesId}{seriesType}',\n        separator: {\n          middle: '',\n          end: ''\n        }\n      }\n    },\n    data: {\n      allData: '',\n      partialData: '{displayCnt}',\n      withName: '{name}{value}',\n      withoutName: '{value}',\n      separator: {\n        middle: '',\n        end: ''\n      }\n    }\n  }\n};\nmodule.exports = _default;","var Group = require(\"../container/Group\");\n\nvar ZImage = require(\"../graphic/Image\");\n\nvar Text = require(\"../graphic/Text\");\n\nvar Circle = require(\"../graphic/shape/Circle\");\n\nvar Rect = require(\"../graphic/shape/Rect\");\n\nvar Ellipse = require(\"../graphic/shape/Ellipse\");\n\nvar Line = require(\"../graphic/shape/Line\");\n\nvar Path = require(\"../graphic/Path\");\n\nvar Polygon = require(\"../graphic/shape/Polygon\");\n\nvar Polyline = require(\"../graphic/shape/Polyline\");\n\nvar LinearGradient = require(\"../graphic/LinearGradient\");\n\nvar Style = require(\"../graphic/Style\");\n\nvar matrix = require(\"../core/matrix\");\n\nvar _path = require(\"./path\");\n\nvar createFromString = _path.createFromString;\n\nvar _util = require(\"../core/util\");\n\nvar isString = _util.isString;\nvar extend = _util.extend;\nvar defaults = _util.defaults;\nvar trim = _util.trim;\nvar each = _util.each;\n// import RadialGradient from '../graphic/RadialGradient';\n// import Pattern from '../graphic/Pattern';\n// import * as vector from '../core/vector';\n// Most of the values can be separated by comma and/or white space.\nvar DILIMITER_REG = /[\\s,]+/;\n/**\n * For big svg string, this method might be time consuming.\n *\n * @param {string} svg xml string\n * @return {Object} xml root.\n */\n\nfunction parseXML(svg) {\n  if (isString(svg)) {\n    var parser = new DOMParser();\n    svg = parser.parseFromString(svg, 'text/xml');\n  } // Document node. If using $.get, doc node may be input.\n\n\n  if (svg.nodeType === 9) {\n    svg = svg.firstChild;\n  } // nodeName of <!DOCTYPE svg> is also 'svg'.\n\n\n  while (svg.nodeName.toLowerCase() !== 'svg' || svg.nodeType !== 1) {\n    svg = svg.nextSibling;\n  }\n\n  return svg;\n}\n\nfunction SVGParser() {\n  this._defs = {};\n  this._root = null;\n  this._isDefine = false;\n  this._isText = false;\n}\n\nSVGParser.prototype.parse = function (xml, opt) {\n  opt = opt || {};\n  var svg = parseXML(xml);\n\n  if (!svg) {\n    throw new Error('Illegal svg');\n  }\n\n  var root = new Group();\n  this._root = root; // parse view port\n\n  var viewBox = svg.getAttribute('viewBox') || ''; // If width/height not specified, means \"100%\" of `opt.width/height`.\n  // TODO: Other percent value not supported yet.\n\n  var width = parseFloat(svg.getAttribute('width') || opt.width);\n  var height = parseFloat(svg.getAttribute('height') || opt.height); // If width/height not specified, set as null for output.\n\n  isNaN(width) && (width = null);\n  isNaN(height) && (height = null); // Apply inline style on svg element.\n\n  parseAttributes(svg, root, null, true);\n  var child = svg.firstChild;\n\n  while (child) {\n    this._parseNode(child, root);\n\n    child = child.nextSibling;\n  }\n\n  var viewBoxRect;\n  var viewBoxTransform;\n\n  if (viewBox) {\n    var viewBoxArr = trim(viewBox).split(DILIMITER_REG); // Some invalid case like viewBox: 'none'.\n\n    if (viewBoxArr.length >= 4) {\n      viewBoxRect = {\n        x: parseFloat(viewBoxArr[0] || 0),\n        y: parseFloat(viewBoxArr[1] || 0),\n        width: parseFloat(viewBoxArr[2]),\n        height: parseFloat(viewBoxArr[3])\n      };\n    }\n  }\n\n  if (viewBoxRect && width != null && height != null) {\n    viewBoxTransform = makeViewBoxTransform(viewBoxRect, width, height);\n\n    if (!opt.ignoreViewBox) {\n      // If set transform on the output group, it probably bring trouble when\n      // some users only intend to show the clipped content inside the viewBox,\n      // but not intend to transform the output group. So we keep the output\n      // group no transform. If the user intend to use the viewBox as a\n      // camera, just set `opt.ignoreViewBox` as `true` and set transfrom\n      // manually according to the viewBox info in the output of this method.\n      var elRoot = root;\n      root = new Group();\n      root.add(elRoot);\n      elRoot.scale = viewBoxTransform.scale.slice();\n      elRoot.position = viewBoxTransform.position.slice();\n    }\n  } // Some shapes might be overflow the viewport, which should be\n  // clipped despite whether the viewBox is used, as the SVG does.\n\n\n  if (!opt.ignoreRootClip && width != null && height != null) {\n    root.setClipPath(new Rect({\n      shape: {\n        x: 0,\n        y: 0,\n        width: width,\n        height: height\n      }\n    }));\n  } // Set width/height on group just for output the viewport size.\n\n\n  return {\n    root: root,\n    width: width,\n    height: height,\n    viewBoxRect: viewBoxRect,\n    viewBoxTransform: viewBoxTransform\n  };\n};\n\nSVGParser.prototype._parseNode = function (xmlNode, parentGroup) {\n  var nodeName = xmlNode.nodeName.toLowerCase(); // TODO\n  // support <style>...</style> in svg, where nodeName is 'style',\n  // CSS classes is defined globally wherever the style tags are declared.\n\n  if (nodeName === 'defs') {\n    // define flag\n    this._isDefine = true;\n  } else if (nodeName === 'text') {\n    this._isText = true;\n  }\n\n  var el;\n\n  if (this._isDefine) {\n    var parser = defineParsers[nodeName];\n\n    if (parser) {\n      var def = parser.call(this, xmlNode);\n      var id = xmlNode.getAttribute('id');\n\n      if (id) {\n        this._defs[id] = def;\n      }\n    }\n  } else {\n    var parser = nodeParsers[nodeName];\n\n    if (parser) {\n      el = parser.call(this, xmlNode, parentGroup);\n      parentGroup.add(el);\n    }\n  }\n\n  var child = xmlNode.firstChild;\n\n  while (child) {\n    if (child.nodeType === 1) {\n      this._parseNode(child, el);\n    } // Is text\n\n\n    if (child.nodeType === 3 && this._isText) {\n      this._parseText(child, el);\n    }\n\n    child = child.nextSibling;\n  } // Quit define\n\n\n  if (nodeName === 'defs') {\n    this._isDefine = false;\n  } else if (nodeName === 'text') {\n    this._isText = false;\n  }\n};\n\nSVGParser.prototype._parseText = function (xmlNode, parentGroup) {\n  if (xmlNode.nodeType === 1) {\n    var dx = xmlNode.getAttribute('dx') || 0;\n    var dy = xmlNode.getAttribute('dy') || 0;\n    this._textX += parseFloat(dx);\n    this._textY += parseFloat(dy);\n  }\n\n  var text = new Text({\n    style: {\n      text: xmlNode.textContent,\n      transformText: true\n    },\n    position: [this._textX || 0, this._textY || 0]\n  });\n  inheritStyle(parentGroup, text);\n  parseAttributes(xmlNode, text, this._defs);\n  var fontSize = text.style.fontSize;\n\n  if (fontSize && fontSize < 9) {\n    // PENDING\n    text.style.fontSize = 9;\n    text.scale = text.scale || [1, 1];\n    text.scale[0] *= fontSize / 9;\n    text.scale[1] *= fontSize / 9;\n  }\n\n  var rect = text.getBoundingRect();\n  this._textX += rect.width;\n  parentGroup.add(text);\n  return text;\n};\n\nvar nodeParsers = {\n  'g': function (xmlNode, parentGroup) {\n    var g = new Group();\n    inheritStyle(parentGroup, g);\n    parseAttributes(xmlNode, g, this._defs);\n    return g;\n  },\n  'rect': function (xmlNode, parentGroup) {\n    var rect = new Rect();\n    inheritStyle(parentGroup, rect);\n    parseAttributes(xmlNode, rect, this._defs);\n    rect.setShape({\n      x: parseFloat(xmlNode.getAttribute('x') || 0),\n      y: parseFloat(xmlNode.getAttribute('y') || 0),\n      width: parseFloat(xmlNode.getAttribute('width') || 0),\n      height: parseFloat(xmlNode.getAttribute('height') || 0)\n    }); // console.log(xmlNode.getAttribute('transform'));\n    // console.log(rect.transform);\n\n    return rect;\n  },\n  'circle': function (xmlNode, parentGroup) {\n    var circle = new Circle();\n    inheritStyle(parentGroup, circle);\n    parseAttributes(xmlNode, circle, this._defs);\n    circle.setShape({\n      cx: parseFloat(xmlNode.getAttribute('cx') || 0),\n      cy: parseFloat(xmlNode.getAttribute('cy') || 0),\n      r: parseFloat(xmlNode.getAttribute('r') || 0)\n    });\n    return circle;\n  },\n  'line': function (xmlNode, parentGroup) {\n    var line = new Line();\n    inheritStyle(parentGroup, line);\n    parseAttributes(xmlNode, line, this._defs);\n    line.setShape({\n      x1: parseFloat(xmlNode.getAttribute('x1') || 0),\n      y1: parseFloat(xmlNode.getAttribute('y1') || 0),\n      x2: parseFloat(xmlNode.getAttribute('x2') || 0),\n      y2: parseFloat(xmlNode.getAttribute('y2') || 0)\n    });\n    return line;\n  },\n  'ellipse': function (xmlNode, parentGroup) {\n    var ellipse = new Ellipse();\n    inheritStyle(parentGroup, ellipse);\n    parseAttributes(xmlNode, ellipse, this._defs);\n    ellipse.setShape({\n      cx: parseFloat(xmlNode.getAttribute('cx') || 0),\n      cy: parseFloat(xmlNode.getAttribute('cy') || 0),\n      rx: parseFloat(xmlNode.getAttribute('rx') || 0),\n      ry: parseFloat(xmlNode.getAttribute('ry') || 0)\n    });\n    return ellipse;\n  },\n  'polygon': function (xmlNode, parentGroup) {\n    var points = xmlNode.getAttribute('points');\n\n    if (points) {\n      points = parsePoints(points);\n    }\n\n    var polygon = new Polygon({\n      shape: {\n        points: points || []\n      }\n    });\n    inheritStyle(parentGroup, polygon);\n    parseAttributes(xmlNode, polygon, this._defs);\n    return polygon;\n  },\n  'polyline': function (xmlNode, parentGroup) {\n    var path = new Path();\n    inheritStyle(parentGroup, path);\n    parseAttributes(xmlNode, path, this._defs);\n    var points = xmlNode.getAttribute('points');\n\n    if (points) {\n      points = parsePoints(points);\n    }\n\n    var polyline = new Polyline({\n      shape: {\n        points: points || []\n      }\n    });\n    return polyline;\n  },\n  'image': function (xmlNode, parentGroup) {\n    var img = new ZImage();\n    inheritStyle(parentGroup, img);\n    parseAttributes(xmlNode, img, this._defs);\n    img.setStyle({\n      image: xmlNode.getAttribute('xlink:href'),\n      x: xmlNode.getAttribute('x'),\n      y: xmlNode.getAttribute('y'),\n      width: xmlNode.getAttribute('width'),\n      height: xmlNode.getAttribute('height')\n    });\n    return img;\n  },\n  'text': function (xmlNode, parentGroup) {\n    var x = xmlNode.getAttribute('x') || 0;\n    var y = xmlNode.getAttribute('y') || 0;\n    var dx = xmlNode.getAttribute('dx') || 0;\n    var dy = xmlNode.getAttribute('dy') || 0;\n    this._textX = parseFloat(x) + parseFloat(dx);\n    this._textY = parseFloat(y) + parseFloat(dy);\n    var g = new Group();\n    inheritStyle(parentGroup, g);\n    parseAttributes(xmlNode, g, this._defs);\n    return g;\n  },\n  'tspan': function (xmlNode, parentGroup) {\n    var x = xmlNode.getAttribute('x');\n    var y = xmlNode.getAttribute('y');\n\n    if (x != null) {\n      // new offset x\n      this._textX = parseFloat(x);\n    }\n\n    if (y != null) {\n      // new offset y\n      this._textY = parseFloat(y);\n    }\n\n    var dx = xmlNode.getAttribute('dx') || 0;\n    var dy = xmlNode.getAttribute('dy') || 0;\n    var g = new Group();\n    inheritStyle(parentGroup, g);\n    parseAttributes(xmlNode, g, this._defs);\n    this._textX += dx;\n    this._textY += dy;\n    return g;\n  },\n  'path': function (xmlNode, parentGroup) {\n    // TODO svg fill rule\n    // https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/fill-rule\n    // path.style.globalCompositeOperation = 'xor';\n    var d = xmlNode.getAttribute('d') || ''; // Performance sensitive.\n\n    var path = createFromString(d);\n    inheritStyle(parentGroup, path);\n    parseAttributes(xmlNode, path, this._defs);\n    return path;\n  }\n};\nvar defineParsers = {\n  'lineargradient': function (xmlNode) {\n    var x1 = parseInt(xmlNode.getAttribute('x1') || 0, 10);\n    var y1 = parseInt(xmlNode.getAttribute('y1') || 0, 10);\n    var x2 = parseInt(xmlNode.getAttribute('x2') || 10, 10);\n    var y2 = parseInt(xmlNode.getAttribute('y2') || 0, 10);\n    var gradient = new LinearGradient(x1, y1, x2, y2);\n\n    _parseGradientColorStops(xmlNode, gradient);\n\n    return gradient;\n  },\n  'radialgradient': function (xmlNode) {}\n};\n\nfunction _parseGradientColorStops(xmlNode, gradient) {\n  var stop = xmlNode.firstChild;\n\n  while (stop) {\n    if (stop.nodeType === 1) {\n      var offset = stop.getAttribute('offset');\n\n      if (offset.indexOf('%') > 0) {\n        // percentage\n        offset = parseInt(offset, 10) / 100;\n      } else if (offset) {\n        // number from 0 to 1\n        offset = parseFloat(offset);\n      } else {\n        offset = 0;\n      }\n\n      var stopColor = stop.getAttribute('stop-color') || '#000000';\n      gradient.addColorStop(offset, stopColor);\n    }\n\n    stop = stop.nextSibling;\n  }\n}\n\nfunction inheritStyle(parent, child) {\n  if (parent && parent.__inheritedStyle) {\n    if (!child.__inheritedStyle) {\n      child.__inheritedStyle = {};\n    }\n\n    defaults(child.__inheritedStyle, parent.__inheritedStyle);\n  }\n}\n\nfunction parsePoints(pointsString) {\n  var list = trim(pointsString).split(DILIMITER_REG);\n  var points = [];\n\n  for (var i = 0; i < list.length; i += 2) {\n    var x = parseFloat(list[i]);\n    var y = parseFloat(list[i + 1]);\n    points.push([x, y]);\n  }\n\n  return points;\n}\n\nvar attributesMap = {\n  'fill': 'fill',\n  'stroke': 'stroke',\n  'stroke-width': 'lineWidth',\n  'opacity': 'opacity',\n  'fill-opacity': 'fillOpacity',\n  'stroke-opacity': 'strokeOpacity',\n  'stroke-dasharray': 'lineDash',\n  'stroke-dashoffset': 'lineDashOffset',\n  'stroke-linecap': 'lineCap',\n  'stroke-linejoin': 'lineJoin',\n  'stroke-miterlimit': 'miterLimit',\n  'font-family': 'fontFamily',\n  'font-size': 'fontSize',\n  'font-style': 'fontStyle',\n  'font-weight': 'fontWeight',\n  'text-align': 'textAlign',\n  'alignment-baseline': 'textBaseline'\n};\n\nfunction parseAttributes(xmlNode, el, defs, onlyInlineStyle) {\n  var zrStyle = el.__inheritedStyle || {};\n  var isTextEl = el.type === 'text'; // TODO Shadow\n\n  if (xmlNode.nodeType === 1) {\n    parseTransformAttribute(xmlNode, el);\n    extend(zrStyle, parseStyleAttribute(xmlNode));\n\n    if (!onlyInlineStyle) {\n      for (var svgAttrName in attributesMap) {\n        if (attributesMap.hasOwnProperty(svgAttrName)) {\n          var attrValue = xmlNode.getAttribute(svgAttrName);\n\n          if (attrValue != null) {\n            zrStyle[attributesMap[svgAttrName]] = attrValue;\n          }\n        }\n      }\n    }\n  }\n\n  var elFillProp = isTextEl ? 'textFill' : 'fill';\n  var elStrokeProp = isTextEl ? 'textStroke' : 'stroke';\n  el.style = el.style || new Style();\n  var elStyle = el.style;\n  zrStyle.fill != null && elStyle.set(elFillProp, getPaint(zrStyle.fill, defs));\n  zrStyle.stroke != null && elStyle.set(elStrokeProp, getPaint(zrStyle.stroke, defs));\n  each(['lineWidth', 'opacity', 'fillOpacity', 'strokeOpacity', 'miterLimit', 'fontSize'], function (propName) {\n    var elPropName = propName === 'lineWidth' && isTextEl ? 'textStrokeWidth' : propName;\n    zrStyle[propName] != null && elStyle.set(elPropName, parseFloat(zrStyle[propName]));\n  });\n\n  if (!zrStyle.textBaseline || zrStyle.textBaseline === 'auto') {\n    zrStyle.textBaseline = 'alphabetic';\n  }\n\n  if (zrStyle.textBaseline === 'alphabetic') {\n    zrStyle.textBaseline = 'bottom';\n  }\n\n  if (zrStyle.textAlign === 'start') {\n    zrStyle.textAlign = 'left';\n  }\n\n  if (zrStyle.textAlign === 'end') {\n    zrStyle.textAlign = 'right';\n  }\n\n  each(['lineDashOffset', 'lineCap', 'lineJoin', 'fontWeight', 'fontFamily', 'fontStyle', 'textAlign', 'textBaseline'], function (propName) {\n    zrStyle[propName] != null && elStyle.set(propName, zrStyle[propName]);\n  });\n\n  if (zrStyle.lineDash) {\n    el.style.lineDash = trim(zrStyle.lineDash).split(DILIMITER_REG);\n  }\n\n  if (elStyle[elStrokeProp] && elStyle[elStrokeProp] !== 'none') {\n    // enable stroke\n    el[elStrokeProp] = true;\n  }\n\n  el.__inheritedStyle = zrStyle;\n}\n\nvar urlRegex = /url\\(\\s*#(.*?)\\)/;\n\nfunction getPaint(str, defs) {\n  // if (str === 'none') {\n  //     return;\n  // }\n  var urlMatch = defs && str && str.match(urlRegex);\n\n  if (urlMatch) {\n    var url = trim(urlMatch[1]);\n    var def = defs[url];\n    return def;\n  }\n\n  return str;\n}\n\nvar transformRegex = /(translate|scale|rotate|skewX|skewY|matrix)\\(([\\-\\s0-9\\.e,]*)\\)/g;\n\nfunction parseTransformAttribute(xmlNode, node) {\n  var transform = xmlNode.getAttribute('transform');\n\n  if (transform) {\n    transform = transform.replace(/,/g, ' ');\n    var m = null;\n    var transformOps = [];\n    transform.replace(transformRegex, function (str, type, value) {\n      transformOps.push(type, value);\n    });\n\n    for (var i = transformOps.length - 1; i > 0; i -= 2) {\n      var value = transformOps[i];\n      var type = transformOps[i - 1];\n      m = m || matrix.create();\n\n      switch (type) {\n        case 'translate':\n          value = trim(value).split(DILIMITER_REG);\n          matrix.translate(m, m, [parseFloat(value[0]), parseFloat(value[1] || 0)]);\n          break;\n\n        case 'scale':\n          value = trim(value).split(DILIMITER_REG);\n          matrix.scale(m, m, [parseFloat(value[0]), parseFloat(value[1] || value[0])]);\n          break;\n\n        case 'rotate':\n          value = trim(value).split(DILIMITER_REG);\n          matrix.rotate(m, m, parseFloat(value[0]));\n          break;\n\n        case 'skew':\n          value = trim(value).split(DILIMITER_REG);\n          console.warn('Skew transform is not supported yet');\n          break;\n\n        case 'matrix':\n          var value = trim(value).split(DILIMITER_REG);\n          m[0] = parseFloat(value[0]);\n          m[1] = parseFloat(value[1]);\n          m[2] = parseFloat(value[2]);\n          m[3] = parseFloat(value[3]);\n          m[4] = parseFloat(value[4]);\n          m[5] = parseFloat(value[5]);\n          break;\n      }\n    }\n\n    node.setLocalTransform(m);\n  }\n} // Value may contain space.\n\n\nvar styleRegex = /([^\\s:;]+)\\s*:\\s*([^:;]+)/g;\n\nfunction parseStyleAttribute(xmlNode) {\n  var style = xmlNode.getAttribute('style');\n  var result = {};\n\n  if (!style) {\n    return result;\n  }\n\n  var styleList = {};\n  styleRegex.lastIndex = 0;\n  var styleRegResult;\n\n  while ((styleRegResult = styleRegex.exec(style)) != null) {\n    styleList[styleRegResult[1]] = styleRegResult[2];\n  }\n\n  for (var svgAttrName in attributesMap) {\n    if (attributesMap.hasOwnProperty(svgAttrName) && styleList[svgAttrName] != null) {\n      result[attributesMap[svgAttrName]] = styleList[svgAttrName];\n    }\n  }\n\n  return result;\n}\n/**\n * @param {Array.<number>} viewBoxRect\n * @param {number} width\n * @param {number} height\n * @return {Object} {scale, position}\n */\n\n\nfunction makeViewBoxTransform(viewBoxRect, width, height) {\n  var scaleX = width / viewBoxRect.width;\n  var scaleY = height / viewBoxRect.height;\n  var scale = Math.min(scaleX, scaleY); // preserveAspectRatio 'xMidYMid'\n\n  var viewBoxScale = [scale, scale];\n  var viewBoxPosition = [-(viewBoxRect.x + viewBoxRect.width / 2) * scale + width / 2, -(viewBoxRect.y + viewBoxRect.height / 2) * scale + height / 2];\n  return {\n    scale: viewBoxScale,\n    position: viewBoxPosition\n  };\n}\n/**\n * @param {string|XMLElement} xml\n * @param {Object} [opt]\n * @param {number} [opt.width] Default width if svg width not specified or is a percent value.\n * @param {number} [opt.height] Default height if svg height not specified or is a percent value.\n * @param {boolean} [opt.ignoreViewBox]\n * @param {boolean} [opt.ignoreRootClip]\n * @return {Object} result:\n * {\n *     root: Group, The root of the the result tree of zrender shapes,\n *     width: number, the viewport width of the SVG,\n *     height: number, the viewport height of the SVG,\n *     viewBoxRect: {x, y, width, height}, the declared viewBox rect of the SVG, if exists,\n *     viewBoxTransform: the {scale, position} calculated by viewBox and viewport, is exists.\n * }\n */\n\n\nfunction parseSVG(xml, opt) {\n  var parser = new SVGParser();\n  return parser.parse(xml, opt);\n}\n\nexports.parseXML = parseXML;\nexports.makeViewBoxTransform = makeViewBoxTransform;\nexports.parseSVG = parseSVG;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _dataProvider = require(\"../../data/helper/dataProvider\");\n\nvar retrieveRawValue = _dataProvider.retrieveRawValue;\n\nvar _format = require(\"../../util/format\");\n\nvar getTooltipMarker = _format.getTooltipMarker;\nvar formatTpl = _format.formatTpl;\n\nvar _model = require(\"../../util/model\");\n\nvar getTooltipRenderMode = _model.getTooltipRenderMode;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar DIMENSION_LABEL_REG = /\\{@(.+?)\\}/g; // PENDING A little ugly\n\nvar _default = {\n  /**\n   * Get params for formatter\n   * @param {number} dataIndex\n   * @param {string} [dataType]\n   * @return {Object}\n   */\n  getDataParams: function (dataIndex, dataType) {\n    var data = this.getData(dataType);\n    var rawValue = this.getRawValue(dataIndex, dataType);\n    var rawDataIndex = data.getRawIndex(dataIndex);\n    var name = data.getName(dataIndex);\n    var itemOpt = data.getRawDataItem(dataIndex);\n    var color = data.getItemVisual(dataIndex, 'color');\n    var borderColor = data.getItemVisual(dataIndex, 'borderColor');\n    var tooltipModel = this.ecModel.getComponent('tooltip');\n    var renderModeOption = tooltipModel && tooltipModel.get('renderMode');\n    var renderMode = getTooltipRenderMode(renderModeOption);\n    var mainType = this.mainType;\n    var isSeries = mainType === 'series';\n    var userOutput = data.userOutput;\n    return {\n      componentType: mainType,\n      componentSubType: this.subType,\n      componentIndex: this.componentIndex,\n      seriesType: isSeries ? this.subType : null,\n      seriesIndex: this.seriesIndex,\n      seriesId: isSeries ? this.id : null,\n      seriesName: isSeries ? this.name : null,\n      name: name,\n      dataIndex: rawDataIndex,\n      data: itemOpt,\n      dataType: dataType,\n      value: rawValue,\n      color: color,\n      borderColor: borderColor,\n      dimensionNames: userOutput ? userOutput.dimensionNames : null,\n      encode: userOutput ? userOutput.encode : null,\n      marker: getTooltipMarker({\n        color: color,\n        renderMode: renderMode\n      }),\n      // Param name list for mapping `a`, `b`, `c`, `d`, `e`\n      $vars: ['seriesName', 'name', 'value']\n    };\n  },\n\n  /**\n   * Format label\n   * @param {number} dataIndex\n   * @param {string} [status='normal'] 'normal' or 'emphasis'\n   * @param {string} [dataType]\n   * @param {number} [dimIndex] Only used in some chart that\n   *        use formatter in different dimensions, like radar.\n   * @param {string} [labelProp='label']\n   * @return {string} If not formatter, return null/undefined\n   */\n  getFormattedLabel: function (dataIndex, status, dataType, dimIndex, labelProp) {\n    status = status || 'normal';\n    var data = this.getData(dataType);\n    var itemModel = data.getItemModel(dataIndex);\n    var params = this.getDataParams(dataIndex, dataType);\n\n    if (dimIndex != null && params.value instanceof Array) {\n      params.value = params.value[dimIndex];\n    }\n\n    var formatter = itemModel.get(status === 'normal' ? [labelProp || 'label', 'formatter'] : [status, labelProp || 'label', 'formatter']);\n\n    if (typeof formatter === 'function') {\n      params.status = status;\n      params.dimensionIndex = dimIndex;\n      return formatter(params);\n    } else if (typeof formatter === 'string') {\n      var str = formatTpl(formatter, params); // Support 'aaa{@[3]}bbb{@product}ccc'.\n      // Do not support '}' in dim name util have to.\n\n      return str.replace(DIMENSION_LABEL_REG, function (origin, dim) {\n        var len = dim.length;\n\n        if (dim.charAt(0) === '[' && dim.charAt(len - 1) === ']') {\n          dim = +dim.slice(1, len - 1); // Also: '[]' => 0\n        }\n\n        return retrieveRawValue(data, dataIndex, dim);\n      });\n    }\n  },\n\n  /**\n   * Get raw value in option\n   * @param {number} idx\n   * @param {string} [dataType]\n   * @return {Array|number|string}\n   */\n  getRawValue: function (idx, dataType) {\n    return retrieveRawValue(this.getData(dataType), idx);\n  },\n\n  /**\n   * Should be implemented.\n   * @param {number} dataIndex\n   * @param {boolean} [multipleSeries=false]\n   * @param {number} [dataType]\n   * @return {string} tooltip string\n   */\n  formatTooltip: function () {// Empty function\n  }\n};\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"./config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar zrender = require(\"zrender/lib/zrender\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar colorTool = require(\"zrender/lib/tool/color\");\n\nvar env = require(\"zrender/lib/core/env\");\n\nvar timsort = require(\"zrender/lib/core/timsort\");\n\nvar Eventful = require(\"zrender/lib/mixin/Eventful\");\n\nvar GlobalModel = require(\"./model/Global\");\n\nvar ExtensionAPI = require(\"./ExtensionAPI\");\n\nvar CoordinateSystemManager = require(\"./CoordinateSystem\");\n\nvar OptionManager = require(\"./model/OptionManager\");\n\nvar backwardCompat = require(\"./preprocessor/backwardCompat\");\n\nvar dataStack = require(\"./processor/dataStack\");\n\nvar ComponentModel = require(\"./model/Component\");\n\nvar SeriesModel = require(\"./model/Series\");\n\nvar ComponentView = require(\"./view/Component\");\n\nvar ChartView = require(\"./view/Chart\");\n\nvar graphic = require(\"./util/graphic\");\n\nvar modelUtil = require(\"./util/model\");\n\nvar _throttle = require(\"./util/throttle\");\n\nvar throttle = _throttle.throttle;\n\nvar seriesColor = require(\"./visual/seriesColor\");\n\nvar aria = require(\"./visual/aria\");\n\nvar loadingDefault = require(\"./loading/default\");\n\nvar Scheduler = require(\"./stream/Scheduler\");\n\nvar lightTheme = require(\"./theme/light\");\n\nvar darkTheme = require(\"./theme/dark\");\n\nrequire(\"./component/dataset\");\n\nvar mapDataStorage = require(\"./coord/geo/mapDataStorage\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar assert = zrUtil.assert;\nvar each = zrUtil.each;\nvar isFunction = zrUtil.isFunction;\nvar isObject = zrUtil.isObject;\nvar parseClassType = ComponentModel.parseClassType;\nvar version = '4.9.0';\nvar dependencies = {\n  zrender: '4.3.2'\n};\nvar TEST_FRAME_REMAIN_TIME = 1;\nvar PRIORITY_PROCESSOR_FILTER = 1000;\nvar PRIORITY_PROCESSOR_SERIES_FILTER = 800;\nvar PRIORITY_PROCESSOR_DATASTACK = 900;\nvar PRIORITY_PROCESSOR_STATISTIC = 5000;\nvar PRIORITY_VISUAL_LAYOUT = 1000;\nvar PRIORITY_VISUAL_PROGRESSIVE_LAYOUT = 1100;\nvar PRIORITY_VISUAL_GLOBAL = 2000;\nvar PRIORITY_VISUAL_CHART = 3000;\nvar PRIORITY_VISUAL_POST_CHART_LAYOUT = 3500;\nvar PRIORITY_VISUAL_COMPONENT = 4000; // FIXME\n// necessary?\n\nvar PRIORITY_VISUAL_BRUSH = 5000;\nvar PRIORITY = {\n  PROCESSOR: {\n    FILTER: PRIORITY_PROCESSOR_FILTER,\n    SERIES_FILTER: PRIORITY_PROCESSOR_SERIES_FILTER,\n    STATISTIC: PRIORITY_PROCESSOR_STATISTIC\n  },\n  VISUAL: {\n    LAYOUT: PRIORITY_VISUAL_LAYOUT,\n    PROGRESSIVE_LAYOUT: PRIORITY_VISUAL_PROGRESSIVE_LAYOUT,\n    GLOBAL: PRIORITY_VISUAL_GLOBAL,\n    CHART: PRIORITY_VISUAL_CHART,\n    POST_CHART_LAYOUT: PRIORITY_VISUAL_POST_CHART_LAYOUT,\n    COMPONENT: PRIORITY_VISUAL_COMPONENT,\n    BRUSH: PRIORITY_VISUAL_BRUSH\n  }\n}; // Main process have three entries: `setOption`, `dispatchAction` and `resize`,\n// where they must not be invoked nestedly, except the only case: invoke\n// dispatchAction with updateMethod \"none\" in main process.\n// This flag is used to carry out this rule.\n// All events will be triggered out side main process (i.e. when !this[IN_MAIN_PROCESS]).\n\nvar IN_MAIN_PROCESS = '__flagInMainProcess';\nvar OPTION_UPDATED = '__optionUpdated';\nvar ACTION_REG = /^[a-zA-Z0-9_]+$/;\n\nfunction createRegisterEventWithLowercaseName(method, ignoreDisposed) {\n  return function (eventName, handler, context) {\n    if (!ignoreDisposed && this._disposed) {\n      disposedWarning(this.id);\n      return;\n    } // Event name is all lowercase\n\n\n    eventName = eventName && eventName.toLowerCase();\n    Eventful.prototype[method].call(this, eventName, handler, context);\n  };\n}\n/**\n * @module echarts~MessageCenter\n */\n\n\nfunction MessageCenter() {\n  Eventful.call(this);\n}\n\nMessageCenter.prototype.on = createRegisterEventWithLowercaseName('on', true);\nMessageCenter.prototype.off = createRegisterEventWithLowercaseName('off', true);\nMessageCenter.prototype.one = createRegisterEventWithLowercaseName('one', true);\nzrUtil.mixin(MessageCenter, Eventful);\n/**\n * @module echarts~ECharts\n */\n\nfunction ECharts(dom, theme, opts) {\n  opts = opts || {}; // Get theme by name\n\n  if (typeof theme === 'string') {\n    theme = themeStorage[theme];\n  }\n  /**\n   * @type {string}\n   */\n\n\n  this.id;\n  /**\n   * Group id\n   * @type {string}\n   */\n\n  this.group;\n  /**\n   * @type {HTMLElement}\n   * @private\n   */\n\n  this._dom = dom;\n  var defaultRenderer = 'canvas';\n\n  /**\n   * @type {module:zrender/ZRender}\n   * @private\n   */\n  var zr = this._zr = zrender.init(dom, {\n    renderer: opts.renderer || defaultRenderer,\n    devicePixelRatio: opts.devicePixelRatio,\n    width: opts.width,\n    height: opts.height\n  });\n  /**\n   * Expect 60 fps.\n   * @type {Function}\n   * @private\n   */\n\n  this._throttledZrFlush = throttle(zrUtil.bind(zr.flush, zr), 17);\n  var theme = zrUtil.clone(theme);\n  theme && backwardCompat(theme, true);\n  /**\n   * @type {Object}\n   * @private\n   */\n\n  this._theme = theme;\n  /**\n   * @type {Array.<module:echarts/view/Chart>}\n   * @private\n   */\n\n  this._chartsViews = [];\n  /**\n   * @type {Object.<string, module:echarts/view/Chart>}\n   * @private\n   */\n\n  this._chartsMap = {};\n  /**\n   * @type {Array.<module:echarts/view/Component>}\n   * @private\n   */\n\n  this._componentsViews = [];\n  /**\n   * @type {Object.<string, module:echarts/view/Component>}\n   * @private\n   */\n\n  this._componentsMap = {};\n  /**\n   * @type {module:echarts/CoordinateSystem}\n   * @private\n   */\n\n  this._coordSysMgr = new CoordinateSystemManager();\n  /**\n   * @type {module:echarts/ExtensionAPI}\n   * @private\n   */\n\n  var api = this._api = createExtensionAPI(this); // Sort on demand\n\n  function prioritySortFunc(a, b) {\n    return a.__prio - b.__prio;\n  }\n\n  timsort(visualFuncs, prioritySortFunc);\n  timsort(dataProcessorFuncs, prioritySortFunc);\n  /**\n   * @type {module:echarts/stream/Scheduler}\n   */\n\n  this._scheduler = new Scheduler(this, api, dataProcessorFuncs, visualFuncs);\n  Eventful.call(this, this._ecEventProcessor = new EventProcessor());\n  /**\n   * @type {module:echarts~MessageCenter}\n   * @private\n   */\n\n  this._messageCenter = new MessageCenter(); // Init mouse events\n\n  this._initEvents(); // In case some people write `window.onresize = chart.resize`\n\n\n  this.resize = zrUtil.bind(this.resize, this); // Can't dispatch action during rendering procedure\n\n  this._pendingActions = [];\n  zr.animation.on('frame', this._onframe, this);\n  bindRenderedEvent(zr, this); // ECharts instance can be used as value.\n\n  zrUtil.setAsPrimitive(this);\n}\n\nvar echartsProto = ECharts.prototype;\n\nechartsProto._onframe = function () {\n  if (this._disposed) {\n    return;\n  }\n\n  var scheduler = this._scheduler; // Lazy update\n\n  if (this[OPTION_UPDATED]) {\n    var silent = this[OPTION_UPDATED].silent;\n    this[IN_MAIN_PROCESS] = true;\n    prepare(this);\n    updateMethods.update.call(this);\n    this[IN_MAIN_PROCESS] = false;\n    this[OPTION_UPDATED] = false;\n    flushPendingActions.call(this, silent);\n    triggerUpdatedEvent.call(this, silent);\n  } // Avoid do both lazy update and progress in one frame.\n  else if (scheduler.unfinished) {\n      // Stream progress.\n      var remainTime = TEST_FRAME_REMAIN_TIME;\n      var ecModel = this._model;\n      var api = this._api;\n      scheduler.unfinished = false;\n\n      do {\n        var startTime = +new Date();\n        scheduler.performSeriesTasks(ecModel); // Currently dataProcessorFuncs do not check threshold.\n\n        scheduler.performDataProcessorTasks(ecModel);\n        updateStreamModes(this, ecModel); // Do not update coordinate system here. Because that coord system update in\n        // each frame is not a good user experience. So we follow the rule that\n        // the extent of the coordinate system is determin in the first frame (the\n        // frame is executed immedietely after task reset.\n        // this._coordSysMgr.update(ecModel, api);\n        // console.log('--- ec frame visual ---', remainTime);\n\n        scheduler.performVisualTasks(ecModel);\n        renderSeries(this, this._model, api, 'remain');\n        remainTime -= +new Date() - startTime;\n      } while (remainTime > 0 && scheduler.unfinished); // Call flush explicitly for trigger finished event.\n\n\n      if (!scheduler.unfinished) {\n        this._zr.flush();\n      } // Else, zr flushing be ensue within the same frame,\n      // because zr flushing is after onframe event.\n\n    }\n};\n/**\n * @return {HTMLElement}\n */\n\n\nechartsProto.getDom = function () {\n  return this._dom;\n};\n/**\n * @return {module:zrender~ZRender}\n */\n\n\nechartsProto.getZr = function () {\n  return this._zr;\n};\n/**\n * Usage:\n * chart.setOption(option, notMerge, lazyUpdate);\n * chart.setOption(option, {\n *     notMerge: ...,\n *     lazyUpdate: ...,\n *     silent: ...\n * });\n *\n * @param {Object} option\n * @param {Object|boolean} [opts] opts or notMerge.\n * @param {boolean} [opts.notMerge=false]\n * @param {boolean} [opts.lazyUpdate=false] Useful when setOption frequently.\n */\n\n\nechartsProto.setOption = function (option, notMerge, lazyUpdate) {\n  if (this._disposed) {\n    disposedWarning(this.id);\n    return;\n  }\n\n  var silent;\n\n  if (isObject(notMerge)) {\n    lazyUpdate = notMerge.lazyUpdate;\n    silent = notMerge.silent;\n    notMerge = notMerge.notMerge;\n  }\n\n  this[IN_MAIN_PROCESS] = true;\n\n  if (!this._model || notMerge) {\n    var optionManager = new OptionManager(this._api);\n    var theme = this._theme;\n    var ecModel = this._model = new GlobalModel();\n    ecModel.scheduler = this._scheduler;\n    ecModel.init(null, null, theme, optionManager);\n  }\n\n  this._model.setOption(option, optionPreprocessorFuncs);\n\n  if (lazyUpdate) {\n    this[OPTION_UPDATED] = {\n      silent: silent\n    };\n    this[IN_MAIN_PROCESS] = false;\n  } else {\n    prepare(this);\n    updateMethods.update.call(this); // Ensure zr refresh sychronously, and then pixel in canvas can be\n    // fetched after `setOption`.\n\n    this._zr.flush();\n\n    this[OPTION_UPDATED] = false;\n    this[IN_MAIN_PROCESS] = false;\n    flushPendingActions.call(this, silent);\n    triggerUpdatedEvent.call(this, silent);\n  }\n};\n/**\n * @DEPRECATED\n */\n\n\nechartsProto.setTheme = function () {\n  console.error('ECharts#setTheme() is DEPRECATED in ECharts 3.0');\n};\n/**\n * @return {module:echarts/model/Global}\n */\n\n\nechartsProto.getModel = function () {\n  return this._model;\n};\n/**\n * @return {Object}\n */\n\n\nechartsProto.getOption = function () {\n  return this._model && this._model.getOption();\n};\n/**\n * @return {number}\n */\n\n\nechartsProto.getWidth = function () {\n  return this._zr.getWidth();\n};\n/**\n * @return {number}\n */\n\n\nechartsProto.getHeight = function () {\n  return this._zr.getHeight();\n};\n/**\n * @return {number}\n */\n\n\nechartsProto.getDevicePixelRatio = function () {\n  return this._zr.painter.dpr || window.devicePixelRatio || 1;\n};\n/**\n * Get canvas which has all thing rendered\n * @param {Object} opts\n * @param {string} [opts.backgroundColor]\n * @return {string}\n */\n\n\nechartsProto.getRenderedCanvas = function (opts) {\n  if (!env.canvasSupported) {\n    return;\n  }\n\n  opts = opts || {};\n  opts.pixelRatio = opts.pixelRatio || 1;\n  opts.backgroundColor = opts.backgroundColor || this._model.get('backgroundColor');\n  var zr = this._zr; // var list = zr.storage.getDisplayList();\n  // Stop animations\n  // Never works before in init animation, so remove it.\n  // zrUtil.each(list, function (el) {\n  //     el.stopAnimation(true);\n  // });\n\n  return zr.painter.getRenderedCanvas(opts);\n};\n/**\n * Get svg data url\n * @return {string}\n */\n\n\nechartsProto.getSvgDataURL = function () {\n  if (!env.svgSupported) {\n    return;\n  }\n\n  var zr = this._zr;\n  var list = zr.storage.getDisplayList(); // Stop animations\n\n  zrUtil.each(list, function (el) {\n    el.stopAnimation(true);\n  });\n  return zr.painter.toDataURL();\n};\n/**\n * @return {string}\n * @param {Object} opts\n * @param {string} [opts.type='png']\n * @param {string} [opts.pixelRatio=1]\n * @param {string} [opts.backgroundColor]\n * @param {string} [opts.excludeComponents]\n */\n\n\nechartsProto.getDataURL = function (opts) {\n  if (this._disposed) {\n    disposedWarning(this.id);\n    return;\n  }\n\n  opts = opts || {};\n  var excludeComponents = opts.excludeComponents;\n  var ecModel = this._model;\n  var excludesComponentViews = [];\n  var self = this;\n  each(excludeComponents, function (componentType) {\n    ecModel.eachComponent({\n      mainType: componentType\n    }, function (component) {\n      var view = self._componentsMap[component.__viewId];\n\n      if (!view.group.ignore) {\n        excludesComponentViews.push(view);\n        view.group.ignore = true;\n      }\n    });\n  });\n  var url = this._zr.painter.getType() === 'svg' ? this.getSvgDataURL() : this.getRenderedCanvas(opts).toDataURL('image/' + (opts && opts.type || 'png'));\n  each(excludesComponentViews, function (view) {\n    view.group.ignore = false;\n  });\n  return url;\n};\n/**\n * @return {string}\n * @param {Object} opts\n * @param {string} [opts.type='png']\n * @param {string} [opts.pixelRatio=1]\n * @param {string} [opts.backgroundColor]\n */\n\n\nechartsProto.getConnectedDataURL = function (opts) {\n  if (this._disposed) {\n    disposedWarning(this.id);\n    return;\n  }\n\n  if (!env.canvasSupported) {\n    return;\n  }\n\n  var isSvg = opts.type === 'svg';\n  var groupId = this.group;\n  var mathMin = Math.min;\n  var mathMax = Math.max;\n  var MAX_NUMBER = Infinity;\n\n  if (connectedGroups[groupId]) {\n    var left = MAX_NUMBER;\n    var top = MAX_NUMBER;\n    var right = -MAX_NUMBER;\n    var bottom = -MAX_NUMBER;\n    var canvasList = [];\n    var dpr = opts && opts.pixelRatio || 1;\n    zrUtil.each(instances, function (chart, id) {\n      if (chart.group === groupId) {\n        var canvas = isSvg ? chart.getZr().painter.getSvgDom().innerHTML : chart.getRenderedCanvas(zrUtil.clone(opts));\n        var boundingRect = chart.getDom().getBoundingClientRect();\n        left = mathMin(boundingRect.left, left);\n        top = mathMin(boundingRect.top, top);\n        right = mathMax(boundingRect.right, right);\n        bottom = mathMax(boundingRect.bottom, bottom);\n        canvasList.push({\n          dom: canvas,\n          left: boundingRect.left,\n          top: boundingRect.top\n        });\n      }\n    });\n    left *= dpr;\n    top *= dpr;\n    right *= dpr;\n    bottom *= dpr;\n    var width = right - left;\n    var height = bottom - top;\n    var targetCanvas = zrUtil.createCanvas();\n    var zr = zrender.init(targetCanvas, {\n      renderer: isSvg ? 'svg' : 'canvas'\n    });\n    zr.resize({\n      width: width,\n      height: height\n    });\n\n    if (isSvg) {\n      var content = '';\n      each(canvasList, function (item) {\n        var x = item.left - left;\n        var y = item.top - top;\n        content += '<g transform=\"translate(' + x + ',' + y + ')\">' + item.dom + '</g>';\n      });\n      zr.painter.getSvgRoot().innerHTML = content;\n\n      if (opts.connectedBackgroundColor) {\n        zr.painter.setBackgroundColor(opts.connectedBackgroundColor);\n      }\n\n      zr.refreshImmediately();\n      return zr.painter.toDataURL();\n    } else {\n      // Background between the charts\n      if (opts.connectedBackgroundColor) {\n        zr.add(new graphic.Rect({\n          shape: {\n            x: 0,\n            y: 0,\n            width: width,\n            height: height\n          },\n          style: {\n            fill: opts.connectedBackgroundColor\n          }\n        }));\n      }\n\n      each(canvasList, function (item) {\n        var img = new graphic.Image({\n          style: {\n            x: item.left * dpr - left,\n            y: item.top * dpr - top,\n            image: item.dom\n          }\n        });\n        zr.add(img);\n      });\n      zr.refreshImmediately();\n      return targetCanvas.toDataURL('image/' + (opts && opts.type || 'png'));\n    }\n  } else {\n    return this.getDataURL(opts);\n  }\n};\n/**\n * Convert from logical coordinate system to pixel coordinate system.\n * See CoordinateSystem#convertToPixel.\n * @param {string|Object} finder\n *        If string, e.g., 'geo', means {geoIndex: 0}.\n *        If Object, could contain some of these properties below:\n *        {\n *            seriesIndex / seriesId / seriesName,\n *            geoIndex / geoId, geoName,\n *            bmapIndex / bmapId / bmapName,\n *            xAxisIndex / xAxisId / xAxisName,\n *            yAxisIndex / yAxisId / yAxisName,\n *            gridIndex / gridId / gridName,\n *            ... (can be extended)\n *        }\n * @param {Array|number} value\n * @return {Array|number} result\n */\n\n\nechartsProto.convertToPixel = zrUtil.curry(doConvertPixel, 'convertToPixel');\n/**\n * Convert from pixel coordinate system to logical coordinate system.\n * See CoordinateSystem#convertFromPixel.\n * @param {string|Object} finder\n *        If string, e.g., 'geo', means {geoIndex: 0}.\n *        If Object, could contain some of these properties below:\n *        {\n *            seriesIndex / seriesId / seriesName,\n *            geoIndex / geoId / geoName,\n *            bmapIndex / bmapId / bmapName,\n *            xAxisIndex / xAxisId / xAxisName,\n *            yAxisIndex / yAxisId / yAxisName\n *            gridIndex / gridId / gridName,\n *            ... (can be extended)\n *        }\n * @param {Array|number} value\n * @return {Array|number} result\n */\n\nechartsProto.convertFromPixel = zrUtil.curry(doConvertPixel, 'convertFromPixel');\n\nfunction doConvertPixel(methodName, finder, value) {\n  if (this._disposed) {\n    disposedWarning(this.id);\n    return;\n  }\n\n  var ecModel = this._model;\n\n  var coordSysList = this._coordSysMgr.getCoordinateSystems();\n\n  var result;\n  finder = modelUtil.parseFinder(ecModel, finder);\n\n  for (var i = 0; i < coordSysList.length; i++) {\n    var coordSys = coordSysList[i];\n\n    if (coordSys[methodName] && (result = coordSys[methodName](ecModel, finder, value)) != null) {\n      return result;\n    }\n  }\n}\n/**\n * Is the specified coordinate systems or components contain the given pixel point.\n * @param {string|Object} finder\n *        If string, e.g., 'geo', means {geoIndex: 0}.\n *        If Object, could contain some of these properties below:\n *        {\n *            seriesIndex / seriesId / seriesName,\n *            geoIndex / geoId / geoName,\n *            bmapIndex / bmapId / bmapName,\n *            xAxisIndex / xAxisId / xAxisName,\n *            yAxisIndex / yAxisId / yAxisName,\n *            gridIndex / gridId / gridName,\n *            ... (can be extended)\n *        }\n * @param {Array|number} value\n * @return {boolean} result\n */\n\n\nechartsProto.containPixel = function (finder, value) {\n  if (this._disposed) {\n    disposedWarning(this.id);\n    return;\n  }\n\n  var ecModel = this._model;\n  var result;\n  finder = modelUtil.parseFinder(ecModel, finder);\n  zrUtil.each(finder, function (models, key) {\n    key.indexOf('Models') >= 0 && zrUtil.each(models, function (model) {\n      var coordSys = model.coordinateSystem;\n\n      if (coordSys && coordSys.containPoint) {\n        result |= !!coordSys.containPoint(value);\n      } else if (key === 'seriesModels') {\n        var view = this._chartsMap[model.__viewId];\n\n        if (view && view.containPoint) {\n          result |= view.containPoint(value, model);\n        } else {}\n      } else {}\n    }, this);\n  }, this);\n  return !!result;\n};\n/**\n * Get visual from series or data.\n * @param {string|Object} finder\n *        If string, e.g., 'series', means {seriesIndex: 0}.\n *        If Object, could contain some of these properties below:\n *        {\n *            seriesIndex / seriesId / seriesName,\n *            dataIndex / dataIndexInside\n *        }\n *        If dataIndex is not specified, series visual will be fetched,\n *        but not data item visual.\n *        If all of seriesIndex, seriesId, seriesName are not specified,\n *        visual will be fetched from first series.\n * @param {string} visualType 'color', 'symbol', 'symbolSize'\n */\n\n\nechartsProto.getVisual = function (finder, visualType) {\n  var ecModel = this._model;\n  finder = modelUtil.parseFinder(ecModel, finder, {\n    defaultMainType: 'series'\n  });\n  var seriesModel = finder.seriesModel;\n  var data = seriesModel.getData();\n  var dataIndexInside = finder.hasOwnProperty('dataIndexInside') ? finder.dataIndexInside : finder.hasOwnProperty('dataIndex') ? data.indexOfRawIndex(finder.dataIndex) : null;\n  return dataIndexInside != null ? data.getItemVisual(dataIndexInside, visualType) : data.getVisual(visualType);\n};\n/**\n * Get view of corresponding component model\n * @param  {module:echarts/model/Component} componentModel\n * @return {module:echarts/view/Component}\n */\n\n\nechartsProto.getViewOfComponentModel = function (componentModel) {\n  return this._componentsMap[componentModel.__viewId];\n};\n/**\n * Get view of corresponding series model\n * @param  {module:echarts/model/Series} seriesModel\n * @return {module:echarts/view/Chart}\n */\n\n\nechartsProto.getViewOfSeriesModel = function (seriesModel) {\n  return this._chartsMap[seriesModel.__viewId];\n};\n\nvar updateMethods = {\n  prepareAndUpdate: function (payload) {\n    prepare(this);\n    updateMethods.update.call(this, payload);\n  },\n\n  /**\n   * @param {Object} payload\n   * @private\n   */\n  update: function (payload) {\n    // console.profile && console.profile('update');\n    var ecModel = this._model;\n    var api = this._api;\n    var zr = this._zr;\n    var coordSysMgr = this._coordSysMgr;\n    var scheduler = this._scheduler; // update before setOption\n\n    if (!ecModel) {\n      return;\n    }\n\n    scheduler.restoreData(ecModel, payload);\n    scheduler.performSeriesTasks(ecModel); // TODO\n    // Save total ecModel here for undo/redo (after restoring data and before processing data).\n    // Undo (restoration of total ecModel) can be carried out in 'action' or outside API call.\n    // Create new coordinate system each update\n    // In LineView may save the old coordinate system and use it to get the orignal point\n\n    coordSysMgr.create(ecModel, api);\n    scheduler.performDataProcessorTasks(ecModel, payload); // Current stream render is not supported in data process. So we can update\n    // stream modes after data processing, where the filtered data is used to\n    // deteming whether use progressive rendering.\n\n    updateStreamModes(this, ecModel); // We update stream modes before coordinate system updated, then the modes info\n    // can be fetched when coord sys updating (consider the barGrid extent fix). But\n    // the drawback is the full coord info can not be fetched. Fortunately this full\n    // coord is not requied in stream mode updater currently.\n\n    coordSysMgr.update(ecModel, api);\n    clearColorPalette(ecModel);\n    scheduler.performVisualTasks(ecModel, payload);\n    render(this, ecModel, api, payload); // Set background\n\n    var backgroundColor = ecModel.get('backgroundColor') || 'transparent'; // In IE8\n\n    if (!env.canvasSupported) {\n      var colorArr = colorTool.parse(backgroundColor);\n      backgroundColor = colorTool.stringify(colorArr, 'rgb');\n\n      if (colorArr[3] === 0) {\n        backgroundColor = 'transparent';\n      }\n    } else {\n      zr.setBackgroundColor(backgroundColor);\n    }\n\n    performPostUpdateFuncs(ecModel, api); // console.profile && console.profileEnd('update');\n  },\n\n  /**\n   * @param {Object} payload\n   * @private\n   */\n  updateTransform: function (payload) {\n    var ecModel = this._model;\n    var ecIns = this;\n    var api = this._api; // update before setOption\n\n    if (!ecModel) {\n      return;\n    } // ChartView.markUpdateMethod(payload, 'updateTransform');\n\n\n    var componentDirtyList = [];\n    ecModel.eachComponent(function (componentType, componentModel) {\n      var componentView = ecIns.getViewOfComponentModel(componentModel);\n\n      if (componentView && componentView.__alive) {\n        if (componentView.updateTransform) {\n          var result = componentView.updateTransform(componentModel, ecModel, api, payload);\n          result && result.update && componentDirtyList.push(componentView);\n        } else {\n          componentDirtyList.push(componentView);\n        }\n      }\n    });\n    var seriesDirtyMap = zrUtil.createHashMap();\n    ecModel.eachSeries(function (seriesModel) {\n      var chartView = ecIns._chartsMap[seriesModel.__viewId];\n\n      if (chartView.updateTransform) {\n        var result = chartView.updateTransform(seriesModel, ecModel, api, payload);\n        result && result.update && seriesDirtyMap.set(seriesModel.uid, 1);\n      } else {\n        seriesDirtyMap.set(seriesModel.uid, 1);\n      }\n    });\n    clearColorPalette(ecModel); // Keep pipe to the exist pipeline because it depends on the render task of the full pipeline.\n    // this._scheduler.performVisualTasks(ecModel, payload, 'layout', true);\n\n    this._scheduler.performVisualTasks(ecModel, payload, {\n      setDirty: true,\n      dirtyMap: seriesDirtyMap\n    }); // Currently, not call render of components. Geo render cost a lot.\n    // renderComponents(ecIns, ecModel, api, payload, componentDirtyList);\n\n\n    renderSeries(ecIns, ecModel, api, payload, seriesDirtyMap);\n    performPostUpdateFuncs(ecModel, this._api);\n  },\n\n  /**\n   * @param {Object} payload\n   * @private\n   */\n  updateView: function (payload) {\n    var ecModel = this._model; // update before setOption\n\n    if (!ecModel) {\n      return;\n    }\n\n    ChartView.markUpdateMethod(payload, 'updateView');\n    clearColorPalette(ecModel); // Keep pipe to the exist pipeline because it depends on the render task of the full pipeline.\n\n    this._scheduler.performVisualTasks(ecModel, payload, {\n      setDirty: true\n    });\n\n    render(this, this._model, this._api, payload);\n    performPostUpdateFuncs(ecModel, this._api);\n  },\n\n  /**\n   * @param {Object} payload\n   * @private\n   */\n  updateVisual: function (payload) {\n    updateMethods.update.call(this, payload); // var ecModel = this._model;\n    // // update before setOption\n    // if (!ecModel) {\n    //     return;\n    // }\n    // ChartView.markUpdateMethod(payload, 'updateVisual');\n    // clearColorPalette(ecModel);\n    // // Keep pipe to the exist pipeline because it depends on the render task of the full pipeline.\n    // this._scheduler.performVisualTasks(ecModel, payload, {visualType: 'visual', setDirty: true});\n    // render(this, this._model, this._api, payload);\n    // performPostUpdateFuncs(ecModel, this._api);\n  },\n\n  /**\n   * @param {Object} payload\n   * @private\n   */\n  updateLayout: function (payload) {\n    updateMethods.update.call(this, payload); // var ecModel = this._model;\n    // // update before setOption\n    // if (!ecModel) {\n    //     return;\n    // }\n    // ChartView.markUpdateMethod(payload, 'updateLayout');\n    // // Keep pipe to the exist pipeline because it depends on the render task of the full pipeline.\n    // // this._scheduler.performVisualTasks(ecModel, payload, 'layout', true);\n    // this._scheduler.performVisualTasks(ecModel, payload, {setDirty: true});\n    // render(this, this._model, this._api, payload);\n    // performPostUpdateFuncs(ecModel, this._api);\n  }\n};\n\nfunction prepare(ecIns) {\n  var ecModel = ecIns._model;\n  var scheduler = ecIns._scheduler;\n  scheduler.restorePipelines(ecModel);\n  scheduler.prepareStageTasks();\n  prepareView(ecIns, 'component', ecModel, scheduler);\n  prepareView(ecIns, 'chart', ecModel, scheduler);\n  scheduler.plan();\n}\n/**\n * @private\n */\n\n\nfunction updateDirectly(ecIns, method, payload, mainType, subType) {\n  var ecModel = ecIns._model; // broadcast\n\n  if (!mainType) {\n    // FIXME\n    // Chart will not be update directly here, except set dirty.\n    // But there is no such scenario now.\n    each(ecIns._componentsViews.concat(ecIns._chartsViews), callView);\n    return;\n  }\n\n  var query = {};\n  query[mainType + 'Id'] = payload[mainType + 'Id'];\n  query[mainType + 'Index'] = payload[mainType + 'Index'];\n  query[mainType + 'Name'] = payload[mainType + 'Name'];\n  var condition = {\n    mainType: mainType,\n    query: query\n  };\n  subType && (condition.subType = subType); // subType may be '' by parseClassType;\n\n  var excludeSeriesId = payload.excludeSeriesId;\n\n  if (excludeSeriesId != null) {\n    excludeSeriesId = zrUtil.createHashMap(modelUtil.normalizeToArray(excludeSeriesId));\n  } // If dispatchAction before setOption, do nothing.\n\n\n  ecModel && ecModel.eachComponent(condition, function (model) {\n    if (!excludeSeriesId || excludeSeriesId.get(model.id) == null) {\n      callView(ecIns[mainType === 'series' ? '_chartsMap' : '_componentsMap'][model.__viewId]);\n    }\n  }, ecIns);\n\n  function callView(view) {\n    view && view.__alive && view[method] && view[method](view.__model, ecModel, ecIns._api, payload);\n  }\n}\n/**\n * Resize the chart\n * @param {Object} opts\n * @param {number} [opts.width] Can be 'auto' (the same as null/undefined)\n * @param {number} [opts.height] Can be 'auto' (the same as null/undefined)\n * @param {boolean} [opts.silent=false]\n */\n\n\nechartsProto.resize = function (opts) {\n  if (this._disposed) {\n    disposedWarning(this.id);\n    return;\n  }\n\n  this._zr.resize(opts);\n\n  var ecModel = this._model; // Resize loading effect\n\n  this._loadingFX && this._loadingFX.resize();\n\n  if (!ecModel) {\n    return;\n  }\n\n  var optionChanged = ecModel.resetOption('media');\n  var silent = opts && opts.silent;\n  this[IN_MAIN_PROCESS] = true;\n  optionChanged && prepare(this);\n  updateMethods.update.call(this);\n  this[IN_MAIN_PROCESS] = false;\n  flushPendingActions.call(this, silent);\n  triggerUpdatedEvent.call(this, silent);\n};\n\nfunction updateStreamModes(ecIns, ecModel) {\n  var chartsMap = ecIns._chartsMap;\n  var scheduler = ecIns._scheduler;\n  ecModel.eachSeries(function (seriesModel) {\n    scheduler.updateStreamModes(seriesModel, chartsMap[seriesModel.__viewId]);\n  });\n}\n/**\n * Show loading effect\n * @param  {string} [name='default']\n * @param  {Object} [cfg]\n */\n\n\nechartsProto.showLoading = function (name, cfg) {\n  if (this._disposed) {\n    disposedWarning(this.id);\n    return;\n  }\n\n  if (isObject(name)) {\n    cfg = name;\n    name = '';\n  }\n\n  name = name || 'default';\n  this.hideLoading();\n\n  if (!loadingEffects[name]) {\n    return;\n  }\n\n  var el = loadingEffects[name](this._api, cfg);\n  var zr = this._zr;\n  this._loadingFX = el;\n  zr.add(el);\n};\n/**\n * Hide loading effect\n */\n\n\nechartsProto.hideLoading = function () {\n  if (this._disposed) {\n    disposedWarning(this.id);\n    return;\n  }\n\n  this._loadingFX && this._zr.remove(this._loadingFX);\n  this._loadingFX = null;\n};\n/**\n * @param {Object} eventObj\n * @return {Object}\n */\n\n\nechartsProto.makeActionFromEvent = function (eventObj) {\n  var payload = zrUtil.extend({}, eventObj);\n  payload.type = eventActionMap[eventObj.type];\n  return payload;\n};\n/**\n * @pubilc\n * @param {Object} payload\n * @param {string} [payload.type] Action type\n * @param {Object|boolean} [opt] If pass boolean, means opt.silent\n * @param {boolean} [opt.silent=false] Whether trigger events.\n * @param {boolean} [opt.flush=undefined]\n *                  true: Flush immediately, and then pixel in canvas can be fetched\n *                      immediately. Caution: it might affect performance.\n *                  false: Not flush.\n *                  undefined: Auto decide whether perform flush.\n */\n\n\nechartsProto.dispatchAction = function (payload, opt) {\n  if (this._disposed) {\n    disposedWarning(this.id);\n    return;\n  }\n\n  if (!isObject(opt)) {\n    opt = {\n      silent: !!opt\n    };\n  }\n\n  if (!actions[payload.type]) {\n    return;\n  } // Avoid dispatch action before setOption. Especially in `connect`.\n\n\n  if (!this._model) {\n    return;\n  } // May dispatchAction in rendering procedure\n\n\n  if (this[IN_MAIN_PROCESS]) {\n    this._pendingActions.push(payload);\n\n    return;\n  }\n\n  doDispatchAction.call(this, payload, opt.silent);\n\n  if (opt.flush) {\n    this._zr.flush(true);\n  } else if (opt.flush !== false && env.browser.weChat) {\n    // In WeChat embeded browser, `requestAnimationFrame` and `setInterval`\n    // hang when sliding page (on touch event), which cause that zr does not\n    // refresh util user interaction finished, which is not expected.\n    // But `dispatchAction` may be called too frequently when pan on touch\n    // screen, which impacts performance if do not throttle them.\n    this._throttledZrFlush();\n  }\n\n  flushPendingActions.call(this, opt.silent);\n  triggerUpdatedEvent.call(this, opt.silent);\n};\n\nfunction doDispatchAction(payload, silent) {\n  var payloadType = payload.type;\n  var escapeConnect = payload.escapeConnect;\n  var actionWrap = actions[payloadType];\n  var actionInfo = actionWrap.actionInfo;\n  var cptType = (actionInfo.update || 'update').split(':');\n  var updateMethod = cptType.pop();\n  cptType = cptType[0] != null && parseClassType(cptType[0]);\n  this[IN_MAIN_PROCESS] = true;\n  var payloads = [payload];\n  var batched = false; // Batch action\n\n  if (payload.batch) {\n    batched = true;\n    payloads = zrUtil.map(payload.batch, function (item) {\n      item = zrUtil.defaults(zrUtil.extend({}, item), payload);\n      item.batch = null;\n      return item;\n    });\n  }\n\n  var eventObjBatch = [];\n  var eventObj;\n  var isHighDown = payloadType === 'highlight' || payloadType === 'downplay';\n  each(payloads, function (batchItem) {\n    // Action can specify the event by return it.\n    eventObj = actionWrap.action(batchItem, this._model, this._api); // Emit event outside\n\n    eventObj = eventObj || zrUtil.extend({}, batchItem); // Convert type to eventType\n\n    eventObj.type = actionInfo.event || eventObj.type;\n    eventObjBatch.push(eventObj); // light update does not perform data process, layout and visual.\n\n    if (isHighDown) {\n      // method, payload, mainType, subType\n      updateDirectly(this, updateMethod, batchItem, 'series');\n    } else if (cptType) {\n      updateDirectly(this, updateMethod, batchItem, cptType.main, cptType.sub);\n    }\n  }, this);\n\n  if (updateMethod !== 'none' && !isHighDown && !cptType) {\n    // Still dirty\n    if (this[OPTION_UPDATED]) {\n      // FIXME Pass payload ?\n      prepare(this);\n      updateMethods.update.call(this, payload);\n      this[OPTION_UPDATED] = false;\n    } else {\n      updateMethods[updateMethod].call(this, payload);\n    }\n  } // Follow the rule of action batch\n\n\n  if (batched) {\n    eventObj = {\n      type: actionInfo.event || payloadType,\n      escapeConnect: escapeConnect,\n      batch: eventObjBatch\n    };\n  } else {\n    eventObj = eventObjBatch[0];\n  }\n\n  this[IN_MAIN_PROCESS] = false;\n  !silent && this._messageCenter.trigger(eventObj.type, eventObj);\n}\n\nfunction flushPendingActions(silent) {\n  var pendingActions = this._pendingActions;\n\n  while (pendingActions.length) {\n    var payload = pendingActions.shift();\n    doDispatchAction.call(this, payload, silent);\n  }\n}\n\nfunction triggerUpdatedEvent(silent) {\n  !silent && this.trigger('updated');\n}\n/**\n * Event `rendered` is triggered when zr\n * rendered. It is useful for realtime\n * snapshot (reflect animation).\n *\n * Event `finished` is triggered when:\n * (1) zrender rendering finished.\n * (2) initial animation finished.\n * (3) progressive rendering finished.\n * (4) no pending action.\n * (5) no delayed setOption needs to be processed.\n */\n\n\nfunction bindRenderedEvent(zr, ecIns) {\n  zr.on('rendered', function () {\n    ecIns.trigger('rendered'); // The `finished` event should not be triggered repeatly,\n    // so it should only be triggered when rendering indeed happend\n    // in zrender. (Consider the case that dipatchAction is keep\n    // triggering when mouse move).\n\n    if ( // Although zr is dirty if initial animation is not finished\n    // and this checking is called on frame, we also check\n    // animation finished for robustness.\n    zr.animation.isFinished() && !ecIns[OPTION_UPDATED] && !ecIns._scheduler.unfinished && !ecIns._pendingActions.length) {\n      ecIns.trigger('finished');\n    }\n  });\n}\n/**\n * @param {Object} params\n * @param {number} params.seriesIndex\n * @param {Array|TypedArray} params.data\n */\n\n\nechartsProto.appendData = function (params) {\n  if (this._disposed) {\n    disposedWarning(this.id);\n    return;\n  }\n\n  var seriesIndex = params.seriesIndex;\n  var ecModel = this.getModel();\n  var seriesModel = ecModel.getSeriesByIndex(seriesIndex);\n  seriesModel.appendData(params); // Note: `appendData` does not support that update extent of coordinate\n  // system, util some scenario require that. In the expected usage of\n  // `appendData`, the initial extent of coordinate system should better\n  // be fixed by axis `min`/`max` setting or initial data, otherwise if\n  // the extent changed while `appendData`, the location of the painted\n  // graphic elements have to be changed, which make the usage of\n  // `appendData` meaningless.\n\n  this._scheduler.unfinished = true;\n};\n/**\n * Register event\n * @method\n */\n\n\nechartsProto.on = createRegisterEventWithLowercaseName('on', false);\nechartsProto.off = createRegisterEventWithLowercaseName('off', false);\nechartsProto.one = createRegisterEventWithLowercaseName('one', false);\n/**\n * Prepare view instances of charts and components\n * @param  {module:echarts/model/Global} ecModel\n * @private\n */\n\nfunction prepareView(ecIns, type, ecModel, scheduler) {\n  var isComponent = type === 'component';\n  var viewList = isComponent ? ecIns._componentsViews : ecIns._chartsViews;\n  var viewMap = isComponent ? ecIns._componentsMap : ecIns._chartsMap;\n  var zr = ecIns._zr;\n  var api = ecIns._api;\n\n  for (var i = 0; i < viewList.length; i++) {\n    viewList[i].__alive = false;\n  }\n\n  isComponent ? ecModel.eachComponent(function (componentType, model) {\n    componentType !== 'series' && doPrepare(model);\n  }) : ecModel.eachSeries(doPrepare);\n\n  function doPrepare(model) {\n    // Consider: id same and type changed.\n    var viewId = '_ec_' + model.id + '_' + model.type;\n    var view = viewMap[viewId];\n\n    if (!view) {\n      var classType = parseClassType(model.type);\n      var Clazz = isComponent ? ComponentView.getClass(classType.main, classType.sub) : ChartView.getClass(classType.sub);\n      view = new Clazz();\n      view.init(ecModel, api);\n      viewMap[viewId] = view;\n      viewList.push(view);\n      zr.add(view.group);\n    }\n\n    model.__viewId = view.__id = viewId;\n    view.__alive = true;\n    view.__model = model;\n    view.group.__ecComponentInfo = {\n      mainType: model.mainType,\n      index: model.componentIndex\n    };\n    !isComponent && scheduler.prepareView(view, model, ecModel, api);\n  }\n\n  for (var i = 0; i < viewList.length;) {\n    var view = viewList[i];\n\n    if (!view.__alive) {\n      !isComponent && view.renderTask.dispose();\n      zr.remove(view.group);\n      view.dispose(ecModel, api);\n      viewList.splice(i, 1);\n      delete viewMap[view.__id];\n      view.__id = view.group.__ecComponentInfo = null;\n    } else {\n      i++;\n    }\n  }\n} // /**\n//  * Encode visual infomation from data after data processing\n//  *\n//  * @param {module:echarts/model/Global} ecModel\n//  * @param {object} layout\n//  * @param {boolean} [layoutFilter] `true`: only layout,\n//  *                                 `false`: only not layout,\n//  *                                 `null`/`undefined`: all.\n//  * @param {string} taskBaseTag\n//  * @private\n//  */\n// function startVisualEncoding(ecIns, ecModel, api, payload, layoutFilter) {\n//     each(visualFuncs, function (visual, index) {\n//         var isLayout = visual.isLayout;\n//         if (layoutFilter == null\n//             || (layoutFilter === false && !isLayout)\n//             || (layoutFilter === true && isLayout)\n//         ) {\n//             visual.func(ecModel, api, payload);\n//         }\n//     });\n// }\n\n\nfunction clearColorPalette(ecModel) {\n  ecModel.clearColorPalette();\n  ecModel.eachSeries(function (seriesModel) {\n    seriesModel.clearColorPalette();\n  });\n}\n\nfunction render(ecIns, ecModel, api, payload) {\n  renderComponents(ecIns, ecModel, api, payload);\n  each(ecIns._chartsViews, function (chart) {\n    chart.__alive = false;\n  });\n  renderSeries(ecIns, ecModel, api, payload); // Remove groups of unrendered charts\n\n  each(ecIns._chartsViews, function (chart) {\n    if (!chart.__alive) {\n      chart.remove(ecModel, api);\n    }\n  });\n}\n\nfunction renderComponents(ecIns, ecModel, api, payload, dirtyList) {\n  each(dirtyList || ecIns._componentsViews, function (componentView) {\n    var componentModel = componentView.__model;\n    componentView.render(componentModel, ecModel, api, payload);\n    updateZ(componentModel, componentView);\n  });\n}\n/**\n * Render each chart and component\n * @private\n */\n\n\nfunction renderSeries(ecIns, ecModel, api, payload, dirtyMap) {\n  // Render all charts\n  var scheduler = ecIns._scheduler;\n  var unfinished;\n  ecModel.eachSeries(function (seriesModel) {\n    var chartView = ecIns._chartsMap[seriesModel.__viewId];\n    chartView.__alive = true;\n    var renderTask = chartView.renderTask;\n    scheduler.updatePayload(renderTask, payload);\n\n    if (dirtyMap && dirtyMap.get(seriesModel.uid)) {\n      renderTask.dirty();\n    }\n\n    unfinished |= renderTask.perform(scheduler.getPerformArgs(renderTask));\n    chartView.group.silent = !!seriesModel.get('silent');\n    updateZ(seriesModel, chartView);\n    updateBlend(seriesModel, chartView);\n  });\n  scheduler.unfinished |= unfinished; // If use hover layer\n\n  updateHoverLayerStatus(ecIns, ecModel); // Add aria\n\n  aria(ecIns._zr.dom, ecModel);\n}\n\nfunction performPostUpdateFuncs(ecModel, api) {\n  each(postUpdateFuncs, function (func) {\n    func(ecModel, api);\n  });\n}\n\nvar MOUSE_EVENT_NAMES = ['click', 'dblclick', 'mouseover', 'mouseout', 'mousemove', 'mousedown', 'mouseup', 'globalout', 'contextmenu'];\n/**\n * @private\n */\n\nechartsProto._initEvents = function () {\n  each(MOUSE_EVENT_NAMES, function (eveName) {\n    var handler = function (e) {\n      var ecModel = this.getModel();\n      var el = e.target;\n      var params;\n      var isGlobalOut = eveName === 'globalout'; // no e.target when 'globalout'.\n\n      if (isGlobalOut) {\n        params = {};\n      } else if (el && el.dataIndex != null) {\n        var dataModel = el.dataModel || ecModel.getSeriesByIndex(el.seriesIndex);\n        params = dataModel && dataModel.getDataParams(el.dataIndex, el.dataType, el) || {};\n      } // If element has custom eventData of components\n      else if (el && el.eventData) {\n          params = zrUtil.extend({}, el.eventData);\n        } // Contract: if params prepared in mouse event,\n      // these properties must be specified:\n      // {\n      //    componentType: string (component main type)\n      //    componentIndex: number\n      // }\n      // Otherwise event query can not work.\n\n\n      if (params) {\n        var componentType = params.componentType;\n        var componentIndex = params.componentIndex; // Special handling for historic reason: when trigger by\n        // markLine/markPoint/markArea, the componentType is\n        // 'markLine'/'markPoint'/'markArea', but we should better\n        // enable them to be queried by seriesIndex, since their\n        // option is set in each series.\n\n        if (componentType === 'markLine' || componentType === 'markPoint' || componentType === 'markArea') {\n          componentType = 'series';\n          componentIndex = params.seriesIndex;\n        }\n\n        var model = componentType && componentIndex != null && ecModel.getComponent(componentType, componentIndex);\n        var view = model && this[model.mainType === 'series' ? '_chartsMap' : '_componentsMap'][model.__viewId];\n        params.event = e;\n        params.type = eveName;\n        this._ecEventProcessor.eventInfo = {\n          targetEl: el,\n          packedEvent: params,\n          model: model,\n          view: view\n        };\n        this.trigger(eveName, params);\n      }\n    }; // Consider that some component (like tooltip, brush, ...)\n    // register zr event handler, but user event handler might\n    // do anything, such as call `setOption` or `dispatchAction`,\n    // which probably update any of the content and probably\n    // cause problem if it is called previous other inner handlers.\n\n\n    handler.zrEventfulCallAtLast = true;\n\n    this._zr.on(eveName, handler, this);\n  }, this);\n  each(eventActionMap, function (actionType, eventType) {\n    this._messageCenter.on(eventType, function (event) {\n      this.trigger(eventType, event);\n    }, this);\n  }, this);\n};\n/**\n * @return {boolean}\n */\n\n\nechartsProto.isDisposed = function () {\n  return this._disposed;\n};\n/**\n * Clear\n */\n\n\nechartsProto.clear = function () {\n  if (this._disposed) {\n    disposedWarning(this.id);\n    return;\n  }\n\n  this.setOption({\n    series: []\n  }, true);\n};\n/**\n * Dispose instance\n */\n\n\nechartsProto.dispose = function () {\n  if (this._disposed) {\n    disposedWarning(this.id);\n    return;\n  }\n\n  this._disposed = true;\n  modelUtil.setAttribute(this.getDom(), DOM_ATTRIBUTE_KEY, '');\n  var api = this._api;\n  var ecModel = this._model;\n  each(this._componentsViews, function (component) {\n    component.dispose(ecModel, api);\n  });\n  each(this._chartsViews, function (chart) {\n    chart.dispose(ecModel, api);\n  }); // Dispose after all views disposed\n\n  this._zr.dispose();\n\n  delete instances[this.id];\n};\n\nzrUtil.mixin(ECharts, Eventful);\n\nfunction disposedWarning(id) {}\n\nfunction updateHoverLayerStatus(ecIns, ecModel) {\n  var zr = ecIns._zr;\n  var storage = zr.storage;\n  var elCount = 0;\n  storage.traverse(function (el) {\n    elCount++;\n  });\n\n  if (elCount > ecModel.get('hoverLayerThreshold') && !env.node) {\n    ecModel.eachSeries(function (seriesModel) {\n      if (seriesModel.preventUsingHoverLayer) {\n        return;\n      }\n\n      var chartView = ecIns._chartsMap[seriesModel.__viewId];\n\n      if (chartView.__alive) {\n        chartView.group.traverse(function (el) {\n          // Don't switch back.\n          el.useHoverLayer = true;\n        });\n      }\n    });\n  }\n}\n/**\n * Update chart progressive and blend.\n * @param {module:echarts/model/Series|module:echarts/model/Component} model\n * @param {module:echarts/view/Component|module:echarts/view/Chart} view\n */\n\n\nfunction updateBlend(seriesModel, chartView) {\n  var blendMode = seriesModel.get('blendMode') || null;\n  chartView.group.traverse(function (el) {\n    // FIXME marker and other components\n    if (!el.isGroup) {\n      // Only set if blendMode is changed. In case element is incremental and don't wan't to rerender.\n      if (el.style.blend !== blendMode) {\n        el.setStyle('blend', blendMode);\n      }\n    }\n\n    if (el.eachPendingDisplayable) {\n      el.eachPendingDisplayable(function (displayable) {\n        displayable.setStyle('blend', blendMode);\n      });\n    }\n  });\n}\n/**\n * @param {module:echarts/model/Series|module:echarts/model/Component} model\n * @param {module:echarts/view/Component|module:echarts/view/Chart} view\n */\n\n\nfunction updateZ(model, view) {\n  var z = model.get('z');\n  var zlevel = model.get('zlevel'); // Set z and zlevel\n\n  view.group.traverse(function (el) {\n    if (el.type !== 'group') {\n      z != null && (el.z = z);\n      zlevel != null && (el.zlevel = zlevel);\n    }\n  });\n}\n\nfunction createExtensionAPI(ecInstance) {\n  var coordSysMgr = ecInstance._coordSysMgr;\n  return zrUtil.extend(new ExtensionAPI(ecInstance), {\n    // Inject methods\n    getCoordinateSystems: zrUtil.bind(coordSysMgr.getCoordinateSystems, coordSysMgr),\n    getComponentByElement: function (el) {\n      while (el) {\n        var modelInfo = el.__ecComponentInfo;\n\n        if (modelInfo != null) {\n          return ecInstance._model.getComponent(modelInfo.mainType, modelInfo.index);\n        }\n\n        el = el.parent;\n      }\n    }\n  });\n}\n/**\n * @class\n * Usage of query:\n * `chart.on('click', query, handler);`\n * The `query` can be:\n * + The component type query string, only `mainType` or `mainType.subType`,\n *   like: 'xAxis', 'series', 'xAxis.category' or 'series.line'.\n * + The component query object, like:\n *   `{seriesIndex: 2}`, `{seriesName: 'xx'}`, `{seriesId: 'some'}`,\n *   `{xAxisIndex: 2}`, `{xAxisName: 'xx'}`, `{xAxisId: 'some'}`.\n * + The data query object, like:\n *   `{dataIndex: 123}`, `{dataType: 'link'}`, `{name: 'some'}`.\n * + The other query object (cmponent customized query), like:\n *   `{element: 'some'}` (only available in custom series).\n *\n * Caveat: If a prop in the `query` object is `null/undefined`, it is the\n * same as there is no such prop in the `query` object.\n */\n\n\nfunction EventProcessor() {\n  // These info required: targetEl, packedEvent, model, view\n  this.eventInfo;\n}\n\nEventProcessor.prototype = {\n  constructor: EventProcessor,\n  normalizeQuery: function (query) {\n    var cptQuery = {};\n    var dataQuery = {};\n    var otherQuery = {}; // `query` is `mainType` or `mainType.subType` of component.\n\n    if (zrUtil.isString(query)) {\n      var condCptType = parseClassType(query); // `.main` and `.sub` may be ''.\n\n      cptQuery.mainType = condCptType.main || null;\n      cptQuery.subType = condCptType.sub || null;\n    } // `query` is an object, convert to {mainType, index, name, id}.\n    else {\n        // `xxxIndex`, `xxxName`, `xxxId`, `name`, `dataIndex`, `dataType` is reserved,\n        // can not be used in `compomentModel.filterForExposedEvent`.\n        var suffixes = ['Index', 'Name', 'Id'];\n        var dataKeys = {\n          name: 1,\n          dataIndex: 1,\n          dataType: 1\n        };\n        zrUtil.each(query, function (val, key) {\n          var reserved = false;\n\n          for (var i = 0; i < suffixes.length; i++) {\n            var propSuffix = suffixes[i];\n            var suffixPos = key.lastIndexOf(propSuffix);\n\n            if (suffixPos > 0 && suffixPos === key.length - propSuffix.length) {\n              var mainType = key.slice(0, suffixPos); // Consider `dataIndex`.\n\n              if (mainType !== 'data') {\n                cptQuery.mainType = mainType;\n                cptQuery[propSuffix.toLowerCase()] = val;\n                reserved = true;\n              }\n            }\n          }\n\n          if (dataKeys.hasOwnProperty(key)) {\n            dataQuery[key] = val;\n            reserved = true;\n          }\n\n          if (!reserved) {\n            otherQuery[key] = val;\n          }\n        });\n      }\n\n    return {\n      cptQuery: cptQuery,\n      dataQuery: dataQuery,\n      otherQuery: otherQuery\n    };\n  },\n  filter: function (eventType, query, args) {\n    // They should be assigned before each trigger call.\n    var eventInfo = this.eventInfo;\n\n    if (!eventInfo) {\n      return true;\n    }\n\n    var targetEl = eventInfo.targetEl;\n    var packedEvent = eventInfo.packedEvent;\n    var model = eventInfo.model;\n    var view = eventInfo.view; // For event like 'globalout'.\n\n    if (!model || !view) {\n      return true;\n    }\n\n    var cptQuery = query.cptQuery;\n    var dataQuery = query.dataQuery;\n    return check(cptQuery, model, 'mainType') && check(cptQuery, model, 'subType') && check(cptQuery, model, 'index', 'componentIndex') && check(cptQuery, model, 'name') && check(cptQuery, model, 'id') && check(dataQuery, packedEvent, 'name') && check(dataQuery, packedEvent, 'dataIndex') && check(dataQuery, packedEvent, 'dataType') && (!view.filterForExposedEvent || view.filterForExposedEvent(eventType, query.otherQuery, targetEl, packedEvent));\n\n    function check(query, host, prop, propOnHost) {\n      return query[prop] == null || host[propOnHost || prop] === query[prop];\n    }\n  },\n  afterTrigger: function () {\n    // Make sure the eventInfo wont be used in next trigger.\n    this.eventInfo = null;\n  }\n};\n/**\n * @type {Object} key: actionType.\n * @inner\n */\n\nvar actions = {};\n/**\n * Map eventType to actionType\n * @type {Object}\n */\n\nvar eventActionMap = {};\n/**\n * Data processor functions of each stage\n * @type {Array.<Object.<string, Function>>}\n * @inner\n */\n\nvar dataProcessorFuncs = [];\n/**\n * @type {Array.<Function>}\n * @inner\n */\n\nvar optionPreprocessorFuncs = [];\n/**\n * @type {Array.<Function>}\n * @inner\n */\n\nvar postUpdateFuncs = [];\n/**\n * Visual encoding functions of each stage\n * @type {Array.<Object.<string, Function>>}\n */\n\nvar visualFuncs = [];\n/**\n * Theme storage\n * @type {Object.<key, Object>}\n */\n\nvar themeStorage = {};\n/**\n * Loading effects\n */\n\nvar loadingEffects = {};\nvar instances = {};\nvar connectedGroups = {};\nvar idBase = new Date() - 0;\nvar groupIdBase = new Date() - 0;\nvar DOM_ATTRIBUTE_KEY = '_echarts_instance_';\n\nfunction enableConnect(chart) {\n  var STATUS_PENDING = 0;\n  var STATUS_UPDATING = 1;\n  var STATUS_UPDATED = 2;\n  var STATUS_KEY = '__connectUpdateStatus';\n\n  function updateConnectedChartsStatus(charts, status) {\n    for (var i = 0; i < charts.length; i++) {\n      var otherChart = charts[i];\n      otherChart[STATUS_KEY] = status;\n    }\n  }\n\n  each(eventActionMap, function (actionType, eventType) {\n    chart._messageCenter.on(eventType, function (event) {\n      if (connectedGroups[chart.group] && chart[STATUS_KEY] !== STATUS_PENDING) {\n        if (event && event.escapeConnect) {\n          return;\n        }\n\n        var action = chart.makeActionFromEvent(event);\n        var otherCharts = [];\n        each(instances, function (otherChart) {\n          if (otherChart !== chart && otherChart.group === chart.group) {\n            otherCharts.push(otherChart);\n          }\n        });\n        updateConnectedChartsStatus(otherCharts, STATUS_PENDING);\n        each(otherCharts, function (otherChart) {\n          if (otherChart[STATUS_KEY] !== STATUS_UPDATING) {\n            otherChart.dispatchAction(action);\n          }\n        });\n        updateConnectedChartsStatus(otherCharts, STATUS_UPDATED);\n      }\n    });\n  });\n}\n/**\n * @param {HTMLElement} dom\n * @param {Object} [theme]\n * @param {Object} opts\n * @param {number} [opts.devicePixelRatio] Use window.devicePixelRatio by default\n * @param {string} [opts.renderer] Can choose 'canvas' or 'svg' to render the chart.\n * @param {number} [opts.width] Use clientWidth of the input `dom` by default.\n *                              Can be 'auto' (the same as null/undefined)\n * @param {number} [opts.height] Use clientHeight of the input `dom` by default.\n *                               Can be 'auto' (the same as null/undefined)\n */\n\n\nfunction init(dom, theme, opts) {\n  var existInstance = getInstanceByDom(dom);\n\n  if (existInstance) {\n    return existInstance;\n  }\n\n  var chart = new ECharts(dom, theme, opts);\n  chart.id = 'ec_' + idBase++;\n  instances[chart.id] = chart;\n  modelUtil.setAttribute(dom, DOM_ATTRIBUTE_KEY, chart.id);\n  enableConnect(chart);\n  return chart;\n}\n/**\n * @return {string|Array.<module:echarts~ECharts>} groupId\n */\n\n\nfunction connect(groupId) {\n  // Is array of charts\n  if (zrUtil.isArray(groupId)) {\n    var charts = groupId;\n    groupId = null; // If any chart has group\n\n    each(charts, function (chart) {\n      if (chart.group != null) {\n        groupId = chart.group;\n      }\n    });\n    groupId = groupId || 'g_' + groupIdBase++;\n    each(charts, function (chart) {\n      chart.group = groupId;\n    });\n  }\n\n  connectedGroups[groupId] = true;\n  return groupId;\n}\n/**\n * @DEPRECATED\n * @return {string} groupId\n */\n\n\nfunction disConnect(groupId) {\n  connectedGroups[groupId] = false;\n}\n/**\n * @return {string} groupId\n */\n\n\nvar disconnect = disConnect;\n/**\n * Dispose a chart instance\n * @param  {module:echarts~ECharts|HTMLDomElement|string} chart\n */\n\nfunction dispose(chart) {\n  if (typeof chart === 'string') {\n    chart = instances[chart];\n  } else if (!(chart instanceof ECharts)) {\n    // Try to treat as dom\n    chart = getInstanceByDom(chart);\n  }\n\n  if (chart instanceof ECharts && !chart.isDisposed()) {\n    chart.dispose();\n  }\n}\n/**\n * @param  {HTMLElement} dom\n * @return {echarts~ECharts}\n */\n\n\nfunction getInstanceByDom(dom) {\n  return instances[modelUtil.getAttribute(dom, DOM_ATTRIBUTE_KEY)];\n}\n/**\n * @param {string} key\n * @return {echarts~ECharts}\n */\n\n\nfunction getInstanceById(key) {\n  return instances[key];\n}\n/**\n * Register theme\n */\n\n\nfunction registerTheme(name, theme) {\n  themeStorage[name] = theme;\n}\n/**\n * Register option preprocessor\n * @param {Function} preprocessorFunc\n */\n\n\nfunction registerPreprocessor(preprocessorFunc) {\n  optionPreprocessorFuncs.push(preprocessorFunc);\n}\n/**\n * @param {number} [priority=1000]\n * @param {Object|Function} processor\n */\n\n\nfunction registerProcessor(priority, processor) {\n  normalizeRegister(dataProcessorFuncs, priority, processor, PRIORITY_PROCESSOR_FILTER);\n}\n/**\n * Register postUpdater\n * @param {Function} postUpdateFunc\n */\n\n\nfunction registerPostUpdate(postUpdateFunc) {\n  postUpdateFuncs.push(postUpdateFunc);\n}\n/**\n * Usage:\n * registerAction('someAction', 'someEvent', function () { ... });\n * registerAction('someAction', function () { ... });\n * registerAction(\n *     {type: 'someAction', event: 'someEvent', update: 'updateView'},\n *     function () { ... }\n * );\n *\n * @param {(string|Object)} actionInfo\n * @param {string} actionInfo.type\n * @param {string} [actionInfo.event]\n * @param {string} [actionInfo.update]\n * @param {string} [eventName]\n * @param {Function} action\n */\n\n\nfunction registerAction(actionInfo, eventName, action) {\n  if (typeof eventName === 'function') {\n    action = eventName;\n    eventName = '';\n  }\n\n  var actionType = isObject(actionInfo) ? actionInfo.type : [actionInfo, actionInfo = {\n    event: eventName\n  }][0]; // Event name is all lowercase\n\n  actionInfo.event = (actionInfo.event || actionType).toLowerCase();\n  eventName = actionInfo.event; // Validate action type and event name.\n\n  assert(ACTION_REG.test(actionType) && ACTION_REG.test(eventName));\n\n  if (!actions[actionType]) {\n    actions[actionType] = {\n      action: action,\n      actionInfo: actionInfo\n    };\n  }\n\n  eventActionMap[eventName] = actionType;\n}\n/**\n * @param {string} type\n * @param {*} CoordinateSystem\n */\n\n\nfunction registerCoordinateSystem(type, CoordinateSystem) {\n  CoordinateSystemManager.register(type, CoordinateSystem);\n}\n/**\n * Get dimensions of specified coordinate system.\n * @param {string} type\n * @return {Array.<string|Object>}\n */\n\n\nfunction getCoordinateSystemDimensions(type) {\n  var coordSysCreator = CoordinateSystemManager.get(type);\n\n  if (coordSysCreator) {\n    return coordSysCreator.getDimensionsInfo ? coordSysCreator.getDimensionsInfo() : coordSysCreator.dimensions.slice();\n  }\n}\n/**\n * Layout is a special stage of visual encoding\n * Most visual encoding like color are common for different chart\n * But each chart has it's own layout algorithm\n *\n * @param {number} [priority=1000]\n * @param {Function} layoutTask\n */\n\n\nfunction registerLayout(priority, layoutTask) {\n  normalizeRegister(visualFuncs, priority, layoutTask, PRIORITY_VISUAL_LAYOUT, 'layout');\n}\n/**\n * @param {number} [priority=3000]\n * @param {module:echarts/stream/Task} visualTask\n */\n\n\nfunction registerVisual(priority, visualTask) {\n  normalizeRegister(visualFuncs, priority, visualTask, PRIORITY_VISUAL_CHART, 'visual');\n}\n/**\n * @param {Object|Function} fn: {seriesType, createOnAllSeries, performRawSeries, reset}\n */\n\n\nfunction normalizeRegister(targetList, priority, fn, defaultPriority, visualType) {\n  if (isFunction(priority) || isObject(priority)) {\n    fn = priority;\n    priority = defaultPriority;\n  }\n\n  var stageHandler = Scheduler.wrapStageHandler(fn, visualType);\n  stageHandler.__prio = priority;\n  stageHandler.__raw = fn;\n  targetList.push(stageHandler);\n  return stageHandler;\n}\n/**\n * @param {string} name\n */\n\n\nfunction registerLoading(name, loadingFx) {\n  loadingEffects[name] = loadingFx;\n}\n/**\n * @param {Object} opts\n * @param {string} [superClass]\n */\n\n\nfunction extendComponentModel(opts\n/*, superClass*/\n) {\n  // var Clazz = ComponentModel;\n  // if (superClass) {\n  //     var classType = parseClassType(superClass);\n  //     Clazz = ComponentModel.getClass(classType.main, classType.sub, true);\n  // }\n  return ComponentModel.extend(opts);\n}\n/**\n * @param {Object} opts\n * @param {string} [superClass]\n */\n\n\nfunction extendComponentView(opts\n/*, superClass*/\n) {\n  // var Clazz = ComponentView;\n  // if (superClass) {\n  //     var classType = parseClassType(superClass);\n  //     Clazz = ComponentView.getClass(classType.main, classType.sub, true);\n  // }\n  return ComponentView.extend(opts);\n}\n/**\n * @param {Object} opts\n * @param {string} [superClass]\n */\n\n\nfunction extendSeriesModel(opts\n/*, superClass*/\n) {\n  // var Clazz = SeriesModel;\n  // if (superClass) {\n  //     superClass = 'series.' + superClass.replace('series.', '');\n  //     var classType = parseClassType(superClass);\n  //     Clazz = ComponentModel.getClass(classType.main, classType.sub, true);\n  // }\n  return SeriesModel.extend(opts);\n}\n/**\n * @param {Object} opts\n * @param {string} [superClass]\n */\n\n\nfunction extendChartView(opts\n/*, superClass*/\n) {\n  // var Clazz = ChartView;\n  // if (superClass) {\n  //     superClass = superClass.replace('series.', '');\n  //     var classType = parseClassType(superClass);\n  //     Clazz = ChartView.getClass(classType.main, true);\n  // }\n  return ChartView.extend(opts);\n}\n/**\n * ZRender need a canvas context to do measureText.\n * But in node environment canvas may be created by node-canvas.\n * So we need to specify how to create a canvas instead of using document.createElement('canvas')\n *\n * Be careful of using it in the browser.\n *\n * @param {Function} creator\n * @example\n *     var Canvas = require('canvas');\n *     var echarts = require('echarts');\n *     echarts.setCanvasCreator(function () {\n *         // Small size is enough.\n *         return new Canvas(32, 32);\n *     });\n */\n\n\nfunction setCanvasCreator(creator) {\n  zrUtil.$override('createCanvas', creator);\n}\n/**\n * @param {string} mapName\n * @param {Array.<Object>|Object|string} geoJson\n * @param {Object} [specialAreas]\n *\n * @example GeoJSON\n *     $.get('USA.json', function (geoJson) {\n *         echarts.registerMap('USA', geoJson);\n *         // Or\n *         echarts.registerMap('USA', {\n *             geoJson: geoJson,\n *             specialAreas: {}\n *         })\n *     });\n *\n *     $.get('airport.svg', function (svg) {\n *         echarts.registerMap('airport', {\n *             svg: svg\n *         }\n *     });\n *\n *     echarts.registerMap('eu', [\n *         {svg: eu-topographic.svg},\n *         {geoJSON: eu.json}\n *     ])\n */\n\n\nfunction registerMap(mapName, geoJson, specialAreas) {\n  mapDataStorage.registerMap(mapName, geoJson, specialAreas);\n}\n/**\n * @param {string} mapName\n * @return {Object}\n */\n\n\nfunction getMap(mapName) {\n  // For backward compatibility, only return the first one.\n  var records = mapDataStorage.retrieveMap(mapName);\n  return records && records[0] && {\n    geoJson: records[0].geoJSON,\n    specialAreas: records[0].specialAreas\n  };\n}\n\nregisterVisual(PRIORITY_VISUAL_GLOBAL, seriesColor);\nregisterPreprocessor(backwardCompat);\nregisterProcessor(PRIORITY_PROCESSOR_DATASTACK, dataStack);\nregisterLoading('default', loadingDefault); // Default actions\n\nregisterAction({\n  type: 'highlight',\n  event: 'highlight',\n  update: 'highlight'\n}, zrUtil.noop);\nregisterAction({\n  type: 'downplay',\n  event: 'downplay',\n  update: 'downplay'\n}, zrUtil.noop); // Default theme\n\nregisterTheme('light', lightTheme);\nregisterTheme('dark', darkTheme); // For backward compatibility, where the namespace `dataTool` will\n// be mounted on `echarts` is the extension `dataTool` is imported.\n\nvar dataTool = {};\nexports.version = version;\nexports.dependencies = dependencies;\nexports.PRIORITY = PRIORITY;\nexports.init = init;\nexports.connect = connect;\nexports.disConnect = disConnect;\nexports.disconnect = disconnect;\nexports.dispose = dispose;\nexports.getInstanceByDom = getInstanceByDom;\nexports.getInstanceById = getInstanceById;\nexports.registerTheme = registerTheme;\nexports.registerPreprocessor = registerPreprocessor;\nexports.registerProcessor = registerProcessor;\nexports.registerPostUpdate = registerPostUpdate;\nexports.registerAction = registerAction;\nexports.registerCoordinateSystem = registerCoordinateSystem;\nexports.getCoordinateSystemDimensions = getCoordinateSystemDimensions;\nexports.registerLayout = registerLayout;\nexports.registerVisual = registerVisual;\nexports.registerLoading = registerLoading;\nexports.extendComponentModel = extendComponentModel;\nexports.extendComponentView = extendComponentView;\nexports.extendSeriesModel = extendSeriesModel;\nexports.extendChartView = extendChartView;\nexports.setCanvasCreator = setCanvasCreator;\nexports.registerMap = registerMap;\nexports.getMap = getMap;\nexports.dataTool = dataTool;\nvar ___ec_export = require(\"./export\");\n(function () {\n    for (var key in ___ec_export) {\n        if (___ec_export.hasOwnProperty(key)) {\n            exports[key] = ___ec_export[key];\n        }\n    }\n})();","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar env = require(\"zrender/lib/core/env\");\n\nvar TooltipContent = require(\"./TooltipContent\");\n\nvar TooltipRichContent = require(\"./TooltipRichContent\");\n\nvar formatUtil = require(\"../../util/format\");\n\nvar numberUtil = require(\"../../util/number\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar findPointFromSeries = require(\"../axisPointer/findPointFromSeries\");\n\nvar layoutUtil = require(\"../../util/layout\");\n\nvar Model = require(\"../../model/Model\");\n\nvar globalListener = require(\"../axisPointer/globalListener\");\n\nvar axisHelper = require(\"../../coord/axisHelper\");\n\nvar axisPointerViewHelper = require(\"../axisPointer/viewHelper\");\n\nvar _model = require(\"../../util/model\");\n\nvar getTooltipRenderMode = _model.getTooltipRenderMode;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar bind = zrUtil.bind;\nvar each = zrUtil.each;\nvar parsePercent = numberUtil.parsePercent;\nvar proxyRect = new graphic.Rect({\n  shape: {\n    x: -1,\n    y: -1,\n    width: 2,\n    height: 2\n  }\n});\n\nvar _default = echarts.extendComponentView({\n  type: 'tooltip',\n  init: function (ecModel, api) {\n    if (env.node) {\n      return;\n    }\n\n    var tooltipModel = ecModel.getComponent('tooltip');\n    var renderMode = tooltipModel.get('renderMode');\n    this._renderMode = getTooltipRenderMode(renderMode);\n    var tooltipContent;\n\n    if (this._renderMode === 'html') {\n      tooltipContent = new TooltipContent(api.getDom(), api, {\n        appendToBody: tooltipModel.get('appendToBody', true)\n      });\n      this._newLine = '<br/>';\n    } else {\n      tooltipContent = new TooltipRichContent(api);\n      this._newLine = '\\n';\n    }\n\n    this._tooltipContent = tooltipContent;\n  },\n  render: function (tooltipModel, ecModel, api) {\n    if (env.node) {\n      return;\n    } // Reset\n\n\n    this.group.removeAll();\n    /**\n     * @private\n     * @type {module:echarts/component/tooltip/TooltipModel}\n     */\n\n    this._tooltipModel = tooltipModel;\n    /**\n     * @private\n     * @type {module:echarts/model/Global}\n     */\n\n    this._ecModel = ecModel;\n    /**\n     * @private\n     * @type {module:echarts/ExtensionAPI}\n     */\n\n    this._api = api;\n    /**\n     * Should be cleaned when render.\n     * @private\n     * @type {Array.<Array.<Object>>}\n     */\n\n    this._lastDataByCoordSys = null;\n    /**\n     * @private\n     * @type {boolean}\n     */\n\n    this._alwaysShowContent = tooltipModel.get('alwaysShowContent');\n    var tooltipContent = this._tooltipContent;\n    tooltipContent.update(tooltipModel);\n    tooltipContent.setEnterable(tooltipModel.get('enterable'));\n\n    this._initGlobalListener();\n\n    this._keepShow();\n  },\n  _initGlobalListener: function () {\n    var tooltipModel = this._tooltipModel;\n    var triggerOn = tooltipModel.get('triggerOn');\n    globalListener.register('itemTooltip', this._api, bind(function (currTrigger, e, dispatchAction) {\n      // If 'none', it is not controlled by mouse totally.\n      if (triggerOn !== 'none') {\n        if (triggerOn.indexOf(currTrigger) >= 0) {\n          this._tryShow(e, dispatchAction);\n        } else if (currTrigger === 'leave') {\n          this._hide(dispatchAction);\n        }\n      }\n    }, this));\n  },\n  _keepShow: function () {\n    var tooltipModel = this._tooltipModel;\n    var ecModel = this._ecModel;\n    var api = this._api; // Try to keep the tooltip show when refreshing\n\n    if (this._lastX != null && this._lastY != null // When user is willing to control tooltip totally using API,\n    // self.manuallyShowTip({x, y}) might cause tooltip hide,\n    // which is not expected.\n    && tooltipModel.get('triggerOn') !== 'none') {\n      var self = this;\n      clearTimeout(this._refreshUpdateTimeout);\n      this._refreshUpdateTimeout = setTimeout(function () {\n        // Show tip next tick after other charts are rendered\n        // In case highlight action has wrong result\n        // FIXME\n        !api.isDisposed() && self.manuallyShowTip(tooltipModel, ecModel, api, {\n          x: self._lastX,\n          y: self._lastY\n        });\n      });\n    }\n  },\n\n  /**\n   * Show tip manually by\n   * dispatchAction({\n   *     type: 'showTip',\n   *     x: 10,\n   *     y: 10\n   * });\n   * Or\n   * dispatchAction({\n   *      type: 'showTip',\n   *      seriesIndex: 0,\n   *      dataIndex or dataIndexInside or name\n   * });\n   *\n   *  TODO Batch\n   */\n  manuallyShowTip: function (tooltipModel, ecModel, api, payload) {\n    if (payload.from === this.uid || env.node) {\n      return;\n    }\n\n    var dispatchAction = makeDispatchAction(payload, api); // Reset ticket\n\n    this._ticket = ''; // When triggered from axisPointer.\n\n    var dataByCoordSys = payload.dataByCoordSys;\n\n    if (payload.tooltip && payload.x != null && payload.y != null) {\n      var el = proxyRect;\n      el.position = [payload.x, payload.y];\n      el.update();\n      el.tooltip = payload.tooltip; // Manually show tooltip while view is not using zrender elements.\n\n      this._tryShow({\n        offsetX: payload.x,\n        offsetY: payload.y,\n        target: el\n      }, dispatchAction);\n    } else if (dataByCoordSys) {\n      this._tryShow({\n        offsetX: payload.x,\n        offsetY: payload.y,\n        position: payload.position,\n        dataByCoordSys: payload.dataByCoordSys,\n        tooltipOption: payload.tooltipOption\n      }, dispatchAction);\n    } else if (payload.seriesIndex != null) {\n      if (this._manuallyAxisShowTip(tooltipModel, ecModel, api, payload)) {\n        return;\n      }\n\n      var pointInfo = findPointFromSeries(payload, ecModel);\n      var cx = pointInfo.point[0];\n      var cy = pointInfo.point[1];\n\n      if (cx != null && cy != null) {\n        this._tryShow({\n          offsetX: cx,\n          offsetY: cy,\n          position: payload.position,\n          target: pointInfo.el\n        }, dispatchAction);\n      }\n    } else if (payload.x != null && payload.y != null) {\n      // FIXME\n      // should wrap dispatchAction like `axisPointer/globalListener` ?\n      api.dispatchAction({\n        type: 'updateAxisPointer',\n        x: payload.x,\n        y: payload.y\n      });\n\n      this._tryShow({\n        offsetX: payload.x,\n        offsetY: payload.y,\n        position: payload.position,\n        target: api.getZr().findHover(payload.x, payload.y).target\n      }, dispatchAction);\n    }\n  },\n  manuallyHideTip: function (tooltipModel, ecModel, api, payload) {\n    var tooltipContent = this._tooltipContent;\n\n    if (!this._alwaysShowContent && this._tooltipModel) {\n      tooltipContent.hideLater(this._tooltipModel.get('hideDelay'));\n    }\n\n    this._lastX = this._lastY = null;\n\n    if (payload.from !== this.uid) {\n      this._hide(makeDispatchAction(payload, api));\n    }\n  },\n  // Be compatible with previous design, that is, when tooltip.type is 'axis' and\n  // dispatchAction 'showTip' with seriesIndex and dataIndex will trigger axis pointer\n  // and tooltip.\n  _manuallyAxisShowTip: function (tooltipModel, ecModel, api, payload) {\n    var seriesIndex = payload.seriesIndex;\n    var dataIndex = payload.dataIndex;\n    var coordSysAxesInfo = ecModel.getComponent('axisPointer').coordSysAxesInfo;\n\n    if (seriesIndex == null || dataIndex == null || coordSysAxesInfo == null) {\n      return;\n    }\n\n    var seriesModel = ecModel.getSeriesByIndex(seriesIndex);\n\n    if (!seriesModel) {\n      return;\n    }\n\n    var data = seriesModel.getData();\n    var tooltipModel = buildTooltipModel([data.getItemModel(dataIndex), seriesModel, (seriesModel.coordinateSystem || {}).model, tooltipModel]);\n\n    if (tooltipModel.get('trigger') !== 'axis') {\n      return;\n    }\n\n    api.dispatchAction({\n      type: 'updateAxisPointer',\n      seriesIndex: seriesIndex,\n      dataIndex: dataIndex,\n      position: payload.position\n    });\n    return true;\n  },\n  _tryShow: function (e, dispatchAction) {\n    var el = e.target;\n    var tooltipModel = this._tooltipModel;\n\n    if (!tooltipModel) {\n      return;\n    } // Save mouse x, mouse y. So we can try to keep showing the tip if chart is refreshed\n\n\n    this._lastX = e.offsetX;\n    this._lastY = e.offsetY;\n    var dataByCoordSys = e.dataByCoordSys;\n\n    if (dataByCoordSys && dataByCoordSys.length) {\n      this._showAxisTooltip(dataByCoordSys, e);\n    } // Always show item tooltip if mouse is on the element with dataIndex\n    else if (el && el.dataIndex != null) {\n        this._lastDataByCoordSys = null;\n\n        this._showSeriesItemTooltip(e, el, dispatchAction);\n      } // Tooltip provided directly. Like legend.\n      else if (el && el.tooltip) {\n          this._lastDataByCoordSys = null;\n\n          this._showComponentItemTooltip(e, el, dispatchAction);\n        } else {\n          this._lastDataByCoordSys = null;\n\n          this._hide(dispatchAction);\n        }\n  },\n  _showOrMove: function (tooltipModel, cb) {\n    // showDelay is used in this case: tooltip.enterable is set\n    // as true. User intent to move mouse into tooltip and click\n    // something. `showDelay` makes it easier to enter the content\n    // but tooltip do not move immediately.\n    var delay = tooltipModel.get('showDelay');\n    cb = zrUtil.bind(cb, this);\n    clearTimeout(this._showTimout);\n    delay > 0 ? this._showTimout = setTimeout(cb, delay) : cb();\n  },\n  _showAxisTooltip: function (dataByCoordSys, e) {\n    var ecModel = this._ecModel;\n    var globalTooltipModel = this._tooltipModel;\n    var point = [e.offsetX, e.offsetY];\n    var singleDefaultHTML = [];\n    var singleParamsList = [];\n    var singleTooltipModel = buildTooltipModel([e.tooltipOption, globalTooltipModel]);\n    var renderMode = this._renderMode;\n    var newLine = this._newLine;\n    var markers = {};\n    each(dataByCoordSys, function (itemCoordSys) {\n      // var coordParamList = [];\n      // var coordDefaultHTML = [];\n      // var coordTooltipModel = buildTooltipModel([\n      //     e.tooltipOption,\n      //     itemCoordSys.tooltipOption,\n      //     ecModel.getComponent(itemCoordSys.coordSysMainType, itemCoordSys.coordSysIndex),\n      //     globalTooltipModel\n      // ]);\n      // var displayMode = coordTooltipModel.get('displayMode');\n      // var paramsList = displayMode === 'single' ? singleParamsList : [];\n      each(itemCoordSys.dataByAxis, function (item) {\n        var axisModel = ecModel.getComponent(item.axisDim + 'Axis', item.axisIndex);\n        var axisValue = item.value;\n        var seriesDefaultHTML = [];\n\n        if (!axisModel || axisValue == null) {\n          return;\n        }\n\n        var valueLabel = axisPointerViewHelper.getValueLabel(axisValue, axisModel.axis, ecModel, item.seriesDataIndices, item.valueLabelOpt);\n        zrUtil.each(item.seriesDataIndices, function (idxItem) {\n          var series = ecModel.getSeriesByIndex(idxItem.seriesIndex);\n          var dataIndex = idxItem.dataIndexInside;\n          var dataParams = series && series.getDataParams(dataIndex);\n          dataParams.axisDim = item.axisDim;\n          dataParams.axisIndex = item.axisIndex;\n          dataParams.axisType = item.axisType;\n          dataParams.axisId = item.axisId;\n          dataParams.axisValue = axisHelper.getAxisRawValue(axisModel.axis, axisValue);\n          dataParams.axisValueLabel = valueLabel;\n\n          if (dataParams) {\n            singleParamsList.push(dataParams);\n            var seriesTooltip = series.formatTooltip(dataIndex, true, null, renderMode);\n            var html;\n\n            if (zrUtil.isObject(seriesTooltip)) {\n              html = seriesTooltip.html;\n              var newMarkers = seriesTooltip.markers;\n              zrUtil.merge(markers, newMarkers);\n            } else {\n              html = seriesTooltip;\n            }\n\n            seriesDefaultHTML.push(html);\n          }\n        }); // Default tooltip content\n        // FIXME\n        // (1) should be the first data which has name?\n        // (2) themeRiver, firstDataIndex is array, and first line is unnecessary.\n\n        var firstLine = valueLabel;\n\n        if (renderMode !== 'html') {\n          singleDefaultHTML.push(seriesDefaultHTML.join(newLine));\n        } else {\n          singleDefaultHTML.push((firstLine ? formatUtil.encodeHTML(firstLine) + newLine : '') + seriesDefaultHTML.join(newLine));\n        }\n      });\n    }, this); // In most case, the second axis is shown upper than the first one.\n\n    singleDefaultHTML.reverse();\n    singleDefaultHTML = singleDefaultHTML.join(this._newLine + this._newLine);\n    var positionExpr = e.position;\n\n    this._showOrMove(singleTooltipModel, function () {\n      if (this._updateContentNotChangedOnAxis(dataByCoordSys)) {\n        this._updatePosition(singleTooltipModel, positionExpr, point[0], point[1], this._tooltipContent, singleParamsList);\n      } else {\n        this._showTooltipContent(singleTooltipModel, singleDefaultHTML, singleParamsList, Math.random(), point[0], point[1], positionExpr, undefined, markers);\n      }\n    }); // Do not trigger events here, because this branch only be entered\n    // from dispatchAction.\n\n  },\n  _showSeriesItemTooltip: function (e, el, dispatchAction) {\n    var ecModel = this._ecModel; // Use dataModel in element if possible\n    // Used when mouseover on a element like markPoint or edge\n    // In which case, the data is not main data in series.\n\n    var seriesIndex = el.seriesIndex;\n    var seriesModel = ecModel.getSeriesByIndex(seriesIndex); // For example, graph link.\n\n    var dataModel = el.dataModel || seriesModel;\n    var dataIndex = el.dataIndex;\n    var dataType = el.dataType;\n    var data = dataModel.getData(dataType);\n    var tooltipModel = buildTooltipModel([data.getItemModel(dataIndex), dataModel, seriesModel && (seriesModel.coordinateSystem || {}).model, this._tooltipModel]);\n    var tooltipTrigger = tooltipModel.get('trigger');\n\n    if (tooltipTrigger != null && tooltipTrigger !== 'item') {\n      return;\n    }\n\n    var params = dataModel.getDataParams(dataIndex, dataType);\n    var seriesTooltip = dataModel.formatTooltip(dataIndex, false, dataType, this._renderMode);\n    var defaultHtml;\n    var markers;\n\n    if (zrUtil.isObject(seriesTooltip)) {\n      defaultHtml = seriesTooltip.html;\n      markers = seriesTooltip.markers;\n    } else {\n      defaultHtml = seriesTooltip;\n      markers = null;\n    }\n\n    var asyncTicket = 'item_' + dataModel.name + '_' + dataIndex;\n\n    this._showOrMove(tooltipModel, function () {\n      this._showTooltipContent(tooltipModel, defaultHtml, params, asyncTicket, e.offsetX, e.offsetY, e.position, e.target, markers);\n    }); // FIXME\n    // duplicated showtip if manuallyShowTip is called from dispatchAction.\n\n\n    dispatchAction({\n      type: 'showTip',\n      dataIndexInside: dataIndex,\n      dataIndex: data.getRawIndex(dataIndex),\n      seriesIndex: seriesIndex,\n      from: this.uid\n    });\n  },\n  _showComponentItemTooltip: function (e, el, dispatchAction) {\n    var tooltipOpt = el.tooltip;\n\n    if (typeof tooltipOpt === 'string') {\n      var content = tooltipOpt;\n      tooltipOpt = {\n        content: content,\n        // Fixed formatter\n        formatter: content\n      };\n    }\n\n    var subTooltipModel = new Model(tooltipOpt, this._tooltipModel, this._ecModel);\n    var defaultHtml = subTooltipModel.get('content');\n    var asyncTicket = Math.random(); // Do not check whether `trigger` is 'none' here, because `trigger`\n    // only works on coordinate system. In fact, we have not found case\n    // that requires setting `trigger` nothing on component yet.\n\n    this._showOrMove(subTooltipModel, function () {\n      this._showTooltipContent(subTooltipModel, defaultHtml, subTooltipModel.get('formatterParams') || {}, asyncTicket, e.offsetX, e.offsetY, e.position, el);\n    }); // If not dispatch showTip, tip may be hide triggered by axis.\n\n\n    dispatchAction({\n      type: 'showTip',\n      from: this.uid\n    });\n  },\n  _showTooltipContent: function (tooltipModel, defaultHtml, params, asyncTicket, x, y, positionExpr, el, markers) {\n    // Reset ticket\n    this._ticket = '';\n\n    if (!tooltipModel.get('showContent') || !tooltipModel.get('show')) {\n      return;\n    }\n\n    var tooltipContent = this._tooltipContent;\n    var formatter = tooltipModel.get('formatter');\n    positionExpr = positionExpr || tooltipModel.get('position');\n    var html = defaultHtml;\n\n    if (formatter && typeof formatter === 'string') {\n      html = formatUtil.formatTpl(formatter, params, true);\n    } else if (typeof formatter === 'function') {\n      var callback = bind(function (cbTicket, html) {\n        if (cbTicket === this._ticket) {\n          tooltipContent.setContent(html, markers, tooltipModel);\n\n          this._updatePosition(tooltipModel, positionExpr, x, y, tooltipContent, params, el);\n        }\n      }, this);\n      this._ticket = asyncTicket;\n      html = formatter(params, asyncTicket, callback);\n    }\n\n    tooltipContent.setContent(html, markers, tooltipModel);\n    tooltipContent.show(tooltipModel);\n\n    this._updatePosition(tooltipModel, positionExpr, x, y, tooltipContent, params, el);\n  },\n\n  /**\n   * @param  {string|Function|Array.<number>|Object} positionExpr\n   * @param  {number} x Mouse x\n   * @param  {number} y Mouse y\n   * @param  {boolean} confine Whether confine tooltip content in view rect.\n   * @param  {Object|<Array.<Object>} params\n   * @param  {module:zrender/Element} el target element\n   * @param  {module:echarts/ExtensionAPI} api\n   * @return {Array.<number>}\n   */\n  _updatePosition: function (tooltipModel, positionExpr, x, y, content, params, el) {\n    var viewWidth = this._api.getWidth();\n\n    var viewHeight = this._api.getHeight();\n\n    positionExpr = positionExpr || tooltipModel.get('position');\n    var contentSize = content.getSize();\n    var align = tooltipModel.get('align');\n    var vAlign = tooltipModel.get('verticalAlign');\n    var rect = el && el.getBoundingRect().clone();\n    el && rect.applyTransform(el.transform);\n\n    if (typeof positionExpr === 'function') {\n      // Callback of position can be an array or a string specify the position\n      positionExpr = positionExpr([x, y], params, content.el, rect, {\n        viewSize: [viewWidth, viewHeight],\n        contentSize: contentSize.slice()\n      });\n    }\n\n    if (zrUtil.isArray(positionExpr)) {\n      x = parsePercent(positionExpr[0], viewWidth);\n      y = parsePercent(positionExpr[1], viewHeight);\n    } else if (zrUtil.isObject(positionExpr)) {\n      positionExpr.width = contentSize[0];\n      positionExpr.height = contentSize[1];\n      var layoutRect = layoutUtil.getLayoutRect(positionExpr, {\n        width: viewWidth,\n        height: viewHeight\n      });\n      x = layoutRect.x;\n      y = layoutRect.y;\n      align = null; // When positionExpr is left/top/right/bottom,\n      // align and verticalAlign will not work.\n\n      vAlign = null;\n    } // Specify tooltip position by string 'top' 'bottom' 'left' 'right' around graphic element\n    else if (typeof positionExpr === 'string' && el) {\n        var pos = calcTooltipPosition(positionExpr, rect, contentSize);\n        x = pos[0];\n        y = pos[1];\n      } else {\n        var pos = refixTooltipPosition(x, y, content, viewWidth, viewHeight, align ? null : 20, vAlign ? null : 20);\n        x = pos[0];\n        y = pos[1];\n      }\n\n    align && (x -= isCenterAlign(align) ? contentSize[0] / 2 : align === 'right' ? contentSize[0] : 0);\n    vAlign && (y -= isCenterAlign(vAlign) ? contentSize[1] / 2 : vAlign === 'bottom' ? contentSize[1] : 0);\n\n    if (tooltipModel.get('confine')) {\n      var pos = confineTooltipPosition(x, y, content, viewWidth, viewHeight);\n      x = pos[0];\n      y = pos[1];\n    }\n\n    content.moveTo(x, y);\n  },\n  // FIXME\n  // Should we remove this but leave this to user?\n  _updateContentNotChangedOnAxis: function (dataByCoordSys) {\n    var lastCoordSys = this._lastDataByCoordSys;\n    var contentNotChanged = !!lastCoordSys && lastCoordSys.length === dataByCoordSys.length;\n    contentNotChanged && each(lastCoordSys, function (lastItemCoordSys, indexCoordSys) {\n      var lastDataByAxis = lastItemCoordSys.dataByAxis || {};\n      var thisItemCoordSys = dataByCoordSys[indexCoordSys] || {};\n      var thisDataByAxis = thisItemCoordSys.dataByAxis || [];\n      contentNotChanged &= lastDataByAxis.length === thisDataByAxis.length;\n      contentNotChanged && each(lastDataByAxis, function (lastItem, indexAxis) {\n        var thisItem = thisDataByAxis[indexAxis] || {};\n        var lastIndices = lastItem.seriesDataIndices || [];\n        var newIndices = thisItem.seriesDataIndices || [];\n        contentNotChanged &= lastItem.value === thisItem.value && lastItem.axisType === thisItem.axisType && lastItem.axisId === thisItem.axisId && lastIndices.length === newIndices.length;\n        contentNotChanged && each(lastIndices, function (lastIdxItem, j) {\n          var newIdxItem = newIndices[j];\n          contentNotChanged &= lastIdxItem.seriesIndex === newIdxItem.seriesIndex && lastIdxItem.dataIndex === newIdxItem.dataIndex;\n        });\n      });\n    });\n    this._lastDataByCoordSys = dataByCoordSys;\n    return !!contentNotChanged;\n  },\n  _hide: function (dispatchAction) {\n    // Do not directly hideLater here, because this behavior may be prevented\n    // in dispatchAction when showTip is dispatched.\n    // FIXME\n    // duplicated hideTip if manuallyHideTip is called from dispatchAction.\n    this._lastDataByCoordSys = null;\n    dispatchAction({\n      type: 'hideTip',\n      from: this.uid\n    });\n  },\n  dispose: function (ecModel, api) {\n    if (env.node) {\n      return;\n    }\n\n    this._tooltipContent.dispose();\n\n    globalListener.unregister('itemTooltip', api);\n  }\n});\n/**\n * @param {Array.<Object|module:echarts/model/Model>} modelCascade\n * From top to bottom. (the last one should be globalTooltipModel);\n */\n\n\nfunction buildTooltipModel(modelCascade) {\n  var resultModel = modelCascade.pop();\n\n  while (modelCascade.length) {\n    var tooltipOpt = modelCascade.pop();\n\n    if (tooltipOpt) {\n      if (Model.isInstance(tooltipOpt)) {\n        tooltipOpt = tooltipOpt.get('tooltip', true);\n      } // In each data item tooltip can be simply write:\n      // {\n      //  value: 10,\n      //  tooltip: 'Something you need to know'\n      // }\n\n\n      if (typeof tooltipOpt === 'string') {\n        tooltipOpt = {\n          formatter: tooltipOpt\n        };\n      }\n\n      resultModel = new Model(tooltipOpt, resultModel, resultModel.ecModel);\n    }\n  }\n\n  return resultModel;\n}\n\nfunction makeDispatchAction(payload, api) {\n  return payload.dispatchAction || zrUtil.bind(api.dispatchAction, api);\n}\n\nfunction refixTooltipPosition(x, y, content, viewWidth, viewHeight, gapH, gapV) {\n  var size = content.getOuterSize();\n  var width = size.width;\n  var height = size.height;\n\n  if (gapH != null) {\n    if (x + width + gapH > viewWidth) {\n      x -= width + gapH;\n    } else {\n      x += gapH;\n    }\n  }\n\n  if (gapV != null) {\n    if (y + height + gapV > viewHeight) {\n      y -= height + gapV;\n    } else {\n      y += gapV;\n    }\n  }\n\n  return [x, y];\n}\n\nfunction confineTooltipPosition(x, y, content, viewWidth, viewHeight) {\n  var size = content.getOuterSize();\n  var width = size.width;\n  var height = size.height;\n  x = Math.min(x + width, viewWidth) - width;\n  y = Math.min(y + height, viewHeight) - height;\n  x = Math.max(x, 0);\n  y = Math.max(y, 0);\n  return [x, y];\n}\n\nfunction calcTooltipPosition(position, rect, contentSize) {\n  var domWidth = contentSize[0];\n  var domHeight = contentSize[1];\n  var gap = 5;\n  var x = 0;\n  var y = 0;\n  var rectWidth = rect.width;\n  var rectHeight = rect.height;\n\n  switch (position) {\n    case 'inside':\n      x = rect.x + rectWidth / 2 - domWidth / 2;\n      y = rect.y + rectHeight / 2 - domHeight / 2;\n      break;\n\n    case 'top':\n      x = rect.x + rectWidth / 2 - domWidth / 2;\n      y = rect.y - domHeight - gap;\n      break;\n\n    case 'bottom':\n      x = rect.x + rectWidth / 2 - domWidth / 2;\n      y = rect.y + rectHeight + gap;\n      break;\n\n    case 'left':\n      x = rect.x - domWidth - gap;\n      y = rect.y + rectHeight / 2 - domHeight / 2;\n      break;\n\n    case 'right':\n      x = rect.x + rectWidth + gap;\n      y = rect.y + rectHeight / 2 - domHeight / 2;\n  }\n\n  return [x, y];\n}\n\nfunction isCenterAlign(align) {\n  return align === 'center' || align === 'middle';\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction legendSelectActionHandler(methodName, payload, ecModel) {\n  var selectedMap = {};\n  var isToggleSelect = methodName === 'toggleSelected';\n  var isSelected; // Update all legend components\n\n  ecModel.eachComponent('legend', function (legendModel) {\n    if (isToggleSelect && isSelected != null) {\n      // Force other legend has same selected status\n      // Or the first is toggled to true and other are toggled to false\n      // In the case one legend has some item unSelected in option. And if other legend\n      // doesn't has the item, they will assume it is selected.\n      legendModel[isSelected ? 'select' : 'unSelect'](payload.name);\n    } else if (methodName === 'allSelect' || methodName === 'inverseSelect') {\n      legendModel[methodName]();\n    } else {\n      legendModel[methodName](payload.name);\n      isSelected = legendModel.isSelected(payload.name);\n    }\n\n    var legendData = legendModel.getData();\n    zrUtil.each(legendData, function (model) {\n      var name = model.get('name'); // Wrap element\n\n      if (name === '\\n' || name === '') {\n        return;\n      }\n\n      var isItemSelected = legendModel.isSelected(name);\n\n      if (selectedMap.hasOwnProperty(name)) {\n        // Unselected if any legend is unselected\n        selectedMap[name] = selectedMap[name] && isItemSelected;\n      } else {\n        selectedMap[name] = isItemSelected;\n      }\n    });\n  }); // Return the event explicitly\n\n  return methodName === 'allSelect' || methodName === 'inverseSelect' ? {\n    selected: selectedMap\n  } : {\n    name: payload.name,\n    selected: selectedMap\n  };\n}\n/**\n * @event legendToggleSelect\n * @type {Object}\n * @property {string} type 'legendToggleSelect'\n * @property {string} [from]\n * @property {string} name Series name or data item name\n */\n\n\necharts.registerAction('legendToggleSelect', 'legendselectchanged', zrUtil.curry(legendSelectActionHandler, 'toggleSelected'));\necharts.registerAction('legendAllSelect', 'legendselectall', zrUtil.curry(legendSelectActionHandler, 'allSelect'));\necharts.registerAction('legendInverseSelect', 'legendinverseselect', zrUtil.curry(legendSelectActionHandler, 'inverseSelect'));\n/**\n * @event legendSelect\n * @type {Object}\n * @property {string} type 'legendSelect'\n * @property {string} name Series name or data item name\n */\n\necharts.registerAction('legendSelect', 'legendselected', zrUtil.curry(legendSelectActionHandler, 'select'));\n/**\n * @event legendUnSelect\n * @type {Object}\n * @property {string} type 'legendUnSelect'\n * @property {string} name Series name or data item name\n */\n\necharts.registerAction('legendUnSelect', 'legendunselected', zrUtil.curry(legendSelectActionHandler, 'unSelect'));","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar AxisPointerModel = echarts.extendComponentModel({\n  type: 'axisPointer',\n  coordSysAxesInfo: null,\n  defaultOption: {\n    // 'auto' means that show when triggered by tooltip or handle.\n    show: 'auto',\n    // 'click' | 'mousemove' | 'none'\n    triggerOn: null,\n    // set default in AxisPonterView.js\n    zlevel: 0,\n    z: 50,\n    type: 'line',\n    // 'line' 'shadow' 'cross' 'none'.\n    // axispointer triggered by tootip determine snap automatically,\n    // see `modelHelper`.\n    snap: false,\n    triggerTooltip: true,\n    value: null,\n    status: null,\n    // Init value depends on whether handle is used.\n    // [group0, group1, ...]\n    // Each group can be: {\n    //      mapper: function () {},\n    //      singleTooltip: 'multiple',  // 'multiple' or 'single'\n    //      xAxisId: ...,\n    //      yAxisName: ...,\n    //      angleAxisIndex: ...\n    // }\n    // mapper: can be ignored.\n    //      input: {axisInfo, value}\n    //      output: {axisInfo, value}\n    link: [],\n    // Do not set 'auto' here, otherwise global animation: false\n    // will not effect at this axispointer.\n    animation: null,\n    animationDurationUpdate: 200,\n    lineStyle: {\n      color: '#aaa',\n      width: 1,\n      type: 'solid'\n    },\n    shadowStyle: {\n      color: 'rgba(150,150,150,0.3)'\n    },\n    label: {\n      show: true,\n      formatter: null,\n      // string | Function\n      precision: 'auto',\n      // Or a number like 0, 1, 2 ...\n      margin: 3,\n      color: '#fff',\n      padding: [5, 7, 5, 7],\n      backgroundColor: 'auto',\n      // default: axis line color\n      borderColor: null,\n      borderWidth: 0,\n      shadowBlur: 3,\n      shadowColor: '#aaa' // Considering applicability, common style should\n      // better not have shadowOffset.\n      // shadowOffsetX: 0,\n      // shadowOffsetY: 2\n\n    },\n    handle: {\n      show: false,\n\n      /* eslint-disable */\n      icon: 'M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z',\n      // jshint ignore:line\n\n      /* eslint-enable */\n      size: 45,\n      // handle margin is from symbol center to axis, which is stable when circular move.\n      margin: 50,\n      // color: '#1b8bbd'\n      // color: '#2f4554'\n      color: '#333',\n      shadowBlur: 3,\n      shadowColor: '#aaa',\n      shadowOffsetX: 0,\n      shadowOffsetY: 2,\n      // For mobile performance\n      throttle: 40\n    }\n  }\n});\nvar _default = AxisPointerModel;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar ComponentModel = require(\"../../model/Component\");\n\nvar axisModelCreator = require(\"../axisModelCreator\");\n\nvar axisModelCommonMixin = require(\"../axisModelCommonMixin\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar AxisModel = ComponentModel.extend({\n  type: 'cartesian2dAxis',\n\n  /**\n   * @type {module:echarts/coord/cartesian/Axis2D}\n   */\n  axis: null,\n\n  /**\n   * @override\n   */\n  init: function () {\n    AxisModel.superApply(this, 'init', arguments);\n    this.resetRange();\n  },\n\n  /**\n   * @override\n   */\n  mergeOption: function () {\n    AxisModel.superApply(this, 'mergeOption', arguments);\n    this.resetRange();\n  },\n\n  /**\n   * @override\n   */\n  restoreData: function () {\n    AxisModel.superApply(this, 'restoreData', arguments);\n    this.resetRange();\n  },\n\n  /**\n   * @override\n   * @return {module:echarts/model/Component}\n   */\n  getCoordSysModel: function () {\n    return this.ecModel.queryComponents({\n      mainType: 'grid',\n      index: this.option.gridIndex,\n      id: this.option.gridId\n    })[0];\n  }\n});\n\nfunction getAxisType(axisDim, option) {\n  // Default axis with data is category axis\n  return option.type || (option.data ? 'category' : 'value');\n}\n\nzrUtil.merge(AxisModel.prototype, axisModelCommonMixin);\nvar extraOption = {\n  // gridIndex: 0,\n  // gridId: '',\n  // Offset is for multiple axis on the same position\n  offset: 0\n};\naxisModelCreator('x', AxisModel, getAxisType, extraOption);\naxisModelCreator('y', AxisModel, getAxisType, extraOption);\nvar _default = AxisModel;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar BaseAxisPointer = require(\"./BaseAxisPointer\");\n\nvar viewHelper = require(\"./viewHelper\");\n\nvar cartesianAxisHelper = require(\"../../coord/cartesian/cartesianAxisHelper\");\n\nvar AxisView = require(\"../axis/AxisView\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar CartesianAxisPointer = BaseAxisPointer.extend({\n  /**\n   * @override\n   */\n  makeElOption: function (elOption, value, axisModel, axisPointerModel, api) {\n    var axis = axisModel.axis;\n    var grid = axis.grid;\n    var axisPointerType = axisPointerModel.get('type');\n    var otherExtent = getCartesian(grid, axis).getOtherAxis(axis).getGlobalExtent();\n    var pixelValue = axis.toGlobalCoord(axis.dataToCoord(value, true));\n\n    if (axisPointerType && axisPointerType !== 'none') {\n      var elStyle = viewHelper.buildElStyle(axisPointerModel);\n      var pointerOption = pointerShapeBuilder[axisPointerType](axis, pixelValue, otherExtent);\n      pointerOption.style = elStyle;\n      elOption.graphicKey = pointerOption.type;\n      elOption.pointer = pointerOption;\n    }\n\n    var layoutInfo = cartesianAxisHelper.layout(grid.model, axisModel);\n    viewHelper.buildCartesianSingleLabelElOption(value, elOption, layoutInfo, axisModel, axisPointerModel, api);\n  },\n\n  /**\n   * @override\n   */\n  getHandleTransform: function (value, axisModel, axisPointerModel) {\n    var layoutInfo = cartesianAxisHelper.layout(axisModel.axis.grid.model, axisModel, {\n      labelInside: false\n    });\n    layoutInfo.labelMargin = axisPointerModel.get('handle.margin');\n    return {\n      position: viewHelper.getTransformedPosition(axisModel.axis, value, layoutInfo),\n      rotation: layoutInfo.rotation + (layoutInfo.labelDirection < 0 ? Math.PI : 0)\n    };\n  },\n\n  /**\n   * @override\n   */\n  updateHandleTransform: function (transform, delta, axisModel, axisPointerModel) {\n    var axis = axisModel.axis;\n    var grid = axis.grid;\n    var axisExtent = axis.getGlobalExtent(true);\n    var otherExtent = getCartesian(grid, axis).getOtherAxis(axis).getGlobalExtent();\n    var dimIndex = axis.dim === 'x' ? 0 : 1;\n    var currPosition = transform.position;\n    currPosition[dimIndex] += delta[dimIndex];\n    currPosition[dimIndex] = Math.min(axisExtent[1], currPosition[dimIndex]);\n    currPosition[dimIndex] = Math.max(axisExtent[0], currPosition[dimIndex]);\n    var cursorOtherValue = (otherExtent[1] + otherExtent[0]) / 2;\n    var cursorPoint = [cursorOtherValue, cursorOtherValue];\n    cursorPoint[dimIndex] = currPosition[dimIndex]; // Make tooltip do not overlap axisPointer and in the middle of the grid.\n\n    var tooltipOptions = [{\n      verticalAlign: 'middle'\n    }, {\n      align: 'center'\n    }];\n    return {\n      position: currPosition,\n      rotation: transform.rotation,\n      cursorPoint: cursorPoint,\n      tooltipOption: tooltipOptions[dimIndex]\n    };\n  }\n});\n\nfunction getCartesian(grid, axis) {\n  var opt = {};\n  opt[axis.dim + 'AxisIndex'] = axis.index;\n  return grid.getCartesian(opt);\n}\n\nvar pointerShapeBuilder = {\n  line: function (axis, pixelValue, otherExtent) {\n    var targetShape = viewHelper.makeLineShape([pixelValue, otherExtent[0]], [pixelValue, otherExtent[1]], getAxisDimIndex(axis));\n    return {\n      type: 'Line',\n      subPixelOptimize: true,\n      shape: targetShape\n    };\n  },\n  shadow: function (axis, pixelValue, otherExtent) {\n    var bandWidth = Math.max(1, axis.getBandWidth());\n    var span = otherExtent[1] - otherExtent[0];\n    return {\n      type: 'Rect',\n      shape: viewHelper.makeRectShape([pixelValue - bandWidth / 2, otherExtent[0]], [bandWidth, span], getAxisDimIndex(axis))\n    };\n  }\n};\n\nfunction getAxisDimIndex(axis) {\n  return axis.dim === 'x' ? 0 : 1;\n}\n\nAxisView.registerAxisPointerClass('CartesianAxisPointer', CartesianAxisPointer);\nvar _default = CartesianAxisPointer;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar env = require(\"zrender/lib/core/env\");\n\nvar _format = require(\"../util/format\");\n\nvar formatTime = _format.formatTime;\nvar encodeHTML = _format.encodeHTML;\nvar addCommas = _format.addCommas;\nvar getTooltipMarker = _format.getTooltipMarker;\n\nvar modelUtil = require(\"../util/model\");\n\nvar ComponentModel = require(\"./Component\");\n\nvar colorPaletteMixin = require(\"./mixin/colorPalette\");\n\nvar dataFormatMixin = require(\"../model/mixin/dataFormat\");\n\nvar _layout = require(\"../util/layout\");\n\nvar getLayoutParams = _layout.getLayoutParams;\nvar mergeLayoutParam = _layout.mergeLayoutParam;\n\nvar _task = require(\"../stream/task\");\n\nvar createTask = _task.createTask;\n\nvar _sourceHelper = require(\"../data/helper/sourceHelper\");\n\nvar prepareSource = _sourceHelper.prepareSource;\nvar getSource = _sourceHelper.getSource;\n\nvar _dataProvider = require(\"../data/helper/dataProvider\");\n\nvar retrieveRawValue = _dataProvider.retrieveRawValue;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar inner = modelUtil.makeInner();\nvar SeriesModel = ComponentModel.extend({\n  type: 'series.__base__',\n\n  /**\n   * @readOnly\n   */\n  seriesIndex: 0,\n  // coodinateSystem will be injected in the echarts/CoordinateSystem\n  coordinateSystem: null,\n\n  /**\n   * @type {Object}\n   * @protected\n   */\n  defaultOption: null,\n\n  /**\n   * legend visual provider to the legend component\n   * @type {Object}\n   */\n  // PENDING\n  legendVisualProvider: null,\n\n  /**\n   * Access path of color for visual\n   */\n  visualColorAccessPath: 'itemStyle.color',\n\n  /**\n   * Access path of borderColor for visual\n   */\n  visualBorderColorAccessPath: 'itemStyle.borderColor',\n\n  /**\n   * Support merge layout params.\n   * Only support 'box' now (left/right/top/bottom/width/height).\n   * @type {string|Object} Object can be {ignoreSize: true}\n   * @readOnly\n   */\n  layoutMode: null,\n  init: function (option, parentModel, ecModel, extraOpt) {\n    /**\n     * @type {number}\n     * @readOnly\n     */\n    this.seriesIndex = this.componentIndex;\n    this.dataTask = createTask({\n      count: dataTaskCount,\n      reset: dataTaskReset\n    });\n    this.dataTask.context = {\n      model: this\n    };\n    this.mergeDefaultAndTheme(option, ecModel);\n    prepareSource(this);\n    var data = this.getInitialData(option, ecModel);\n    wrapData(data, this);\n    this.dataTask.context.data = data;\n\n    /**\n     * @type {module:echarts/data/List|module:echarts/data/Tree|module:echarts/data/Graph}\n     * @private\n     */\n    inner(this).dataBeforeProcessed = data; // If we reverse the order (make data firstly, and then make\n    // dataBeforeProcessed by cloneShallow), cloneShallow will\n    // cause data.graph.data !== data when using\n    // module:echarts/data/Graph or module:echarts/data/Tree.\n    // See module:echarts/data/helper/linkList\n    // Theoretically, it is unreasonable to call `seriesModel.getData()` in the model\n    // init or merge stage, because the data can be restored. So we do not `restoreData`\n    // and `setData` here, which forbids calling `seriesModel.getData()` in this stage.\n    // Call `seriesModel.getRawData()` instead.\n    // this.restoreData();\n\n    autoSeriesName(this);\n  },\n\n  /**\n   * Util for merge default and theme to option\n   * @param  {Object} option\n   * @param  {module:echarts/model/Global} ecModel\n   */\n  mergeDefaultAndTheme: function (option, ecModel) {\n    var layoutMode = this.layoutMode;\n    var inputPositionParams = layoutMode ? getLayoutParams(option) : {}; // Backward compat: using subType on theme.\n    // But if name duplicate between series subType\n    // (for example: parallel) add component mainType,\n    // add suffix 'Series'.\n\n    var themeSubType = this.subType;\n\n    if (ComponentModel.hasClass(themeSubType)) {\n      themeSubType += 'Series';\n    }\n\n    zrUtil.merge(option, ecModel.getTheme().get(this.subType));\n    zrUtil.merge(option, this.getDefaultOption()); // Default label emphasis `show`\n\n    modelUtil.defaultEmphasis(option, 'label', ['show']);\n    this.fillDataTextStyle(option.data);\n\n    if (layoutMode) {\n      mergeLayoutParam(option, inputPositionParams, layoutMode);\n    }\n  },\n  mergeOption: function (newSeriesOption, ecModel) {\n    // this.settingTask.dirty();\n    newSeriesOption = zrUtil.merge(this.option, newSeriesOption, true);\n    this.fillDataTextStyle(newSeriesOption.data);\n    var layoutMode = this.layoutMode;\n\n    if (layoutMode) {\n      mergeLayoutParam(this.option, newSeriesOption, layoutMode);\n    }\n\n    prepareSource(this);\n    var data = this.getInitialData(newSeriesOption, ecModel);\n    wrapData(data, this);\n    this.dataTask.dirty();\n    this.dataTask.context.data = data;\n    inner(this).dataBeforeProcessed = data;\n    autoSeriesName(this);\n  },\n  fillDataTextStyle: function (data) {\n    // Default data label emphasis `show`\n    // FIXME Tree structure data ?\n    // FIXME Performance ?\n    if (data && !zrUtil.isTypedArray(data)) {\n      var props = ['show'];\n\n      for (var i = 0; i < data.length; i++) {\n        if (data[i] && data[i].label) {\n          modelUtil.defaultEmphasis(data[i], 'label', props);\n        }\n      }\n    }\n  },\n\n  /**\n   * Init a data structure from data related option in series\n   * Must be overwritten\n   */\n  getInitialData: function () {},\n\n  /**\n   * Append data to list\n   * @param {Object} params\n   * @param {Array|TypedArray} params.data\n   */\n  appendData: function (params) {\n    // FIXME ???\n    // (1) If data from dataset, forbidden append.\n    // (2) support append data of dataset.\n    var data = this.getRawData();\n    data.appendData(params.data);\n  },\n\n  /**\n   * Consider some method like `filter`, `map` need make new data,\n   * We should make sure that `seriesModel.getData()` get correct\n   * data in the stream procedure. So we fetch data from upstream\n   * each time `task.perform` called.\n   * @param {string} [dataType]\n   * @return {module:echarts/data/List}\n   */\n  getData: function (dataType) {\n    var task = getCurrentTask(this);\n\n    if (task) {\n      var data = task.context.data;\n      return dataType == null ? data : data.getLinkedData(dataType);\n    } else {\n      // When series is not alive (that may happen when click toolbox\n      // restore or setOption with not merge mode), series data may\n      // be still need to judge animation or something when graphic\n      // elements want to know whether fade out.\n      return inner(this).data;\n    }\n  },\n\n  /**\n   * @param {module:echarts/data/List} data\n   */\n  setData: function (data) {\n    var task = getCurrentTask(this);\n\n    if (task) {\n      var context = task.context; // Consider case: filter, data sample.\n\n      if (context.data !== data && task.modifyOutputEnd) {\n        task.setOutputEnd(data.count());\n      }\n\n      context.outputData = data; // Caution: setData should update context.data,\n      // Because getData may be called multiply in a\n      // single stage and expect to get the data just\n      // set. (For example, AxisProxy, x y both call\n      // getData and setDate sequentially).\n      // So the context.data should be fetched from\n      // upstream each time when a stage starts to be\n      // performed.\n\n      if (task !== this.dataTask) {\n        context.data = data;\n      }\n    }\n\n    inner(this).data = data;\n  },\n\n  /**\n   * @see {module:echarts/data/helper/sourceHelper#getSource}\n   * @return {module:echarts/data/Source} source\n   */\n  getSource: function () {\n    return getSource(this);\n  },\n\n  /**\n   * Get data before processed\n   * @return {module:echarts/data/List}\n   */\n  getRawData: function () {\n    return inner(this).dataBeforeProcessed;\n  },\n\n  /**\n   * Get base axis if has coordinate system and has axis.\n   * By default use coordSys.getBaseAxis();\n   * Can be overrided for some chart.\n   * @return {type} description\n   */\n  getBaseAxis: function () {\n    var coordSys = this.coordinateSystem;\n    return coordSys && coordSys.getBaseAxis && coordSys.getBaseAxis();\n  },\n  // FIXME\n\n  /**\n   * Default tooltip formatter\n   *\n   * @param {number} dataIndex\n   * @param {boolean} [multipleSeries=false]\n   * @param {number} [dataType]\n   * @param {string} [renderMode='html'] valid values: 'html' and 'richText'.\n   *                                     'html' is used for rendering tooltip in extra DOM form, and the result\n   *                                     string is used as DOM HTML content.\n   *                                     'richText' is used for rendering tooltip in rich text form, for those where\n   *                                     DOM operation is not supported.\n   * @return {Object} formatted tooltip with `html` and `markers`\n   */\n  formatTooltip: function (dataIndex, multipleSeries, dataType, renderMode) {\n    var series = this;\n    renderMode = renderMode || 'html';\n    var newLine = renderMode === 'html' ? '<br/>' : '\\n';\n    var isRichText = renderMode === 'richText';\n    var markers = {};\n    var markerId = 0;\n\n    function formatArrayValue(value) {\n      // ??? TODO refactor these logic.\n      // check: category-no-encode-has-axis-data in dataset.html\n      var vertially = zrUtil.reduce(value, function (vertially, val, idx) {\n        var dimItem = data.getDimensionInfo(idx);\n        return vertially |= dimItem && dimItem.tooltip !== false && dimItem.displayName != null;\n      }, 0);\n      var result = [];\n      tooltipDims.length ? zrUtil.each(tooltipDims, function (dim) {\n        setEachItem(retrieveRawValue(data, dataIndex, dim), dim);\n      }) // By default, all dims is used on tooltip.\n      : zrUtil.each(value, setEachItem);\n\n      function setEachItem(val, dim) {\n        var dimInfo = data.getDimensionInfo(dim); // If `dimInfo.tooltip` is not set, show tooltip.\n\n        if (!dimInfo || dimInfo.otherDims.tooltip === false) {\n          return;\n        }\n\n        var dimType = dimInfo.type;\n        var markName = 'sub' + series.seriesIndex + 'at' + markerId;\n        var dimHead = getTooltipMarker({\n          color: color,\n          type: 'subItem',\n          renderMode: renderMode,\n          markerId: markName\n        });\n        var dimHeadStr = typeof dimHead === 'string' ? dimHead : dimHead.content;\n        var valStr = (vertially ? dimHeadStr + encodeHTML(dimInfo.displayName || '-') + ': ' : '') + // FIXME should not format time for raw data?\n        encodeHTML(dimType === 'ordinal' ? val + '' : dimType === 'time' ? multipleSeries ? '' : formatTime('yyyy/MM/dd hh:mm:ss', val) : addCommas(val));\n        valStr && result.push(valStr);\n\n        if (isRichText) {\n          markers[markName] = color;\n          ++markerId;\n        }\n      }\n\n      var newLine = vertially ? isRichText ? '\\n' : '<br/>' : '';\n      var content = newLine + result.join(newLine || ', ');\n      return {\n        renderMode: renderMode,\n        content: content,\n        style: markers\n      };\n    }\n\n    function formatSingleValue(val) {\n      // return encodeHTML(addCommas(val));\n      return {\n        renderMode: renderMode,\n        content: encodeHTML(addCommas(val)),\n        style: markers\n      };\n    }\n\n    var data = this.getData();\n    var tooltipDims = data.mapDimension('defaultedTooltip', true);\n    var tooltipDimLen = tooltipDims.length;\n    var value = this.getRawValue(dataIndex);\n    var isValueArr = zrUtil.isArray(value);\n    var color = data.getItemVisual(dataIndex, 'color');\n\n    if (zrUtil.isObject(color) && color.colorStops) {\n      color = (color.colorStops[0] || {}).color;\n    }\n\n    color = color || 'transparent'; // Complicated rule for pretty tooltip.\n\n    var formattedValue = tooltipDimLen > 1 || isValueArr && !tooltipDimLen ? formatArrayValue(value) : tooltipDimLen ? formatSingleValue(retrieveRawValue(data, dataIndex, tooltipDims[0])) : formatSingleValue(isValueArr ? value[0] : value);\n    var content = formattedValue.content;\n    var markName = series.seriesIndex + 'at' + markerId;\n    var colorEl = getTooltipMarker({\n      color: color,\n      type: 'item',\n      renderMode: renderMode,\n      markerId: markName\n    });\n    markers[markName] = color;\n    ++markerId;\n    var name = data.getName(dataIndex);\n    var seriesName = this.name;\n\n    if (!modelUtil.isNameSpecified(this)) {\n      seriesName = '';\n    }\n\n    seriesName = seriesName ? encodeHTML(seriesName) + (!multipleSeries ? newLine : ': ') : '';\n    var colorStr = typeof colorEl === 'string' ? colorEl : colorEl.content;\n    var html = !multipleSeries ? seriesName + colorStr + (name ? encodeHTML(name) + ': ' + content : content) : colorStr + seriesName + content;\n    return {\n      html: html,\n      markers: markers\n    };\n  },\n\n  /**\n   * @return {boolean}\n   */\n  isAnimationEnabled: function () {\n    if (env.node) {\n      return false;\n    }\n\n    var animationEnabled = this.getShallow('animation');\n\n    if (animationEnabled) {\n      if (this.getData().count() > this.getShallow('animationThreshold')) {\n        animationEnabled = false;\n      }\n    }\n\n    return animationEnabled;\n  },\n  restoreData: function () {\n    this.dataTask.dirty();\n  },\n  getColorFromPalette: function (name, scope, requestColorNum) {\n    var ecModel = this.ecModel; // PENDING\n\n    var color = colorPaletteMixin.getColorFromPalette.call(this, name, scope, requestColorNum);\n\n    if (!color) {\n      color = ecModel.getColorFromPalette(name, scope, requestColorNum);\n    }\n\n    return color;\n  },\n\n  /**\n   * Use `data.mapDimension(coordDim, true)` instead.\n   * @deprecated\n   */\n  coordDimToDataDim: function (coordDim) {\n    return this.getRawData().mapDimension(coordDim, true);\n  },\n\n  /**\n   * Get progressive rendering count each step\n   * @return {number}\n   */\n  getProgressive: function () {\n    return this.get('progressive');\n  },\n\n  /**\n   * Get progressive rendering count each step\n   * @return {number}\n   */\n  getProgressiveThreshold: function () {\n    return this.get('progressiveThreshold');\n  },\n\n  /**\n   * Get data indices for show tooltip content. See tooltip.\n   * @abstract\n   * @param {Array.<string>|string} dim\n   * @param {Array.<number>} value\n   * @param {module:echarts/coord/single/SingleAxis} baseAxis\n   * @return {Object} {dataIndices, nestestValue}.\n   */\n  getAxisTooltipData: null,\n\n  /**\n   * See tooltip.\n   * @abstract\n   * @param {number} dataIndex\n   * @return {Array.<number>} Point of tooltip. null/undefined can be returned.\n   */\n  getTooltipPosition: null,\n\n  /**\n   * @see {module:echarts/stream/Scheduler}\n   */\n  pipeTask: null,\n\n  /**\n   * Convinient for override in extended class.\n   * @protected\n   * @type {Function}\n   */\n  preventIncremental: null,\n\n  /**\n   * @public\n   * @readOnly\n   * @type {Object}\n   */\n  pipelineContext: null\n});\nzrUtil.mixin(SeriesModel, dataFormatMixin);\nzrUtil.mixin(SeriesModel, colorPaletteMixin);\n/**\n * MUST be called after `prepareSource` called\n * Here we need to make auto series, especially for auto legend. But we\n * do not modify series.name in option to avoid side effects.\n */\n\nfunction autoSeriesName(seriesModel) {\n  // User specified name has higher priority, otherwise it may cause\n  // series can not be queried unexpectedly.\n  var name = seriesModel.name;\n\n  if (!modelUtil.isNameSpecified(seriesModel)) {\n    seriesModel.name = getSeriesAutoName(seriesModel) || name;\n  }\n}\n\nfunction getSeriesAutoName(seriesModel) {\n  var data = seriesModel.getRawData();\n  var dataDims = data.mapDimension('seriesName', true);\n  var nameArr = [];\n  zrUtil.each(dataDims, function (dataDim) {\n    var dimInfo = data.getDimensionInfo(dataDim);\n    dimInfo.displayName && nameArr.push(dimInfo.displayName);\n  });\n  return nameArr.join(' ');\n}\n\nfunction dataTaskCount(context) {\n  return context.model.getRawData().count();\n}\n\nfunction dataTaskReset(context) {\n  var seriesModel = context.model;\n  seriesModel.setData(seriesModel.getRawData().cloneShallow());\n  return dataTaskProgress;\n}\n\nfunction dataTaskProgress(param, context) {\n  // Avoid repead cloneShallow when data just created in reset.\n  if (context.outputData && param.end > context.outputData.count()) {\n    context.model.getRawData().cloneShallow(context.outputData);\n  }\n} // TODO refactor\n\n\nfunction wrapData(data, seriesModel) {\n  zrUtil.each(data.CHANGABLE_METHODS, function (methodName) {\n    data.wrapMethod(methodName, zrUtil.curry(onDataSelfChange, seriesModel));\n  });\n}\n\nfunction onDataSelfChange(seriesModel) {\n  var task = getCurrentTask(seriesModel);\n\n  if (task) {\n    // Consider case: filter, selectRange\n    task.setOutputEnd(this.count());\n  }\n}\n\nfunction getCurrentTask(seriesModel) {\n  var scheduler = (seriesModel.ecModel || {}).scheduler;\n  var pipeline = scheduler && scheduler.getPipeline(seriesModel.uid);\n\n  if (pipeline) {\n    // When pipline finished, the currrentTask keep the last\n    // task (renderTask).\n    var task = pipeline.currentTask;\n\n    if (task) {\n      var agentStubMap = task.agentStubMap;\n\n      if (agentStubMap) {\n        task = agentStubMap.get(seriesModel.uid);\n      }\n    }\n\n    return task;\n  }\n}\n\nvar _default = SeriesModel;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../../util/graphic\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction rectCoordAxisBuildSplitArea(axisView, axisGroup, axisModel, gridModel) {\n  var axis = axisModel.axis;\n\n  if (axis.scale.isBlank()) {\n    return;\n  }\n\n  var splitAreaModel = axisModel.getModel('splitArea');\n  var areaStyleModel = splitAreaModel.getModel('areaStyle');\n  var areaColors = areaStyleModel.get('color');\n  var gridRect = gridModel.coordinateSystem.getRect();\n  var ticksCoords = axis.getTicksCoords({\n    tickModel: splitAreaModel,\n    clamp: true\n  });\n\n  if (!ticksCoords.length) {\n    return;\n  } // For Making appropriate splitArea animation, the color and anid\n  // should be corresponding to previous one if possible.\n\n\n  var areaColorsLen = areaColors.length;\n  var lastSplitAreaColors = axisView.__splitAreaColors;\n  var newSplitAreaColors = zrUtil.createHashMap();\n  var colorIndex = 0;\n\n  if (lastSplitAreaColors) {\n    for (var i = 0; i < ticksCoords.length; i++) {\n      var cIndex = lastSplitAreaColors.get(ticksCoords[i].tickValue);\n\n      if (cIndex != null) {\n        colorIndex = (cIndex + (areaColorsLen - 1) * i) % areaColorsLen;\n        break;\n      }\n    }\n  }\n\n  var prev = axis.toGlobalCoord(ticksCoords[0].coord);\n  var areaStyle = areaStyleModel.getAreaStyle();\n  areaColors = zrUtil.isArray(areaColors) ? areaColors : [areaColors];\n\n  for (var i = 1; i < ticksCoords.length; i++) {\n    var tickCoord = axis.toGlobalCoord(ticksCoords[i].coord);\n    var x;\n    var y;\n    var width;\n    var height;\n\n    if (axis.isHorizontal()) {\n      x = prev;\n      y = gridRect.y;\n      width = tickCoord - x;\n      height = gridRect.height;\n      prev = x + width;\n    } else {\n      x = gridRect.x;\n      y = prev;\n      width = gridRect.width;\n      height = tickCoord - y;\n      prev = y + height;\n    }\n\n    var tickValue = ticksCoords[i - 1].tickValue;\n    tickValue != null && newSplitAreaColors.set(tickValue, colorIndex);\n    axisGroup.add(new graphic.Rect({\n      anid: tickValue != null ? 'area_' + tickValue : null,\n      shape: {\n        x: x,\n        y: y,\n        width: width,\n        height: height\n      },\n      style: zrUtil.defaults({\n        fill: areaColors[colorIndex]\n      }, areaStyle),\n      silent: true\n    }));\n    colorIndex = (colorIndex + 1) % areaColorsLen;\n  }\n\n  axisView.__splitAreaColors = newSplitAreaColors;\n}\n\nfunction rectCoordAxisHandleRemove(axisView) {\n  axisView.__splitAreaColors = null;\n}\n\nexports.rectCoordAxisBuildSplitArea = rectCoordAxisBuildSplitArea;\nexports.rectCoordAxisHandleRemove = rectCoordAxisHandleRemove;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar isObject = _util.isObject;\nvar each = _util.each;\nvar map = _util.map;\nvar indexOf = _util.indexOf;\nvar retrieve = _util.retrieve;\n\nvar _layout = require(\"../../util/layout\");\n\nvar getLayoutRect = _layout.getLayoutRect;\n\nvar _axisHelper = require(\"../../coord/axisHelper\");\n\nvar createScaleByModel = _axisHelper.createScaleByModel;\nvar ifAxisCrossZero = _axisHelper.ifAxisCrossZero;\nvar niceScaleExtent = _axisHelper.niceScaleExtent;\nvar estimateLabelUnionRect = _axisHelper.estimateLabelUnionRect;\n\nvar Cartesian2D = require(\"./Cartesian2D\");\n\nvar Axis2D = require(\"./Axis2D\");\n\nvar CoordinateSystem = require(\"../../CoordinateSystem\");\n\nvar _dataStackHelper = require(\"../../data/helper/dataStackHelper\");\n\nvar getStackedDimension = _dataStackHelper.getStackedDimension;\n\nrequire(\"./GridModel\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Grid is a region which contains at most 4 cartesian systems\n *\n * TODO Default cartesian\n */\n// Depends on GridModel, AxisModel, which performs preprocess.\n\n/**\n * Check if the axis is used in the specified grid\n * @inner\n */\nfunction isAxisUsedInTheGrid(axisModel, gridModel, ecModel) {\n  return axisModel.getCoordSysModel() === gridModel;\n}\n\nfunction Grid(gridModel, ecModel, api) {\n  /**\n   * @type {Object.<string, module:echarts/coord/cartesian/Cartesian2D>}\n   * @private\n   */\n  this._coordsMap = {};\n  /**\n   * @type {Array.<module:echarts/coord/cartesian/Cartesian>}\n   * @private\n   */\n\n  this._coordsList = [];\n  /**\n   * @type {Object.<string, Array.<module:echarts/coord/cartesian/Axis2D>>}\n   * @private\n   */\n\n  this._axesMap = {};\n  /**\n   * @type {Array.<module:echarts/coord/cartesian/Axis2D>}\n   * @private\n   */\n\n  this._axesList = [];\n\n  this._initCartesian(gridModel, ecModel, api);\n\n  this.model = gridModel;\n}\n\nvar gridProto = Grid.prototype;\ngridProto.type = 'grid';\ngridProto.axisPointerEnabled = true;\n\ngridProto.getRect = function () {\n  return this._rect;\n};\n\ngridProto.update = function (ecModel, api) {\n  var axesMap = this._axesMap;\n\n  this._updateScale(ecModel, this.model);\n\n  each(axesMap.x, function (xAxis) {\n    niceScaleExtent(xAxis.scale, xAxis.model);\n  });\n  each(axesMap.y, function (yAxis) {\n    niceScaleExtent(yAxis.scale, yAxis.model);\n  }); // Key: axisDim_axisIndex, value: boolean, whether onZero target.\n\n  var onZeroRecords = {};\n  each(axesMap.x, function (xAxis) {\n    fixAxisOnZero(axesMap, 'y', xAxis, onZeroRecords);\n  });\n  each(axesMap.y, function (yAxis) {\n    fixAxisOnZero(axesMap, 'x', yAxis, onZeroRecords);\n  }); // Resize again if containLabel is enabled\n  // FIXME It may cause getting wrong grid size in data processing stage\n\n  this.resize(this.model, api);\n};\n\nfunction fixAxisOnZero(axesMap, otherAxisDim, axis, onZeroRecords) {\n  axis.getAxesOnZeroOf = function () {\n    // TODO: onZero of multiple axes.\n    return otherAxisOnZeroOf ? [otherAxisOnZeroOf] : [];\n  }; // onZero can not be enabled in these two situations:\n  // 1. When any other axis is a category axis.\n  // 2. When no axis is cross 0 point.\n\n\n  var otherAxes = axesMap[otherAxisDim];\n  var otherAxisOnZeroOf;\n  var axisModel = axis.model;\n  var onZero = axisModel.get('axisLine.onZero');\n  var onZeroAxisIndex = axisModel.get('axisLine.onZeroAxisIndex');\n\n  if (!onZero) {\n    return;\n  } // If target axis is specified.\n\n\n  if (onZeroAxisIndex != null) {\n    if (canOnZeroToAxis(otherAxes[onZeroAxisIndex])) {\n      otherAxisOnZeroOf = otherAxes[onZeroAxisIndex];\n    }\n  } else {\n    // Find the first available other axis.\n    for (var idx in otherAxes) {\n      if (otherAxes.hasOwnProperty(idx) && canOnZeroToAxis(otherAxes[idx]) // Consider that two Y axes on one value axis,\n      // if both onZero, the two Y axes overlap.\n      && !onZeroRecords[getOnZeroRecordKey(otherAxes[idx])]) {\n        otherAxisOnZeroOf = otherAxes[idx];\n        break;\n      }\n    }\n  }\n\n  if (otherAxisOnZeroOf) {\n    onZeroRecords[getOnZeroRecordKey(otherAxisOnZeroOf)] = true;\n  }\n\n  function getOnZeroRecordKey(axis) {\n    return axis.dim + '_' + axis.index;\n  }\n}\n\nfunction canOnZeroToAxis(axis) {\n  return axis && axis.type !== 'category' && axis.type !== 'time' && ifAxisCrossZero(axis);\n}\n/**\n * Resize the grid\n * @param {module:echarts/coord/cartesian/GridModel} gridModel\n * @param {module:echarts/ExtensionAPI} api\n */\n\n\ngridProto.resize = function (gridModel, api, ignoreContainLabel) {\n  var gridRect = getLayoutRect(gridModel.getBoxLayoutParams(), {\n    width: api.getWidth(),\n    height: api.getHeight()\n  });\n  this._rect = gridRect;\n  var axesList = this._axesList;\n  adjustAxes(); // Minus label size\n\n  if (!ignoreContainLabel && gridModel.get('containLabel')) {\n    each(axesList, function (axis) {\n      if (!axis.model.get('axisLabel.inside')) {\n        var labelUnionRect = estimateLabelUnionRect(axis);\n\n        if (labelUnionRect) {\n          var dim = axis.isHorizontal() ? 'height' : 'width';\n          var margin = axis.model.get('axisLabel.margin');\n          gridRect[dim] -= labelUnionRect[dim] + margin;\n\n          if (axis.position === 'top') {\n            gridRect.y += labelUnionRect.height + margin;\n          } else if (axis.position === 'left') {\n            gridRect.x += labelUnionRect.width + margin;\n          }\n        }\n      }\n    });\n    adjustAxes();\n  }\n\n  function adjustAxes() {\n    each(axesList, function (axis) {\n      var isHorizontal = axis.isHorizontal();\n      var extent = isHorizontal ? [0, gridRect.width] : [0, gridRect.height];\n      var idx = axis.inverse ? 1 : 0;\n      axis.setExtent(extent[idx], extent[1 - idx]);\n      updateAxisTransform(axis, isHorizontal ? gridRect.x : gridRect.y);\n    });\n  }\n};\n/**\n * @param {string} axisType\n * @param {number} [axisIndex]\n */\n\n\ngridProto.getAxis = function (axisType, axisIndex) {\n  var axesMapOnDim = this._axesMap[axisType];\n\n  if (axesMapOnDim != null) {\n    if (axisIndex == null) {\n      // Find first axis\n      for (var name in axesMapOnDim) {\n        if (axesMapOnDim.hasOwnProperty(name)) {\n          return axesMapOnDim[name];\n        }\n      }\n    }\n\n    return axesMapOnDim[axisIndex];\n  }\n};\n/**\n * @return {Array.<module:echarts/coord/Axis>}\n */\n\n\ngridProto.getAxes = function () {\n  return this._axesList.slice();\n};\n/**\n * Usage:\n *      grid.getCartesian(xAxisIndex, yAxisIndex);\n *      grid.getCartesian(xAxisIndex);\n *      grid.getCartesian(null, yAxisIndex);\n *      grid.getCartesian({xAxisIndex: ..., yAxisIndex: ...});\n *\n * @param {number|Object} [xAxisIndex]\n * @param {number} [yAxisIndex]\n */\n\n\ngridProto.getCartesian = function (xAxisIndex, yAxisIndex) {\n  if (xAxisIndex != null && yAxisIndex != null) {\n    var key = 'x' + xAxisIndex + 'y' + yAxisIndex;\n    return this._coordsMap[key];\n  }\n\n  if (isObject(xAxisIndex)) {\n    yAxisIndex = xAxisIndex.yAxisIndex;\n    xAxisIndex = xAxisIndex.xAxisIndex;\n  } // When only xAxisIndex or yAxisIndex given, find its first cartesian.\n\n\n  for (var i = 0, coordList = this._coordsList; i < coordList.length; i++) {\n    if (coordList[i].getAxis('x').index === xAxisIndex || coordList[i].getAxis('y').index === yAxisIndex) {\n      return coordList[i];\n    }\n  }\n};\n\ngridProto.getCartesians = function () {\n  return this._coordsList.slice();\n};\n/**\n * @implements\n * see {module:echarts/CoodinateSystem}\n */\n\n\ngridProto.convertToPixel = function (ecModel, finder, value) {\n  var target = this._findConvertTarget(ecModel, finder);\n\n  return target.cartesian ? target.cartesian.dataToPoint(value) : target.axis ? target.axis.toGlobalCoord(target.axis.dataToCoord(value)) : null;\n};\n/**\n * @implements\n * see {module:echarts/CoodinateSystem}\n */\n\n\ngridProto.convertFromPixel = function (ecModel, finder, value) {\n  var target = this._findConvertTarget(ecModel, finder);\n\n  return target.cartesian ? target.cartesian.pointToData(value) : target.axis ? target.axis.coordToData(target.axis.toLocalCoord(value)) : null;\n};\n/**\n * @inner\n */\n\n\ngridProto._findConvertTarget = function (ecModel, finder) {\n  var seriesModel = finder.seriesModel;\n  var xAxisModel = finder.xAxisModel || seriesModel && seriesModel.getReferringComponents('xAxis')[0];\n  var yAxisModel = finder.yAxisModel || seriesModel && seriesModel.getReferringComponents('yAxis')[0];\n  var gridModel = finder.gridModel;\n  var coordsList = this._coordsList;\n  var cartesian;\n  var axis;\n\n  if (seriesModel) {\n    cartesian = seriesModel.coordinateSystem;\n    indexOf(coordsList, cartesian) < 0 && (cartesian = null);\n  } else if (xAxisModel && yAxisModel) {\n    cartesian = this.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\n  } else if (xAxisModel) {\n    axis = this.getAxis('x', xAxisModel.componentIndex);\n  } else if (yAxisModel) {\n    axis = this.getAxis('y', yAxisModel.componentIndex);\n  } // Lowest priority.\n  else if (gridModel) {\n      var grid = gridModel.coordinateSystem;\n\n      if (grid === this) {\n        cartesian = this._coordsList[0];\n      }\n    }\n\n  return {\n    cartesian: cartesian,\n    axis: axis\n  };\n};\n/**\n * @implements\n * see {module:echarts/CoodinateSystem}\n */\n\n\ngridProto.containPoint = function (point) {\n  var coord = this._coordsList[0];\n\n  if (coord) {\n    return coord.containPoint(point);\n  }\n};\n/**\n * Initialize cartesian coordinate systems\n * @private\n */\n\n\ngridProto._initCartesian = function (gridModel, ecModel, api) {\n  var axisPositionUsed = {\n    left: false,\n    right: false,\n    top: false,\n    bottom: false\n  };\n  var axesMap = {\n    x: {},\n    y: {}\n  };\n  var axesCount = {\n    x: 0,\n    y: 0\n  }; /// Create axis\n\n  ecModel.eachComponent('xAxis', createAxisCreator('x'), this);\n  ecModel.eachComponent('yAxis', createAxisCreator('y'), this);\n\n  if (!axesCount.x || !axesCount.y) {\n    // Roll back when there no either x or y axis\n    this._axesMap = {};\n    this._axesList = [];\n    return;\n  }\n\n  this._axesMap = axesMap; /// Create cartesian2d\n\n  each(axesMap.x, function (xAxis, xAxisIndex) {\n    each(axesMap.y, function (yAxis, yAxisIndex) {\n      var key = 'x' + xAxisIndex + 'y' + yAxisIndex;\n      var cartesian = new Cartesian2D(key);\n      cartesian.grid = this;\n      cartesian.model = gridModel;\n      this._coordsMap[key] = cartesian;\n\n      this._coordsList.push(cartesian);\n\n      cartesian.addAxis(xAxis);\n      cartesian.addAxis(yAxis);\n    }, this);\n  }, this);\n\n  function createAxisCreator(axisType) {\n    return function (axisModel, idx) {\n      if (!isAxisUsedInTheGrid(axisModel, gridModel, ecModel)) {\n        return;\n      }\n\n      var axisPosition = axisModel.get('position');\n\n      if (axisType === 'x') {\n        // Fix position\n        if (axisPosition !== 'top' && axisPosition !== 'bottom') {\n          // Default bottom of X\n          axisPosition = axisPositionUsed.bottom ? 'top' : 'bottom';\n        }\n      } else {\n        // Fix position\n        if (axisPosition !== 'left' && axisPosition !== 'right') {\n          // Default left of Y\n          axisPosition = axisPositionUsed.left ? 'right' : 'left';\n        }\n      }\n\n      axisPositionUsed[axisPosition] = true;\n      var axis = new Axis2D(axisType, createScaleByModel(axisModel), [0, 0], axisModel.get('type'), axisPosition);\n      var isCategory = axis.type === 'category';\n      axis.onBand = isCategory && axisModel.get('boundaryGap');\n      axis.inverse = axisModel.get('inverse'); // Inject axis into axisModel\n\n      axisModel.axis = axis; // Inject axisModel into axis\n\n      axis.model = axisModel; // Inject grid info axis\n\n      axis.grid = this; // Index of axis, can be used as key\n\n      axis.index = idx;\n\n      this._axesList.push(axis);\n\n      axesMap[axisType][idx] = axis;\n      axesCount[axisType]++;\n    };\n  }\n};\n/**\n * Update cartesian properties from series\n * @param  {module:echarts/model/Option} option\n * @private\n */\n\n\ngridProto._updateScale = function (ecModel, gridModel) {\n  // Reset scale\n  each(this._axesList, function (axis) {\n    axis.scale.setExtent(Infinity, -Infinity);\n  });\n  ecModel.eachSeries(function (seriesModel) {\n    if (isCartesian2D(seriesModel)) {\n      var axesModels = findAxesModels(seriesModel, ecModel);\n      var xAxisModel = axesModels[0];\n      var yAxisModel = axesModels[1];\n\n      if (!isAxisUsedInTheGrid(xAxisModel, gridModel, ecModel) || !isAxisUsedInTheGrid(yAxisModel, gridModel, ecModel)) {\n        return;\n      }\n\n      var cartesian = this.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\n      var data = seriesModel.getData();\n      var xAxis = cartesian.getAxis('x');\n      var yAxis = cartesian.getAxis('y');\n\n      if (data.type === 'list') {\n        unionExtent(data, xAxis, seriesModel);\n        unionExtent(data, yAxis, seriesModel);\n      }\n    }\n  }, this);\n\n  function unionExtent(data, axis, seriesModel) {\n    each(data.mapDimension(axis.dim, true), function (dim) {\n      axis.scale.unionExtentFromData( // For example, the extent of the orginal dimension\n      // is [0.1, 0.5], the extent of the `stackResultDimension`\n      // is [7, 9], the final extent should not include [0.1, 0.5].\n      data, getStackedDimension(data, dim));\n    });\n  }\n};\n/**\n * @param {string} [dim] 'x' or 'y' or 'auto' or null/undefined\n * @return {Object} {baseAxes: [], otherAxes: []}\n */\n\n\ngridProto.getTooltipAxes = function (dim) {\n  var baseAxes = [];\n  var otherAxes = [];\n  each(this.getCartesians(), function (cartesian) {\n    var baseAxis = dim != null && dim !== 'auto' ? cartesian.getAxis(dim) : cartesian.getBaseAxis();\n    var otherAxis = cartesian.getOtherAxis(baseAxis);\n    indexOf(baseAxes, baseAxis) < 0 && baseAxes.push(baseAxis);\n    indexOf(otherAxes, otherAxis) < 0 && otherAxes.push(otherAxis);\n  });\n  return {\n    baseAxes: baseAxes,\n    otherAxes: otherAxes\n  };\n};\n/**\n * @inner\n */\n\n\nfunction updateAxisTransform(axis, coordBase) {\n  var axisExtent = axis.getExtent();\n  var axisExtentSum = axisExtent[0] + axisExtent[1]; // Fast transform\n\n  axis.toGlobalCoord = axis.dim === 'x' ? function (coord) {\n    return coord + coordBase;\n  } : function (coord) {\n    return axisExtentSum - coord + coordBase;\n  };\n  axis.toLocalCoord = axis.dim === 'x' ? function (coord) {\n    return coord - coordBase;\n  } : function (coord) {\n    return axisExtentSum - coord + coordBase;\n  };\n}\n\nvar axesTypes = ['xAxis', 'yAxis'];\n/**\n * @inner\n */\n\nfunction findAxesModels(seriesModel, ecModel) {\n  return map(axesTypes, function (axisType) {\n    var axisModel = seriesModel.getReferringComponents(axisType)[0];\n    return axisModel;\n  });\n}\n/**\n * @inner\n */\n\n\nfunction isCartesian2D(seriesModel) {\n  return seriesModel.get('coordinateSystem') === 'cartesian2d';\n}\n\nGrid.create = function (ecModel, api) {\n  var grids = [];\n  ecModel.eachComponent('grid', function (gridModel, idx) {\n    var grid = new Grid(gridModel, ecModel, api);\n    grid.name = 'grid_' + idx; // dataSampling requires axis extent, so resize\n    // should be performed in create stage.\n\n    grid.resize(gridModel, api, true);\n    gridModel.coordinateSystem = grid;\n    grids.push(grid);\n  }); // Inject the coordinateSystems into seriesModel\n\n  ecModel.eachSeries(function (seriesModel) {\n    if (!isCartesian2D(seriesModel)) {\n      return;\n    }\n\n    var axesModels = findAxesModels(seriesModel, ecModel);\n    var xAxisModel = axesModels[0];\n    var yAxisModel = axesModels[1];\n    var gridModel = xAxisModel.getCoordSysModel();\n    var grid = gridModel.coordinateSystem;\n    seriesModel.coordinateSystem = grid.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\n  });\n  return grids;\n}; // For deciding which dimensions to use when creating list data\n\n\nGrid.dimensions = Grid.prototype.dimensions = Cartesian2D.prototype.dimensions;\nCoordinateSystem.register('cartesian2d', Grid);\nvar _default = Grid;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar _symbol = require(\"../../util/symbol\");\n\nvar createSymbol = _symbol.createSymbol;\n\nvar graphic = require(\"../../util/graphic\");\n\nvar _listComponent = require(\"../helper/listComponent\");\n\nvar makeBackground = _listComponent.makeBackground;\n\nvar layoutUtil = require(\"../../util/layout\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar curry = zrUtil.curry;\nvar each = zrUtil.each;\nvar Group = graphic.Group;\n\nvar _default = echarts.extendComponentView({\n  type: 'legend.plain',\n  newlineDisabled: false,\n\n  /**\n   * @override\n   */\n  init: function () {\n    /**\n     * @private\n     * @type {module:zrender/container/Group}\n     */\n    this.group.add(this._contentGroup = new Group());\n    /**\n     * @private\n     * @type {module:zrender/Element}\n     */\n\n    this._backgroundEl;\n    /**\n     * @private\n     * @type {module:zrender/container/Group}\n     */\n\n    this.group.add(this._selectorGroup = new Group());\n    /**\n     * If first rendering, `contentGroup.position` is [0, 0], which\n     * does not make sense and may cause unexepcted animation if adopted.\n     * @private\n     * @type {boolean}\n     */\n\n    this._isFirstRender = true;\n  },\n\n  /**\n   * @protected\n   */\n  getContentGroup: function () {\n    return this._contentGroup;\n  },\n\n  /**\n   * @protected\n   */\n  getSelectorGroup: function () {\n    return this._selectorGroup;\n  },\n\n  /**\n   * @override\n   */\n  render: function (legendModel, ecModel, api) {\n    var isFirstRender = this._isFirstRender;\n    this._isFirstRender = false;\n    this.resetInner();\n\n    if (!legendModel.get('show', true)) {\n      return;\n    }\n\n    var itemAlign = legendModel.get('align');\n    var orient = legendModel.get('orient');\n\n    if (!itemAlign || itemAlign === 'auto') {\n      itemAlign = legendModel.get('left') === 'right' && orient === 'vertical' ? 'right' : 'left';\n    }\n\n    var selector = legendModel.get('selector', true);\n    var selectorPosition = legendModel.get('selectorPosition', true);\n\n    if (selector && (!selectorPosition || selectorPosition === 'auto')) {\n      selectorPosition = orient === 'horizontal' ? 'end' : 'start';\n    }\n\n    this.renderInner(itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition); // Perform layout.\n\n    var positionInfo = legendModel.getBoxLayoutParams();\n    var viewportSize = {\n      width: api.getWidth(),\n      height: api.getHeight()\n    };\n    var padding = legendModel.get('padding');\n    var maxSize = layoutUtil.getLayoutRect(positionInfo, viewportSize, padding);\n    var mainRect = this.layoutInner(legendModel, itemAlign, maxSize, isFirstRender, selector, selectorPosition); // Place mainGroup, based on the calculated `mainRect`.\n\n    var layoutRect = layoutUtil.getLayoutRect(zrUtil.defaults({\n      width: mainRect.width,\n      height: mainRect.height\n    }, positionInfo), viewportSize, padding);\n    this.group.attr('position', [layoutRect.x - mainRect.x, layoutRect.y - mainRect.y]); // Render background after group is layout.\n\n    this.group.add(this._backgroundEl = makeBackground(mainRect, legendModel));\n  },\n\n  /**\n   * @protected\n   */\n  resetInner: function () {\n    this.getContentGroup().removeAll();\n    this._backgroundEl && this.group.remove(this._backgroundEl);\n    this.getSelectorGroup().removeAll();\n  },\n\n  /**\n   * @protected\n   */\n  renderInner: function (itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition) {\n    var contentGroup = this.getContentGroup();\n    var legendDrawnMap = zrUtil.createHashMap();\n    var selectMode = legendModel.get('selectedMode');\n    var excludeSeriesId = [];\n    ecModel.eachRawSeries(function (seriesModel) {\n      !seriesModel.get('legendHoverLink') && excludeSeriesId.push(seriesModel.id);\n    });\n    each(legendModel.getData(), function (itemModel, dataIndex) {\n      var name = itemModel.get('name'); // Use empty string or \\n as a newline string\n\n      if (!this.newlineDisabled && (name === '' || name === '\\n')) {\n        contentGroup.add(new Group({\n          newline: true\n        }));\n        return;\n      } // Representitive series.\n\n\n      var seriesModel = ecModel.getSeriesByName(name)[0];\n\n      if (legendDrawnMap.get(name)) {\n        // Have been drawed\n        return;\n      } // Legend to control series.\n\n\n      if (seriesModel) {\n        var data = seriesModel.getData();\n        var color = data.getVisual('color');\n        var borderColor = data.getVisual('borderColor'); // If color is a callback function\n\n        if (typeof color === 'function') {\n          // Use the first data\n          color = color(seriesModel.getDataParams(0));\n        } // If borderColor is a callback function\n\n\n        if (typeof borderColor === 'function') {\n          // Use the first data\n          borderColor = borderColor(seriesModel.getDataParams(0));\n        } // Using rect symbol defaultly\n\n\n        var legendSymbolType = data.getVisual('legendSymbol') || 'roundRect';\n        var symbolType = data.getVisual('symbol');\n\n        var itemGroup = this._createItem(name, dataIndex, itemModel, legendModel, legendSymbolType, symbolType, itemAlign, color, borderColor, selectMode);\n\n        itemGroup.on('click', curry(dispatchSelectAction, name, null, api, excludeSeriesId)).on('mouseover', curry(dispatchHighlightAction, seriesModel.name, null, api, excludeSeriesId)).on('mouseout', curry(dispatchDownplayAction, seriesModel.name, null, api, excludeSeriesId));\n        legendDrawnMap.set(name, true);\n      } else {\n        // Legend to control data. In pie and funnel.\n        ecModel.eachRawSeries(function (seriesModel) {\n          // In case multiple series has same data name\n          if (legendDrawnMap.get(name)) {\n            return;\n          }\n\n          if (seriesModel.legendVisualProvider) {\n            var provider = seriesModel.legendVisualProvider;\n\n            if (!provider.containName(name)) {\n              return;\n            }\n\n            var idx = provider.indexOfName(name);\n            var color = provider.getItemVisual(idx, 'color');\n            var borderColor = provider.getItemVisual(idx, 'borderColor');\n            var legendSymbolType = 'roundRect';\n\n            var itemGroup = this._createItem(name, dataIndex, itemModel, legendModel, legendSymbolType, null, itemAlign, color, borderColor, selectMode); // FIXME: consider different series has items with the same name.\n\n\n            itemGroup.on('click', curry(dispatchSelectAction, null, name, api, excludeSeriesId)) // Should not specify the series name, consider legend controls\n            // more than one pie series.\n            .on('mouseover', curry(dispatchHighlightAction, null, name, api, excludeSeriesId)).on('mouseout', curry(dispatchDownplayAction, null, name, api, excludeSeriesId));\n            legendDrawnMap.set(name, true);\n          }\n        }, this);\n      }\n    }, this);\n\n    if (selector) {\n      this._createSelector(selector, legendModel, api, orient, selectorPosition);\n    }\n  },\n  _createSelector: function (selector, legendModel, api, orient, selectorPosition) {\n    var selectorGroup = this.getSelectorGroup();\n    each(selector, function (selectorItem) {\n      createSelectorButton(selectorItem);\n    });\n\n    function createSelectorButton(selectorItem) {\n      var type = selectorItem.type;\n      var labelText = new graphic.Text({\n        style: {\n          x: 0,\n          y: 0,\n          align: 'center',\n          verticalAlign: 'middle'\n        },\n        onclick: function () {\n          api.dispatchAction({\n            type: type === 'all' ? 'legendAllSelect' : 'legendInverseSelect'\n          });\n        }\n      });\n      selectorGroup.add(labelText);\n      var labelModel = legendModel.getModel('selectorLabel');\n      var emphasisLabelModel = legendModel.getModel('emphasis.selectorLabel');\n      graphic.setLabelStyle(labelText.style, labelText.hoverStyle = {}, labelModel, emphasisLabelModel, {\n        defaultText: selectorItem.title,\n        isRectText: false\n      });\n      graphic.setHoverStyle(labelText);\n    }\n  },\n  _createItem: function (name, dataIndex, itemModel, legendModel, legendSymbolType, symbolType, itemAlign, color, borderColor, selectMode) {\n    var itemWidth = legendModel.get('itemWidth');\n    var itemHeight = legendModel.get('itemHeight');\n    var inactiveColor = legendModel.get('inactiveColor');\n    var inactiveBorderColor = legendModel.get('inactiveBorderColor');\n    var symbolKeepAspect = legendModel.get('symbolKeepAspect');\n    var legendModelItemStyle = legendModel.getModel('itemStyle');\n    var isSelected = legendModel.isSelected(name);\n    var itemGroup = new Group();\n    var textStyleModel = itemModel.getModel('textStyle');\n    var itemIcon = itemModel.get('icon');\n    var tooltipModel = itemModel.getModel('tooltip');\n    var legendGlobalTooltipModel = tooltipModel.parentModel; // Use user given icon first\n\n    legendSymbolType = itemIcon || legendSymbolType;\n    var legendSymbol = createSymbol(legendSymbolType, 0, 0, itemWidth, itemHeight, isSelected ? color : inactiveColor, // symbolKeepAspect default true for legend\n    symbolKeepAspect == null ? true : symbolKeepAspect);\n    itemGroup.add(setSymbolStyle(legendSymbol, legendSymbolType, legendModelItemStyle, borderColor, inactiveBorderColor, isSelected)); // Compose symbols\n    // PENDING\n\n    if (!itemIcon && symbolType // At least show one symbol, can't be all none\n    && (symbolType !== legendSymbolType || symbolType === 'none')) {\n      var size = itemHeight * 0.8;\n\n      if (symbolType === 'none') {\n        symbolType = 'circle';\n      }\n\n      var legendSymbolCenter = createSymbol(symbolType, (itemWidth - size) / 2, (itemHeight - size) / 2, size, size, isSelected ? color : inactiveColor, // symbolKeepAspect default true for legend\n      symbolKeepAspect == null ? true : symbolKeepAspect); // Put symbol in the center\n\n      itemGroup.add(setSymbolStyle(legendSymbolCenter, symbolType, legendModelItemStyle, borderColor, inactiveBorderColor, isSelected));\n    }\n\n    var textX = itemAlign === 'left' ? itemWidth + 5 : -5;\n    var textAlign = itemAlign;\n    var formatter = legendModel.get('formatter');\n    var content = name;\n\n    if (typeof formatter === 'string' && formatter) {\n      content = formatter.replace('{name}', name != null ? name : '');\n    } else if (typeof formatter === 'function') {\n      content = formatter(name);\n    }\n\n    itemGroup.add(new graphic.Text({\n      style: graphic.setTextStyle({}, textStyleModel, {\n        text: content,\n        x: textX,\n        y: itemHeight / 2,\n        textFill: isSelected ? textStyleModel.getTextColor() : inactiveColor,\n        textAlign: textAlign,\n        textVerticalAlign: 'middle'\n      })\n    })); // Add a invisible rect to increase the area of mouse hover\n\n    var hitRect = new graphic.Rect({\n      shape: itemGroup.getBoundingRect(),\n      invisible: true,\n      tooltip: tooltipModel.get('show') ? zrUtil.extend({\n        content: name,\n        // Defaul formatter\n        formatter: legendGlobalTooltipModel.get('formatter', true) || function () {\n          return name;\n        },\n        formatterParams: {\n          componentType: 'legend',\n          legendIndex: legendModel.componentIndex,\n          name: name,\n          $vars: ['name']\n        }\n      }, tooltipModel.option) : null\n    });\n    itemGroup.add(hitRect);\n    itemGroup.eachChild(function (child) {\n      child.silent = true;\n    });\n    hitRect.silent = !selectMode;\n    this.getContentGroup().add(itemGroup);\n    graphic.setHoverStyle(itemGroup);\n    itemGroup.__legendDataIndex = dataIndex;\n    return itemGroup;\n  },\n\n  /**\n   * @protected\n   */\n  layoutInner: function (legendModel, itemAlign, maxSize, isFirstRender, selector, selectorPosition) {\n    var contentGroup = this.getContentGroup();\n    var selectorGroup = this.getSelectorGroup(); // Place items in contentGroup.\n\n    layoutUtil.box(legendModel.get('orient'), contentGroup, legendModel.get('itemGap'), maxSize.width, maxSize.height);\n    var contentRect = contentGroup.getBoundingRect();\n    var contentPos = [-contentRect.x, -contentRect.y];\n\n    if (selector) {\n      // Place buttons in selectorGroup\n      layoutUtil.box( // Buttons in selectorGroup always layout horizontally\n      'horizontal', selectorGroup, legendModel.get('selectorItemGap', true));\n      var selectorRect = selectorGroup.getBoundingRect();\n      var selectorPos = [-selectorRect.x, -selectorRect.y];\n      var selectorButtonGap = legendModel.get('selectorButtonGap', true);\n      var orientIdx = legendModel.getOrient().index;\n      var wh = orientIdx === 0 ? 'width' : 'height';\n      var hw = orientIdx === 0 ? 'height' : 'width';\n      var yx = orientIdx === 0 ? 'y' : 'x';\n\n      if (selectorPosition === 'end') {\n        selectorPos[orientIdx] += contentRect[wh] + selectorButtonGap;\n      } else {\n        contentPos[orientIdx] += selectorRect[wh] + selectorButtonGap;\n      } //Always align selector to content as 'middle'\n\n\n      selectorPos[1 - orientIdx] += contentRect[hw] / 2 - selectorRect[hw] / 2;\n      selectorGroup.attr('position', selectorPos);\n      contentGroup.attr('position', contentPos);\n      var mainRect = {\n        x: 0,\n        y: 0\n      };\n      mainRect[wh] = contentRect[wh] + selectorButtonGap + selectorRect[wh];\n      mainRect[hw] = Math.max(contentRect[hw], selectorRect[hw]);\n      mainRect[yx] = Math.min(0, selectorRect[yx] + selectorPos[1 - orientIdx]);\n      return mainRect;\n    } else {\n      contentGroup.attr('position', contentPos);\n      return this.group.getBoundingRect();\n    }\n  },\n\n  /**\n   * @protected\n   */\n  remove: function () {\n    this.getContentGroup().removeAll();\n    this._isFirstRender = true;\n  }\n});\n\nfunction setSymbolStyle(symbol, symbolType, legendModelItemStyle, borderColor, inactiveBorderColor, isSelected) {\n  var itemStyle;\n\n  if (symbolType !== 'line' && symbolType.indexOf('empty') < 0) {\n    itemStyle = legendModelItemStyle.getItemStyle();\n    symbol.style.stroke = borderColor;\n\n    if (!isSelected) {\n      itemStyle.stroke = inactiveBorderColor;\n    }\n  } else {\n    itemStyle = legendModelItemStyle.getItemStyle(['borderWidth', 'borderColor']);\n  }\n\n  return symbol.setStyle(itemStyle);\n}\n\nfunction dispatchSelectAction(seriesName, dataName, api, excludeSeriesId) {\n  // downplay before unselect\n  dispatchDownplayAction(seriesName, dataName, api, excludeSeriesId);\n  api.dispatchAction({\n    type: 'legendToggleSelect',\n    name: seriesName != null ? seriesName : dataName\n  }); // highlight after select\n\n  dispatchHighlightAction(seriesName, dataName, api, excludeSeriesId);\n}\n\nfunction dispatchHighlightAction(seriesName, dataName, api, excludeSeriesId) {\n  // If element hover will move to a hoverLayer.\n  var el = api.getZr().storage.getDisplayList()[0];\n\n  if (!(el && el.useHoverLayer)) {\n    api.dispatchAction({\n      type: 'highlight',\n      seriesName: seriesName,\n      name: dataName,\n      excludeSeriesId: excludeSeriesId\n    });\n  }\n}\n\nfunction dispatchDownplayAction(seriesName, dataName, api, excludeSeriesId) {\n  // If element hover will move to a hoverLayer.\n  var el = api.getZr().storage.getDisplayList()[0];\n\n  if (!(el && el.useHoverLayer)) {\n    api.dispatchAction({\n      type: 'downplay',\n      seriesName: seriesName,\n      name: dataName,\n      excludeSeriesId: excludeSeriesId\n    });\n  }\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar echarts = require(\"../echarts\");\n\nvar graphic = require(\"../util/graphic\");\n\nvar _layout = require(\"../util/layout\");\n\nvar getLayoutRect = _layout.getLayoutRect;\n\nvar _format = require(\"../util/format\");\n\nvar windowOpen = _format.windowOpen;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Model\necharts.extendComponentModel({\n  type: 'title',\n  layoutMode: {\n    type: 'box',\n    ignoreSize: true\n  },\n  defaultOption: {\n    // \n    zlevel: 0,\n    // \n    z: 6,\n    show: true,\n    text: '',\n    // \n    // link: null,\n    // self | blank\n    target: 'blank',\n    subtext: '',\n    // \n    // sublink: null,\n    // self | blank\n    subtarget: 'blank',\n    // 'center'  'left'  'right'\n    //  {number}xpx\n    left: 0,\n    // 'top'  'bottom'  'center'\n    //  {number}ypx\n    top: 0,\n    // \n    // 'auto' | 'left' | 'right' | 'center'\n    //  left \n    // textAlign: null\n    //\n    // \n    // 'auto' | 'top' | 'bottom' | 'middle'\n    //  top \n    // textVerticalAlign: null\n    // textBaseline: null // The same as textVerticalAlign.\n    backgroundColor: 'rgba(0,0,0,0)',\n    // \n    borderColor: '#ccc',\n    // px0\n    borderWidth: 0,\n    // px5\n    // css\n    padding: 5,\n    // px10\n    itemGap: 10,\n    textStyle: {\n      fontSize: 18,\n      fontWeight: 'bolder',\n      color: '#333'\n    },\n    subtextStyle: {\n      color: '#aaa'\n    }\n  }\n}); // View\n\necharts.extendComponentView({\n  type: 'title',\n  render: function (titleModel, ecModel, api) {\n    this.group.removeAll();\n\n    if (!titleModel.get('show')) {\n      return;\n    }\n\n    var group = this.group;\n    var textStyleModel = titleModel.getModel('textStyle');\n    var subtextStyleModel = titleModel.getModel('subtextStyle');\n    var textAlign = titleModel.get('textAlign');\n    var textVerticalAlign = zrUtil.retrieve2(titleModel.get('textBaseline'), titleModel.get('textVerticalAlign'));\n    var textEl = new graphic.Text({\n      style: graphic.setTextStyle({}, textStyleModel, {\n        text: titleModel.get('text'),\n        textFill: textStyleModel.getTextColor()\n      }, {\n        disableBox: true\n      }),\n      z2: 10\n    });\n    var textRect = textEl.getBoundingRect();\n    var subText = titleModel.get('subtext');\n    var subTextEl = new graphic.Text({\n      style: graphic.setTextStyle({}, subtextStyleModel, {\n        text: subText,\n        textFill: subtextStyleModel.getTextColor(),\n        y: textRect.height + titleModel.get('itemGap'),\n        textVerticalAlign: 'top'\n      }, {\n        disableBox: true\n      }),\n      z2: 10\n    });\n    var link = titleModel.get('link');\n    var sublink = titleModel.get('sublink');\n    var triggerEvent = titleModel.get('triggerEvent', true);\n    textEl.silent = !link && !triggerEvent;\n    subTextEl.silent = !sublink && !triggerEvent;\n\n    if (link) {\n      textEl.on('click', function () {\n        windowOpen(link, '_' + titleModel.get('target'));\n      });\n    }\n\n    if (sublink) {\n      subTextEl.on('click', function () {\n        windowOpen(sublink, '_' + titleModel.get('subtarget'));\n      });\n    }\n\n    textEl.eventData = subTextEl.eventData = triggerEvent ? {\n      componentType: 'title',\n      componentIndex: titleModel.componentIndex\n    } : null;\n    group.add(textEl);\n    subText && group.add(subTextEl); // If no subText, but add subTextEl, there will be an empty line.\n\n    var groupRect = group.getBoundingRect();\n    var layoutOption = titleModel.getBoxLayoutParams();\n    layoutOption.width = groupRect.width;\n    layoutOption.height = groupRect.height;\n    var layoutRect = getLayoutRect(layoutOption, {\n      width: api.getWidth(),\n      height: api.getHeight()\n    }, titleModel.get('padding')); // Adjust text align based on position\n\n    if (!textAlign) {\n      // Align left if title is on the left. center and right is same\n      textAlign = titleModel.get('left') || titleModel.get('right');\n\n      if (textAlign === 'middle') {\n        textAlign = 'center';\n      } // Adjust layout by text align\n\n\n      if (textAlign === 'right') {\n        layoutRect.x += layoutRect.width;\n      } else if (textAlign === 'center') {\n        layoutRect.x += layoutRect.width / 2;\n      }\n    }\n\n    if (!textVerticalAlign) {\n      textVerticalAlign = titleModel.get('top') || titleModel.get('bottom');\n\n      if (textVerticalAlign === 'center') {\n        textVerticalAlign = 'middle';\n      }\n\n      if (textVerticalAlign === 'bottom') {\n        layoutRect.y += layoutRect.height;\n      } else if (textVerticalAlign === 'middle') {\n        layoutRect.y += layoutRect.height / 2;\n      }\n\n      textVerticalAlign = textVerticalAlign || 'top';\n    }\n\n    group.attr('position', [layoutRect.x, layoutRect.y]);\n    var alignStyle = {\n      textAlign: textAlign,\n      textVerticalAlign: textVerticalAlign\n    };\n    textEl.setStyle(alignStyle);\n    subTextEl.setStyle(alignStyle); // Render background\n    // Get groupRect again because textAlign has been changed\n\n    groupRect = group.getBoundingRect();\n    var padding = layoutRect.margin;\n    var style = titleModel.getItemStyle(['color', 'opacity']);\n    style.fill = titleModel.get('backgroundColor');\n    var rect = new graphic.Rect({\n      shape: {\n        x: groupRect.x - padding[3],\n        y: groupRect.y - padding[0],\n        width: groupRect.width + padding[1] + padding[3],\n        height: groupRect.height + padding[0] + padding[2],\n        r: titleModel.get('borderRadius')\n      },\n      style: style,\n      subPixelOptimize: true,\n      silent: true\n    });\n    group.add(rect);\n  }\n});","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar echarts = require(\"../../echarts\");\n\nvar axisPointerModelHelper = require(\"../axisPointer/modelHelper\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Base class of AxisView.\n */\nvar AxisView = echarts.extendComponentView({\n  type: 'axis',\n\n  /**\n   * @private\n   */\n  _axisPointer: null,\n\n  /**\n   * @protected\n   * @type {string}\n   */\n  axisPointerClass: null,\n\n  /**\n   * @override\n   */\n  render: function (axisModel, ecModel, api, payload) {\n    // FIXME\n    // This process should proformed after coordinate systems updated\n    // (axis scale updated), and should be performed each time update.\n    // So put it here temporarily, although it is not appropriate to\n    // put a model-writing procedure in `view`.\n    this.axisPointerClass && axisPointerModelHelper.fixValue(axisModel);\n    AxisView.superApply(this, 'render', arguments);\n    updateAxisPointer(this, axisModel, ecModel, api, payload, true);\n  },\n\n  /**\n   * Action handler.\n   * @public\n   * @param {module:echarts/coord/cartesian/AxisModel} axisModel\n   * @param {module:echarts/model/Global} ecModel\n   * @param {module:echarts/ExtensionAPI} api\n   * @param {Object} payload\n   */\n  updateAxisPointer: function (axisModel, ecModel, api, payload, force) {\n    updateAxisPointer(this, axisModel, ecModel, api, payload, false);\n  },\n\n  /**\n   * @override\n   */\n  remove: function (ecModel, api) {\n    var axisPointer = this._axisPointer;\n    axisPointer && axisPointer.remove(api);\n    AxisView.superApply(this, 'remove', arguments);\n  },\n\n  /**\n   * @override\n   */\n  dispose: function (ecModel, api) {\n    disposeAxisPointer(this, api);\n    AxisView.superApply(this, 'dispose', arguments);\n  }\n});\n\nfunction updateAxisPointer(axisView, axisModel, ecModel, api, payload, forceRender) {\n  var Clazz = AxisView.getAxisPointerClass(axisView.axisPointerClass);\n\n  if (!Clazz) {\n    return;\n  }\n\n  var axisPointerModel = axisPointerModelHelper.getAxisPointerModel(axisModel);\n  axisPointerModel ? (axisView._axisPointer || (axisView._axisPointer = new Clazz())).render(axisModel, axisPointerModel, api, forceRender) : disposeAxisPointer(axisView, api);\n}\n\nfunction disposeAxisPointer(axisView, ecModel, api) {\n  var axisPointer = axisView._axisPointer;\n  axisPointer && axisPointer.dispose(ecModel, api);\n  axisView._axisPointer = null;\n}\n\nvar axisPointerClazz = [];\n\nAxisView.registerAxisPointerClass = function (type, clazz) {\n  axisPointerClazz[type] = clazz;\n};\n\nAxisView.getAxisPointerClass = function (type) {\n  return type && axisPointerClazz[type];\n};\n\nvar _default = AxisView;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar each = _util.each;\nvar map = _util.map;\nvar isFunction = _util.isFunction;\nvar createHashMap = _util.createHashMap;\nvar noop = _util.noop;\n\nvar _task = require(\"./task\");\n\nvar createTask = _task.createTask;\n\nvar _component = require(\"../util/component\");\n\nvar getUID = _component.getUID;\n\nvar GlobalModel = require(\"../model/Global\");\n\nvar ExtensionAPI = require(\"../ExtensionAPI\");\n\nvar _model = require(\"../util/model\");\n\nvar normalizeToArray = _model.normalizeToArray;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @module echarts/stream/Scheduler\n */\n\n/**\n * @constructor\n */\nfunction Scheduler(ecInstance, api, dataProcessorHandlers, visualHandlers) {\n  this.ecInstance = ecInstance;\n  this.api = api;\n  this.unfinished; // Fix current processors in case that in some rear cases that\n  // processors might be registered after echarts instance created.\n  // Register processors incrementally for a echarts instance is\n  // not supported by this stream architecture.\n\n  var dataProcessorHandlers = this._dataProcessorHandlers = dataProcessorHandlers.slice();\n  var visualHandlers = this._visualHandlers = visualHandlers.slice();\n  this._allHandlers = dataProcessorHandlers.concat(visualHandlers);\n  /**\n   * @private\n   * @type {\n   *     [handlerUID: string]: {\n   *         seriesTaskMap?: {\n   *             [seriesUID: string]: Task\n   *         },\n   *         overallTask?: Task\n   *     }\n   * }\n   */\n\n  this._stageTaskMap = createHashMap();\n}\n\nvar proto = Scheduler.prototype;\n/**\n * @param {module:echarts/model/Global} ecModel\n * @param {Object} payload\n */\n\nproto.restoreData = function (ecModel, payload) {\n  // TODO: Only restore needed series and components, but not all components.\n  // Currently `restoreData` of all of the series and component will be called.\n  // But some independent components like `title`, `legend`, `graphic`, `toolbox`,\n  // `tooltip`, `axisPointer`, etc, do not need series refresh when `setOption`,\n  // and some components like coordinate system, axes, dataZoom, visualMap only\n  // need their target series refresh.\n  // (1) If we are implementing this feature some day, we should consider these cases:\n  // if a data processor depends on a component (e.g., dataZoomProcessor depends\n  // on the settings of `dataZoom`), it should be re-performed if the component\n  // is modified by `setOption`.\n  // (2) If a processor depends on sevral series, speicified by its `getTargetSeries`,\n  // it should be re-performed when the result array of `getTargetSeries` changed.\n  // We use `dependencies` to cover these issues.\n  // (3) How to update target series when coordinate system related components modified.\n  // TODO: simply the dirty mechanism? Check whether only the case here can set tasks dirty,\n  // and this case all of the tasks will be set as dirty.\n  ecModel.restoreData(payload); // Theoretically an overall task not only depends on each of its target series, but also\n  // depends on all of the series.\n  // The overall task is not in pipeline, and `ecModel.restoreData` only set pipeline tasks\n  // dirty. If `getTargetSeries` of an overall task returns nothing, we should also ensure\n  // that the overall task is set as dirty and to be performed, otherwise it probably cause\n  // state chaos. So we have to set dirty of all of the overall tasks manually, otherwise it\n  // probably cause state chaos (consider `dataZoomProcessor`).\n\n  this._stageTaskMap.each(function (taskRecord) {\n    var overallTask = taskRecord.overallTask;\n    overallTask && overallTask.dirty();\n  });\n}; // If seriesModel provided, incremental threshold is check by series data.\n\n\nproto.getPerformArgs = function (task, isBlock) {\n  // For overall task\n  if (!task.__pipeline) {\n    return;\n  }\n\n  var pipeline = this._pipelineMap.get(task.__pipeline.id);\n\n  var pCtx = pipeline.context;\n  var incremental = !isBlock && pipeline.progressiveEnabled && (!pCtx || pCtx.progressiveRender) && task.__idxInPipeline > pipeline.blockIndex;\n  var step = incremental ? pipeline.step : null;\n  var modDataCount = pCtx && pCtx.modDataCount;\n  var modBy = modDataCount != null ? Math.ceil(modDataCount / step) : null;\n  return {\n    step: step,\n    modBy: modBy,\n    modDataCount: modDataCount\n  };\n};\n\nproto.getPipeline = function (pipelineId) {\n  return this._pipelineMap.get(pipelineId);\n};\n/**\n * Current, progressive rendering starts from visual and layout.\n * Always detect render mode in the same stage, avoiding that incorrect\n * detection caused by data filtering.\n * Caution:\n * `updateStreamModes` use `seriesModel.getData()`.\n */\n\n\nproto.updateStreamModes = function (seriesModel, view) {\n  var pipeline = this._pipelineMap.get(seriesModel.uid);\n\n  var data = seriesModel.getData();\n  var dataLen = data.count(); // `progressiveRender` means that can render progressively in each\n  // animation frame. Note that some types of series do not provide\n  // `view.incrementalPrepareRender` but support `chart.appendData`. We\n  // use the term `incremental` but not `progressive` to describe the\n  // case that `chart.appendData`.\n\n  var progressiveRender = pipeline.progressiveEnabled && view.incrementalPrepareRender && dataLen >= pipeline.threshold;\n  var large = seriesModel.get('large') && dataLen >= seriesModel.get('largeThreshold'); // TODO: modDataCount should not updated if `appendData`, otherwise cause whole repaint.\n  // see `test/candlestick-large3.html`\n\n  var modDataCount = seriesModel.get('progressiveChunkMode') === 'mod' ? dataLen : null;\n  seriesModel.pipelineContext = pipeline.context = {\n    progressiveRender: progressiveRender,\n    modDataCount: modDataCount,\n    large: large\n  };\n};\n\nproto.restorePipelines = function (ecModel) {\n  var scheduler = this;\n  var pipelineMap = scheduler._pipelineMap = createHashMap();\n  ecModel.eachSeries(function (seriesModel) {\n    var progressive = seriesModel.getProgressive();\n    var pipelineId = seriesModel.uid;\n    pipelineMap.set(pipelineId, {\n      id: pipelineId,\n      head: null,\n      tail: null,\n      threshold: seriesModel.getProgressiveThreshold(),\n      progressiveEnabled: progressive && !(seriesModel.preventIncremental && seriesModel.preventIncremental()),\n      blockIndex: -1,\n      step: Math.round(progressive || 700),\n      count: 0\n    });\n    pipe(scheduler, seriesModel, seriesModel.dataTask);\n  });\n};\n\nproto.prepareStageTasks = function () {\n  var stageTaskMap = this._stageTaskMap;\n  var ecModel = this.ecInstance.getModel();\n  var api = this.api;\n  each(this._allHandlers, function (handler) {\n    var record = stageTaskMap.get(handler.uid) || stageTaskMap.set(handler.uid, []);\n    handler.reset && createSeriesStageTask(this, handler, record, ecModel, api);\n    handler.overallReset && createOverallStageTask(this, handler, record, ecModel, api);\n  }, this);\n};\n\nproto.prepareView = function (view, model, ecModel, api) {\n  var renderTask = view.renderTask;\n  var context = renderTask.context;\n  context.model = model;\n  context.ecModel = ecModel;\n  context.api = api;\n  renderTask.__block = !view.incrementalPrepareRender;\n  pipe(this, model, renderTask);\n};\n\nproto.performDataProcessorTasks = function (ecModel, payload) {\n  // If we do not use `block` here, it should be considered when to update modes.\n  performStageTasks(this, this._dataProcessorHandlers, ecModel, payload, {\n    block: true\n  });\n}; // opt\n// opt.visualType: 'visual' or 'layout'\n// opt.setDirty\n\n\nproto.performVisualTasks = function (ecModel, payload, opt) {\n  performStageTasks(this, this._visualHandlers, ecModel, payload, opt);\n};\n\nfunction performStageTasks(scheduler, stageHandlers, ecModel, payload, opt) {\n  opt = opt || {};\n  var unfinished;\n  each(stageHandlers, function (stageHandler, idx) {\n    if (opt.visualType && opt.visualType !== stageHandler.visualType) {\n      return;\n    }\n\n    var stageHandlerRecord = scheduler._stageTaskMap.get(stageHandler.uid);\n\n    var seriesTaskMap = stageHandlerRecord.seriesTaskMap;\n    var overallTask = stageHandlerRecord.overallTask;\n\n    if (overallTask) {\n      var overallNeedDirty;\n      var agentStubMap = overallTask.agentStubMap;\n      agentStubMap.each(function (stub) {\n        if (needSetDirty(opt, stub)) {\n          stub.dirty();\n          overallNeedDirty = true;\n        }\n      });\n      overallNeedDirty && overallTask.dirty();\n      updatePayload(overallTask, payload);\n      var performArgs = scheduler.getPerformArgs(overallTask, opt.block); // Execute stubs firstly, which may set the overall task dirty,\n      // then execute the overall task. And stub will call seriesModel.setData,\n      // which ensures that in the overallTask seriesModel.getData() will not\n      // return incorrect data.\n\n      agentStubMap.each(function (stub) {\n        stub.perform(performArgs);\n      });\n      unfinished |= overallTask.perform(performArgs);\n    } else if (seriesTaskMap) {\n      seriesTaskMap.each(function (task, pipelineId) {\n        if (needSetDirty(opt, task)) {\n          task.dirty();\n        }\n\n        var performArgs = scheduler.getPerformArgs(task, opt.block); // FIXME\n        // if intending to decalare `performRawSeries` in handlers, only\n        // stream-independent (specifically, data item independent) operations can be\n        // performed. Because is a series is filtered, most of the tasks will not\n        // be performed. A stream-dependent operation probably cause wrong biz logic.\n        // Perhaps we should not provide a separate callback for this case instead\n        // of providing the config `performRawSeries`. The stream-dependent operaions\n        // and stream-independent operations should better not be mixed.\n\n        performArgs.skip = !stageHandler.performRawSeries && ecModel.isSeriesFiltered(task.context.model);\n        updatePayload(task, payload);\n        unfinished |= task.perform(performArgs);\n      });\n    }\n  });\n\n  function needSetDirty(opt, task) {\n    return opt.setDirty && (!opt.dirtyMap || opt.dirtyMap.get(task.__pipeline.id));\n  }\n\n  scheduler.unfinished |= unfinished;\n}\n\nproto.performSeriesTasks = function (ecModel) {\n  var unfinished;\n  ecModel.eachSeries(function (seriesModel) {\n    // Progress to the end for dataInit and dataRestore.\n    unfinished |= seriesModel.dataTask.perform();\n  });\n  this.unfinished |= unfinished;\n};\n\nproto.plan = function () {\n  // Travel pipelines, check block.\n  this._pipelineMap.each(function (pipeline) {\n    var task = pipeline.tail;\n\n    do {\n      if (task.__block) {\n        pipeline.blockIndex = task.__idxInPipeline;\n        break;\n      }\n\n      task = task.getUpstream();\n    } while (task);\n  });\n};\n\nvar updatePayload = proto.updatePayload = function (task, payload) {\n  payload !== 'remain' && (task.context.payload = payload);\n};\n\nfunction createSeriesStageTask(scheduler, stageHandler, stageHandlerRecord, ecModel, api) {\n  var seriesTaskMap = stageHandlerRecord.seriesTaskMap || (stageHandlerRecord.seriesTaskMap = createHashMap());\n  var seriesType = stageHandler.seriesType;\n  var getTargetSeries = stageHandler.getTargetSeries; // If a stageHandler should cover all series, `createOnAllSeries` should be declared mandatorily,\n  // to avoid some typo or abuse. Otherwise if an extension do not specify a `seriesType`,\n  // it works but it may cause other irrelevant charts blocked.\n\n  if (stageHandler.createOnAllSeries) {\n    ecModel.eachRawSeries(create);\n  } else if (seriesType) {\n    ecModel.eachRawSeriesByType(seriesType, create);\n  } else if (getTargetSeries) {\n    getTargetSeries(ecModel, api).each(create);\n  }\n\n  function create(seriesModel) {\n    var pipelineId = seriesModel.uid; // Init tasks for each seriesModel only once.\n    // Reuse original task instance.\n\n    var task = seriesTaskMap.get(pipelineId) || seriesTaskMap.set(pipelineId, createTask({\n      plan: seriesTaskPlan,\n      reset: seriesTaskReset,\n      count: seriesTaskCount\n    }));\n    task.context = {\n      model: seriesModel,\n      ecModel: ecModel,\n      api: api,\n      useClearVisual: stageHandler.isVisual && !stageHandler.isLayout,\n      plan: stageHandler.plan,\n      reset: stageHandler.reset,\n      scheduler: scheduler\n    };\n    pipe(scheduler, seriesModel, task);\n  } // Clear unused series tasks.\n\n\n  var pipelineMap = scheduler._pipelineMap;\n  seriesTaskMap.each(function (task, pipelineId) {\n    if (!pipelineMap.get(pipelineId)) {\n      task.dispose();\n      seriesTaskMap.removeKey(pipelineId);\n    }\n  });\n}\n\nfunction createOverallStageTask(scheduler, stageHandler, stageHandlerRecord, ecModel, api) {\n  var overallTask = stageHandlerRecord.overallTask = stageHandlerRecord.overallTask // For overall task, the function only be called on reset stage.\n  || createTask({\n    reset: overallTaskReset\n  });\n  overallTask.context = {\n    ecModel: ecModel,\n    api: api,\n    overallReset: stageHandler.overallReset,\n    scheduler: scheduler\n  }; // Reuse orignal stubs.\n\n  var agentStubMap = overallTask.agentStubMap = overallTask.agentStubMap || createHashMap();\n  var seriesType = stageHandler.seriesType;\n  var getTargetSeries = stageHandler.getTargetSeries;\n  var overallProgress = true;\n  var modifyOutputEnd = stageHandler.modifyOutputEnd; // An overall task with seriesType detected or has `getTargetSeries`, we add\n  // stub in each pipelines, it will set the overall task dirty when the pipeline\n  // progress. Moreover, to avoid call the overall task each frame (too frequent),\n  // we set the pipeline block.\n\n  if (seriesType) {\n    ecModel.eachRawSeriesByType(seriesType, createStub);\n  } else if (getTargetSeries) {\n    getTargetSeries(ecModel, api).each(createStub);\n  } // Otherwise, (usually it is legancy case), the overall task will only be\n  // executed when upstream dirty. Otherwise the progressive rendering of all\n  // pipelines will be disabled unexpectedly. But it still needs stubs to receive\n  // dirty info from upsteam.\n  else {\n      overallProgress = false;\n      each(ecModel.getSeries(), createStub);\n    }\n\n  function createStub(seriesModel) {\n    var pipelineId = seriesModel.uid;\n    var stub = agentStubMap.get(pipelineId);\n\n    if (!stub) {\n      stub = agentStubMap.set(pipelineId, createTask({\n        reset: stubReset,\n        onDirty: stubOnDirty\n      })); // When the result of `getTargetSeries` changed, the overallTask\n      // should be set as dirty and re-performed.\n\n      overallTask.dirty();\n    }\n\n    stub.context = {\n      model: seriesModel,\n      overallProgress: overallProgress,\n      modifyOutputEnd: modifyOutputEnd\n    };\n    stub.agent = overallTask;\n    stub.__block = overallProgress;\n    pipe(scheduler, seriesModel, stub);\n  } // Clear unused stubs.\n\n\n  var pipelineMap = scheduler._pipelineMap;\n  agentStubMap.each(function (stub, pipelineId) {\n    if (!pipelineMap.get(pipelineId)) {\n      stub.dispose(); // When the result of `getTargetSeries` changed, the overallTask\n      // should be set as dirty and re-performed.\n\n      overallTask.dirty();\n      agentStubMap.removeKey(pipelineId);\n    }\n  });\n}\n\nfunction overallTaskReset(context) {\n  context.overallReset(context.ecModel, context.api, context.payload);\n}\n\nfunction stubReset(context, upstreamContext) {\n  return context.overallProgress && stubProgress;\n}\n\nfunction stubProgress() {\n  this.agent.dirty();\n  this.getDownstream().dirty();\n}\n\nfunction stubOnDirty() {\n  this.agent && this.agent.dirty();\n}\n\nfunction seriesTaskPlan(context) {\n  return context.plan && context.plan(context.model, context.ecModel, context.api, context.payload);\n}\n\nfunction seriesTaskReset(context) {\n  if (context.useClearVisual) {\n    context.data.clearAllVisual();\n  }\n\n  var resetDefines = context.resetDefines = normalizeToArray(context.reset(context.model, context.ecModel, context.api, context.payload));\n  return resetDefines.length > 1 ? map(resetDefines, function (v, idx) {\n    return makeSeriesTaskProgress(idx);\n  }) : singleSeriesTaskProgress;\n}\n\nvar singleSeriesTaskProgress = makeSeriesTaskProgress(0);\n\nfunction makeSeriesTaskProgress(resetDefineIdx) {\n  return function (params, context) {\n    var data = context.data;\n    var resetDefine = context.resetDefines[resetDefineIdx];\n\n    if (resetDefine && resetDefine.dataEach) {\n      for (var i = params.start; i < params.end; i++) {\n        resetDefine.dataEach(data, i);\n      }\n    } else if (resetDefine && resetDefine.progress) {\n      resetDefine.progress(params, data);\n    }\n  };\n}\n\nfunction seriesTaskCount(context) {\n  return context.data.count();\n}\n\nfunction pipe(scheduler, seriesModel, task) {\n  var pipelineId = seriesModel.uid;\n\n  var pipeline = scheduler._pipelineMap.get(pipelineId);\n\n  !pipeline.head && (pipeline.head = task);\n  pipeline.tail && pipeline.tail.pipe(task);\n  pipeline.tail = task;\n  task.__idxInPipeline = pipeline.count++;\n  task.__pipeline = pipeline;\n}\n\nScheduler.wrapStageHandler = function (stageHandler, visualType) {\n  if (isFunction(stageHandler)) {\n    stageHandler = {\n      overallReset: stageHandler,\n      seriesType: detectSeriseType(stageHandler)\n    };\n  }\n\n  stageHandler.uid = getUID('stageHandler');\n  visualType && (stageHandler.visualType = visualType);\n  return stageHandler;\n};\n/**\n * Only some legacy stage handlers (usually in echarts extensions) are pure function.\n * To ensure that they can work normally, they should work in block mode, that is,\n * they should not be started util the previous tasks finished. So they cause the\n * progressive rendering disabled. We try to detect the series type, to narrow down\n * the block range to only the series type they concern, but not all series.\n */\n\n\nfunction detectSeriseType(legacyFunc) {\n  seriesType = null;\n\n  try {\n    // Assume there is no async when calling `eachSeriesByType`.\n    legacyFunc(ecModelMock, apiMock);\n  } catch (e) {}\n\n  return seriesType;\n}\n\nvar ecModelMock = {};\nvar apiMock = {};\nvar seriesType;\nmockMethods(ecModelMock, GlobalModel);\nmockMethods(apiMock, ExtensionAPI);\n\necModelMock.eachSeriesByType = ecModelMock.eachRawSeriesByType = function (type) {\n  seriesType = type;\n};\n\necModelMock.eachComponent = function (cond) {\n  if (cond.mainType === 'series' && cond.subType) {\n    seriesType = cond.subType;\n  }\n};\n\nfunction mockMethods(target, Clz) {\n  /* eslint-disable */\n  for (var name in Clz.prototype) {\n    // Do not use hasOwnProperty\n    target[name] = noop;\n  }\n  /* eslint-enable */\n\n}\n\nvar _default = Scheduler;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar Model = require(\"./Model\");\n\nvar componentUtil = require(\"../util/component\");\n\nvar _clazz = require(\"../util/clazz\");\n\nvar enableClassManagement = _clazz.enableClassManagement;\nvar parseClassType = _clazz.parseClassType;\n\nvar _model = require(\"../util/model\");\n\nvar makeInner = _model.makeInner;\n\nvar layout = require(\"../util/layout\");\n\nvar boxLayoutMixin = require(\"./mixin/boxLayout\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Component model\n *\n * @module echarts/model/Component\n */\nvar inner = makeInner();\n/**\n * @alias module:echarts/model/Component\n * @constructor\n * @param {Object} option\n * @param {module:echarts/model/Model} parentModel\n * @param {module:echarts/model/Model} ecModel\n */\n\nvar ComponentModel = Model.extend({\n  type: 'component',\n\n  /**\n   * @readOnly\n   * @type {string}\n   */\n  id: '',\n\n  /**\n   * Because simplified concept is probably better, series.name (or component.name)\n   * has been having too many resposibilities:\n   * (1) Generating id (which requires name in option should not be modified).\n   * (2) As an index to mapping series when merging option or calling API (a name\n   * can refer to more then one components, which is convinient is some case).\n   * (3) Display.\n   * @readOnly\n   */\n  name: '',\n\n  /**\n   * @readOnly\n   * @type {string}\n   */\n  mainType: '',\n\n  /**\n   * @readOnly\n   * @type {string}\n   */\n  subType: '',\n\n  /**\n   * @readOnly\n   * @type {number}\n   */\n  componentIndex: 0,\n\n  /**\n   * @type {Object}\n   * @protected\n   */\n  defaultOption: null,\n\n  /**\n   * @type {module:echarts/model/Global}\n   * @readOnly\n   */\n  ecModel: null,\n\n  /**\n   * key: componentType\n   * value:  Component model list, can not be null.\n   * @type {Object.<string, Array.<module:echarts/model/Model>>}\n   * @readOnly\n   */\n  dependentModels: [],\n\n  /**\n   * @type {string}\n   * @readOnly\n   */\n  uid: null,\n\n  /**\n   * Support merge layout params.\n   * Only support 'box' now (left/right/top/bottom/width/height).\n   * @type {string|Object} Object can be {ignoreSize: true}\n   * @readOnly\n   */\n  layoutMode: null,\n  $constructor: function (option, parentModel, ecModel, extraOpt) {\n    Model.call(this, option, parentModel, ecModel, extraOpt);\n    this.uid = componentUtil.getUID('ec_cpt_model');\n  },\n  init: function (option, parentModel, ecModel, extraOpt) {\n    this.mergeDefaultAndTheme(option, ecModel);\n  },\n  mergeDefaultAndTheme: function (option, ecModel) {\n    var layoutMode = this.layoutMode;\n    var inputPositionParams = layoutMode ? layout.getLayoutParams(option) : {};\n    var themeModel = ecModel.getTheme();\n    zrUtil.merge(option, themeModel.get(this.mainType));\n    zrUtil.merge(option, this.getDefaultOption());\n\n    if (layoutMode) {\n      layout.mergeLayoutParam(option, inputPositionParams, layoutMode);\n    }\n  },\n  mergeOption: function (option, extraOpt) {\n    zrUtil.merge(this.option, option, true);\n    var layoutMode = this.layoutMode;\n\n    if (layoutMode) {\n      layout.mergeLayoutParam(this.option, option, layoutMode);\n    }\n  },\n  // Hooker after init or mergeOption\n  optionUpdated: function (newCptOption, isInit) {},\n  getDefaultOption: function () {\n    var fields = inner(this);\n\n    if (!fields.defaultOption) {\n      var optList = [];\n      var Class = this.constructor;\n\n      while (Class) {\n        var opt = Class.prototype.defaultOption;\n        opt && optList.push(opt);\n        Class = Class.superClass;\n      }\n\n      var defaultOption = {};\n\n      for (var i = optList.length - 1; i >= 0; i--) {\n        defaultOption = zrUtil.merge(defaultOption, optList[i], true);\n      }\n\n      fields.defaultOption = defaultOption;\n    }\n\n    return fields.defaultOption;\n  },\n  getReferringComponents: function (mainType) {\n    return this.ecModel.queryComponents({\n      mainType: mainType,\n      index: this.get(mainType + 'Index', true),\n      id: this.get(mainType + 'Id', true)\n    });\n  }\n}); // Reset ComponentModel.extend, add preConstruct.\n// clazzUtil.enableClassExtend(\n//     ComponentModel,\n//     function (option, parentModel, ecModel, extraOpt) {\n//         // Set dependentModels, componentIndex, name, id, mainType, subType.\n//         zrUtil.extend(this, extraOpt);\n//         this.uid = componentUtil.getUID('componentModel');\n//         // this.setReadOnly([\n//         //     'type', 'id', 'uid', 'name', 'mainType', 'subType',\n//         //     'dependentModels', 'componentIndex'\n//         // ]);\n//     }\n// );\n// Add capability of registerClass, getClass, hasClass, registerSubTypeDefaulter and so on.\n\nenableClassManagement(ComponentModel, {\n  registerWhenExtend: true\n});\ncomponentUtil.enableSubTypeDefaulter(ComponentModel); // Add capability of ComponentModel.topologicalTravel.\n\ncomponentUtil.enableTopologicalTravel(ComponentModel, getDependencies);\n\nfunction getDependencies(componentType) {\n  var deps = [];\n  zrUtil.each(ComponentModel.getClassesByMainType(componentType), function (Clazz) {\n    deps = deps.concat(Clazz.prototype.dependencies || []);\n  }); // Ensure main type.\n\n  deps = zrUtil.map(deps, function (type) {\n    return parseClassType(type).main;\n  }); // Hack dataset for convenience.\n\n  if (componentType !== 'dataset' && zrUtil.indexOf(deps, 'dataset') <= 0) {\n    deps.unshift('dataset');\n  }\n\n  return deps;\n}\n\nzrUtil.mixin(ComponentModel, boxLayoutMixin);\nvar _default = ComponentModel;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar defaultOption = {\n  show: true,\n  zlevel: 0,\n  z: 0,\n  // Inverse the axis.\n  inverse: false,\n  // Axis name displayed.\n  name: '',\n  // 'start' | 'middle' | 'end'\n  nameLocation: 'end',\n  // By degree. By default auto rotate by nameLocation.\n  nameRotate: null,\n  nameTruncate: {\n    maxWidth: null,\n    ellipsis: '...',\n    placeholder: '.'\n  },\n  // Use global text style by default.\n  nameTextStyle: {},\n  // The gap between axisName and axisLine.\n  nameGap: 15,\n  // Default `false` to support tooltip.\n  silent: false,\n  // Default `false` to avoid legacy user event listener fail.\n  triggerEvent: false,\n  tooltip: {\n    show: false\n  },\n  axisPointer: {},\n  axisLine: {\n    show: true,\n    onZero: true,\n    onZeroAxisIndex: null,\n    lineStyle: {\n      color: '#333',\n      width: 1,\n      type: 'solid'\n    },\n    // The arrow at both ends the the axis.\n    symbol: ['none', 'none'],\n    symbolSize: [10, 15]\n  },\n  axisTick: {\n    show: true,\n    // Whether axisTick is inside the grid or outside the grid.\n    inside: false,\n    // The length of axisTick.\n    length: 5,\n    lineStyle: {\n      width: 1\n    }\n  },\n  axisLabel: {\n    show: true,\n    // Whether axisLabel is inside the grid or outside the grid.\n    inside: false,\n    rotate: 0,\n    // true | false | null/undefined (auto)\n    showMinLabel: null,\n    // true | false | null/undefined (auto)\n    showMaxLabel: null,\n    margin: 8,\n    // formatter: null,\n    fontSize: 12\n  },\n  splitLine: {\n    show: true,\n    lineStyle: {\n      color: ['#ccc'],\n      width: 1,\n      type: 'solid'\n    }\n  },\n  splitArea: {\n    show: false,\n    areaStyle: {\n      color: ['rgba(250,250,250,0.3)', 'rgba(200,200,200,0.3)']\n    }\n  }\n};\nvar axisDefault = {};\naxisDefault.categoryAxis = zrUtil.merge({\n  // The gap at both ends of the axis. For categoryAxis, boolean.\n  boundaryGap: true,\n  // Set false to faster category collection.\n  // Only usefull in the case like: category is\n  // ['2012-01-01', '2012-01-02', ...], where the input\n  // data has been ensured not duplicate and is large data.\n  // null means \"auto\":\n  // if axis.data provided, do not deduplication,\n  // else do deduplication.\n  deduplication: null,\n  // splitArea: {\n  // show: false\n  // },\n  splitLine: {\n    show: false\n  },\n  axisTick: {\n    // If tick is align with label when boundaryGap is true\n    alignWithLabel: false,\n    interval: 'auto'\n  },\n  axisLabel: {\n    interval: 'auto'\n  }\n}, defaultOption);\naxisDefault.valueAxis = zrUtil.merge({\n  // The gap at both ends of the axis. For value axis, [GAP, GAP], where\n  // `GAP` can be an absolute pixel number (like `35`), or percent (like `'30%'`)\n  boundaryGap: [0, 0],\n  // TODO\n  // min/max: [30, datamin, 60] or [20, datamin] or [datamin, 60]\n  // Min value of the axis. can be:\n  // + a number\n  // + 'dataMin': use the min value in data.\n  // + null/undefined: auto decide min value (consider pretty look and boundaryGap).\n  // min: null,\n  // Max value of the axis. can be:\n  // + a number\n  // + 'dataMax': use the max value in data.\n  // + null/undefined: auto decide max value (consider pretty look and boundaryGap).\n  // max: null,\n  // Readonly prop, specifies start value of the range when using data zoom.\n  // rangeStart: null\n  // Readonly prop, specifies end value of the range when using data zoom.\n  // rangeEnd: null\n  // Optional value can be:\n  // + `false`: always include value 0.\n  // + `true`: the extent do not consider value 0.\n  // scale: false,\n  // AxisTick and axisLabel and splitLine are caculated based on splitNumber.\n  splitNumber: 5,\n  // Interval specifies the span of the ticks is mandatorily.\n  // interval: null\n  // Specify min interval when auto calculate tick interval.\n  // minInterval: null\n  // Specify max interval when auto calculate tick interval.\n  // maxInterval: null\n  minorTick: {\n    // Minor tick, not available for cateogry axis.\n    show: false,\n    // Split number of minor ticks. The value should be in range of (0, 100)\n    splitNumber: 5,\n    // Lenght of minor tick\n    length: 3,\n    // Same inside with axisTick\n    // Line style\n    lineStyle: {// Default to be same with axisTick\n    }\n  },\n  minorSplitLine: {\n    show: false,\n    lineStyle: {\n      color: '#eee',\n      width: 1\n    }\n  }\n}, defaultOption);\naxisDefault.timeAxis = zrUtil.defaults({\n  scale: true,\n  min: 'dataMin',\n  max: 'dataMax'\n}, axisDefault.valueAxis);\naxisDefault.logAxis = zrUtil.defaults({\n  scale: true,\n  logBase: 10\n}, axisDefault.valueAxis);\nvar _default = axisDefault;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _layout = require(\"../../util/layout\");\n\nvar getLayoutRect = _layout.getLayoutRect;\nvar layoutBox = _layout.box;\nvar positionElement = _layout.positionElement;\n\nvar formatUtil = require(\"../../util/format\");\n\nvar graphic = require(\"../../util/graphic\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Layout list like component.\n * It will box layout each items in group of component and then position the whole group in the viewport\n * @param {module:zrender/group/Group} group\n * @param {module:echarts/model/Component} componentModel\n * @param {module:echarts/ExtensionAPI}\n */\nfunction layout(group, componentModel, api) {\n  var boxLayoutParams = componentModel.getBoxLayoutParams();\n  var padding = componentModel.get('padding');\n  var viewportSize = {\n    width: api.getWidth(),\n    height: api.getHeight()\n  };\n  var rect = getLayoutRect(boxLayoutParams, viewportSize, padding);\n  layoutBox(componentModel.get('orient'), group, componentModel.get('itemGap'), rect.width, rect.height);\n  positionElement(group, boxLayoutParams, viewportSize, padding);\n}\n\nfunction makeBackground(rect, componentModel) {\n  var padding = formatUtil.normalizeCssArray(componentModel.get('padding'));\n  var style = componentModel.getItemStyle(['color', 'opacity']);\n  style.fill = componentModel.get('backgroundColor');\n  var rect = new graphic.Rect({\n    shape: {\n      x: rect.x - padding[3],\n      y: rect.y - padding[0],\n      width: rect.width + padding[1] + padding[3],\n      height: rect.height + padding[0] + padding[2],\n      r: componentModel.get('borderRadius')\n    },\n    style: style,\n    silent: true,\n    z2: -1\n  }); // FIXME\n  // `subPixelOptimizeRect` may bring some gap between edge of viewpart\n  // and background rect when setting like `left: 0`, `top: 0`.\n  // graphic.subPixelOptimizeRect(rect);\n\n  return rect;\n}\n\nexports.layout = layout;\nexports.makeBackground = makeBackground;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar each = _util.each;\nvar filter = _util.filter;\nvar map = _util.map;\nvar isArray = _util.isArray;\nvar indexOf = _util.indexOf;\nvar isObject = _util.isObject;\nvar isString = _util.isString;\nvar createHashMap = _util.createHashMap;\nvar assert = _util.assert;\nvar clone = _util.clone;\nvar merge = _util.merge;\nvar extend = _util.extend;\nvar mixin = _util.mixin;\n\nvar modelUtil = require(\"../util/model\");\n\nvar Model = require(\"./Model\");\n\nvar ComponentModel = require(\"./Component\");\n\nvar globalDefault = require(\"./globalDefault\");\n\nvar colorPaletteMixin = require(\"./mixin/colorPalette\");\n\nvar _sourceHelper = require(\"../data/helper/sourceHelper\");\n\nvar resetSourceDefaulter = _sourceHelper.resetSourceDefaulter;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * ECharts global model\n *\n * @module {echarts/model/Global}\n */\n\n/**\n * Caution: If the mechanism should be changed some day, these cases\n * should be considered:\n *\n * (1) In `merge option` mode, if using the same option to call `setOption`\n * many times, the result should be the same (try our best to ensure that).\n * (2) In `merge option` mode, if a component has no id/name specified, it\n * will be merged by index, and the result sequence of the components is\n * consistent to the original sequence.\n * (3) `reset` feature (in toolbox). Find detailed info in comments about\n * `mergeOption` in module:echarts/model/OptionManager.\n */\nvar OPTION_INNER_KEY = '\\0_ec_inner';\n/**\n * @alias module:echarts/model/Global\n *\n * @param {Object} option\n * @param {module:echarts/model/Model} parentModel\n * @param {Object} theme\n */\n\nvar GlobalModel = Model.extend({\n  init: function (option, parentModel, theme, optionManager) {\n    theme = theme || {};\n    this.option = null; // Mark as not initialized.\n\n    /**\n     * @type {module:echarts/model/Model}\n     * @private\n     */\n\n    this._theme = new Model(theme);\n    /**\n     * @type {module:echarts/model/OptionManager}\n     */\n\n    this._optionManager = optionManager;\n  },\n  setOption: function (option, optionPreprocessorFuncs) {\n    assert(!(OPTION_INNER_KEY in option), 'please use chart.getOption()');\n\n    this._optionManager.setOption(option, optionPreprocessorFuncs);\n\n    this.resetOption(null);\n  },\n\n  /**\n   * @param {string} type null/undefined: reset all.\n   *                      'recreate': force recreate all.\n   *                      'timeline': only reset timeline option\n   *                      'media': only reset media query option\n   * @return {boolean} Whether option changed.\n   */\n  resetOption: function (type) {\n    var optionChanged = false;\n    var optionManager = this._optionManager;\n\n    if (!type || type === 'recreate') {\n      var baseOption = optionManager.mountOption(type === 'recreate');\n\n      if (!this.option || type === 'recreate') {\n        initBase.call(this, baseOption);\n      } else {\n        this.restoreData();\n        this.mergeOption(baseOption);\n      }\n\n      optionChanged = true;\n    }\n\n    if (type === 'timeline' || type === 'media') {\n      this.restoreData();\n    }\n\n    if (!type || type === 'recreate' || type === 'timeline') {\n      var timelineOption = optionManager.getTimelineOption(this);\n      timelineOption && (this.mergeOption(timelineOption), optionChanged = true);\n    }\n\n    if (!type || type === 'recreate' || type === 'media') {\n      var mediaOptions = optionManager.getMediaOption(this, this._api);\n\n      if (mediaOptions.length) {\n        each(mediaOptions, function (mediaOption) {\n          this.mergeOption(mediaOption, optionChanged = true);\n        }, this);\n      }\n    }\n\n    return optionChanged;\n  },\n\n  /**\n   * @protected\n   */\n  mergeOption: function (newOption) {\n    var option = this.option;\n    var componentsMap = this._componentsMap;\n    var newCptTypes = [];\n    resetSourceDefaulter(this); // If no component class, merge directly.\n    // For example: color, animaiton options, etc.\n\n    each(newOption, function (componentOption, mainType) {\n      if (componentOption == null) {\n        return;\n      }\n\n      if (!ComponentModel.hasClass(mainType)) {\n        // globalSettingTask.dirty();\n        option[mainType] = option[mainType] == null ? clone(componentOption) : merge(option[mainType], componentOption, true);\n      } else if (mainType) {\n        newCptTypes.push(mainType);\n      }\n    });\n    ComponentModel.topologicalTravel(newCptTypes, ComponentModel.getAllClassMainTypes(), visitComponent, this);\n\n    function visitComponent(mainType, dependencies) {\n      var newCptOptionList = modelUtil.normalizeToArray(newOption[mainType]);\n      var mapResult = modelUtil.mappingToExists(componentsMap.get(mainType), newCptOptionList);\n      modelUtil.makeIdAndName(mapResult); // Set mainType and complete subType.\n\n      each(mapResult, function (item, index) {\n        var opt = item.option;\n\n        if (isObject(opt)) {\n          item.keyInfo.mainType = mainType;\n          item.keyInfo.subType = determineSubType(mainType, opt, item.exist);\n        }\n      });\n      var dependentModels = getComponentsByTypes(componentsMap, dependencies);\n      option[mainType] = [];\n      componentsMap.set(mainType, []);\n      each(mapResult, function (resultItem, index) {\n        var componentModel = resultItem.exist;\n        var newCptOption = resultItem.option;\n        assert(isObject(newCptOption) || componentModel, 'Empty component definition'); // Consider where is no new option and should be merged using {},\n        // see removeEdgeAndAdd in topologicalTravel and\n        // ComponentModel.getAllClassMainTypes.\n\n        if (!newCptOption) {\n          componentModel.mergeOption({}, this);\n          componentModel.optionUpdated({}, false);\n        } else {\n          var ComponentModelClass = ComponentModel.getClass(mainType, resultItem.keyInfo.subType, true);\n\n          if (componentModel && componentModel.constructor === ComponentModelClass) {\n            componentModel.name = resultItem.keyInfo.name; // componentModel.settingTask && componentModel.settingTask.dirty();\n\n            componentModel.mergeOption(newCptOption, this);\n            componentModel.optionUpdated(newCptOption, false);\n          } else {\n            // PENDING Global as parent ?\n            var extraOpt = extend({\n              dependentModels: dependentModels,\n              componentIndex: index\n            }, resultItem.keyInfo);\n            componentModel = new ComponentModelClass(newCptOption, this, this, extraOpt);\n            extend(componentModel, extraOpt);\n            componentModel.init(newCptOption, this, this, extraOpt); // Call optionUpdated after init.\n            // newCptOption has been used as componentModel.option\n            // and may be merged with theme and default, so pass null\n            // to avoid confusion.\n\n            componentModel.optionUpdated(null, true);\n          }\n        }\n\n        componentsMap.get(mainType)[index] = componentModel;\n        option[mainType][index] = componentModel.option;\n      }, this); // Backup series for filtering.\n\n      if (mainType === 'series') {\n        createSeriesIndices(this, componentsMap.get('series'));\n      }\n    }\n\n    this._seriesIndicesMap = createHashMap(this._seriesIndices = this._seriesIndices || []);\n  },\n\n  /**\n   * Get option for output (cloned option and inner info removed)\n   * @public\n   * @return {Object}\n   */\n  getOption: function () {\n    var option = clone(this.option);\n    each(option, function (opts, mainType) {\n      if (ComponentModel.hasClass(mainType)) {\n        var opts = modelUtil.normalizeToArray(opts);\n\n        for (var i = opts.length - 1; i >= 0; i--) {\n          // Remove options with inner id.\n          if (modelUtil.isIdInner(opts[i])) {\n            opts.splice(i, 1);\n          }\n        }\n\n        option[mainType] = opts;\n      }\n    });\n    delete option[OPTION_INNER_KEY];\n    return option;\n  },\n\n  /**\n   * @return {module:echarts/model/Model}\n   */\n  getTheme: function () {\n    return this._theme;\n  },\n\n  /**\n   * @param {string} mainType\n   * @param {number} [idx=0]\n   * @return {module:echarts/model/Component}\n   */\n  getComponent: function (mainType, idx) {\n    var list = this._componentsMap.get(mainType);\n\n    if (list) {\n      return list[idx || 0];\n    }\n  },\n\n  /**\n   * If none of index and id and name used, return all components with mainType.\n   * @param {Object} condition\n   * @param {string} condition.mainType\n   * @param {string} [condition.subType] If ignore, only query by mainType\n   * @param {number|Array.<number>} [condition.index] Either input index or id or name.\n   * @param {string|Array.<string>} [condition.id] Either input index or id or name.\n   * @param {string|Array.<string>} [condition.name] Either input index or id or name.\n   * @return {Array.<module:echarts/model/Component>}\n   */\n  queryComponents: function (condition) {\n    var mainType = condition.mainType;\n\n    if (!mainType) {\n      return [];\n    }\n\n    var index = condition.index;\n    var id = condition.id;\n    var name = condition.name;\n\n    var cpts = this._componentsMap.get(mainType);\n\n    if (!cpts || !cpts.length) {\n      return [];\n    }\n\n    var result;\n\n    if (index != null) {\n      if (!isArray(index)) {\n        index = [index];\n      }\n\n      result = filter(map(index, function (idx) {\n        return cpts[idx];\n      }), function (val) {\n        return !!val;\n      });\n    } else if (id != null) {\n      var isIdArray = isArray(id);\n      result = filter(cpts, function (cpt) {\n        return isIdArray && indexOf(id, cpt.id) >= 0 || !isIdArray && cpt.id === id;\n      });\n    } else if (name != null) {\n      var isNameArray = isArray(name);\n      result = filter(cpts, function (cpt) {\n        return isNameArray && indexOf(name, cpt.name) >= 0 || !isNameArray && cpt.name === name;\n      });\n    } else {\n      // Return all components with mainType\n      result = cpts.slice();\n    }\n\n    return filterBySubType(result, condition);\n  },\n\n  /**\n   * The interface is different from queryComponents,\n   * which is convenient for inner usage.\n   *\n   * @usage\n   * var result = findComponents(\n   *     {mainType: 'dataZoom', query: {dataZoomId: 'abc'}}\n   * );\n   * var result = findComponents(\n   *     {mainType: 'series', subType: 'pie', query: {seriesName: 'uio'}}\n   * );\n   * var result = findComponents(\n   *     {mainType: 'series',\n   *     filter: function (model, index) {...}}\n   * );\n   * // result like [component0, componnet1, ...]\n   *\n   * @param {Object} condition\n   * @param {string} condition.mainType Mandatory.\n   * @param {string} [condition.subType] Optional.\n   * @param {Object} [condition.query] like {xxxIndex, xxxId, xxxName},\n   *        where xxx is mainType.\n   *        If query attribute is null/undefined or has no index/id/name,\n   *        do not filtering by query conditions, which is convenient for\n   *        no-payload situations or when target of action is global.\n   * @param {Function} [condition.filter] parameter: component, return boolean.\n   * @return {Array.<module:echarts/model/Component>}\n   */\n  findComponents: function (condition) {\n    var query = condition.query;\n    var mainType = condition.mainType;\n    var queryCond = getQueryCond(query);\n    var result = queryCond ? this.queryComponents(queryCond) : this._componentsMap.get(mainType);\n    return doFilter(filterBySubType(result, condition));\n\n    function getQueryCond(q) {\n      var indexAttr = mainType + 'Index';\n      var idAttr = mainType + 'Id';\n      var nameAttr = mainType + 'Name';\n      return q && (q[indexAttr] != null || q[idAttr] != null || q[nameAttr] != null) ? {\n        mainType: mainType,\n        // subType will be filtered finally.\n        index: q[indexAttr],\n        id: q[idAttr],\n        name: q[nameAttr]\n      } : null;\n    }\n\n    function doFilter(res) {\n      return condition.filter ? filter(res, condition.filter) : res;\n    }\n  },\n\n  /**\n   * @usage\n   * eachComponent('legend', function (legendModel, index) {\n   *     ...\n   * });\n   * eachComponent(function (componentType, model, index) {\n   *     // componentType does not include subType\n   *     // (componentType is 'xxx' but not 'xxx.aa')\n   * });\n   * eachComponent(\n   *     {mainType: 'dataZoom', query: {dataZoomId: 'abc'}},\n   *     function (model, index) {...}\n   * );\n   * eachComponent(\n   *     {mainType: 'series', subType: 'pie', query: {seriesName: 'uio'}},\n   *     function (model, index) {...}\n   * );\n   *\n   * @param {string|Object=} mainType When mainType is object, the definition\n   *                                  is the same as the method 'findComponents'.\n   * @param {Function} cb\n   * @param {*} context\n   */\n  eachComponent: function (mainType, cb, context) {\n    var componentsMap = this._componentsMap;\n\n    if (typeof mainType === 'function') {\n      context = cb;\n      cb = mainType;\n      componentsMap.each(function (components, componentType) {\n        each(components, function (component, index) {\n          cb.call(context, componentType, component, index);\n        });\n      });\n    } else if (isString(mainType)) {\n      each(componentsMap.get(mainType), cb, context);\n    } else if (isObject(mainType)) {\n      var queryResult = this.findComponents(mainType);\n      each(queryResult, cb, context);\n    }\n  },\n\n  /**\n   * @param {string} name\n   * @return {Array.<module:echarts/model/Series>}\n   */\n  getSeriesByName: function (name) {\n    var series = this._componentsMap.get('series');\n\n    return filter(series, function (oneSeries) {\n      return oneSeries.name === name;\n    });\n  },\n\n  /**\n   * @param {number} seriesIndex\n   * @return {module:echarts/model/Series}\n   */\n  getSeriesByIndex: function (seriesIndex) {\n    return this._componentsMap.get('series')[seriesIndex];\n  },\n\n  /**\n   * Get series list before filtered by type.\n   * FIXME: rename to getRawSeriesByType?\n   *\n   * @param {string} subType\n   * @return {Array.<module:echarts/model/Series>}\n   */\n  getSeriesByType: function (subType) {\n    var series = this._componentsMap.get('series');\n\n    return filter(series, function (oneSeries) {\n      return oneSeries.subType === subType;\n    });\n  },\n\n  /**\n   * @return {Array.<module:echarts/model/Series>}\n   */\n  getSeries: function () {\n    return this._componentsMap.get('series').slice();\n  },\n\n  /**\n   * @return {number}\n   */\n  getSeriesCount: function () {\n    return this._componentsMap.get('series').length;\n  },\n\n  /**\n   * After filtering, series may be different\n   * frome raw series.\n   *\n   * @param {Function} cb\n   * @param {*} context\n   */\n  eachSeries: function (cb, context) {\n    assertSeriesInitialized(this);\n    each(this._seriesIndices, function (rawSeriesIndex) {\n      var series = this._componentsMap.get('series')[rawSeriesIndex];\n\n      cb.call(context, series, rawSeriesIndex);\n    }, this);\n  },\n\n  /**\n   * Iterate raw series before filtered.\n   *\n   * @param {Function} cb\n   * @param {*} context\n   */\n  eachRawSeries: function (cb, context) {\n    each(this._componentsMap.get('series'), cb, context);\n  },\n\n  /**\n   * After filtering, series may be different.\n   * frome raw series.\n   *\n   * @param {string} subType.\n   * @param {Function} cb\n   * @param {*} context\n   */\n  eachSeriesByType: function (subType, cb, context) {\n    assertSeriesInitialized(this);\n    each(this._seriesIndices, function (rawSeriesIndex) {\n      var series = this._componentsMap.get('series')[rawSeriesIndex];\n\n      if (series.subType === subType) {\n        cb.call(context, series, rawSeriesIndex);\n      }\n    }, this);\n  },\n\n  /**\n   * Iterate raw series before filtered of given type.\n   *\n   * @parma {string} subType\n   * @param {Function} cb\n   * @param {*} context\n   */\n  eachRawSeriesByType: function (subType, cb, context) {\n    return each(this.getSeriesByType(subType), cb, context);\n  },\n\n  /**\n   * @param {module:echarts/model/Series} seriesModel\n   */\n  isSeriesFiltered: function (seriesModel) {\n    assertSeriesInitialized(this);\n    return this._seriesIndicesMap.get(seriesModel.componentIndex) == null;\n  },\n\n  /**\n   * @return {Array.<number>}\n   */\n  getCurrentSeriesIndices: function () {\n    return (this._seriesIndices || []).slice();\n  },\n\n  /**\n   * @param {Function} cb\n   * @param {*} context\n   */\n  filterSeries: function (cb, context) {\n    assertSeriesInitialized(this);\n    var filteredSeries = filter(this._componentsMap.get('series'), cb, context);\n    createSeriesIndices(this, filteredSeries);\n  },\n  restoreData: function (payload) {\n    var componentsMap = this._componentsMap;\n    createSeriesIndices(this, componentsMap.get('series'));\n    var componentTypes = [];\n    componentsMap.each(function (components, componentType) {\n      componentTypes.push(componentType);\n    });\n    ComponentModel.topologicalTravel(componentTypes, ComponentModel.getAllClassMainTypes(), function (componentType, dependencies) {\n      each(componentsMap.get(componentType), function (component) {\n        (componentType !== 'series' || !isNotTargetSeries(component, payload)) && component.restoreData();\n      });\n    });\n  }\n});\n\nfunction isNotTargetSeries(seriesModel, payload) {\n  if (payload) {\n    var index = payload.seiresIndex;\n    var id = payload.seriesId;\n    var name = payload.seriesName;\n    return index != null && seriesModel.componentIndex !== index || id != null && seriesModel.id !== id || name != null && seriesModel.name !== name;\n  }\n}\n/**\n * @inner\n */\n\n\nfunction mergeTheme(option, theme) {\n  // PENDING\n  // NOT use `colorLayer` in theme if option has `color`\n  var notMergeColorLayer = option.color && !option.colorLayer;\n  each(theme, function (themeItem, name) {\n    if (name === 'colorLayer' && notMergeColorLayer) {\n      return;\n    } //  component model  merge  model \n\n\n    if (!ComponentModel.hasClass(name)) {\n      if (typeof themeItem === 'object') {\n        option[name] = !option[name] ? clone(themeItem) : merge(option[name], themeItem, false);\n      } else {\n        if (option[name] == null) {\n          option[name] = themeItem;\n        }\n      }\n    }\n  });\n}\n\nfunction initBase(baseOption) {\n  baseOption = baseOption; // Using OPTION_INNER_KEY to mark that this option can not be used outside,\n  // i.e. `chart.setOption(chart.getModel().option);` is forbiden.\n\n  this.option = {};\n  this.option[OPTION_INNER_KEY] = 1;\n  /**\n   * Init with series: [], in case of calling findSeries method\n   * before series initialized.\n   * @type {Object.<string, Array.<module:echarts/model/Model>>}\n   * @private\n   */\n\n  this._componentsMap = createHashMap({\n    series: []\n  });\n  /**\n   * Mapping between filtered series list and raw series list.\n   * key: filtered series indices, value: raw series indices.\n   * @type {Array.<nubmer>}\n   * @private\n   */\n\n  this._seriesIndices;\n  this._seriesIndicesMap;\n  mergeTheme(baseOption, this._theme.option); // TODO Needs clone when merging to the unexisted property\n\n  merge(baseOption, globalDefault, false);\n  this.mergeOption(baseOption);\n}\n/**\n * @inner\n * @param {Array.<string>|string} types model types\n * @return {Object} key: {string} type, value: {Array.<Object>} models\n */\n\n\nfunction getComponentsByTypes(componentsMap, types) {\n  if (!isArray(types)) {\n    types = types ? [types] : [];\n  }\n\n  var ret = {};\n  each(types, function (type) {\n    ret[type] = (componentsMap.get(type) || []).slice();\n  });\n  return ret;\n}\n/**\n * @inner\n */\n\n\nfunction determineSubType(mainType, newCptOption, existComponent) {\n  var subType = newCptOption.type ? newCptOption.type : existComponent ? existComponent.subType // Use determineSubType only when there is no existComponent.\n  : ComponentModel.determineSubType(mainType, newCptOption); // tooltip, markline, markpoint may always has no subType\n\n  return subType;\n}\n/**\n * @inner\n */\n\n\nfunction createSeriesIndices(ecModel, seriesModels) {\n  ecModel._seriesIndicesMap = createHashMap(ecModel._seriesIndices = map(seriesModels, function (series) {\n    return series.componentIndex;\n  }) || []);\n}\n/**\n * @inner\n */\n\n\nfunction filterBySubType(components, condition) {\n  // Using hasOwnProperty for restrict. Consider\n  // subType is undefined in user payload.\n  return condition.hasOwnProperty('subType') ? filter(components, function (cpt) {\n    return cpt.subType === condition.subType;\n  }) : components;\n}\n/**\n * @inner\n */\n\n\nfunction assertSeriesInitialized(ecModel) {}\n\nmixin(GlobalModel, colorPaletteMixin);\nvar _default = GlobalModel;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar isFunction = _util.isFunction;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction _default(seriesType, defaultSymbolType, legendSymbol) {\n  // Encoding visual for all series include which is filtered for legend drawing\n  return {\n    seriesType: seriesType,\n    // For legend.\n    performRawSeries: true,\n    reset: function (seriesModel, ecModel, api) {\n      var data = seriesModel.getData();\n      var symbolType = seriesModel.get('symbol');\n      var symbolSize = seriesModel.get('symbolSize');\n      var keepAspect = seriesModel.get('symbolKeepAspect');\n      var symbolRotate = seriesModel.get('symbolRotate');\n      var hasSymbolTypeCallback = isFunction(symbolType);\n      var hasSymbolSizeCallback = isFunction(symbolSize);\n      var hasSymbolRotateCallback = isFunction(symbolRotate);\n      var hasCallback = hasSymbolTypeCallback || hasSymbolSizeCallback || hasSymbolRotateCallback;\n      var seriesSymbol = !hasSymbolTypeCallback && symbolType ? symbolType : defaultSymbolType;\n      var seriesSymbolSize = !hasSymbolSizeCallback ? symbolSize : null;\n      var seriesSymbolRotate = !hasSymbolRotateCallback ? seriesSymbolRotate : null;\n      data.setVisual({\n        legendSymbol: legendSymbol || seriesSymbol,\n        // If seting callback functions on `symbol` or `symbolSize`, for simplicity and avoiding\n        // to bring trouble, we do not pick a reuslt from one of its calling on data item here,\n        // but just use the default value. Callback on `symbol` or `symbolSize` is convenient in\n        // some cases but generally it is not recommanded.\n        symbol: seriesSymbol,\n        symbolSize: seriesSymbolSize,\n        symbolKeepAspect: keepAspect,\n        symbolRotate: symbolRotate\n      }); // Only visible series has each data be visual encoded\n\n      if (ecModel.isSeriesFiltered(seriesModel)) {\n        return;\n      }\n\n      function dataEach(data, idx) {\n        if (hasCallback) {\n          var rawValue = seriesModel.getRawValue(idx);\n          var params = seriesModel.getDataParams(idx);\n          hasSymbolTypeCallback && data.setItemVisual(idx, 'symbol', symbolType(rawValue, params));\n          hasSymbolSizeCallback && data.setItemVisual(idx, 'symbolSize', symbolSize(rawValue, params));\n          hasSymbolRotateCallback && data.setItemVisual(idx, 'symbolRotate', symbolRotate(rawValue, params));\n        }\n\n        if (data.hasItemOption) {\n          var itemModel = data.getItemModel(idx);\n          var itemSymbolType = itemModel.getShallow('symbol', true);\n          var itemSymbolSize = itemModel.getShallow('symbolSize', true);\n          var itemSymbolRotate = itemModel.getShallow('symbolRotate', true);\n          var itemSymbolKeepAspect = itemModel.getShallow('symbolKeepAspect', true); // If has item symbol\n\n          if (itemSymbolType != null) {\n            data.setItemVisual(idx, 'symbol', itemSymbolType);\n          }\n\n          if (itemSymbolSize != null) {\n            // PENDING Transform symbolSize ?\n            data.setItemVisual(idx, 'symbolSize', itemSymbolSize);\n          }\n\n          if (itemSymbolRotate != null) {\n            data.setItemVisual(idx, 'symbolRotate', itemSymbolRotate);\n          }\n\n          if (itemSymbolKeepAspect != null) {\n            data.setItemVisual(idx, 'symbolKeepAspect', itemSymbolKeepAspect);\n          }\n        }\n      }\n\n      return {\n        dataEach: data.hasItemOption || hasCallback ? dataEach : null\n      };\n    }\n  };\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar Text = require(\"zrender/lib/graphic/Text\");\n\nvar graphicUtil = require(\"../../util/graphic\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// import Group from 'zrender/src/container/Group';\nfunction makeStyleCoord(out, zr, zrX, zrY) {\n  out[0] = zrX;\n  out[1] = zrY;\n  out[2] = out[0] / zr.getWidth(); // The ratio of left to width\n\n  out[3] = out[1] / zr.getHeight(); // The ratio of top to height\n}\n/**\n * @alias module:echarts/component/tooltip/TooltipRichContent\n * @constructor\n */\n\n\nfunction TooltipRichContent(api) {\n  var zr = this._zr = api.getZr();\n  this._styleCoord = [0, 0, 0, 0]; // [left, top, left/width, top/height]\n\n  makeStyleCoord(this._styleCoord, zr, api.getWidth() / 2, api.getHeight() / 2);\n  this._show = false;\n  /**\n   * @private\n   */\n\n  this._hideTimeout;\n}\n\nTooltipRichContent.prototype = {\n  constructor: TooltipRichContent,\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  _enterable: true,\n\n  /**\n   * Update when tooltip is rendered\n   */\n  update: function (tooltipModel) {\n    var alwaysShowContent = tooltipModel.get('alwaysShowContent');\n    alwaysShowContent && this._moveTooltipIfResized();\n  },\n\n  /**\n   * when `alwaysShowContent` is true,\n   * we should move the tooltip after chart resized\n   */\n  _moveTooltipIfResized: function () {\n    var ratioX = this._styleCoord[2]; // The ratio of left to width\n\n    var ratioY = this._styleCoord[3]; // The ratio of top to height\n\n    var realX = ratioX * this._zr.getWidth();\n\n    var realY = ratioY * this._zr.getHeight();\n\n    this.moveTo(realX, realY);\n  },\n  show: function (tooltipModel) {\n    if (this._hideTimeout) {\n      clearTimeout(this._hideTimeout);\n    }\n\n    this.el.attr('show', true);\n    this._show = true;\n  },\n\n  /**\n   * Set tooltip content\n   *\n   * @param {string} content rich text string of content\n   * @param {Object} markerRich rich text style\n   * @param {Object} tooltipModel tooltip model\n   */\n  setContent: function (content, markerRich, tooltipModel) {\n    if (this.el) {\n      this._zr.remove(this.el);\n    }\n\n    var markers = {};\n    var text = content;\n    var prefix = '{marker';\n    var suffix = '|}';\n    var startId = text.indexOf(prefix);\n\n    while (startId >= 0) {\n      var endId = text.indexOf(suffix);\n      var name = text.substr(startId + prefix.length, endId - startId - prefix.length);\n\n      if (name.indexOf('sub') > -1) {\n        markers['marker' + name] = {\n          textWidth: 4,\n          textHeight: 4,\n          textBorderRadius: 2,\n          textBackgroundColor: markerRich[name],\n          // TODO: textOffset is not implemented for rich text\n          textOffset: [3, 0]\n        };\n      } else {\n        markers['marker' + name] = {\n          textWidth: 10,\n          textHeight: 10,\n          textBorderRadius: 5,\n          textBackgroundColor: markerRich[name]\n        };\n      }\n\n      text = text.substr(endId + 1);\n      startId = text.indexOf('{marker');\n    }\n\n    var textStyleModel = tooltipModel.getModel('textStyle');\n    var fontSize = textStyleModel.get('fontSize');\n    var lineHeight = tooltipModel.get('textLineHeight');\n\n    if (lineHeight == null) {\n      lineHeight = Math.round(fontSize * 3 / 2);\n    }\n\n    this.el = new Text({\n      style: graphicUtil.setTextStyle({}, textStyleModel, {\n        rich: markers,\n        text: content,\n        textBackgroundColor: tooltipModel.get('backgroundColor'),\n        textBorderRadius: tooltipModel.get('borderRadius'),\n        textFill: tooltipModel.get('textStyle.color'),\n        textPadding: tooltipModel.get('padding'),\n        textLineHeight: lineHeight\n      }),\n      z: tooltipModel.get('z')\n    });\n\n    this._zr.add(this.el);\n\n    var self = this;\n    this.el.on('mouseover', function () {\n      // clear the timeout in hideLater and keep showing tooltip\n      if (self._enterable) {\n        clearTimeout(self._hideTimeout);\n        self._show = true;\n      }\n\n      self._inContent = true;\n    });\n    this.el.on('mouseout', function () {\n      if (self._enterable) {\n        if (self._show) {\n          self.hideLater(self._hideDelay);\n        }\n      }\n\n      self._inContent = false;\n    });\n  },\n  setEnterable: function (enterable) {\n    this._enterable = enterable;\n  },\n  getSize: function () {\n    var bounding = this.el.getBoundingRect();\n    return [bounding.width, bounding.height];\n  },\n  moveTo: function (x, y) {\n    if (this.el) {\n      var styleCoord = this._styleCoord;\n      makeStyleCoord(styleCoord, this._zr, x, y);\n      this.el.attr('position', [styleCoord[0], styleCoord[1]]);\n    }\n  },\n  hide: function () {\n    if (this.el) {\n      this.el.hide();\n    }\n\n    this._show = false;\n  },\n  hideLater: function (time) {\n    if (this._show && !(this._inContent && this._enterable)) {\n      if (time) {\n        this._hideDelay = time; // Set show false to avoid invoke hideLater multiple times\n\n        this._show = false;\n        this._hideTimeout = setTimeout(zrUtil.bind(this.hide, this), time);\n      } else {\n        this.hide();\n      }\n    }\n  },\n  isShow: function () {\n    return this._show;\n  },\n  dispose: function () {\n    clearTimeout(this._hideTimeout);\n\n    if (this.el) {\n      this._zr.remove(this.el);\n    }\n  },\n  getOuterSize: function () {\n    var size = this.getSize();\n    return {\n      width: size[0],\n      height: size[1]\n    };\n  }\n};\nvar _default = TooltipRichContent;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar echartsAPIList = ['getDom', 'getZr', 'getWidth', 'getHeight', 'getDevicePixelRatio', 'dispatchAction', 'isDisposed', 'on', 'off', 'getDataURL', 'getConnectedDataURL', 'getModel', 'getOption', 'getViewOfComponentModel', 'getViewOfSeriesModel']; // And `getCoordinateSystems` and `getComponentByElement` will be injected in echarts.js\n\nfunction ExtensionAPI(chartInstance) {\n  zrUtil.each(echartsAPIList, function (name) {\n    this[name] = zrUtil.bind(chartInstance[name], chartInstance);\n  }, this);\n}\n\nvar _default = ExtensionAPI;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar Model = require(\"../../model/Model\");\n\nvar _model = require(\"../../util/model\");\n\nvar isNameSpecified = _model.isNameSpecified;\n\nvar lang = require(\"../../lang\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar langSelector = lang.legend.selector;\nvar defaultSelectorOption = {\n  all: {\n    type: 'all',\n    title: zrUtil.clone(langSelector.all)\n  },\n  inverse: {\n    type: 'inverse',\n    title: zrUtil.clone(langSelector.inverse)\n  }\n};\nvar LegendModel = echarts.extendComponentModel({\n  type: 'legend.plain',\n  dependencies: ['series'],\n  layoutMode: {\n    type: 'box',\n    // legend.width/height are maxWidth/maxHeight actually,\n    // whereas realy width/height is calculated by its content.\n    // (Setting {left: 10, right: 10} does not make sense).\n    // So consider the case:\n    // `setOption({legend: {left: 10});`\n    // then `setOption({legend: {right: 10});`\n    // The previous `left` should be cleared by setting `ignoreSize`.\n    ignoreSize: true\n  },\n  init: function (option, parentModel, ecModel) {\n    this.mergeDefaultAndTheme(option, ecModel);\n    option.selected = option.selected || {};\n\n    this._updateSelector(option);\n  },\n  mergeOption: function (option) {\n    LegendModel.superCall(this, 'mergeOption', option);\n\n    this._updateSelector(option);\n  },\n  _updateSelector: function (option) {\n    var selector = option.selector;\n\n    if (selector === true) {\n      selector = option.selector = ['all', 'inverse'];\n    }\n\n    if (zrUtil.isArray(selector)) {\n      zrUtil.each(selector, function (item, index) {\n        zrUtil.isString(item) && (item = {\n          type: item\n        });\n        selector[index] = zrUtil.merge(item, defaultSelectorOption[item.type]);\n      });\n    }\n  },\n  optionUpdated: function () {\n    this._updateData(this.ecModel);\n\n    var legendData = this._data; // If selectedMode is single, try to select one\n\n    if (legendData[0] && this.get('selectedMode') === 'single') {\n      var hasSelected = false; // If has any selected in option.selected\n\n      for (var i = 0; i < legendData.length; i++) {\n        var name = legendData[i].get('name');\n\n        if (this.isSelected(name)) {\n          // Force to unselect others\n          this.select(name);\n          hasSelected = true;\n          break;\n        }\n      } // Try select the first if selectedMode is single\n\n\n      !hasSelected && this.select(legendData[0].get('name'));\n    }\n  },\n  _updateData: function (ecModel) {\n    var potentialData = [];\n    var availableNames = [];\n    ecModel.eachRawSeries(function (seriesModel) {\n      var seriesName = seriesModel.name;\n      availableNames.push(seriesName);\n      var isPotential;\n\n      if (seriesModel.legendVisualProvider) {\n        var provider = seriesModel.legendVisualProvider;\n        var names = provider.getAllNames();\n\n        if (!ecModel.isSeriesFiltered(seriesModel)) {\n          availableNames = availableNames.concat(names);\n        }\n\n        if (names.length) {\n          potentialData = potentialData.concat(names);\n        } else {\n          isPotential = true;\n        }\n      } else {\n        isPotential = true;\n      }\n\n      if (isPotential && isNameSpecified(seriesModel)) {\n        potentialData.push(seriesModel.name);\n      }\n    });\n    /**\n     * @type {Array.<string>}\n     * @private\n     */\n\n    this._availableNames = availableNames; // If legend.data not specified in option, use availableNames as data,\n    // which is convinient for user preparing option.\n\n    var rawData = this.get('data') || potentialData;\n    var legendData = zrUtil.map(rawData, function (dataItem) {\n      // Can be string or number\n      if (typeof dataItem === 'string' || typeof dataItem === 'number') {\n        dataItem = {\n          name: dataItem\n        };\n      }\n\n      return new Model(dataItem, this, this.ecModel);\n    }, this);\n    /**\n     * @type {Array.<module:echarts/model/Model>}\n     * @private\n     */\n\n    this._data = legendData;\n  },\n\n  /**\n   * @return {Array.<module:echarts/model/Model>}\n   */\n  getData: function () {\n    return this._data;\n  },\n\n  /**\n   * @param {string} name\n   */\n  select: function (name) {\n    var selected = this.option.selected;\n    var selectedMode = this.get('selectedMode');\n\n    if (selectedMode === 'single') {\n      var data = this._data;\n      zrUtil.each(data, function (dataItem) {\n        selected[dataItem.get('name')] = false;\n      });\n    }\n\n    selected[name] = true;\n  },\n\n  /**\n   * @param {string} name\n   */\n  unSelect: function (name) {\n    if (this.get('selectedMode') !== 'single') {\n      this.option.selected[name] = false;\n    }\n  },\n\n  /**\n   * @param {string} name\n   */\n  toggleSelected: function (name) {\n    var selected = this.option.selected; // Default is true\n\n    if (!selected.hasOwnProperty(name)) {\n      selected[name] = true;\n    }\n\n    this[selected[name] ? 'unSelect' : 'select'](name);\n  },\n  allSelect: function () {\n    var data = this._data;\n    var selected = this.option.selected;\n    zrUtil.each(data, function (dataItem) {\n      selected[dataItem.get('name', true)] = true;\n    });\n  },\n  inverseSelect: function () {\n    var data = this._data;\n    var selected = this.option.selected;\n    zrUtil.each(data, function (dataItem) {\n      var name = dataItem.get('name', true); // Initially, default value is true\n\n      if (!selected.hasOwnProperty(name)) {\n        selected[name] = true;\n      }\n\n      selected[name] = !selected[name];\n    });\n  },\n\n  /**\n   * @param {string} name\n   */\n  isSelected: function (name) {\n    var selected = this.option.selected;\n    return !(selected.hasOwnProperty(name) && !selected[name]) && zrUtil.indexOf(this._availableNames, name) >= 0;\n  },\n  getOrient: function () {\n    return this.get('orient') === 'vertical' ? {\n      index: 1,\n      name: 'vertical'\n    } : {\n      index: 0,\n      name: 'horizontal'\n    };\n  },\n  defaultOption: {\n    // \n    zlevel: 0,\n    // \n    z: 4,\n    show: true,\n    // \n    // 'horizontal' | 'vertical'\n    orient: 'horizontal',\n    left: 'center',\n    // right: 'center',\n    top: 0,\n    // bottom: null,\n    // \n    // 'auto' | 'left' | 'right'\n    //  'auto',  x \n    align: 'auto',\n    backgroundColor: 'rgba(0,0,0,0)',\n    // \n    borderColor: '#ccc',\n    borderRadius: 0,\n    // px0\n    borderWidth: 0,\n    // px5\n    // css\n    padding: 5,\n    // itempx10\n    // \n    itemGap: 10,\n    // the width of legend symbol\n    itemWidth: 25,\n    // the height of legend symbol\n    itemHeight: 14,\n    // the color of unselected legend symbol\n    inactiveColor: '#ccc',\n    // the borderColor of unselected legend symbol\n    inactiveBorderColor: '#ccc',\n    itemStyle: {\n      // the default borderWidth of legend symbol\n      borderWidth: 0\n    },\n    textStyle: {\n      // \n      color: '#333'\n    },\n    // formatter: '',\n    // \n    selectedMode: true,\n    // LEGEND.SELECTED\n    // selected: null,\n    // legend.dataitem\n    // data: [],\n    // Usage:\n    // selector: [{type: 'all or inverse', title: xxx}]\n    // or\n    // selector: true\n    // or\n    // selector: ['all', 'inverse']\n    selector: false,\n    selectorLabel: {\n      show: true,\n      borderRadius: 10,\n      padding: [3, 5, 3, 5],\n      fontSize: 12,\n      fontFamily: ' sans-serif',\n      color: '#666',\n      borderWidth: 1,\n      borderColor: '#666'\n    },\n    emphasis: {\n      selectorLabel: {\n        show: true,\n        color: '#eee',\n        backgroundColor: '#666'\n      }\n    },\n    // Value can be 'start' or 'end'\n    selectorPosition: 'auto',\n    selectorItemGap: 7,\n    selectorButtonGap: 10,\n    // Tooltip \n    tooltip: {\n      show: false\n    }\n  }\n});\nvar _default = LegendModel;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar map = _util.map;\n\nvar createRenderPlanner = require(\"../chart/helper/createRenderPlanner\");\n\nvar _dataStackHelper = require(\"../data/helper/dataStackHelper\");\n\nvar isDimensionStacked = _dataStackHelper.isDimensionStacked;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/* global Float32Array */\nfunction _default(seriesType) {\n  return {\n    seriesType: seriesType,\n    plan: createRenderPlanner(),\n    reset: function (seriesModel) {\n      var data = seriesModel.getData();\n      var coordSys = seriesModel.coordinateSystem;\n      var pipelineContext = seriesModel.pipelineContext;\n      var isLargeRender = pipelineContext.large;\n\n      if (!coordSys) {\n        return;\n      }\n\n      var dims = map(coordSys.dimensions, function (dim) {\n        return data.mapDimension(dim);\n      }).slice(0, 2);\n      var dimLen = dims.length;\n      var stackResultDim = data.getCalculationInfo('stackResultDimension');\n\n      if (isDimensionStacked(data, dims[0]\n      /*, dims[1]*/\n      )) {\n        dims[0] = stackResultDim;\n      }\n\n      if (isDimensionStacked(data, dims[1]\n      /*, dims[0]*/\n      )) {\n        dims[1] = stackResultDim;\n      }\n\n      function progress(params, data) {\n        var segCount = params.end - params.start;\n        var points = isLargeRender && new Float32Array(segCount * dimLen);\n\n        for (var i = params.start, offset = 0, tmpIn = [], tmpOut = []; i < params.end; i++) {\n          var point;\n\n          if (dimLen === 1) {\n            var x = data.get(dims[0], i);\n            point = !isNaN(x) && coordSys.dataToPoint(x, null, tmpOut);\n          } else {\n            var x = tmpIn[0] = data.get(dims[0], i);\n            var y = tmpIn[1] = data.get(dims[1], i); // Also {Array.<number>}, not undefined to avoid if...else... statement\n\n            point = !isNaN(x) && !isNaN(y) && coordSys.dataToPoint(tmpIn, null, tmpOut);\n          }\n\n          if (isLargeRender) {\n            points[offset++] = point ? point[0] : NaN;\n            points[offset++] = point ? point[1] : NaN;\n          } else {\n            data.setItemLayout(i, point && point.slice() || [NaN, NaN]);\n          }\n        }\n\n        isLargeRender && data.setLayout('symbolPoints', points);\n      }\n\n      return dimLen && {\n        progress: progress\n      };\n    }\n  };\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar _clazz = require(\"./clazz\");\n\nvar parseClassType = _clazz.parseClassType;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar base = 0;\n/**\n * @public\n * @param {string} type\n * @return {string}\n */\n\nfunction getUID(type) {\n  // Considering the case of crossing js context,\n  // use Math.random to make id as unique as possible.\n  return [type || '', base++, Math.random().toFixed(5)].join('_');\n}\n/**\n * @inner\n */\n\n\nfunction enableSubTypeDefaulter(entity) {\n  var subTypeDefaulters = {};\n\n  entity.registerSubTypeDefaulter = function (componentType, defaulter) {\n    componentType = parseClassType(componentType);\n    subTypeDefaulters[componentType.main] = defaulter;\n  };\n\n  entity.determineSubType = function (componentType, option) {\n    var type = option.type;\n\n    if (!type) {\n      var componentTypeMain = parseClassType(componentType).main;\n\n      if (entity.hasSubTypes(componentType) && subTypeDefaulters[componentTypeMain]) {\n        type = subTypeDefaulters[componentTypeMain](option);\n      }\n    }\n\n    return type;\n  };\n\n  return entity;\n}\n/**\n * Topological travel on Activity Network (Activity On Vertices).\n * Dependencies is defined in Model.prototype.dependencies, like ['xAxis', 'yAxis'].\n *\n * If 'xAxis' or 'yAxis' is absent in componentTypeList, just ignore it in topology.\n *\n * If there is circle dependencey, Error will be thrown.\n *\n */\n\n\nfunction enableTopologicalTravel(entity, dependencyGetter) {\n  /**\n   * @public\n   * @param {Array.<string>} targetNameList Target Component type list.\n   *                                           Can be ['aa', 'bb', 'aa.xx']\n   * @param {Array.<string>} fullNameList By which we can build dependency graph.\n   * @param {Function} callback Params: componentType, dependencies.\n   * @param {Object} context Scope of callback.\n   */\n  entity.topologicalTravel = function (targetNameList, fullNameList, callback, context) {\n    if (!targetNameList.length) {\n      return;\n    }\n\n    var result = makeDepndencyGraph(fullNameList);\n    var graph = result.graph;\n    var stack = result.noEntryList;\n    var targetNameSet = {};\n    zrUtil.each(targetNameList, function (name) {\n      targetNameSet[name] = true;\n    });\n\n    while (stack.length) {\n      var currComponentType = stack.pop();\n      var currVertex = graph[currComponentType];\n      var isInTargetNameSet = !!targetNameSet[currComponentType];\n\n      if (isInTargetNameSet) {\n        callback.call(context, currComponentType, currVertex.originalDeps.slice());\n        delete targetNameSet[currComponentType];\n      }\n\n      zrUtil.each(currVertex.successor, isInTargetNameSet ? removeEdgeAndAdd : removeEdge);\n    }\n\n    zrUtil.each(targetNameSet, function () {\n      throw new Error('Circle dependency may exists');\n    });\n\n    function removeEdge(succComponentType) {\n      graph[succComponentType].entryCount--;\n\n      if (graph[succComponentType].entryCount === 0) {\n        stack.push(succComponentType);\n      }\n    } // Consider this case: legend depends on series, and we call\n    // chart.setOption({series: [...]}), where only series is in option.\n    // If we do not have 'removeEdgeAndAdd', legendModel.mergeOption will\n    // not be called, but only sereis.mergeOption is called. Thus legend\n    // have no chance to update its local record about series (like which\n    // name of series is available in legend).\n\n\n    function removeEdgeAndAdd(succComponentType) {\n      targetNameSet[succComponentType] = true;\n      removeEdge(succComponentType);\n    }\n  };\n  /**\n   * DepndencyGraph: {Object}\n   * key: conponentType,\n   * value: {\n   *     successor: [conponentTypes...],\n   *     originalDeps: [conponentTypes...],\n   *     entryCount: {number}\n   * }\n   */\n\n\n  function makeDepndencyGraph(fullNameList) {\n    var graph = {};\n    var noEntryList = [];\n    zrUtil.each(fullNameList, function (name) {\n      var thisItem = createDependencyGraphItem(graph, name);\n      var originalDeps = thisItem.originalDeps = dependencyGetter(name);\n      var availableDeps = getAvailableDependencies(originalDeps, fullNameList);\n      thisItem.entryCount = availableDeps.length;\n\n      if (thisItem.entryCount === 0) {\n        noEntryList.push(name);\n      }\n\n      zrUtil.each(availableDeps, function (dependentName) {\n        if (zrUtil.indexOf(thisItem.predecessor, dependentName) < 0) {\n          thisItem.predecessor.push(dependentName);\n        }\n\n        var thatItem = createDependencyGraphItem(graph, dependentName);\n\n        if (zrUtil.indexOf(thatItem.successor, dependentName) < 0) {\n          thatItem.successor.push(name);\n        }\n      });\n    });\n    return {\n      graph: graph,\n      noEntryList: noEntryList\n    };\n  }\n\n  function createDependencyGraphItem(graph, name) {\n    if (!graph[name]) {\n      graph[name] = {\n        predecessor: [],\n        successor: []\n      };\n    }\n\n    return graph[name];\n  }\n\n  function getAvailableDependencies(originalDeps, fullNameList) {\n    var availableDeps = [];\n    zrUtil.each(originalDeps, function (dep) {\n      zrUtil.indexOf(fullNameList, dep) >= 0 && availableDeps.push(dep);\n    });\n    return availableDeps;\n  }\n}\n\nexports.getUID = getUID;\nexports.enableSubTypeDefaulter = enableSubTypeDefaulter;\nexports.enableTopologicalTravel = enableTopologicalTravel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar platform = ''; // Navigator not exists in node\n\nif (typeof navigator !== 'undefined') {\n  platform = navigator.platform || '';\n}\n\nvar _default = {\n  // backgroundColor: 'rgba(0,0,0,0)',\n  // https://dribbble.com/shots/1065960-Infographic-Pie-chart-visualization\n  // color: ['#5793f3', '#d14a61', '#fd9c35', '#675bba', '#fec42c', '#dd4444', '#d4df5a', '#cd4870'],\n  // Light colors:\n  // color: ['#bcd3bb', '#e88f70', '#edc1a5', '#9dc5c8', '#e1e8c8', '#7b7c68', '#e5b5b5', '#f0b489', '#928ea8', '#bda29a'],\n  // color: ['#cc5664', '#9bd6ec', '#ea946e', '#8acaaa', '#f1ec64', '#ee8686', '#a48dc1', '#5da6bc', '#b9dcae'],\n  // Dark colors:\n  color: ['#c23531', '#2f4554', '#61a0a8', '#d48265', '#91c7ae', '#749f83', '#ca8622', '#bda29a', '#6e7074', '#546570', '#c4ccd3'],\n  gradientColor: ['#f6efa6', '#d88273', '#bf444c'],\n  // If xAxis and yAxis declared, grid is created by default.\n  // grid: {},\n  textStyle: {\n    // color: '#000',\n    // decoration: 'none',\n    // PENDING\n    fontFamily: platform.match(/^Win/) ? 'Microsoft YaHei' : 'sans-serif',\n    // fontFamily: 'Arial, Verdana, sans-serif',\n    fontSize: 12,\n    fontStyle: 'normal',\n    fontWeight: 'normal'\n  },\n  // http://blogs.adobe.com/webplatform/2014/02/24/using-blend-modes-in-html-canvas/\n  // https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/globalCompositeOperation\n  // Default is source-over\n  blendMode: null,\n  animation: 'auto',\n  animationDuration: 1000,\n  animationDurationUpdate: 300,\n  animationEasing: 'exponentialOut',\n  animationEasingUpdate: 'cubicOut',\n  animationThreshold: 2000,\n  // Configuration for progressive/incremental rendering\n  progressiveThreshold: 3000,\n  progressive: 400,\n  // Threshold of if use single hover layer to optimize.\n  // It is recommended that `hoverLayerThreshold` is equivalent to or less than\n  // `progressiveThreshold`, otherwise hover will cause restart of progressive,\n  // which is unexpected.\n  // see example <echarts/test/heatmap-large.html>.\n  hoverLayerThreshold: 3000,\n  // See: module:echarts/scale/Time\n  useUTC: false\n};\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nrequire(\"./AxisModel\");\n\nvar ComponentModel = require(\"../../model/Component\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Grid \n//  Cartesian2D \nvar _default = ComponentModel.extend({\n  type: 'grid',\n  dependencies: ['xAxis', 'yAxis'],\n  layoutMode: 'box',\n\n  /**\n   * @type {module:echarts/coord/cartesian/Grid}\n   */\n  coordinateSystem: null,\n  defaultOption: {\n    show: false,\n    zlevel: 0,\n    z: 0,\n    left: '10%',\n    top: 60,\n    right: '10%',\n    bottom: 60,\n    // If grid size contain label\n    containLabel: false,\n    // width: {totalWidth} - left - right,\n    // height: {totalHeight} - top - bottom,\n    backgroundColor: 'rgba(0,0,0,0)',\n    borderWidth: 1,\n    borderColor: '#ccc'\n  }\n});\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction _default(ecModel) {\n  var legendModels = ecModel.findComponents({\n    mainType: 'legend'\n  });\n\n  if (legendModels && legendModels.length) {\n    ecModel.filterSeries(function (series) {\n      // If in any legend component the status is not selected.\n      // Because in legend series is assumed selected when it is not in the legend data.\n      for (var i = 0; i < legendModels.length; i++) {\n        if (!legendModels[i].isSelected(series.name)) {\n          return false;\n        }\n      }\n\n      return true;\n    });\n  }\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../util/graphic\");\n\nvar textContain = require(\"zrender/lib/contain/text\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar PI = Math.PI;\n/**\n * @param {module:echarts/ExtensionAPI} api\n * @param {Object} [opts]\n * @param {string} [opts.text]\n * @param {string} [opts.color]\n * @param {string} [opts.textColor]\n * @return {module:zrender/Element}\n */\n\nfunction _default(api, opts) {\n  opts = opts || {};\n  zrUtil.defaults(opts, {\n    text: 'loading',\n    textColor: '#000',\n    fontSize: '12px',\n    maskColor: 'rgba(255, 255, 255, 0.8)',\n    showSpinner: true,\n    color: '#c23531',\n    spinnerRadius: 10,\n    lineWidth: 5,\n    zlevel: 0\n  });\n  var group = new graphic.Group();\n  var mask = new graphic.Rect({\n    style: {\n      fill: opts.maskColor\n    },\n    zlevel: opts.zlevel,\n    z: 10000\n  });\n  group.add(mask);\n  var font = opts.fontSize + ' sans-serif';\n  var labelRect = new graphic.Rect({\n    style: {\n      fill: 'none',\n      text: opts.text,\n      font: font,\n      textPosition: 'right',\n      textDistance: 10,\n      textFill: opts.textColor\n    },\n    zlevel: opts.zlevel,\n    z: 10001\n  });\n  group.add(labelRect);\n\n  if (opts.showSpinner) {\n    var arc = new graphic.Arc({\n      shape: {\n        startAngle: -PI / 2,\n        endAngle: -PI / 2 + 0.1,\n        r: opts.spinnerRadius\n      },\n      style: {\n        stroke: opts.color,\n        lineCap: 'round',\n        lineWidth: opts.lineWidth\n      },\n      zlevel: opts.zlevel,\n      z: 10001\n    });\n    arc.animateShape(true).when(1000, {\n      endAngle: PI * 3 / 2\n    }).start('circularInOut');\n    arc.animateShape(true).when(1000, {\n      startAngle: PI * 3 / 2\n    }).delay(300).start('circularInOut');\n    group.add(arc);\n  } // Inject resize\n\n\n  group.resize = function () {\n    var textWidth = textContain.getWidth(opts.text, font);\n    var r = opts.showSpinner ? opts.spinnerRadius : 0; // cx = (containerWidth - arcDiameter - textDistance - textWidth) / 2\n    // textDistance needs to be calculated when both animation and text exist\n\n    var cx = (api.getWidth() - r * 2 - (opts.showSpinner && textWidth ? 10 : 0) - textWidth) / 2 // only show the text\n    - (opts.showSpinner ? 0 : textWidth / 2);\n    var cy = api.getHeight() / 2;\n    opts.showSpinner && arc.setShape({\n      cx: cx,\n      cy: cy\n    });\n    labelRect.setShape({\n      x: cx - r,\n      y: cy - r,\n      width: r * 2,\n      height: r * 2\n    });\n    mask.setShape({\n      x: 0,\n      y: 0,\n      width: api.getWidth(),\n      height: api.getHeight()\n    });\n  };\n\n  group.resize();\n  return group;\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar axisDefault = require(\"./axisDefault\");\n\nvar ComponentModel = require(\"../model/Component\");\n\nvar _layout = require(\"../util/layout\");\n\nvar getLayoutParams = _layout.getLayoutParams;\nvar mergeLayoutParam = _layout.mergeLayoutParam;\n\nvar OrdinalMeta = require(\"../data/OrdinalMeta\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// FIXME axisType is fixed ?\nvar AXIS_TYPES = ['value', 'category', 'time', 'log'];\n/**\n * Generate sub axis model class\n * @param {string} axisName 'x' 'y' 'radius' 'angle' 'parallel'\n * @param {module:echarts/model/Component} BaseAxisModelClass\n * @param {Function} axisTypeDefaulter\n * @param {Object} [extraDefaultOption]\n */\n\nfunction _default(axisName, BaseAxisModelClass, axisTypeDefaulter, extraDefaultOption) {\n  zrUtil.each(AXIS_TYPES, function (axisType) {\n    BaseAxisModelClass.extend({\n      /**\n       * @readOnly\n       */\n      type: axisName + 'Axis.' + axisType,\n      mergeDefaultAndTheme: function (option, ecModel) {\n        var layoutMode = this.layoutMode;\n        var inputPositionParams = layoutMode ? getLayoutParams(option) : {};\n        var themeModel = ecModel.getTheme();\n        zrUtil.merge(option, themeModel.get(axisType + 'Axis'));\n        zrUtil.merge(option, this.getDefaultOption());\n        option.type = axisTypeDefaulter(axisName, option);\n\n        if (layoutMode) {\n          mergeLayoutParam(option, inputPositionParams, layoutMode);\n        }\n      },\n\n      /**\n       * @override\n       */\n      optionUpdated: function () {\n        var thisOption = this.option;\n\n        if (thisOption.type === 'category') {\n          this.__ordinalMeta = OrdinalMeta.createByAxisModel(this);\n        }\n      },\n\n      /**\n       * Should not be called before all of 'getInitailData' finished.\n       * Because categories are collected during initializing data.\n       */\n      getCategories: function (rawData) {\n        var option = this.option; // FIXME\n        // warning if called before all of 'getInitailData' finished.\n\n        if (option.type === 'category') {\n          if (rawData) {\n            return option.data;\n          }\n\n          return this.__ordinalMeta.categories;\n        }\n      },\n      getOrdinalMeta: function () {\n        return this.__ordinalMeta;\n      },\n      defaultOption: zrUtil.mergeAll([{}, axisDefault[axisType + 'Axis'], extraDefaultOption], true)\n    });\n  });\n  ComponentModel.registerSubTypeDefaulter(axisName + 'Axis', zrUtil.curry(axisTypeDefaulter, axisName));\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _dataStackHelper = require(\"../../data/helper/dataStackHelper\");\n\nvar isDimensionStacked = _dataStackHelper.isDimensionStacked;\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar map = _util.map;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @param {Object} coordSys\n * @param {module:echarts/data/List} data\n * @param {string} valueOrigin lineSeries.option.areaStyle.origin\n */\nfunction prepareDataCoordInfo(coordSys, data, valueOrigin) {\n  var baseAxis = coordSys.getBaseAxis();\n  var valueAxis = coordSys.getOtherAxis(baseAxis);\n  var valueStart = getValueStart(valueAxis, valueOrigin);\n  var baseAxisDim = baseAxis.dim;\n  var valueAxisDim = valueAxis.dim;\n  var valueDim = data.mapDimension(valueAxisDim);\n  var baseDim = data.mapDimension(baseAxisDim);\n  var baseDataOffset = valueAxisDim === 'x' || valueAxisDim === 'radius' ? 1 : 0;\n  var dims = map(coordSys.dimensions, function (coordDim) {\n    return data.mapDimension(coordDim);\n  });\n  var stacked;\n  var stackResultDim = data.getCalculationInfo('stackResultDimension');\n\n  if (stacked |= isDimensionStacked(data, dims[0]\n  /*, dims[1]*/\n  )) {\n    // jshint ignore:line\n    dims[0] = stackResultDim;\n  }\n\n  if (stacked |= isDimensionStacked(data, dims[1]\n  /*, dims[0]*/\n  )) {\n    // jshint ignore:line\n    dims[1] = stackResultDim;\n  }\n\n  return {\n    dataDimsForPoint: dims,\n    valueStart: valueStart,\n    valueAxisDim: valueAxisDim,\n    baseAxisDim: baseAxisDim,\n    stacked: !!stacked,\n    valueDim: valueDim,\n    baseDim: baseDim,\n    baseDataOffset: baseDataOffset,\n    stackedOverDimension: data.getCalculationInfo('stackedOverDimension')\n  };\n}\n\nfunction getValueStart(valueAxis, valueOrigin) {\n  var valueStart = 0;\n  var extent = valueAxis.scale.getExtent();\n\n  if (valueOrigin === 'start') {\n    valueStart = extent[0];\n  } else if (valueOrigin === 'end') {\n    valueStart = extent[1];\n  } // auto\n  else {\n      // Both positive\n      if (extent[0] > 0) {\n        valueStart = extent[0];\n      } // Both negative\n      else if (extent[1] < 0) {\n          valueStart = extent[1];\n        } // If is one positive, and one negative, onZero shall be true\n\n    }\n\n  return valueStart;\n}\n\nfunction getStackedOnPoint(dataCoordInfo, coordSys, data, idx) {\n  var value = NaN;\n\n  if (dataCoordInfo.stacked) {\n    value = data.get(data.getCalculationInfo('stackedOverDimension'), idx);\n  }\n\n  if (isNaN(value)) {\n    value = dataCoordInfo.valueStart;\n  }\n\n  var baseDataOffset = dataCoordInfo.baseDataOffset;\n  var stackedData = [];\n  stackedData[baseDataOffset] = data.get(dataCoordInfo.baseDim, idx);\n  stackedData[1 - baseDataOffset] = value;\n  return coordSys.dataToPoint(stackedData);\n}\n\nexports.prepareDataCoordInfo = prepareDataCoordInfo;\nexports.getStackedOnPoint = getStackedOnPoint;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _default = echarts.extendComponentModel({\n  type: 'tooltip',\n  dependencies: ['axisPointer'],\n  defaultOption: {\n    zlevel: 0,\n    z: 60,\n    show: true,\n    // tooltip\n    showContent: true,\n    // 'trigger' only works on coordinate system.\n    // 'item' | 'axis' | 'none'\n    trigger: 'item',\n    // 'click' | 'mousemove' | 'none'\n    triggerOn: 'mousemove|click',\n    alwaysShowContent: false,\n    displayMode: 'single',\n    // 'single' | 'multipleByCoordSys'\n    renderMode: 'auto',\n    // 'auto' | 'html' | 'richText'\n    // 'auto': use html by default, and use non-html if `document` is not defined\n    // 'html': use html for tooltip\n    // 'richText': use canvas, svg, and etc. for tooltip\n    //  {Array} | {Function}\n    // position: null\n    // Consider triggered from axisPointer handle, verticalAlign should be 'middle'\n    // align: null,\n    // verticalAlign: null,\n    //  content  viewRect  false \n    confine: false,\n    // {string}Template  {Function}\n    // formatter: null\n    showDelay: 0,\n    // ms\n    hideDelay: 100,\n    // s\n    transitionDuration: 0.4,\n    enterable: false,\n    // 0.7\n    backgroundColor: 'rgba(50,50,50,0.7)',\n    // \n    borderColor: '#333',\n    // px4\n    borderRadius: 4,\n    // px0\n    borderWidth: 0,\n    // px5\n    // css\n    padding: 5,\n    // Extra css text\n    extraCssText: '',\n    // \n    axisPointer: {\n      // \n      // 'line' | 'shadow' | 'cross'\n      type: 'line',\n      // type  line  tooltip line \n      //  'x' | 'y' | 'angle' | 'radius' | 'auto'\n      //  'auto' category  x \n      //  angle \n      axis: 'auto',\n      animation: 'auto',\n      animationDurationUpdate: 200,\n      animationEasingUpdate: 'exponentialOut',\n      crossStyle: {\n        color: '#999',\n        width: 1,\n        type: 'dashed',\n        // TODO formatter\n        textStyle: {} // lineStyle and shadowStyle should not be specified here,\n        // otherwise it will always override those styles on option.axisPointer.\n\n      }\n    },\n    textStyle: {\n      color: '#fff',\n      fontSize: 14\n    }\n  }\n});\n\nmodule.exports = _default;","var Path = require(\"../Path\");\n\n/**\n * \n * @module zrender/graphic/shape/Ellipse\n */\nvar _default = Path.extend({\n  type: 'ellipse',\n  shape: {\n    cx: 0,\n    cy: 0,\n    rx: 0,\n    ry: 0\n  },\n  buildPath: function (ctx, shape) {\n    var k = 0.5522848;\n    var x = shape.cx;\n    var y = shape.cy;\n    var a = shape.rx;\n    var b = shape.ry;\n    var ox = a * k; // \n\n    var oy = b * k; // \n    // \n\n    ctx.moveTo(x - a, y);\n    ctx.bezierCurveTo(x - a, y - oy, x - ox, y - b, x, y - b);\n    ctx.bezierCurveTo(x + ox, y - b, x + a, y - oy, x + a, y);\n    ctx.bezierCurveTo(x + a, y + oy, x + ox, y + b, x, y + b);\n    ctx.bezierCurveTo(x - ox, y + b, x - a, y + oy, x - a, y);\n    ctx.closePath();\n  }\n});\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nrequire(\"../coord/cartesian/AxisModel\");\n\nrequire(\"./axis/CartesianAxisView\");","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar graphic = require(\"../../util/graphic\");\n\nvar _number = require(\"../../util/number\");\n\nvar round = _number.round;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction createGridClipPath(cartesian, hasAnimation, seriesModel) {\n  var rect = cartesian.getArea();\n  var isHorizontal = cartesian.getBaseAxis().isHorizontal();\n  var x = rect.x;\n  var y = rect.y;\n  var width = rect.width;\n  var height = rect.height;\n  var lineWidth = seriesModel.get('lineStyle.width') || 2; // Expand the clip path a bit to avoid the border is clipped and looks thinner\n\n  x -= lineWidth / 2;\n  y -= lineWidth / 2;\n  width += lineWidth;\n  height += lineWidth; // fix: https://github.com/apache/incubator-echarts/issues/11369\n\n  x = Math.floor(x);\n  width = Math.round(width);\n  var clipPath = new graphic.Rect({\n    shape: {\n      x: x,\n      y: y,\n      width: width,\n      height: height\n    }\n  });\n\n  if (hasAnimation) {\n    clipPath.shape[isHorizontal ? 'width' : 'height'] = 0;\n    graphic.initProps(clipPath, {\n      shape: {\n        width: width,\n        height: height\n      }\n    }, seriesModel);\n  }\n\n  return clipPath;\n}\n\nfunction createPolarClipPath(polar, hasAnimation, seriesModel) {\n  var sectorArea = polar.getArea(); // Avoid float number rounding error for symbol on the edge of axis extent.\n\n  var clipPath = new graphic.Sector({\n    shape: {\n      cx: round(polar.cx, 1),\n      cy: round(polar.cy, 1),\n      r0: round(sectorArea.r0, 1),\n      r: round(sectorArea.r, 1),\n      startAngle: sectorArea.startAngle,\n      endAngle: sectorArea.endAngle,\n      clockwise: sectorArea.clockwise\n    }\n  });\n\n  if (hasAnimation) {\n    clipPath.shape.endAngle = sectorArea.startAngle;\n    graphic.initProps(clipPath, {\n      shape: {\n        endAngle: sectorArea.endAngle\n      }\n    }, seriesModel);\n  }\n\n  return clipPath;\n}\n\nfunction createClipPath(coordSys, hasAnimation, seriesModel) {\n  if (!coordSys) {\n    return null;\n  } else if (coordSys.type === 'polar') {\n    return createPolarClipPath(coordSys, hasAnimation, seriesModel);\n  } else if (coordSys.type === 'cartesian2d') {\n    return createGridClipPath(coordSys, hasAnimation, seriesModel);\n  }\n\n  return null;\n}\n\nexports.createGridClipPath = createGridClipPath;\nexports.createPolarClipPath = createPolarClipPath;\nexports.createClipPath = createClipPath;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar Group = require(\"zrender/lib/container/Group\");\n\nvar componentUtil = require(\"../util/component\");\n\nvar clazzUtil = require(\"../util/clazz\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar Component = function () {\n  /**\n   * @type {module:zrender/container/Group}\n   * @readOnly\n   */\n  this.group = new Group();\n  /**\n   * @type {string}\n   * @readOnly\n   */\n\n  this.uid = componentUtil.getUID('viewComponent');\n};\n\nComponent.prototype = {\n  constructor: Component,\n  init: function (ecModel, api) {},\n  render: function (componentModel, ecModel, api, payload) {},\n  dispose: function () {},\n\n  /**\n   * @param {string} eventType\n   * @param {Object} query\n   * @param {module:zrender/Element} targetEl\n   * @param {Object} packedEvent\n   * @return {boolen} Pass only when return `true`.\n   */\n  filterForExposedEvent: null\n};\nvar componentProto = Component.prototype;\n\ncomponentProto.updateView = componentProto.updateLayout = componentProto.updateVisual = function (seriesModel, ecModel, api, payload) {// Do nothing;\n}; // Enable Component.extend.\n\n\nclazzUtil.enableClassExtend(Component); // Enable capability of registerClass, getClass, hasClass, registerSubTypeDefaulter and so on.\n\nclazzUtil.enableClassManagement(Component, {\n  registerWhenExtend: true\n});\nvar _default = Component;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar lang = require(\"../lang\");\n\nvar _dataProvider = require(\"../data/helper/dataProvider\");\n\nvar retrieveRawValue = _dataProvider.retrieveRawValue;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction _default(dom, ecModel) {\n  var ariaModel = ecModel.getModel('aria');\n\n  if (!ariaModel.get('show')) {\n    return;\n  } else if (ariaModel.get('description')) {\n    dom.setAttribute('aria-label', ariaModel.get('description'));\n    return;\n  }\n\n  var seriesCnt = 0;\n  ecModel.eachSeries(function (seriesModel, idx) {\n    ++seriesCnt;\n  }, this);\n  var maxDataCnt = ariaModel.get('data.maxCount') || 10;\n  var maxSeriesCnt = ariaModel.get('series.maxCount') || 10;\n  var displaySeriesCnt = Math.min(seriesCnt, maxSeriesCnt);\n  var ariaLabel;\n\n  if (seriesCnt < 1) {\n    // No series, no aria label\n    return;\n  } else {\n    var title = getTitle();\n\n    if (title) {\n      ariaLabel = replace(getConfig('general.withTitle'), {\n        title: title\n      });\n    } else {\n      ariaLabel = getConfig('general.withoutTitle');\n    }\n\n    var seriesLabels = [];\n    var prefix = seriesCnt > 1 ? 'series.multiple.prefix' : 'series.single.prefix';\n    ariaLabel += replace(getConfig(prefix), {\n      seriesCount: seriesCnt\n    });\n    ecModel.eachSeries(function (seriesModel, idx) {\n      if (idx < displaySeriesCnt) {\n        var seriesLabel;\n        var seriesName = seriesModel.get('name');\n        var seriesTpl = 'series.' + (seriesCnt > 1 ? 'multiple' : 'single') + '.';\n        seriesLabel = getConfig(seriesName ? seriesTpl + 'withName' : seriesTpl + 'withoutName');\n        seriesLabel = replace(seriesLabel, {\n          seriesId: seriesModel.seriesIndex,\n          seriesName: seriesModel.get('name'),\n          seriesType: getSeriesTypeName(seriesModel.subType)\n        });\n        var data = seriesModel.getData();\n        window.data = data;\n\n        if (data.count() > maxDataCnt) {\n          // Show part of data\n          seriesLabel += replace(getConfig('data.partialData'), {\n            displayCnt: maxDataCnt\n          });\n        } else {\n          seriesLabel += getConfig('data.allData');\n        }\n\n        var dataLabels = [];\n\n        for (var i = 0; i < data.count(); i++) {\n          if (i < maxDataCnt) {\n            var name = data.getName(i);\n            var value = retrieveRawValue(data, i);\n            dataLabels.push(replace(name ? getConfig('data.withName') : getConfig('data.withoutName'), {\n              name: name,\n              value: value\n            }));\n          }\n        }\n\n        seriesLabel += dataLabels.join(getConfig('data.separator.middle')) + getConfig('data.separator.end');\n        seriesLabels.push(seriesLabel);\n      }\n    });\n    ariaLabel += seriesLabels.join(getConfig('series.multiple.separator.middle')) + getConfig('series.multiple.separator.end');\n    dom.setAttribute('aria-label', ariaLabel);\n  }\n\n  function replace(str, keyValues) {\n    if (typeof str !== 'string') {\n      return str;\n    }\n\n    var result = str;\n    zrUtil.each(keyValues, function (value, key) {\n      result = result.replace(new RegExp('\\\\{\\\\s*' + key + '\\\\s*\\\\}', 'g'), value);\n    });\n    return result;\n  }\n\n  function getConfig(path) {\n    var userConfig = ariaModel.get(path);\n\n    if (userConfig == null) {\n      var pathArr = path.split('.');\n      var result = lang.aria;\n\n      for (var i = 0; i < pathArr.length; ++i) {\n        result = result[pathArr[i]];\n      }\n\n      return result;\n    } else {\n      return userConfig;\n    }\n  }\n\n  function getTitle() {\n    var title = ecModel.getModel('title').option;\n\n    if (title && title.length) {\n      title = title[0];\n    }\n\n    return title && title.text;\n  }\n\n  function getSeriesTypeName(type) {\n    return lang.series.typeNames[type] || '';\n  }\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar colorAll = ['#37A2DA', '#32C5E9', '#67E0E3', '#9FE6B8', '#FFDB5C', '#ff9f7f', '#fb7293', '#E062AE', '#E690D1', '#e7bcf3', '#9d96f5', '#8378EA', '#96BFFF'];\nvar _default = {\n  color: colorAll,\n  colorLayer: [['#37A2DA', '#ffd85c', '#fd7b5f'], ['#37A2DA', '#67E0E3', '#FFDB5C', '#ff9f7f', '#E062AE', '#9d96f5'], ['#37A2DA', '#32C5E9', '#9FE6B8', '#FFDB5C', '#ff9f7f', '#fb7293', '#e7bcf3', '#8378EA', '#96BFFF'], colorAll]\n};\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _dataProvider = require(\"../../data/helper/dataProvider\");\n\nvar retrieveRawValue = _dataProvider.retrieveRawValue;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @param {module:echarts/data/List} data\n * @param {number} dataIndex\n * @return {string} label string. Not null/undefined\n */\nfunction getDefaultLabel(data, dataIndex) {\n  var labelDims = data.mapDimension('defaultedLabel', true);\n  var len = labelDims.length; // Simple optimization (in lots of cases, label dims length is 1)\n\n  if (len === 1) {\n    return retrieveRawValue(data, dataIndex, labelDims[0]);\n  } else if (len) {\n    var vals = [];\n\n    for (var i = 0; i < labelDims.length; i++) {\n      var val = retrieveRawValue(data, dataIndex, labelDims[i]);\n      vals.push(val);\n    }\n\n    return vals.join(' ');\n  }\n}\n\nexports.getDefaultLabel = getDefaultLabel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar modelUtil = require(\"../util/model\");\n\nvar ComponentModel = require(\"./Component\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * ECharts option manager\n *\n * @module {echarts/model/OptionManager}\n */\nvar each = zrUtil.each;\nvar clone = zrUtil.clone;\nvar map = zrUtil.map;\nvar merge = zrUtil.merge;\nvar QUERY_REG = /^(min|max)?(.+)$/;\n/**\n * TERM EXPLANATIONS:\n *\n * [option]:\n *\n *     An object that contains definitions of components. For example:\n *     var option = {\n *         title: {...},\n *         legend: {...},\n *         visualMap: {...},\n *         series: [\n *             {data: [...]},\n *             {data: [...]},\n *             ...\n *         ]\n *     };\n *\n * [rawOption]:\n *\n *     An object input to echarts.setOption. 'rawOption' may be an\n *     'option', or may be an object contains multi-options. For example:\n *     var option = {\n *         baseOption: {\n *             title: {...},\n *             legend: {...},\n *             series: [\n *                 {data: [...]},\n *                 {data: [...]},\n *                 ...\n *             ]\n *         },\n *         timeline: {...},\n *         options: [\n *             {title: {...}, series: {data: [...]}},\n *             {title: {...}, series: {data: [...]}},\n *             ...\n *         ],\n *         media: [\n *             {\n *                 query: {maxWidth: 320},\n *                 option: {series: {x: 20}, visualMap: {show: false}}\n *             },\n *             {\n *                 query: {minWidth: 320, maxWidth: 720},\n *                 option: {series: {x: 500}, visualMap: {show: true}}\n *             },\n *             {\n *                 option: {series: {x: 1200}, visualMap: {show: true}}\n *             }\n *         ]\n *     };\n *\n * @alias module:echarts/model/OptionManager\n * @param {module:echarts/ExtensionAPI} api\n */\n\nfunction OptionManager(api) {\n  /**\n   * @private\n   * @type {module:echarts/ExtensionAPI}\n   */\n  this._api = api;\n  /**\n   * @private\n   * @type {Array.<number>}\n   */\n\n  this._timelineOptions = [];\n  /**\n   * @private\n   * @type {Array.<Object>}\n   */\n\n  this._mediaList = [];\n  /**\n   * @private\n   * @type {Object}\n   */\n\n  this._mediaDefault;\n  /**\n   * -1, means default.\n   * empty means no media.\n   * @private\n   * @type {Array.<number>}\n   */\n\n  this._currentMediaIndices = [];\n  /**\n   * @private\n   * @type {Object}\n   */\n\n  this._optionBackup;\n  /**\n   * @private\n   * @type {Object}\n   */\n\n  this._newBaseOption;\n} // timeline.notMerge is not supported in ec3. Firstly there is rearly\n// case that notMerge is needed. Secondly supporting 'notMerge' requires\n// rawOption cloned and backuped when timeline changed, which does no\n// good to performance. What's more, that both timeline and setOption\n// method supply 'notMerge' brings complex and some problems.\n// Consider this case:\n// (step1) chart.setOption({timeline: {notMerge: false}, ...}, false);\n// (step2) chart.setOption({timeline: {notMerge: true}, ...}, false);\n\n\nOptionManager.prototype = {\n  constructor: OptionManager,\n\n  /**\n   * @public\n   * @param {Object} rawOption Raw option.\n   * @param {module:echarts/model/Global} ecModel\n   * @param {Array.<Function>} optionPreprocessorFuncs\n   * @return {Object} Init option\n   */\n  setOption: function (rawOption, optionPreprocessorFuncs) {\n    if (rawOption) {\n      // That set dat primitive is dangerous if user reuse the data when setOption again.\n      zrUtil.each(modelUtil.normalizeToArray(rawOption.series), function (series) {\n        series && series.data && zrUtil.isTypedArray(series.data) && zrUtil.setAsPrimitive(series.data);\n      });\n    } // Caution: some series modify option data, if do not clone,\n    // it should ensure that the repeat modify correctly\n    // (create a new object when modify itself).\n\n\n    rawOption = clone(rawOption); // FIXME\n    //  timeline options  media baseOption\n\n    var oldOptionBackup = this._optionBackup;\n    var newParsedOption = parseRawOption.call(this, rawOption, optionPreprocessorFuncs, !oldOptionBackup);\n    this._newBaseOption = newParsedOption.baseOption; // For setOption at second time (using merge mode);\n\n    if (oldOptionBackup) {\n      // Only baseOption can be merged.\n      mergeOption(oldOptionBackup.baseOption, newParsedOption.baseOption); // For simplicity, timeline options and media options do not support merge,\n      // that is, if you `setOption` twice and both has timeline options, the latter\n      // timeline opitons will not be merged to the formers, but just substitude them.\n\n      if (newParsedOption.timelineOptions.length) {\n        oldOptionBackup.timelineOptions = newParsedOption.timelineOptions;\n      }\n\n      if (newParsedOption.mediaList.length) {\n        oldOptionBackup.mediaList = newParsedOption.mediaList;\n      }\n\n      if (newParsedOption.mediaDefault) {\n        oldOptionBackup.mediaDefault = newParsedOption.mediaDefault;\n      }\n    } else {\n      this._optionBackup = newParsedOption;\n    }\n  },\n\n  /**\n   * @param {boolean} isRecreate\n   * @return {Object}\n   */\n  mountOption: function (isRecreate) {\n    var optionBackup = this._optionBackup; // TODO\n    // resetclone\n\n    this._timelineOptions = map(optionBackup.timelineOptions, clone);\n    this._mediaList = map(optionBackup.mediaList, clone);\n    this._mediaDefault = clone(optionBackup.mediaDefault);\n    this._currentMediaIndices = [];\n    return clone(isRecreate // this._optionBackup.baseOption, which is created at the first `setOption`\n    // called, and is merged into every new option by inner method `mergeOption`\n    // each time `setOption` called, can be only used in `isRecreate`, because\n    // its reliability is under suspicion. In other cases option merge is\n    // performed by `model.mergeOption`.\n    ? optionBackup.baseOption : this._newBaseOption);\n  },\n\n  /**\n   * @param {module:echarts/model/Global} ecModel\n   * @return {Object}\n   */\n  getTimelineOption: function (ecModel) {\n    var option;\n    var timelineOptions = this._timelineOptions;\n\n    if (timelineOptions.length) {\n      // getTimelineOption can only be called after ecModel inited,\n      // so we can get currentIndex from timelineModel.\n      var timelineModel = ecModel.getComponent('timeline');\n\n      if (timelineModel) {\n        option = clone(timelineOptions[timelineModel.getCurrentIndex()], true);\n      }\n    }\n\n    return option;\n  },\n\n  /**\n   * @param {module:echarts/model/Global} ecModel\n   * @return {Array.<Object>}\n   */\n  getMediaOption: function (ecModel) {\n    var ecWidth = this._api.getWidth();\n\n    var ecHeight = this._api.getHeight();\n\n    var mediaList = this._mediaList;\n    var mediaDefault = this._mediaDefault;\n    var indices = [];\n    var result = []; // No media defined.\n\n    if (!mediaList.length && !mediaDefault) {\n      return result;\n    } // Multi media may be applied, the latter defined media has higher priority.\n\n\n    for (var i = 0, len = mediaList.length; i < len; i++) {\n      if (applyMediaQuery(mediaList[i].query, ecWidth, ecHeight)) {\n        indices.push(i);\n      }\n    } // FIXME\n    // mediaDefault\n\n\n    if (!indices.length && mediaDefault) {\n      indices = [-1];\n    }\n\n    if (indices.length && !indicesEquals(indices, this._currentMediaIndices)) {\n      result = map(indices, function (index) {\n        return clone(index === -1 ? mediaDefault.option : mediaList[index].option);\n      });\n    } // Otherwise return nothing.\n\n\n    this._currentMediaIndices = indices;\n    return result;\n  }\n};\n\nfunction parseRawOption(rawOption, optionPreprocessorFuncs, isNew) {\n  var timelineOptions = [];\n  var mediaList = [];\n  var mediaDefault;\n  var baseOption; // Compatible with ec2.\n\n  var timelineOpt = rawOption.timeline;\n\n  if (rawOption.baseOption) {\n    baseOption = rawOption.baseOption;\n  } // For timeline\n\n\n  if (timelineOpt || rawOption.options) {\n    baseOption = baseOption || {};\n    timelineOptions = (rawOption.options || []).slice();\n  } // For media query\n\n\n  if (rawOption.media) {\n    baseOption = baseOption || {};\n    var media = rawOption.media;\n    each(media, function (singleMedia) {\n      if (singleMedia && singleMedia.option) {\n        if (singleMedia.query) {\n          mediaList.push(singleMedia);\n        } else if (!mediaDefault) {\n          // Use the first media default.\n          mediaDefault = singleMedia;\n        }\n      }\n    });\n  } // For normal option\n\n\n  if (!baseOption) {\n    baseOption = rawOption;\n  } // Set timelineOpt to baseOption in ec3,\n  // which is convenient for merge option.\n\n\n  if (!baseOption.timeline) {\n    baseOption.timeline = timelineOpt;\n  } // Preprocess.\n\n\n  each([baseOption].concat(timelineOptions).concat(zrUtil.map(mediaList, function (media) {\n    return media.option;\n  })), function (option) {\n    each(optionPreprocessorFuncs, function (preProcess) {\n      preProcess(option, isNew);\n    });\n  });\n  return {\n    baseOption: baseOption,\n    timelineOptions: timelineOptions,\n    mediaDefault: mediaDefault,\n    mediaList: mediaList\n  };\n}\n/**\n * @see <http://www.w3.org/TR/css3-mediaqueries/#media1>\n * Support: width, height, aspectRatio\n * Can use max or min as prefix.\n */\n\n\nfunction applyMediaQuery(query, ecWidth, ecHeight) {\n  var realMap = {\n    width: ecWidth,\n    height: ecHeight,\n    aspectratio: ecWidth / ecHeight // lowser case for convenientce.\n\n  };\n  var applicatable = true;\n  zrUtil.each(query, function (value, attr) {\n    var matched = attr.match(QUERY_REG);\n\n    if (!matched || !matched[1] || !matched[2]) {\n      return;\n    }\n\n    var operator = matched[1];\n    var realAttr = matched[2].toLowerCase();\n\n    if (!compare(realMap[realAttr], value, operator)) {\n      applicatable = false;\n    }\n  });\n  return applicatable;\n}\n\nfunction compare(real, expect, operator) {\n  if (operator === 'min') {\n    return real >= expect;\n  } else if (operator === 'max') {\n    return real <= expect;\n  } else {\n    // Equals\n    return real === expect;\n  }\n}\n\nfunction indicesEquals(indices1, indices2) {\n  // indices is always order by asc and has only finite number.\n  return indices1.join(',') === indices2.join(',');\n}\n/**\n * Consider case:\n * `chart.setOption(opt1);`\n * Then user do some interaction like dataZoom, dataView changing.\n * `chart.setOption(opt2);`\n * Then user press 'reset button' in toolbox.\n *\n * After doing that all of the interaction effects should be reset, the\n * chart should be the same as the result of invoke\n * `chart.setOption(opt1); chart.setOption(opt2);`.\n *\n * Although it is not able ensure that\n * `chart.setOption(opt1); chart.setOption(opt2);` is equivalents to\n * `chart.setOption(merge(opt1, opt2));` exactly,\n * this might be the only simple way to implement that feature.\n *\n * MEMO: We've considered some other approaches:\n * 1. Each model handle its self restoration but not uniform treatment.\n *     (Too complex in logic and error-prone)\n * 2. Use a shadow ecModel. (Performace expensive)\n */\n\n\nfunction mergeOption(oldOption, newOption) {\n  newOption = newOption || {};\n  each(newOption, function (newCptOpt, mainType) {\n    if (newCptOpt == null) {\n      return;\n    }\n\n    var oldCptOpt = oldOption[mainType];\n\n    if (!ComponentModel.hasClass(mainType)) {\n      oldOption[mainType] = merge(oldCptOpt, newCptOpt, true);\n    } else {\n      newCptOpt = modelUtil.normalizeToArray(newCptOpt);\n      oldCptOpt = modelUtil.normalizeToArray(oldCptOpt);\n      var mapResult = modelUtil.mappingToExists(oldCptOpt, newCptOpt);\n      oldOption[mainType] = map(mapResult, function (item) {\n        return item.option && item.exist ? merge(item.exist, item.option, true) : item.exist || item.option;\n      });\n    }\n  });\n}\n\nvar _default = OptionManager;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar axisPointerModelHelper = require(\"./axisPointer/modelHelper\");\n\nvar axisTrigger = require(\"./axisPointer/axisTrigger\");\n\nrequire(\"./axisPointer/AxisPointerModel\");\n\nrequire(\"./axisPointer/AxisPointerView\");\n\nrequire(\"./axisPointer/CartesianAxisPointer\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// CartesianAxisPointer is not supposed to be required here. But consider\n// echarts.simple.js and online build tooltip, which only require gridSimple,\n// CartesianAxisPointer should be able to required somewhere.\necharts.registerPreprocessor(function (option) {\n  // Always has a global axisPointerModel for default setting.\n  if (option) {\n    (!option.axisPointer || option.axisPointer.length === 0) && (option.axisPointer = {});\n    var link = option.axisPointer.link; // Normalize to array to avoid object mergin. But if link\n    // is not set, remain null/undefined, otherwise it will\n    // override existent link setting.\n\n    if (link && !zrUtil.isArray(link)) {\n      option.axisPointer.link = [link];\n    }\n  }\n}); // This process should proformed after coordinate systems created\n// and series data processed. So put it on statistic processing stage.\n\necharts.registerProcessor(echarts.PRIORITY.PROCESSOR.STATISTIC, function (ecModel, api) {\n  // Build axisPointerModel, mergin tooltip.axisPointer model for each axis.\n  // allAxesInfo should be updated when setOption performed.\n  ecModel.getComponent('axisPointer').coordSysAxesInfo = axisPointerModelHelper.collect(ecModel, api);\n}); // Broadcast to all views.\n\necharts.registerAction({\n  type: 'updateAxisPointer',\n  event: 'updateAxisPointer',\n  update: ':updateAxisPointer'\n}, axisTrigger);","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar BoundingRect = require(\"zrender/lib/core/BoundingRect\");\n\nvar Cartesian = require(\"./Cartesian\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction Cartesian2D(name) {\n  Cartesian.call(this, name);\n}\n\nCartesian2D.prototype = {\n  constructor: Cartesian2D,\n  type: 'cartesian2d',\n\n  /**\n   * @type {Array.<string>}\n   * @readOnly\n   */\n  dimensions: ['x', 'y'],\n\n  /**\n   * Base axis will be used on stacking.\n   *\n   * @return {module:echarts/coord/cartesian/Axis2D}\n   */\n  getBaseAxis: function () {\n    return this.getAxesByScale('ordinal')[0] || this.getAxesByScale('time')[0] || this.getAxis('x');\n  },\n\n  /**\n   * If contain point\n   * @param {Array.<number>} point\n   * @return {boolean}\n   */\n  containPoint: function (point) {\n    var axisX = this.getAxis('x');\n    var axisY = this.getAxis('y');\n    return axisX.contain(axisX.toLocalCoord(point[0])) && axisY.contain(axisY.toLocalCoord(point[1]));\n  },\n\n  /**\n   * If contain data\n   * @param {Array.<number>} data\n   * @return {boolean}\n   */\n  containData: function (data) {\n    return this.getAxis('x').containData(data[0]) && this.getAxis('y').containData(data[1]);\n  },\n\n  /**\n   * @param {Array.<number>} data\n   * @param {Array.<number>} out\n   * @return {Array.<number>}\n   */\n  dataToPoint: function (data, reserved, out) {\n    var xAxis = this.getAxis('x');\n    var yAxis = this.getAxis('y');\n    out = out || [];\n    out[0] = xAxis.toGlobalCoord(xAxis.dataToCoord(data[0]));\n    out[1] = yAxis.toGlobalCoord(yAxis.dataToCoord(data[1]));\n    return out;\n  },\n\n  /**\n   * @param {Array.<number>} data\n   * @param {Array.<number>} out\n   * @return {Array.<number>}\n   */\n  clampData: function (data, out) {\n    var xScale = this.getAxis('x').scale;\n    var yScale = this.getAxis('y').scale;\n    var xAxisExtent = xScale.getExtent();\n    var yAxisExtent = yScale.getExtent();\n    var x = xScale.parse(data[0]);\n    var y = yScale.parse(data[1]);\n    out = out || [];\n    out[0] = Math.min(Math.max(Math.min(xAxisExtent[0], xAxisExtent[1]), x), Math.max(xAxisExtent[0], xAxisExtent[1]));\n    out[1] = Math.min(Math.max(Math.min(yAxisExtent[0], yAxisExtent[1]), y), Math.max(yAxisExtent[0], yAxisExtent[1]));\n    return out;\n  },\n\n  /**\n   * @param {Array.<number>} point\n   * @param {Array.<number>} out\n   * @return {Array.<number>}\n   */\n  pointToData: function (point, out) {\n    var xAxis = this.getAxis('x');\n    var yAxis = this.getAxis('y');\n    out = out || [];\n    out[0] = xAxis.coordToData(xAxis.toLocalCoord(point[0]));\n    out[1] = yAxis.coordToData(yAxis.toLocalCoord(point[1]));\n    return out;\n  },\n\n  /**\n   * Get other axis\n   * @param {module:echarts/coord/cartesian/Axis2D} axis\n   */\n  getOtherAxis: function (axis) {\n    return this.getAxis(axis.dim === 'x' ? 'y' : 'x');\n  },\n\n  /**\n   * Get rect area of cartesian.\n   * Area will have a contain function to determine if a point is in the coordinate system.\n   * @return {BoundingRect}\n   */\n  getArea: function () {\n    var xExtent = this.getAxis('x').getGlobalExtent();\n    var yExtent = this.getAxis('y').getGlobalExtent();\n    var x = Math.min(xExtent[0], xExtent[1]);\n    var y = Math.min(yExtent[0], yExtent[1]);\n    var width = Math.max(xExtent[0], xExtent[1]) - x;\n    var height = Math.max(yExtent[0], yExtent[1]) - y;\n    var rect = new BoundingRect(x, y, width, height);\n    return rect;\n  }\n};\nzrUtil.inherits(Cartesian2D, Cartesian);\nvar _default = Cartesian2D;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar Model = require(\"../../model/Model\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar each = zrUtil.each;\nvar curry = zrUtil.curry; // Build axisPointerModel, mergin tooltip.axisPointer model for each axis.\n// allAxesInfo should be updated when setOption performed.\n\nfunction collect(ecModel, api) {\n  var result = {\n    /**\n     * key: makeKey(axis.model)\n     * value: {\n     *      axis,\n     *      coordSys,\n     *      axisPointerModel,\n     *      triggerTooltip,\n     *      involveSeries,\n     *      snap,\n     *      seriesModels,\n     *      seriesDataCount\n     * }\n     */\n    axesInfo: {},\n    seriesInvolved: false,\n\n    /**\n     * key: makeKey(coordSys.model)\n     * value: Object: key makeKey(axis.model), value: axisInfo\n     */\n    coordSysAxesInfo: {},\n    coordSysMap: {}\n  };\n  collectAxesInfo(result, ecModel, api); // Check seriesInvolved for performance, in case too many series in some chart.\n\n  result.seriesInvolved && collectSeriesInfo(result, ecModel);\n  return result;\n}\n\nfunction collectAxesInfo(result, ecModel, api) {\n  var globalTooltipModel = ecModel.getComponent('tooltip');\n  var globalAxisPointerModel = ecModel.getComponent('axisPointer'); // links can only be set on global.\n\n  var linksOption = globalAxisPointerModel.get('link', true) || [];\n  var linkGroups = []; // Collect axes info.\n\n  each(api.getCoordinateSystems(), function (coordSys) {\n    // Some coordinate system do not support axes, like geo.\n    if (!coordSys.axisPointerEnabled) {\n      return;\n    }\n\n    var coordSysKey = makeKey(coordSys.model);\n    var axesInfoInCoordSys = result.coordSysAxesInfo[coordSysKey] = {};\n    result.coordSysMap[coordSysKey] = coordSys; // Set tooltip (like 'cross') is a convienent way to show axisPointer\n    // for user. So we enable seting tooltip on coordSys model.\n\n    var coordSysModel = coordSys.model;\n    var baseTooltipModel = coordSysModel.getModel('tooltip', globalTooltipModel);\n    each(coordSys.getAxes(), curry(saveTooltipAxisInfo, false, null)); // If axis tooltip used, choose tooltip axis for each coordSys.\n    // Notice this case: coordSys is `grid` but not `cartesian2D` here.\n\n    if (coordSys.getTooltipAxes && globalTooltipModel // If tooltip.showContent is set as false, tooltip will not\n    // show but axisPointer will show as normal.\n    && baseTooltipModel.get('show')) {\n      // Compatible with previous logic. But series.tooltip.trigger: 'axis'\n      // or series.data[n].tooltip.trigger: 'axis' are not support any more.\n      var triggerAxis = baseTooltipModel.get('trigger') === 'axis';\n      var cross = baseTooltipModel.get('axisPointer.type') === 'cross';\n      var tooltipAxes = coordSys.getTooltipAxes(baseTooltipModel.get('axisPointer.axis'));\n\n      if (triggerAxis || cross) {\n        each(tooltipAxes.baseAxes, curry(saveTooltipAxisInfo, cross ? 'cross' : true, triggerAxis));\n      }\n\n      if (cross) {\n        each(tooltipAxes.otherAxes, curry(saveTooltipAxisInfo, 'cross', false));\n      }\n    } // fromTooltip: true | false | 'cross'\n    // triggerTooltip: true | false | null\n\n\n    function saveTooltipAxisInfo(fromTooltip, triggerTooltip, axis) {\n      var axisPointerModel = axis.model.getModel('axisPointer', globalAxisPointerModel);\n      var axisPointerShow = axisPointerModel.get('show');\n\n      if (!axisPointerShow || axisPointerShow === 'auto' && !fromTooltip && !isHandleTrigger(axisPointerModel)) {\n        return;\n      }\n\n      if (triggerTooltip == null) {\n        triggerTooltip = axisPointerModel.get('triggerTooltip');\n      }\n\n      axisPointerModel = fromTooltip ? makeAxisPointerModel(axis, baseTooltipModel, globalAxisPointerModel, ecModel, fromTooltip, triggerTooltip) : axisPointerModel;\n      var snap = axisPointerModel.get('snap');\n      var key = makeKey(axis.model);\n      var involveSeries = triggerTooltip || snap || axis.type === 'category'; // If result.axesInfo[key] exist, override it (tooltip has higher priority).\n\n      var axisInfo = result.axesInfo[key] = {\n        key: key,\n        axis: axis,\n        coordSys: coordSys,\n        axisPointerModel: axisPointerModel,\n        triggerTooltip: triggerTooltip,\n        involveSeries: involveSeries,\n        snap: snap,\n        useHandle: isHandleTrigger(axisPointerModel),\n        seriesModels: []\n      };\n      axesInfoInCoordSys[key] = axisInfo;\n      result.seriesInvolved |= involveSeries;\n      var groupIndex = getLinkGroupIndex(linksOption, axis);\n\n      if (groupIndex != null) {\n        var linkGroup = linkGroups[groupIndex] || (linkGroups[groupIndex] = {\n          axesInfo: {}\n        });\n        linkGroup.axesInfo[key] = axisInfo;\n        linkGroup.mapper = linksOption[groupIndex].mapper;\n        axisInfo.linkGroup = linkGroup;\n      }\n    }\n  });\n}\n\nfunction makeAxisPointerModel(axis, baseTooltipModel, globalAxisPointerModel, ecModel, fromTooltip, triggerTooltip) {\n  var tooltipAxisPointerModel = baseTooltipModel.getModel('axisPointer');\n  var volatileOption = {};\n  each(['type', 'snap', 'lineStyle', 'shadowStyle', 'label', 'animation', 'animationDurationUpdate', 'animationEasingUpdate', 'z'], function (field) {\n    volatileOption[field] = zrUtil.clone(tooltipAxisPointerModel.get(field));\n  }); // category axis do not auto snap, otherwise some tick that do not\n  // has value can not be hovered. value/time/log axis default snap if\n  // triggered from tooltip and trigger tooltip.\n\n  volatileOption.snap = axis.type !== 'category' && !!triggerTooltip; // Compatibel with previous behavior, tooltip axis do not show label by default.\n  // Only these properties can be overrided from tooltip to axisPointer.\n\n  if (tooltipAxisPointerModel.get('type') === 'cross') {\n    volatileOption.type = 'line';\n  }\n\n  var labelOption = volatileOption.label || (volatileOption.label = {}); // Follow the convention, do not show label when triggered by tooltip by default.\n\n  labelOption.show == null && (labelOption.show = false);\n\n  if (fromTooltip === 'cross') {\n    // When 'cross', both axes show labels.\n    var tooltipAxisPointerLabelShow = tooltipAxisPointerModel.get('label.show');\n    labelOption.show = tooltipAxisPointerLabelShow != null ? tooltipAxisPointerLabelShow : true; // If triggerTooltip, this is a base axis, which should better not use cross style\n    // (cross style is dashed by default)\n\n    if (!triggerTooltip) {\n      var crossStyle = volatileOption.lineStyle = tooltipAxisPointerModel.get('crossStyle');\n      crossStyle && zrUtil.defaults(labelOption, crossStyle.textStyle);\n    }\n  }\n\n  return axis.model.getModel('axisPointer', new Model(volatileOption, globalAxisPointerModel, ecModel));\n}\n\nfunction collectSeriesInfo(result, ecModel) {\n  // Prepare data for axis trigger\n  ecModel.eachSeries(function (seriesModel) {\n    // Notice this case: this coordSys is `cartesian2D` but not `grid`.\n    var coordSys = seriesModel.coordinateSystem;\n    var seriesTooltipTrigger = seriesModel.get('tooltip.trigger', true);\n    var seriesTooltipShow = seriesModel.get('tooltip.show', true);\n\n    if (!coordSys || seriesTooltipTrigger === 'none' || seriesTooltipTrigger === false || seriesTooltipTrigger === 'item' || seriesTooltipShow === false || seriesModel.get('axisPointer.show', true) === false) {\n      return;\n    }\n\n    each(result.coordSysAxesInfo[makeKey(coordSys.model)], function (axisInfo) {\n      var axis = axisInfo.axis;\n\n      if (coordSys.getAxis(axis.dim) === axis) {\n        axisInfo.seriesModels.push(seriesModel);\n        axisInfo.seriesDataCount == null && (axisInfo.seriesDataCount = 0);\n        axisInfo.seriesDataCount += seriesModel.getData().count();\n      }\n    });\n  }, this);\n}\n/**\n * For example:\n * {\n *     axisPointer: {\n *         links: [{\n *             xAxisIndex: [2, 4],\n *             yAxisIndex: 'all'\n *         }, {\n *             xAxisId: ['a5', 'a7'],\n *             xAxisName: 'xxx'\n *         }]\n *     }\n * }\n */\n\n\nfunction getLinkGroupIndex(linksOption, axis) {\n  var axisModel = axis.model;\n  var dim = axis.dim;\n\n  for (var i = 0; i < linksOption.length; i++) {\n    var linkOption = linksOption[i] || {};\n\n    if (checkPropInLink(linkOption[dim + 'AxisId'], axisModel.id) || checkPropInLink(linkOption[dim + 'AxisIndex'], axisModel.componentIndex) || checkPropInLink(linkOption[dim + 'AxisName'], axisModel.name)) {\n      return i;\n    }\n  }\n}\n\nfunction checkPropInLink(linkPropValue, axisPropValue) {\n  return linkPropValue === 'all' || zrUtil.isArray(linkPropValue) && zrUtil.indexOf(linkPropValue, axisPropValue) >= 0 || linkPropValue === axisPropValue;\n}\n\nfunction fixValue(axisModel) {\n  var axisInfo = getAxisInfo(axisModel);\n\n  if (!axisInfo) {\n    return;\n  }\n\n  var axisPointerModel = axisInfo.axisPointerModel;\n  var scale = axisInfo.axis.scale;\n  var option = axisPointerModel.option;\n  var status = axisPointerModel.get('status');\n  var value = axisPointerModel.get('value'); // Parse init value for category and time axis.\n\n  if (value != null) {\n    value = scale.parse(value);\n  }\n\n  var useHandle = isHandleTrigger(axisPointerModel); // If `handle` used, `axisPointer` will always be displayed, so value\n  // and status should be initialized.\n\n  if (status == null) {\n    option.status = useHandle ? 'show' : 'hide';\n  }\n\n  var extent = scale.getExtent().slice();\n  extent[0] > extent[1] && extent.reverse();\n\n  if ( // Pick a value on axis when initializing.\n  value == null // If both `handle` and `dataZoom` are used, value may be out of axis extent,\n  // where we should re-pick a value to keep `handle` displaying normally.\n  || value > extent[1]) {\n    // Make handle displayed on the end of the axis when init, which looks better.\n    value = extent[1];\n  }\n\n  if (value < extent[0]) {\n    value = extent[0];\n  }\n\n  option.value = value;\n\n  if (useHandle) {\n    option.status = axisInfo.axis.scale.isBlank() ? 'hide' : 'show';\n  }\n}\n\nfunction getAxisInfo(axisModel) {\n  var coordSysAxesInfo = (axisModel.ecModel.getComponent('axisPointer') || {}).coordSysAxesInfo;\n  return coordSysAxesInfo && coordSysAxesInfo.axesInfo[makeKey(axisModel)];\n}\n\nfunction getAxisPointerModel(axisModel) {\n  var axisInfo = getAxisInfo(axisModel);\n  return axisInfo && axisInfo.axisPointerModel;\n}\n\nfunction isHandleTrigger(axisPointerModel) {\n  return !!axisPointerModel.get('handle.show');\n}\n/**\n * @param {module:echarts/model/Model} model\n * @return {string} unique key\n */\n\n\nfunction makeKey(model) {\n  return model.type + '||' + model.id;\n}\n\nexports.collect = collect;\nexports.fixValue = fixValue;\nexports.getAxisInfo = getAxisInfo;\nexports.getAxisPointerModel = getAxisPointerModel;\nexports.makeKey = makeKey;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Cartesian coordinate system\n * @module  echarts/coord/Cartesian\n *\n */\nfunction dimAxisMapper(dim) {\n  return this._axes[dim];\n}\n/**\n * @alias module:echarts/coord/Cartesian\n * @constructor\n */\n\n\nvar Cartesian = function (name) {\n  this._axes = {};\n  this._dimList = [];\n  /**\n   * @type {string}\n   */\n\n  this.name = name || '';\n};\n\nCartesian.prototype = {\n  constructor: Cartesian,\n  type: 'cartesian',\n\n  /**\n   * Get axis\n   * @param  {number|string} dim\n   * @return {module:echarts/coord/Cartesian~Axis}\n   */\n  getAxis: function (dim) {\n    return this._axes[dim];\n  },\n\n  /**\n   * Get axes list\n   * @return {Array.<module:echarts/coord/Cartesian~Axis>}\n   */\n  getAxes: function () {\n    return zrUtil.map(this._dimList, dimAxisMapper, this);\n  },\n\n  /**\n   * Get axes list by given scale type\n   */\n  getAxesByScale: function (scaleType) {\n    scaleType = scaleType.toLowerCase();\n    return zrUtil.filter(this.getAxes(), function (axis) {\n      return axis.scale.type === scaleType;\n    });\n  },\n\n  /**\n   * Add axis\n   * @param {module:echarts/coord/Cartesian.Axis}\n   */\n  addAxis: function (axis) {\n    var dim = axis.dim;\n    this._axes[dim] = axis;\n\n    this._dimList.push(dim);\n  },\n\n  /**\n   * Convert data to coord in nd space\n   * @param {Array.<number>|Object.<string, number>} val\n   * @return {Array.<number>|Object.<string, number>}\n   */\n  dataToCoord: function (val) {\n    return this._dataCoordConvert(val, 'dataToCoord');\n  },\n\n  /**\n   * Convert coord in nd space to data\n   * @param  {Array.<number>|Object.<string, number>} val\n   * @return {Array.<number>|Object.<string, number>}\n   */\n  coordToData: function (val) {\n    return this._dataCoordConvert(val, 'coordToData');\n  },\n  _dataCoordConvert: function (input, method) {\n    var dimList = this._dimList;\n    var output = input instanceof Array ? [] : {};\n\n    for (var i = 0; i < dimList.length; i++) {\n      var dim = dimList[i];\n      var axis = this._axes[dim];\n      output[dim] = axis[method](input[dim]);\n    }\n\n    return output;\n  }\n};\nvar _default = Cartesian;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar createHashMap = _util.createHashMap;\nvar each = _util.each;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// (1) [Caution]: the logic is correct based on the premises:\n//     data processing stage is blocked in stream.\n//     See <module:echarts/stream/Scheduler#performDataProcessorTasks>\n// (2) Only register once when import repeatly.\n//     Should be executed after series filtered and before stack calculation.\nfunction _default(ecModel) {\n  var stackInfoMap = createHashMap();\n  ecModel.eachSeries(function (seriesModel) {\n    var stack = seriesModel.get('stack'); // Compatibal: when `stack` is set as '', do not stack.\n\n    if (stack) {\n      var stackInfoList = stackInfoMap.get(stack) || stackInfoMap.set(stack, []);\n      var data = seriesModel.getData();\n      var stackInfo = {\n        // Used for calculate axis extent automatically.\n        stackResultDimension: data.getCalculationInfo('stackResultDimension'),\n        stackedOverDimension: data.getCalculationInfo('stackedOverDimension'),\n        stackedDimension: data.getCalculationInfo('stackedDimension'),\n        stackedByDimension: data.getCalculationInfo('stackedByDimension'),\n        isStackedByIndex: data.getCalculationInfo('isStackedByIndex'),\n        data: data,\n        seriesModel: seriesModel\n      }; // If stacked on axis that do not support data stack.\n\n      if (!stackInfo.stackedDimension || !(stackInfo.isStackedByIndex || stackInfo.stackedByDimension)) {\n        return;\n      }\n\n      stackInfoList.length && data.setCalculationInfo('stackedOnSeries', stackInfoList[stackInfoList.length - 1].seriesModel);\n      stackInfoList.push(stackInfo);\n    }\n  });\n  stackInfoMap.each(calculateStack);\n}\n\nfunction calculateStack(stackInfoList) {\n  each(stackInfoList, function (targetStackInfo, idxInStack) {\n    var resultVal = [];\n    var resultNaN = [NaN, NaN];\n    var dims = [targetStackInfo.stackResultDimension, targetStackInfo.stackedOverDimension];\n    var targetData = targetStackInfo.data;\n    var isStackedByIndex = targetStackInfo.isStackedByIndex; // Should not write on raw data, because stack series model list changes\n    // depending on legend selection.\n\n    var newData = targetData.map(dims, function (v0, v1, dataIndex) {\n      var sum = targetData.get(targetStackInfo.stackedDimension, dataIndex); // Consider `connectNulls` of line area, if value is NaN, stackedOver\n      // should also be NaN, to draw a appropriate belt area.\n\n      if (isNaN(sum)) {\n        return resultNaN;\n      }\n\n      var byValue;\n      var stackedDataRawIndex;\n\n      if (isStackedByIndex) {\n        stackedDataRawIndex = targetData.getRawIndex(dataIndex);\n      } else {\n        byValue = targetData.get(targetStackInfo.stackedByDimension, dataIndex);\n      } // If stackOver is NaN, chart view will render point on value start.\n\n\n      var stackedOver = NaN;\n\n      for (var j = idxInStack - 1; j >= 0; j--) {\n        var stackInfo = stackInfoList[j]; // Has been optimized by inverted indices on `stackedByDimension`.\n\n        if (!isStackedByIndex) {\n          stackedDataRawIndex = stackInfo.data.rawIndexOf(stackInfo.stackedByDimension, byValue);\n        }\n\n        if (stackedDataRawIndex >= 0) {\n          var val = stackInfo.data.getByRawIndex(stackInfo.stackResultDimension, stackedDataRawIndex); // Considering positive stack, negative stack and empty data\n\n          if (sum >= 0 && val > 0 || // Positive stack\n          sum <= 0 && val < 0 // Negative stack\n          ) {\n              sum += val;\n              stackedOver = val;\n              break;\n            }\n        }\n      }\n\n      resultVal[0] = sum;\n      resultVal[1] = stackedOver;\n      return resultVal;\n    });\n    targetData.hostModel.setData(newData); // Update for consequent calculation\n\n    targetStackInfo.data = newData;\n  });\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../echarts\");\n\nrequire(\"./legend/LegendModel\");\n\nrequire(\"./legend/legendAction\");\n\nrequire(\"./legend/LegendView\");\n\nvar legendFilter = require(\"./legend/legendFilter\");\n\nvar Component = require(\"../model/Component\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Do not contain scrollable legend, for sake of file size.\n// Series Filter\necharts.registerProcessor(echarts.PRIORITY.PROCESSOR.SERIES_FILTER, legendFilter);\nComponent.registerSubTypeDefaulter('legend', function () {\n  // Default 'plain' when no type specified.\n  return 'plain';\n});","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\nvar globalListener = require(\"./globalListener\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar AxisPointerView = echarts.extendComponentView({\n  type: 'axisPointer',\n  render: function (globalAxisPointerModel, ecModel, api) {\n    var globalTooltipModel = ecModel.getComponent('tooltip');\n    var triggerOn = globalAxisPointerModel.get('triggerOn') || globalTooltipModel && globalTooltipModel.get('triggerOn') || 'mousemove|click'; // Register global listener in AxisPointerView to enable\n    // AxisPointerView to be independent to Tooltip.\n\n    globalListener.register('axisPointer', api, function (currTrigger, e, dispatchAction) {\n      // If 'none', it is not controlled by mouse totally.\n      if (triggerOn !== 'none' && (currTrigger === 'leave' || triggerOn.indexOf(currTrigger) >= 0)) {\n        dispatchAction({\n          type: 'updateAxisPointer',\n          currTrigger: currTrigger,\n          x: e && e.offsetX,\n          y: e && e.offsetY\n        });\n      }\n    });\n  },\n\n  /**\n   * @override\n   */\n  remove: function (ecModel, api) {\n    globalListener.unregister(api.getZr(), 'axisPointer');\n    AxisPointerView.superApply(this._model, 'remove', arguments);\n  },\n\n  /**\n   * @override\n   */\n  dispose: function (ecModel, api) {\n    globalListener.unregister('axisPointer', api);\n    AxisPointerView.superApply(this._model, 'dispose', arguments);\n  }\n});\nvar _default = AxisPointerView;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar Path = require(\"zrender/lib/graphic/Path\");\n\nvar vec2 = require(\"zrender/lib/core/vector\");\n\nvar fixClipWithShadow = require(\"zrender/lib/graphic/helper/fixClipWithShadow\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Poly path support NaN point\nvar vec2Min = vec2.min;\nvar vec2Max = vec2.max;\nvar scaleAndAdd = vec2.scaleAndAdd;\nvar v2Copy = vec2.copy; // Temporary variable\n\nvar v = [];\nvar cp0 = [];\nvar cp1 = [];\n\nfunction isPointNull(p) {\n  return isNaN(p[0]) || isNaN(p[1]);\n}\n\nfunction drawSegment(ctx, points, start, segLen, allLen, dir, smoothMin, smoothMax, smooth, smoothMonotone, connectNulls) {\n  // if (smoothMonotone == null) {\n  //     if (isMono(points, 'x')) {\n  //         return drawMono(ctx, points, start, segLen, allLen,\n  //             dir, smoothMin, smoothMax, smooth, 'x', connectNulls);\n  //     }\n  //     else if (isMono(points, 'y')) {\n  //         return drawMono(ctx, points, start, segLen, allLen,\n  //             dir, smoothMin, smoothMax, smooth, 'y', connectNulls);\n  //     }\n  //     else {\n  //         return drawNonMono.apply(this, arguments);\n  //     }\n  // }\n  // else if (smoothMonotone !== 'none' && isMono(points, smoothMonotone)) {\n  //     return drawMono.apply(this, arguments);\n  // }\n  // else {\n  //     return drawNonMono.apply(this, arguments);\n  // }\n  if (smoothMonotone === 'none' || !smoothMonotone) {\n    return drawNonMono.apply(this, arguments);\n  } else {\n    return drawMono.apply(this, arguments);\n  }\n}\n/**\n * Check if points is in monotone.\n *\n * @param {number[][]} points         Array of points which is in [x, y] form\n * @param {string}     smoothMonotone 'x', 'y', or 'none', stating for which\n *                                    dimension that is checking.\n *                                    If is 'none', `drawNonMono` should be\n *                                    called.\n *                                    If is undefined, either being monotone\n *                                    in 'x' or 'y' will call `drawMono`.\n */\n// function isMono(points, smoothMonotone) {\n//     if (points.length <= 1) {\n//         return true;\n//     }\n//     var dim = smoothMonotone === 'x' ? 0 : 1;\n//     var last = points[0][dim];\n//     var lastDiff = 0;\n//     for (var i = 1; i < points.length; ++i) {\n//         var diff = points[i][dim] - last;\n//         if (!isNaN(diff) && !isNaN(lastDiff)\n//             && diff !== 0 && lastDiff !== 0\n//             && ((diff >= 0) !== (lastDiff >= 0))\n//         ) {\n//             return false;\n//         }\n//         if (!isNaN(diff) && diff !== 0) {\n//             lastDiff = diff;\n//             last = points[i][dim];\n//         }\n//     }\n//     return true;\n// }\n\n/**\n * Draw smoothed line in monotone, in which only vertical or horizontal bezier\n * control points will be used. This should be used when points are monotone\n * either in x or y dimension.\n */\n\n\nfunction drawMono(ctx, points, start, segLen, allLen, dir, smoothMin, smoothMax, smooth, smoothMonotone, connectNulls) {\n  var prevIdx = 0;\n  var idx = start;\n\n  for (var k = 0; k < segLen; k++) {\n    var p = points[idx];\n\n    if (idx >= allLen || idx < 0) {\n      break;\n    }\n\n    if (isPointNull(p)) {\n      if (connectNulls) {\n        idx += dir;\n        continue;\n      }\n\n      break;\n    }\n\n    if (idx === start) {\n      ctx[dir > 0 ? 'moveTo' : 'lineTo'](p[0], p[1]);\n    } else {\n      if (smooth > 0) {\n        var prevP = points[prevIdx];\n        var dim = smoothMonotone === 'y' ? 1 : 0; // Length of control point to p, either in x or y, but not both\n\n        var ctrlLen = (p[dim] - prevP[dim]) * smooth;\n        v2Copy(cp0, prevP);\n        cp0[dim] = prevP[dim] + ctrlLen;\n        v2Copy(cp1, p);\n        cp1[dim] = p[dim] - ctrlLen;\n        ctx.bezierCurveTo(cp0[0], cp0[1], cp1[0], cp1[1], p[0], p[1]);\n      } else {\n        ctx.lineTo(p[0], p[1]);\n      }\n    }\n\n    prevIdx = idx;\n    idx += dir;\n  }\n\n  return k;\n}\n/**\n * Draw smoothed line in non-monotone, in may cause undesired curve in extreme\n * situations. This should be used when points are non-monotone neither in x or\n * y dimension.\n */\n\n\nfunction drawNonMono(ctx, points, start, segLen, allLen, dir, smoothMin, smoothMax, smooth, smoothMonotone, connectNulls) {\n  var prevIdx = 0;\n  var idx = start;\n\n  for (var k = 0; k < segLen; k++) {\n    var p = points[idx];\n\n    if (idx >= allLen || idx < 0) {\n      break;\n    }\n\n    if (isPointNull(p)) {\n      if (connectNulls) {\n        idx += dir;\n        continue;\n      }\n\n      break;\n    }\n\n    if (idx === start) {\n      ctx[dir > 0 ? 'moveTo' : 'lineTo'](p[0], p[1]);\n      v2Copy(cp0, p);\n    } else {\n      if (smooth > 0) {\n        var nextIdx = idx + dir;\n        var nextP = points[nextIdx];\n\n        if (connectNulls) {\n          // Find next point not null\n          while (nextP && isPointNull(points[nextIdx])) {\n            nextIdx += dir;\n            nextP = points[nextIdx];\n          }\n        }\n\n        var ratioNextSeg = 0.5;\n        var prevP = points[prevIdx];\n        var nextP = points[nextIdx]; // Last point\n\n        if (!nextP || isPointNull(nextP)) {\n          v2Copy(cp1, p);\n        } else {\n          // If next data is null in not connect case\n          if (isPointNull(nextP) && !connectNulls) {\n            nextP = p;\n          }\n\n          vec2.sub(v, nextP, prevP);\n          var lenPrevSeg;\n          var lenNextSeg;\n\n          if (smoothMonotone === 'x' || smoothMonotone === 'y') {\n            var dim = smoothMonotone === 'x' ? 0 : 1;\n            lenPrevSeg = Math.abs(p[dim] - prevP[dim]);\n            lenNextSeg = Math.abs(p[dim] - nextP[dim]);\n          } else {\n            lenPrevSeg = vec2.dist(p, prevP);\n            lenNextSeg = vec2.dist(p, nextP);\n          } // Use ratio of seg length\n\n\n          ratioNextSeg = lenNextSeg / (lenNextSeg + lenPrevSeg);\n          scaleAndAdd(cp1, p, v, -smooth * (1 - ratioNextSeg));\n        } // Smooth constraint\n\n\n        vec2Min(cp0, cp0, smoothMax);\n        vec2Max(cp0, cp0, smoothMin);\n        vec2Min(cp1, cp1, smoothMax);\n        vec2Max(cp1, cp1, smoothMin);\n        ctx.bezierCurveTo(cp0[0], cp0[1], cp1[0], cp1[1], p[0], p[1]); // cp0 of next segment\n\n        scaleAndAdd(cp0, p, v, smooth * ratioNextSeg);\n      } else {\n        ctx.lineTo(p[0], p[1]);\n      }\n    }\n\n    prevIdx = idx;\n    idx += dir;\n  }\n\n  return k;\n}\n\nfunction getBoundingBox(points, smoothConstraint) {\n  var ptMin = [Infinity, Infinity];\n  var ptMax = [-Infinity, -Infinity];\n\n  if (smoothConstraint) {\n    for (var i = 0; i < points.length; i++) {\n      var pt = points[i];\n\n      if (pt[0] < ptMin[0]) {\n        ptMin[0] = pt[0];\n      }\n\n      if (pt[1] < ptMin[1]) {\n        ptMin[1] = pt[1];\n      }\n\n      if (pt[0] > ptMax[0]) {\n        ptMax[0] = pt[0];\n      }\n\n      if (pt[1] > ptMax[1]) {\n        ptMax[1] = pt[1];\n      }\n    }\n  }\n\n  return {\n    min: smoothConstraint ? ptMin : ptMax,\n    max: smoothConstraint ? ptMax : ptMin\n  };\n}\n\nvar Polyline = Path.extend({\n  type: 'ec-polyline',\n  shape: {\n    points: [],\n    smooth: 0,\n    smoothConstraint: true,\n    smoothMonotone: null,\n    connectNulls: false\n  },\n  style: {\n    fill: null,\n    stroke: '#000'\n  },\n  brush: fixClipWithShadow(Path.prototype.brush),\n  buildPath: function (ctx, shape) {\n    var points = shape.points;\n    var i = 0;\n    var len = points.length;\n    var result = getBoundingBox(points, shape.smoothConstraint);\n\n    if (shape.connectNulls) {\n      // Must remove first and last null values avoid draw error in polygon\n      for (; len > 0; len--) {\n        if (!isPointNull(points[len - 1])) {\n          break;\n        }\n      }\n\n      for (; i < len; i++) {\n        if (!isPointNull(points[i])) {\n          break;\n        }\n      }\n    }\n\n    while (i < len) {\n      i += drawSegment(ctx, points, i, len, len, 1, result.min, result.max, shape.smooth, shape.smoothMonotone, shape.connectNulls) + 1;\n    }\n  }\n});\nvar Polygon = Path.extend({\n  type: 'ec-polygon',\n  shape: {\n    points: [],\n    // Offset between stacked base points and points\n    stackedOnPoints: [],\n    smooth: 0,\n    stackedOnSmooth: 0,\n    smoothConstraint: true,\n    smoothMonotone: null,\n    connectNulls: false\n  },\n  brush: fixClipWithShadow(Path.prototype.brush),\n  buildPath: function (ctx, shape) {\n    var points = shape.points;\n    var stackedOnPoints = shape.stackedOnPoints;\n    var i = 0;\n    var len = points.length;\n    var smoothMonotone = shape.smoothMonotone;\n    var bbox = getBoundingBox(points, shape.smoothConstraint);\n    var stackedOnBBox = getBoundingBox(stackedOnPoints, shape.smoothConstraint);\n\n    if (shape.connectNulls) {\n      // Must remove first and last null values avoid draw error in polygon\n      for (; len > 0; len--) {\n        if (!isPointNull(points[len - 1])) {\n          break;\n        }\n      }\n\n      for (; i < len; i++) {\n        if (!isPointNull(points[i])) {\n          break;\n        }\n      }\n    }\n\n    while (i < len) {\n      var k = drawSegment(ctx, points, i, len, len, 1, bbox.min, bbox.max, shape.smooth, smoothMonotone, shape.connectNulls);\n      drawSegment(ctx, stackedOnPoints, i + k - 1, k, len, -1, stackedOnBBox.min, stackedOnBBox.max, shape.stackedOnSmooth, smoothMonotone, shape.connectNulls);\n      i += k + 1;\n      ctx.closePath();\n    }\n  }\n});\nexports.Polyline = Polyline;\nexports.Polygon = Polygon;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar clazzUtil = require(\"../../util/clazz\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar axisPointerModelHelper = require(\"./modelHelper\");\n\nvar eventTool = require(\"zrender/lib/core/event\");\n\nvar throttleUtil = require(\"../../util/throttle\");\n\nvar _model = require(\"../../util/model\");\n\nvar makeInner = _model.makeInner;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar inner = makeInner();\nvar clone = zrUtil.clone;\nvar bind = zrUtil.bind;\n/**\n * Base axis pointer class in 2D.\n * Implemenents {module:echarts/component/axis/IAxisPointer}.\n */\n\nfunction BaseAxisPointer() {}\n\nBaseAxisPointer.prototype = {\n  /**\n   * @private\n   */\n  _group: null,\n\n  /**\n   * @private\n   */\n  _lastGraphicKey: null,\n\n  /**\n   * @private\n   */\n  _handle: null,\n\n  /**\n   * @private\n   */\n  _dragging: false,\n\n  /**\n   * @private\n   */\n  _lastValue: null,\n\n  /**\n   * @private\n   */\n  _lastStatus: null,\n\n  /**\n   * @private\n   */\n  _payloadInfo: null,\n\n  /**\n   * In px, arbitrary value. Do not set too small,\n   * no animation is ok for most cases.\n   * @protected\n   */\n  animationThreshold: 15,\n\n  /**\n   * @implement\n   */\n  render: function (axisModel, axisPointerModel, api, forceRender) {\n    var value = axisPointerModel.get('value');\n    var status = axisPointerModel.get('status'); // Bind them to `this`, not in closure, otherwise they will not\n    // be replaced when user calling setOption in not merge mode.\n\n    this._axisModel = axisModel;\n    this._axisPointerModel = axisPointerModel;\n    this._api = api; // Optimize: `render` will be called repeatly during mouse move.\n    // So it is power consuming if performing `render` each time,\n    // especially on mobile device.\n\n    if (!forceRender && this._lastValue === value && this._lastStatus === status) {\n      return;\n    }\n\n    this._lastValue = value;\n    this._lastStatus = status;\n    var group = this._group;\n    var handle = this._handle;\n\n    if (!status || status === 'hide') {\n      // Do not clear here, for animation better.\n      group && group.hide();\n      handle && handle.hide();\n      return;\n    }\n\n    group && group.show();\n    handle && handle.show(); // Otherwise status is 'show'\n\n    var elOption = {};\n    this.makeElOption(elOption, value, axisModel, axisPointerModel, api); // Enable change axis pointer type.\n\n    var graphicKey = elOption.graphicKey;\n\n    if (graphicKey !== this._lastGraphicKey) {\n      this.clear(api);\n    }\n\n    this._lastGraphicKey = graphicKey;\n    var moveAnimation = this._moveAnimation = this.determineAnimation(axisModel, axisPointerModel);\n\n    if (!group) {\n      group = this._group = new graphic.Group();\n      this.createPointerEl(group, elOption, axisModel, axisPointerModel);\n      this.createLabelEl(group, elOption, axisModel, axisPointerModel);\n      api.getZr().add(group);\n    } else {\n      var doUpdateProps = zrUtil.curry(updateProps, axisPointerModel, moveAnimation);\n      this.updatePointerEl(group, elOption, doUpdateProps, axisPointerModel);\n      this.updateLabelEl(group, elOption, doUpdateProps, axisPointerModel);\n    }\n\n    updateMandatoryProps(group, axisPointerModel, true);\n\n    this._renderHandle(value);\n  },\n\n  /**\n   * @implement\n   */\n  remove: function (api) {\n    this.clear(api);\n  },\n\n  /**\n   * @implement\n   */\n  dispose: function (api) {\n    this.clear(api);\n  },\n\n  /**\n   * @protected\n   */\n  determineAnimation: function (axisModel, axisPointerModel) {\n    var animation = axisPointerModel.get('animation');\n    var axis = axisModel.axis;\n    var isCategoryAxis = axis.type === 'category';\n    var useSnap = axisPointerModel.get('snap'); // Value axis without snap always do not snap.\n\n    if (!useSnap && !isCategoryAxis) {\n      return false;\n    }\n\n    if (animation === 'auto' || animation == null) {\n      var animationThreshold = this.animationThreshold;\n\n      if (isCategoryAxis && axis.getBandWidth() > animationThreshold) {\n        return true;\n      } // It is important to auto animation when snap used. Consider if there is\n      // a dataZoom, animation will be disabled when too many points exist, while\n      // it will be enabled for better visual effect when little points exist.\n\n\n      if (useSnap) {\n        var seriesDataCount = axisPointerModelHelper.getAxisInfo(axisModel).seriesDataCount;\n        var axisExtent = axis.getExtent(); // Approximate band width\n\n        return Math.abs(axisExtent[0] - axisExtent[1]) / seriesDataCount > animationThreshold;\n      }\n\n      return false;\n    }\n\n    return animation === true;\n  },\n\n  /**\n   * add {pointer, label, graphicKey} to elOption\n   * @protected\n   */\n  makeElOption: function (elOption, value, axisModel, axisPointerModel, api) {// Shoule be implemenented by sub-class.\n  },\n\n  /**\n   * @protected\n   */\n  createPointerEl: function (group, elOption, axisModel, axisPointerModel) {\n    var pointerOption = elOption.pointer;\n\n    if (pointerOption) {\n      var pointerEl = inner(group).pointerEl = new graphic[pointerOption.type](clone(elOption.pointer));\n      group.add(pointerEl);\n    }\n  },\n\n  /**\n   * @protected\n   */\n  createLabelEl: function (group, elOption, axisModel, axisPointerModel) {\n    if (elOption.label) {\n      var labelEl = inner(group).labelEl = new graphic.Rect(clone(elOption.label));\n      group.add(labelEl);\n      updateLabelShowHide(labelEl, axisPointerModel);\n    }\n  },\n\n  /**\n   * @protected\n   */\n  updatePointerEl: function (group, elOption, updateProps) {\n    var pointerEl = inner(group).pointerEl;\n\n    if (pointerEl && elOption.pointer) {\n      pointerEl.setStyle(elOption.pointer.style);\n      updateProps(pointerEl, {\n        shape: elOption.pointer.shape\n      });\n    }\n  },\n\n  /**\n   * @protected\n   */\n  updateLabelEl: function (group, elOption, updateProps, axisPointerModel) {\n    var labelEl = inner(group).labelEl;\n\n    if (labelEl) {\n      labelEl.setStyle(elOption.label.style);\n      updateProps(labelEl, {\n        // Consider text length change in vertical axis, animation should\n        // be used on shape, otherwise the effect will be weird.\n        shape: elOption.label.shape,\n        position: elOption.label.position\n      });\n      updateLabelShowHide(labelEl, axisPointerModel);\n    }\n  },\n\n  /**\n   * @private\n   */\n  _renderHandle: function (value) {\n    if (this._dragging || !this.updateHandleTransform) {\n      return;\n    }\n\n    var axisPointerModel = this._axisPointerModel;\n\n    var zr = this._api.getZr();\n\n    var handle = this._handle;\n    var handleModel = axisPointerModel.getModel('handle');\n    var status = axisPointerModel.get('status');\n\n    if (!handleModel.get('show') || !status || status === 'hide') {\n      handle && zr.remove(handle);\n      this._handle = null;\n      return;\n    }\n\n    var isInit;\n\n    if (!this._handle) {\n      isInit = true;\n      handle = this._handle = graphic.createIcon(handleModel.get('icon'), {\n        cursor: 'move',\n        draggable: true,\n        onmousemove: function (e) {\n          // Fot mobile devicem, prevent screen slider on the button.\n          eventTool.stop(e.event);\n        },\n        onmousedown: bind(this._onHandleDragMove, this, 0, 0),\n        drift: bind(this._onHandleDragMove, this),\n        ondragend: bind(this._onHandleDragEnd, this)\n      });\n      zr.add(handle);\n    }\n\n    updateMandatoryProps(handle, axisPointerModel, false); // update style\n\n    var includeStyles = ['color', 'borderColor', 'borderWidth', 'opacity', 'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY'];\n    handle.setStyle(handleModel.getItemStyle(null, includeStyles)); // update position\n\n    var handleSize = handleModel.get('size');\n\n    if (!zrUtil.isArray(handleSize)) {\n      handleSize = [handleSize, handleSize];\n    }\n\n    handle.attr('scale', [handleSize[0] / 2, handleSize[1] / 2]);\n    throttleUtil.createOrUpdate(this, '_doDispatchAxisPointer', handleModel.get('throttle') || 0, 'fixRate');\n\n    this._moveHandleToValue(value, isInit);\n  },\n\n  /**\n   * @private\n   */\n  _moveHandleToValue: function (value, isInit) {\n    updateProps(this._axisPointerModel, !isInit && this._moveAnimation, this._handle, getHandleTransProps(this.getHandleTransform(value, this._axisModel, this._axisPointerModel)));\n  },\n\n  /**\n   * @private\n   */\n  _onHandleDragMove: function (dx, dy) {\n    var handle = this._handle;\n\n    if (!handle) {\n      return;\n    }\n\n    this._dragging = true; // Persistent for throttle.\n\n    var trans = this.updateHandleTransform(getHandleTransProps(handle), [dx, dy], this._axisModel, this._axisPointerModel);\n    this._payloadInfo = trans;\n    handle.stopAnimation();\n    handle.attr(getHandleTransProps(trans));\n    inner(handle).lastProp = null;\n\n    this._doDispatchAxisPointer();\n  },\n\n  /**\n   * Throttled method.\n   * @private\n   */\n  _doDispatchAxisPointer: function () {\n    var handle = this._handle;\n\n    if (!handle) {\n      return;\n    }\n\n    var payloadInfo = this._payloadInfo;\n    var axisModel = this._axisModel;\n\n    this._api.dispatchAction({\n      type: 'updateAxisPointer',\n      x: payloadInfo.cursorPoint[0],\n      y: payloadInfo.cursorPoint[1],\n      tooltipOption: payloadInfo.tooltipOption,\n      axesInfo: [{\n        axisDim: axisModel.axis.dim,\n        axisIndex: axisModel.componentIndex\n      }]\n    });\n  },\n\n  /**\n   * @private\n   */\n  _onHandleDragEnd: function (moveAnimation) {\n    this._dragging = false;\n    var handle = this._handle;\n\n    if (!handle) {\n      return;\n    }\n\n    var value = this._axisPointerModel.get('value'); // Consider snap or categroy axis, handle may be not consistent with\n    // axisPointer. So move handle to align the exact value position when\n    // drag ended.\n\n\n    this._moveHandleToValue(value); // For the effect: tooltip will be shown when finger holding on handle\n    // button, and will be hidden after finger left handle button.\n\n\n    this._api.dispatchAction({\n      type: 'hideTip'\n    });\n  },\n\n  /**\n   * Should be implemenented by sub-class if support `handle`.\n   * @protected\n   * @param {number} value\n   * @param {module:echarts/model/Model} axisModel\n   * @param {module:echarts/model/Model} axisPointerModel\n   * @return {Object} {position: [x, y], rotation: 0}\n   */\n  getHandleTransform: null,\n\n  /**\n   * * Should be implemenented by sub-class if support `handle`.\n   * @protected\n   * @param {Object} transform {position, rotation}\n   * @param {Array.<number>} delta [dx, dy]\n   * @param {module:echarts/model/Model} axisModel\n   * @param {module:echarts/model/Model} axisPointerModel\n   * @return {Object} {position: [x, y], rotation: 0, cursorPoint: [x, y]}\n   */\n  updateHandleTransform: null,\n\n  /**\n   * @private\n   */\n  clear: function (api) {\n    this._lastValue = null;\n    this._lastStatus = null;\n    var zr = api.getZr();\n    var group = this._group;\n    var handle = this._handle;\n\n    if (zr && group) {\n      this._lastGraphicKey = null;\n      group && zr.remove(group);\n      handle && zr.remove(handle);\n      this._group = null;\n      this._handle = null;\n      this._payloadInfo = null;\n    }\n  },\n\n  /**\n   * @protected\n   */\n  doClear: function () {// Implemented by sub-class if necessary.\n  },\n\n  /**\n   * @protected\n   * @param {Array.<number>} xy\n   * @param {Array.<number>} wh\n   * @param {number} [xDimIndex=0] or 1\n   */\n  buildLabel: function (xy, wh, xDimIndex) {\n    xDimIndex = xDimIndex || 0;\n    return {\n      x: xy[xDimIndex],\n      y: xy[1 - xDimIndex],\n      width: wh[xDimIndex],\n      height: wh[1 - xDimIndex]\n    };\n  }\n};\nBaseAxisPointer.prototype.constructor = BaseAxisPointer;\n\nfunction updateProps(animationModel, moveAnimation, el, props) {\n  // Animation optimize.\n  if (!propsEqual(inner(el).lastProp, props)) {\n    inner(el).lastProp = props;\n    moveAnimation ? graphic.updateProps(el, props, animationModel) : (el.stopAnimation(), el.attr(props));\n  }\n}\n\nfunction propsEqual(lastProps, newProps) {\n  if (zrUtil.isObject(lastProps) && zrUtil.isObject(newProps)) {\n    var equals = true;\n    zrUtil.each(newProps, function (item, key) {\n      equals = equals && propsEqual(lastProps[key], item);\n    });\n    return !!equals;\n  } else {\n    return lastProps === newProps;\n  }\n}\n\nfunction updateLabelShowHide(labelEl, axisPointerModel) {\n  labelEl[axisPointerModel.get('label.show') ? 'show' : 'hide']();\n}\n\nfunction getHandleTransProps(trans) {\n  return {\n    position: trans.position.slice(),\n    rotation: trans.rotation || 0\n  };\n}\n\nfunction updateMandatoryProps(group, axisPointerModel, silent) {\n  var z = axisPointerModel.get('z');\n  var zlevel = axisPointerModel.get('zlevel');\n  group && group.traverse(function (el) {\n    if (el.type !== 'group') {\n      z != null && (el.z = z);\n      zlevel != null && (el.zlevel = zlevel);\n      el.silent = silent;\n    }\n  });\n}\n\nclazzUtil.enableClassExtend(BaseAxisPointer);\nvar _default = BaseAxisPointer;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _default = {\n  getBoxLayoutParams: function () {\n    return {\n      left: this.get('left'),\n      top: this.get('top'),\n      right: this.get('right'),\n      bottom: this.get('bottom'),\n      width: this.get('width'),\n      height: this.get('height')\n    };\n  }\n};\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _model = require(\"../../util/model\");\n\nvar makeInner = _model.makeInner;\nvar normalizeToArray = _model.normalizeToArray;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar inner = makeInner();\n\nfunction getNearestColorPalette(colors, requestColorNum) {\n  var paletteNum = colors.length; // TODO colors must be in order\n\n  for (var i = 0; i < paletteNum; i++) {\n    if (colors[i].length > requestColorNum) {\n      return colors[i];\n    }\n  }\n\n  return colors[paletteNum - 1];\n}\n\nvar _default = {\n  clearColorPalette: function () {\n    inner(this).colorIdx = 0;\n    inner(this).colorNameMap = {};\n  },\n\n  /**\n   * @param {string} name MUST NOT be null/undefined. Otherwise call this function\n   *                 twise with the same parameters will get different result.\n   * @param {Object} [scope=this]\n   * @param {Object} [requestColorNum]\n   * @return {string} color string.\n   */\n  getColorFromPalette: function (name, scope, requestColorNum) {\n    scope = scope || this;\n    var scopeFields = inner(scope);\n    var colorIdx = scopeFields.colorIdx || 0;\n    var colorNameMap = scopeFields.colorNameMap = scopeFields.colorNameMap || {}; // Use `hasOwnProperty` to avoid conflict with Object.prototype.\n\n    if (colorNameMap.hasOwnProperty(name)) {\n      return colorNameMap[name];\n    }\n\n    var defaultColorPalette = normalizeToArray(this.get('color', true));\n    var layeredColorPalette = this.get('colorLayer', true);\n    var colorPalette = requestColorNum == null || !layeredColorPalette ? defaultColorPalette : getNearestColorPalette(layeredColorPalette, requestColorNum); // In case can't find in layered color palette.\n\n    colorPalette = colorPalette || defaultColorPalette;\n\n    if (!colorPalette || !colorPalette.length) {\n      return;\n    }\n\n    var color = colorPalette[colorIdx];\n\n    if (name) {\n      colorNameMap[name] = color;\n    }\n\n    scopeFields.colorIdx = (colorIdx + 1) % colorPalette.length;\n    return color;\n  }\n};\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar each = _util.each;\n\nvar Group = require(\"zrender/lib/container/Group\");\n\nvar componentUtil = require(\"../util/component\");\n\nvar clazzUtil = require(\"../util/clazz\");\n\nvar modelUtil = require(\"../util/model\");\n\nvar graphicUtil = require(\"../util/graphic\");\n\nvar _task = require(\"../stream/task\");\n\nvar createTask = _task.createTask;\n\nvar createRenderPlanner = require(\"../chart/helper/createRenderPlanner\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar inner = modelUtil.makeInner();\nvar renderPlanner = createRenderPlanner();\n\nfunction Chart() {\n  /**\n   * @type {module:zrender/container/Group}\n   * @readOnly\n   */\n  this.group = new Group();\n  /**\n   * @type {string}\n   * @readOnly\n   */\n\n  this.uid = componentUtil.getUID('viewChart');\n  this.renderTask = createTask({\n    plan: renderTaskPlan,\n    reset: renderTaskReset\n  });\n  this.renderTask.context = {\n    view: this\n  };\n}\n\nChart.prototype = {\n  type: 'chart',\n\n  /**\n   * Init the chart.\n   * @param  {module:echarts/model/Global} ecModel\n   * @param  {module:echarts/ExtensionAPI} api\n   */\n  init: function (ecModel, api) {},\n\n  /**\n   * Render the chart.\n   * @param  {module:echarts/model/Series} seriesModel\n   * @param  {module:echarts/model/Global} ecModel\n   * @param  {module:echarts/ExtensionAPI} api\n   * @param  {Object} payload\n   */\n  render: function (seriesModel, ecModel, api, payload) {},\n\n  /**\n   * Highlight series or specified data item.\n   * @param  {module:echarts/model/Series} seriesModel\n   * @param  {module:echarts/model/Global} ecModel\n   * @param  {module:echarts/ExtensionAPI} api\n   * @param  {Object} payload\n   */\n  highlight: function (seriesModel, ecModel, api, payload) {\n    toggleHighlight(seriesModel.getData(), payload, 'emphasis');\n  },\n\n  /**\n   * Downplay series or specified data item.\n   * @param  {module:echarts/model/Series} seriesModel\n   * @param  {module:echarts/model/Global} ecModel\n   * @param  {module:echarts/ExtensionAPI} api\n   * @param  {Object} payload\n   */\n  downplay: function (seriesModel, ecModel, api, payload) {\n    toggleHighlight(seriesModel.getData(), payload, 'normal');\n  },\n\n  /**\n   * Remove self.\n   * @param  {module:echarts/model/Global} ecModel\n   * @param  {module:echarts/ExtensionAPI} api\n   */\n  remove: function (ecModel, api) {\n    this.group.removeAll();\n  },\n\n  /**\n   * Dispose self.\n   * @param  {module:echarts/model/Global} ecModel\n   * @param  {module:echarts/ExtensionAPI} api\n   */\n  dispose: function () {},\n\n  /**\n   * Rendering preparation in progressive mode.\n   * @param  {module:echarts/model/Series} seriesModel\n   * @param  {module:echarts/model/Global} ecModel\n   * @param  {module:echarts/ExtensionAPI} api\n   * @param  {Object} payload\n   */\n  incrementalPrepareRender: null,\n\n  /**\n   * Render in progressive mode.\n   * @param  {Object} params See taskParams in `stream/task.js`\n   * @param  {module:echarts/model/Series} seriesModel\n   * @param  {module:echarts/model/Global} ecModel\n   * @param  {module:echarts/ExtensionAPI} api\n   * @param  {Object} payload\n   */\n  incrementalRender: null,\n\n  /**\n   * Update transform directly.\n   * @param  {module:echarts/model/Series} seriesModel\n   * @param  {module:echarts/model/Global} ecModel\n   * @param  {module:echarts/ExtensionAPI} api\n   * @param  {Object} payload\n   * @return {Object} {update: true}\n   */\n  updateTransform: null,\n\n  /**\n   * The view contains the given point.\n   * @interface\n   * @param {Array.<number>} point\n   * @return {boolean}\n   */\n  // containPoint: function () {}\n\n  /**\n   * @param {string} eventType\n   * @param {Object} query\n   * @param {module:zrender/Element} targetEl\n   * @param {Object} packedEvent\n   * @return {boolen} Pass only when return `true`.\n   */\n  filterForExposedEvent: null\n};\nvar chartProto = Chart.prototype;\n\nchartProto.updateView = chartProto.updateLayout = chartProto.updateVisual = function (seriesModel, ecModel, api, payload) {\n  this.render(seriesModel, ecModel, api, payload);\n};\n/**\n * Set state of single element\n * @param {module:zrender/Element} el\n * @param {string} state 'normal'|'emphasis'\n * @param {number} highlightDigit\n */\n\n\nfunction elSetState(el, state, highlightDigit) {\n  if (el) {\n    el.trigger(state, highlightDigit);\n\n    if (el.isGroup // Simple optimize.\n    && !graphicUtil.isHighDownDispatcher(el)) {\n      for (var i = 0, len = el.childCount(); i < len; i++) {\n        elSetState(el.childAt(i), state, highlightDigit);\n      }\n    }\n  }\n}\n/**\n * @param {module:echarts/data/List} data\n * @param {Object} payload\n * @param {string} state 'normal'|'emphasis'\n */\n\n\nfunction toggleHighlight(data, payload, state) {\n  var dataIndex = modelUtil.queryDataIndex(data, payload);\n  var highlightDigit = payload && payload.highlightKey != null ? graphicUtil.getHighlightDigit(payload.highlightKey) : null;\n\n  if (dataIndex != null) {\n    each(modelUtil.normalizeToArray(dataIndex), function (dataIdx) {\n      elSetState(data.getItemGraphicEl(dataIdx), state, highlightDigit);\n    });\n  } else {\n    data.eachItemGraphicEl(function (el) {\n      elSetState(el, state, highlightDigit);\n    });\n  }\n} // Enable Chart.extend.\n\n\nclazzUtil.enableClassExtend(Chart, ['dispose']); // Add capability of registerClass, getClass, hasClass, registerSubTypeDefaulter and so on.\n\nclazzUtil.enableClassManagement(Chart, {\n  registerWhenExtend: true\n});\n\nChart.markUpdateMethod = function (payload, methodName) {\n  inner(payload).updateMethod = methodName;\n};\n\nfunction renderTaskPlan(context) {\n  return renderPlanner(context.model);\n}\n\nfunction renderTaskReset(context) {\n  var seriesModel = context.model;\n  var ecModel = context.ecModel;\n  var api = context.api;\n  var payload = context.payload; // ???! remove updateView updateVisual\n\n  var progressiveRender = seriesModel.pipelineContext.progressiveRender;\n  var view = context.view;\n  var updateMethod = payload && inner(payload).updateMethod;\n  var methodName = progressiveRender ? 'incrementalPrepareRender' : updateMethod && view[updateMethod] ? updateMethod // `appendData` is also supported when data amount\n  // is less than progressive threshold.\n  : 'render';\n\n  if (methodName !== 'render') {\n    view[methodName](seriesModel, ecModel, api, payload);\n  }\n\n  return progressMethodMap[methodName];\n}\n\nvar progressMethodMap = {\n  incrementalPrepareRender: {\n    progress: function (params, context) {\n      context.view.incrementalRender(params, context.model, context.ecModel, context.api, context.payload);\n    }\n  },\n  render: {\n    // Put view.render in `progress` to support appendData. But in this case\n    // view.render should not be called in reset, otherwise it will be called\n    // twise. Use `forceFirstProgress` to make sure that view.render is called\n    // in any cases.\n    forceFirstProgress: true,\n    progress: function (params, context) {\n      context.view.render(context.model, context.ecModel, context.api, context.payload);\n    }\n  }\n};\nvar _default = Chart;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar _model = require(\"../../util/model\");\n\nvar makeInner = _model.makeInner;\n\nvar modelHelper = require(\"./modelHelper\");\n\nvar findPointFromSeries = require(\"./findPointFromSeries\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar each = zrUtil.each;\nvar curry = zrUtil.curry;\nvar inner = makeInner();\n/**\n * Basic logic: check all axis, if they do not demand show/highlight,\n * then hide/downplay them.\n *\n * @param {Object} coordSysAxesInfo\n * @param {Object} payload\n * @param {string} [payload.currTrigger] 'click' | 'mousemove' | 'leave'\n * @param {Array.<number>} [payload.x] x and y, which are mandatory, specify a point to\n *              trigger axisPointer and tooltip.\n * @param {Array.<number>} [payload.y] x and y, which are mandatory, specify a point to\n *              trigger axisPointer and tooltip.\n * @param {Object} [payload.seriesIndex] finder, optional, restrict target axes.\n * @param {Object} [payload.dataIndex] finder, restrict target axes.\n * @param {Object} [payload.axesInfo] finder, restrict target axes.\n *        [{\n *          axisDim: 'x'|'y'|'angle'|...,\n *          axisIndex: ...,\n *          value: ...\n *        }, ...]\n * @param {Function} [payload.dispatchAction]\n * @param {Object} [payload.tooltipOption]\n * @param {Object|Array.<number>|Function} [payload.position] Tooltip position,\n *        which can be specified in dispatchAction\n * @param {module:echarts/model/Global} ecModel\n * @param {module:echarts/ExtensionAPI} api\n * @return {Object} content of event obj for echarts.connect.\n */\n\nfunction _default(payload, ecModel, api) {\n  var currTrigger = payload.currTrigger;\n  var point = [payload.x, payload.y];\n  var finder = payload;\n  var dispatchAction = payload.dispatchAction || zrUtil.bind(api.dispatchAction, api);\n  var coordSysAxesInfo = ecModel.getComponent('axisPointer').coordSysAxesInfo; // Pending\n  // See #6121. But we are not able to reproduce it yet.\n\n  if (!coordSysAxesInfo) {\n    return;\n  }\n\n  if (illegalPoint(point)) {\n    // Used in the default behavior of `connection`: use the sample seriesIndex\n    // and dataIndex. And also used in the tooltipView trigger.\n    point = findPointFromSeries({\n      seriesIndex: finder.seriesIndex,\n      // Do not use dataIndexInside from other ec instance.\n      // FIXME: auto detect it?\n      dataIndex: finder.dataIndex\n    }, ecModel).point;\n  }\n\n  var isIllegalPoint = illegalPoint(point); // Axis and value can be specified when calling dispatchAction({type: 'updateAxisPointer'}).\n  // Notice: In this case, it is difficult to get the `point` (which is necessary to show\n  // tooltip, so if point is not given, we just use the point found by sample seriesIndex\n  // and dataIndex.\n\n  var inputAxesInfo = finder.axesInfo;\n  var axesInfo = coordSysAxesInfo.axesInfo;\n  var shouldHide = currTrigger === 'leave' || illegalPoint(point);\n  var outputFinder = {};\n  var showValueMap = {};\n  var dataByCoordSys = {\n    list: [],\n    map: {}\n  };\n  var updaters = {\n    showPointer: curry(showPointer, showValueMap),\n    showTooltip: curry(showTooltip, dataByCoordSys)\n  }; // Process for triggered axes.\n\n  each(coordSysAxesInfo.coordSysMap, function (coordSys, coordSysKey) {\n    // If a point given, it must be contained by the coordinate system.\n    var coordSysContainsPoint = isIllegalPoint || coordSys.containPoint(point);\n    each(coordSysAxesInfo.coordSysAxesInfo[coordSysKey], function (axisInfo, key) {\n      var axis = axisInfo.axis;\n      var inputAxisInfo = findInputAxisInfo(inputAxesInfo, axisInfo); // If no inputAxesInfo, no axis is restricted.\n\n      if (!shouldHide && coordSysContainsPoint && (!inputAxesInfo || inputAxisInfo)) {\n        var val = inputAxisInfo && inputAxisInfo.value;\n\n        if (val == null && !isIllegalPoint) {\n          val = axis.pointToData(point);\n        }\n\n        val != null && processOnAxis(axisInfo, val, updaters, false, outputFinder);\n      }\n    });\n  }); // Process for linked axes.\n\n  var linkTriggers = {};\n  each(axesInfo, function (tarAxisInfo, tarKey) {\n    var linkGroup = tarAxisInfo.linkGroup; // If axis has been triggered in the previous stage, it should not be triggered by link.\n\n    if (linkGroup && !showValueMap[tarKey]) {\n      each(linkGroup.axesInfo, function (srcAxisInfo, srcKey) {\n        var srcValItem = showValueMap[srcKey]; // If srcValItem exist, source axis is triggered, so link to target axis.\n\n        if (srcAxisInfo !== tarAxisInfo && srcValItem) {\n          var val = srcValItem.value;\n          linkGroup.mapper && (val = tarAxisInfo.axis.scale.parse(linkGroup.mapper(val, makeMapperParam(srcAxisInfo), makeMapperParam(tarAxisInfo))));\n          linkTriggers[tarAxisInfo.key] = val;\n        }\n      });\n    }\n  });\n  each(linkTriggers, function (val, tarKey) {\n    processOnAxis(axesInfo[tarKey], val, updaters, true, outputFinder);\n  });\n  updateModelActually(showValueMap, axesInfo, outputFinder);\n  dispatchTooltipActually(dataByCoordSys, point, payload, dispatchAction);\n  dispatchHighDownActually(axesInfo, dispatchAction, api);\n  return outputFinder;\n}\n\nfunction processOnAxis(axisInfo, newValue, updaters, dontSnap, outputFinder) {\n  var axis = axisInfo.axis;\n\n  if (axis.scale.isBlank() || !axis.containData(newValue)) {\n    return;\n  }\n\n  if (!axisInfo.involveSeries) {\n    updaters.showPointer(axisInfo, newValue);\n    return;\n  } // Heavy calculation. So put it after axis.containData checking.\n\n\n  var payloadInfo = buildPayloadsBySeries(newValue, axisInfo);\n  var payloadBatch = payloadInfo.payloadBatch;\n  var snapToValue = payloadInfo.snapToValue; // Fill content of event obj for echarts.connect.\n  // By default use the first involved series data as a sample to connect.\n\n  if (payloadBatch[0] && outputFinder.seriesIndex == null) {\n    zrUtil.extend(outputFinder, payloadBatch[0]);\n  } // If no linkSource input, this process is for collecting link\n  // target, where snap should not be accepted.\n\n\n  if (!dontSnap && axisInfo.snap) {\n    if (axis.containData(snapToValue) && snapToValue != null) {\n      newValue = snapToValue;\n    }\n  }\n\n  updaters.showPointer(axisInfo, newValue, payloadBatch, outputFinder); // Tooltip should always be snapToValue, otherwise there will be\n  // incorrect \"axis value ~ series value\" mapping displayed in tooltip.\n\n  updaters.showTooltip(axisInfo, payloadInfo, snapToValue);\n}\n\nfunction buildPayloadsBySeries(value, axisInfo) {\n  var axis = axisInfo.axis;\n  var dim = axis.dim;\n  var snapToValue = value;\n  var payloadBatch = [];\n  var minDist = Number.MAX_VALUE;\n  var minDiff = -1;\n  each(axisInfo.seriesModels, function (series, idx) {\n    var dataDim = series.getData().mapDimension(dim, true);\n    var seriesNestestValue;\n    var dataIndices;\n\n    if (series.getAxisTooltipData) {\n      var result = series.getAxisTooltipData(dataDim, value, axis);\n      dataIndices = result.dataIndices;\n      seriesNestestValue = result.nestestValue;\n    } else {\n      dataIndices = series.getData().indicesOfNearest(dataDim[0], value, // Add a threshold to avoid find the wrong dataIndex\n      // when data length is not same.\n      // false,\n      axis.type === 'category' ? 0.5 : null);\n\n      if (!dataIndices.length) {\n        return;\n      }\n\n      seriesNestestValue = series.getData().get(dataDim[0], dataIndices[0]);\n    }\n\n    if (seriesNestestValue == null || !isFinite(seriesNestestValue)) {\n      return;\n    }\n\n    var diff = value - seriesNestestValue;\n    var dist = Math.abs(diff); // Consider category case\n\n    if (dist <= minDist) {\n      if (dist < minDist || diff >= 0 && minDiff < 0) {\n        minDist = dist;\n        minDiff = diff;\n        snapToValue = seriesNestestValue;\n        payloadBatch.length = 0;\n      }\n\n      each(dataIndices, function (dataIndex) {\n        payloadBatch.push({\n          seriesIndex: series.seriesIndex,\n          dataIndexInside: dataIndex,\n          dataIndex: series.getData().getRawIndex(dataIndex)\n        });\n      });\n    }\n  });\n  return {\n    payloadBatch: payloadBatch,\n    snapToValue: snapToValue\n  };\n}\n\nfunction showPointer(showValueMap, axisInfo, value, payloadBatch) {\n  showValueMap[axisInfo.key] = {\n    value: value,\n    payloadBatch: payloadBatch\n  };\n}\n\nfunction showTooltip(dataByCoordSys, axisInfo, payloadInfo, value) {\n  var payloadBatch = payloadInfo.payloadBatch;\n  var axis = axisInfo.axis;\n  var axisModel = axis.model;\n  var axisPointerModel = axisInfo.axisPointerModel; // If no data, do not create anything in dataByCoordSys,\n  // whose length will be used to judge whether dispatch action.\n\n  if (!axisInfo.triggerTooltip || !payloadBatch.length) {\n    return;\n  }\n\n  var coordSysModel = axisInfo.coordSys.model;\n  var coordSysKey = modelHelper.makeKey(coordSysModel);\n  var coordSysItem = dataByCoordSys.map[coordSysKey];\n\n  if (!coordSysItem) {\n    coordSysItem = dataByCoordSys.map[coordSysKey] = {\n      coordSysId: coordSysModel.id,\n      coordSysIndex: coordSysModel.componentIndex,\n      coordSysType: coordSysModel.type,\n      coordSysMainType: coordSysModel.mainType,\n      dataByAxis: []\n    };\n    dataByCoordSys.list.push(coordSysItem);\n  }\n\n  coordSysItem.dataByAxis.push({\n    axisDim: axis.dim,\n    axisIndex: axisModel.componentIndex,\n    axisType: axisModel.type,\n    axisId: axisModel.id,\n    value: value,\n    // Caustion: viewHelper.getValueLabel is actually on \"view stage\", which\n    // depends that all models have been updated. So it should not be performed\n    // here. Considering axisPointerModel used here is volatile, which is hard\n    // to be retrieve in TooltipView, we prepare parameters here.\n    valueLabelOpt: {\n      precision: axisPointerModel.get('label.precision'),\n      formatter: axisPointerModel.get('label.formatter')\n    },\n    seriesDataIndices: payloadBatch.slice()\n  });\n}\n\nfunction updateModelActually(showValueMap, axesInfo, outputFinder) {\n  var outputAxesInfo = outputFinder.axesInfo = []; // Basic logic: If no 'show' required, 'hide' this axisPointer.\n\n  each(axesInfo, function (axisInfo, key) {\n    var option = axisInfo.axisPointerModel.option;\n    var valItem = showValueMap[key];\n\n    if (valItem) {\n      !axisInfo.useHandle && (option.status = 'show');\n      option.value = valItem.value; // For label formatter param and highlight.\n\n      option.seriesDataIndices = (valItem.payloadBatch || []).slice();\n    } // When always show (e.g., handle used), remain\n    // original value and status.\n    else {\n        // If hide, value still need to be set, consider\n        // click legend to toggle axis blank.\n        !axisInfo.useHandle && (option.status = 'hide');\n      } // If status is 'hide', should be no info in payload.\n\n\n    option.status === 'show' && outputAxesInfo.push({\n      axisDim: axisInfo.axis.dim,\n      axisIndex: axisInfo.axis.model.componentIndex,\n      value: option.value\n    });\n  });\n}\n\nfunction dispatchTooltipActually(dataByCoordSys, point, payload, dispatchAction) {\n  // Basic logic: If no showTip required, hideTip will be dispatched.\n  if (illegalPoint(point) || !dataByCoordSys.list.length) {\n    dispatchAction({\n      type: 'hideTip'\n    });\n    return;\n  } // In most case only one axis (or event one series is used). It is\n  // convinient to fetch payload.seriesIndex and payload.dataIndex\n  // dirtectly. So put the first seriesIndex and dataIndex of the first\n  // axis on the payload.\n\n\n  var sampleItem = ((dataByCoordSys.list[0].dataByAxis[0] || {}).seriesDataIndices || [])[0] || {};\n  dispatchAction({\n    type: 'showTip',\n    escapeConnect: true,\n    x: point[0],\n    y: point[1],\n    tooltipOption: payload.tooltipOption,\n    position: payload.position,\n    dataIndexInside: sampleItem.dataIndexInside,\n    dataIndex: sampleItem.dataIndex,\n    seriesIndex: sampleItem.seriesIndex,\n    dataByCoordSys: dataByCoordSys.list\n  });\n}\n\nfunction dispatchHighDownActually(axesInfo, dispatchAction, api) {\n  // FIXME\n  // highlight status modification shoule be a stage of main process?\n  // (Consider confilct (e.g., legend and axisPointer) and setOption)\n  var zr = api.getZr();\n  var highDownKey = 'axisPointerLastHighlights';\n  var lastHighlights = inner(zr)[highDownKey] || {};\n  var newHighlights = inner(zr)[highDownKey] = {}; // Update highlight/downplay status according to axisPointer model.\n  // Build hash map and remove duplicate incidentally.\n\n  each(axesInfo, function (axisInfo, key) {\n    var option = axisInfo.axisPointerModel.option;\n    option.status === 'show' && each(option.seriesDataIndices, function (batchItem) {\n      var key = batchItem.seriesIndex + ' | ' + batchItem.dataIndex;\n      newHighlights[key] = batchItem;\n    });\n  }); // Diff.\n\n  var toHighlight = [];\n  var toDownplay = [];\n  zrUtil.each(lastHighlights, function (batchItem, key) {\n    !newHighlights[key] && toDownplay.push(batchItem);\n  });\n  zrUtil.each(newHighlights, function (batchItem, key) {\n    !lastHighlights[key] && toHighlight.push(batchItem);\n  });\n  toDownplay.length && api.dispatchAction({\n    type: 'downplay',\n    escapeConnect: true,\n    batch: toDownplay\n  });\n  toHighlight.length && api.dispatchAction({\n    type: 'highlight',\n    escapeConnect: true,\n    batch: toHighlight\n  });\n}\n\nfunction findInputAxisInfo(inputAxesInfo, axisInfo) {\n  for (var i = 0; i < (inputAxesInfo || []).length; i++) {\n    var inputAxisInfo = inputAxesInfo[i];\n\n    if (axisInfo.axis.dim === inputAxisInfo.axisDim && axisInfo.axis.model.componentIndex === inputAxisInfo.axisIndex) {\n      return inputAxisInfo;\n    }\n  }\n}\n\nfunction makeMapperParam(axisInfo) {\n  var axisModel = axisInfo.axis.model;\n  var item = {};\n  var dim = item.axisDim = axisInfo.axis.dim;\n  item.axisIndex = item[dim + 'AxisIndex'] = axisModel.componentIndex;\n  item.axisName = item[dim + 'AxisName'] = axisModel.name;\n  item.axisId = item[dim + 'AxisId'] = axisModel.id;\n  return item;\n}\n\nfunction illegalPoint(point) {\n  return !point || point[0] == null || isNaN(point[0]) || point[1] == null || isNaN(point[1]);\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar Axis = require(\"../Axis\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Extend axis 2d\n * @constructor module:echarts/coord/cartesian/Axis2D\n * @extends {module:echarts/coord/cartesian/Axis}\n * @param {string} dim\n * @param {*} scale\n * @param {Array.<number>} coordExtent\n * @param {string} axisType\n * @param {string} position\n */\nvar Axis2D = function (dim, scale, coordExtent, axisType, position) {\n  Axis.call(this, dim, scale, coordExtent);\n  /**\n   * Axis type\n   *  - 'category'\n   *  - 'value'\n   *  - 'time'\n   *  - 'log'\n   * @type {string}\n   */\n\n  this.type = axisType || 'value';\n  /**\n   * Axis position\n   *  - 'top'\n   *  - 'bottom'\n   *  - 'left'\n   *  - 'right'\n   */\n\n  this.position = position || 'bottom';\n};\n\nAxis2D.prototype = {\n  constructor: Axis2D,\n\n  /**\n   * Index of axis, can be used as key\n   */\n  index: 0,\n\n  /**\n   * Implemented in <module:echarts/coord/cartesian/Grid>.\n   * @return {Array.<module:echarts/coord/cartesian/Axis2D>}\n   *         If not on zero of other axis, return null/undefined.\n   *         If no axes, return an empty array.\n   */\n  getAxesOnZeroOf: null,\n\n  /**\n   * Axis model\n   * @param {module:echarts/coord/cartesian/AxisModel}\n   */\n  model: null,\n  isHorizontal: function () {\n    var position = this.position;\n    return position === 'top' || position === 'bottom';\n  },\n\n  /**\n   * Each item cooresponds to this.getExtent(), which\n   * means globalExtent[0] may greater than globalExtent[1],\n   * unless `asc` is input.\n   *\n   * @param {boolean} [asc]\n   * @return {Array.<number>}\n   */\n  getGlobalExtent: function (asc) {\n    var ret = this.getExtent();\n    ret[0] = this.toGlobalCoord(ret[0]);\n    ret[1] = this.toGlobalCoord(ret[1]);\n    asc && ret[0] > ret[1] && ret.reverse();\n    return ret;\n  },\n  getOtherAxis: function () {\n    this.grid.getOtherAxis();\n  },\n\n  /**\n   * @override\n   */\n  pointToData: function (point, clamp) {\n    return this.coordToData(this.toLocalCoord(point[this.dim === 'x' ? 0 : 1]), clamp);\n  },\n\n  /**\n   * Transform global coord to local coord,\n   * i.e. var localCoord = axis.toLocalCoord(80);\n   * designate by module:echarts/coord/cartesian/Grid.\n   * @type {Function}\n   */\n  toLocalCoord: null,\n\n  /**\n   * Transform global coord to local coord,\n   * i.e. var globalCoord = axis.toLocalCoord(40);\n   * designate by module:echarts/coord/cartesian/Grid.\n   * @type {Function}\n   */\n  toGlobalCoord: null\n};\nzrUtil.inherits(Axis2D, Axis);\nvar _default = Axis2D;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar createHashMap = _util.createHashMap;\nvar isString = _util.isString;\nvar isArray = _util.isArray;\nvar each = _util.each;\nvar assert = _util.assert;\n\nvar _parseSVG = require(\"zrender/lib/tool/parseSVG\");\n\nvar parseXML = _parseSVG.parseXML;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar storage = createHashMap(); // For minimize the code size of common echarts package,\n// do not put too much logic in this module.\n\nvar _default = {\n  // The format of record: see `echarts.registerMap`.\n  // Compatible with previous `echarts.registerMap`.\n  registerMap: function (mapName, rawGeoJson, rawSpecialAreas) {\n    var records;\n\n    if (isArray(rawGeoJson)) {\n      records = rawGeoJson;\n    } else if (rawGeoJson.svg) {\n      records = [{\n        type: 'svg',\n        source: rawGeoJson.svg,\n        specialAreas: rawGeoJson.specialAreas\n      }];\n    } else {\n      // Backward compatibility.\n      if (rawGeoJson.geoJson && !rawGeoJson.features) {\n        rawSpecialAreas = rawGeoJson.specialAreas;\n        rawGeoJson = rawGeoJson.geoJson;\n      }\n\n      records = [{\n        type: 'geoJSON',\n        source: rawGeoJson,\n        specialAreas: rawSpecialAreas\n      }];\n    }\n\n    each(records, function (record) {\n      var type = record.type;\n      type === 'geoJson' && (type = record.type = 'geoJSON');\n      var parse = parsers[type];\n      parse(record);\n    });\n    return storage.set(mapName, records);\n  },\n  retrieveMap: function (mapName) {\n    return storage.get(mapName);\n  }\n};\nvar parsers = {\n  geoJSON: function (record) {\n    var source = record.source;\n    record.geoJSON = !isString(source) ? source : typeof JSON !== 'undefined' && JSON.parse ? JSON.parse(source) : new Function('return (' + source + ');')();\n  },\n  // Only perform parse to XML object here, which might be time\n  // consiming for large SVG.\n  // Although convert XML to zrender element is also time consiming,\n  // if we do it here, the clone of zrender elements has to be\n  // required. So we do it once for each geo instance, util real\n  // performance issues call for optimizing it.\n  svg: function (record) {\n    record.svgXML = parseXML(record.source);\n  }\n};\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../echarts\");\n\nrequire(\"./line/LineSeries\");\n\nrequire(\"./line/LineView\");\n\nvar visualSymbol = require(\"../visual/symbol\");\n\nvar layoutPoints = require(\"../layout/points\");\n\nvar dataSample = require(\"../processor/dataSample\");\n\nrequire(\"../component/gridSimple\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// In case developer forget to include grid component\necharts.registerVisual(visualSymbol('line', 'circle', 'line'));\necharts.registerLayout(layoutPoints('line')); // Down sample after filter\n\necharts.registerProcessor(echarts.PRIORITY.PROCESSOR.STATISTIC, dataSample('line'));","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _helper = require(\"./helper\");\n\nvar prepareDataCoordInfo = _helper.prepareDataCoordInfo;\nvar getStackedOnPoint = _helper.getStackedOnPoint;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// var arrayDiff = require('zrender/src/core/arrayDiff');\n// 'zrender/src/core/arrayDiff' has been used before, but it did\n// not do well in performance when roam with fixed dataZoom window.\n// function convertToIntId(newIdList, oldIdList) {\n//     // Generate int id instead of string id.\n//     // Compare string maybe slow in score function of arrDiff\n//     // Assume id in idList are all unique\n//     var idIndicesMap = {};\n//     var idx = 0;\n//     for (var i = 0; i < newIdList.length; i++) {\n//         idIndicesMap[newIdList[i]] = idx;\n//         newIdList[i] = idx++;\n//     }\n//     for (var i = 0; i < oldIdList.length; i++) {\n//         var oldId = oldIdList[i];\n//         // Same with newIdList\n//         if (idIndicesMap[oldId]) {\n//             oldIdList[i] = idIndicesMap[oldId];\n//         }\n//         else {\n//             oldIdList[i] = idx++;\n//         }\n//     }\n// }\nfunction diffData(oldData, newData) {\n  var diffResult = [];\n  newData.diff(oldData).add(function (idx) {\n    diffResult.push({\n      cmd: '+',\n      idx: idx\n    });\n  }).update(function (newIdx, oldIdx) {\n    diffResult.push({\n      cmd: '=',\n      idx: oldIdx,\n      idx1: newIdx\n    });\n  }).remove(function (idx) {\n    diffResult.push({\n      cmd: '-',\n      idx: idx\n    });\n  }).execute();\n  return diffResult;\n}\n\nfunction _default(oldData, newData, oldStackedOnPoints, newStackedOnPoints, oldCoordSys, newCoordSys, oldValueOrigin, newValueOrigin) {\n  var diff = diffData(oldData, newData); // var newIdList = newData.mapArray(newData.getId);\n  // var oldIdList = oldData.mapArray(oldData.getId);\n  // convertToIntId(newIdList, oldIdList);\n  // // FIXME One data ?\n  // diff = arrayDiff(oldIdList, newIdList);\n\n  var currPoints = [];\n  var nextPoints = []; // Points for stacking base line\n\n  var currStackedPoints = [];\n  var nextStackedPoints = [];\n  var status = [];\n  var sortedIndices = [];\n  var rawIndices = [];\n  var newDataOldCoordInfo = prepareDataCoordInfo(oldCoordSys, newData, oldValueOrigin);\n  var oldDataNewCoordInfo = prepareDataCoordInfo(newCoordSys, oldData, newValueOrigin);\n\n  for (var i = 0; i < diff.length; i++) {\n    var diffItem = diff[i];\n    var pointAdded = true; // FIXME, animation is not so perfect when dataZoom window moves fast\n    // Which is in case remvoing or add more than one data in the tail or head\n\n    switch (diffItem.cmd) {\n      case '=':\n        var currentPt = oldData.getItemLayout(diffItem.idx);\n        var nextPt = newData.getItemLayout(diffItem.idx1); // If previous data is NaN, use next point directly\n\n        if (isNaN(currentPt[0]) || isNaN(currentPt[1])) {\n          currentPt = nextPt.slice();\n        }\n\n        currPoints.push(currentPt);\n        nextPoints.push(nextPt);\n        currStackedPoints.push(oldStackedOnPoints[diffItem.idx]);\n        nextStackedPoints.push(newStackedOnPoints[diffItem.idx1]);\n        rawIndices.push(newData.getRawIndex(diffItem.idx1));\n        break;\n\n      case '+':\n        var idx = diffItem.idx;\n        currPoints.push(oldCoordSys.dataToPoint([newData.get(newDataOldCoordInfo.dataDimsForPoint[0], idx), newData.get(newDataOldCoordInfo.dataDimsForPoint[1], idx)]));\n        nextPoints.push(newData.getItemLayout(idx).slice());\n        currStackedPoints.push(getStackedOnPoint(newDataOldCoordInfo, oldCoordSys, newData, idx));\n        nextStackedPoints.push(newStackedOnPoints[idx]);\n        rawIndices.push(newData.getRawIndex(idx));\n        break;\n\n      case '-':\n        var idx = diffItem.idx;\n        var rawIndex = oldData.getRawIndex(idx); // Data is replaced. In the case of dynamic data queue\n        // FIXME FIXME FIXME\n\n        if (rawIndex !== idx) {\n          currPoints.push(oldData.getItemLayout(idx));\n          nextPoints.push(newCoordSys.dataToPoint([oldData.get(oldDataNewCoordInfo.dataDimsForPoint[0], idx), oldData.get(oldDataNewCoordInfo.dataDimsForPoint[1], idx)]));\n          currStackedPoints.push(oldStackedOnPoints[idx]);\n          nextStackedPoints.push(getStackedOnPoint(oldDataNewCoordInfo, newCoordSys, oldData, idx));\n          rawIndices.push(rawIndex);\n        } else {\n          pointAdded = false;\n        }\n\n    } // Original indices\n\n\n    if (pointAdded) {\n      status.push(diffItem);\n      sortedIndices.push(sortedIndices.length);\n    }\n  } // Diff result may be crossed if all items are changed\n  // Sort by data index\n\n\n  sortedIndices.sort(function (a, b) {\n    return rawIndices[a] - rawIndices[b];\n  });\n  var sortedCurrPoints = [];\n  var sortedNextPoints = [];\n  var sortedCurrStackedPoints = [];\n  var sortedNextStackedPoints = [];\n  var sortedStatus = [];\n\n  for (var i = 0; i < sortedIndices.length; i++) {\n    var idx = sortedIndices[i];\n    sortedCurrPoints[i] = currPoints[idx];\n    sortedNextPoints[i] = nextPoints[idx];\n    sortedCurrStackedPoints[i] = currStackedPoints[idx];\n    sortedNextStackedPoints[i] = nextStackedPoints[idx];\n    sortedStatus[i] = status[idx];\n  }\n\n  return {\n    current: sortedCurrPoints,\n    next: sortedNextPoints,\n    stackedOnCurrent: sortedCurrStackedPoints,\n    stackedOnNext: sortedNextStackedPoints,\n    status: sortedStatus\n  };\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar _bbox = require(\"zrender/lib/core/bbox\");\n\nvar fromPoints = _bbox.fromPoints;\n\nvar SymbolDraw = require(\"../helper/SymbolDraw\");\n\nvar SymbolClz = require(\"../helper/Symbol\");\n\nvar lineAnimationDiff = require(\"./lineAnimationDiff\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar modelUtil = require(\"../../util/model\");\n\nvar _poly = require(\"./poly\");\n\nvar Polyline = _poly.Polyline;\nvar Polygon = _poly.Polygon;\n\nvar ChartView = require(\"../../view/Chart\");\n\nvar _helper = require(\"./helper\");\n\nvar prepareDataCoordInfo = _helper.prepareDataCoordInfo;\nvar getStackedOnPoint = _helper.getStackedOnPoint;\n\nvar _createClipPathFromCoordSys = require(\"../helper/createClipPathFromCoordSys\");\n\nvar createGridClipPath = _createClipPathFromCoordSys.createGridClipPath;\nvar createPolarClipPath = _createClipPathFromCoordSys.createPolarClipPath;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// FIXME step not support polar\nfunction isPointsSame(points1, points2) {\n  if (points1.length !== points2.length) {\n    return;\n  }\n\n  for (var i = 0; i < points1.length; i++) {\n    var p1 = points1[i];\n    var p2 = points2[i];\n\n    if (p1[0] !== p2[0] || p1[1] !== p2[1]) {\n      return;\n    }\n  }\n\n  return true;\n}\n\nfunction getBoundingDiff(points1, points2) {\n  var min1 = [];\n  var max1 = [];\n  var min2 = [];\n  var max2 = [];\n  fromPoints(points1, min1, max1);\n  fromPoints(points2, min2, max2); // Get a max value from each corner of two boundings.\n\n  return Math.max(Math.abs(min1[0] - min2[0]), Math.abs(min1[1] - min2[1]), Math.abs(max1[0] - max2[0]), Math.abs(max1[1] - max2[1]));\n}\n\nfunction getSmooth(smooth) {\n  return typeof smooth === 'number' ? smooth : smooth ? 0.5 : 0;\n}\n/**\n * @param {module:echarts/coord/cartesian/Cartesian2D|module:echarts/coord/polar/Polar} coordSys\n * @param {module:echarts/data/List} data\n * @param {Object} dataCoordInfo\n * @param {Array.<Array.<number>>} points\n */\n\n\nfunction getStackedOnPoints(coordSys, data, dataCoordInfo) {\n  if (!dataCoordInfo.valueDim) {\n    return [];\n  }\n\n  var points = [];\n\n  for (var idx = 0, len = data.count(); idx < len; idx++) {\n    points.push(getStackedOnPoint(dataCoordInfo, coordSys, data, idx));\n  }\n\n  return points;\n}\n\nfunction turnPointsIntoStep(points, coordSys, stepTurnAt) {\n  var baseAxis = coordSys.getBaseAxis();\n  var baseIndex = baseAxis.dim === 'x' || baseAxis.dim === 'radius' ? 0 : 1;\n  var stepPoints = [];\n\n  for (var i = 0; i < points.length - 1; i++) {\n    var nextPt = points[i + 1];\n    var pt = points[i];\n    stepPoints.push(pt);\n    var stepPt = [];\n\n    switch (stepTurnAt) {\n      case 'end':\n        stepPt[baseIndex] = nextPt[baseIndex];\n        stepPt[1 - baseIndex] = pt[1 - baseIndex]; // default is start\n\n        stepPoints.push(stepPt);\n        break;\n\n      case 'middle':\n        // default is start\n        var middle = (pt[baseIndex] + nextPt[baseIndex]) / 2;\n        var stepPt2 = [];\n        stepPt[baseIndex] = stepPt2[baseIndex] = middle;\n        stepPt[1 - baseIndex] = pt[1 - baseIndex];\n        stepPt2[1 - baseIndex] = nextPt[1 - baseIndex];\n        stepPoints.push(stepPt);\n        stepPoints.push(stepPt2);\n        break;\n\n      default:\n        stepPt[baseIndex] = pt[baseIndex];\n        stepPt[1 - baseIndex] = nextPt[1 - baseIndex]; // default is start\n\n        stepPoints.push(stepPt);\n    }\n  } // Last points\n\n\n  points[i] && stepPoints.push(points[i]);\n  return stepPoints;\n}\n\nfunction getVisualGradient(data, coordSys) {\n  var visualMetaList = data.getVisual('visualMeta');\n\n  if (!visualMetaList || !visualMetaList.length || !data.count()) {\n    // When data.count() is 0, gradient range can not be calculated.\n    return;\n  }\n\n  if (coordSys.type !== 'cartesian2d') {\n    return;\n  }\n\n  var coordDim;\n  var visualMeta;\n\n  for (var i = visualMetaList.length - 1; i >= 0; i--) {\n    var dimIndex = visualMetaList[i].dimension;\n    var dimName = data.dimensions[dimIndex];\n    var dimInfo = data.getDimensionInfo(dimName);\n    coordDim = dimInfo && dimInfo.coordDim; // Can only be x or y\n\n    if (coordDim === 'x' || coordDim === 'y') {\n      visualMeta = visualMetaList[i];\n      break;\n    }\n  }\n\n  if (!visualMeta) {\n    return;\n  } // If the area to be rendered is bigger than area defined by LinearGradient,\n  // the canvas spec prescribes that the color of the first stop and the last\n  // stop should be used. But if two stops are added at offset 0, in effect\n  // browsers use the color of the second stop to render area outside\n  // LinearGradient. So we can only infinitesimally extend area defined in\n  // LinearGradient to render `outerColors`.\n\n\n  var axis = coordSys.getAxis(coordDim); // dataToCoor mapping may not be linear, but must be monotonic.\n\n  var colorStops = zrUtil.map(visualMeta.stops, function (stop) {\n    return {\n      coord: axis.toGlobalCoord(axis.dataToCoord(stop.value)),\n      color: stop.color\n    };\n  });\n  var stopLen = colorStops.length;\n  var outerColors = visualMeta.outerColors.slice();\n\n  if (stopLen && colorStops[0].coord > colorStops[stopLen - 1].coord) {\n    colorStops.reverse();\n    outerColors.reverse();\n  }\n\n  var tinyExtent = 10; // Arbitrary value: 10px\n\n  var minCoord = colorStops[0].coord - tinyExtent;\n  var maxCoord = colorStops[stopLen - 1].coord + tinyExtent;\n  var coordSpan = maxCoord - minCoord;\n\n  if (coordSpan < 1e-3) {\n    return 'transparent';\n  }\n\n  zrUtil.each(colorStops, function (stop) {\n    stop.offset = (stop.coord - minCoord) / coordSpan;\n  });\n  colorStops.push({\n    offset: stopLen ? colorStops[stopLen - 1].offset : 0.5,\n    color: outerColors[1] || 'transparent'\n  });\n  colorStops.unshift({\n    // notice colorStops.length have been changed.\n    offset: stopLen ? colorStops[0].offset : 0.5,\n    color: outerColors[0] || 'transparent'\n  }); // zrUtil.each(colorStops, function (colorStop) {\n  //     // Make sure each offset has rounded px to avoid not sharp edge\n  //     colorStop.offset = (Math.round(colorStop.offset * (end - start) + start) - start) / (end - start);\n  // });\n\n  var gradient = new graphic.LinearGradient(0, 0, 0, 0, colorStops, true);\n  gradient[coordDim] = minCoord;\n  gradient[coordDim + '2'] = maxCoord;\n  return gradient;\n}\n\nfunction getIsIgnoreFunc(seriesModel, data, coordSys) {\n  var showAllSymbol = seriesModel.get('showAllSymbol');\n  var isAuto = showAllSymbol === 'auto';\n\n  if (showAllSymbol && !isAuto) {\n    return;\n  }\n\n  var categoryAxis = coordSys.getAxesByScale('ordinal')[0];\n\n  if (!categoryAxis) {\n    return;\n  } // Note that category label interval strategy might bring some weird effect\n  // in some scenario: users may wonder why some of the symbols are not\n  // displayed. So we show all symbols as possible as we can.\n\n\n  if (isAuto // Simplify the logic, do not determine label overlap here.\n  && canShowAllSymbolForCategory(categoryAxis, data)) {\n    return;\n  } // Otherwise follow the label interval strategy on category axis.\n\n\n  var categoryDataDim = data.mapDimension(categoryAxis.dim);\n  var labelMap = {};\n  zrUtil.each(categoryAxis.getViewLabels(), function (labelItem) {\n    labelMap[labelItem.tickValue] = 1;\n  });\n  return function (dataIndex) {\n    return !labelMap.hasOwnProperty(data.get(categoryDataDim, dataIndex));\n  };\n}\n\nfunction canShowAllSymbolForCategory(categoryAxis, data) {\n  // In mose cases, line is monotonous on category axis, and the label size\n  // is close with each other. So we check the symbol size and some of the\n  // label size alone with the category axis to estimate whether all symbol\n  // can be shown without overlap.\n  var axisExtent = categoryAxis.getExtent();\n  var availSize = Math.abs(axisExtent[1] - axisExtent[0]) / categoryAxis.scale.count();\n  isNaN(availSize) && (availSize = 0); // 0/0 is NaN.\n  // Sampling some points, max 5.\n\n  var dataLen = data.count();\n  var step = Math.max(1, Math.round(dataLen / 5));\n\n  for (var dataIndex = 0; dataIndex < dataLen; dataIndex += step) {\n    if (SymbolClz.getSymbolSize(data, dataIndex // Only for cartesian, where `isHorizontal` exists.\n    )[categoryAxis.isHorizontal() ? 1 : 0] // Empirical number\n    * 1.5 > availSize) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction createLineClipPath(coordSys, hasAnimation, seriesModel) {\n  if (coordSys.type === 'cartesian2d') {\n    var isHorizontal = coordSys.getBaseAxis().isHorizontal();\n    var clipPath = createGridClipPath(coordSys, hasAnimation, seriesModel); // Expand clip shape to avoid clipping when line value exceeds axis\n\n    if (!seriesModel.get('clip', true)) {\n      var rectShape = clipPath.shape;\n      var expandSize = Math.max(rectShape.width, rectShape.height);\n\n      if (isHorizontal) {\n        rectShape.y -= expandSize;\n        rectShape.height += expandSize * 2;\n      } else {\n        rectShape.x -= expandSize;\n        rectShape.width += expandSize * 2;\n      }\n    }\n\n    return clipPath;\n  } else {\n    return createPolarClipPath(coordSys, hasAnimation, seriesModel);\n  }\n}\n\nvar _default = ChartView.extend({\n  type: 'line',\n  init: function () {\n    var lineGroup = new graphic.Group();\n    var symbolDraw = new SymbolDraw();\n    this.group.add(symbolDraw.group);\n    this._symbolDraw = symbolDraw;\n    this._lineGroup = lineGroup;\n  },\n  render: function (seriesModel, ecModel, api) {\n    var coordSys = seriesModel.coordinateSystem;\n    var group = this.group;\n    var data = seriesModel.getData();\n    var lineStyleModel = seriesModel.getModel('lineStyle');\n    var areaStyleModel = seriesModel.getModel('areaStyle');\n    var points = data.mapArray(data.getItemLayout);\n    var isCoordSysPolar = coordSys.type === 'polar';\n    var prevCoordSys = this._coordSys;\n    var symbolDraw = this._symbolDraw;\n    var polyline = this._polyline;\n    var polygon = this._polygon;\n    var lineGroup = this._lineGroup;\n    var hasAnimation = seriesModel.get('animation');\n    var isAreaChart = !areaStyleModel.isEmpty();\n    var valueOrigin = areaStyleModel.get('origin');\n    var dataCoordInfo = prepareDataCoordInfo(coordSys, data, valueOrigin);\n    var stackedOnPoints = getStackedOnPoints(coordSys, data, dataCoordInfo);\n    var showSymbol = seriesModel.get('showSymbol');\n    var isIgnoreFunc = showSymbol && !isCoordSysPolar && getIsIgnoreFunc(seriesModel, data, coordSys); // Remove temporary symbols\n\n    var oldData = this._data;\n    oldData && oldData.eachItemGraphicEl(function (el, idx) {\n      if (el.__temp) {\n        group.remove(el);\n        oldData.setItemGraphicEl(idx, null);\n      }\n    }); // Remove previous created symbols if showSymbol changed to false\n\n    if (!showSymbol) {\n      symbolDraw.remove();\n    }\n\n    group.add(lineGroup); // FIXME step not support polar\n\n    var step = !isCoordSysPolar && seriesModel.get('step');\n    var clipShapeForSymbol;\n\n    if (coordSys && coordSys.getArea && seriesModel.get('clip', true)) {\n      clipShapeForSymbol = coordSys.getArea(); // Avoid float number rounding error for symbol on the edge of axis extent.\n      // See #7913 and `test/dataZoom-clip.html`.\n\n      if (clipShapeForSymbol.width != null) {\n        clipShapeForSymbol.x -= 0.1;\n        clipShapeForSymbol.y -= 0.1;\n        clipShapeForSymbol.width += 0.2;\n        clipShapeForSymbol.height += 0.2;\n      } else if (clipShapeForSymbol.r0) {\n        clipShapeForSymbol.r0 -= 0.5;\n        clipShapeForSymbol.r1 += 0.5;\n      }\n    }\n\n    this._clipShapeForSymbol = clipShapeForSymbol; // Initialization animation or coordinate system changed\n\n    if (!(polyline && prevCoordSys.type === coordSys.type && step === this._step)) {\n      showSymbol && symbolDraw.updateData(data, {\n        isIgnore: isIgnoreFunc,\n        clipShape: clipShapeForSymbol\n      });\n\n      if (step) {\n        // TODO If stacked series is not step\n        points = turnPointsIntoStep(points, coordSys, step);\n        stackedOnPoints = turnPointsIntoStep(stackedOnPoints, coordSys, step);\n      }\n\n      polyline = this._newPolyline(points, coordSys, hasAnimation);\n\n      if (isAreaChart) {\n        polygon = this._newPolygon(points, stackedOnPoints, coordSys, hasAnimation);\n      }\n\n      lineGroup.setClipPath(createLineClipPath(coordSys, true, seriesModel));\n    } else {\n      if (isAreaChart && !polygon) {\n        // If areaStyle is added\n        polygon = this._newPolygon(points, stackedOnPoints, coordSys, hasAnimation);\n      } else if (polygon && !isAreaChart) {\n        // If areaStyle is removed\n        lineGroup.remove(polygon);\n        polygon = this._polygon = null;\n      } // Update clipPath\n\n\n      lineGroup.setClipPath(createLineClipPath(coordSys, false, seriesModel)); // Always update, or it is wrong in the case turning on legend\n      // because points are not changed\n\n      showSymbol && symbolDraw.updateData(data, {\n        isIgnore: isIgnoreFunc,\n        clipShape: clipShapeForSymbol\n      }); // Stop symbol animation and sync with line points\n      // FIXME performance?\n\n      data.eachItemGraphicEl(function (el) {\n        el.stopAnimation(true);\n      }); // In the case data zoom triggerred refreshing frequently\n      // Data may not change if line has a category axis. So it should animate nothing\n\n      if (!isPointsSame(this._stackedOnPoints, stackedOnPoints) || !isPointsSame(this._points, points)) {\n        if (hasAnimation) {\n          this._updateAnimation(data, stackedOnPoints, coordSys, api, step, valueOrigin);\n        } else {\n          // Not do it in update with animation\n          if (step) {\n            // TODO If stacked series is not step\n            points = turnPointsIntoStep(points, coordSys, step);\n            stackedOnPoints = turnPointsIntoStep(stackedOnPoints, coordSys, step);\n          }\n\n          polyline.setShape({\n            points: points\n          });\n          polygon && polygon.setShape({\n            points: points,\n            stackedOnPoints: stackedOnPoints\n          });\n        }\n      }\n    }\n\n    var visualColor = getVisualGradient(data, coordSys) || data.getVisual('color');\n    polyline.useStyle(zrUtil.defaults( // Use color in lineStyle first\n    lineStyleModel.getLineStyle(), {\n      fill: 'none',\n      stroke: visualColor,\n      lineJoin: 'bevel'\n    }));\n    var smooth = seriesModel.get('smooth');\n    smooth = getSmooth(seriesModel.get('smooth'));\n    polyline.setShape({\n      smooth: smooth,\n      smoothMonotone: seriesModel.get('smoothMonotone'),\n      connectNulls: seriesModel.get('connectNulls')\n    });\n\n    if (polygon) {\n      var stackedOnSeries = data.getCalculationInfo('stackedOnSeries');\n      var stackedOnSmooth = 0;\n      polygon.useStyle(zrUtil.defaults(areaStyleModel.getAreaStyle(), {\n        fill: visualColor,\n        opacity: 0.7,\n        lineJoin: 'bevel'\n      }));\n\n      if (stackedOnSeries) {\n        stackedOnSmooth = getSmooth(stackedOnSeries.get('smooth'));\n      }\n\n      polygon.setShape({\n        smooth: smooth,\n        stackedOnSmooth: stackedOnSmooth,\n        smoothMonotone: seriesModel.get('smoothMonotone'),\n        connectNulls: seriesModel.get('connectNulls')\n      });\n    }\n\n    this._data = data; // Save the coordinate system for transition animation when data changed\n\n    this._coordSys = coordSys;\n    this._stackedOnPoints = stackedOnPoints;\n    this._points = points;\n    this._step = step;\n    this._valueOrigin = valueOrigin;\n  },\n  dispose: function () {},\n  highlight: function (seriesModel, ecModel, api, payload) {\n    var data = seriesModel.getData();\n    var dataIndex = modelUtil.queryDataIndex(data, payload);\n\n    if (!(dataIndex instanceof Array) && dataIndex != null && dataIndex >= 0) {\n      var symbol = data.getItemGraphicEl(dataIndex);\n\n      if (!symbol) {\n        // Create a temporary symbol if it is not exists\n        var pt = data.getItemLayout(dataIndex);\n\n        if (!pt) {\n          // Null data\n          return;\n        } // fix #11360: should't draw symbol outside clipShapeForSymbol\n\n\n        if (this._clipShapeForSymbol && !this._clipShapeForSymbol.contain(pt[0], pt[1])) {\n          return;\n        }\n\n        symbol = new SymbolClz(data, dataIndex);\n        symbol.position = pt;\n        symbol.setZ(seriesModel.get('zlevel'), seriesModel.get('z'));\n        symbol.ignore = isNaN(pt[0]) || isNaN(pt[1]);\n        symbol.__temp = true;\n        data.setItemGraphicEl(dataIndex, symbol); // Stop scale animation\n\n        symbol.stopSymbolAnimation(true);\n        this.group.add(symbol);\n      }\n\n      symbol.highlight();\n    } else {\n      // Highlight whole series\n      ChartView.prototype.highlight.call(this, seriesModel, ecModel, api, payload);\n    }\n  },\n  downplay: function (seriesModel, ecModel, api, payload) {\n    var data = seriesModel.getData();\n    var dataIndex = modelUtil.queryDataIndex(data, payload);\n\n    if (dataIndex != null && dataIndex >= 0) {\n      var symbol = data.getItemGraphicEl(dataIndex);\n\n      if (symbol) {\n        if (symbol.__temp) {\n          data.setItemGraphicEl(dataIndex, null);\n          this.group.remove(symbol);\n        } else {\n          symbol.downplay();\n        }\n      }\n    } else {\n      // FIXME\n      // can not downplay completely.\n      // Downplay whole series\n      ChartView.prototype.downplay.call(this, seriesModel, ecModel, api, payload);\n    }\n  },\n\n  /**\n   * @param {module:zrender/container/Group} group\n   * @param {Array.<Array.<number>>} points\n   * @private\n   */\n  _newPolyline: function (points) {\n    var polyline = this._polyline; // Remove previous created polyline\n\n    if (polyline) {\n      this._lineGroup.remove(polyline);\n    }\n\n    polyline = new Polyline({\n      shape: {\n        points: points\n      },\n      silent: true,\n      z2: 10\n    });\n\n    this._lineGroup.add(polyline);\n\n    this._polyline = polyline;\n    return polyline;\n  },\n\n  /**\n   * @param {module:zrender/container/Group} group\n   * @param {Array.<Array.<number>>} stackedOnPoints\n   * @param {Array.<Array.<number>>} points\n   * @private\n   */\n  _newPolygon: function (points, stackedOnPoints) {\n    var polygon = this._polygon; // Remove previous created polygon\n\n    if (polygon) {\n      this._lineGroup.remove(polygon);\n    }\n\n    polygon = new Polygon({\n      shape: {\n        points: points,\n        stackedOnPoints: stackedOnPoints\n      },\n      silent: true\n    });\n\n    this._lineGroup.add(polygon);\n\n    this._polygon = polygon;\n    return polygon;\n  },\n\n  /**\n   * @private\n   */\n  // FIXME Two value axis\n  _updateAnimation: function (data, stackedOnPoints, coordSys, api, step, valueOrigin) {\n    var polyline = this._polyline;\n    var polygon = this._polygon;\n    var seriesModel = data.hostModel;\n    var diff = lineAnimationDiff(this._data, data, this._stackedOnPoints, stackedOnPoints, this._coordSys, coordSys, this._valueOrigin, valueOrigin);\n    var current = diff.current;\n    var stackedOnCurrent = diff.stackedOnCurrent;\n    var next = diff.next;\n    var stackedOnNext = diff.stackedOnNext;\n\n    if (step) {\n      // TODO If stacked series is not step\n      current = turnPointsIntoStep(diff.current, coordSys, step);\n      stackedOnCurrent = turnPointsIntoStep(diff.stackedOnCurrent, coordSys, step);\n      next = turnPointsIntoStep(diff.next, coordSys, step);\n      stackedOnNext = turnPointsIntoStep(diff.stackedOnNext, coordSys, step);\n    } // Don't apply animation if diff is large.\n    // For better result and avoid memory explosion problems like\n    // https://github.com/apache/incubator-echarts/issues/12229\n\n\n    if (getBoundingDiff(current, next) > 3000 || polygon && getBoundingDiff(stackedOnCurrent, stackedOnNext) > 3000) {\n      polyline.setShape({\n        points: next\n      });\n\n      if (polygon) {\n        polygon.setShape({\n          points: next,\n          stackedOnPoints: stackedOnNext\n        });\n      }\n\n      return;\n    } // `diff.current` is subset of `current` (which should be ensured by\n    // turnPointsIntoStep), so points in `__points` can be updated when\n    // points in `current` are update during animation.\n\n\n    polyline.shape.__points = diff.current;\n    polyline.shape.points = current;\n    graphic.updateProps(polyline, {\n      shape: {\n        points: next\n      }\n    }, seriesModel);\n\n    if (polygon) {\n      polygon.setShape({\n        points: current,\n        stackedOnPoints: stackedOnCurrent\n      });\n      graphic.updateProps(polygon, {\n        shape: {\n          points: next,\n          stackedOnPoints: stackedOnNext\n        }\n      }, seriesModel);\n    }\n\n    var updatedDataInfo = [];\n    var diffStatus = diff.status;\n\n    for (var i = 0; i < diffStatus.length; i++) {\n      var cmd = diffStatus[i].cmd;\n\n      if (cmd === '=') {\n        var el = data.getItemGraphicEl(diffStatus[i].idx1);\n\n        if (el) {\n          updatedDataInfo.push({\n            el: el,\n            ptIdx: i // Index of points\n\n          });\n        }\n      }\n    }\n\n    if (polyline.animators && polyline.animators.length) {\n      polyline.animators[0].during(function () {\n        for (var i = 0; i < updatedDataInfo.length; i++) {\n          var el = updatedDataInfo[i].el;\n          el.attr('position', polyline.shape.__points[updatedDataInfo[i].ptIdx]);\n        }\n      });\n    }\n  },\n  remove: function (ecModel) {\n    var group = this.group;\n    var oldData = this._data;\n\n    this._lineGroup.removeAll();\n\n    this._symbolDraw.remove(true); // Remove temporary created elements when highlighting\n\n\n    oldData && oldData.eachItemGraphicEl(function (el, idx) {\n      if (el.__temp) {\n        group.remove(el);\n        oldData.setItemGraphicEl(idx, null);\n      }\n    });\n    this._polyline = this._polygon = this._coordSys = this._points = this._stackedOnPoints = this._data = null;\n  }\n});\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar contrastColor = '#eee';\n\nvar axisCommon = function () {\n  return {\n    axisLine: {\n      lineStyle: {\n        color: contrastColor\n      }\n    },\n    axisTick: {\n      lineStyle: {\n        color: contrastColor\n      }\n    },\n    axisLabel: {\n      textStyle: {\n        color: contrastColor\n      }\n    },\n    splitLine: {\n      lineStyle: {\n        type: 'dashed',\n        color: '#aaa'\n      }\n    },\n    splitArea: {\n      areaStyle: {\n        color: contrastColor\n      }\n    }\n  };\n};\n\nvar colorPalette = ['#dd6b66', '#759aa0', '#e69d87', '#8dc1a9', '#ea7e53', '#eedd78', '#73a373', '#73b9bc', '#7289ab', '#91ca8c', '#f49f42'];\nvar theme = {\n  color: colorPalette,\n  backgroundColor: '#333',\n  tooltip: {\n    axisPointer: {\n      lineStyle: {\n        color: contrastColor\n      },\n      crossStyle: {\n        color: contrastColor\n      },\n      label: {\n        color: '#000'\n      }\n    }\n  },\n  legend: {\n    textStyle: {\n      color: contrastColor\n    }\n  },\n  textStyle: {\n    color: contrastColor\n  },\n  title: {\n    textStyle: {\n      color: contrastColor\n    }\n  },\n  toolbox: {\n    iconStyle: {\n      normal: {\n        borderColor: contrastColor\n      }\n    }\n  },\n  dataZoom: {\n    textStyle: {\n      color: contrastColor\n    }\n  },\n  visualMap: {\n    textStyle: {\n      color: contrastColor\n    }\n  },\n  timeline: {\n    lineStyle: {\n      color: contrastColor\n    },\n    itemStyle: {\n      normal: {\n        color: colorPalette[1]\n      }\n    },\n    label: {\n      normal: {\n        textStyle: {\n          color: contrastColor\n        }\n      }\n    },\n    controlStyle: {\n      normal: {\n        color: contrastColor,\n        borderColor: contrastColor\n      }\n    }\n  },\n  timeAxis: axisCommon(),\n  logAxis: axisCommon(),\n  valueAxis: axisCommon(),\n  categoryAxis: axisCommon(),\n  line: {\n    symbol: 'circle'\n  },\n  graph: {\n    color: colorPalette\n  },\n  gauge: {\n    title: {\n      textStyle: {\n        color: contrastColor\n      }\n    }\n  },\n  candlestick: {\n    itemStyle: {\n      normal: {\n        color: '#FD1050',\n        color0: '#0CF49B',\n        borderColor: '#FD1050',\n        borderColor0: '#0CF49B'\n      }\n    }\n  }\n};\ntheme.categoryAxis.splitLine.show = false;\nvar _default = theme;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar AxisBuilder = require(\"./AxisBuilder\");\n\nvar AxisView = require(\"./AxisView\");\n\nvar cartesianAxisHelper = require(\"../../coord/cartesian/cartesianAxisHelper\");\n\nvar _axisSplitHelper = require(\"./axisSplitHelper\");\n\nvar rectCoordAxisBuildSplitArea = _axisSplitHelper.rectCoordAxisBuildSplitArea;\nvar rectCoordAxisHandleRemove = _axisSplitHelper.rectCoordAxisHandleRemove;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar axisBuilderAttrs = ['axisLine', 'axisTickLabel', 'axisName'];\nvar selfBuilderAttrs = ['splitArea', 'splitLine', 'minorSplitLine'];\nvar CartesianAxisView = AxisView.extend({\n  type: 'cartesianAxis',\n  axisPointerClass: 'CartesianAxisPointer',\n\n  /**\n   * @override\n   */\n  render: function (axisModel, ecModel, api, payload) {\n    this.group.removeAll();\n    var oldAxisGroup = this._axisGroup;\n    this._axisGroup = new graphic.Group();\n    this.group.add(this._axisGroup);\n\n    if (!axisModel.get('show')) {\n      return;\n    }\n\n    var gridModel = axisModel.getCoordSysModel();\n    var layout = cartesianAxisHelper.layout(gridModel, axisModel);\n    var axisBuilder = new AxisBuilder(axisModel, layout);\n    zrUtil.each(axisBuilderAttrs, axisBuilder.add, axisBuilder);\n\n    this._axisGroup.add(axisBuilder.getGroup());\n\n    zrUtil.each(selfBuilderAttrs, function (name) {\n      if (axisModel.get(name + '.show')) {\n        this['_' + name](axisModel, gridModel);\n      }\n    }, this);\n    graphic.groupTransition(oldAxisGroup, this._axisGroup, axisModel);\n    CartesianAxisView.superCall(this, 'render', axisModel, ecModel, api, payload);\n  },\n  remove: function () {\n    rectCoordAxisHandleRemove(this);\n  },\n\n  /**\n   * @param {module:echarts/coord/cartesian/AxisModel} axisModel\n   * @param {module:echarts/coord/cartesian/GridModel} gridModel\n   * @private\n   */\n  _splitLine: function (axisModel, gridModel) {\n    var axis = axisModel.axis;\n\n    if (axis.scale.isBlank()) {\n      return;\n    }\n\n    var splitLineModel = axisModel.getModel('splitLine');\n    var lineStyleModel = splitLineModel.getModel('lineStyle');\n    var lineColors = lineStyleModel.get('color');\n    lineColors = zrUtil.isArray(lineColors) ? lineColors : [lineColors];\n    var gridRect = gridModel.coordinateSystem.getRect();\n    var isHorizontal = axis.isHorizontal();\n    var lineCount = 0;\n    var ticksCoords = axis.getTicksCoords({\n      tickModel: splitLineModel\n    });\n    var p1 = [];\n    var p2 = [];\n    var lineStyle = lineStyleModel.getLineStyle();\n\n    for (var i = 0; i < ticksCoords.length; i++) {\n      var tickCoord = axis.toGlobalCoord(ticksCoords[i].coord);\n\n      if (isHorizontal) {\n        p1[0] = tickCoord;\n        p1[1] = gridRect.y;\n        p2[0] = tickCoord;\n        p2[1] = gridRect.y + gridRect.height;\n      } else {\n        p1[0] = gridRect.x;\n        p1[1] = tickCoord;\n        p2[0] = gridRect.x + gridRect.width;\n        p2[1] = tickCoord;\n      }\n\n      var colorIndex = lineCount++ % lineColors.length;\n      var tickValue = ticksCoords[i].tickValue;\n\n      this._axisGroup.add(new graphic.Line({\n        anid: tickValue != null ? 'line_' + ticksCoords[i].tickValue : null,\n        subPixelOptimize: true,\n        shape: {\n          x1: p1[0],\n          y1: p1[1],\n          x2: p2[0],\n          y2: p2[1]\n        },\n        style: zrUtil.defaults({\n          stroke: lineColors[colorIndex]\n        }, lineStyle),\n        silent: true\n      }));\n    }\n  },\n\n  /**\n   * @param {module:echarts/coord/cartesian/AxisModel} axisModel\n   * @param {module:echarts/coord/cartesian/GridModel} gridModel\n   * @private\n   */\n  _minorSplitLine: function (axisModel, gridModel) {\n    var axis = axisModel.axis;\n    var minorSplitLineModel = axisModel.getModel('minorSplitLine');\n    var lineStyleModel = minorSplitLineModel.getModel('lineStyle');\n    var gridRect = gridModel.coordinateSystem.getRect();\n    var isHorizontal = axis.isHorizontal();\n    var minorTicksCoords = axis.getMinorTicksCoords();\n\n    if (!minorTicksCoords.length) {\n      return;\n    }\n\n    var p1 = [];\n    var p2 = [];\n    var lineStyle = lineStyleModel.getLineStyle();\n\n    for (var i = 0; i < minorTicksCoords.length; i++) {\n      for (var k = 0; k < minorTicksCoords[i].length; k++) {\n        var tickCoord = axis.toGlobalCoord(minorTicksCoords[i][k].coord);\n\n        if (isHorizontal) {\n          p1[0] = tickCoord;\n          p1[1] = gridRect.y;\n          p2[0] = tickCoord;\n          p2[1] = gridRect.y + gridRect.height;\n        } else {\n          p1[0] = gridRect.x;\n          p1[1] = tickCoord;\n          p2[0] = gridRect.x + gridRect.width;\n          p2[1] = tickCoord;\n        }\n\n        this._axisGroup.add(new graphic.Line({\n          anid: 'minor_line_' + minorTicksCoords[i][k].tickValue,\n          subPixelOptimize: true,\n          shape: {\n            x1: p1[0],\n            y1: p1[1],\n            x2: p2[0],\n            y2: p2[1]\n          },\n          style: lineStyle,\n          silent: true\n        }));\n      }\n    }\n  },\n\n  /**\n   * @param {module:echarts/coord/cartesian/AxisModel} axisModel\n   * @param {module:echarts/coord/cartesian/GridModel} gridModel\n   * @private\n   */\n  _splitArea: function (axisModel, gridModel) {\n    rectCoordAxisBuildSplitArea(this, this._axisGroup, axisModel, gridModel);\n  }\n});\nCartesianAxisView.extend({\n  type: 'xAxis'\n});\nCartesianAxisView.extend({\n  type: 'yAxis'\n});","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar assert = _util.assert;\nvar isArray = _util.isArray;\n\nvar _config = require(\"../config\");\n\nvar __DEV__ = _config.__DEV__;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @param {Object} define\n * @return See the return of `createTask`.\n */\nfunction createTask(define) {\n  return new Task(define);\n}\n/**\n * @constructor\n * @param {Object} define\n * @param {Function} define.reset Custom reset\n * @param {Function} [define.plan] Returns 'reset' indicate reset immediately.\n * @param {Function} [define.count] count is used to determin data task.\n * @param {Function} [define.onDirty] count is used to determin data task.\n */\n\n\nfunction Task(define) {\n  define = define || {};\n  this._reset = define.reset;\n  this._plan = define.plan;\n  this._count = define.count;\n  this._onDirty = define.onDirty;\n  this._dirty = true; // Context must be specified implicitly, to\n  // avoid miss update context when model changed.\n\n  this.context;\n}\n\nvar taskProto = Task.prototype;\n/**\n * @param {Object} performArgs\n * @param {number} [performArgs.step] Specified step.\n * @param {number} [performArgs.skip] Skip customer perform call.\n * @param {number} [performArgs.modBy] Sampling window size.\n * @param {number} [performArgs.modDataCount] Sampling count.\n */\n\ntaskProto.perform = function (performArgs) {\n  var upTask = this._upstream;\n  var skip = performArgs && performArgs.skip; // TODO some refactor.\n  // Pull data. Must pull data each time, because context.data\n  // may be updated by Series.setData.\n\n  if (this._dirty && upTask) {\n    var context = this.context;\n    context.data = context.outputData = upTask.context.outputData;\n  }\n\n  if (this.__pipeline) {\n    this.__pipeline.currentTask = this;\n  }\n\n  var planResult;\n\n  if (this._plan && !skip) {\n    planResult = this._plan(this.context);\n  } // Support sharding by mod, which changes the render sequence and makes the rendered graphic\n  // elements uniformed distributed when progress, especially when moving or zooming.\n\n\n  var lastModBy = normalizeModBy(this._modBy);\n  var lastModDataCount = this._modDataCount || 0;\n  var modBy = normalizeModBy(performArgs && performArgs.modBy);\n  var modDataCount = performArgs && performArgs.modDataCount || 0;\n\n  if (lastModBy !== modBy || lastModDataCount !== modDataCount) {\n    planResult = 'reset';\n  }\n\n  function normalizeModBy(val) {\n    !(val >= 1) && (val = 1); // jshint ignore:line\n\n    return val;\n  }\n\n  var forceFirstProgress;\n\n  if (this._dirty || planResult === 'reset') {\n    this._dirty = false;\n    forceFirstProgress = reset(this, skip);\n  }\n\n  this._modBy = modBy;\n  this._modDataCount = modDataCount;\n  var step = performArgs && performArgs.step;\n\n  if (upTask) {\n    this._dueEnd = upTask._outputDueEnd;\n  } // DataTask or overallTask\n  else {\n      this._dueEnd = this._count ? this._count(this.context) : Infinity;\n    } // Note: Stubs, that its host overall task let it has progress, has progress.\n  // If no progress, pass index from upstream to downstream each time plan called.\n\n\n  if (this._progress) {\n    var start = this._dueIndex;\n    var end = Math.min(step != null ? this._dueIndex + step : Infinity, this._dueEnd);\n\n    if (!skip && (forceFirstProgress || start < end)) {\n      var progress = this._progress;\n\n      if (isArray(progress)) {\n        for (var i = 0; i < progress.length; i++) {\n          doProgress(this, progress[i], start, end, modBy, modDataCount);\n        }\n      } else {\n        doProgress(this, progress, start, end, modBy, modDataCount);\n      }\n    }\n\n    this._dueIndex = end; // If no `outputDueEnd`, assume that output data and\n    // input data is the same, so use `dueIndex` as `outputDueEnd`.\n\n    var outputDueEnd = this._settedOutputEnd != null ? this._settedOutputEnd : end;\n    this._outputDueEnd = outputDueEnd;\n  } else {\n    // (1) Some overall task has no progress.\n    // (2) Stubs, that its host overall task do not let it has progress, has no progress.\n    // This should always be performed so it can be passed to downstream.\n    this._dueIndex = this._outputDueEnd = this._settedOutputEnd != null ? this._settedOutputEnd : this._dueEnd;\n  }\n\n  return this.unfinished();\n};\n\nvar iterator = function () {\n  var end;\n  var current;\n  var modBy;\n  var modDataCount;\n  var winCount;\n  var it = {\n    reset: function (s, e, sStep, sCount) {\n      current = s;\n      end = e;\n      modBy = sStep;\n      modDataCount = sCount;\n      winCount = Math.ceil(modDataCount / modBy);\n      it.next = modBy > 1 && modDataCount > 0 ? modNext : sequentialNext;\n    }\n  };\n  return it;\n\n  function sequentialNext() {\n    return current < end ? current++ : null;\n  }\n\n  function modNext() {\n    var dataIndex = current % winCount * modBy + Math.ceil(current / winCount);\n    var result = current >= end ? null : dataIndex < modDataCount ? dataIndex // If modDataCount is smaller than data.count() (consider `appendData` case),\n    // Use normal linear rendering mode.\n    : current;\n    current++;\n    return result;\n  }\n}();\n\ntaskProto.dirty = function () {\n  this._dirty = true;\n  this._onDirty && this._onDirty(this.context);\n};\n\nfunction doProgress(taskIns, progress, start, end, modBy, modDataCount) {\n  iterator.reset(start, end, modBy, modDataCount);\n  taskIns._callingProgress = progress;\n\n  taskIns._callingProgress({\n    start: start,\n    end: end,\n    count: end - start,\n    next: iterator.next\n  }, taskIns.context);\n}\n\nfunction reset(taskIns, skip) {\n  taskIns._dueIndex = taskIns._outputDueEnd = taskIns._dueEnd = 0;\n  taskIns._settedOutputEnd = null;\n  var progress;\n  var forceFirstProgress;\n\n  if (!skip && taskIns._reset) {\n    progress = taskIns._reset(taskIns.context);\n\n    if (progress && progress.progress) {\n      forceFirstProgress = progress.forceFirstProgress;\n      progress = progress.progress;\n    } // To simplify no progress checking, array must has item.\n\n\n    if (isArray(progress) && !progress.length) {\n      progress = null;\n    }\n  }\n\n  taskIns._progress = progress;\n  taskIns._modBy = taskIns._modDataCount = null;\n  var downstream = taskIns._downstream;\n  downstream && downstream.dirty();\n  return forceFirstProgress;\n}\n/**\n * @return {boolean}\n */\n\n\ntaskProto.unfinished = function () {\n  return this._progress && this._dueIndex < this._dueEnd;\n};\n/**\n * @param {Object} downTask The downstream task.\n * @return {Object} The downstream task.\n */\n\n\ntaskProto.pipe = function (downTask) {\n  // If already downstream, do not dirty downTask.\n  if (this._downstream !== downTask || this._dirty) {\n    this._downstream = downTask;\n    downTask._upstream = this;\n    downTask.dirty();\n  }\n};\n\ntaskProto.dispose = function () {\n  if (this._disposed) {\n    return;\n  }\n\n  this._upstream && (this._upstream._downstream = null);\n  this._downstream && (this._downstream._upstream = null);\n  this._dirty = false;\n  this._disposed = true;\n};\n\ntaskProto.getUpstream = function () {\n  return this._upstream;\n};\n\ntaskProto.getDownstream = function () {\n  return this._downstream;\n};\n\ntaskProto.setOutputEnd = function (end) {\n  // This only happend in dataTask, dataZoom, map, currently.\n  // where dataZoom do not set end each time, but only set\n  // when reset. So we should record the setted end, in case\n  // that the stub of dataZoom perform again and earse the\n  // setted end by upstream.\n  this._outputDueEnd = this._settedOutputEnd = end;\n}; ///////////////////////////////////////////////////////////\n// For stream debug (Should be commented out after used!)\n// Usage: printTask(this, 'begin');\n// Usage: printTask(this, null, {someExtraProp});\n// function printTask(task, prefix, extra) {\n//     window.ecTaskUID == null && (window.ecTaskUID = 0);\n//     task.uidDebug == null && (task.uidDebug = `task_${window.ecTaskUID++}`);\n//     task.agent && task.agent.uidDebug == null && (task.agent.uidDebug = `task_${window.ecTaskUID++}`);\n//     var props = [];\n//     if (task.__pipeline) {\n//         var val = `${task.__idxInPipeline}/${task.__pipeline.tail.__idxInPipeline} ${task.agent ? '(stub)' : ''}`;\n//         props.push({text: 'idx', value: val});\n//     } else {\n//         var stubCount = 0;\n//         task.agentStubMap.each(() => stubCount++);\n//         props.push({text: 'idx', value: `overall (stubs: ${stubCount})`});\n//     }\n//     props.push({text: 'uid', value: task.uidDebug});\n//     if (task.__pipeline) {\n//         props.push({text: 'pid', value: task.__pipeline.id});\n//         task.agent && props.push(\n//             {text: 'stubFor', value: task.agent.uidDebug}\n//         );\n//     }\n//     props.push(\n//         {text: 'dirty', value: task._dirty},\n//         {text: 'dueIndex', value: task._dueIndex},\n//         {text: 'dueEnd', value: task._dueEnd},\n//         {text: 'outputDueEnd', value: task._outputDueEnd}\n//     );\n//     if (extra) {\n//         Object.keys(extra).forEach(key => {\n//             props.push({text: key, value: extra[key]});\n//         });\n//     }\n//     var args = ['color: blue'];\n//     var msg = `%c[${prefix || 'T'}] %c` + props.map(item => (\n//         args.push('color: black', 'color: red'),\n//         `${item.text}: %c${item.value}`\n//     )).join('%c, ');\n//     console.log.apply(console, [msg].concat(args));\n//     // console.log(this);\n// }\n\n\nexports.createTask = createTask;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar graphic = require(\"../../util/graphic\");\n\nvar SymbolClz = require(\"./Symbol\");\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar isObject = _util.isObject;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @module echarts/chart/helper/SymbolDraw\n */\n\n/**\n * @constructor\n * @alias module:echarts/chart/helper/SymbolDraw\n * @param {module:zrender/graphic/Group} [symbolCtor]\n */\nfunction SymbolDraw(symbolCtor) {\n  this.group = new graphic.Group();\n  this._symbolCtor = symbolCtor || SymbolClz;\n}\n\nvar symbolDrawProto = SymbolDraw.prototype;\n\nfunction symbolNeedsDraw(data, point, idx, opt) {\n  return point && !isNaN(point[0]) && !isNaN(point[1]) && !(opt.isIgnore && opt.isIgnore(idx)) // We do not set clipShape on group, because it will cut part of\n  // the symbol element shape. We use the same clip shape here as\n  // the line clip.\n  && !(opt.clipShape && !opt.clipShape.contain(point[0], point[1])) && data.getItemVisual(idx, 'symbol') !== 'none';\n}\n/**\n * Update symbols draw by new data\n * @param {module:echarts/data/List} data\n * @param {Object} [opt] Or isIgnore\n * @param {Function} [opt.isIgnore]\n * @param {Object} [opt.clipShape]\n */\n\n\nsymbolDrawProto.updateData = function (data, opt) {\n  opt = normalizeUpdateOpt(opt);\n  var group = this.group;\n  var seriesModel = data.hostModel;\n  var oldData = this._data;\n  var SymbolCtor = this._symbolCtor;\n  var seriesScope = makeSeriesScope(data); // There is no oldLineData only when first rendering or switching from\n  // stream mode to normal mode, where previous elements should be removed.\n\n  if (!oldData) {\n    group.removeAll();\n  }\n\n  data.diff(oldData).add(function (newIdx) {\n    var point = data.getItemLayout(newIdx);\n\n    if (symbolNeedsDraw(data, point, newIdx, opt)) {\n      var symbolEl = new SymbolCtor(data, newIdx, seriesScope);\n      symbolEl.attr('position', point);\n      data.setItemGraphicEl(newIdx, symbolEl);\n      group.add(symbolEl);\n    }\n  }).update(function (newIdx, oldIdx) {\n    var symbolEl = oldData.getItemGraphicEl(oldIdx);\n    var point = data.getItemLayout(newIdx);\n\n    if (!symbolNeedsDraw(data, point, newIdx, opt)) {\n      group.remove(symbolEl);\n      return;\n    }\n\n    if (!symbolEl) {\n      symbolEl = new SymbolCtor(data, newIdx);\n      symbolEl.attr('position', point);\n    } else {\n      symbolEl.updateData(data, newIdx, seriesScope);\n      graphic.updateProps(symbolEl, {\n        position: point\n      }, seriesModel);\n    } // Add back\n\n\n    group.add(symbolEl);\n    data.setItemGraphicEl(newIdx, symbolEl);\n  }).remove(function (oldIdx) {\n    var el = oldData.getItemGraphicEl(oldIdx);\n    el && el.fadeOut(function () {\n      group.remove(el);\n    });\n  }).execute();\n  this._data = data;\n};\n\nsymbolDrawProto.isPersistent = function () {\n  return true;\n};\n\nsymbolDrawProto.updateLayout = function () {\n  var data = this._data;\n\n  if (data) {\n    // Not use animation\n    data.eachItemGraphicEl(function (el, idx) {\n      var point = data.getItemLayout(idx);\n      el.attr('position', point);\n    });\n  }\n};\n\nsymbolDrawProto.incrementalPrepareUpdate = function (data) {\n  this._seriesScope = makeSeriesScope(data);\n  this._data = null;\n  this.group.removeAll();\n};\n/**\n * Update symbols draw by new data\n * @param {module:echarts/data/List} data\n * @param {Object} [opt] Or isIgnore\n * @param {Function} [opt.isIgnore]\n * @param {Object} [opt.clipShape]\n */\n\n\nsymbolDrawProto.incrementalUpdate = function (taskParams, data, opt) {\n  opt = normalizeUpdateOpt(opt);\n\n  function updateIncrementalAndHover(el) {\n    if (!el.isGroup) {\n      el.incremental = el.useHoverLayer = true;\n    }\n  }\n\n  for (var idx = taskParams.start; idx < taskParams.end; idx++) {\n    var point = data.getItemLayout(idx);\n\n    if (symbolNeedsDraw(data, point, idx, opt)) {\n      var el = new this._symbolCtor(data, idx, this._seriesScope);\n      el.traverse(updateIncrementalAndHover);\n      el.attr('position', point);\n      this.group.add(el);\n      data.setItemGraphicEl(idx, el);\n    }\n  }\n};\n\nfunction normalizeUpdateOpt(opt) {\n  if (opt != null && !isObject(opt)) {\n    opt = {\n      isIgnore: opt\n    };\n  }\n\n  return opt || {};\n}\n\nsymbolDrawProto.remove = function (enableAnimation) {\n  var group = this.group;\n  var data = this._data; // Incremental model do not have this._data.\n\n  if (data && enableAnimation) {\n    data.eachItemGraphicEl(function (el) {\n      el.fadeOut(function () {\n        group.remove(el);\n      });\n    });\n  } else {\n    group.removeAll();\n  }\n};\n\nfunction makeSeriesScope(data) {\n  var seriesModel = data.hostModel;\n  return {\n    itemStyle: seriesModel.getModel('itemStyle').getItemStyle(['color']),\n    hoverItemStyle: seriesModel.getModel('emphasis.itemStyle').getItemStyle(),\n    symbolRotate: seriesModel.get('symbolRotate'),\n    symbolOffset: seriesModel.get('symbolOffset'),\n    hoverAnimation: seriesModel.get('hoverAnimation'),\n    labelModel: seriesModel.getModel('label'),\n    hoverLabelModel: seriesModel.getModel('emphasis.label'),\n    cursorStyle: seriesModel.get('cursor')\n  };\n}\n\nvar _default = SymbolDraw;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar retrieve = _util.retrieve;\nvar defaults = _util.defaults;\nvar extend = _util.extend;\nvar each = _util.each;\n\nvar formatUtil = require(\"../../util/format\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar Model = require(\"../../model/Model\");\n\nvar _number = require(\"../../util/number\");\n\nvar isRadianAroundZero = _number.isRadianAroundZero;\nvar remRadian = _number.remRadian;\n\nvar _symbol = require(\"../../util/symbol\");\n\nvar createSymbol = _symbol.createSymbol;\n\nvar matrixUtil = require(\"zrender/lib/core/matrix\");\n\nvar _vector = require(\"zrender/lib/core/vector\");\n\nvar v2ApplyTransform = _vector.applyTransform;\n\nvar _axisHelper = require(\"../../coord/axisHelper\");\n\nvar shouldShowAllLabels = _axisHelper.shouldShowAllLabels;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar PI = Math.PI;\n/**\n * A final axis is translated and rotated from a \"standard axis\".\n * So opt.position and opt.rotation is required.\n *\n * A standard axis is and axis from [0, 0] to [0, axisExtent[1]],\n * for example: (0, 0) ------------> (0, 50)\n *\n * nameDirection or tickDirection or labelDirection is 1 means tick\n * or label is below the standard axis, whereas is -1 means above\n * the standard axis. labelOffset means offset between label and axis,\n * which is useful when 'onZero', where axisLabel is in the grid and\n * label in outside grid.\n *\n * Tips: like always,\n * positive rotation represents anticlockwise, and negative rotation\n * represents clockwise.\n * The direction of position coordinate is the same as the direction\n * of screen coordinate.\n *\n * Do not need to consider axis 'inverse', which is auto processed by\n * axis extent.\n *\n * @param {module:zrender/container/Group} group\n * @param {Object} axisModel\n * @param {Object} opt Standard axis parameters.\n * @param {Array.<number>} opt.position [x, y]\n * @param {number} opt.rotation by radian\n * @param {number} [opt.nameDirection=1] 1 or -1 Used when nameLocation is 'middle' or 'center'.\n * @param {number} [opt.tickDirection=1] 1 or -1\n * @param {number} [opt.labelDirection=1] 1 or -1\n * @param {number} [opt.labelOffset=0] Usefull when onZero.\n * @param {string} [opt.axisLabelShow] default get from axisModel.\n * @param {string} [opt.axisName] default get from axisModel.\n * @param {number} [opt.axisNameAvailableWidth]\n * @param {number} [opt.labelRotate] by degree, default get from axisModel.\n * @param {number} [opt.strokeContainThreshold] Default label interval when label\n * @param {number} [opt.nameTruncateMaxWidth]\n */\n\nvar AxisBuilder = function (axisModel, opt) {\n  /**\n   * @readOnly\n   */\n  this.opt = opt;\n  /**\n   * @readOnly\n   */\n\n  this.axisModel = axisModel; // Default value\n\n  defaults(opt, {\n    labelOffset: 0,\n    nameDirection: 1,\n    tickDirection: 1,\n    labelDirection: 1,\n    silent: true\n  });\n  /**\n   * @readOnly\n   */\n\n  this.group = new graphic.Group(); // FIXME Not use a seperate text group?\n\n  var dumbGroup = new graphic.Group({\n    position: opt.position.slice(),\n    rotation: opt.rotation\n  }); // this.group.add(dumbGroup);\n  // this._dumbGroup = dumbGroup;\n\n  dumbGroup.updateTransform();\n  this._transform = dumbGroup.transform;\n  this._dumbGroup = dumbGroup;\n};\n\nAxisBuilder.prototype = {\n  constructor: AxisBuilder,\n  hasBuilder: function (name) {\n    return !!builders[name];\n  },\n  add: function (name) {\n    builders[name].call(this);\n  },\n  getGroup: function () {\n    return this.group;\n  }\n};\nvar builders = {\n  /**\n   * @private\n   */\n  axisLine: function () {\n    var opt = this.opt;\n    var axisModel = this.axisModel;\n\n    if (!axisModel.get('axisLine.show')) {\n      return;\n    }\n\n    var extent = this.axisModel.axis.getExtent();\n    var matrix = this._transform;\n    var pt1 = [extent[0], 0];\n    var pt2 = [extent[1], 0];\n\n    if (matrix) {\n      v2ApplyTransform(pt1, pt1, matrix);\n      v2ApplyTransform(pt2, pt2, matrix);\n    }\n\n    var lineStyle = extend({\n      lineCap: 'round'\n    }, axisModel.getModel('axisLine.lineStyle').getLineStyle());\n    this.group.add(new graphic.Line({\n      // Id for animation\n      anid: 'line',\n      subPixelOptimize: true,\n      shape: {\n        x1: pt1[0],\n        y1: pt1[1],\n        x2: pt2[0],\n        y2: pt2[1]\n      },\n      style: lineStyle,\n      strokeContainThreshold: opt.strokeContainThreshold || 5,\n      silent: true,\n      z2: 1\n    }));\n    var arrows = axisModel.get('axisLine.symbol');\n    var arrowSize = axisModel.get('axisLine.symbolSize');\n    var arrowOffset = axisModel.get('axisLine.symbolOffset') || 0;\n\n    if (typeof arrowOffset === 'number') {\n      arrowOffset = [arrowOffset, arrowOffset];\n    }\n\n    if (arrows != null) {\n      if (typeof arrows === 'string') {\n        // Use the same arrow for start and end point\n        arrows = [arrows, arrows];\n      }\n\n      if (typeof arrowSize === 'string' || typeof arrowSize === 'number') {\n        // Use the same size for width and height\n        arrowSize = [arrowSize, arrowSize];\n      }\n\n      var symbolWidth = arrowSize[0];\n      var symbolHeight = arrowSize[1];\n      each([{\n        rotate: opt.rotation + Math.PI / 2,\n        offset: arrowOffset[0],\n        r: 0\n      }, {\n        rotate: opt.rotation - Math.PI / 2,\n        offset: arrowOffset[1],\n        r: Math.sqrt((pt1[0] - pt2[0]) * (pt1[0] - pt2[0]) + (pt1[1] - pt2[1]) * (pt1[1] - pt2[1]))\n      }], function (point, index) {\n        if (arrows[index] !== 'none' && arrows[index] != null) {\n          var symbol = createSymbol(arrows[index], -symbolWidth / 2, -symbolHeight / 2, symbolWidth, symbolHeight, lineStyle.stroke, true); // Calculate arrow position with offset\n\n          var r = point.r + point.offset;\n          var pos = [pt1[0] + r * Math.cos(opt.rotation), pt1[1] - r * Math.sin(opt.rotation)];\n          symbol.attr({\n            rotation: point.rotate,\n            position: pos,\n            silent: true,\n            z2: 11\n          });\n          this.group.add(symbol);\n        }\n      }, this);\n    }\n  },\n\n  /**\n   * @private\n   */\n  axisTickLabel: function () {\n    var axisModel = this.axisModel;\n    var opt = this.opt;\n    var ticksEls = buildAxisMajorTicks(this, axisModel, opt);\n    var labelEls = buildAxisLabel(this, axisModel, opt);\n    fixMinMaxLabelShow(axisModel, labelEls, ticksEls);\n    buildAxisMinorTicks(this, axisModel, opt);\n  },\n\n  /**\n   * @private\n   */\n  axisName: function () {\n    var opt = this.opt;\n    var axisModel = this.axisModel;\n    var name = retrieve(opt.axisName, axisModel.get('name'));\n\n    if (!name) {\n      return;\n    }\n\n    var nameLocation = axisModel.get('nameLocation');\n    var nameDirection = opt.nameDirection;\n    var textStyleModel = axisModel.getModel('nameTextStyle');\n    var gap = axisModel.get('nameGap') || 0;\n    var extent = this.axisModel.axis.getExtent();\n    var gapSignal = extent[0] > extent[1] ? -1 : 1;\n    var pos = [nameLocation === 'start' ? extent[0] - gapSignal * gap : nameLocation === 'end' ? extent[1] + gapSignal * gap : (extent[0] + extent[1]) / 2, // 'middle'\n    // Reuse labelOffset.\n    isNameLocationCenter(nameLocation) ? opt.labelOffset + nameDirection * gap : 0];\n    var labelLayout;\n    var nameRotation = axisModel.get('nameRotate');\n\n    if (nameRotation != null) {\n      nameRotation = nameRotation * PI / 180; // To radian.\n    }\n\n    var axisNameAvailableWidth;\n\n    if (isNameLocationCenter(nameLocation)) {\n      labelLayout = innerTextLayout(opt.rotation, nameRotation != null ? nameRotation : opt.rotation, // Adapt to axis.\n      nameDirection);\n    } else {\n      labelLayout = endTextLayout(opt, nameLocation, nameRotation || 0, extent);\n      axisNameAvailableWidth = opt.axisNameAvailableWidth;\n\n      if (axisNameAvailableWidth != null) {\n        axisNameAvailableWidth = Math.abs(axisNameAvailableWidth / Math.sin(labelLayout.rotation));\n        !isFinite(axisNameAvailableWidth) && (axisNameAvailableWidth = null);\n      }\n    }\n\n    var textFont = textStyleModel.getFont();\n    var truncateOpt = axisModel.get('nameTruncate', true) || {};\n    var ellipsis = truncateOpt.ellipsis;\n    var maxWidth = retrieve(opt.nameTruncateMaxWidth, truncateOpt.maxWidth, axisNameAvailableWidth); // FIXME\n    // truncate rich text? (consider performance)\n\n    var truncatedText = ellipsis != null && maxWidth != null ? formatUtil.truncateText(name, maxWidth, textFont, ellipsis, {\n      minChar: 2,\n      placeholder: truncateOpt.placeholder\n    }) : name;\n    var tooltipOpt = axisModel.get('tooltip', true);\n    var mainType = axisModel.mainType;\n    var formatterParams = {\n      componentType: mainType,\n      name: name,\n      $vars: ['name']\n    };\n    formatterParams[mainType + 'Index'] = axisModel.componentIndex;\n    var textEl = new graphic.Text({\n      // Id for animation\n      anid: 'name',\n      __fullText: name,\n      __truncatedText: truncatedText,\n      position: pos,\n      rotation: labelLayout.rotation,\n      silent: isLabelSilent(axisModel),\n      z2: 1,\n      tooltip: tooltipOpt && tooltipOpt.show ? extend({\n        content: name,\n        formatter: function () {\n          return name;\n        },\n        formatterParams: formatterParams\n      }, tooltipOpt) : null\n    });\n    graphic.setTextStyle(textEl.style, textStyleModel, {\n      text: truncatedText,\n      textFont: textFont,\n      textFill: textStyleModel.getTextColor() || axisModel.get('axisLine.lineStyle.color'),\n      textAlign: textStyleModel.get('align') || labelLayout.textAlign,\n      textVerticalAlign: textStyleModel.get('verticalAlign') || labelLayout.textVerticalAlign\n    });\n\n    if (axisModel.get('triggerEvent')) {\n      textEl.eventData = makeAxisEventDataBase(axisModel);\n      textEl.eventData.targetType = 'axisName';\n      textEl.eventData.name = name;\n    } // FIXME\n\n\n    this._dumbGroup.add(textEl);\n\n    textEl.updateTransform();\n    this.group.add(textEl);\n    textEl.decomposeTransform();\n  }\n};\n\nvar makeAxisEventDataBase = AxisBuilder.makeAxisEventDataBase = function (axisModel) {\n  var eventData = {\n    componentType: axisModel.mainType,\n    componentIndex: axisModel.componentIndex\n  };\n  eventData[axisModel.mainType + 'Index'] = axisModel.componentIndex;\n  return eventData;\n};\n/**\n * @public\n * @static\n * @param {Object} opt\n * @param {number} axisRotation in radian\n * @param {number} textRotation in radian\n * @param {number} direction\n * @return {Object} {\n *  rotation, // according to axis\n *  textAlign,\n *  textVerticalAlign\n * }\n */\n\n\nvar innerTextLayout = AxisBuilder.innerTextLayout = function (axisRotation, textRotation, direction) {\n  var rotationDiff = remRadian(textRotation - axisRotation);\n  var textAlign;\n  var textVerticalAlign;\n\n  if (isRadianAroundZero(rotationDiff)) {\n    // Label is parallel with axis line.\n    textVerticalAlign = direction > 0 ? 'top' : 'bottom';\n    textAlign = 'center';\n  } else if (isRadianAroundZero(rotationDiff - PI)) {\n    // Label is inverse parallel with axis line.\n    textVerticalAlign = direction > 0 ? 'bottom' : 'top';\n    textAlign = 'center';\n  } else {\n    textVerticalAlign = 'middle';\n\n    if (rotationDiff > 0 && rotationDiff < PI) {\n      textAlign = direction > 0 ? 'right' : 'left';\n    } else {\n      textAlign = direction > 0 ? 'left' : 'right';\n    }\n  }\n\n  return {\n    rotation: rotationDiff,\n    textAlign: textAlign,\n    textVerticalAlign: textVerticalAlign\n  };\n};\n\nfunction endTextLayout(opt, textPosition, textRotate, extent) {\n  var rotationDiff = remRadian(textRotate - opt.rotation);\n  var textAlign;\n  var textVerticalAlign;\n  var inverse = extent[0] > extent[1];\n  var onLeft = textPosition === 'start' && !inverse || textPosition !== 'start' && inverse;\n\n  if (isRadianAroundZero(rotationDiff - PI / 2)) {\n    textVerticalAlign = onLeft ? 'bottom' : 'top';\n    textAlign = 'center';\n  } else if (isRadianAroundZero(rotationDiff - PI * 1.5)) {\n    textVerticalAlign = onLeft ? 'top' : 'bottom';\n    textAlign = 'center';\n  } else {\n    textVerticalAlign = 'middle';\n\n    if (rotationDiff < PI * 1.5 && rotationDiff > PI / 2) {\n      textAlign = onLeft ? 'left' : 'right';\n    } else {\n      textAlign = onLeft ? 'right' : 'left';\n    }\n  }\n\n  return {\n    rotation: rotationDiff,\n    textAlign: textAlign,\n    textVerticalAlign: textVerticalAlign\n  };\n}\n\nvar isLabelSilent = AxisBuilder.isLabelSilent = function (axisModel) {\n  var tooltipOpt = axisModel.get('tooltip');\n  return axisModel.get('silent') // Consider mouse cursor, add these restrictions.\n  || !(axisModel.get('triggerEvent') || tooltipOpt && tooltipOpt.show);\n};\n\nfunction fixMinMaxLabelShow(axisModel, labelEls, tickEls) {\n  if (shouldShowAllLabels(axisModel.axis)) {\n    return;\n  } // If min or max are user set, we need to check\n  // If the tick on min(max) are overlap on their neighbour tick\n  // If they are overlapped, we need to hide the min(max) tick label\n\n\n  var showMinLabel = axisModel.get('axisLabel.showMinLabel');\n  var showMaxLabel = axisModel.get('axisLabel.showMaxLabel'); // FIXME\n  // Have not consider onBand yet, where tick els is more than label els.\n\n  labelEls = labelEls || [];\n  tickEls = tickEls || [];\n  var firstLabel = labelEls[0];\n  var nextLabel = labelEls[1];\n  var lastLabel = labelEls[labelEls.length - 1];\n  var prevLabel = labelEls[labelEls.length - 2];\n  var firstTick = tickEls[0];\n  var nextTick = tickEls[1];\n  var lastTick = tickEls[tickEls.length - 1];\n  var prevTick = tickEls[tickEls.length - 2];\n\n  if (showMinLabel === false) {\n    ignoreEl(firstLabel);\n    ignoreEl(firstTick);\n  } else if (isTwoLabelOverlapped(firstLabel, nextLabel)) {\n    if (showMinLabel) {\n      ignoreEl(nextLabel);\n      ignoreEl(nextTick);\n    } else {\n      ignoreEl(firstLabel);\n      ignoreEl(firstTick);\n    }\n  }\n\n  if (showMaxLabel === false) {\n    ignoreEl(lastLabel);\n    ignoreEl(lastTick);\n  } else if (isTwoLabelOverlapped(prevLabel, lastLabel)) {\n    if (showMaxLabel) {\n      ignoreEl(prevLabel);\n      ignoreEl(prevTick);\n    } else {\n      ignoreEl(lastLabel);\n      ignoreEl(lastTick);\n    }\n  }\n}\n\nfunction ignoreEl(el) {\n  el && (el.ignore = true);\n}\n\nfunction isTwoLabelOverlapped(current, next, labelLayout) {\n  // current and next has the same rotation.\n  var firstRect = current && current.getBoundingRect().clone();\n  var nextRect = next && next.getBoundingRect().clone();\n\n  if (!firstRect || !nextRect) {\n    return;\n  } // When checking intersect of two rotated labels, we use mRotationBack\n  // to avoid that boundingRect is enlarge when using `boundingRect.applyTransform`.\n\n\n  var mRotationBack = matrixUtil.identity([]);\n  matrixUtil.rotate(mRotationBack, mRotationBack, -current.rotation);\n  firstRect.applyTransform(matrixUtil.mul([], mRotationBack, current.getLocalTransform()));\n  nextRect.applyTransform(matrixUtil.mul([], mRotationBack, next.getLocalTransform()));\n  return firstRect.intersect(nextRect);\n}\n\nfunction isNameLocationCenter(nameLocation) {\n  return nameLocation === 'middle' || nameLocation === 'center';\n}\n\nfunction createTicks(ticksCoords, tickTransform, tickEndCoord, tickLineStyle, aniid) {\n  var tickEls = [];\n  var pt1 = [];\n  var pt2 = [];\n\n  for (var i = 0; i < ticksCoords.length; i++) {\n    var tickCoord = ticksCoords[i].coord;\n    pt1[0] = tickCoord;\n    pt1[1] = 0;\n    pt2[0] = tickCoord;\n    pt2[1] = tickEndCoord;\n\n    if (tickTransform) {\n      v2ApplyTransform(pt1, pt1, tickTransform);\n      v2ApplyTransform(pt2, pt2, tickTransform);\n    } // Tick line, Not use group transform to have better line draw\n\n\n    var tickEl = new graphic.Line({\n      // Id for animation\n      anid: aniid + '_' + ticksCoords[i].tickValue,\n      subPixelOptimize: true,\n      shape: {\n        x1: pt1[0],\n        y1: pt1[1],\n        x2: pt2[0],\n        y2: pt2[1]\n      },\n      style: tickLineStyle,\n      z2: 2,\n      silent: true\n    });\n    tickEls.push(tickEl);\n  }\n\n  return tickEls;\n}\n\nfunction buildAxisMajorTicks(axisBuilder, axisModel, opt) {\n  var axis = axisModel.axis;\n  var tickModel = axisModel.getModel('axisTick');\n\n  if (!tickModel.get('show') || axis.scale.isBlank()) {\n    return;\n  }\n\n  var lineStyleModel = tickModel.getModel('lineStyle');\n  var tickEndCoord = opt.tickDirection * tickModel.get('length');\n  var ticksCoords = axis.getTicksCoords();\n  var ticksEls = createTicks(ticksCoords, axisBuilder._transform, tickEndCoord, defaults(lineStyleModel.getLineStyle(), {\n    stroke: axisModel.get('axisLine.lineStyle.color')\n  }), 'ticks');\n\n  for (var i = 0; i < ticksEls.length; i++) {\n    axisBuilder.group.add(ticksEls[i]);\n  }\n\n  return ticksEls;\n}\n\nfunction buildAxisMinorTicks(axisBuilder, axisModel, opt) {\n  var axis = axisModel.axis;\n  var minorTickModel = axisModel.getModel('minorTick');\n\n  if (!minorTickModel.get('show') || axis.scale.isBlank()) {\n    return;\n  }\n\n  var minorTicksCoords = axis.getMinorTicksCoords();\n\n  if (!minorTicksCoords.length) {\n    return;\n  }\n\n  var lineStyleModel = minorTickModel.getModel('lineStyle');\n  var tickEndCoord = opt.tickDirection * minorTickModel.get('length');\n  var minorTickLineStyle = defaults(lineStyleModel.getLineStyle(), defaults(axisModel.getModel('axisTick').getLineStyle(), {\n    stroke: axisModel.get('axisLine.lineStyle.color')\n  }));\n\n  for (var i = 0; i < minorTicksCoords.length; i++) {\n    var minorTicksEls = createTicks(minorTicksCoords[i], axisBuilder._transform, tickEndCoord, minorTickLineStyle, 'minorticks_' + i);\n\n    for (var k = 0; k < minorTicksEls.length; k++) {\n      axisBuilder.group.add(minorTicksEls[k]);\n    }\n  }\n}\n\nfunction buildAxisLabel(axisBuilder, axisModel, opt) {\n  var axis = axisModel.axis;\n  var show = retrieve(opt.axisLabelShow, axisModel.get('axisLabel.show'));\n\n  if (!show || axis.scale.isBlank()) {\n    return;\n  }\n\n  var labelModel = axisModel.getModel('axisLabel');\n  var labelMargin = labelModel.get('margin');\n  var labels = axis.getViewLabels(); // Special label rotate.\n\n  var labelRotation = (retrieve(opt.labelRotate, labelModel.get('rotate')) || 0) * PI / 180;\n  var labelLayout = innerTextLayout(opt.rotation, labelRotation, opt.labelDirection);\n  var rawCategoryData = axisModel.getCategories && axisModel.getCategories(true);\n  var labelEls = [];\n  var silent = isLabelSilent(axisModel);\n  var triggerEvent = axisModel.get('triggerEvent');\n  each(labels, function (labelItem, index) {\n    var tickValue = labelItem.tickValue;\n    var formattedLabel = labelItem.formattedLabel;\n    var rawLabel = labelItem.rawLabel;\n    var itemLabelModel = labelModel;\n\n    if (rawCategoryData && rawCategoryData[tickValue] && rawCategoryData[tickValue].textStyle) {\n      itemLabelModel = new Model(rawCategoryData[tickValue].textStyle, labelModel, axisModel.ecModel);\n    }\n\n    var textColor = itemLabelModel.getTextColor() || axisModel.get('axisLine.lineStyle.color');\n    var tickCoord = axis.dataToCoord(tickValue);\n    var pos = [tickCoord, opt.labelOffset + opt.labelDirection * labelMargin];\n    var textEl = new graphic.Text({\n      // Id for animation\n      anid: 'label_' + tickValue,\n      position: pos,\n      rotation: labelLayout.rotation,\n      silent: silent,\n      z2: 10\n    });\n    graphic.setTextStyle(textEl.style, itemLabelModel, {\n      text: formattedLabel,\n      textAlign: itemLabelModel.getShallow('align', true) || labelLayout.textAlign,\n      textVerticalAlign: itemLabelModel.getShallow('verticalAlign', true) || itemLabelModel.getShallow('baseline', true) || labelLayout.textVerticalAlign,\n      textFill: typeof textColor === 'function' ? textColor( // (1) In category axis with data zoom, tick is not the original\n      // index of axis.data. So tick should not be exposed to user\n      // in category axis.\n      // (2) Compatible with previous version, which always use formatted label as\n      // input. But in interval scale the formatted label is like '223,445', which\n      // maked user repalce ','. So we modify it to return original val but remain\n      // it as 'string' to avoid error in replacing.\n      axis.type === 'category' ? rawLabel : axis.type === 'value' ? tickValue + '' : tickValue, index) : textColor\n    }); // Pack data for mouse event\n\n    if (triggerEvent) {\n      textEl.eventData = makeAxisEventDataBase(axisModel);\n      textEl.eventData.targetType = 'axisLabel';\n      textEl.eventData.value = rawLabel;\n    } // FIXME\n\n\n    axisBuilder._dumbGroup.add(textEl);\n\n    textEl.updateTransform();\n    labelEls.push(textEl);\n    axisBuilder.group.add(textEl);\n    textEl.decomposeTransform();\n  });\n  return labelEls;\n}\n\nvar _default = AxisBuilder;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar each = _util.each;\nvar isArray = _util.isArray;\nvar isObject = _util.isObject;\n\nvar compatStyle = require(\"./helper/compatStyle\");\n\nvar _model = require(\"../util/model\");\n\nvar normalizeToArray = _model.normalizeToArray;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Compatitable with 2.0\nfunction get(opt, path) {\n  path = path.split(',');\n  var obj = opt;\n\n  for (var i = 0; i < path.length; i++) {\n    obj = obj && obj[path[i]];\n\n    if (obj == null) {\n      break;\n    }\n  }\n\n  return obj;\n}\n\nfunction set(opt, path, val, overwrite) {\n  path = path.split(',');\n  var obj = opt;\n  var key;\n\n  for (var i = 0; i < path.length - 1; i++) {\n    key = path[i];\n\n    if (obj[key] == null) {\n      obj[key] = {};\n    }\n\n    obj = obj[key];\n  }\n\n  if (overwrite || obj[path[i]] == null) {\n    obj[path[i]] = val;\n  }\n}\n\nfunction compatLayoutProperties(option) {\n  each(LAYOUT_PROPERTIES, function (prop) {\n    if (prop[0] in option && !(prop[1] in option)) {\n      option[prop[1]] = option[prop[0]];\n    }\n  });\n}\n\nvar LAYOUT_PROPERTIES = [['x', 'left'], ['y', 'top'], ['x2', 'right'], ['y2', 'bottom']];\nvar COMPATITABLE_COMPONENTS = ['grid', 'geo', 'parallel', 'legend', 'toolbox', 'title', 'visualMap', 'dataZoom', 'timeline'];\n\nfunction _default(option, isTheme) {\n  compatStyle(option, isTheme); // Make sure series array for model initialization.\n\n  option.series = normalizeToArray(option.series);\n  each(option.series, function (seriesOpt) {\n    if (!isObject(seriesOpt)) {\n      return;\n    }\n\n    var seriesType = seriesOpt.type;\n\n    if (seriesType === 'line') {\n      if (seriesOpt.clipOverflow != null) {\n        seriesOpt.clip = seriesOpt.clipOverflow;\n      }\n    } else if (seriesType === 'pie' || seriesType === 'gauge') {\n      if (seriesOpt.clockWise != null) {\n        seriesOpt.clockwise = seriesOpt.clockWise;\n      }\n    } else if (seriesType === 'gauge') {\n      var pointerColor = get(seriesOpt, 'pointer.color');\n      pointerColor != null && set(seriesOpt, 'itemStyle.color', pointerColor);\n    }\n\n    compatLayoutProperties(seriesOpt);\n  }); // dataRange has changed to visualMap\n\n  if (option.dataRange) {\n    option.visualMap = option.dataRange;\n  }\n\n  each(COMPATITABLE_COMPONENTS, function (componentName) {\n    var options = option[componentName];\n\n    if (options) {\n      if (!isArray(options)) {\n        options = [options];\n      }\n\n      each(options, function (option) {\n        compatLayoutProperties(option);\n      });\n    }\n  });\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar Gradient = require(\"zrender/lib/graphic/Gradient\");\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar isFunction = _util.isFunction;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _default = {\n  createOnAllSeries: true,\n  performRawSeries: true,\n  reset: function (seriesModel, ecModel) {\n    var data = seriesModel.getData();\n    var colorAccessPath = (seriesModel.visualColorAccessPath || 'itemStyle.color').split('.'); // Set in itemStyle\n\n    var color = seriesModel.get(colorAccessPath);\n    var colorCallback = isFunction(color) && !(color instanceof Gradient) ? color : null; // Default color\n\n    if (!color || colorCallback) {\n      color = seriesModel.getColorFromPalette( // TODO series count changed.\n      seriesModel.name, null, ecModel.getSeriesCount());\n    }\n\n    data.setVisual('color', color);\n    var borderColorAccessPath = (seriesModel.visualBorderColorAccessPath || 'itemStyle.borderColor').split('.');\n    var borderColor = seriesModel.get(borderColorAccessPath);\n    data.setVisual('borderColor', borderColor); // Only visible series has each data be visual encoded\n\n    if (!ecModel.isSeriesFiltered(seriesModel)) {\n      if (colorCallback) {\n        data.each(function (idx) {\n          data.setItemVisual(idx, 'color', colorCallback(seriesModel.getDataParams(idx)));\n        });\n      } // itemStyle in each data item\n\n\n      var dataEach = function (data, idx) {\n        var itemModel = data.getItemModel(idx);\n        var color = itemModel.get(colorAccessPath, true);\n        var borderColor = itemModel.get(borderColorAccessPath, true);\n\n        if (color != null) {\n          data.setItemVisual(idx, 'color', color);\n        }\n\n        if (borderColor != null) {\n          data.setItemVisual(idx, 'borderColor', borderColor);\n        }\n      };\n\n      return {\n        dataEach: data.hasItemOption ? dataEach : null\n      };\n    }\n  }\n};\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar samplers = {\n  average: function (frame) {\n    var sum = 0;\n    var count = 0;\n\n    for (var i = 0; i < frame.length; i++) {\n      if (!isNaN(frame[i])) {\n        sum += frame[i];\n        count++;\n      }\n    } // Return NaN if count is 0\n\n\n    return count === 0 ? NaN : sum / count;\n  },\n  sum: function (frame) {\n    var sum = 0;\n\n    for (var i = 0; i < frame.length; i++) {\n      // Ignore NaN\n      sum += frame[i] || 0;\n    }\n\n    return sum;\n  },\n  max: function (frame) {\n    var max = -Infinity;\n\n    for (var i = 0; i < frame.length; i++) {\n      frame[i] > max && (max = frame[i]);\n    } // NaN will cause illegal axis extent.\n\n\n    return isFinite(max) ? max : NaN;\n  },\n  min: function (frame) {\n    var min = Infinity;\n\n    for (var i = 0; i < frame.length; i++) {\n      frame[i] < min && (min = frame[i]);\n    } // NaN will cause illegal axis extent.\n\n\n    return isFinite(min) ? min : NaN;\n  },\n  // TODO\n  // Median\n  nearest: function (frame) {\n    return frame[0];\n  }\n};\n\nvar indexSampler = function (frame, value) {\n  return Math.round(frame.length / 2);\n};\n\nfunction _default(seriesType) {\n  return {\n    seriesType: seriesType,\n    modifyOutputEnd: true,\n    reset: function (seriesModel, ecModel, api) {\n      var data = seriesModel.getData();\n      var sampling = seriesModel.get('sampling');\n      var coordSys = seriesModel.coordinateSystem; // Only cartesian2d support down sampling\n\n      if (coordSys.type === 'cartesian2d' && sampling) {\n        var baseAxis = coordSys.getBaseAxis();\n        var valueAxis = coordSys.getOtherAxis(baseAxis);\n        var extent = baseAxis.getExtent(); // Coordinste system has been resized\n\n        var size = Math.abs(extent[1] - extent[0]);\n        var rate = Math.round(data.count() / size);\n\n        if (rate > 1) {\n          var sampler;\n\n          if (typeof sampling === 'string') {\n            sampler = samplers[sampling];\n          } else if (typeof sampling === 'function') {\n            sampler = sampling;\n          }\n\n          if (sampler) {\n            // Only support sample the first dim mapped from value axis.\n            seriesModel.setData(data.downSample(data.mapDimension(valueAxis.dim), 1 / rate, sampler, indexSampler));\n          }\n        }\n      }\n    }\n  };\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar textContain = require(\"zrender/lib/contain/text\");\n\nvar formatUtil = require(\"../../util/format\");\n\nvar matrix = require(\"zrender/lib/core/matrix\");\n\nvar axisHelper = require(\"../../coord/axisHelper\");\n\nvar AxisBuilder = require(\"../axis/AxisBuilder\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @param {module:echarts/model/Model} axisPointerModel\n */\nfunction buildElStyle(axisPointerModel) {\n  var axisPointerType = axisPointerModel.get('type');\n  var styleModel = axisPointerModel.getModel(axisPointerType + 'Style');\n  var style;\n\n  if (axisPointerType === 'line') {\n    style = styleModel.getLineStyle();\n    style.fill = null;\n  } else if (axisPointerType === 'shadow') {\n    style = styleModel.getAreaStyle();\n    style.stroke = null;\n  }\n\n  return style;\n}\n/**\n * @param {Function} labelPos {align, verticalAlign, position}\n */\n\n\nfunction buildLabelElOption(elOption, axisModel, axisPointerModel, api, labelPos) {\n  var value = axisPointerModel.get('value');\n  var text = getValueLabel(value, axisModel.axis, axisModel.ecModel, axisPointerModel.get('seriesDataIndices'), {\n    precision: axisPointerModel.get('label.precision'),\n    formatter: axisPointerModel.get('label.formatter')\n  });\n  var labelModel = axisPointerModel.getModel('label');\n  var paddings = formatUtil.normalizeCssArray(labelModel.get('padding') || 0);\n  var font = labelModel.getFont();\n  var textRect = textContain.getBoundingRect(text, font);\n  var position = labelPos.position;\n  var width = textRect.width + paddings[1] + paddings[3];\n  var height = textRect.height + paddings[0] + paddings[2]; // Adjust by align.\n\n  var align = labelPos.align;\n  align === 'right' && (position[0] -= width);\n  align === 'center' && (position[0] -= width / 2);\n  var verticalAlign = labelPos.verticalAlign;\n  verticalAlign === 'bottom' && (position[1] -= height);\n  verticalAlign === 'middle' && (position[1] -= height / 2); // Not overflow ec container\n\n  confineInContainer(position, width, height, api);\n  var bgColor = labelModel.get('backgroundColor');\n\n  if (!bgColor || bgColor === 'auto') {\n    bgColor = axisModel.get('axisLine.lineStyle.color');\n  }\n\n  elOption.label = {\n    shape: {\n      x: 0,\n      y: 0,\n      width: width,\n      height: height,\n      r: labelModel.get('borderRadius')\n    },\n    position: position.slice(),\n    // TODO: rich\n    style: {\n      text: text,\n      textFont: font,\n      textFill: labelModel.getTextColor(),\n      textPosition: 'inside',\n      textPadding: paddings,\n      fill: bgColor,\n      stroke: labelModel.get('borderColor') || 'transparent',\n      lineWidth: labelModel.get('borderWidth') || 0,\n      shadowBlur: labelModel.get('shadowBlur'),\n      shadowColor: labelModel.get('shadowColor'),\n      shadowOffsetX: labelModel.get('shadowOffsetX'),\n      shadowOffsetY: labelModel.get('shadowOffsetY')\n    },\n    // Lable should be over axisPointer.\n    z2: 10\n  };\n} // Do not overflow ec container\n\n\nfunction confineInContainer(position, width, height, api) {\n  var viewWidth = api.getWidth();\n  var viewHeight = api.getHeight();\n  position[0] = Math.min(position[0] + width, viewWidth) - width;\n  position[1] = Math.min(position[1] + height, viewHeight) - height;\n  position[0] = Math.max(position[0], 0);\n  position[1] = Math.max(position[1], 0);\n}\n/**\n * @param {number} value\n * @param {module:echarts/coord/Axis} axis\n * @param {module:echarts/model/Global} ecModel\n * @param {Object} opt\n * @param {Array.<Object>} seriesDataIndices\n * @param {number|string} opt.precision 'auto' or a number\n * @param {string|Function} opt.formatter label formatter\n */\n\n\nfunction getValueLabel(value, axis, ecModel, seriesDataIndices, opt) {\n  value = axis.scale.parse(value);\n  var text = axis.scale.getLabel( // If `precision` is set, width can be fixed (like '12.00500'), which\n  // helps to debounce when when moving label.\n  value, {\n    precision: opt.precision\n  });\n  var formatter = opt.formatter;\n\n  if (formatter) {\n    var params = {\n      value: axisHelper.getAxisRawValue(axis, value),\n      axisDimension: axis.dim,\n      axisIndex: axis.index,\n      seriesData: []\n    };\n    zrUtil.each(seriesDataIndices, function (idxItem) {\n      var series = ecModel.getSeriesByIndex(idxItem.seriesIndex);\n      var dataIndex = idxItem.dataIndexInside;\n      var dataParams = series && series.getDataParams(dataIndex);\n      dataParams && params.seriesData.push(dataParams);\n    });\n\n    if (zrUtil.isString(formatter)) {\n      text = formatter.replace('{value}', text);\n    } else if (zrUtil.isFunction(formatter)) {\n      text = formatter(params);\n    }\n  }\n\n  return text;\n}\n/**\n * @param {module:echarts/coord/Axis} axis\n * @param {number} value\n * @param {Object} layoutInfo {\n *  rotation, position, labelOffset, labelDirection, labelMargin\n * }\n */\n\n\nfunction getTransformedPosition(axis, value, layoutInfo) {\n  var transform = matrix.create();\n  matrix.rotate(transform, transform, layoutInfo.rotation);\n  matrix.translate(transform, transform, layoutInfo.position);\n  return graphic.applyTransform([axis.dataToCoord(value), (layoutInfo.labelOffset || 0) + (layoutInfo.labelDirection || 1) * (layoutInfo.labelMargin || 0)], transform);\n}\n\nfunction buildCartesianSingleLabelElOption(value, elOption, layoutInfo, axisModel, axisPointerModel, api) {\n  var textLayout = AxisBuilder.innerTextLayout(layoutInfo.rotation, 0, layoutInfo.labelDirection);\n  layoutInfo.labelMargin = axisPointerModel.get('label.margin');\n  buildLabelElOption(elOption, axisModel, axisPointerModel, api, {\n    position: getTransformedPosition(axisModel.axis, value, layoutInfo),\n    align: textLayout.textAlign,\n    verticalAlign: textLayout.textVerticalAlign\n  });\n}\n/**\n * @param {Array.<number>} p1\n * @param {Array.<number>} p2\n * @param {number} [xDimIndex=0] or 1\n */\n\n\nfunction makeLineShape(p1, p2, xDimIndex) {\n  xDimIndex = xDimIndex || 0;\n  return {\n    x1: p1[xDimIndex],\n    y1: p1[1 - xDimIndex],\n    x2: p2[xDimIndex],\n    y2: p2[1 - xDimIndex]\n  };\n}\n/**\n * @param {Array.<number>} xy\n * @param {Array.<number>} wh\n * @param {number} [xDimIndex=0] or 1\n */\n\n\nfunction makeRectShape(xy, wh, xDimIndex) {\n  xDimIndex = xDimIndex || 0;\n  return {\n    x: xy[xDimIndex],\n    y: xy[1 - xDimIndex],\n    width: wh[xDimIndex],\n    height: wh[1 - xDimIndex]\n  };\n}\n\nfunction makeSectorShape(cx, cy, r0, r, startAngle, endAngle) {\n  return {\n    cx: cx,\n    cy: cy,\n    r0: r0,\n    r: r,\n    startAngle: startAngle,\n    endAngle: endAngle,\n    clockwise: true\n  };\n}\n\nexports.buildElStyle = buildElStyle;\nexports.buildLabelElOption = buildLabelElOption;\nexports.getValueLabel = getValueLabel;\nexports.getTransformedPosition = getTransformedPosition;\nexports.buildCartesianSingleLabelElOption = buildCartesianSingleLabelElOption;\nexports.makeLineShape = makeLineShape;\nexports.makeRectShape = makeRectShape;\nexports.makeSectorShape = makeSectorShape;"],"sourceRoot":""}