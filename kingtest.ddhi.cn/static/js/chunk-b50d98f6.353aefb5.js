(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b50d98f6"],{1667:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=this,a=e.$createElement,i=e._self._c||a;return i("div",{staticClass:"advertisePlace"},[i("div",[i("p",{staticClass:"title"},[e._v(e._s(e.title))]),i("div",{staticClass:"searchBar"},[e.params.status?i("el-button",{staticClass:"dartBtn",attrs:{type:"danger"},on:{click:e.showDelBox}},[e._v("删除")]):e._e(),e.params.status?i("el-button",{staticClass:"dartBtn",attrs:{type:"primary"},on:{click:e.toAddAdvertise}},[e._v("新增")]):e._e(),e.params.status?i("el-button",{staticClass:"yellowBtn",staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:function(){t.params.status=0,t.title="回收站",t.adPlaceList()}}},[e._v("回收站")]):e._e(),e.params.status?e._e():i("el-button",{attrs:{type:"danger"},on:{click:e.showDelBox}},[e._v("还原")]),e.params.status?e._e():i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:function(){t.params.status=1,t.title="广告列表",t.adPlaceList()}}},[e._v("返回")]),i("el-button",{staticClass:"dartBtn",staticStyle:{float:"right"},attrs:{type:"danger"},on:{click:e.search}},[e._v("搜索")]),i("el-input",{staticStyle:{float:"right"},attrs:{value:e.params.keyword,width:"240",maxlength:40,placeholder:"搜索广告ID/名称"},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.params.keyword,callback:function(t){e.$set(e.params,"keyword",t)},expression:"params.keyword"}})],1),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.adList,stripe:""},on:{"selection-change":e.handleSelectionChange,"sort-change":e.sortFilterFun,"filter-change":e.filterTagTable}},[i("el-table-column",{attrs:{type:"selection",width:"55"}}),i("el-table-column",{attrs:{prop:"pos_id",label:"ID",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticClass:"oneline",staticStyle:{cursor:"pointer"}},[e._v(" "+e._s(t.row.pos_id)+" ")])]}}])}),i("el-table-column",{attrs:{prop:"name",label:"广告名称",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticClass:"oneline",staticStyle:{cursor:"pointer",color:"#409eff"},on:{click:function(a){return e.toWebpage(t.row,"manage")}}},[e._v(" "+e._s(t.row.name)+" ")])]}}])}),i("el-table-column",{attrs:{prop:"platform",label:"平台",width:"180","filter-multiple":!1,filters:e.platformList,"filter-placement":"bottom-end","column-key":"platform"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("p",[e._v(e._s(e._f("showPlatformText")(t.row.platform)))])]}}])}),i("el-table-column",{attrs:{prop:"alias",label:"广告别名",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("p",{staticClass:"oneline",attrs:{href:t.row.href}},[e._v(e._s(t.row.alias))])]}}])}),i("el-table-column",{attrs:{prop:"example_image",label:"示例图",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.row.example_image},on:{click:function(a){return e.showImglist(t.row.example_image)}}})]}}])}),i("el-table-column",{attrs:{prop:"description",label:"描述"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("p",{staticClass:"oneline",attrs:{title:t.row.description}},[e._v(" "+e._s(t.row.description)+" ")])]}}])}),i("el-table-column",{attrs:{label:"操作",width:"220",fixed:"right",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){return e.toWebpage(t.row,"manage")}}},[e._v("广告列表")]),e._v(" | "),i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){return e.toWebpage(t.row,"edit")}}},[e._v("编辑")]),e._v(" | "),e.params.status?i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){return e.delAdPlace(t.row)}}},[e._v("删除")]):e._e(),e.params.status?e._e():i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(){e.handleRestore({id:[t.row.pos_id]})}}},[e._v("还原")]),e.params.status?e._e():i("span",[e._v(" | ")]),e.params.status?e._e():i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(){e.handleDelete({id:[t.row.pos_id]})}}},[e._v("彻底删除")])]}}])})],1),i("div",{staticClass:"pagebox"},[i("el-pagination",{attrs:{background0:"",layout:"prev, pager, next","hide-on-single-page":!0,total:e.params.count,"current-page":e.params.page},on:{"current-change":e.pageChange}})],1)],1),i("el-dialog",{attrs:{visible:e.showEdit,width:"30%","close-on-click-modal":!1,"before-close":function(){e.handleCloseVisible(!1)}},on:{"update:visible":function(t){e.showEdit=t}}},[e.showEdit?[i("advertiseEdit",{attrs:{id:e.pos_id},on:{handleCloseVisible:e.handleCloseVisible}})]:e._e()],2),i("el-dialog",{attrs:{visible:e.showDetail,width:"30%","before-close":e.handleCloseDetailVisible},on:{"update:visible":function(t){e.showDetail=t}}},[e.showDetail?[i("advertisePlaceDetail",{attrs:{id:e.pos_id},on:{handleCloseDetailVisible:e.handleCloseDetailVisible}})]:e._e()],2),i("el-dialog",{attrs:{title:"删除",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("span",[e._v("确定要删除以下数据吗？")]),i("div",{staticStyle:{"margin-top":"30px"}},e._l(e.nameArr,(function(t,a){return i("span",{key:a},[e._v(e._s(t.name)+" "),a<e.nameArr.length-1?i("i",[e._v(" 、 ")]):e._e()])})),0),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.MultiSelect}},[e._v("确 定")])],1)]),i("el-dialog",{attrs:{title:"",visible:e.dialogVisibleImg,width:"50%"},on:{"update:visible":function(t){e.dialogVisibleImg=t}}},[e.dialogVisibleImg?[i("el-carousel",{attrs:{autoplay:!1,"indicator-position":"none",arrow:"never",height:"600px"}},e._l(e.picData,(function(t,e){return i("el-carousel-item",{key:e},[i("div",{staticClass:"imgbox"},[i("el-image",{staticStyle:{height:"600px",width:"auto"},attrs:{fit:"contain",src:t}})],1)])})),1)]:e._e()],2)],1)},s=[],l=(a("7db0"),a("d81d"),a("b0c0"),function(){var t=this,e=this,a=e.$createElement,i=e._self._c||a;return i("div",{staticClass:"advertiseEdit"},[i("div",{staticClass:"title"},[i("span",[e._v(e._s(e.title)+" ")])]),i("div",{staticClass:"formBox"},[i("div",{staticClass:"leftForm"},[i("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.formData,rules:e.rules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"广告名称",placeholder:"请输入内容",prop:"name"}},[i("el-input",{model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),i("el-form-item",{attrs:{label:"别名",placeholder:"请输入内容",prop:"alias"}},[i("el-input",{model:{value:e.formData.alias,callback:function(t){e.$set(e.formData,"alias",t)},expression:"formData.alias"}})],1),i("el-form-item",{attrs:{label:"上传示例图",prop:"platform"}},[e.imageUrl?i("img",{staticClass:"comimg",attrs:{src:e.imageUrl}}):e._e(),e.formData.example_image&&e.id&&""==e.imageUrl?i("img",{staticClass:"comimg",attrs:{src:e.formData.example_image}}):e._e(),i("Imgcutter",{on:{cutDown:e.cutDown}})],1),i("el-form-item",{attrs:{label:"描述"}},[i("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入内容"},model:{value:e.formData.description,callback:function(t){e.$set(e.formData,"description",t)},expression:"formData.description"}})],1),i("el-form-item",{attrs:{label:"是否启用",prop:"status"}},[i("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.formData.status,callback:function(t){e.$set(e.formData,"status",t)},expression:"formData.status"}})],1),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("保存")]),i("el-button",{on:{click:function(){t.$emit("handleCloseVisible",!1)}}},[e._v("取消")])],1)],1)],1)])])}),n=[],o=(a("a4d3"),a("e01a"),a("5f87")),r={data:function(){return{header:{headers:{"Content-Type":"multipart/form-data; boundary=--------------------------AAAAA",AccessToken:Object(o["a"])()}},imageUrl:"",title:"",formData:{name:"",alias:"",platform:"",status:1,description:"",example_image:"",width:100,height:100,is_pic:0,is_images:0,pos_id:null},platformList:[{label:"全平台",value:""},{label:"android",value:"ANDROID"},{label:"ios",value:"IOS"},{label:"小程序",value:"WEAPP"},{label:"H5",value:"H5"},{label:"WAP",value:"WAP"},{label:"PC",value:"PC"}],statusList:[{label:"启用",value:1},{label:"禁用",value:0}],rules:{name:{required:!0,message:"请输入广告名称",trigger:"blur"},alias:{required:!0,message:"请输入别名",trigger:"blur"},example_image:{required:!0,message:"请上传示例图",trigger:"change"},status:{required:!0,message:"请选择状态",trigger:"change"}},dialogVisible:!1,adTableData:[]}},props:{id:{default:null}},watch:{id:function(t,e){this.title=t?"编辑广告位":"新增广告位",this.id=t,this.resetParams(),this.id&&this.getAdPlaceDetail()}},created:function(){this.id?(this.title="编辑广告位",this.getAdPlaceDetail()):this.title="新增广告位"},methods:{cutDown:function(t){var e=this,a=new FormData;a.append("file[]",t.file),a.append("root","ads"),this.$ajax.post("/api/file/uploads",a,this.header).then((function(a){0==a.data.code?(e.imageUrl=t.dataURL,e.formData.example_image=a.data.data.url_path[0]):(e.imageUrl="",e.formData.example_image="",e.$message({message:a.data.msg,type:"warning"}))}))},handleRemove:function(t,e){},handlePictureCardPreview:function(t){this.formData.example_image=t.url,this.dialogVisible=!0},handleExceed:function(){this.$message.error("超出最大上传数量！")},submitForm:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return!1;e.id?e.editAdPlace():e.addAdPlace()}))},addAdPlace:function(){var t=this;this.api.advertisePlace.addAdPlace(this.formData).then((function(e){t.$message.success("新增成功！"),t.$emit("handleCloseVisible",!1,"success")}))},editAdPlace:function(){var t=this;this.api.advertisePlace.editAdPlace(this.formData).then((function(e){t.$message.success("编辑成功！"),t.$emit("handleCloseVisible",!1,"success")}))},getAdPlaceDetail:function(){var t=this;this.api.advertisePlace.adPlaceDetail({pos_id:this.id}).then((function(e){var a=e.data.data,i=a.pos_id,s=a.name,l=a.alias,n=a.platform,o=a.status,r=a.example_image,c=a.description,d={name:s,alias:l,platform:n,status:o,example_image:r,description:c,pos_id:i};t.formData=Object.assign({},t.formData,d),document.querySelector(".el-upload-list__item>img")&&document.querySelector(".el-upload-list__item>img").setAttribute("src",r)}))},resetParams:function(){this.formData={name:"",alias:"",platform:"",status:null,description:"",example_image:"",width:100,height:100,is_pic:0,is_images:0,pos_id:null}}}},c=r,d=(a("c6e3"),a("2877")),u=Object(d["a"])(c,l,n,!1,null,null,null),p=u.exports,m=function(){var t=this,e=this,a=e.$createElement,i=e._self._c||a;return i("div",{staticClass:"advertisePlaceDetail"},[i("p",{staticStyle:{padding:"20px"}},[i("span",{staticStyle:{"font-size":"24px"}},[e._v("详情")]),i("el-button",{staticStyle:{float:"right",width:"120px"},attrs:{type:"primary"},on:{click:function(){t.$emit("handleCloseDetailVisible")}}},[e._v("返回")])],1),i("ul",[i("li",[i("span",[e._v("广告名称")]),i("span",[e._v(e._s(e.adPlaceInfo.name))])]),i("li",[i("span",[e._v("别名")]),i("span",[e._v(e._s(e.adPlaceInfo.name))])]),i("li",{staticStyle:{overflow:"hidden",width:"248px"}},[i("span",[e._v("示例图")]),i("el-image",{staticStyle:{width:"148px",height:"148px",float:"right"},attrs:{src:e.adPlaceInfo.example_image}})],1),i("li",[i("span",[e._v("投放平台")]),i("span",[e._v(e._s(e._f("showPlatformText")(e.adPlaceInfo.platform)))])]),i("li",[i("span",[e._v("描述")]),i("span",[e._v(e._s(e.adPlaceInfo.description))])]),i("li",[i("span",[e._v("状态")]),i("span",[e._v(e._s(e._f("showstatusText")(e.adPlaceInfo.status)))])])])])},f=[],h={name:"advertisePlaceDetail",data:function(){return{adPlaceInfo:{}}},created:function(){this.getAdPlaceDetail()},props:{id:{required:!0}},filters:{showPlatformText:function(t){var e=[{label:"全平台",value:0},{label:"android",value:1},{label:"ios",value:2},{label:"小程序",value:3}];return e.find((function(e){return e.value==t}))?e.find((function(e){return e.value==t})).label:"无"},showstatusText:function(t){var e=[{label:"启用",value:1},{label:"禁用",value:0}];return e.find((function(e){return e.value==t}))?e.find((function(e){return e.value==t})).label:"无"}},methods:{getAdPlaceDetail:function(){var t=this;this.api.advertisePlace.adPlaceDetail({pos_id:this.id}).then((function(e){t.adPlaceInfo=e.data.data}))}}},v=h,g=(a("3a97"),Object(d["a"])(v,m,f,!1,null,null,null)),b=g.exports,_={name:"advertisePlace",data:function(){return{starttime:"",endtime:"",adList:[],title:"广告位",pos_id:"",params:{keyword:"",sort:"",page:1,page_size:10,count:0,status:1},statusArr:[{text:"禁用",value:"0"},{text:"启用",value:"1"}],dialogVisible:!1,dialogMore:!1,nameArr:[],showEdit:!1,showDetail:!1,platformList:[{text:"全平台",value:0},{text:"android",value:1},{text:"ios",value:2},{text:"小程序",value:3}],dialogVisibleImg:!1,picData:[]}},components:{advertiseEdit:p,advertisePlaceDetail:b},filters:{showText:function(t){return t?"详情":"编辑"},showPlatformText:function(t){var e=[{label:"全平台",value:0},{label:"android",value:1},{label:"ios",value:2},{label:"小程序",value:3}];return e.find((function(e){return e.value==t}))?e.find((function(e){return e.value==t})).label:"无"}},created:function(){this.adPlaceList()},methods:{search:function(){this.params.page=1,this.adPlaceList()},reset:function(){this.params={keyword:"",sort:"",page:1,page_size:10,count:0,status:1},this.adPlaceList()},adPlaceList:function(){var t=this;this.api.advertisePlace.adPlaceList(this.params).then((function(e){t.adList=e.data.data,t.params.count=e.data.count}))},delAdPlace:function(t){var e=this;this.$confirm("是否将此广告放入回收站?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a={id:[t.pos_id]};e.api.advertisePlace.delAdPlace(a).then((function(t){e.adPlaceList(),e.$message.success("删除成功！")}))}))},pageChange:function(t){this.params.page=t,this.adPlaceList()},toAddAdvertise:function(){this.showEdit=!0,this.pos_id=null},handleCloseVisible:function(t,e){this.showEdit=t,"success"&&this.adPlaceList()},handleCloseDetailVisible:function(){this.showDetail=!1},toWebpage:function(t,e){this.pos_id=t.pos_id,"detail"==e?this.showDetail=!0:"manage"==e?this.$router.push({path:"/advertiseList",query:{id:t.pos_id,name:t.name,from:"advertise"}}):this.showEdit=!0},filterTagTable:function(t){console.log(t),this.params.platform=t.platform[0],this.adPlaceList()},sortFilterFun:function(t){this.params.sort=t.prop,this.adPlaceList()},handleSelectionChange:function(t){this.nameArr=t},showDelBox:function(){if(!this.nameArr.length)return this.$message.info("请选择要操作的数据！");this.dialogVisible=!0},MultiSelect:function(){var t=this,e=this.nameArr.map((function(t,e){return t.pos_id}));this.params.status?this.api.advertisePlace.delAdPlace({id:e}).then((function(e){t.dialogVisible=!1,t.nameArr=[],t.adPlaceList(),t.$message.success("删除成功！")})):(this.handleRestore({id:e}),this.dialogVisible=!1)},handleRestore:function(t){var e=this;this.api.advertisePlace.handleRestore(t).then((function(t){e.$message.success("还原成功"),e.params.status=0,e.adPlaceList()}))},handleDelete:function(t){var e=this;this.api.advertisePlace.handleDelete(t).then((function(t){e.$message.success("删除成功"),e.params.status=0,e.adPlaceList()}))},showImglist:function(t){this.picData=[],this.dialogVisibleImg=!0,this.picData.push(t)}}},w=_,y=(a("a3c2"),Object(d["a"])(w,i,s,!1,null,null,null));e["default"]=y.exports},"3a97":function(t,e,a){"use strict";var i=a("a7d8"),s=a.n(i);s.a},"7db0":function(t,e,a){"use strict";var i=a("23e7"),s=a("b727").find,l=a("44d2"),n=a("ae40"),o="find",r=!0,c=n(o);o in[]&&Array(1)[o]((function(){r=!1})),i({target:"Array",proto:!0,forced:r||!c},{find:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}}),l(o)},a3c2:function(t,e,a){"use strict";var i=a("aa00"),s=a.n(i);s.a},a7d8:function(t,e,a){},aa00:function(t,e,a){},afbc:function(t,e,a){},c6e3:function(t,e,a){"use strict";var i=a("afbc"),s=a.n(i);s.a}}]);
//# sourceMappingURL=chunk-b50d98f6.353aefb5.js.map