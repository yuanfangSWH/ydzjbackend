(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5cdedd9a"],{"53c8":function(t,e,a){},9157:function(t,e,a){"use strict";var i=a("9f04"),s=a.n(i);s.a},"926a":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"shopSet"},[a("div",{staticClass:"pageTitle"},[t._v(t._s(this._getVuex("pageTitle")))]),a("div",{staticClass:"add-box"},[a("el-button",{attrs:{type:"danger"},on:{click:t.batchDelete}},[t._v("批量删除")]),a("el-button",{attrs:{type:"success"},on:{click:t.insertItemtk}},[t._v("新增")]),a("el-input",{staticClass:"searchInput",attrs:{placeholder:"请输入要搜索的内容","prefix-icon":"el-icon-search"},on:{change:t.searchDatas},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}})],1),a("el-table",{ref:"multipNum",staticStyle:{width:"100%"},attrs:{stripe:"",data:t.tableListData,"tooltip-effect":"dark"},on:{"selection-change":t.selectItem}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{label:"全选/ID",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.album_id))])]}}])}),a("el-table-column",{attrs:{prop:"album_id",label:"图片ID",width:"200"}}),a("el-table-column",{attrs:{prop:"album_path",label:"图片",width:"200"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("el-image",{attrs:{src:t.row.album_path}})]}}])}),a("el-table-column",{attrs:{prop:"album_path",label:"图片地址",width:"800"}}),a("el-table-column",{attrs:{prop:"album_sort",label:"排序值",width:"200"}}),a("el-table-column",{attrs:{fixed:"right",align:"center",label:"操作",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.openUpdateDialog(JSON.parse(JSON.stringify(e.row)))}}},[t._v("修改")]),a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.openDelDialog(e.row)}}},[t._v("删除")])]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":t.curPage,"hide-on-single-page":!0,background:"",layout:"prev, pager, next",total:t.total},on:{"current-change":t.pageChange}})],1),a("el-dialog",{attrs:{title:"新增",visible:t.insertDialog},on:{"update:visible":function(e){t.insertDialog=e}}},[a("el-form",{staticClass:"updateArea",attrs:{"label-width":"90px"}},[a("el-form-item",{attrs:{label:"图片"}},[a("uploadFilesEX",{ref:"uploadImgEX",on:{theIMGEX:t.theIMGEX}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.insertDialog=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.insertItem()}}},[t._v("确定")])],1)],1),a("el-dialog",{attrs:{title:"修改",visible:t.updateDialog},on:{"update:visible":function(e){t.updateDialog=e}}},[a("el-form",{staticClass:"updateArea",attrs:{"label-width":"90px"}},[a("el-form-item",{attrs:{label:"排序值"}},[a("el-input",{attrs:{type:"Number"},model:{value:t.currenItem.album_sort,callback:function(e){t.$set(t.currenItem,"album_sort",e)},expression:"currenItem.album_sort"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.updateDialog=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.multiUpdate()}}},[t._v("确定")])],1)],1),a("el-dialog",{attrs:{title:"删除",visible:t.deleteDialog,width:"30%"},on:{"update:visible":function(e){t.deleteDialog=e}}},[a("span",[t._v("确定要删除此项吗")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.deleteDialog=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.deleteItem("one")}}},[t._v("确定")])],1)]),a("el-dialog",{attrs:{title:"删除",visible:t.mutilDeleteDialog,width:"50%"},on:{"update:visible":function(e){t.mutilDeleteDialog=e}}},[a("span",{staticClass:"s-title"},[t._v("确定要删除以下内容吗?")]),t._l(t.nameArr,(function(e,i){return a("div",{key:i,staticClass:"gz-name"},[t._v(" "+t._s(e)+" ")])})),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.mutilDeleteDialog=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.deleteItem("mutil")}}},[t._v("确定")])],1)],2)],1)},s=[],l=(a("4160"),a("a9e3"),a("159b"),a("9e26")),n={components:{uploadFilesEX:l["a"]},name:"groupEetail",data:function(){return{merchants:{shop_id:0,merchant_id:0},updateDialog:!1,insertDialog:!1,mutilDeleteDialog:!1,deleteDialog:!1,curPage:1,total:1,tableListData:[],addItem:{shop_id:"",merchant_id:"",data:[]},currenItem:{},currenDeleteRow:"",multipleSelection:[],nameArr:[],searchValue:"",ImgData:[]}},created:function(){if(this.$route.query.shop_id&&this.$route.query.merchant_id)this.merchants.shop_id=Number(this.$route.query.shop_id),this.merchants.merchant_id=Number(this.$route.query.merchant_id),this.$store.dispatch("updateVuex",{key:"merchantsData",value:this.merchants});else{var t=this.$store.state.merchantsData;this.merchants.shop_id=Number(t.shop_id),this.merchants.merchant_id=Number(t.merchant_id)}this.getTableList()},methods:{getTableList:function(){var t=this,e={merchant_id:this.merchants.merchant_id,shop_id:this.merchants.shop_id,name:this.searchValue,page:this.curPage,page_size:10};this.api.shop.shopalbumList(e).then((function(e){t.tableListData=e.data.data,t.total=e.data.count}))},searchDatas:function(){this.curPage=1,this.getTableList()},theIMGEX:function(t){this.ImgData=[],this.ImgData=t},insertItemtk:function(){this.insertDialog=!0},insertItem:function(){var t=this;if(""!=this.ImgData){this.addItem.merchant_id=this.merchants.merchant_id,this.addItem.shop_id=this.merchants.shop_id,this.addItem.data=[];for(var e=0;e<this.ImgData.length;e++)this.addItem.data.push({album_sort:0,album_path:this.ImgData[e].url});var a=this.addItem;this.api.shop.PhotoInsert(a).then((function(e){t.$message({message:"添加成功",type:"success"}),t.getTableList(),t.ImgData=[],t.addItem.data=[],setTimeout((function(){t.$refs.uploadImgEX.concert()}),0),t.insertDialog=!1}))}else this.$message({message:"请选择上传的图片",type:"warning"})},openUpdateDialog:function(t){this.currenItem=t,this.updateDialog=!0},multiUpdate:function(){var t=this,e={merchant_id:this.merchants.merchant_id,shop_id:this.merchants.shop_id,data:[{album_id:this.currenItem.album_id,album_sort:Number(this.currenItem.album_sort),album_path:""}]};this.api.shop.PhotoUpdate(e).then((function(e){t.$message({message:"修改成功",type:"success"}),t.getTableList(),t.updateDialog=!1}))},batchDelete:function(){""!=this.multipleSelection?this.mutilDeleteDialog=!0:this.$message({message:"请先勾选要删除的数据",type:"warning"})},openDelDialog:function(t){this.currenDeleteRow=t,this.deleteDialog=!0},selectItem:function(t){var e=this;this.multipleSelection=[],this.nameArr=[],t.forEach((function(t,a){e.multipleSelection.push(t.album_id),e.nameArr.push(t.album_id)}))},deleteItem:function(t){var e=this,a=new Array;a.push(this.currenDeleteRow.album_id);var i="one"===t?a:this.multipleSelection,s={id:i,merchant_id:this.merchants.merchant_id,shop_id:this.merchants.shop_id};this.api.shop.PhotoDelete(s).then((function(t){e.$message({message:"删除成功",type:"success"}),e.getTableList(),e.mutilDeleteDialog=!1,e.deleteDialog=!1}))},pageChange:function(t){this.curPage=t,this.getTableList()}}},o=n,r=(a("ba30"),a("2877")),u=Object(r["a"])(o,i,s,!1,null,"357c8857",null);e["default"]=u.exports},"9e26":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"uploadFiles"},[a("el-upload",{directives:[{name:"show",rawName:"v-show",value:""!=this.root,expression:"this.root != ''"}],staticClass:"upload-demo",attrs:{action:"/api/file/uploads","file-list":t.fileList,"on-remove":t.handleRemove,"on-change":t.handleChange,"on-error":t.failureMethods,"before-upload":t.beforeAvatarUpload,"http-request":t.uploadImg,"list-type":"picture"}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选择图片")])],1),a("h4",{directives:[{name:"show",rawName:"v-show",value:""==this.root,expression:"this.root == ''"}]},[t._v("没有设置路径“root”...")])],1)},s=[],l=(a("a434"),a("5f87")),n={name:"uploadImgEX",props:{root:{type:String,default:""}},data:function(){return{header:{headers:{"Content-Type":"multipart/form-data; boundary=--------------------------AAAAA",AccessToken:Object(l["a"])()}},fileList:[],DataImg:{url:"",uid:0},IMGdata:[]}},methods:{concert:function(){this.fileList=[]},handleRemove:function(t,e){for(var a=0;a<this.IMGdata.length;a++)if(this.IMGdata[a].uid==t.uid){this.IMGdata.splice(a,1),this.$emit("theIMGEX",this.IMGdata);break}},beforeAvatarUpload:function(t){var e=t.size/1024/1024<2;return e||this.$message.error("上传图片大小不能超过 2MB!"),e},handleChange:function(t,e){this.DataImg.url=t.raw,this.DataImg.uid=t.uid},uploadImg:function(t){var e=this,a=new FormData;a.append("file[]",this.DataImg.url),this.$ajax.post("/api/file/uploads",a,this.header).then((function(t){0==t.data.code&&(e.IMGdata.push({url:t.data.data.url_path[0],uid:e.DataImg.uid}),e.$emit("theIMGEX",e.IMGdata))}))},failureMethods:function(){this.$message({message:"上传图片失败，网络质量不佳或未知错误，请重试",type:"warning"})}}},o=n,r=(a("9157"),a("2877")),u=Object(r["a"])(o,i,s,!1,null,null,null);e["a"]=u.exports},"9f04":function(t,e,a){},a434:function(t,e,a){"use strict";var i=a("23e7"),s=a("23cb"),l=a("a691"),n=a("50c4"),o=a("7b0b"),r=a("65f0"),u=a("8418"),c=a("1dde"),h=a("ae40"),d=c("splice"),m=h("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,f=Math.min,g=9007199254740991,b="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!d||!m},{splice:function(t,e){var a,i,c,h,d,m,_=o(this),v=n(_.length),D=s(t,v),I=arguments.length;if(0===I?a=i=0:1===I?(a=0,i=v-D):(a=I-2,i=f(p(l(e),0),v-D)),v+a-i>g)throw TypeError(b);for(c=r(_,i),h=0;h<i;h++)d=D+h,d in _&&u(c,h,_[d]);if(c.length=i,a<i){for(h=D;h<v-i;h++)d=h+i,m=h+a,d in _?_[m]=_[d]:delete _[m];for(h=v;h>v-i+a;h--)delete _[h-1]}else if(a>i)for(h=v-i;h>D;h--)d=h+i-1,m=h+a-1,d in _?_[m]=_[d]:delete _[m];for(h=0;h<a;h++)_[h+D]=arguments[h+2];return _.length=v-i+a,c}})},ba30:function(t,e,a){"use strict";var i=a("53c8"),s=a.n(i);s.a}}]);
//# sourceMappingURL=chunk-5cdedd9a.22295451.js.map