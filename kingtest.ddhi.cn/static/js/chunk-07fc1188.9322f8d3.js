(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-07fc1188"],{"14d3":function(t,e,a){"use strict";var s=a("97cb"),i=a.n(s);i.a},8090:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"shopSet"},[a("div",{staticClass:"pageTitle"},[t._v("礼物列表")]),a("div",{staticClass:"add-box",staticStyle:{display:"flex"}},[a("div",{staticStyle:{flex:"1"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:1==t.status,expression:"status == 1"}],attrs:{type:"danger"},on:{click:t.batchDelete}},[t._v("下架")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:1==t.status,expression:"status == 1"}],attrs:{type:"danger"},on:{click:t.insertItemtk}},[t._v("新增")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:1==t.status,expression:"status == 1"}],attrs:{type:"primary"},on:{click:t.Therecyclebin}},[t._v("回收站")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0==t.status,expression:"status == 0"}],attrs:{type:"danger"},on:{click:t.batchDelete}},[t._v("上架")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0==t.status,expression:"status == 0"}],attrs:{type:"primary"},on:{click:t.Therecyclebin}},[t._v("返回")])],1),a("div",[a("el-input",{staticClass:"searchInput",attrs:{placeholder:"请输入要搜索的内容","prefix-icon":"el-icon-search"},on:{change:t.searchDatas},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}}),a("el-button",{staticClass:"sosuo",attrs:{type:"danger"},on:{click:t.searchDatas}},[t._v("搜索")])],1)]),a("el-table",{ref:"multipNum",staticStyle:{width:"100%"},attrs:{stripe:"",data:t.tableListData,"tooltip-effect":"dark"},on:{"selection-change":t.selectItem,"sort-change":t.screeningData}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{sortable:"custom",prop:"gift_id",label:"全选/ID",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.gift_id))])]}}])}),a("el-table-column",{attrs:{prop:"image",label:"礼物图片",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-image",{attrs:{src:e.row.image},on:{click:function(a){return t.showImglist(e.row.image,e.row.name)}}})]}}])}),a("el-table-column",{attrs:{prop:"name",label:"礼物名称",width:"180"}}),a("el-table-column",{attrs:{prop:"price",label:"价值(Y币)",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticStyle:{color:"#eab43f"}},[t._v(t._s(e.row.price))])]}}])}),a("el-table-column",{attrs:{sortable:"custom",prop:"point",label:"可得积分",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticStyle:{color:"#559a4a"}},[t._v(t._s(e.row.point))])]}}])}),a("el-table-column",{attrs:{prop:"sales",label:"销量",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"muzhicss",staticStyle:{color:"#52a8f8"},on:{click:function(a){return t.DetailedDialog(e.row)}}},[t._v(" "+t._s(e.row.sales)+" ")])]}}])}),a("el-table-column",{attrs:{sortable:"custom",prop:"create_time",label:"上架时间",width:"200"}}),a("el-table-column",{attrs:{prop:"delete_time",label:"下架时间",width:"300"}}),a("el-table-column",{attrs:{sortable:"custom",prop:"sort",label:"排序",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.$index===t.sortingid?a("el-input",{ref:"saveTagInput",staticClass:"input_pxcss",on:{blur:function(a){t.percentF(JSON.parse(JSON.stringify(e.row)),e.$index)}},model:{value:e.row.sort,callback:function(a){t.$set(e.row,"sort",a)},expression:"scope.row.sort"}}):a("div",{staticClass:"muzhicss",on:{click:function(a){t.khaki(e.$index,JSON.parse(JSON.stringify(e.row)))}}},[a("span",[t._v(t._s(e.row.sort))])])]}}])}),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){t.openUpdateDialog(JSON.parse(JSON.stringify(e.row)))}}},[t._v("修改")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:1==t.status,expression:"status == 1"}],attrs:{size:"mini",type:"text"},on:{click:function(a){return t.openDelDialog(e.row)}}},[t._v("下架")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0==t.status,expression:"status == 0"}],attrs:{size:"mini",type:"text"},on:{click:function(a){return t.openDelDialog(e.row)}}},[t._v("上架")])],1)]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":t.curPage,"hide-on-single-page":!0,background:"",layout:"prev, pager, next",total:t.total},on:{"current-change":t.pageChange}})],1),a("el-dialog",{attrs:{title:"新增礼物",visible:t.insertDialog},on:{"update:visible":function(e){t.insertDialog=e}}},[a("el-form",{ref:"formName1",staticClass:"updateArea",attrs:{model:t.addItem,rules:t.rules,"label-width":"180px"}},[a("el-form-item",{attrs:{label:"礼物名称",prop:"name"}},[a("el-input",{attrs:{clearable:""},model:{value:t.addItem.name,callback:function(e){t.$set(t.addItem,"name",e)},expression:"addItem.name"}})],1),a("el-form-item",{attrs:{label:"价值",prop:"price"}},[a("div",{staticStyle:{display:"flex"}},[a("el-input",{staticStyle:{flex:"1",width:"300px !important","min-width":"200px !important"},attrs:{type:"Number",clearable:""},model:{value:t.addItem.price,callback:function(e){t.$set(t.addItem,"price",e)},expression:"addItem.price"}}),a("span",{staticStyle:{"margin-left":"10px"}},[t._v("Y币")])],1)]),a("el-form-item",{attrs:{label:"礼物图片",prop:"image"}},[a("uploadFiles",{ref:"uploadImg",attrs:{root:"gift"},on:{theIMG:t.theIMG}})],1),a("el-form-item",{attrs:{label:"可得积分",prop:"point"}},[a("el-input",{attrs:{type:"Number",clearable:""},model:{value:t.addItem.point,callback:function(e){t.$set(t.addItem,"point",e)},expression:"addItem.point"}})],1),a("el-form-item",{attrs:{label:"排序",prop:"sort"}},[a("el-input",{attrs:{type:"Number",clearable:""},model:{value:t.addItem.sort,callback:function(e){t.$set(t.addItem,"sort",e)},expression:"addItem.sort"}})],1),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.addItem.status,callback:function(e){t.$set(t.addItem,"status",e)},expression:"addItem.status"}},[a("el-option",{key:0,attrs:{label:"下架",value:0}}),a("el-option",{key:1,attrs:{label:"正常",value:1}})],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.insertDialog=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.validation("formName1")}}},[t._v("确定")])],1)],1),a("el-dialog",{attrs:{title:"修改-"+t.updateDialogTitle,visible:t.updateDialog},on:{"update:visible":function(e){t.updateDialog=e}}},[a("el-form",{ref:"formName2",staticClass:"updateArea",attrs:{model:t.currenItem,rules:t.rules,"label-width":"180px"}},[a("el-form-item",{attrs:{label:"礼物名称",prop:"name"}},[a("el-input",{attrs:{clearable:""},model:{value:t.currenItem.name,callback:function(e){t.$set(t.currenItem,"name",e)},expression:"currenItem.name"}})],1),a("el-form-item",{attrs:{label:"价值",prop:"price"}},[a("div",{staticStyle:{display:"flex"}},[a("el-input",{staticStyle:{flex:"1",width:"300px !important","min-width":"200px !important"},attrs:{type:"Number",clearable:""},model:{value:t.currenItem.price,callback:function(e){t.$set(t.currenItem,"price",e)},expression:"currenItem.price"}}),a("span",{staticStyle:{"margin-left":"10px"}},[t._v("Y币")])],1)]),a("el-form-item",{attrs:{label:"礼物图片",prop:"image"}},[a("uploadFiles",{ref:"uploadImg",attrs:{root:"gift"},on:{theIMG:t.theIMG}})],1),a("el-form-item",{attrs:{label:"可得积分",prop:"point"}},[a("el-input",{attrs:{type:"Number",clearable:""},model:{value:t.currenItem.point,callback:function(e){t.$set(t.currenItem,"point",e)},expression:"currenItem.point"}})],1),a("el-form-item",{attrs:{label:"排序",prop:"sort"}},[a("el-input",{attrs:{type:"Number",clearable:""},model:{value:t.currenItem.sort,callback:function(e){t.$set(t.currenItem,"sort",e)},expression:"currenItem.sort"}})],1),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.currenItem.status,callback:function(e){t.$set(t.currenItem,"status",e)},expression:"currenItem.status"}},[a("el-option",{key:0,attrs:{label:"下架",value:0}}),a("el-option",{key:1,attrs:{label:"正常",value:1}})],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.updateDialog=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.validation("formName2")}}},[t._v("确定")])],1)],1),a("el-dialog",{attrs:{title:(0==this.status?"上架":"下架")+"-"+t.deltitle,visible:t.deleteDialog,width:"30%"},on:{"update:visible":function(e){t.deleteDialog=e}}},[a("span",[t._v("确定要"+t._s(0==this.status?"上架":"下架")+"此项吗")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.deleteDialog=!1}}},[t._v("取 消")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:1==t.status,expression:"status == 1"}],attrs:{type:"primary"},on:{click:function(e){return t.deleteItem("one")}}},[t._v("确定")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0==t.status,expression:"status == 0"}],attrs:{type:"primary"},on:{click:function(e){return t.recoveryItem("one")}}},[t._v("确定")])],1)]),a("el-dialog",{attrs:{title:0==this.status?"上架":"下架",visible:t.mutilDeleteDialog,width:"50%"},on:{"update:visible":function(e){t.mutilDeleteDialog=e}}},[a("span",{staticClass:"s-title"},[t._v("确定要"+t._s(0==this.status?"上架":"下架")+"以下内容吗?")]),t._l(t.nameArr,(function(e,s){return a("div",{key:s,staticClass:"gz-name"},[t._v(" "+t._s(e)+" ")])})),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.mutilDeleteDialog=!1}}},[t._v("取 消")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:1==t.status,expression:"status == 1"}],attrs:{type:"primary"},on:{click:function(e){return t.deleteItem("mutil")}}},[t._v("确定")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0==t.status,expression:"status == 0"}],attrs:{type:"primary"},on:{click:function(e){return t.recoveryItem("mutil")}}},[t._v("确定")])],1)],2),a("el-dialog",{attrs:{title:t.giftName,visible:t.dialogVisible,width:"50%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[t.dialogVisible?[a("el-carousel",{attrs:{autoplay:!1,"indicator-position":"none",arrow:"never",height:"600px"}},t._l(t.picData,(function(t,e){return a("el-carousel-item",{key:e},[a("div",{staticClass:"imgbox"},[a("el-image",{staticStyle:{height:"600px",width:"auto"},attrs:{fit:"contain",src:t}})],1)])})),1)]:t._e()],2)],1)},i=[],r=(a("4160"),a("b0c0"),a("a9e3"),a("159b"),a("9cca")),l={components:{uploadFiles:r["a"]},name:"GiftList",data:function(){return{sortData:"",sortingid:"",rules:{name:[{required:!0,message:"请填写礼物名称",trigger:"blur"}],image:[{required:!0,message:"请上传礼物图片",trigger:"blur"}],price:[{required:!0,message:"请填写价值",trigger:"blur"}],point:[{required:!0,message:"请填写可得积分",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"blur"}]},status:1,updateDialog:!1,insertDialog:!1,mutilDeleteDialog:!1,deleteDialog:!1,curPage:1,total:1,tableListData:[],addItem:{status:1},currenItem:{status:1},currenDeleteRow:"",multipleSelection:[],nameArr:[],updateDialogTitle:"",deltitle:"",searchValue:"",sort:"",order:"",dialogVisible:!1,picData:[],imgIndex:0,giftName:""}},created:function(){this.getTableList()},methods:{khaki:function(t,e){var a=this;this.sortingid=t,this.sortData=e.sort,this.$nextTick((function(){a.$refs.saveTagInput.focus()}))},percentF:function(t,e){var a=this;if(this.sortData!=t.sort){var s={id:t.gift_id,sort:Number(t.sort)};this.api.gift.GiftsetSort(s).then((function(t){0==t.data.code?(a.sortingid="",a.$message({message:"修改排序成功",type:"success"})):(a.tableListData[e].sort=a.sortData,a.$message({message:"修改排序失败",type:"warning"}))}))}else this.sortingid=""},screeningData:function(t){t.order?(this.sort=t.prop,this.order="ascending"==t.order?"ASC":"DESC"):(this.sort="",this.order=""),this.getTableList()},Therecyclebin:function(){0==this.status?this.status=1:this.status=0,this.getTableList()},DetailedDialog:function(t){this.$router.push({path:"/GiftDetailed",query:{gift_id:t.gift_id}})},theIMG:function(t){this.addItem.image=t,this.currenItem.image=t},getTableList:function(){var t=this,e={sort:this.sort,order:this.order,status:this.status,name:this.searchValue,page:this.curPage};this.api.gift.ListData(e).then((function(e){t.tableListData=e.data.data,t.total=e.data.count}))},searchDatas:function(){this.curPage=1,this.getTableList()},validation:function(t){var e=this;this.$refs[t].validate((function(a){if(!a)return!1;"formName1"==t?e.insertItem():e.multiUpdate()}))},insertItemtk:function(){var t=this;this.insertDialog=!0,setTimeout((function(){t.$refs.uploadImg.concert("")}),0)},insertItem:function(){var t=this;this.addItem.price=Number(this.addItem.price),this.addItem.point=Number(this.addItem.point),this.addItem.stock=Number(this.addItem.stock),this.addItem.stock_all=Number(this.addItem.stock_all),this.addItem.sales=Number(this.addItem.sales),this.addItem.sort=Number(this.addItem.sort),this.addItem.status=Number(this.addItem.status);var e=this.addItem;this.api.gift.GiftInsert(e).then((function(e){t.$refs["formName1"].resetFields(),t.$message({message:"添加成功",type:"success"}),t.getTableList(),t.insertDialog=!1}))},openUpdateDialog:function(t){var e=this;setTimeout((function(){e.$refs.uploadImg.concert(t.image)}),0),this.updateDialog=!0,this.updateDialogTitle=t.name,this.currenItem=t},multiUpdate:function(){var t=this;this.currenItem.price=Number(this.currenItem.price),this.currenItem.point=Number(this.currenItem.point),this.currenItem.stock=Number(this.currenItem.stock),this.currenItem.stock_all=Number(this.currenItem.stock_all),this.currenItem.sales=Number(this.currenItem.sales),this.currenItem.sort=Number(this.currenItem.sort),this.currenItem.status=Number(this.currenItem.status);var e=this.currenItem;this.api.gift.GiftUpdate(e).then((function(e){t.$message({message:"修改成功",type:"success"}),t.getTableList(),t.updateDialog=!1}))},batchDelete:function(){""!=this.multipleSelection?this.mutilDeleteDialog=!0:this.$message({message:"请先勾选要"+(0==this.status?"上架":"下架")+"的数据",type:"warning"})},openDelDialog:function(t){this.deltitle=t.name,this.currenDeleteRow=t,this.deleteDialog=!0},selectItem:function(t){var e=this;this.multipleSelection=[],this.nameArr=[],t.forEach((function(t,a){e.multipleSelection.push(t.gift_id),e.nameArr.push(t.name)}))},deleteItem:function(t){var e=this,a=new Array;a.push(this.currenDeleteRow.gift_id);var s="one"===t?a:this.multipleSelection,i={id:s};this.api.gift.GiftDelete(i).then((function(t){e.$message({message:"下架成功",type:"success"}),e.getTableList(),e.mutilDeleteDialog=!1,e.deleteDialog=!1}))},recoveryItem:function(t){var e=this,a=new Array;a.push(this.currenDeleteRow.gift_id);var s="one"===t?a:this.multipleSelection,i={id:s};this.api.gift.GiftRecovery(i).then((function(t){e.$message({message:"上架成功",type:"success"}),e.getTableList(),e.mutilDeleteDialog=!1,e.deleteDialog=!1}))},pageChange:function(t){this.curPage=t,this.getTableList()},showImglist:function(t,e){this.picData=[],this.dialogVisible=!0,this.picData.push(t),this.giftName=e}}},o=l,n=(a("8e94"),a("2877")),u=Object(n["a"])(o,s,i,!1,null,"e19692ee",null);e["default"]=u.exports},"8e94":function(t,e,a){"use strict";var s=a("fe11"),i=a.n(s);i.a},"97cb":function(t,e,a){},"9cca":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"uploadFiles"},[a("el-upload",{directives:[{name:"show",rawName:"v-show",value:""!=this.root,expression:"this.root != ''"}],staticClass:"avatar-uploader",attrs:{action:"/api/file/uploads","show-file-list":!1,"file-list":t.fileList,limit:1,"http-request":t.uploadImg,"on-change":t.handleChange,"before-upload":t.beforeAvatarUpload}},[t.imageUrl?a("img",{staticClass:"avatar",attrs:{src:t.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),a("h4",{directives:[{name:"show",rawName:"v-show",value:""==this.root,expression:"this.root == ''"}]},[t._v("没有设置路径“root”...")])],1)},i=[],r=(a("a9e3"),a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("5f87")),l={name:"uploadImg",props:{defaltIcon:Number,root:{type:String,default:""}},data:function(){return{header:{headers:{"Content-Type":"multipart/form-data; boundary=--------------------------AAAAA",AccessToken:Object(r["a"])()}},fileList:[],DataImg:[],imageUrl:""}},methods:{concert:function(t){this.imageUrl=t},beforeAvatarUpload:function(t){var e=t.size/1024/1024<2;return e||this.$message.error("上传图片大小不能超过 2MB!"),e},handleChange:function(t,e){console.log(t.size);var a=t.size/1024/1024<2;console.log(t.size/1024/1024),console.log(t.size/1024/1024<2),a?(this.DataImg=t.raw,this.imageUrl=URL.createObjectURL(t.raw)):(this.fileList=[],this.DataImg=[])},uploadImg:function(t){var e=this,a=new FormData;a.append("file[]",this.DataImg),a.append("root",this.root),this.$ajax.post("/api/file/uploads",a,this.header).then((function(t){0==t.data.code?(e.fileList=[],e.DataImg=[],e.$emit("theIMG",t.data.data.url_path[0],e.defaltIcon)):(e.fileList=[],e.DataImg=[],e.imageUrl="",e.$message({message:t.data.msg,type:"warning"}))}))}}},o=l,n=(a("14d3"),a("2877")),u=Object(n["a"])(o,s,i,!1,null,null,null);e["a"]=u.exports},fe11:function(t,e,a){}}]);
//# sourceMappingURL=chunk-07fc1188.9322f8d3.js.map