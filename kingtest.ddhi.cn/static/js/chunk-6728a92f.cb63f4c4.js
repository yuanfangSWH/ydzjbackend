(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6728a92f"],{3224:function(s,t,a){"use strict";var e=a("f955"),i=a.n(e);i.a},"83d4":function(s,t,a){"use strict";var e=function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:s.dataList,stripe:""},on:{"selection-change":s.handleSelectionChange,"filter-change":s.filterTagTable,"sort-change":s.sortFilterFun}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{prop:"goods_id",label:"全选/ID",width:"150"}}),a("el-table-column",{attrs:{prop:"name",label:"商品名称",width:"280"}}),a("el-table-column",{attrs:{prop:"goods_class.class_name",label:"分类",width:"200"}}),a("el-table-column",{attrs:{prop:"market_price",sortable:"custom",label:"原价"},scopedSlots:s._u([{key:"default",fn:function(t){return[s._v(" "+s._s(t.row.market_price/100)+" ")]}}])}),a("el-table-column",{attrs:{prop:"discount",sortable:"custom",label:"折扣"},scopedSlots:s._u([{key:"default",fn:function(t){return[s._v(" "+s._s(t.row.discount)+" % ")]}}])}),a("el-table-column",{attrs:{prop:"price",sortable:"custom",label:"现价"},scopedSlots:s._u([{key:"default",fn:function(t){return[s._v(" "+s._s(t.row.price/100)+" ")]}}])}),a("el-table-column",{attrs:{sortable:"custom",label:"排序"},scopedSlots:s._u([{key:"default",fn:function(t){return[t.$index===s.sortingid?a("el-input",{ref:"saveTagInput_"+t.$index,staticClass:"input_pxcss",on:{blur:function(a){return s.percentF(t.row,t.$index)}},model:{value:t.row.sort,callback:function(a){s.$set(t.row,"sort",a)},expression:"scope.row.sort"}}):a("div",{staticClass:"muzhicss",on:{click:function(a){return s.khaki(t.$index,t.row)}}},[a("span",[s._v(s._s(t.row.sort))])])]}}])}),a("el-table-column",{attrs:{prop:"status",label:"状态","filter-multiple":!1,filters:s.statusArr,"filter-placement":"bottom-end","column-key":"status"},scopedSlots:s._u([{key:"default",fn:function(t){return[0==t.row.status?a("span",[s._v("删除")]):1==t.row.status?a("span",[s._v("正常")]):2==t.row.status?a("span",[s._v("下架")]):3==t.row.status?a("span",[s._v("售完")]):s._e()]}}])}),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:s._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return s.handleClick(t.row)}}},[s._v("查看/编辑")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return s.delClick(t.row)}}},[s._v("删除")])]}}])})],1)],1)},i=[],o=(a("a630"),a("a15b"),a("b0c0"),a("a9e3"),a("d3b7"),a("6062"),a("3ca3"),a("ddb0"),a("2ef0")),l=a.n(o),n={name:"goodsItem",props:{options:Array,merchants:Object},data:function(){return{dataList:[],sortingid:"",sortVal:"",sortStatus:!1,order:"asc",statusArr:[{text:"下架",value:"0"},{text:"售完",value:"1"},{text:"正常",value:"2"},{text:"删除",value:"3"}],multipleSelection:"",nameArr:[]}},watch:{options:{immediate:!0,handler:function(s){this.dataList=l.a.cloneDeep(this.options)}}},mounted:function(){},methods:{khaki:function(s,t){var a=this;this.sortingid=s,this.sortData=Number(t.sort),this.$nextTick((function(){a.$refs["saveTagInput_"+s].focus()}))},percentF:function(s,t){var a=this;if(this.sortData!=s.sort){var e={id:s.goods_id,sort:Number(s.sort),merchant_id:this.merchants.merchant_id,shop_id:this.merchants.shop_id};console.info(e),this.api.goods.goodsSetSort(e).then((function(s){0==s.data.code?(a.sortingid="",a.$message({message:"修改排序成功",type:"success"})):(a.tableListData[t].sort=a.sortData,a.$message({message:"修改排序失败",type:"warning"}))}))}else this.sortingid=""},filterTagTable:function(s){console.info(s),this.filterMethod(s)},filterMethod:function(s){var t=[],a=[];for(var e in s)t.push(e),a.push(s[e]);t=t.join(","),a=a.join(","),this.f_status=a,this.$emit("childFun",this.f_status,"",t,2)},sortMethod:function(s){this.sortVal=s,this.sortStatus=!this.sortStatus,this.sortStatus?this.order="asc":this.order="desc",this.$emit("childFun",this.sortVal,this.order,"",1)},sortFilterFun:function(s){this.sortMethod(s.prop)},handleSelectionChange:function(s){for(var t=[],a=0;a<s.length;a++)t.push(s[a].goods_id),this.nameArr.push(s[a].name);this.multipleSelection=t,this.nameArr=Array.from(new Set(this.nameArr)),this.$emit("childFun",this.multipleSelection,"",this.nameArr,4)},handleClick:function(s){this.$emit("edit",s,!1)},delClick:function(s){this.$emit("childFun",s.goods_id,!0,"删除-"+s.name,3)}}},r=n,c=a("2877"),d=Object(c["a"])(r,e,i,!1,null,"62f265e0",null);t["a"]=d.exports},c049:function(s,t,a){"use strict";a.r(t);var e=function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"shopSet"},[a("div",{staticClass:"page-title"},[s._v(s._s(this._getVuex("pageTitle")))]),a("div",{staticClass:"add-box"},[a("div",{staticClass:"btn-nav"},[a("el-button",{attrs:{type:"primary"},on:{click:s.addOpen}},[s._v("新增单品")]),a("el-button",{attrs:{type:"primary"},on:{click:s.addGroupOpen}},[s._v("新增商品套餐")])],1),a("div",{staticClass:"so-nav"},[a("div",{staticClass:"btnBox"},[a("div",{staticClass:"g-btn jia-btn",on:{click:function(t){return s.putawayFun(1)}}},[s._v("上架")]),a("div",{staticClass:"g-btn jia-btn",on:{click:function(t){return s.putawayFun(2)}}},[s._v("下架")]),a("div",{staticClass:"g-btn",on:{click:s.batchDelete}},[s._v("删除")])]),a("el-input",{staticClass:"so-ipt",attrs:{placeholder:"请输入商品名称","suffix-icon":"el-icon-search"},on:{change:s.seachFun},model:{value:s.soVal,callback:function(t){s.soVal=t},expression:"soVal"}}),a("el-button",{staticClass:"sosuo",attrs:{type:"primary"},on:{click:s.seachFun}},[s._v("搜索")])],1)]),a("div",{staticClass:"addClassBtn",on:{click:s.addGoodsClassOpen}},[s._v("新建分类")]),a("div",[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":s.oneTabFun},model:{value:s.tabStatus,callback:function(t){s.tabStatus=t},expression:"tabStatus"}},[a("el-tab-pane",{attrs:{label:"全部商品"}},[a("div",[a("el-tabs",{attrs:{type:"card","tab-position":"left"},on:{"tab-click":s.tabFun},model:{value:s.editableTabsValue,callback:function(t){s.editableTabsValue=t},expression:"editableTabsValue"}},s._l(s.GoodsClass,(function(t){return a("el-tab-pane",{key:t.class_id,attrs:{label:t.class_name,name:t.class_id}},[a("span",{attrs:{slot:"label"},slot:"label"},[s._v(s._s(t.class_name)),a("i",{directives:[{name:"show",rawName:"v-show",value:s.editableTabsValue==t.class_id&&-1!=t.class_id&&-2!=t.class_id,expression:"\n                    editableTabsValue == item.class_id &&\n                    item.class_id != -1 &&\n                    item.class_id != -2\n                  "}],staticClass:"edit-icon el-icon-edit-outline",on:{click:function(a){return s.editClass(t)}}})]),a("goods-item",{attrs:{options:s.options,merchants:s.merchants},on:{childFun:s.parentFun}})],1)})),1)],1)]),a("el-tab-pane",{attrs:{label:"已下架"}},[a("div",[a("el-tabs",{attrs:{type:"card","tab-position":"left"},on:{"tab-click":s.tabFun},model:{value:s.editableTabsValue,callback:function(t){s.editableTabsValue=t},expression:"editableTabsValue"}},s._l(s.GoodsClass,(function(t){return a("el-tab-pane",{key:t.class_id,attrs:{label:t.class_name,name:t.class_id}},[a("span",{attrs:{slot:"label"},slot:"label"},[s._v(s._s(t.class_name)),a("i",{directives:[{name:"show",rawName:"v-show",value:s.editableTabsValue==t.class_id&&-1!=t.class_id&&-2!=t.class_id,expression:"\n                    editableTabsValue == item.class_id &&\n                    item.class_id != -1 &&\n                    item.class_id != -2\n                  "}],staticClass:"edit-icon el-icon-edit-outline",on:{click:function(a){return s.editClass(t)}}})]),a("goods-item",{attrs:{options:s.options},on:{childFun:s.parentFun}})],1)})),1)],1)])],1)],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":s.page,"hide-on-single-page":!0,background:"",layout:"prev, pager, next",total:s.count},on:{"current-change":s.pageChange}})],1),a("el-dialog",{attrs:{title:s.title,visible:s.dialogVisible,width:"30%"},on:{"update:visible":function(t){s.dialogVisible=t}}},[a("el-form",{ref:"classForm",staticClass:"demo-classForm",attrs:{model:s.classForm,rules:s.rules,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"分类名称",prop:"class_name"}},[a("el-input",{model:{value:s.classForm.class_name,callback:function(t){s.$set(s.classForm,"class_name",t)},expression:"classForm.class_name"}})],1),a("el-form-item",{attrs:{label:"排序",prop:"class_sort"}},[a("el-input",{model:{value:s.classForm.class_sort,callback:function(t){s.$set(s.classForm,"class_sort",t)},expression:"classForm.class_sort"}})],1),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-switch",{model:{value:s.classForm.status,callback:function(t){s.$set(s.classForm,"status",t)},expression:"classForm.status"}})],1),a("el-form-item",[a("el-button",{on:{click:function(t){return s.delClass(s.classForm.class_id,s.classForm.class_name)}}},[s._v("删除分类")]),a("el-button",{on:{click:function(t){s.dialogVisible=!1}}},[s._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return s.submitForm("classForm")}}},[s._v("确定")])],1)],1)],1),a("el-dialog",{attrs:{title:"新增商品分类",visible:s.dialogVisibleAdd,width:"30%"},on:{"update:visible":function(t){s.dialogVisibleAdd=t}}},[a("el-form",{ref:"classFormAdd",staticClass:"demo-classForm",attrs:{model:s.classFormAdd,rules:s.rules,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"分类名称",prop:"class_name"}},[a("el-input",{model:{value:s.classFormAdd.class_name,callback:function(t){s.$set(s.classFormAdd,"class_name",t)},expression:"classFormAdd.class_name"}})],1),a("el-form-item",{attrs:{label:"排序",prop:"class_sort"}},[a("el-input",{model:{value:s.classFormAdd.class_sort,callback:function(t){s.$set(s.classFormAdd,"class_sort",t)},expression:"classFormAdd.class_sort"}})],1),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-switch",{model:{value:s.classFormAdd.status,callback:function(t){s.$set(s.classFormAdd,"status",t)},expression:"classFormAdd.status"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return s.submitFormAdd("classFormAdd")}}},[s._v("添加")]),a("el-button",{on:{click:function(t){return s.resetForm("classFormAdd")}}},[s._v("重置")])],1)],1)],1),a("el-dialog",{attrs:{title:s.delClasstitle,visible:s.deldialogClass,width:"30%"},on:{"update:visible":function(t){s.deldialogClass=t}}},[a("span",[s._v("确定要删除此分类吗")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){s.deldialogClass=!1}}},[s._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:s.confirmDelClassFun}},[s._v("确定")])],1)]),a("el-dialog",{attrs:{title:s.deltitle,visible:s.deldialogVisible,width:"30%"},on:{"update:visible":function(t){s.deldialogVisible=t}}},[a("span",[s._v("确定要删除此商品吗")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){s.deldialogVisible=!1}}},[s._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:s.confirmDelFun}},[s._v("确定")])],1)]),a("el-dialog",{attrs:{title:"批量删除",visible:s.batchdialogVisible,width:"30%"},on:{"update:visible":function(t){s.batchdialogVisible=t}}},[a("span",{staticClass:"s-title"},[s._v("确定要删除以下商品吗?")]),s._l(s.nameArr,(function(t,e){return a("div",{key:e,staticClass:"gz-name"},[s._v(" "+s._s(t)+" ")])})),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){s.batchdialogVisible=!1}}},[s._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:s.confirmDelbatch}},[s._v("确定")])],1)],2)],1)},i=[],o=(a("4160"),a("d81d"),a("b0c0"),a("a9e3"),a("ac1f"),a("1276"),a("159b"),a("ade3")),l=(a("4328"),a("83d4")),n={name:"Goods",components:{goodsItem:l["a"]},data:function(){return{shop_id:"",merchant_id:"",merchants:{shop_id:"",merchant_id:""},pageSign:0,soVal:"",options:[],multipleSelection:"",value:!0,page:1,count:0,detaileData:[],dialogVisible:!1,title:"",goods_id:0,sortStatus:!1,f_status:1,dataForm:{goods_id:0,name:"",price:0,vip_price:0,unit:"",image:"",images:"",status:0},rules:{class_name:[{required:!0,message:"请输入分类名称",trigger:"blur"}]},classFormAdd:{class_name:"",class_sort:"",status:1},classForm:{class_id:0,class_name:"",class_sort:"",status:!1},deldialogVisible:!1,deldialogClass:!1,delClasstitle:"",deltitle:"",dialogVisibleAdd:!1,dataFormAdd:{name:"",price:0,vip_price:0,unit:"",image:"",images:"",status:0},batchdialogVisible:!1,nameArr:[],statusArr:[{text:"下架",value:"0"},{text:"售完",value:"1"},{text:"正常",value:"2"},{text:"删除",value:"3"}],order:"asc",sortVal:"",GoodsClass:[],class_id:0,editableTabsValue:"52",tabStatus:"0",sortableList:{ascending:"asc",descending:"desc",asc:"ascending",desc:"descending"}}},watch:{$route:function(s,t){this.iniPageParam(),this.getGoodsList()}},created:function(){var s=this;this.iniPageParam(),this.getGoodsClass((function(){s.getGoodsList()}))},methods:{iniPageParam:function(){this.merchant_id=this.$route.query.merchant_id,this.shop_id=this.$route.query.shop_id,this.merchants={merchant_id:this.merchant_id,shop_id:this.shop_id},this.order=this.$route.query.order,this.sortVal=this.$route.query.sort,this.page=this.$route.query.page?Number(this.$route.query.page):1,this.pageSign=this.$route.query.pageSign,this.soVal=this.$route.query.soVal,this.class_id=this.$route.query.class_id,this.editableTabsValue=this.class_id?String(this.class_id):"0",this.status=this.$route.query.status?this.$route.query.status:"1",this.tabStatus=this.$route.query.tabStatus},parentFun:function(s,t,a,e){1==e?(this.sortVal=s,this.order=t,this.sortDataFun()):2==e?(this.f_status=s,"status"==a&&s?this.filterGetGoodsList():this.getGoodsList()):3==e?(this.deldialogVisible=!0,this.goods_id=s,this.deltitle=a):4==e&&(0==s.length?(this.multipleSelection="",this.nameArr=[]):(this.multipleSelection=s,this.nameArr=a))},filterGetGoodsList:function(){var s=this;this.pageSign=2;var t={page:this.page,status:this.f_status,class_id:this.class_id,merchant_id:this.merchant_id,shop_id:this.shop_id};this.$store.dispatch("goods/getGoodsList",t).then((function(t){s.options=t.data,s.count=t.count}))},sortDataFun:function(){var s=this;this.pageSign=3;var t={page:this.page,sort:this.sortVal,order:this.order,class_id:this.class_id,merchant_id:this.merchant_id,shop_id:this.shop_id};this.$store.dispatch("goods/getGoodsList",t).then((function(t){s.options=t.data,s.count=t.count}))},tabFun:function(){this.class_id=Number(this.editableTabsValue),this.pageChange()},oneTabFun:function(s){"1"==s.index?this.status="2":this.status="1",this.pageChange()},getGoodsList:function(){var s,t=this;this.pageSign=0;var a=(s={shop_id:this.shop_id,merchant_id:this.merchant_id,page:this.page,class_id:this.class_id,pageSign:this.pageSign,name:this.soVal,status:this.status,tabStatus:this.tabStatus},Object(o["a"])(s,"page",this.page),Object(o["a"])(s,"sortVal",this.sortVal),s);this.$store.dispatch("goods/getGoodsList",a).then((function(s){t.options=s.data,t.count=s.count}))},getSoldOutList:function(){var s=this;this.pageSign=4;var t={page:this.page,class_id:this.class_id,status:2,merchant_id:this.merchant_id,shop_id:this.shop_id};this.$store.dispatch("goods/getGoodsList",t).then((function(t){s.options=t.data,s.count=t.count}))},addOpen:function(){this.$router.push({path:"/goods/addGoods",query:{merchant_id:this.merchant_id,shop_id:this.shop_id}})},addGroupOpen:function(){this.$router.push({path:"/goods/addGroupGoods",query:{merchant_id:this.merchant_id,shop_id:this.shop_id}})},resetForm:function(s){this.$refs[s].resetFields()},confirmDelFun:function(){var s=this,t=[];t.push(this.goods_id);var a={id:t,merchant_id:this.merchant_id,shop_id:this.shop_id};this.$store.dispatch("goods/deleteGoods",a).then((function(t){s.$message({message:""+t.msg,type:"success"}),s.getGoodsList(),s.deldialogVisible=!1}))},batchDelete:function(){this.multipleSelection?this.batchdialogVisible=!0:this.$message({message:"请先勾选要删除的商品",type:"warning"})},confirmDelbatch:function(){var s=this,t={id:this.multipleSelection,merchant_id:this.merchant_id,shop_id:this.shop_id};this.$store.dispatch("goods/deleteGoods",t).then((function(t){s.$message({message:""+t.msg,type:"success"}),s.getGoodsList(),s.batchdialogVisible=!1}))},putawayFun:function(s){var t=this,a=s;if(this.multipleSelection){var e={id:this.multipleSelection,status:Number(s),merchant_id:this.merchant_id,shop_id:this.shop_id};this.$store.dispatch("goods/goodsUpDown",e).then((function(s){t.$message({message:""+s.msg,type:"success"}),1==a&&(t.tabStatus="0"),t.getGoodsList(),t.batchdialogVisible=!1}))}else this.$message({message:"请先勾选要操作的商品",type:"warning"})},pageChange:function(s){console.info(this.status),this.page=s||1,this.$router.push({path:"/goods",query:{merchant_id:this.merchant_id,shop_id:this.shop_id,order:this.order,sortVal:this.sortVal,page:this.page,pageSign:this.pageSign,soVal:this.soVal,class_id:this.class_id,status:this.status,tabStatus:this.tabStatus}})},seachFun:function(){this.pageSign=1,this.pageChange()},getGoodsClass:function(s){var t=this,a={page_size:1e4,merchant_id:this.merchant_id,shop_id:this.shop_id};this.$store.dispatch("goods/getGoodsClass",a).then((function(a){t.GoodsClass=a.data,t.GoodsClass.forEach((function(s,a){0==a&&(t.class_id=t.class_id?t.class_id:s.class_id,t.editableTabsValue=t.class_id?String(t.class_id):s.class_id+""),s.class_id=String(s.class_id);var e=s;e.name=a+1+""})),s()}))},editClass:function(s){this.classForm=s,1==this.classForm.status?this.classForm.status=!0:this.classForm.status=!1,this.dialogVisible=!0,this.title="编辑-"+this.classForm.class_name},submitForm:function(s){var t=this;this.$refs[s].validate((function(s){if(!s)return console.log("error submit!!"),!1;1==t.classForm.status?t.classForm.status=1:t.classForm.status=0,delete t.classForm.name,t.classForm.class_sort=Number(t.classForm.class_sort),t.classForm.class_id=Number(t.classForm.class_id);var a=t.classForm;a.merchant_id=t.merchant_id,a.shop_id=t.shop_id,t.$store.dispatch("goods/updateGoodsClass",a).then((function(s){t.$message({message:""+s.msg,type:"success"}),t.getGoodsClass(),t.dialogVisible=!1}))}))},addGoodsClassOpen:function(){this.dialogVisibleAdd=!0},submitFormAdd:function(s){var t=this;this.$refs[s].validate((function(s){if(!s)return console.log("error submit!!"),!1;t.classFormAdd.class_sort=Number(t.classFormAdd.class_sort),1==t.classFormAdd.status?t.classFormAdd.status=1:t.classFormAdd.status=0;var a=t.classFormAdd;a.merchant_id=t.merchant_id,a.shop_id=t.shop_id,console.log(a),t.$store.dispatch("goods/addGoodsClass",a).then((function(s){t.$message({message:""+s.msg,type:"success"}),t.getGoodsClass(),t.dialogVisibleAdd=!1}))}))},delClass:function(s,t){this.deldialogClass=!0,this.class_id=s,this.delClasstitle=t},confirmDelClassFun:function(){var s=this,t=[];t=this.class_id.split(","),t=t.map((function(s){return parseInt(s,0)}));var a={id:t,merchant_id:this.merchant_id,shop_id:this.shop_id};this.$store.dispatch("goods/deleteGoodsClass",a).then((function(t){s.$message({message:""+t.msg,type:"success"}),s.getGoodsClass(),s.deldialogClass=!1,s.dialogVisible=!1}))}}},r=n,c=(a("3224"),a("2877")),d=Object(c["a"])(r,e,i,!1,null,"8d566faa",null);t["default"]=d.exports},f955:function(s,t,a){}}]);
//# sourceMappingURL=chunk-6728a92f.cb63f4c4.js.map